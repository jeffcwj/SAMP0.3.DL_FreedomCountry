
#include <a_samp>
#include <a_mysql>	// MYSQL - R41-4
#include <crashdetect>
#include <log-plugin>
#include <Pawn.CMD>	// 高性能指令
#include <sscanf2>	// 格式化帮手 采用c++的sscanf来进行
#include <colandreas>
#include <streamer>
#include <gvar>		// 高性能全局变数
#include <ForEachPlayer> // 较好的玩家回圈
#include <ForEachNPC>
#include <timerfix>	// 修复及优化计时器的插件
#include <TimestampToDate>
#include <hijack_detect>//by Gamer931215
#include <FCNPC>
#include <nodes>
#include <garage_block>
#include <nex-ac>

//#include <octa>
//#include <anti-aimbot>
//#include <sampac>
//#defines
#define	DEFAULT_SESSION	MySQL:1
#define PUBLIC:%0(%1) forward %0(%1); \
	public %0(%1)
#define HOLDING(%0) \
	((newkeys & (%0)) == (%0))
#define RELEASED(%0) \
	(((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))
#if !defined isnull
#define isnull(%1) ((!(%1[0])) || (((%1[0]) == '\1') && (!(%1[1]))))
#endif
//Mysql
#define	IsDatabaseConnected(%0)	(mysql_errno(%0)==0)
#define	SQLHOST	"localhost"
#define	SQLUSER	"root"
#define	SQLPASS	"freesafreedom2021@yes.com"
//#define	SQLPASS	"root"
#define	SQLDB	"als"
#define	SQLPORT	3306

#define VENDPRICE 30
#define SPEEDO1MAX 170.0
#define SPEEDO2MAX 200.0
#define MAX_NPCS 800
#define MAX_SHOP_WORLD 30
#define MAX_STRIP_WORLD 5
#define MAX_ITEMS	1000
#define MAX_PLANTS	5000
#define MAX_PLAYER_OBJECTS	50000
#define MAX_MISSIONS	1000
#define MAX_DEALS	1000
#define MAX_GOODBUYERS	10
#define MAX_BLETTERS	1000
#define MAX_PT	20
#define MAX_GPS	2048
#define MAX_TPS	2048
#define MAX_PETS 20
#define OBJ_SLOT_POOL (0)
#define MAX_DROPS	5000
#define MAX_AIRDROPS	50
#define MAX_TEAMS	255
#define MAX_RACES 500
#define MAX_RCP 100
#define MAX_COMPANIES 500
#define MAX_CMEMBERS 30
#define MAX_BUS_ROUTES 100
#define MAX_BUS_STOPS 15
#define MAX_GANGS 500
#define MAX_GMEMBERS 30
#define MAX_DEPARTMENTS 10
#define MAX_ESTATES 1024
#define MAX_ANIMAL_SPAWN 50
#define MAX_RESOURCE_SPAWN 100
#define MAX_TREES 150
#define MAX_TREE_SPAWN 100
#define DEFAULT_TREE_WOODS 15
#define MAX_TEXTS 100
#define MAX_MATWARS 25
#define MAX_EVENTS 10
#define MAX_HUNTQUESTS 10
#define MAX_HQPLAYERS 3
#define MAX_GANGZONES 100
#define COMPANY_ID_NONE -1
#define GANG_ID_NONE -1
#define MAX_COMVEHS 10
#define MAX_GANGVEHS 10
#define MAX_PLAYLISTS 100
#define MAX_CRIMES 50
#define MAX_STINGERS 500
#define MAX_ROADBLOCKS 500
#define MAX_LANDMINES 500
#define MAX_GMISSION_PLAYERS 10
#define MAX_GIFTS 2000
#define MAX_PLAYER_GIFTS 100
#define MAX_RTD 5

#define MAX_GZGAIN_MONEY 100000
#define MAX_GZGAIN_WOOD 1000
#define MAX_GZGAIN_IRON 1000
#define MAX_GZGAIN_ROCK 1000
#define MAX_GZGAIN_NITER 1000

#define NEXT_PAGE -1
#define PREV_PAGE -2

#define FERRIS_WHEEL_WAIT_TIME 3000     //Wait Time to enter a Cage
#define FERRIS_WHEEL_SPEED 0.005        //Speed of turn (Standart 0.005)

#define COLOR_WHITE 0xFFFFFFFF//HEX颜色
#define COLOR_GRAD1 0xB4B5B7FF
#define COLOR_GRAD2 0xBFC0C2FF
#define COLOR_GRAD3 0xCBCCCEFF
#define COLOR_GRAD4 0xD8D8D8FF
#define COLOR_GRAD5 0xE3E3E3FF
#define COLOR_GRAD6 0xF0F0F0FF
#define COLOR_BLACK 0x000000FF
#define COLOR_DARKRED 0xAD0000FF
#define COLOR_RED 0xFC0000FF //1
#define COLOR_FADERED 0xFFA3A3FF
#define COLOR_VIOLET 0xFFADFFFF
#define COLOR_NURSEPINK 0xFFD1FFFF
#define COLOR_PINK 0xFF5585FF
#define COLOR_LIGHTRED 0xFF6060FF
#define COLOR_ORANGE 0xFF7700FF
#define COLOR_LIGHTORANGE 0xFFB75EFF
#define COLOR_YELLOW 0xFFDF00FF
#define COLOR_FADEYELLOW 0xFFF298FF
#define COLOR_LIGHTYELLOW 0xFFFF00FF
#define COLOR_YELLOWGREEN 0xECFF00FF
#define COLOR_DARKYELLOWGREEN 0x9AB900FF //2
#define COLOR_LIGHTGREEN 0x83FF00FF
#define COLOR_FADEGREEN 0xD1FF00FF
#define COLOR_GREEN 0x00CF00FF
#define COLOR_DARKGREEN 0x007F00FF
#define COLOR_BLUEGREEN 0x00F185FF
#define COLOR_LIGHTBLUE 0x00FFF2FF
#define COLOR_FADEBLUE 0x9DFFFFFF
#define COLOR_SKYBLUE 0x00DBFFFF
#define COLOR_WATERBLUE 0x00A2FFFF
#define COLOR_BLUE 0x003CFFFF
#define COLOR_PURPLE 0x5200FFFF
#define COLOR_LIGHTPURPLE 0xB100FFFF
#define COLOR_PINKRED 0xFF0095FF
#define COLOR_BLOODRED 0xC80000FF
#define COLOR_DARKBROWN 0x720000FF
#define COLOR_FADEBROWN 0x9B4A4AFF
#define COLOR_BROWN 0xBB7800FF
#define COLOR_SANDYELLOW 0xDBC841FF
#define COLOR_FADE1 0xE6E6E6E6
#define COLOR_FADE2 0xC8C8C8C8
#define COLOR_FADE3 0xAAAAAAAA
#define COLOR_FADE4 0x8C8C8C8C
#define COLOR_FADE5 0x6E6E6E6E

#define TEXT_BLACK "{000000}"
#define TEXT_WHITE "{FFFFFF}"
#define TEXT_GRAD "{B4B5B7}"
#define TEXT_FADERED "{FFA3A3}"
#define TEXT_RED "{FF0000}"
#define TEXT_DARKRED "{AD0000}"
#define TEXT_LIGHTRED "{FF6060}"
#define TEXT_ORANGE "{FF7700}"
#define TEXT_LIGHTORANGE "{FFB75E}"
#define TEXT_PINK "{FF5585}"
#define TEXT_PINKRED "{FF0095}"
#define TEXT_NURSEPINK "{FFD1FF}"
#define TEXT_YELLOW "{FFDF00}"
#define TEXT_FADEYELLOW "{FFF298}"
#define TEXT_LIGHTYELLOW "{FFFF00}"
#define TEXT_YELLOWGREEN "{ECFF00}"
#define TEXT_DARKYELLOWGREEN "{9AB900}"
#define TEXT_LIGHTGREEN "{83FF00}"
#define TEXT_FADEGREEN "{D1FF00}"
#define TEXT_GREEN "{00CF00}"
#define TEXT_DARKGREEN "{007F00}"
#define TEXT_BLUEGREEN "{00F185}"
#define TEXT_LIGHTBLUE "{00FFF2}"
#define TEXT_FADEBLUE "{9DFFFF}"
#define TEXT_SKYBLUE "{00DBFF}"
#define TEXT_WATERBLUE "{00A2FF}"
#define TEXT_BLUE "{003CFF}"
#define TEXT_PURPLE "{5200FF}"
#define TEXT_LIGHTPURPLE "{B100FF}"
#define TEXT_PINKRED "{FF0095}"
#define TEXT_BLOODRED "{C80000}"
#define TEXT_DARKBROWN "{720000}"
#define TEXT_FADEBROWN "{9B4A4A}"
#define TEXT_BROWN "{BB7800}"
#define TEXT_SANDYELLOW "{DBC841}"
#define TEXT_VIOLET "{FFADFF}"

#define PLAYER_WHITE 0xFFFFFF00
#define PLAYER_GRAD 0xA9A9A900
#define PLAYER_DARKRED 0xAD000000
#define PLAYER_RED 0xFC000000
#define PLAYER_FADERED 0xFFA3A300
#define PLAYER_VIOLET 0xFFADFF00
#define PLAYER_NURSEPINK 0xFFD1FF00
#define PLAYER_PINK 0xFF558500
#define PLAYER_LIGHTRED 0xFF606000
#define PLAYER_ORANGE 0xFF770000
#define PLAYER_LIGHTORANGE 0xFFB75E00
#define PLAYER_YELLOW 0xFFDF0000
#define PLAYER_FADEYELLOW 0xFFF2900
#define PLAYER_LIGHTYELLOW 0xFFFF0000
#define PLAYER_YELLOWGREEN 0xECFF0000
#define PLAYER_DARKYELLOWGREEN 0x9AB90000
#define PLAYER_LIGHTGREEN 0x83FF0000
#define PLAYER_FADEGREEN 0xD1FF0000
#define PLAYER_GREEN 0x00CF0000
#define PLAYER_DARKGREEN 0x007F0000
#define PLAYER_BLUEGREEN 0x00F18500
#define PLAYER_LIGHTBLUE 0x00FFF200
#define PLAYER_FADEBLUE 0x9DFFFF00
#define PLAYER_SKYBLUE 0x00DBFF00
#define PLAYER_WATERBLUE 0x00A2FF00
#define PLAYER_BLUE 0x003CFF00
#define PLAYER_PURPLE 0x5200FF00
#define PLAYER_LIGHTPURPLE 0xB100FF00
#define PLAYER_PINKRED 0xFF009500
#define PLAYER_BLOODRED 0xC8000000
#define PLAYER_DARKBROWN 0x72000000
#define PLAYER_FADEBROWN 0x9B4A4A00
#define PLAYER_BROWN 0xBB780000
#define PLAYER_SANDYELLOW 0xDBC84100
#define PLAYER_TAXI 0xFFDF00FF
#define PLAYER_POLICE 0x0054FFFF
#define PLAYER_MEDIC 0xFFB3FFFF
#define PLAYER_TAXI_ALPHA 0xFFDF0000
#define PLAYER_POLICE_ALPHA 0x0054FF00
#define PLAYER_MEDIC_ALPHA 0xFFB3FF00
#define PLAYER_TEAM 0x00FFF2FF
#define PLAYER_RACE 0xFFF29FF

//用 enmu 取代 define 是比较好的作法
//Armour Suit
enum
{
	ARMOUR_NONE,
	ARMOUR_JUGGER,
	ARMOUR_BOPS,
}
//Area
enum
{
	AREA_SA,
	AREA_LS,
	AREA_SF,
	AREA_LV,
}
//Weather
enum
{
	WEATHER_SUNNY,
	WEATHER_CLOUDY,
	WEATHER_RAINY,
	WEATHER_FOGGY,
	WEATHER_DUSTY,
}
//Shop
enum
{
	USESHOP_NONE,
	USESHOP_BURGER,
	USESHOP_PIZZA,
	USESHOP_CHICKEN,
	USESHOP_DONUT,
	USESHOP_247_FOOD,
	USESHOP_247_TOOL,
	USESHOP_247_VITA,
	USESHOP_GAS,
	USESHOP_AMMU_ARMOR,
	USESHOP_SEX,
	USESHOP_PLANT_SEED,
	USESHOP_PLANT_FERT,
	USESHOP_FNT_CNT,//桌椅(Chair&Table)
	USESHOP_FNT_BND,//床与柜子(Bed&Desk)
	USESHOP_FNT_LIGHT,
	USESHOP_FNT_ELEC,
	USESHOP_FNT_OTHER,
}
enum
{
	EQSHOP_NONE,
	EQSHOP_MOBILE,
	EQSHOP_RC,
	EQSHOP_TOOL,
	EQSHOP_PLANT,
	EQSHOP_247_TOOL,
}
//Right TD
enum
{
	RTD_NONE,
	RTD_JOBSALARY,
	RTD_JOBTIME,
	RTD_MSTIME,
	RTD_RACECOUNT,
	RTD_RACECP,
	RTD_RACETIME,
	RTD_GYMCOUNT,
	RTD_GYMBAR,
	RTD_GYMDIST,
	RTD_GUNTIME,
	RTD_GUNPT,
	RTD_POOL,
	RTD_GZTIMER,
	RTD_GZDEF,
}
//Key
enum
{
	KEY_TYPE_NONE,
	KEY_TYPE_IU,
	KEY_TYPE_IEQ,
	KEY_TYPE_ACTIVE,
	KEY_TYPE_ANIM,
}
//Anim List
enum
{
	ANIM_NONE,
	ANIM_NORMAL,
	ANIM_LOOP,
	ANIM_INTER,
	ANIM_DANCE,
}
//Special Vehicle
enum
{
    VSPECIAL_NONE,
    VSPECIAL_ARMORED_SULTAN,
    VSPECIAL_ARMORED_BANGER,
    VSPECIAL_STINGER_TAMPA,
    VSPECIAL_LANDMINE_BF,
    VSPECIAL_LANDMINE_WAYFARER,
    VSPECIAL_AIRBOMB_RAIDER,
    VSPECIAL_ARMORED_MONSTER,
}
//Treasure Type
enum
{
	TREA_NONE,
	TREA_SEA,
	TREA_BURY,
}
//Gift Type
enum
{
	GIFT_NONE,
	GIFT_LEVEL,//等级奖励(达到等级便发放)
	GIFT_DAILY,//每日奖励(每日首次登入即可领取,可设定月范围)
	GIFT_DATE,//日期奖励(限定指定日期领取)
	GIFT_STREAK,//连续登入奖励
}
//Vehicle Service
enum
{
	VSV_NONE,
	VSV_EMMET,
}
//NPC Contact Intent
enum
{
    NCONTACT_MISSION,
    NCONTACT_HELP,
}
//Vehicle Class
enum
{
    VCLASS_ALL,
    VCLASS_LOWRIDER,
    VCLASS_SPORT,
    VCLASS_TRANS,
}
//NPC Team
enum
{
	NTEAM_NONE,
	NTEAM_GSF,
	NTEAM_BALLAS,
	NTEAM_VAGOS,
	NTEAM_AZTECAS,
	NTEAM_RUSSIAN,
	NTEAM_DANANG,
	NTEAM_RIFA,
	NTEAM_TRIAD,
	NTEAM_LEONE,
	NTEAM_SINDACCO,
	NTEAM_LOST,
	NTEAM_CULT,
	NTEAM_TRAMP,
	NTEAM_MWEATHER,
	NTEAM_MATWAR,
	NTEAM_SIMEON,
	NTEAM_CRACK,
	NTEAM_GOV,
}
//Object Type
enum
{
	OBJ_NONE,
	OBJ_CHAIR,
	OBJ_BED,
	OBJ_TV,
	OBJ_SPEAKER,
	OBJ_STORE_SMALL,
	OBJ_STORE_MID,
	OBJ_STORE_LARGE,
	OBJ_DOOR,
	OBJ_BUILD,
	OBJ_DECO,
	OBJ_FIRE,
	OBJ_LIGHT,
	OBJ_PC,
}
//Resource Area
enum
{
	AREA_NONE,
	AREA_CITY,
	AREA_FOREST,
	AREA_DESERT,
	AREA_PANDA,
	AREA_SWAMP,
	AREA_HERBR,
	AREA_HERBY,
	AREA_HERBG,
	AREA_HERBW,
	AREA_TREE,
}
//Mission Type
enum
{
	MISSION_NONE,
	MISSION_TUTORIAL,
	MISSION_DAILY,
	MISSION_GLOBAL,
}
//NPC Class
enum
{
	NPC_NORMAL,
	NPC_NOOB,
	NPC_GANGSTER,
	NPC_HITMAN,
	NPC_SUPER,
}
//Camera Scene
enum
{
	SCENE_NONE,
	SCENE_SKY,
	SCENE_SKYSPAWN,
	SCENE_INTRO,
}
//tptypeID
enum
{
	TP_NONE,
	TP_POLICE_ONLY,
	TP_PRISON_ONLY,
	TP_POLICE,
	TP_MEDIC,
	TP_GOV,
	TP_COUNSELOR,
	TP_247,
	TP_3C,
	TP_TOOL,
	TP_BURGER,
	TP_PIZZA,
	TP_CLUCKIN,
	TP_DONUT,
	TP_AMMU,
	TP_SKIN,
	TP_COLLEGE,
	TP_ARENA_PLAYER1,
	TP_ARENA_PLAYER2,
	TP_ARENA_VEHICLE,
}
enum
{
	ARENA_NONE,
	ARENA_VEHICLE,
	ARENA_PLAYER1,
	ARENA_PLAYER2,
}
//Crime Type
enum
{
	CRIME_NONE,
	CRIME_HIT,
	CRIME_KILL,
	CRIME_DESTROY,
	CRIME_ROB,
	CRIME_STEAL,
	CRIME_MAKEGUN,
	CRIME_HIJACK,
	CRIME_OTHER,
}
//Victim Type
enum
{
	VICTIM_NONE,
	VICTIM_PLAYER,
	VICTIM_VEHICLE,
	VICTIM_ESTATE,
	VICTIM_ANIMAL,
	VICTIM_SHOP,
	VICTIM_OTHER,
}
//Gym Type
enum
{
	GYM_LIFT,
	GYM_BENCH,
	GYM_BIKE,
	GYM_RUN,
}
//Spawn Type
enum
{
	SPAWN_LAST,
	SPAWN_ESTATE,
	SPAWN_POLICE,
	SPAWN_MEDIC,
	SPAWN_GOVERNMENT,
	SPAWN_ARMY,
	SPAWN_COUNSELOR,
	SPAWN_RENT,
}
//Departments
enum
{
	DEPT_NONE,
	DEPT_POLICE,//警察
	DEPT_MEDIC,//医疗
	DEPT_GOVERNMENT,//政府
	DEPT_ARMY,//军队
	DEPT_COUNSELOR,//辅导员
}
//Event Type
enum
{
	EVENT_NONE,
	EVENT_DM,//单人死斗
	EVENT_TDM,//团队死斗
	EVENT_VS,//单人对决(限时计分)
	EVENT_TVS,//团队对决(限时计分)
	EVENT_SURVIVE,//单人生存战
	EVENT_SDM,//小队死斗
	EVENT_SVS,//小队对决
	EVENT_SSUR,//小队生存战
}
//Status
enum
{
	STATUS_FINISHED,
	STATUS_WAITING,
	STATUS_STARTED,
}
//Event Team
enum
{
	EVENT_TEAM_BLUE,
	EVENT_TEAM_RED,
}
//Camera Type
enum
{
    CAMERA_OFF,
	CAMERA_VEHICLE,
	CAMERA_PLAYER,
	CAMERA_SET,
}
//Radio Track Type
enum
{
    RADIO_NONE,
    RADIO_MUSIC,
    RADIO_TEXT,
    RADIO_SPACE,
}
//Gang Zone Type
enum
{
    GZ_NONE,
    GZ_MONEY,
    GZ_WOOD,
    GZ_IRON,
    GZ_NITER,
    GZ_ROCK,
}
//Gang Zone Status
enum
{
    GZ_NORMAL,
    GZ_UNDERATK,
    GZ_CD,
}
//Gang Type
enum
{
	GANG_NONE,
	GANG_BIKER,
	GANG_FAMILY,
	GANG_OG,
	GANG_RELIGION,
	GANG_STAR
}
//Mat War
enum
{
	MW_NONE,
	MW_VEH,
	MW_DROP,
	MW_NPC,
}
//Player Title
enum
{
	TITLE_NONE,
	TITLE_COMPANY,
	TITLE_GANG,
	TITLE_GANG_FULL,
	TITLE_DEPARTMENT,
}
//Phone Contacts
enum
{
	CONTACT_NONE,
	CONTACT_911,
	CONTACT_TOW,
	CONTACT_FD,
	CONTACT_TAXI,
	CONTACT_PLAYER,
	CONTACT_CANCEL,
	CONTACT_GOODS,
	CONTACT_INSURE,
	CONTACT_BOUNTY,
	CONTACT_AD,
	CONTACT_MNPC,
}
//Mission NPC ID
enum
{
	MNPC_NONE,
	MNPC_SWEET,
	MNPC_SIMEON,
	MNPC_TREVOR,
	MNPC_CESAR,
	MNPC_EMMET,
	MNPC_TORENO,
	MNPC_WOOZIE,
}
//Factory Settings
enum
{
	FS_NONE,
	FS_LOAD,
	FS_UNLOAD,
	FS_UPGRADE,
	FS_SWITCH,
	FS_TYPE,
}
//Item Type
enum
{
	ITEM_NONE,
	ITEM_USE,
	ITEM_EQ,
	ITEM_WEAPON,
	ITEM_SKILLPT,
	ITEM_CASH,
	ITEM_BOMB,
	ITEM_MW,
	ITEM_HP,
	ITEM_AR,
	ITEM_MS,
	ITEM_BURY
}
//Use Item Type
enum
{
	IU_NONE,
	IU_FOOD,
	IU_USE,
	IU_MAT,
	IU_FISH,
	IU_SEED,
	IU_OTHER,
	IU_POT,
	IU_FUEL,
	IU_ARMOR,
	IU_FMAT,
	IU_FPROD,
	IU_WEAPON,
	IU_TICKET,
	IU_OBJECT,
	IU_WATER
}
//EQ Item Type
enum
{
	IEQ_NONE,
	IEQ_EQ,
	IEQ_3C,
	IEQ_TOOL,
	IEQ_OTHER,
	IEQ_SKIN,
	IEQ_SKINX,
	IEQ_BOOK,
    IEQ_ATTACH,
    IEQ_LICENSE,
}
//Quest ID
enum
{
	QUEST_NONE,
	QUEST_SIMEON,
	QUEST_SIMEON_MCAR,
	QUEST_TREVOR,
}
//Exp Source
enum
{
	EXP_NONE,
	EXP_JOB,
	EXP_QUEST,
	EXP_RACE,
	EXP_KILL_PLAYER,
	EXP_HUNT,
	EXP_ITEM,
	EXP_PLANT,
	EXP_GYM,
	EXP_TIME,
	EXP_SHOOTRANGE,
	EXP_FIXVEH,
	EXP_STEALVEH,
	EXP_HEAL,
	EXP_SEARCH,
	EXP_CLASS,
	EXP_DIG,
	EXP_FISH,
	EXP_MARKET,
	EXP_HEW,
	EXP_MW,
	EXP_EVENT,
	EXP_ARREST,
	EXP_KILL_NPC,
	EXP_MISSION,
	EXP_GANG,
}
//Estate Setting
enum
{
	ES_NONE,
	ES_EXIT,
	ES_VISITOR,
	ES_MONITOR,
	ES_SPAWN,
	ES_SELL,
	ES_UPGRADE,
	ES_GARAGE,
	ES_TRANSFER,
	ES_SAFE,
	ES_HANGAR,
	ES_FACTORY,
	ES_STORE,
	ES_LOCK,
	ES_RENT,
	ES_NAME,
	ES_UNRENT,
	ES_SETPASS,
}
//Vehicle Attachment
enum
{
	ATTACH_NONE,
	ATTACH_NEON,
	ATTACH_PLATFORM,
	ATTACH_TAXI,
	ATTACH_TAXI_LIGHT,
	ATTACH_SIREN,
	ATTACH_SIREN_LIGHT,
}
//Vehicle Shop
enum
{
	VS_NONE,
    VS_LV1,
    VS_GROTTI,
    VS_SIMEON,
    VS_WANG,
    VS_BISVEH_LS,
    VS_BISVEH_SF,
    VS_BISVEH_LV,
    VS_SFBIKE,
    VS_LSMUSCLE,
    VS_SF1,
}
//Bag Option
enum
{
    BAG_NONE,
    BAG_WEAPON,
    BAG_FOOD,
    BAG_USE,
    BAG_3C,
    BAG_TOOL,
    BAG_ARMOR_AMMO,
    BAG_MAT,
    BAG_FISH,
    BAG_PLANT,
    BAG_GOODS,
    BAG_LICENSE,
    BAG_SKIN,
    BAG_TICKET,
    BAG_MONEY,
    BAG_OBJECT,
}
//Chat Menu Option
enum
{
    CHAT_NONE,
    CHAT_ALL,
    CHAT_DEPT,
    CHAT_DEPT_ALL,
    CHAT_COMPANY,
    CHAT_GANG,
    CHAT_TEAM,
	CHAT_RANGE,
    CHAT_SHOUT,
    CHAT_NEWBIE,
}
//Player Menu Option
enum
{
    PMENU_NONE,
    PMENU_BAG,
    PMENU_INFO,
    PMENU_PROP,
    PMENU_SKILL,
    PMENU_MIX,
    PMENU_DEPT,
	PMENU_TEAM,
    PMENU_COMPANY,
    PMENU_GANG,
    PMENU_CONFIG,
    PMENU_JAIL,
    PMENU_WANTED,
    PMENU_MISSION,
    PMENU_GIFT,
    PMENU_HELP,
	PMENU_ANIM,
}
//Vehicle Panel Options--
enum
{
	VPANEL_NONE,
	VPANEL_ENGINE,
	VPANEL_LIGHT,
	VPANEL_LOCK,
	VPANEL_PARK,
	VPANEL_SETPASS,
	VPANEL_TYPE,
	VPANEL_TAXI,
	VPANEL_EJECT,
	VPANEL_UNRENT,
	VPANEL_BUS,
	VPANEL_PAINTJOB,
	VPANEL_TRUNK,
	VPANEL_HOOD,
	VPANEL_STORE,
	VPANEL_FVENDOR,
	VPANEL_TOW,
	VPANEL_TRAILER,
	VPANEL_MW,
	VPANEL_EXITRC,
	VPANEL_CAMERA,
	VPANEL_POLICE,
	VPANEL_MEDIC,
}
//Estate Type
enum
{
	ESTATE_NONE,
	ESTATE_SUITE,
	ESTATE_HOUSE,
	ESTATE_OFFICE,
	ESTATE_CLUBHOUSE,
	ESTATE_WAREHOUSE,
	ESTATE_HANGAR,
	ESTATE_BOATYARD,
	ESTATE_FACTORY,
}
//Estate Owner Type
enum
{
    ESTATE_OWNER_NONE,
	ESTATE_OWNER_PLAYER,
	ESTATE_OWNER_DEPARTMENT,
	ESTATE_OWNER_COMPANY,
	ESTATE_OWNER_GANG,
}
//Company/Gang/Department Member Status
enum
{
	MEMBER_NONE,
	MEMBER_APPLYING,
	MEMBER_JOINED,
}
//Vehicle Type
enum
{
 	VTYPE_NONE,
	VTYPE_PLAYER,
	VTYPE_DEPARTMENT,
	VTYPE_COMPANY,
	VTYPE_GANG,
	VTYPE_RENT,
	VTYPE_MW,
	VTYPE_RC,
	VTYPE_MISSION,
	VTYPE_SERVICE,
	VTYPE_ARENA,
}
//Company Business Type
enum
{
	BIS_NONE,
	BIS_TAXI,
	BIS_BUS,
	BIS_HELI,
	BIS_AIRLINE,
	BIS_BOAT,
	BIS_MEDIA,
	BIS_ANIMAL,
	BIS_TRADE,
}
//Vehicle Password Unlocking--
enum
{
	VPASS_ENGINE,
	VPASS_SETPASS,
}
//GPS Type
enum
{
	GPS_NONE,
	GPS_SHOP,
	GPS_VEH,
	GPS_SPOT,
	GPS_FUNCTION,
	GPS_JOB,
	GPS_COLLEGE,
	GPS_GOODS,
	GPS_PROP_SUITE,
	GPS_PROP_HOUSE,
	GPS_PROP_OFFICE,
	GPS_PROP_CLUBHOUSE,
	GPS_PROP_WAREHOUSE,
	GPS_PROP_HANGAR,
	GPS_PROP_BOATYARD,
	GPS_PROP_FACTORY,
	GPS_RACE,
}
//Clothes Shop Type
enum
{
	CS_BINCO,
	CS_ZIP,
	CS_VICTIM,
	CS_DDS,
	CS_NEW,
}
//Vehicle Status
enum
{
	VEH_NORMAL,
	VEH_STOLEN,
	VEH_DESTROYED,
	VEH_STORED,
	VEH_UNDELIVERED,
}
//Market Type
enum//mType
{
	MARKET_NONE,
	MARKET_CAR,
	MARKET_MAT,
	MARKET_GUN,
	MARKET_FISHERY,
	MARKET_FISH,
	MARKET_PLANT,
	MARKET_HUNT,
}
//Race Type
enum//rtType
{
	RACE_NONE,
	RACE_ROAD_A,//陆上赛道(指定车辆)
	RACE_ROAD_C,//陆上赛道(自备车辆)
    RACE_AIR_A,//空中赛道(指定飞机)
    RACE_AIR_C,//空中赛道(自备飞机)
    RACE_LAP_A,//环状赛道(指定车辆)
    RACE_LAP_C,//环状赛道(自备车辆)
}
//Job ID
enum
{
	JOB_NONE,
	JOB_TRASH,//1
	JOB_TRUCK,
	JOB_PAPER,
	JOB_SWEEPER,
	JOB_HUNTER,
	JOB_TOW,//6
	JOB_FISHER,
	JOB_HOUSESELL,
	JOB_CARSELL,
	JOB_MINER,
	JOB_LUMBERJACK,//11
	JOB_FD,
	JOB_FVENDOR,
}
//Dialogs
enum
{
	DIALOG_NONE,
	DIALOG_LOGIN,				//1//登入用的Dialog
	DIALOG_REGISTER,			//2//注册用的Dialog
	DIALOG_LVCARSELL1,			//3
	DIALOG_BUYCAR,				//4
	DIALOG_MP3,					//5
	DIALOG_MVO,					//6
	DIALOG_MVO_TRASHCAR,		//7
	DIALOG_MVO_TRASHCAR_CHECK,	//8
	DIALOG_CHICKEN,				//9
	DIALOG_PIZZA,				//10
	DIALOG_BURGER,				//11
	DIALOG_DONUT,				//12
	DIALOG_CLICKME,				//13
	DIALOG_BAG,					//14
	DIALOG_BAG_CHECK_USE,		//15
	DIALOG_BAG_USE,				//16
	DIALOG_BAG_CHECK_EQ,		//17
	DIALOG_BAG_EQ,				//18
	DIALOG_SHOP_BUY_EQ,			//19
	DIALOG_SHOP_BUY_USE,		//20
	DIALOG_247,					//21
	DIALOG_247_FOOD,			//22
	DIALOG_247_USETOOL,			//23
	DIALOG_247_EQTOOL,			//24
	DIALOG_247_VITA,			//25
	DIALOG_REGISTER_CHECK,		//26
	DIALOG_CHAT,				//27
	DIALOG_CHAT_ALL,			//28
	DIALOG_CHAT_SHOUT,			//29
	DIALOG_CHAT_ME,				//30
	DIALOG_GROTTI,				//31
	DIALOG_JOB_TRASH,			//32
	DIALOG_JOB_FD,				//33
	DIALOG_CONTRACT,		    //34
	DIALOG_JOB_CANCEL,          //35
	DIALOG_PLANT_CHECK,         //36
	DIALOG_SHOP_POT,         	//37
	DIALOG_SHOP_POT_BUY1,       //38
	DIALOG_MPLANT_SELL,         //39
	DIALOG_MPLANT_SELLCHECK,	//40
	DIALOG_PLANT_DELETE,
	DIALOG_SHOP_POT_BUY2,
	DIALOG_SHOP_POT_BUY3,
	DIALOG_247_BUYSPACE,
 	DIALOG_BAG_SELECT_USE,
 	DIALOG_BAG_SELECT_EQ,
 	DIALOG_BAG_GIVE_USE1,
 	DIALOG_BAG_GIVE_USE2,
 	DIALOG_BAG_GIVE_EQ,
 	DIALOG_JOB_TRAILER,
 	DIALOG_BAG_THROW_USE,
 	DIALOG_JOB_FD1,
 	DIALOG_JOB_FD2,
 	DIALOG_JOB_FD2_START,
 	DIALOG_SIMEON,
 	DIALOG_SHAREMAP_VEH,
 	DIALOG_SHAREMAP_TEAM,
 	DIALOG_MFISH,
 	DIALOG_MFISH_SELLCHECK,
 	DIALOG_MFISH_SELL,
 	DIALOG_MGUN,
 	DIALOG_MGUN_SELLCHECK,
 	DIALOG_MGUN_SELL,
 	DIALOG_MGUN_CANCEL,
 	DIALOG_MGUN_CREATE1,
 	DIALOG_MGUN_CREATE2,
 	DIALOG_MGUN_CREATE3,
 	DIALOG_MGUN_DEAL,
 	DIALOG_MMAT,
 	DIALOG_MMAT_SELLCHECK,
 	DIALOG_MMAT_SELL,
 	DIALOG_MMAT_CANCEL,
 	DIALOG_MMAT_CREATE1,
 	DIALOG_MMAT_CREATE2,
 	DIALOG_MMAT_CREATE3,
 	DIALOG_MMAT_DEAL,
 	DIALOG_SETPLAYER,
 	DIALOG_SETPLAYER_AMOUNT,
 	DIALOG_SETPOINT,
 	DIALOG_SETPOINT_AMOUNT,
 	DIALOG_SETSKILL,
 	DIALOG_SETSKILL_AMOUNT,
	DIALOG_MIX,
	DIALOG_MIX_SELECT,
	DIALOG_MIX_AMOUNT,
	DIALOG_MIX_CHECK,
	DIALOG_VMOD_CHECK,
	DIALOG_VMOD_FIX,
	DIALOG_VMOD,
	DIALOG_VMOD_TUNE,
	DIALOG_VMOD_TUNE_LIST,
	DIALOG_VMOD_TUNE_CHECK,
	DIALOG_VMOD_PAINTJOB,
	DIALOG_VMOD_PAINTJOB_CHECK,
	DIALOG_VMOD_RETURN,
	DIALOG_VMOD_NEON,
	DIALOG_VMOD_ARMOR,
	DIALOG_VMOD_SPIKE,
	DIALOG_VMOD_LOCK,
	DIALOG_VMOD_PLATE,
	DIALOG_VMOD_RESET,
	DIALOG_VMOD_SPEEDO,
	DIALOG_VMOD_SPECIAL,
	DIALOG_VMOD_TAXI,
	DIALOG_VMOD_TURBO,
	DIALOG_VPANEL,
	DIALOG_VPANEL_PASS,
	DIALOG_VPANEL_SETPASS,
	DIALOG_VPANEL_TYPE,
	DIALOG_VPANEL_FVENDOR,
	DIALOG_VPANEL_FVENDOR_COOK,
	DIALOG_VPANEL_FVENDOR_PRICE,
	DIALOG_TAXI_FARE,
	DIALOG_BUS_FARE,
	DIALOG_TOOLSHOP,
	DIALOG_SKILL,
	DIALOG_SKILL_CHECK,
	DIALOG_SKILL_UP,
	DIALOG_SKILL_WEAPON,
	DIALOG_TOOLBOX,
	DIALOG_SKILL_ACTIVE,
	DIALOG_SKILL_ACTIVE_CHECK,
	DIALOG_HEAL,
	DIALOG_SEARCH,
	DIALOG_SEARCH_PLAYER,
	DIALOG_SEARCH_VEHICLE,
	DIALOG_WANGCAR,
	DIALOG_CONFIG,
	DIALOG_WALK,
	DIALOG_FIGHTSTYLE,
	DIALOG_AMMU,
	DIALOG_AMMU_RANGE,
	DIALOG_AMMU_BUYCHECK_GUN,
	DIALOG_AMMU_BUY_GUN,
	DIALOG_AMMU_BUY_ARMOR,
	DIALOG_AMMU_PAINT,
	DIALOG_GYM_LS,
	DIALOG_GYM_SF,
	DIALOG_GYM_LV,
	DIALOG_GYM_BEACH,
	DIALOG_GYM_PRISON,
	DIALOG_CLASS,
	DIALOG_MCAR,
 	DIALOG_MCAR_SELLCHECK,
 	DIALOG_MCAR_SELL,
 	DIALOG_PD,
 	DIALOG_PD_MEMBER,
 	DIALOG_PD_REVEH,
 	DIALOG_PD_GUNLIC,
 	DIALOG_PD_GUNLIC_CHECK1,
 	DIALOG_PD_GUNLIC_CHECK2,
 	DIALOG_SHOP_MOBILE,
 	DIALOG_GPS,
 	DIALOG_GPS_SEARCH,
 	DIALOG_GPS_TYPE,
 	DIALOG_GPS_NEAR,
 	DIALOG_GPS_NEAR2,
 	DIALOG_GPS_SEARCHANY,
 	DIALOG_POOL_CREATE,
 	DIALOG_POOL_JOIN,
 	DIALOG_TREVOR_QUEST,
 	DIALOG_PET,
 	DIALOG_PET_CHECK,
 	DIALOG_PET_CMD,
 	DIALOG_PET_CMDSET,
 	DIALOG_PET_NAME,
 	DIALOG_PET_ABANDON,
 	DIALOG_PET_RECRUIT,
 	DIALOG_BAR,
 	DIALOG_STRIPER,
 	DIALOG_SHOP_PET,
 	DIALOG_SHOP_PET_BUY,
 	DIALOG_OBSERVE,
	DIALOG_OBSERVE_ANIMAL,
	DIALOG_OBSERVE_DROP,
 	DIALOG_QUITJOB,
 	DIALOG_SETRACE,
 	DIALOG_SETRACE_CREATE_NAME,
 	DIALOG_SETRACE_CREATE_INFO,
 	DIALOG_SETRACE_CREATE_TYPE,
 	DIALOG_SETRACE_CREATE_MAX,
 	DIALOG_SETRACE_CREATE_VEH,
 	DIALOG_SETRACE_EDIT,
 	DIALOG_SETRACE_EDIT_CHECK,
 	DIALOG_SETRACE_DELETE,
 	DIALOG_STARTRACE,
	DIALOG_JOINRACE,
	DIALOG_JOINRACE_VEH,
	DIALOG_BAG_TRADE_USE1,
 	DIALOG_BAG_TRADE_USE2,
 	DIALOG_BAG_TRADE_USE3,
 	DIALOG_BAG_TRADE_EQ1,
 	DIALOG_BAG_TRADE_EQ2,
 	DIALOG_TRADE_USE,
 	DIALOG_TRADE_EQ,
 	DIALOG_SKILL_RESET,
 	DIALOG_TEAM_NONE,
 	DIALOG_TEAM_LEADER,
 	DIALOG_TEAM_MEMBER,
 	DIALOG_TEAM_LIST,
 	DIALOG_TEAM_MEMBERS,
 	DIALOG_TEAM_INVITE,
 	DIALOG_TEAM_KICK,
    DIALOG_TEAM_SETTING,
    DIALOG_TEAM_NAME,
    DIALOG_TEAM_LEAVE,
 	DIALOG_INVITE_TEAM,
 	DIALOG_INVITE_COMPANY,
 	DIALOG_INVITE_GANG,
 	DIALOG_INVITE_DEPT,
 	DIALOG_CHAT_TEAM,
 	DIALOG_CHAT_COMPANY,
 	DIALOG_CHAT_GANG,
 	DIALOG_CHAT_DEPARTMENT,
 	DIALOG_CHAT_ALLDEPARTMENT,
 	DIALOG_SHOP_SKIN,
 	DIALOG_SHOP_SKIN_CHEAP,
 	DIALOG_SHOP_SKIN_LEISURE,
 	DIALOG_SHOP_SKIN_MODERN,
 	DIALOG_SHOP_SKIN_STREET,
 	DIALOG_SHOP_SKIN_COUNTRY,
 	DIALOG_SHOP_SKIN_BUSINESS,
 	DIALOG_SHOP_SKIN_SUIT,
 	DIALOG_JOB_FISHER,
 	DIALOG_VEH,
 	DIALOG_VEH_INFO,
 	DIALOG_FISHERY,
 	DIALOG_FISHERY_INV,
 	DIALOG_FISHERY_SELL,
 	DIALOG_GASSHOP,
 	DIALOG_JOB_CARSELL,
 	DIALOG_JOB_CARSELL_LOAD,
 	DIALOG_JOB_CARSELL_REQUEST,
 	DIALOG_CMD,
 	DIALOG_COMPANY,
 	DIALOG_CITYHALL,
 	DIALOG_CITYHALL_COMPANY,
 	DIALOG_CITYHALL_MEMBER,
 	DIALOG_CITYHALL_PRICE,
 	DIALOG_CITYHALL_DEPT,
 	DIALOG_CITYHALL_DEPT_SET,
 	DIALOG_CITYHALL_DEPT_FUND,
 	DIALOG_CITYHALL_ANNOUNCE,
 	DIALOG_CITYHALL_WANTED1,
 	DIALOG_CITYHALL_WANTED2,
 	DIALOG_CITYHALL_WANTED1_SET,
 	DIALOG_CITYHALL_WANTED2_SET,
 	DIALOG_CITYHALL_WANTED2_TIME,
 	DIALOG_CITYHALL_WANTED2_FINE,
 	DIALOG_CITYHALL_FUND,
 	DIALOG_CITYHALL_TAX,
 	DIALOG_CITYHALL_WELFARE,
 	DIALOG_CITYHALL_SET,
	DIALOG_ESTATE_PASS,
    DIALOG_ESTATE_SETPASS,
 	DIALOG_ESTATE_VISIT,
 	DIALOG_ESTATE_BUY,
 	DIALOG_ESTATE_BUYFOR,
 	DIALOG_ESTATE_EXIT,
 	DIALOG_ESTATE_VISITOR,
 	DIALOG_ESTATE_RENT,
 	DIALOG_ESTATE_NAME,
 	DIALOG_SPAWN,
 	DIALOG_SPAWN_ESTATE,
 	DIALOG_SPAWN_DEPARTMENT,
 	DIALOG_COMPANY_CREATE,
 	DIALOG_COMPANY_CREATE_COLOR,
 	DIALOG_COMPANY_CREATE_NAME,
 	DIALOG_COMPANY_LIST,
 	DIALOG_COMPANY_LIST_INFO,
 	DIALOG_COMPANY_APPLY,
 	DIALOG_COMPANY_MEMBERS,
 	DIALOG_COMPANY_MEMBERS_SET,
 	DIALOG_COMPANY_MEMBERS_RANK,
 	DIALOG_COMPANY_MEMBERS_FIRE,
 	DIALOG_COMPANY_ESTATE,
 	DIALOG_COMPANY_ESTATE_SET,
 	DIALOG_COMPANY_ESTATE_SELL,
 	DIALOG_COMPANY_BUSINESS,
 	DIALOG_COMPANY_BUSINESS_BOSS,
 	DIALOG_COMPANY_BUSINESS_DISBAND,
 	DIALOG_COMPANY_BUS,
 	DIALOG_COMPANY_BUS_FARE,
 	DIALOG_COMPANY_TAXI,
 	DIALOG_COMPANY_TAXI_FARE1,
 	DIALOG_COMPANY_TAXI_FARE2,
 	DIALOG_COMPANY_VEHICLE,
 	DIALOG_COMPANY_VEHICLE_SET,
 	DIALOG_COMPANY_VEHICLE_SELL,
 	DIALOG_COMPANY_SETTING,
 	DIALOG_COMPANY_APPLY_LIST,
 	DIALOG_COMPANY_APPLY_CHECK,
 	DIALOG_COMPANY_INVITE,
 	DIALOG_COMPANY_RANK,
 	DIALOG_COMPANY_RANK_NAME1,
 	DIALOG_COMPANY_RANK_NAME2,
 	DIALOG_COMPANY_RANK_SETTING,
 	DIALOG_COMPANY_NAME,
 	DIALOG_COMPANY_COLOR,
	DIALOG_COMPANY_CATALOG,
 	DIALOG_COMPANY_FUND,
 	DIALOG_COMPANY_FUND_WITHDRAW,
 	DIALOG_COMPANY_FUND_DEPOSIT,
 	DIALOG_COMPANY_FUND_DONATE,
 	DIALOG_COMPANY_TRANSFER,
 	DIALOG_COMPANY_TRANSFER_CHECK,
 	DIALOG_COMPANY_DISBAND,
 	DIALOG_COMPANY_DISBAND_CHECK,
 	DIALOG_COMPANY_QUIT,
 	DIALOG_COMPANY_BUSINESS_CREATE1,
 	DIALOG_COMPANY_BUSINESS_CREATE2,
 	DIALOG_PARK,
 	DIALOG_BISVEHSELL_LS,
 	DIALOG_BISVEHSELL_SF,
 	DIALOG_BISVEHSELL_LV,
 	DIALOG_ESTATE_SETTING,
 	DIALOG_ESTATE_GARAGE,
 	DIALOG_ESTATE_HANGAR,
 	DIALOG_ESTATE_UPGRADE,
 	DIALOG_ESTATE_UPGRADE_INT1,
 	DIALOG_ESTATE_UPGRADE_INT2,
 	DIALOG_ESTATE_UPGRADE_EQ,
 	DIALOG_ESTATE_STORE,
 	DIALOG_ESTATE_STORE_SAVE,
 	DIALOG_ESTATE_STORE_LOAD,
 	DIALOG_ESTATE_STORE_LOAD_CHECK,
 	DIALOG_ESTATE_SAFE,
 	DIALOG_ESTATE_SAFE_WITHDRAW,
 	DIALOG_ESTATE_SAFE_DEPOSIT,
 	DIALOG_ESTATE_FACTORY,
 	DIALOG_RENTCAR,
 	DIALOG_BUSROUTE,
 	DIALOG_BUSROUTE_CREATE,
 	DIALOG_BUSROUTE_EDIT,
 	DIALOG_BUSROUTE_EDIT_CHECK,
 	DIALOG_BUSROUTE_DELETE,
 	DIALOG_BUSROUTE_NEWSTOP,
 	DIALOG_BUSROUTE_START,
 	DIALOG_BUSROUTE_EDIT_NAME,
 	DIALOG_BAG_CHECK,
	DIALOG_BAG_WEAPON,
	DIALOG_BAG_MONEY,
	DIALOG_BAG_MONEY_THROW,
	DIALOG_BAG_MONEY_GIVE1,
	DIALOG_BAG_MONEY_GIVE2,
	DIALOG_BOOK_MAT,
	DIALOG_BOOK_MIX,
	DIALOG_ATM,
	DIALOG_ATM_DEPOSIT,
	DIALOG_ATM_WITHDRAW,
	DIALOG_ATM_TRANSFER1,
	DIALOG_ATM_TRANSFER2,
	DIALOG_VSTORE,
	DIALOG_VSTORE_SAVE,
	DIALOG_VSTORE_LOAD,
	DIALOG_VSTORE_LOAD_CHECK,
	DIALOG_SFBIKE,
	DIALOG_ESTATE_FACTORY_LOAD,
	DIALOG_ESTATE_FACTORY_UNLOAD,
	DIALOG_ESTATE_FACTORY_TYPE1,
	DIALOG_ESTATE_FACTORY_TYPE2,
	DIALOG_ESTATE_FACTORY_SWITCH,
	DIALOG_ESTATE_FACTORY_UPGRADE,
	DIALOG_MHUNT,
 	DIALOG_MHUNT_SELLCHECK,
 	DIALOG_MHUNT_SELL,
 	DIALOG_JOB_LUMBERJACK,
 	DIALOG_JOB_LUMBERJACK_SELL,
 	DIALOG_JOB_MINER,
 	DIALOG_JOB_MINER_SELL1,
 	DIALOG_JOB_MINER_SELL2,
 	DIALOG_JOB_FVENDOR,
 	DIALOG_JOB_FVENDOR_BUYPROD,
 	DIALOG_FVENDOR_BUY,
 	DIALOG_PHONE,
 	DIALOG_PHONE_CONTACT,
 	DIALOG_PHONE_CONTACT_CHECK,
 	DIALOG_PHONE_CONTACT_NPC,
 	DIALOG_PHONE_CONTACT_TAXI,
 	DIALOG_PHONE_CALL,
    DIALOG_PHONE_TEXT_SEND,
 	DIALOG_PHONE_TEXT_LIST,
 	DIALOG_PHONE_TEXT_CHECK,
 	DIALOG_PHONE_TEXT_OPTION,
 	DIALOG_PHONE_SETTING,
 	DIALOG_PHONE_CALLED,
 	DIALOG_RADIO,
 	DIALOG_JOB_TOW,
 	DIALOG_TOW_TO,
 	DIALOG_INFO,
 	DIALOG_INFO_TITLE,
 	DIALOG_INFO_RECORD,
 	DIALOG_GOODS,
 	DIALOG_GOODS_INFO,
 	DIALOG_GOODS_JOINWAR,
 	DIALOG_GOODS_BUY1,
 	DIALOG_GOODS_BUY2,
 	DIALOG_GOODS_BUYERS,
 	DIALOG_GOODS_SELL1,
 	DIALOG_GOODS_SELL2,
 	DIALOG_GOODS_SELL3,
 	DIALOG_GANG,
 	DIALOG_GANG_NONE,
 	DIALOG_GANG_CREATE,
 	DIALOG_GANG_CREATE_COLOR,
 	DIALOG_GANG_CREATE_NAME,
 	DIALOG_GANG_CREATE_SHORT,
 	DIALOG_GANG_CREATE_TYPE,
 	DIALOG_GANG_LIST,
 	DIALOG_GANG_LIST_INFO,
 	DIALOG_GANG_APPLY,
 	DIALOG_GANG_MEMBERS,
 	DIALOG_GANG_MEMBERS_SET,
 	DIALOG_GANG_MEMBERS_RANK,
 	DIALOG_GANG_MEMBERS_FIRE,
 	DIALOG_GANG_ESTATE,
 	DIALOG_GANG_ESTATE_SET,
 	DIALOG_GANG_ESTATE_SELL,
 	DIALOG_GANG_VEHICLE,
 	DIALOG_GANG_VEHICLE_SET,
 	DIALOG_GANG_VEHICLE_SELL,
 	DIALOG_GANG_TURF,
 	DIALOG_GANG_TURF_SET,
 	DIALOG_GANG_TURF_GAIN,
 	DIALOG_GANG_TURF_UPGRADE,
 	DIALOG_GANG_TURF_REPAIR,
 	DIALOG_GANG_TURF_ABANDON,
 	DIALOG_GANG_SETTING,
 	DIALOG_GANG_APPLY_LIST,
 	DIALOG_GANG_APPLY_CHECK,
 	DIALOG_GANG_INVITE,
 	DIALOG_GANG_RANK,
 	DIALOG_GANG_RANK_NAME1,
 	DIALOG_GANG_RANK_NAME2,
 	DIALOG_GANG_RANK_SETTING,
	DIALOG_GANG_CATALOG,
 	DIALOG_GANG_SHORT,
 	DIALOG_GANG_COLOR,
 	DIALOG_GANG_FUND,
 	DIALOG_GANG_FUND_WITHDRAW,
 	DIALOG_GANG_FUND_DEPOSIT,
 	DIALOG_GANG_FUND_DONATE,
 	DIALOG_GANG_TRANSFER,
 	DIALOG_GANG_TRANSFER_CHECK,
 	DIALOG_GANG_DISBAND,
 	DIALOG_GANG_DISBAND_CHECK,
 	DIALOG_GANG_SKILL,
 	DIALOG_GANG_SKILL_CHECK,
 	DIALOG_GANG_QUIT,
 	DIALOG_FISH,
 	DIALOG_GANGZONE,
 	DIALOG_GANGZONE_SETTING,
 	DIALOG_GANGZONE_OWNER,
 	DIALOG_CLICKME_PROPERTY,
 	DIALOG_PLAYER_ESTATE,
 	DIALOG_PLAYER_ESTATE_SET,
 	DIALOG_PLAYER_ESTATE_SELL,
 	DIALOG_RC_SHOP,
 	DIALOG_SEX_SHOP,
 	DIALOG_TV,
 	DIALOG_TV_LIST,
 	DIALOG_TV_CHANNEL,
 	DIALOG_TV_EVENT,
 	DIALOG_TV_ARENA,
 	DIALOG_TV_EVENT_PLAYER,
 	DIALOG_TV_ARENA_PLAYER,
 	DIALOG_COMPANY_MEDIA,
 	DIALOG_COMPANY_MEDIA_RADIO,
 	DIALOG_COMPANY_MEDIA_RADIO_NAME,
 	DIALOG_COMPANY_MEDIA_RADIO_TEXT,
 	DIALOG_COMPANY_MEDIA_RADIO_MP3,
 	DIALOG_COMPANY_MEDIA_RADIO_AIR,
 	DIALOG_COMPANY_MEDIA_RADIO_LIST,
 	DIALOG_COMPANY_MEDIA_RADIO_ADD1,
 	DIALOG_COMPANY_MEDIA_RADIO_ADD2,
 	DIALOG_COMPANY_MEDIA_RADIO_ADD3,
 	DIALOG_COMPANY_MEDIA_RADIO_ADD4,
 	DIALOG_COMPANY_MEDIA_RADIO_ADD5,
 	DIALOG_COMPANY_MEDIA_RADIO_END,
 	DIALOG_COMPANY_MEDIA_RADIO_MAX,
 	DIALOG_COMPANY_MEDIA_RADIO_DEL,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT,
 	DIALOG_COMPANY_MEDIA_RADIO_SET,
 	DIALOG_COMPANY_MEDIA_RADIO_CHAT,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT1,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT2,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT3,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT4,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT5,
 	DIALOG_COMPANY_MEDIA_RADIO_EDT6,
 	DIALOG_COMPANY_MEDIA_TV,
 	DIALOG_COMPANY_MEDIA_TV_FILMER,
 	DIALOG_COMPANY_MEDIA_TV_NAME,
 	DIALOG_COMPANY_MEDIA_EARN,
 	DIALOG_CAMERA_VEH,
	DIALOG_CAMERA_PLAYER,
	DIALOG_CAMERA_PLAYER_ANGLE,
	DIALOG_EVENT_JOIN,
	DIALOG_EVENT_EXIT,
	DIALOG_EVENT,
	DIALOG_EVENT_START1,
	DIALOG_EVENT_START2,
	DIALOG_EVENT_START3,
	DIALOG_EVENT_START4,
	DIALOG_EVENT_START5,
	DIALOG_EVENT_LIST,
	DIALOG_EVENT_ADMIN,
	DIALOG_DEPT,
	DIALOG_DEPT_ADMIN,
	DIALOG_DEPT_CATALOG,
	DIALOG_DEPT_SETLD,
	DIALOG_DEPT_SETFUND,
	DIALOG_DEPT_GIVEFUND,
	DIALOG_DEPT_APPLY,
	DIALOG_DEPT_APPLY_LIST,
	DIALOG_DEPT_APPLY_CHECK,
	DIALOG_DEPT_INVITE,
	DIALOG_DEPT_FUND,
	DIALOG_DEPT_FUND_WITHDRAW,
 	DIALOG_DEPT_FUND_DEPOSIT,
	DIALOG_DEPT_TRANSFER,
	DIALOG_DEPT_TRANSFER_CHECK,
	DIALOG_DEPT_MEMBERS,
	DIALOG_DEPT_MEMBER,
	DIALOG_DEPT_SETRANK,
	DIALOG_DEPT_KICK,
	DIALOG_DEPT_VEHICLE,
	DIALOG_DEPT_VEHICLE_SET,
	DIALOG_DEPT_HQ,
	DIALOG_DEPT_SETTING,
	DIALOG_DEPT_QUIT,
	DIALOG_DEPT_STORE,
	DIALOG_DEPT_STORE_SAVE,
	DIALOG_DEPT_STORE_LOAD,
	DIALOG_DEPT_STORE_LOAD_CHECK,
	DIALOG_LSMUSCLE,
	DIALOG_CODE,
	DIALOG_INSURANCE,
	DIALOG_INSURANCE_CHECK,
	DIALOG_911,
	DIALOG_911_POLICE,
	DIALOG_911_MEDIC,
	DIALOG_JAIL,
	DIALOG_JAIL_SHOP,
	DIALOG_JAIL_PAROLE,
	DIALOG_PRISON,
	DIALOG_PRISON_LIST,
	DIALOG_PRISON_CHECK,
	DIALOG_POLICE,
	DIALOG_POLICE_SKILL,
	DIALOG_VPANEL_POLICE,
	DIALOG_POLICE_TRACE,
	DIALOG_POLICE_WANTED1,
	DIALOG_POLICE_WANTED2,
	DIALOG_POLICE_WANTED3,
	DIALOG_PD_DUTY,
	DIALOG_LILBIKE,
	DIALOG_POLICE_CRIMINAL,
	DIALOG_FRISK_LIST,
	DIALOG_FRISK_TAKE,
	DIALOG_FRISK_TAKE_CHECK,
	DIALOG_FRISK_NONE,
	DIALOG_DETECT,
	DIALOG_WANTED,
	DIALOG_WANTED_SURR,
	DIALOG_VEH_TRADE1,
	DIALOG_VEH_TRADE2,
	DIALOG_ESTATE_TRADE1,
	DIALOG_ESTATE_TRADE2,
	DIALOG_TRADE_VEH,
 	DIALOG_TRADE_ESTATE,
 	DIALOG_HP,
 	DIALOG_HP_APP,
 	DIALOG_HP_BUY,
 	DIALOG_HP_BUY_CHECK,
 	DIALOG_HP_MEMBER,
 	DIALOG_HP_MIX,
 	DIALOG_HP_CURELIST,
 	DIALOG_VPANEL_MEDIC,
 	DIALOG_VPANEL_MEDIC_LIST,
 	DIALOG_VPANEL_MEDIC_CURE,
 	DIALOG_MEDIC,
 	DIALOG_COUNSELOR,
 	DIALOG_COUNSELOR_NEWBIE,
 	DIALOG_BOUNTY,
 	DIALOG_BOUNTY_CREATE1,
 	DIALOG_BOUNTY_CREATE2,
 	DIALOG_PHONEBOOTH,
	DIALOG_MVO_MEMBER,
	DIALOG_CHAT_NEWBIE,
	DIALOG_AD,
	DIALOG_GOV,
	DIALOG_LOTTO,
	DIALOG_REGINFO,
	DIALOG_REGINFO1,
	DIALOG_REGINFO2,
	DIALOG_REGINFO3,
	DIALOG_SKIPINTRO,
	DIALOG_TICKET_THROW,
	DIALOG_TICKET_SKIN1,
	DIALOG_TICKET_SKIN2,
	DIALOG_TICKET_PT1,
	DIALOG_TICKET_PT2,
	DIALOG_TICKET_PT3,
	DIALOG_TICKET_PT4,
	DIALOG_TICKET_PET1,
	DIALOG_TICKET_PET2,
	DIALOG_TICKET_PET3,
	DIALOG_TICKET_PET4,
	DIALOG_TICKET_BAG1,
	DIALOG_MISSION,
	DIALOG_MISSION_CHECK,
	DIALOG_MISSION_STOP,
	DIALOG_MISSION_TUT,
	DIALOG_OBJECT,
	DIALOG_OBJECT_CHECK,
	DIALOG_OBJECT_DOOR,
	DIALOG_OBJECT_PASS,
	DIALOG_MUSICPLAYER,
	DIALOG_MUSICPLAYER_PLAY,
	DIALOG_BLETTER,
	DIALOG_TORENO_UNJAIL,
	DIALOG_SETGIFT,
	DIALOG_SETGIFT_ADD1,
	DIALOG_SETGIFT_ADD2,
	DIALOG_SETGIFT_ADD3,
	DIALOG_SETGIFT_ADD4,
	DIALOG_SETGIFT_ADD5,
	DIALOG_SETGIFT_ADD6,
	DIALOG_SETGIFT_LIST,
 	DIALOG_SETGIFT_DEL,
 	DIALOG_GIFT,
 	DIALOG_HELP,
 	DIALOG_HELP_ADMIN,
 	DIALOG_HELP_REPORT,
 	DIALOG_HELP_LIST,
 	DIALOG_HELP_BASIC,
 	DIALOG_HELP_MONEY,
 	DIALOG_HELP_WEAPON,
 	DIALOG_HELP_ESTATE,
 	DIALOG_HELP_PLANT,
 	DIALOG_HELP_MISSION,
 	DIALOG_HELP_VEHICLE,
 	DIALOG_HELP_SKILL,
 	DIALOG_HELP_JOB,
 	DIALOG_HELP_TEAM,
 	DIALOG_HELP_COMPANY,
 	DIALOG_HELP_GANG,
 	DIALOG_HELP_DEPT,
 	DIALOG_HELP_NATURE,
 	DIALOG_HELP_MIX,
 	DIALOG_HELP_RETURN,
 	DIALOG_SFCARSELL1,
 	DIALOG_ARENA_VEHICLE,
 	DIALOG_ARENA_PLAYER1,
 	DIALOG_ARENA_PLAYER2,
 	DIALOG_ARENA_JOIN,
 	DIALOG_ARENA_LEAVE,
 	DIALOG_ARENA_TV,
 	DIALOG_ARENA_TV_WATCH,
 	DIALOG_QUICK_LIST,
    DIALOG_QUICK_SET,
    DIALOG_QUICK_DEL,
	DIALOG_SHOP_FNT,
	DIALOG_SHOP_LIST_USE,
	DIALOG_SHOP_LIST_EQ,
    DIALOG_ANIM,
    DIALOG_ANIM_SET1,
    DIALOG_ANIM_SET2,
	DIALOG_ANIM_ASK,
	DIALOG_ANIM_CHECK,
	DIALOG_JOB_HUNTER,
	DIALOG_JOB_HUNTER_LIST,
	DIALOG_JOB_HUNTER_CHECK,
	DIALOG_WEB_BUYVEH_COLOR,
	DIALOG_WEB_BUYVEH_CHECK,
}
enum//By: Zack Larson
{
	WALK_DEFAULT,
	WALK_NORMAL,
	WALK_PED,
	WALK_GANGSTA,
	WALK_GANGSTA2,
	WALK_OLD,
	WALK_FAT_OLD,
	WALK_FAT,
	WALK_LADY,
	WALK_LADY2,
	WALK_WHORE,
	WALK_WHORE2,
	WALK_DRUNK,
	WALK_BLIND,
	WALK_SHUFFLE,
}

enum
{
    TARGET_NONE,
    TARGET_PLAYER,
    TARGET_NPC,
    TARGET_DROP,
    TARGET_VEHICLE
}

enum
{
    ANIMAL_NONE,
	ANIMAL_DOG_S, 	//1
	ANIMAL_DOG_M,
	ANIMAL_DOG_L,
	ANIMAL_CAT,
	ANIMAL_FOX,
	ANIMAL_BEAR,	//6
	ANIMAL_WOLF,
	ANIMAL_PIG,
	ANIMAL_CHICKEN,
	ANUMAL_PIG,
	ANIMAL_SHEEP,   //11
	ANIMAL_PANDA,
	ANIMAL_BIGFOOT,
	ANIMAL_GATOR
}

enum
{
    PET_SKILL_COME,
	PET_SKILL_FOLLOW,
	PET_SKILL_STAY,
	PET_SKILL_EAT,
	PET_SKILL_TDROP,
	PET_SKILL_TANIMAL,
	PET_SKILL_TPLAYER,
	PET_SKILL_ATK,
	PET_SKILL_SWITCH,
	PET_SKILL_EGG,
}

static testnpc;

enum
{
    POOL_DROP_NONE,
    POOL_DROP_STRIPE,
    POOL_DROP_SOLID,
    POOL_DROP_BOTH,
    POOL_DROP_BLACK,
    POOL_DROP_WHITE,
    POOL_DROP_END
}

enum
{
	POOL_TEAM_NONE,
	POOL_TEAM_PRESOLID,
	POOL_TEAM_PRESTRIPE,
	POOL_TEAM_SOLID,
	POOL_TEAM_STRIPE,
}

enum
{
	SELECT_NONE,
	SELECT_BUILD,
	SELECT_MOVE,
	SELECT_DELETE,
	SELECT_PLANT_WATER,
	SELECT_PLANT_HARVEST,
	SELECT_PLANT_POISON,
	SELECT_PLANT_CURE,
}
enum
{
	TEXT_NONE,
	TEXT_TD,
	TEXT_DIALOG,
	TEXT_CHAT,
}
//Web
enum
{
	WEB_NONE,
	WEB_HOME,
	WEB_VEHICLE,
	WEB_PROPERTY,
	WEB_OTHER,
}

//TDs
static Text:YMD,Text:HMS,oldhr,newhr;
static Text:Black;
static PlayerText:DefaultTD[MAX_PLAYERS];
static PlayerText:InfoBack[MAX_PLAYERS],PlayerText:InfoText1[MAX_PLAYERS]
,PlayerText:InfoLB[MAX_PLAYERS],PlayerText:InfoRB[MAX_PLAYERS];
static curepick;
static PlayerText:Background[MAX_PLAYERS];

static PlayerText:Speed[MAX_PLAYERS],PlayerText:SpeedText[MAX_PLAYERS]
,PlayerText:SpeedFuel1[MAX_PLAYERS],PlayerText:SpeedFuel2[MAX_PLAYERS],PlayerText:SpeedBack[MAX_PLAYERS]
,PlayerText:SpeedEngine[MAX_PLAYERS],PlayerText:SpeedLock[MAX_PLAYERS],PlayerText:SpeedHealth[MAX_PLAYERS],PlayerText:SpeedBeep[3][MAX_PLAYERS]
,PlayerText:SpeedBar[MAX_PLAYERS],PlayerText:FuelBar[MAX_PLAYERS],PlayerText:SpeedBarBack[3][MAX_PLAYERS],PlayerText:FuelBarBack[MAX_PLAYERS];

static PlayerText:Speed2Back[MAX_PLAYERS],PlayerText:Speed2Speed[MAX_PLAYERS],PlayerText:Speed2Health[MAX_PLAYERS]
,PlayerText:Speed2Fuel[MAX_PLAYERS],PlayerText:Speed2SNum[MAX_PLAYERS],PlayerText:Speed2SText[MAX_PLAYERS]
,PlayerText:Speed2FNum[MAX_PLAYERS],PlayerText:Speed2HNum[MAX_PLAYERS],PlayerText:Speed2FText[MAX_PLAYERS]
,PlayerText:Speed2HText[MAX_PLAYERS],PlayerText:Speed2Lock[MAX_PLAYERS],PlayerText:Speed2Engine[MAX_PLAYERS];

static PlayerText:HPBarBack[MAX_PLAYERS],PlayerText:HPBar[MAX_PLAYERS],PlayerText:ARBarBack[MAX_PLAYERS]
,PlayerText:ARBar[MAX_PLAYERS],PlayerText:HPNum[MAX_PLAYERS],PlayerText:ARNum[MAX_PLAYERS];

static PlayerText:BCBox[MAX_PLAYERS],PlayerText:BCPreview[MAX_PLAYERS],PlayerText:BCName[MAX_PLAYERS]
,PlayerText:BCColorL[MAX_PLAYERS],PlayerText:BCColorR[MAX_PLAYERS],PlayerText:BCPrice[MAX_PLAYERS]
,PlayerText:BCLeft[MAX_PLAYERS],PlayerText:BCRight[MAX_PLAYERS],PlayerText:BCBuy[MAX_PLAYERS]
,PlayerText:BCExit[MAX_PLAYERS];

static PlayerText:BankAmount[MAX_PLAYERS],PlayerText:MoneyChange[MAX_PLAYERS],PlayerText:BankChange[MAX_PLAYERS];

static PlayerText:QTEList[MAX_PLAYERS],PlayerText:QTETime[MAX_PLAYERS],PlayerText:QTECount[MAX_PLAYERS],PlayerText:QTEBack[MAX_PLAYERS]
,PlayerText:QTEWhite[MAX_PLAYERS],PlayerText:QTEPadBack[MAX_PLAYERS],PlayerText:QTERB[MAX_PLAYERS],PlayerText:QTEDB[MAX_PLAYERS]
,PlayerText:QTELB[MAX_PLAYERS],PlayerText:QTEUB[MAX_PLAYERS],PlayerText:QTECancel[MAX_PLAYERS];

static PlayerText:HUDLV[MAX_PLAYERS],PlayerText:HUDName[MAX_PLAYERS],PlayerText:HUDExpBarBack[MAX_PLAYERS],PlayerText:HUDExpBar[MAX_PLAYERS]
,PlayerText:HUDExp[MAX_PLAYERS],PlayerText:HUDHungerBarBack[MAX_PLAYERS],PlayerText:HUDHungerBar[MAX_PLAYERS],PlayerText:HUDStamBarBack[MAX_PLAYERS]
,PlayerText:HUDStamBar[MAX_PLAYERS],PlayerText:HUDHungerIcon[MAX_PLAYERS],PlayerText:HUDStamIcon[MAX_PLAYERS],PlayerText:HUDBack[MAX_PLAYERS]
,PlayerText:HUDHungerAmount[MAX_PLAYERS],PlayerText:HUDStamAmount[MAX_PLAYERS];

static PlayerText:PTDBox[MAX_PLAYERS],PlayerText:PTDText[MAX_PLAYERS];

static PlayerText:PreviewTD[MAX_PLAYERS], PlayerText:GPSTD[MAX_PLAYERS];

static PlayerText:xtarget[MAX_PLAYERS];

static PlayerText:SkinBuy[MAX_PLAYERS],PlayerText:SkinExit[MAX_PLAYERS],PlayerText:SkinLeft[MAX_PLAYERS],PlayerText:SkinRight[MAX_PLAYERS],PlayerText:SkinPrice[MAX_PLAYERS];

static PlayerText:ColorEnter[MAX_PLAYERS],PlayerText:Color1T[MAX_PLAYERS],PlayerText:Color2T[MAX_PLAYERS],PlayerText:Color1L[MAX_PLAYERS]
,PlayerText:Color2L[MAX_PLAYERS],PlayerText:Color1R[MAX_PLAYERS],PlayerText:Color2R[MAX_PLAYERS];

static PlayerText:RTDH[6][MAX_PLAYERS], PlayerText:RTDBar[6][MAX_PLAYERS], PlayerText:RTDT[6][MAX_PLAYERS];

static Text:Logo1;

static Text3D:PlayerStatus[MAX_PLAYERS];
static Text3D:PlayerVehText[MAX_PLAYERS];
static Text3D:TreeText[MAX_PLAYERS];
static Text3D:VehicleStatus[MAX_VEHICLES];

static LSTrashCan[26], SFTrashCan[11], LVTrashCan[17];
static ClassSeat1[20],ClassSeat2[20],CSeat1Occupied[7][20],CSeat2Occupied[7][20];
static TextedObject[50];

static LSBell, SFBell, LVBell1, LVBell2, BeachBell;

static ATM[72];

static MapFixObjects[501];

static TargetObject[MAX_SHOP_WORLD][20][7],RangeSpace[MAX_SHOP_WORLD][8];

static Float:gFerrisCageOffsets[10][3] = {{0.0699,0.0600,-11.7500},{-6.9100,-0.0899,-9.5000},{11.1600,0.0000,-3.6300},{-11.1600,-0.0399,3.6499},{-6.9100,-0.0899,9.4799},{0.0699,0.0600,11.7500},{6.9599,0.0100,-9.5000},{-11.1600,-0.0399,-3.6300},{11.1600,0.0000,3.6499},{7.0399,-0.0200,9.3600}},
        FerrisWheelObjects[12],
        Float:FerrisWheelAngle = 0.0,
        FerrisWheelAlternate = 0;


new Paused[MAX_PLAYERS];
new AFKLastUpdate[MAX_PLAYERS];

new phone_opened[MAX_PLAYERS]; // phone opened

new ooc_control = 1;

enum E_SERIALS //反作弊数据
{
    sUsername[MAX_PLAYER_NAME],
    sClient_name[MAX_PLAYER_NAME],
    sUser_hash[256],
	sBanned,
	sIp[256],
	sClient_update,
	sConfirmation,
	sOs_name[256],
	sMac_id[256],
	sCpu_id[256],
    sHdd_serial[256]
};

static SerialData[MAX_PLAYERS][E_SERIALS];

new Logger:mainlog,
    Logger:chatlog,
    Logger:connectlog,
    Logger:deathlog,
    Logger:moneylog,
    Logger:itemlog,
    Logger:vehlog,
    Logger:estatelog,
    Logger:petlog,
    Logger:companylog,
    Logger:ganglog,
    Logger:deptlog,
    Logger:reportlog;

enum E_IDROP
{
    idCreated,
    idType,//1消耗品 2装备 3武器 4技能点
    idAmount,
    idItemID,
	Float:idX,
	Float:idY,
	Float:idZ,
	idWorld,
	idPickup,
	idPickable,
	Text3D:idText,
	idRes,
	idMatWar
};

static DropItem[MAX_DROPS][E_IDROP];

enum E_AIRDROP
{
    edCreated,
    edType,//1消耗品 2装备 3武器 4技能点
    edAmount,
    edItemID,
	Float:edX,//终点位置
	Float:edY,
	Float:edZ,
	Float:edSpeed,//掉落速度
	edWorld,
	edObjectID,
	edSpawnDrop,//到达地面后是否会产生掉落物
	edMatWar
};

static AirDrop[MAX_AIRDROPS][E_AIRDROP];

enum E_STINGER
{
    stgCreated,
    stgObject,
    stgPickup1,
    stgPickup2,
    Float:stgX,
    Float:stgY,
    Float:stgZ,
    Float:stgA,
    stgWorld
};

static Stinger[MAX_STINGERS][E_STINGER];

enum E_ROADBLOCK
{
    rbCreated,
    rbObject,
    Float:rbX,
    Float:rbY,
    Float:rbZ,
    Float:rbA,
    rbWorld
};

static RoadBlock[MAX_ROADBLOCKS][E_ROADBLOCK];

enum E_LANDMINE
{
    lmCreated,
    lmObject,
    lmPickup,
    Float:lmX,
    Float:lmY,
    Float:lmZ,
    Float:lmA,
    lmWorld
};

static LandMine[MAX_LANDMINES][E_LANDMINE];

enum E_TEAM
{
    tCreated,//小队是否被建立
    tName[64],//小队名称
    tPublic,//小队是否公开在列表
    tLeader,//队长的playerid
    tMembers,//小队人数
    tEventing,//小队是否正在参加活动
    tEventID//小队正在参加活动ID
};

static Team[MAX_TEAMS][E_TEAM];

enum E_GPSLIST
{
	gpsName[32],
	Float:gpsX,
    Float:gpsY,
    Float:gpsZ,
    bool:gpsCreated,
    gpsType
}

static GPSList[MAX_GPS][E_GPSLIST];

//Actors
static
	LVCarSellMan1,
	GrottiClerk,
	WangCarClerk,
	LSMuscleClerk,
	LSTrashClerk,
	SFTrashClerk,
	LVTrashClerk,
	BisVehClerk[3],
	CluckinClerk[MAX_SHOP_WORLD],
	PizzaClerk[MAX_SHOP_WORLD],
	BurgerClerk[MAX_SHOP_WORLD],
	ShopClerk[MAX_SHOP_WORLD],
	DonutClerk[MAX_SHOP_WORLD],
	FDManager1[MAX_SHOP_WORLD],
	FDManager2[MAX_SHOP_WORLD],
	BarClerk[MAX_SHOP_WORLD],
	StripClerk[MAX_SHOP_WORLD],
	ClubClerk[MAX_SHOP_WORLD],
	Striper1[MAX_SHOP_WORLD],
	Striper2[MAX_SHOP_WORLD],
	LVMVClerk,
	LSMVClerk,
	SFMVClerk,
	LSPotClerk,
	SFPotClerk,
	LVPotClerk,
	LSPetClerk,
	SFPetClerk,
	LVPetClerk,
	SimeonNPC,
	TrevorNPC,
	TrailerClerk[6],
	HunterClerk,
	LSDockClerk,
	SFDockClerk,
	LVDockClerk,
	LSMGun,
	LVMGun,
	SFMMat,
	LVMMat,
	LSMFish,
	SFMFish,
	LVMFish,
	LSTowClerk,
	SFTowClerk,
	LVTowClerk,
	MHunt[3],
	LumberClerk[4],
	MinerClerk[2],
	FVendorClerk,
	LSMCar,
	SFMCar,
	LSCSJobClerk,
	SFCSJobClerk,
	LVCSJobClerk,
	MobileClerk[MAX_SHOP_WORLD],
	ToolClerk[MAX_SHOP_WORLD],
	AmmuClerk[MAX_SHOP_WORLD],
	AcademyStaff[6],
	GymTrainer[5],
	LSPDStaff,
	SFPDStaff,
	LVPDStaff1,
	LVPDStaff2,
	HPStaff[3],
	SFBikeClerk,
	RCClerk,
	PrisonStaff,
	SexClerk[MAX_SHOP_WORLD],
	BincoClerk[MAX_SHOP_WORLD],
	ZIPClerk[MAX_SHOP_WORLD],
	VictimClerk[MAX_SHOP_WORLD],
	DDSClerk[MAX_SHOP_WORLD],
	FNTClerk[MAX_SHOP_WORLD],
	CityHallClerk1,//工作帮助NPC
	CityHallClerk2,//创业帮助NPC
	GovStaff,
	SFCarSellMan1,
	ShookActor[MAX_ACTORS];//被吓坏的Actor恢复服务的时间更长
//static DataCheck[MAX_PLAYERS];

static MySQL:MYSQL_SESSION_A;

enum E_PLAYERDATA
{
    ORM:ORM_ID,//ORM物件编号
    pID,//玩家数据库编号
    pName[MAX_PLAYER_NAME+1],//玩家名
    pPass[24+1],//玩家密码
	pLevel,
	pCash,
	pBank,
	pLogSec,
	pLastDate,
	pLastMonth,
	pLastYear,
	Float:pX,
	Float:pY,
	Float:pZ,
	Float:pAngle,
	pExp,
	Float:pHunger,
	Float:pStamina,
	pWorld,
	pInterior,
	pSkin,
	pBag,
	pJob,
	Float:pHealth,
	Float:pArmour,
	Float:pMaxStamina,
	pDepartment,
	pDeptRank,
	pDeptApply,
	pCompany,
	pGang,
	pWanted,
	pWantedCount,
	pCrime[144],
	pRobbed,
	pSpawnType,
	pSpawn,
	pTitle,
	Float:pMaxHealth,
	pAdmin,
	pJail,
	pJailRoom,
	pMaxJail,
	pBounty,
	pBountyTime,
	pBountySender,
	pReg,
	pRenting,
	pRentID,
	pLogStreak,
	pCantJoin
};

static PlayerData[MAX_PLAYERS+1][E_PLAYERDATA];//最终要重新代入值 我们用固定头变数
//在读取玩家数据 由于MySQL需要花一定时间查询返回 这时如果有别的玩家 或是玩家离线可能会有安全性问题 这个用于检查问题
static const EMPTY_PLAYERDATA[E_PLAYERDATA];//定义一个空服务器用变数数据 以便进行清除用

//企业资料
enum E_COMPANYDATA
{
    ORM:ORM_ID,
    comID,//企业ID
    comCreated,
    comName[16],//企业名称
    comCEO,//企业CEO资料库ID
    comFund,//企业资金
    comColor,//企业颜色
    comOpen,//企业是否开放申请
    comR1[16],//企业R1头衔
    comR2[16],//企业R2头衔
    comR3[16],//企业R3头衔
    comR4[16],//企业R4头衔
    comR5[16],//企业R5头衔
    comPostR,//有发公告权限的阶级
    comFundR,//有存取资金权限的阶级
    comRankR,//有调整阶级权限的阶级
    comER,//有管理地产权限的阶级
	comAoFR,//有接受(Accept)申请或开除(Fire)成员权限的阶级
	comVehR,//有管理/购买载具权限的阶级
	comGoodsR,//有管理物流权限的阶级
    comTaxi,//是否为计程车业
    comBus,//是否为客运业
    comHeli,//是否为直升机业
    comAirline,//是否为航空业
    comBoat,//是否为船业
    comMedia,//是否为媒体业
    comAnimal,//是否为畜牧业
    comTrade,//是否为贸易业
    comTaxiFare1,//计程车业车费底价
    comTaxiFare2,//计程车业跳表费率
    comBusFare,//客运业车费
    comMediaFame,//媒体业热度
    comMediaEarn,//媒体业收入
    comRadioName[24],//广播频道名
    comRadioAir,//电台是否开播
    comRadioTrack,//电台当前曲目
    comRadioLoop,//电台是否循环
    comTVName[24],//电视频道名
	comCatalog[128]//企业公告
};

static CompanyData[MAX_COMPANIES][E_COMPANYDATA];
static const EMPTY_COMPANYDATA[E_COMPANYDATA];

//企业成员资料
enum E_CMEMBERDATA
{
    ORM:ORM_ID,
    cmID,
    cmComID,//成员企业ID
    cmMemberID,//成员ID
    cmRank,//成员阶级
    cmPoint,//成员点数
    cmJoined,//加入状态(包括未加入、申请中、已加入)
    cmInfo[256],//成员信息(包括申请时的消息,还有跟成员的自我介绍)
    cmBisBoss//事业老板
};

static CompanyMember[MAX_COMPANIES][MAX_CMEMBERS][E_CMEMBERDATA];
static const EMPTY_CMEMBER[E_CMEMBERDATA];

//企业客运路线资料
enum E_BUSROUTE
{
    ORM:ORM_ID,//ORM物件编号
    brID,//路线ID
    brCreated,//路线是否被设立
    brComID,//路线所属的企业ID
    brMaxStop,//路线停靠站数量
    brName[24]//路线名称
};

static BusRoute[MAX_BUS_ROUTES][E_BUSROUTE];
static const EMPTY_BUSROUTE[E_BUSROUTE];

enum E_BUSSTOP
{
	ORM:ORM_ID,//ORM物件编号
	bsID,
	bsCreated,
	bsRouteID,//停靠站所属的路线ID
	bsOrder,//停靠站顺序
	Float:bsX,
	Float:bsY,
	Float:bsZ,
	bsName[24]//停靠站名称
};
static BusStop[MAX_BUS_ROUTES][MAX_BUS_STOPS][E_BUSSTOP];//存放客运路线停靠站坐标的资料
static const EMPTY_BUSSTOP[E_BUSSTOP];

//电台播放列表资料
enum E_RADIOTRACK
{
    ORM:ORM_ID,
    rdID,
    rdComID,//所属企业ID
    rdType,//播放种类(音乐、广告或纯消息)
    rdLength,//播放长度
    rdTitle[64],//标题
    rdText[144],//播放显示消息
    rdURL[1024]//网址
};

static RadioTrack[MAX_COMPANIES][MAX_PLAYLISTS][E_RADIOTRACK];
static const EMPTY_RADIOTRACK[E_RADIOTRACK];

//帮会资料
enum E_GANGDATA
{
    ORM:ORM_ID,
    gID,//帮会ID
    gCreated,
    gName[16],//帮会名称
    gShort[8],//帮会缩写
    gBoss,//帮会老大资料库ID
    gFund,//帮会资金
    gColor,//帮会颜色
    gOpen,//帮会是否开放申请
    gR1[16],//帮会R1头衔
    gR2[16],//帮会R2头衔
    gR3[16],//帮会R3头衔
    gR4[16],//帮会R4头衔
    gR5[16],//帮会R5头衔
    gPostR,//有发公告权限的阶级
    gFundR,//有存取资金权限的阶级
    gRankR,//有调整阶级权限的阶级
    gGoodsR,//有管理物流权限的阶级
    gER,//有管理地产权限的阶级
    gAoFR,//有接受(Accept)申请或开除(Fire)成员权限的阶级
    gVehR,//有管理/购买载具权限的阶级
    gTurfR,//有管理地盘权限的阶级
    gType,//帮会种类
	gCatalog[128]//帮会公告
};

static GangData[MAX_GANGS][E_GANGDATA];
static const EMPTY_GANGDATA[E_GANGDATA];

//帮会成员资料
enum E_GMEMBERDATA
{
    ORM:ORM_ID,
    gmID,
    gmGangID,//成员帮会ID
    gmMemberID,//成员ID
    gmRank,//成员阶级
    gmPoint,//成员点数
    gmJoined,//加入状态(包括未加入、申请中、已加入)
    gmInfo[256]//成员信息(包括申请时的消息,还有跟成员的自我介绍)
};

static GangMember[MAX_GANGS][MAX_GMEMBERS][E_GMEMBERDATA];
static const EMPTY_GMEMBER[E_GMEMBERDATA];

//地盘资料
enum E_GANGZONE
{
    ORM:ORM_ID,
    gzID,//地盘ID
    gzCreated,
    gzZone,
    gzName[32],//地盘名称
    gzOwner,//拥有帮会ID
    gzType,//地盘种类(影响收入种类)
	gzLevel,//地盘等级
	gzDefense,//地盘防御度
	gzGain,//收益数量
	gzGainTimer,
	gzStatus,//地盘状态
	Float:gzMinX,
	Float:gzMinY,
	Float:gzMaxX,
	Float:gzMaxY,
	gzAttacker,
	gzTimer,
	gzTimer2,
	gzSafezone
};

static GangZone[MAX_GANGZONES][E_GANGZONE];
static const EMPTY_GANGZONE[E_GANGZONE];

enum E_TURFUPGRADE
{
	tfDes[144],
    tfMoney,
	tfWood,
	tfIron,
	tfBrick,
};

static const TurfUpgrade[][E_TURFUPGRADE] =
{
    {"", 0, 0, 0, 0},
    {"等级1地盘\n最高防御度:600", 0, 0, 0, 0},
    {"等级2地盘\n最高防御度:900", 1000, 10, 0, 0},
    {"等级3地盘\n最高防御度:1200", 2500, 15, 0, 0},
    {"等级4地盘\n最高防御度:1500", 4000, 20, 0, 5},
    {"等级5地盘\n最高防御度:1800", 6000, 25, 0, 10},
    {"等级6地盘\n最高防御度:2400", 10000, 30, 5, 10},
    {"等级7地盘\n最高防御度:3000", 15000, 35, 5, 15},
    {"等级8地盘\n最高防御度:3600", 20000, 40, 10, 20}
};

//公部门资料
enum E_DEPARTMENT
{
    ORM:ORM_ID,
    dpID,
    dpCreated,
    dpName[16],//部门名称
    dpLeader,//部门领导资料库ID
    dpFund,//部门资金
    dpR1[16],//部门R1头衔
    dpR2[16],//部门R2头衔
    dpR3[16],//部门R3头衔
    dpR4[16],//部门R4头衔
    dpR5[16],//部门R5头衔
	dpCatalog[128]//部门公告
};

static Department[MAX_DEPARTMENTS][E_DEPARTMENT];

//地产资料
enum E_ESTATEDATA
{
    ORM:ORM_ID,
    eID,//地产ID
    eCreated,
    eName[32],//地产名称
    eType,//地产种类
	eStyle,//内装风格(EstateStyle)
    ePrice,//地产价格
    Float:eX,//地产出口坐标
    Float:eY,
    Float:eZ,
    Float:eA,
    eOwnerType,//地产拥有者种类 0代表地产不属于任何人/组织
    eOwnerID,//地产拥有者ID(玩家/部门/企业/帮会)
    eLocked,
	eTPID,
	eType2,//地产种类2(工厂种类)
	eProdTime,//工厂用: 生产剩余时间(分)
	eSwitch,//地产是否在运作
	eUpgrade1,//改装升级项目1(每个地产代表的项目都不同)
	eUpgrade2,//改装升级项目2(每个地产代表的项目都不同)
	eUpgrade3,//改装升级项目3(每个地产代表的项目都不同)
	eMoney,
	eDate,
	eRentable,
	eRent,
	ePassOn,
	ePass[32]
};

static EstateData[MAX_ESTATES][E_ESTATEDATA];
static const EMPTY_ESTATEDATA[E_ESTATEDATA];

//地产内装列表
enum E_ESTYLE
{
	esName[32],//风格名称
	esDes[256],//风格介绍
	esLevel,//风格等级
	esPrice,//风格升级价格
	Float:esX,//内部入口坐标
	Float:esY,
	Float:esZ,
	Float:esA,
	esInt//内部InteriorID
};

static const EstateStyle_Suite[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"简陋套房", "虽然内部凌乱,壁纸脱落\n但有床,能住对吧?", 1,5000, 243.72, 304.91, 999.15, 271.1902, 1},
    {"SM主题套房", "最适合拥有特殊癖好的玩家入住\n这里的设计将会让你j火焚身", 2,15000, 343.81, 304.86, 999.15, 271.1902, 6},
    {"木造简房", "简单的木造简便套房\n稍微脏乱,包含地下室\n但有床,能住对吧?", 2,10000, 299.78, 309.89, 1003.30, 271.1902, 4},
    {"白色简约套房", "一房大床,白色简约设计", 2,30000, 266.50, 304.90, 999.15, 271.1902, 2},
    {"平价小型套房", "空间宽敞,价格划算\n需要临时找地方安身栖地?\n这里最适合当你的新家", 3,40000, 2308.77, -1212.94, 1049.02, 271.1902, 6},
    //6
    {"平价中型套房", "一厅一厨房一走廊\n空间宽敞,价格实惠", 3,50000, -42.59, 1405.47, 1084.43, 271.1902, 8},
    {"平价小型套房", "平价简约套房\n整合厨房与房间的设计\n小空间大方便", 3,30000, 2283.04, -1140.28, 1050.90, 271.1902, 11},
    {"平价多房套房", "含一房一厅以及一个厨房\n白天灯光稍嫌阴暗\n适合吸血鬼居住的平价套房", 3,20000, 223.20, 1287.08, 1082.14, 271.1902, 1},
    {"平价饭店套房", "有浴室厕所,有双人床\n美中不足的只有灯是坏掉的\n但是超便宜这优点足以胜过一切\n附1格停车空间", 4,10000, 2259.38, -1135.77, 1050.64, 271.1902, 10},
    {"双床饭店套房", "橘红风格套房\n附有两张双人床\n最适合与旅伴一同休息的好地方\n附1格停车空间", 4,50000, 2218.40, -1076.18, 1050.48, 271.1902, 1},
    //11
    {"单床饭店套房", "黄白设计的单人套房\n平价,舒适,来这里就对了\n附1格停车空间", 4,30000, 2233.64, -1115.26, 1050.88, 271.1902, 5},
    {"豪华饭店套房", "空间舒适宽敞,设计清新时尚\n在这里住上一晚将消除你旅途时的所有烦恼\n附1格停车空间", 5,100000, 2237.59, -1081.64, 1049.02, 271.1902, 2},
    {"拖车", "最便宜最简便的家\n就是能让你能无压力安安稳稳睡上一觉的好家", 1,2500, 2513.2185, -1729.0588, 778.6371, 91.0008, 1}
};

static const EstateStyle_House[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"小型平房", "两房一厅一厨房,包含卫浴\n附1格停车空间", 1,100000, 328.05, 1477.73, 1084.44, 271.1902, 15},
    {"美式小平房", "入口处稍嫌阴暗,但里面温馨的装潢一定包受你喜爱\n包含一厅一厨房以及卫浴\n附1格停车空间", 1,120000, 2468.84, -1698.24, 1013.51, 271.1902, 2},
    {"时尚小平房", "时髦设计,开阔大厅\n另附一房一厨房以及卫浴\n附1格停车空间", 1,120000, 260.85, 1237.24, 1084.26, 271.1902, 9},
    {"木式设计小平房", "木造设计\n含一房一厅以及卫浴\n附1格停车空间", 1,120000, -68.81, 1351.21, 1080.21, 271.1902, 6},
    {"小家庭平房", "室内包含一房一厅一厨房\n附1格停车空间", 1,120000, 222.0299, 1140.4432, 1082.6094, 3.8272, 4},
    //6
    {"淡紫风小平房", "紫色清新风格\n附一房一厅一厨房\n附1格停车空间", 1,160000, 261.12, 1284.30, 1080.26, 3.8272, 4},
    {"宽敞大厅小平房", "超宽阔大厅\n如果你是轰趴咖,这里是你最好的选择\n附1格停车空间", 1,160000, 387.22, 1471.70, 1080.19, 3.8272, 15},
    {"中型家庭平房", "暖色风设计\n包含两房一厅一厨房\n空间开阔舒适\n附1格停车空间", 2,280000, 295.04, 1472.26, 1080.26, 3.8272, 15},
    {"时尚设计平房", "两房两厅\n时尚亮丽设计\n附1格停车空间", 2,280000, 2365.31, -1135.60, 1050.88, 3.8272, 8},
    {"温馨小家庭平房", "舒适地毯,以及温馨的木头材质\n这才是家该有的样子\n包含两房两厅\n附1格停车空间", 2,350000, 22.88, 1403.33, 1084.44, 3.8272, 5},
    //11
    {"花俏风平房", "小花壁纸,条纹壁纸\n设计师可能跟不上时代了\n但两房一厅一厨房依旧能满足你\n附1格停车空间", 2,350000, 446.99, 1397.07, 1084.30, 3.8272, 2},
    {"开放摩登平房", "一房一大厅以及一厨房\n附1格停车空间", 2,450000, 2270.38, -1210.35, 1047.56, 3.8272, 10},
    {"摩登家庭式房", "摩登设计,三房大庭以及厨房\n如果你是个时尚之人,这里绝对适合你\n附2格停车空间", 3,450000, 2196.85, -1204.25, 1049.02, 3.8272, 6},
    {"高级楼中楼", "楼中楼现代设计\n包含两厅一房以及厨房\n附2格停车空间", 3,550000, 2317.89, -1026.76, 1050.22, 3.8272, 9},
    {"平价楼中楼", "楼中楼设计\n木造设计,附一房一厅\n附2格停车空间", 3,550000, -260.49, 1456.75, 1084.37, 3.8272, 4},
    //16
    {"紫红风楼中楼", "紫色壁纸与红色地毯搭配\n一共包含五个房间\n附2格停车空间", 3,550000, 491.07, 1398.50, 1080.26, 3.8272, 2},
    {"豪华双层大房", "包含四房一厅一厨房以及卫浴系统\n附3格停车空间", 4,750000, 226.30, 1114.24, 1080.99, 3.8272, 5},
    {"开阔双层大房", "开阔的空间以及时尚的设计\n不管是与人同居还是自己住都显得十分豪华\n附四房一厅一厨房以及卫浴系统\n附3格停车空间", 4,750000, 234.19, 1063.73, 1084.21, 3.8272, 6},
    {"超大型双层房", "一楼包含开阔的大庭、厨房以及两间房间\n二楼包含两间房间以及可以俯视一楼的走廊\n附3格停车空间", 4,750000, 225.68, 1021.45, 1084.02, 3.8272, 7},
    {"开放式楼中楼", "一楼中间为大厅以及楼梯贯穿\n二楼包含两间房间\n开放式的设计让你住的宽敞\n附3格停车空间", 4,750000, 2324.53, -1149.54, 1050.71, 3.8272, 12},
    //21
    {"大型楼中楼", "楼梯在中,左右就是你的起居空间\n这里包含四间房间以及两个大厅\n附3格停车空间", 4,750000, 140.17, 1366.07, 1083.65, 3.8272, 5}
};

static const EstateStyle_Office[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"住商混合办公室", "包办食衣住行与办公机能的高级办公室\n除了议会厅与办公桌外,还多了员工的休息空间与舒适的起居设备\n这里是加班狂人的天堂\n附10格停车空间", 2,700000, 1542.5724, -1355.6250, 1226.4853, 268.5608, 2},
    {"五隔间办公室", "小而实用的小型办公室\n使用简单便宜的玻璃隔间为你与你的同仁划分工作区域\n中央更有会议间来让成员们一同讨论企业的营运方向\n附5格停车空间", 1,150000, -2282.2693, -2299.0950, 1999.0031, 90.6183, 3},
	{"小型平价办公室", "最廉价的办公室选择\n虽然小又简单,但灵巧的摆设让这里不会这么的让人倍感压力\n附5格停车空间", 1,200000, 987.4609, -1522.6213, 2200.7690, 89.7473, 3},
    {"方形办公室", "将休息区及办公区域整合在一起的的精美办公室\n让主管能够在小小空间内监控员工们的一举一动\n附5格停车空间", 1,320000, -0.0901, -3.2787, 1498.6715, 1.3827, 3}
};

static const EstateStyle_Clubhouse[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"赌马中心", "用赌马中心做伪装\n在这里你可以为与你的帮会成员一同计画一票大的而不会被察觉\n附5格停车空间", 1,300000, -2158.7903, 642.8214, 1052.3750, 178.0556, 1},
    {"性感酒吧", "男人就是好色的生物\n通过性感挑拨的装潢\n让你的绅士成员们更能提起精神参与帮会的大小事\n附5格停车空间", 1,300000, 759.3896, 1443.3989, 1102.7031, 179.7211, 6},
    {"木造酒吧", "木造设计风格的酒吧\n让你与帮会伙伴一起在这里饮酒同乐\n享受一起鬼混的时光\n附10格停车空间", 2,400000, 940.8824, -18.3573, 1000.9297, 0.5342, 3},
    {"虎皮酒吧", "虎皮,加上紫色设计\n在这里你的帮会成员可以暂时忘记自己的犯罪事\n好好放松休息,小酌一番\n附10格停车空间", 2,450000, 967.2127, -53.2412, 1001.1246, 92.0441, 3},
    {"义式风情", "优雅的小提琴声\n细细品尝每一口葡萄酒\n这才是真正义大利人的风格\n也是任何想要效仿正宗黑手党的人该学的生活方式\n附10格停车空间",2,500000, -794.7858, 490.2008, 1376.1953, 1.0440, 1},
    //6
    {"绅士欢愉屋", "听着高格调饶舌\n手里拿着啤酒\n看着美女的艳舞\n这是属于大尾流氓才懂得顶级享受\n附10格停车空间", 2,550000, -2636.5911, 1402.7568, 906.4609, 358.5595, 3}
};

static const EstateStyle_Warehouse[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"超大型仓库", "拥有超大储备量的超级仓库\n储备容量达20000\n当你被老婆踢出家门时,这里包准够装下你还有你的小三这辈子所有的家产", 5,1000000, 993.8766, 1070.0107, 1975.1246, 178.4203, 3}
};

static const EstateStyle_Factory[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"双层工厂", "宽敞的空间,让你能够生产各种你想得到的产品\n并能让你在上层的空间清清楚楚监视产线的运作", 1,400000, 130.6151, 152.6640, 1232.8341, 89.9243, 31}
};

static const EstateStyle_Hangar[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0},
    //1
    {"大型机库", "巨大空间让您可以放心保存各式各样的大小的飞行载具\n里面可容纳15个载具,保存在这里的载具会被自动修复", 1,850000, 3941.7266, 4026.0454, 2987.7878, 181.8905, 1}
};

static const EstateStyle_Boatyard[][E_ESTYLE] =
{
    {"","",0,0, 0.0, 0.0, 0.0, 0.0, 0}
    //1
};

enum E_FACTORY
{
    efName[32],
    efPrice,//更换所需费用
    efType,//工厂种类: 1为制造工厂 2为研发工厂 3自然资源工厂
    efMat,//工厂消耗原料ID
    efProd,//工厂产出货物ID
    efProdAmount,//每单位原料产生的货物数量
	efProdTime//每单位原料产生货物的时间(分钟)
}

static const FactoryList[][E_FACTORY] =
{
	{"无", 0, 0, 0, 0, 0},
	//1
	{"武器工厂", 300000, 1, 139, 149, 5, 15},
	{"火药工厂", 80000, 1, 140, 150, 5, 5},
	{"药品工厂", 250000, 1, 142, 151, 2, 10},
	{"家具工厂", 125000, 1, 143, 152, 10, 30},
	{"食材工厂", 80000, 1, 144, 153, 10, 15},
	//6
	{"成衣工厂", 100000, 1, 145, 154, 10, 10},
	{"安毒工厂", 350000, 1, 146, 155, 10, 30},
	{"古柯硷工厂", 450000, 1, 147, 156, 5, 15},
	{"大麻工厂", 100000, 1, 148, 157, 10, 10}
};

enum
{
	FACTORY_NONE,
	FACTORY_WEAPON,//1
	FACTORY_AMMO,
	FACTORY_DRUG,
	FACTORY_FURNI,
	FACTORY_FOOD,
	FACTORY_CLOTHES,//6
	FACTORY_METH,
	FACTORY_COKE,
	FACTORY_WEED,
	FACTORY_SGUNRES,
}

enum E_VEHDATA
{
    ORM:ORM_ID,//ORM物件编号
    vID,
    vOwned,
    vPlate[32],
	vModel,
	vPrice,
	vColor1,
	vColor2,
	Float:vX,
	Float:vY,
	Float:vZ,
	Float:vA,
	vComponent0,
	vComponent1,
	vComponent2,
	vComponent3,
	vComponent4,
	vComponent5,
	vComponent6,
	vComponent7,
	vComponent8,
	vComponent9,
	vComponent10,
	vComponent11,
	vComponent12,
	vComponent13,
	vPaintjob,
	vLock,
	vType,
	vFuel,
	vWorld,
	vInt,
	vPanelStat,
	vDoorStat,
	vLightStat,
	vTireStat,
	Float:vHealth,
	vLockLv1,
	vLockLv2,
	vLockAlarm,
	vNeon,
	vSpike,
	vTireUp,
	vBodyUp,
	Float:vArmour,
	vSpeedo,
	vStatus,
	vLockLv3,
 	vLockPass[24],
	vOwner,
	vTrunk,
	vHood,
	vTaxi,
	vPolice,
	vStoredEstate,
	vDeductible,
	vDate,
	vTurbo
};

static VehData[MAX_VEHICLES+1][E_VEHDATA];
static const EMPTY_VEHDATA[E_VEHDATA];

enum E_RACEDATA
{
    ORM:ORM_ID,//ORM物件编号
    rtID,//赛道ID
    rtType,//赛道种类
    rtMaxRacers,//赛道最多参与玩家
    rtVeh1,//赛道指定车辆1
    rtVeh2,//赛道指定车辆2
    rtVeh3,//赛道指定车辆3
    rtVeh4,//赛道指定车辆4
    rtVeh5,//赛道指定车辆5
    Float:rtStartPos1X,//玩家的就位坐标1
    Float:rtStartPos1Y,
    Float:rtStartPos1Z,
    Float:rtStartPos1A,
    Float:rtStartPos2X,//玩家的就位坐标2
    Float:rtStartPos2Y,
    Float:rtStartPos2Z,
    Float:rtStartPos2A,
    rtCreator,//赛道创造人ID
    rtFastestRacer,//赛道最快玩家
    rtFastestTime,//赛道最快时间(秒)
    rtMaxCP,//赛道检查点数量
    rtName[24],//赛道名称
    rtDes[144],//赛道描述

    rtStatus,//赛道状况
    rtCount,//赛道倒数时间
	rtCountTimer,//赛道倒数Timer
	rtRacers,//赛道目前玩家数
	rtStartTime,//赛道比赛开始时间(TickCount)
	rtFirstFinishedTime,//第一个完成比赛的时间(TickCount)
	rtFinishedRacers,//已经结束比赛的人数
	rtMapIcon,
	Text3D:rt3DText,
	rtGPS//赛道GPS ID
};

static RaceData[MAX_RACES][E_RACEDATA];
static const EMPTY_RACEDATA[E_RACEDATA];

enum E_RCPDATA
{
	ORM:ORM_ID,//ORM物件编号
	rcpID,
	rcpCreated,
	rcpRaceID,//检查点隶属的赛道ID
	rcpOrder,//检查点顺序
	Float:rcpX,
	Float:rcpY,
	Float:rcpZ,
};
static RCPData[MAX_RACES][MAX_RCP][E_RCPDATA];//存放赛道检查点坐标的资料
static const EMPTY_RCPDATA[E_RCPDATA];

//货物战争(暂存)
enum E_MATWAR
{
    mwStatus,//开始状况
    mwType,//战争种类
	mwSpotID,//位置ID
	mwMatID,//货物道具ID
	mwMatAmount,//货物数量
	Float:mwX,
	Float:mwY,
	Float:mwZ,
	mwTimer,
	mwObject,
	mwHolder,//持有者/载具ID
};

static MatWar[MAX_MATWARS][E_MATWAR];

//活动资料(暂存)
enum E_EVENT
{
    evType,//活动种类
    evType2,//活动细分类
    evMap,//活动地图ID
    evStatus,//活动开始状态
    evTime,//活动时间
    evTimer,//活动计时器
    evTimer2,
    evTimer3,
    evPlayers,//参与玩家
    evPrize,//胜方奖金
    evZone,
    evZone2
};

static Event[MAX_EVENTS][E_EVENT];

//**活动地图的WorldID为10000+EventID
//For Event Type DM VS
enum E_SINGLEEVENTTYPE//单人活动模式
{
	sevtName[32],//模式名称
	Float:sevtArmour,//护甲值
	sevtWeapon1,//武器与弹药
	sevtAmmo1,
	sevtWeapon2,
	sevtAmmo2,
	sevtWeapon3,
	sevtAmmo3,
	sevtWeapon4,
	sevtAmmo4,
	sevtWeapon5,
	sevtAmmo5,
	sevtExShell1,//是否使用爆裂子弹
	sevtExAmmo1,
	sevtExShell2,
	sevtExAmmo2,
	sevtArmourSuit//是否使用护甲套装
};



static const SingleEventType[][E_SINGLEEVENTTYPE] =
{
    {"街头混战", 0.0, 22,100, 28,250, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    //1
    {"霰弹混战", 0.0, 22,100, 25,60, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    {"大鹰混战", 0.0, 24,90, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    {"步枪混战1", 100.0, 22,100, 30,300, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    {"步枪混战2", 100.0, 22,100, 31,500, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    {"芭乐雨", 0.0, 16,50, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    //6
    {"火神混战", 100.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0},
    {"至尊主宰", 0.0, 38,10000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1},
    {"动物大乱斗", 0.0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0}//7
};

enum E_SINGLEEVENTMAP//单人活动地图
{
	sevmName[32],//地图名称
	sevmInt//地图InteriorID
};

static const SingleEventMap[][E_SINGLEEVENTMAP] =
{
    {"棒球场", 0},
    //1
    {"鬼城", 0},
    {"废墟遗迹", 0},
    {"小型仓库", 0},
    {"制毒工厂顶楼", 2},
    {"绅士俱乐部", 3},
    //6
    {"空旷仓库", 1},
    {"模型战场", 10},
    {"特技竞技场", 14}
};

//单人活动地图出生坐标(随机)
static const Float:SEMap0Spawn[][3] =
{
    {1307.4973,2109.2664,11.0156},
    {1316.9828,2148.5168,11.0234},
    {1305.9840,2190.0657,11.0234},
    {1328.5011,2179.9602,11.0234},
    {1348.9321,2191.0559,11.0234},
    {1383.2845,2185.0935,11.0234},
    {1370.7155,2172.1067,11.0234},
    {1382.1761,2154.9128,11.0234},
    {1356.4161,2157.8342,11.0156},
    {1378.3594,2122.0637,11.0156},
    {1362.7185,2107.0588,11.0156}
};

static const Float:SEMap1Spawn[][3] =
{
    {-446.4585,2251.1555,42.4297},
    {-440.3221,2215.4387,42.4297},
    {-423.6242,2244.1592,42.4297},
    {-407.5902,2224.0347,42.4297},
    {-373.4198,2199.8049,42.0896},
    {-362.8218,2231.7014,42.4844},
    {-380.4544,2254.9175,42.4844}
};

static const Float:SEMap2Spawn[][3] =
{
    {-1329.2192,2497.0303,87.0469},
    {-1300.4620,2491.6938,87.0467},
    {-1311.6753,2511.2788,87.0420},
    {-1332.2869,2528.7119,87.1399},
    {-1321.7080,2535.5234,87.2369},
    {-1315.7587,2552.0413,87.5234},
    {-1295.2375,2550.1111,86.9264},
    {-1291.4092,2519.9849,87.2950},
    {-1289.5770,2505.4700,87.0028}
};

static const Float:SEMap3Spawn[][3] =
{
    {1059.1498,2086.2437,10.8203},
    {1087.8726,2082.0891,10.8203},
    {1089.7836,2114.7903,10.8203},
    {1068.6671,2129.1069,10.8203}
};

static const Float:SEMap4Spawn[][3] =
{
    {2570.8674,-1303.1401,1060.9844},
    {2578.5525,-1284.1451,1065.3618},
    {2552.1724,-1288.0405,1060.9844}
};

static const Float:SEMap5Spawn[][3] =
{
    {-2646.1125,1408.6985,906.2734},
    {-2674.4355,1420.5874,906.2734},
    {-2666.8875,1427.4193,912.4114},
    {-2654.9087,1392.6621,912.4114},
    {-2677.3022,1410.4355,907.5703}
};

static const Float:SEMap6Spawn[][3] =
{
    {1412.5197,1.6963,1000.9243},
    {1414.9712,-38.4397,1000.9255},
    {1364.6283,-44.1584,1000.9192},
    {1365.1907,-0.3718,1000.9219},
    {1377.6765,-10.6105,1000.9261},
    {1388.0725,-35.6160,1000.9131},
    {1401.2418,-9.2678,1000.9092}
};

static const Float:SEMap7Spawn[][3] =
{
    {-992.3061,1080.8047,1342.7444},
    {-996.5540,1030.6276,1341.9125},
    {-1022.9681,1028.1630,1343.2704},
    {-1030.8313,1059.9379,1343.9164},
    {-1035.1143,1088.0610,1342.9939},
    {-1056.7291,1044.8389,1343.9253},
    {-1073.6918,1029.3436,1343.0127},
    {-1108.3101,1033.2130,1342.8269},
    {-1111.5641,1062.2407,1342.6971},
    {-1087.3776,1089.3995,1342.8514},
    {-1056.5845,1078.9038,1343.0182}
};

static const Float:SEMap8Spawn[][3] =
{
    {-1467.9524,1563.4769,1052.7500},
    {-1482.9286,1588.4414,1052.5313},
    {-1479.3137,1635.5056,1052.5313},
    {-1456.0895,1611.8187,1052.5313},
    {-1443.7772,1641.0398,1052.5313},
    {-1420.5680,1616.8743,1052.5313},
    {-1422.8486,1587.6307,1052.5313},
    {-1429.8085,1565.7511,1052.5313},
    {-1388.1891,1567.6035,1052.5313},
    {-1363.0419,1561.7830,1052.5313},
    {-1369.7886,1593.2921,1052.5313},
    {-1362.0380,1623.4056,1052.5313},
    {-1352.6597,1643.6024,1052.5313},
    {-1384.8601,1644.2057,1052.5313}
};

//For Event Type TDM TVS

enum E_TEAMEVENTTYPE//团队活动模式
{
	tevtName[32],//模式名称
	//蓝方
	Float:tevtBlueArmour,//护甲值
	tevtBlueWeapon1,//武器与弹药
	tevtBlueAmmo1,
	tevtBlueWeapon2,
	tevtBlueAmmo2,
	tevtBlueWeapon3,
	tevtBlueAmmo3,
	tevtBlueWeapon4,
	tevtBlueAmmo4,
	tevtBlueWeapon5,
	tevtBlueAmmo5,
	tevtBlueExShell1,//是否使用爆裂子弹
	tevtBlueExAmmo1,
	tevtBlueExShell2,
	tevtBlueExAmmo2,
	tevtBlueArmourSuit,//是否使用护甲套装
	//红方
	Float:tevtRedArmour,//护甲值
	tevtRedWeapon1,//武器与弹药
	tevtRedAmmo1,
	tevtRedWeapon2,
	tevtRedAmmo2,
	tevtRedWeapon3,
	tevtRedAmmo3,
	tevtRedWeapon4,
	tevtRedAmmo4,
	tevtRedWeapon5,
	tevtRedAmmo5,
	tevtRedExShell1,//是否使用爆裂子弹
	tevtRedExAmmo1,
	tevtRedExShell2,
	tevtRedExAmmo2,
	tevtRedArmourSuit,//是否使用护甲套装
};

static const TeamEventType[][E_TEAMEVENTTYPE] =
{
    {"帮派械斗1", 0.0, 22,100, 28,250, 25,50, 0,0, 0,0, 0,0, 0,0, 0,  0.0, 22,100, 28,250, 25,50, 0,0, 0,0, 0,0, 0,0, 0},
    //1
    {"帮派械斗2", 0.0, 22,100, 32,300, 30,200, 0,0, 0,0, 0,0, 0,0, 0,  0.0, 22,100, 32,300, 30,200, 0,0, 0,0, 0,0, 0,0, 0},
    {"军事对决", 0.0, 24,60, 29,400, 27,100, 31,400, 0,0, 0,0, 0,0, 0,  0.0, 24,60, 29,400, 27,100, 31,400, 0,0, 0,0, 0,0, 0},
    {"CSDM", 0.0, 22,100, 29,300, 31,250, 0,0, 0,0, 0,0, 0,0, 0,  0.0, 24,50, 28,400, 31,250, 0,0, 0,0, 0,0, 0,0, 0},
    {"火神vs大脚", 0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1,  0.0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0},//4
    {"火神vs爆裂", 0.0, 0,0, 0,0, 0,0, 0,0, 0,0, 27,500, 0,0, 1,  0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1},
    //6
    {"火神vs火箭", 0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1,  0.0, 35,100, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1},
    {"火神vs爆裂狙击", 0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,  100.0, 0,0, 0,0, 0,0, 0,0, 0,0, 34,100, 0,0, 1},
    {"爆裂狙击vs大脚", 100.0, 0,0, 0,0, 0,0, 0,0, 0,0, 34,100, 0,0, 0,  0.0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 0},//8
    {"主宰厮杀", 0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1,  0.0, 38,5000, 0,0, 0,0, 0,0, 0,0, 0,0, 0,0, 1}
};

enum E_TEAMEVENTMAP//团队活动地图
{
	tevmName[32],//地图名称
	Float:tevmBX,//蓝方出生坐标
	Float:tevmBY,
	Float:tevmBZ,
	Float:tevmBA,
	Float:tevmRX,//红方出生坐标
	Float:tevmRY,
	Float:tevmRZ,
	Float:tevmRA,
	tevmInt//地图InteriorID
};

static const TeamEventMap[][E_TEAMEVENTMAP] =
{
    {"棒球场", 1362.3472,2108.5776,11.0156,359.2548, 1359.9562,2212.1753,12.0156,178.9844, 0},
    //1
    {"旅馆", 2222.4473,-1149.7402,1025.7969,358.2325, 2193.2241,-1141.8959,1029.7969,179.9244, 15},
    {"屠宰场", 954.2780,2160.7986,1011.0234,90.4590, 959.8567,2109.4775,1011.0303,89.3309, 1},
    {"地下室", 2175.4309,1585.3422,999.9722,268.1202, 2173.4319,1618.3480,999.9766,270.7291, 1},
    {"水坝", -942.4199,1848.9028,5.0051,1.1578, -958.0832,1947.8278,9.0000,180.6996, 17},
    {"69区军事基地", 281.8000,1869.4274,8.7578,268.9549, 249.0549,1847.4709,8.7726,179.4368, 0},
    //6
    {"豪宅", 1280.3203,-832.7551,1085.6328,90.6702, 1249.6730,-769.0602,1084.0162,178.0914, 5},
    {"制毒工厂二楼", 2527.3071,-1293.9530,1031.4219,273.6430, 2569.3459,-1285.5927,1031.4219,178.3492, 2},
    {"制毒工厂三楼", 2573.1655,-1301.9326,1044.1250,90.1997, 2525.6965,-1303.5186,1048.2891,271.0105, 2},
    {"制毒工厂四楼", 2528.8545,-1285.9204,1054.6406,270.0938, 2574.3328,-1286.9259,1054.6406,178.9363, 2},
    {"模型战场", -1115.6360,1052.0789,1342.8064,272.0436, -988.2072,1057.4539,1343.0494,86.6973, 10},
    //11
    {"发电厂", 2526.7473,2819.0818,10.8203,269.1300, 2651.4072,2778.2314,19.3222,269.3183, 0},
    {"海军基地", -1391.7156,506.7606,11.1953,271.4925, -1430.3414,495.3777,3.0391,272.3500, 0},
    {"小货柜船", -1454.4253,1491.0878,7.1016,270.4701, -1388.8302,1491.0490,7.1016,90.9517, 0},
    {"大货柜船", -2389.2510,1543.1501,26.0469,358.4426, -2424.6719,1553.3619,26.0469,179.7349, 0}
};

enum E_SURVIVEEVENTMAP//生存活动地图
{
	svevmName[32],//地图名称
	Float:svevmMinX,//范围
	Float:svevmMinY,
	Float:svevmMaxX,
	Float:svevmMaxY,
	Float:svevmHeight//跳伞高度
};

static const SurviveEventMap[][E_SURVIVEEVENTMAP] =
{
    {"沙漠I", -360.91,736.66, 890.20,1588.05, 1000.0},
    //1
    {"沙漠II", -489.27,2185.30, 604.47,2878.27, 1000.0},
    {"森林I", -1849.03,-1571.44, -782.90,-795.75, 1000.0},
    {"森林II", -2014.30,-2785.51, -816.20,-1503.49, 1000.0},
    {"森林III", -76.31,-619.79, 836.97,172.61, 1000.0},
    {"森林IV", 1713.54,-892.00, 2676.76,359.99, 1000.0}
    //6
};

static const Float:ArenaSpawn_Vehicle[][4] =
{//int 15
    {-1361.4580,932.7727,1036.0275,8.8328},
	{-1325.1971,943.3743,1036.1566,22.4740},
	{-1285.8973,974.3292,1036.6067,63.5692},
	{-1283.9518,1014.3009,1037.2672,117.9764},
	{-1317.7924,1046.9535,1037.8646,150.4195},
	{-1371.3475,1058.6716,1038.1603,173.7696},
	{-1406.2495,1058.9493,1038.2214,175.6781},
	{-1456.0493,1055.2012,1038.2452,194.9437},
	{-1496.3297,1035.1633,1037.9814,220.3349},
	{-1518.6700,996.6605,1037.3827,267.8306}
};

static const Float:ArenaSpawn_Player[][3] =
{//int 14
    {-1477.7551,1559.5656,1052.5313},
	{-1483.2076,1581.4318,1052.5313},
	{-1493.0189,1614.7316,1052.5313},
	{-1469.2094,1618.5863,1052.5313},
	{-1451.2467,1611.3865,1052.5313},
	{-1476.3103,1649.7338,1052.5313},
	{-1444.0277,1642.5702,1052.5313},
	{-1429.2404,1649.1592,1052.5313},
	{-1414.1379,1633.8010,1052.5313},
	{-1415.9783,1616.5602,1052.5313},
	{-1397.7887,1621.5587,1052.5313},
	{-1379.8961,1645.9906,1052.5313},
	{-1353.9084,1645.0392,1052.5313},
	{-1354.4551,1618.5183,1052.5313},
	{-1353.7225,1566.2328,1052.5313},
	{-1371.1698,1579.1959,1052.5313},
	{-1369.9919,1601.2633,1052.5313},
	{-1391.3242,1593.6804,1052.5313},
	{-1400.7813,1579.3910,1052.5313},
	{-1396.5317,1560.3922,1052.5313},
	{-1439.1307,1572.8654,1052.5313},
	{-1441.4830,1592.8522,1052.5313},
	{-1420.6263,1592.5562,1052.5313},
	{-1449.6045,1612.6183,1052.5313},
	{-1459.5093,1591.3025,1052.7500},
	{-1446.1178,1561.3037,1052.7500}
};

//狩猎委托(暂存)
enum E_HUNTQUEST
{
	hqCreated,
    hqTarget,//目标动物
    hqAmount,//目标数量
    hqLevel,//难度等级
    hqMoney,//现金报酬
    hqExp,//经验报酬
    hqTime,//限制时间
    hqStatus,//进行状态
	hqSystem,//是否为系统产生
    hqPlayers//参与玩家
};

static HuntQuest[MAX_HUNTQUESTS][E_HUNTQUEST];

enum E_DEPTSPAWN
{
	dpsName[32],
	Float:dpsoutX,
	Float:dpsoutY,
	Float:dpsoutZ,
	Float:dpsinX,
	Float:dpsinY,
	Float:dpsinZ,
	Float:dpsinA,
	dpsInt,
	dpsWorld
};

static const PoliceSpawn[][E_DEPTSPAWN] =
{
    {"洛圣都警局",1555.1855,-1675.1406,16.1953, 238.7307,75.8806,1005.0391,269.8891, 6, 1},
    {"圣费耶洛警局",-1605.4716,710.9096,13.8672, 228.1021,110.6594,1003.2188,359.8664, 10, 1},
    {"拉斯维托拉斯警局",2287.1873,2432.1628,10.8203, 226.5383,180.6976,1003.0313,176.8554, 3, 1},
    {"州立监狱",24.3266,319.3146,6.3080, 1773.7511,-1571.2618,1742.4561,179.5495, 1, 1}
};

static const MedicSpawn[][E_DEPTSPAWN] =
{
    {"洛圣都医院",1172.3267,-1325.3698,15.4070, -23.9927,156.1489,999.0569,88.7729, 1, 1},
    {"圣费耶洛医院",-2655.1699,639.5565,14.4545, -23.9927,156.1489,999.0569,88.7729, 1, 2},
    {"拉斯维托拉斯医院",1607.3528,1815.9912,10.8203, -23.9927,156.1489,999.0569,88.7729, 1, 3}
};

static const GovernmentSpawn[][E_DEPTSPAWN] =
{
    {"洛圣都州政府",1480.8917,-1771.2828,18.7958, 358.9767,206.8568,1008.3828,269.1735, 3, 1}
};

static const CounselorSpawn[][E_DEPTSPAWN] =
{
    {"洛圣都辅导站",1111.6846,-1800.9757,16.5938, 1489.5986,1307.4045,1093.2891,270.5987, 3, 1},
    {"圣费耶洛辅导站",-2026.6594,-101.9126,35.1641, -2034.9398,-115.8793,1035.1719,265.0661, 3, 1},
    {"拉斯维托拉斯辅导站",1170.9937,1347.1139,10.9219, 1170.9937,1347.1139,10.9219,356.2735, 0, 0}
};

enum E_PSSPAWN
{
	Float:pssX,
	Float:pssY,
	Float:pssZ,
	Float:pssA
};

static const PrisonSpawn[][E_PSSPAWN] =
{
    {1778.6000,-1562.6350,1734.9430,180.0000},
    {1774.2000,-1562.6350,1734.9430,180.0000},
    {1769.8000,-1562.6350,1734.9430,180.0000},
    {1765.4000,-1562.6350,1734.9430,180.0000},
    {1761.0000,-1562.6350,1734.9430,180.0000},
    {1756.6000,-1562.6350,1734.9430,180.0000},
    {1778.6000,-1583.3434,1734.9430,0.0000},
    {1774.2000,-1583.3434,1734.9430,0.0000},
    {1769.8000,-1583.3434,1734.9430,0.0000},
    {1765.4000,-1583.3434,1734.9430,0.0000},
    {1761.0000,-1583.3434,1734.9430,0.0000},
    {1756.6000,-1583.3434,1734.9430,0.0000},
    {1778.6000,-1562.6350,1738.6935,180.0000},
    {1774.2000,-1562.6350,1738.6935,180.0000},
    {1769.8000,-1562.6350,1738.6935,180.0000},
    {1765.4000,-1562.6350,1738.6935,180.0000},
    {1761.0000,-1562.6350,1738.6935,180.0000},
    {1756.6000,-1562.6350,1738.6935,180.0000},
    {1778.6000,-1583.3434,1738.6935,0.0000},
    {1774.2000,-1583.3434,1738.6935,0.0000},
    {1769.8000,-1583.3434,1738.6935,0.0000},
    {1765.4000,-1583.3434,1738.6935,0.0000},
    {1761.0000,-1583.3434,1738.6935,0.0000},
    {1756.6000,-1583.3434,1738.6935,0.0000}
};

//礼物资料
enum E_GIFTDATA
{
    ORM:ORM_ID,//ORM物件编号
    gfID,//礼物ID
	gfTitle[64],//礼物标题
    gfType,//礼物种类
    gfItemType,//礼物道具种类
    gfItemID,//礼物道具ID
    gfAmount,//礼物数量
    gfLevel,//可领取等级
    gfYear,//可领取日期
    gfMonth,
    gfDate,
    gfStreak//可领取连续登入日数
};

static GiftData[MAX_GIFTS][E_GIFTDATA];
static const EMPTY_GIFTDATA[E_GIFTDATA];

//玩家礼物资料库
enum E_PLAYERGIFT
{
	ORM:ORM_ID,
	pgID,
	pgPlayerID,
	pgTitle[64],//礼物标题
	pgItemType,//礼物种类
	pgItemID,//礼物道具ID
    pgAmount,//礼物数量
    pgExpire,//过期时间(TimeStamp)
};

static PlayerGift[MAX_PLAYERS+1][MAX_PLAYER_GIFTS][E_PLAYERGIFT];
static const EMPTY_PLAYERGIFT[E_PLAYERGIFT];

enum E_PLIMITDATA//存放玩家每日上限的资料
{
    ORM:ORM_ID,//ORM物件编号
    plID,
    plPlayerID,
    plEat,
    plEatTime,
	plContract,
	plCDSneak,
	plCDTimeStop,
	plPayCheck,
	plCarSellCount,
	plCarSellModel,
	plCarSellPrice,
	plEstateDebt,
	plJobFD,
	plCDCaptain,
	plCDGF,
	plCDOG,
	plCDBless,
	plCDTazz,
	plGunLic,
	plMSweet,
	plMSimeon,
	plMTrevor,
	plMCesar,
	plMEmmet,
	plMToreno,
	plMWoozie,
	plHSweet,
	plHEmmet,
	plHToreno,
	plHWoozie,
	plCDBounty
};

static LimitData[MAX_PLAYERS+1][E_PLIMITDATA];
static const EMPTY_LIMITDATA[E_PLIMITDATA];

enum E_PSKILLDATA//玩家技能资料
{
    ORM:ORM_ID,//ORM物件编号
    psID,
    psPlayerID,
    psFixVeh,//修车技能
    psUnlock,//偷车技能
    psHack,//侵入技能
    psArm,//制枪能力
    psCHit,//爆击能力
    psSneak,//潜行能力
    psDef,//耐打能力
    psHeal,//治疗能力
    psDrug,//制药能力
    psLeech,//吸血能力
    psRecover,//休养
    psSearch,//搜索能力
	psObserve,//观察能力
    psTimeStop,//THE WORLD
    psStamina,//耐久能力
    psPistol,
    psDEA,
    psShotgun,
    psSawn,
    psSpas,
    psUZI,
    psMP5,
    psAK,
    psM4,
    psSniper,
    psBoxing,
    psKungFu,
    psMuayThai
};

static SkillData[MAX_PLAYERS+1][E_PSKILLDATA];
static const EMPTY_SKILLDATA[E_PSKILLDATA];

enum E_PLAYERPT
{
	ORM:ORM_ID,//ORM物件ID
	spID,//数据库ID
	spPtID,//点数ID
	spPlayerID,//持有点数的玩家数据库ID
	spCount//数量
};

static PlayerPt[MAX_PLAYERS+1][MAX_PT][E_PLAYERPT];
static const EMPTY_PTDATA[E_PLAYERPT];

enum E_SKILLSLIST
{
    ORM:ORM_ID,
    skID,
	skName[16],
	skType,//技能类型: 1.消耗知识+技能点升级 2.通过练习升级 3.帮会技能 4.警察技能
	skMaxLV,//技能最高等级
	skInfo[144],//技能信息
	skLV1Info[256],//等级1信息
	skLV1Pt1,//等级1消耗知识1
	skLV1Pt1A,//等级1消耗知识1数量
	skLV1Pt2,//等级1消耗知识2
	skLV1Pt2A,//等级1消耗知识2数量
	skLV2Info[256],//等级2信息
	skLV2Pt1,//等级2消耗知识1
	skLV2Pt1A,//等级2消耗知识1数量
	skLV2Pt2,//等级2消耗知识2
	skLV2Pt2A,//等级2消耗知识2数量
	skLV3Info[256],//等级3信息
	skLV3Pt1,//等级3消耗知识1
	skLV3Pt1A,//等级3消耗知识1数量
	skLV3Pt2,//等级3消耗知识2
	skLV3Pt2A,//等级3消耗知识2数量
	skLV4Info[256],//等级4信息
	skLV4Pt1,//等级4消耗知识1
	skLV4Pt1A,//等级4消耗知识1数量
	skLV4Pt2,//等级4消耗知识2
	skLV4Pt2A,//等级4消耗知识2数量
	skLV5Info[256],//等级5信息
	skLV5Pt1,//等级5消耗知识1
	skLV5Pt1A,//等级5消耗知识1数量
	skLV5Pt2,//等级5消耗知识2
	skLV5Pt2A,//等级5消耗知识2数量
	skLV6Info[256],//等级6信息
	skLV6Pt1,//等级6消耗知识1
	skLV6Pt1A,//等级6消耗知识1数量
	skLV6Pt2,//等级6消耗知识2
	skLV6Pt2A,//等级6消耗知识2数量
	skLV7Info[256],//等级7信息
	skLV7Pt1,//等级7消耗知识1
	skLV7Pt1A,//等级7消耗知识1数量
	skLV7Pt2,//等级7消耗知识2
	skLV7Pt2A,//等级7消耗知识2数量
	skLV8Info[256],//等级8信息
	skLV8Pt1,//等级8消耗知识1
	skLV8Pt1A,//等级8消耗知识1数量
	skLV8Pt2,//等级8消耗知识2
	skLV8Pt2A,//等级8消耗知识2数量
};
static SkillsList[29][E_SKILLSLIST];

enum E_PTSLIST
{
	spName[16],
	spType,//点数类型: 1.技能点 2.知识点 3.练习点
};

static const PtsList[][E_PTSLIST]=
{
    {"",0},
    //1
    {"技能点",1},
    {"机械知识",2},
    {"信息知识",2},
    {"研发知识",2},
    {"医学知识",2},
    //6
    {"稀有知识",2},
    {"洞察知识",2},
    {"射击练习",3},
    {"健身练习",3},
    {"禅修练习",3},
    //11
    {"体力练习",3}
};

enum E_ACTIVELIST
{
	actName[16],
	actCode[16]
};

static const ActiveList[][E_ACTIVELIST] =
{
    {"无", "None"},
    //1
    {"修车", "Mechanic"},
    {"短路点火", "HotWirer"},
    {"开锁", "Unlocker"},
    {"潜行", "Sneaker"},
    {"治疗", "Healer"},
    //6
    {"搜索", "Searcher"},
    {"观察", "Observer"},
    {"THE WORLD!", "Dio"},
    {"抢夺地盘", "Attack"},
    {"开路队长", "Captain"},
    //11
    {"精神领袖", "Godfather"},
    {"龙头老大", "OG"},
    {"救世主", "Savior"},
    {"束缚", "Tie"},
    {"调查", "Detector"},
    //16
    {"电击", "Tazer"},
    {"破门", "Rammer"},
    {"钉刺", "Stinger"},
    {"路障", "Blocker"}
};

enum E_MIXLIST
{
	mxType,//1为合成道具 2为合成装备 3为合成枪枝
	mxSlot1,
	mxSlot1A,
	mxSlot2,
	mxSlot2A,
	mxSlot3,
	mxSlot3A,
	mxResult,
	mxResultA,
	mxReqFire,//是否需要用火
	mxReqArm,//需求制枪技能等级
	mxReqDrug//需求制药技能等级
};

static const MixList[][E_MIXLIST]=
{
    {1,39,3,92,1,0,0,93,1,0,0,0},//火堆:木头*3 + 火种*1
    {1,86,1,39,2,0,0,92,1,0,0,0},//火种:纤维*1 + 木头*2/动物脂肪*2
    {1,162,2,0,0,0,0,92,1,0,0,0},
    {2,39,5,38,3,0,0,46,1,0,0,0},//手工斧头:木头*5 + 铁*3
    {2,39,5,41,5,0,0,44,1,0,0,0},//手工石锤:木头*5 + 石材*5
    {1,83,1,84,1,0,0,91,1,0,0,0},//手工绷带:兽皮*1 + 兽毛*1/纤维*2
    {1,86,2,0,0,0,0,91,1,0,0,0},
    {2,39,2,85,2,0,0,36,1,0,0,0},//手工钓竿:木头*2 + 纤维*2
    {1,87,2,0,0,0,0,38,1,1,0,0},//铁:铁矿*2
    {2,39,5,38,5,0,0,43,1,0,0,0},//手工十字镐:木头*5 + 铁*5
    {1,86,8,0,0,0,0,135,1,0,0,0},//轻便护甲:纤维*8
    {1,86,12,0,0,0,0,135,1,0,0,0},//普通护甲:纤维*12
    {1,86,8,86,8,0,0,135,1,0,0,0},//重型护甲:纤维*8 + 纤维*8
	{1,158,2,0,0,0,0,135,1,0,0,0},//普通护甲:鳄鱼皮*2
    {1,39,2,0,0,0,0,89,1,1,0,0},//木炭:木头*2
    {1,39,1,88,1,0,0,90,1,1,0,0},//火药:木头*1 + 硝石*1
    {3,38,5,90,3,0,0,22,17,0,1,0},//9mm(17发):(A)铁*5 + (B)火药*3
    {3,38,8,90,5,0,0,32,50,0,1,0},//tec9(50发):(A)铁*8 + (B)火药*5
    {3,38,12,39,3,90,5,25,10,0,1,0},//霰弹枪(10发):(A)铁*12 + (B)木头*3 + (C)火药*5
	{1,90,3,0,0,0,0,306,1,0,1,0},//9mm子弹:(A)火药*3
    {1,0,0,90,3,0,0,307,1,0,1,0},//冲锋枪子弹:(B)火药*3
    {1,90,5,0,0,0,0,308,1,0,1,0},//霰弹:(A)火药*5
    {3,0,0,38,8,90,5,28,50,0,2,0},//乌兹(50发):(B)铁*8 + (C)火药*5
    {3,38,6,39,2,90,5,26,10,0,2,0},//短管霰弹枪(10发):(A)铁*6 + (B)木头*2 + (C)火药*5
    {3,38,6,90,6,0,0,24,14,0,2,0},//沙漠之鹰(14发):(A)铁*6 + (B)火药*6
	{1,0,0,0,0,90,3,309,1,0,2,0},//重手枪子弹:(C)火药*3
    {3,38,6,90,6,0,0,24,14,0,3,0},//MP5冲锋枪(30发):(A)铁*12 + (B)火药*3
    {3,38,12,39,5,90,6,25,30,0,3,0},//AK47(30发):(A)铁*12 + (B)木头*5 + (C)火药*6
    {3,38,12,39,3,90,5,33,10,0,3,0},//来福枪(10发):(A)铁*12 + (B)木头*3 + (C)火药*5
	{1,90,6,0,0,0,0,310,1,0,3,0},//步枪子弹:(A)火药*6
	{1,0,0,90,5,0,0,311,1,0,3,0},//来福枪子弹:(B)火药*5
    {3,38,15,90,10,0,0,31,14,0,4,0},//M4(50发):(A)铁*15 + (B)火药*10
    {3,38,10,39,8,90,5,34,10,0,4,0},//狙击枪(10发):(A)铁*10 + (B)木头*8 + (C)火药*5
    {3,38,35,90,10,0,0,35,5,0,5,0},//火箭筒(1发):(A)铁*35 + (B)火药*10
    {1,90,50,0,0,0,0,312,1,0,5,0},//火箭弹:(A)火药*50
    {1,43,5,44,5,0,0,36,1,0,0,1},//维他命:(A)黄色药草*5 + (B)白色药草*5
    {1,43,10,44,5,0,0,37,1,0,0,1},//抗生素:(A)黄色药草*10 + (B)白色药草*5
    {1,42,5,43,10,0,0,96,1,0,0,2},//肾上腺素:(A)绿色药草*5 + (B)黄色药草*10
    {1,42,20,0,0,0,0,97,1,0,0,2},//绿色药品:(A)绿色药草*20
    {1,44,20,0,0,0,0,98,1,0,0,1},//白色药品:(A)白色药草*20
    {1,43,20,0,0,0,0,99,1,0,0,1},//黄色药品:(A)黄色药草*20
    {1,0,0,43,5,44,5,100,1,0,0,1},//迷幻药:(B)黄色药草*5 + (C)白色药草*5
    {2,117,100,0,0,0,0,5,1,0,0,0},//2B:(A)机器碎片*100
    {2,0,0,117,100,0,0,6,1,0,0,0},//9S:(B)机器碎片*100
    {2,0,0,0,0,117,100,52,1,0,0,0},//A2:(C)机器碎片*100
    {1,85,1,0,0,0,0,120,1,1,0,0},//熟兽肉:(A)生兽肉*1
    {1,52,1,0,0,0,0,121,1,1,0,0},//田鸡肉:(A)青蛙*1
    {1,53,1,0,0,0,0,122,1,1,0,0},//田鸡肉(毒):(A)蟾蜍*1
    {1,0,0,53,1,0,0,121,1,1,0,0},//田鸡肉:(B)蟾蜍*1
    {1,47,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)将鱼*1
    {1,48,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)锦鲤*1
    {1,58,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)腔棘鱼*1
    {1,59,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)虱目鱼*1
    {1,60,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)沙丁鱼*1
    {1,63,1,0,0,0,0,123,1,1,0,0},//熟鱼肉(小):(A)鲂鱼*1
    {1,46,1,0,0,0,0,124,1,1,0,0},//熟鱼肉(中):(A)龙鱼*1
    {1,54,1,0,0,0,0,124,1,1,0,0},//熟鱼肉(中):(A)吴郭鱼*1
    {1,50,1,0,0,0,0,125,1,1,0,0},//熟鱼肉(大):(A)赤*1
    {1,51,1,0,0,0,0,125,1,1,0,0},//熟鱼肉(大):(A)巨骨舌鱼*1
    {1,61,1,0,0,0,0,125,1,1,0,0},//熟鱼肉(大):(A)旗鱼*1
    {1,55,1,0,0,0,0,126,1,1,0,0},//熟鱼肉(毒):(A)河豚*1
    {1,0,0,55,1,0,0,123,1,1,0,0},//熟鱼肉(小):(B)河豚*1
    {1,0,0,0,0,85,1,33,2,0,0,0},//鱼饵*2:(C)生兽肉*1
    {1,38,25,0,0,90,25,139,1,0,0,0},//武器原料货物:(A)铁*25 + (C)火药*25
    {1,88,25,0,0,39,25,140,1,0,0,0},//火药原料货物:(A)硝石*25 + (C)木头*25
    {1,0,0,0,0,43,50,142,1,0,0,0},//药品原料货物:(C)黄色药草*50
    {1,0,0,0,0,44,50,142,1,0,0,0},//药品原料货物:(C)白色药草*50
    {1,0,0,0,0,42,50,142,1,0,0,0},//药品原料货物:(C)绿色药草*50
    {1,0,0,0,0,114,50,142,1,0,0,0},//药品原料货物:(C)红色药草*50
    {1,0,0,0,0,39,50,143,1,0,0,0},//家具原料货物:(C)木头*50
    {1,0,0,0,0,40,50,143,1,0,0,0},//家具原料货物:(C)砖块*50
    {1,0,0,0,0,38,50,143,1,0,0,0},//家具原料货物:(C)铁*50
    {1,0,0,0,0,120,50,144,1,0,0,0},//食材原料货物:(C)熟兽肉*50
    {1,0,0,0,0,125,50,144,1,0,0,0},//食材原料货物:(C)熟鱼肉(大)*50
    {1,0,0,0,0,124,50,144,1,0,0,0},//食材原料货物:(C)熟鱼肉(中)*50
    {1,0,0,0,0,123,50,144,1,0,0,0},//食材原料货物:(C)熟鱼肉(小)*50
    {1,0,0,0,0,86,50,145,1,0,0,0},//衣服原料货物:(C)纤维*50
    {1,324,1,0,0,0,0,40,1,1,0,0},//砖块:(A)黏土*1
    {1,39,3,89,2,0,0,93,1,0,0,0},//火堆:木头*3 + 木炭*2
    {1,39,3,162,2,0,0,93,1,0,0,0},//火堆:木头*3 + 动物脂肪*2
    {1,0,0,39,12,0,0,193,1,0,0,0},//高木墙:(B)木头*12
    {1,39,6,39,6,0,0,194,1,0,0,0},//木墙:(A)木头*6 + (B)木头*6
    {1,39,9,39,9,0,0,195,1,0,0,0},//木围篱:(A)木头*9 + (B)木头*9
    {1,39,4,39,4,0,0,196,1,0,0,0},//拼装木栅栏:(A)木头*4 + (B)木头*4
    {1,0,0,39,4,39,4,197,1,0,0,0},//简易木栅栏:(B)木头*4 + (C)木头*4
    {1,39,5,39,5,0,0,198,1,0,0,0},//木栅栏:(A)木头*5 + (B)木头*5
    {1,39,1,39,4,39,1,199,1,0,0,0},//小木桌:(A)木头*1 + (B)木头*4 + (C)木头*1
	{1,39,3,39,2,0,0,200,1,0,0,0},//木椅:(B)木头*3 + (C)木头*2
	{1,39,2,39,2,39,1,201,1,0,0,0},//木躺椅:(A)木头*2 + (B)木头*2 + (C)木头*1
	{1,39,6,39,5,39,4,202,1,0,0,0},//小木阶:(B)木头*6 + (B)木头*5 + (C)木头*4
	{1,0,0,39,4,39,2,203,1,0,0,0},//圆木桌:(B)木头*4 + (C)木头*2
	{1,39,25,39,25,39,25,204,1,0,0,0},//木桥:(A)木头*25 + (B)木头*25 + (C)木头*25
	{1,40,5,40,5,0,0,205,1,0,0,0},//砖墙:(A)砖块*5 + (B)砖块*5
	{1,39,8,39,8,0,0,206,1,0,0,0},//实木墙:(A)木头*8 + (B)木头*8
	{1,41,6,41,6,0,0,207,1,0,0,0},//石墙:(A)石材*6 + (B)石材*6
	{1,40,5,0,0,40,5,208,1,0,0,0},//砖墙(附门框):(A)砖块*5 + (C)砖块*5
	{1,39,8,0,0,39,8,209,1,0,0,0},//实木墙(附门框):(A)木头*8 + (C)木头*8
	{1,41,6,0,0,41,6,210,1,0,0,0},//石墙(附门框):(A)石材*6 + (C)石材*6
	{1,0,0,40,5,40,5,211,1,0,0,0},//砖墙(附窗框):(B)砖块*5 + (C)砖块*5
	{1,0,0,39,8,39,8,212,1,0,0,0},//实木墙(附窗框):(B)木头*8 + (C)木头*8
	{1,0,0,41,6,41,6,213,1,0,0,0},//石墙(附窗框):(B)石材*6 + (C)石材*6
	{1,0,0,39,6,39,6,214,1,0,0,0},//木墙(附窗框):(B)木头*6 + (C)木头*6
	{1,0,0,40,3,40,3,215,1,0,0,0},//小砖墙:(B)砖块*3 + (C)砖块*3
	{1,0,0,39,4,39,4,216,1,0,0,0},//小实木墙:(B)木头*4 + (C)木头*4
	{1,0,0,41,3,41,3,217,1,0,0,0},//小石墙:(B)石材*3 + (C)石材*3
	{1,0,0,39,3,39,3,218,1,0,0,0},//小木墙:(B)木头*3 + (C)木头*3
	{1,40,10,40,10,0,0,219,1,0,0,0},//长砖墙:(A)砖块*10 + (B)砖块*10
	{1,39,16,39,16,0,0,220,1,0,0,0},//长实木墙:(A)木头*16 + (B)木头*16
	{1,41,12,41,12,0,0,221,1,0,0,0},//长石墙:(A)石材*12 + (B)石材*12
	{1,39,12,39,12,0,0,222,1,0,0,0},//长木墙:(A)木头*12 + (B)木头*12
	{1,39,3,39,5,39,3,223,1,0,0,0},//阳伞木桌 :(A)木头*3 + (B)木头*5 + (C)木头*3
	{1,0,0,38,3,38,2,228,1,0,0,0},//铁椅 :(B)铁*3 + (C)铁*2
	{1,0,0,39,5,39,2,229,1,0,0,0},//木摇椅 :(B)木头*5 + (C)木头*2
	{1,41,1,41,1,41,5,244,1,0,0,0},//水泥结构:(A)石材*1 + (B)石材*1 + (C)石材*5
	{1,41,3,41,3,41,5,245,1,0,0,0},//水泥结构:(A)石材*3 + (B)石材*3 + (C)石材*5
	{1,41,5,41,5,41,5,246,1,0,0,0},//水泥结构:(A)石材*5 + (B)石材*5 + (C)石材*5
	{1,41,10,41,10,41,5,247,1,0,0,0},//水泥结构:(A)石材*10 + (B)石材*10 + (C)石材*5
	{1,41,10,41,1,41,5,248,1,0,0,0},//水泥结构:(A)石材*10 + (B)石材*1 + (C)石材*5
	{1,38,10,38,6,38,2,249,1,0,0,0},//铁阶梯:(A)铁*10 + (B)铁*6 + (C)铁*2
	{1,38,2,38,6,38,10,250,1,0,0,0},//铁阶梯:(A)铁*2 + (B)铁*6 + (C)铁*10
	{1,39,4,39,3,39,3,259,1,0,0,0},//简易木制双人床:(A)木头*4 + (B)木头*3 + (C)木头*3
	{1,86,5,0,0,86,6,260,1,0,0,0},//简陋床垫:(A)纤维*5 + (C)纤维*6
	{1,0,0,38,7,0,0,264,1,0,0,0},//铁栏门:(B)铁*7
	{1,0,0,39,9,0,0,265,1,0,0,0},//木门:(B)木头*9
	{1,0,0,38,9,0,0,266,1,0,0,0},//铁门:(B)铁*9
	{1,39,2,39,6,39,10,287,1,0,0,0},//木阶梯:(A)木头*2 + (B)木头*6 + (C)木头*10
	{1,41,3,41,3,41,3,300,1,0,0,0},//平屋顶 :(A)石材*3 + (B)石材*3 + (C)石材*3
	{1,41,5,41,3,41,1,301,1,0,0,0}//斜屋顶:(A)石材*5 + (B)石材*3 + (C)石材*1
};

enum E_CLASSLIST
{
	clsName[16],//课程名称
	clsAcademy,//学院ID 1理工学院 2文学院 3医学院
	clsProf,//教授模组ID
	clsRoom,//教室号码
	clsPt1,//课程知识点1
	clsPt2,//课程知识点2
	clsTime1,//开课时间1(时)
	clsTime2,//开课时间2(时)
	clsTime3,//开课时间3(时)
	clsLength,//课程长度(分钟)
	clsStarted
};

static const ClassList[][E_CLASSLIST] =
{
    {"无", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {"机械工程学", 1, 187, 1, 2, 0, 8, 13, 19, 50, 0},
    {"信息学", 1, 228, 2, 3, 0, 9, 14, 20, 50, 0},
    {"材料学", 1, 141, 1, 4, 0, 10, 15, 21, 50, 0},
    {"观察学", 2, 150, 1, 7, 0, 8, 13, 19, 50, 0},
    {"监定学", 2, 295, 1, 7, 4, 9, 14, 20, 50, 0},
    {"基础医学", 3, 70, 1, 5, 0, 8, 13, 19, 50, 0},
    {"进阶医学", 3, 70, 1, 5, 5, 9, 14, 20, 50, 0},
    {"基础药学", 3, 276, 1, 4, 0, 10, 15, 21, 50, 0},
    {"进阶药学", 3, 276, 1, 4, 5, 11, 16, 22, 50, 0}
};

enum E_CLASSQUIZ//课堂测验
{
	cqzText[144],//测验题目
	cqzAns,//答案选项
	cqzReward//答案奖励
};

static const hintStrs[][128] = {
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"空手按右键指定NPC可以跟他互动, 但若拿枪瞄准则会惊动他"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"天气会随时间改变, 若在下雨天长期待在户外淋雨有可能会感冒"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"按2键可以开启载具面板发动引擎或开启头灯"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"枪械熟练度可以通过训练或实战累积"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"饥饿值每两分钟会损失1点, 太过饥饿对身体不好.记得补充营养"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"按H键可以在世界或团队频道发布消息, 也可以发布动作消息"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"下线或在旅馆让你的游戏角色休息可以加速恢复体力的速度"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"长期处在低生命值的状态会让你的伤口感染, 让健康更加恶化"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"垃圾车工作可以两人一组进行来增加效率"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"无任何人或团体归属的载具是不会耗油的"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"有些工作有每日可接受次数的上限"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"沙漠植物不怎么需要浇水也能好好成长喔"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"缺水或生病的植物是不会成长的"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"能种的植物数量是依你的等级决定的"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"若植物没有在需求时间内浇水会缺水而死"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"玩家可以到特定的市场或交易所买卖想要的东西"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"丢弃或掉落的东西会在30分钟后消失"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"狩猎野生动物会掉落一些素材"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"城市内举办着各式各样的比赛, 你可以通过在比赛创新纪录来获得奖金"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以将暂停画面所标记的坐标分享给同车的乘客"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"到学院修课可以获得知识点学习或升级技能"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"修车能力达到最高级时, 所在的载具会渐渐恢复生命喔"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"升级制枪能力跟制药能力可以让你合成一般人不会合成的东西"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"需要治疗吗?你可以向懂得治疗能力的人寻求帮助"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"各地的市场每天都会有来自海外的订单, 你可以通过完成那些订单赚钱"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"想要更进一步自订载具吗?你可以拜访各个城市的改装厂"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"到靶场训练可以升级枪枝熟练度以外, 还能升级爆击能力"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"到健身房训练可以升级耐打能力, 减少其他玩家造成的伤害"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"到健身房可以学习新战斗招式"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"专心上课才能学得更多"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"进行联络人任务可以让你获得丰富的报酬"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"初始的体力恢复速度是每十分钟１点, 通过使用相关道具或在床上休息可以增加恢复速度"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以通过担任汽车销售员, 用比车行更便宜的价格卖车给其他玩家赚取佣金"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"渔夫捕鱼切记适量就好, 过度捕捞将使海洋资源匮乏"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"汽车销售员可以试试看改装销售车, 让客户对商品的印象改观"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"想要创业?想要成为企业的一份子?可以谘询政府大楼, 将有专人为你服务"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以改装厂把自己的车改装成计程车来载客赚取外快"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"为企业购买办公室才能解锁包括开拓事业在内的更多选项喔"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"为你的组织购买工厂来扩展更多收入管道"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"机库除了能收藏飞行载具, 还能替您保养所有储存在里面的载具"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"不满意现有的工作?加入企业后工作上将有更多样的选择"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"当你看到野生动物时, 你可以试着丢弃身上的食物来吸引们"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以到狩猎市场贩售狩猎所获得的道具"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"找地标?在电子用品商店买到GPS导航系统后可以输入关键字搜寻几乎所有地标"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"跟动物交换身体真的是可能发生的事吗?"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"每种帮会地盘都有不同的收益类型, 你可以使用观察技能来侦查地盘的底细"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"地盘可以为帮会提供零成本的被动收益, 使用抢夺地盘主动技来攻占更多地盘吧"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"帮会成员都可以使用帮会技能, 若身为首领更有专属的首领技能为帮会带来增益"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"电台主持人无法随时在线?可以使用排程播放来让系统逐一播放准备好的歌曲"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"媒体业热度每15分钟会减少10点, 当电台有1名听众可以增加1点, 电视频道有1名观众会增加2点"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"使用摄影机或空拍机来为你的媒体业拍摄播映画面吧"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"当你被攻击或是权益受损时, 务必报警维护自己的权利"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"当服刑过半可以申请假释出狱"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"想要维护正义, 保护人民的安全?前往各大警局申请加入警队是你的好选择"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以将载具或地产转卖给其他玩家"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"如果没有手机, 也可以使用各地的电话亭按Z通话"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"生病了?你可以前往医院找医生治疗"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"新玩家若对游戏有疑问, 可以按H键于新手频道询问辅导员"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"若超过14天未登入游戏将会使你的地产与载具被强制法拍"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"每个小时州政府都收取一定的税金纳公"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"想要在世界频道让大家知道你属于的组织?你可以在个人菜单的信息页面选择头衔来更换目前要代表的组织"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"除了工作外, 你也可以接受联络人任务来赚取额外现金与经验值"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"寻找与狩猎传奇生物可以让你获得稀有技能点"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以使用采集到的材料来合成物件, 你可以通过放置物件来建立掩护物或甚至是属于自己的家"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以在合成页面查看目前身上的材料可以合成出的道具"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"对游戏有疑问?你可以查看个人菜单里的帮助菜单, 在里面可以找到各种功能与玩法的介绍"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"会产出各式各样水果的果树真的存在吗?"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以在家具行购买物件布置你的家,已放置的物件可以在互动菜单的资产菜单查看、移动、收回与保养"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"在家具旁按Y可以使用其功能,像是躺在床上、收看电视、用电脑上网、使用音响播放音乐...等等"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"躺在床上可以加速体力恢复"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"为车辆安装涡轮增压可以使其爆发出有如超级跑车的性能,但相对的稳定性也会降低"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"你可以使用家中电脑或放置的笔记型电脑上网于线上购物"},
	{""#TEXT_PINKRED"<<提示>>"#TEXT_NURSEPINK"钓到的鱼或是狩猎到的生肉可以通过家中炉子或是合成的火堆烹煮来增加营养价值"}
};

//From IEE by Mike(MK2)
enum E_TPDATA
{
    bool:tpCreated,
	Float:tpOutX,
	Float:tpOutY,
	Float:tpOutZ,
	Float:tpOutA,
	tpOutI,
	tpOutW,
	Float:tpInX,
	Float:tpInY,
	Float:tpInZ,
	Float:tpInA,
	tpInI,
	tpInW,
	tpType,
	tpTypeID,
	tpPickO,
	tpPickI,
	tpMsg[128],
	Text3D:tp3DText,
	tpIcon
};

static TPData[MAX_TPS][E_TPDATA];

//犯罪资料(暂存)
enum E_CRIME
{
    //crCriminal,//罪犯ID
    crType,//犯罪种类
    crVictimType,//受害者种类
    crVictimID,//受害者ID
    crWeapon,//相关武器
    crDetail[144],//细节
    Float:crX,//犯罪位置
    Float:crY,
    Float:crZ,
    crTimer//自动消除倒数(900秒)
};

static Crime[MAX_PLAYERS][MAX_CRIMES][E_CRIME];
static const EMPTY_CRIME[E_CRIME];

enum E_TREASURELIST
{
	trLocation[48],//宝藏位置消息
	trType,
	trItemID,//宝藏掉落的道具ID
	Float:trX,//宝藏坐标
	Float:trY,
	Float:trZ
};

static const TreasureList[][E_TREASURELIST] =
{
    {"洛圣都东南方沙滩", TREA_SEA, 131, 2783.8154,-2313.2854,-6.0645},
    //1
    {"洛圣都东南方沙滩", TREA_SEA, 131, 2920.1514,-1650.4500,-25.9349},
    {"洛圣都东南方沙滩", TREA_SEA, 131, 2896.6392,-1792.0974,-17.0210},
    {"洛圣都南方沙滩", TREA_SEA, 131, 879.0518,-1998.0601,-4.1718},
    {"洛圣都南方沙滩", TREA_SEA, 131, 833.3507,-2064.0957,-8.2085},
    {"洛圣都南方沙滩", TREA_SEA, 131, 716.8713,-1957.2273,-4.5898},
    //6
    {"洛圣都南方沙滩", TREA_SEA, 131, 597.1646,-2121.0735,-26.8821},
    {"洛圣都南方沙滩", TREA_SEA, 131, 591.6116,-2145.1460,-26.5369},
    {"洛圣都南方沙滩", TREA_SEA, 131, 449.0621,-2077.0132,-28.1983},
    {"洛圣都南方沙滩", TREA_SEA, 131, 332.9176,-2037.3414,-19.8696},
	{"洛圣都南方沙滩", TREA_SEA, 131, 194.2419,-1949.5470,-3.9565},
	//11
	{"奇利耶德山沿岸", TREA_SEA, 131, -2070.0879,-2883.4329,-25.6546},
	{"奇利耶德山沿岸", TREA_SEA, 131, -1890.2864,-2814.4871,-10.8141},
	{"奇利耶德山沿岸", TREA_SEA, 131, -2511.1331,-2926.0830,-26.1893},
	{"奇利耶德山沿岸", TREA_SEA, 131, -2736.0645,-2785.3762,-6.5252},
	{"奇利耶德山沿岸", TREA_SEA, 131, -2893.5686,-2418.6428,-22.7281},
	//16
	{"奇利耶德山沿岸", TREA_SEA, 131, -2764.1123,-2198.7986,-20.2474},
	{"圣费耶洛西岸", TREA_SEA, 131, -2969.4941,-674.6124,-4.3202},
	{"圣费耶洛西岸", TREA_SEA, 131, -2974.0137,-283.6313,-7.7979},
	{"圣费耶洛西岸", TREA_SEA, 131, -2971.5835,-246.5385,-8.1302},
	{"圣费耶洛西岸", TREA_SEA, 131, -2963.2075,289.5331,-5.9697},
	//21
	{"圣费耶洛西岸", TREA_SEA, 131, -2919.4211,529.3832,-20.8930},
	{"圣费耶洛西岸", TREA_SEA, 131, -2932.2603,1234.0643,-5.3191},
	{"金门大桥桥下", TREA_SEA, 131, -2677.3411,1584.1628,-4.7281},
	{"金门大桥桥下", TREA_SEA, 131, -2663.2769,1899.9006,-36.8405},
	{"金门大桥桥下", TREA_SEA, 131, -2669.2793,2024.8607,-42.4908}
};

enum E_PRECORDDATA//玩家总纪录资料
{
    ORM:ORM_ID,//ORM物件编号
    prID,
    prPlayerID,
    prLogDays,//登入天数
    prJTrash,//垃圾车工作次数
    prJGas,//油罐车工作
    prJAds,//传单工作
    prStealVehs,//偷玩家车数量
    prRefuels,//总加油量
    prJRoadDeliver,//货柜工作
    prJFacProd,//工厂工作
    prTaxi,//载客数量
    prEarned,//总收入
    prSpent,//总支出
    prBuyVeh,//买过车数
    prDeath,//死亡次数
    prKill,//击杀次数
    prJail,//坐牢次数
    prAllWanted,//累计通缉等级
    prQuestClear,//总差事完成次数
    prEat,//饮食数
    prPlant,//种植次数
    prWater,//浇水次数
    prFishes,//钓到的鱼总数
    prJobClear,
    prMCar,//在车辆走私场卖过车的次数
    prHunt,//狩猎次数
    prMFish,//在鱼市场卖过鱼的次数
    prMMat,//在材料市场卖过材料的次数
	prMGun,//在枪市场卖过东西的次数
	prGym,//健身总次数
	prRange,//射击练习总分数
	prZen,//完整禅修次数
	prClass1,//机械工程学分钟数
    prClass2,//信息学分钟数
    prClass3,//材料学分钟数
    prClass4,//观察学分钟数
    prClass5,//监定学分钟数
    prClass6,//基础医学钟数
    prClass7,//进阶医学分钟数
    prClass8,//基础药学分钟数
	prClass9,//进阶药学分钟数
	prMPlant,//在花市卖植物的次数
	prRace,//赛车过的次数
	prFisher,//总捕捞鱼数
	prRobStore,//抢过的商店数
	prCarSellJob,//销售过的车数
	prJFD,//外送次数
	prMHunt,//在狩猎市场市场卖过的次数
	prLumber,//砍伐过的树
	prMatWar,//成功在货物战争抢到的原料数
	prMSweet,//NPC任务完成次数
	prMSimeon,
	prMTrevor,
	prMCesar,
	prMEmmet,
	prMToreno,
	prMWoozie
};

static RecordData[MAX_PLAYERS+1][E_PRECORDDATA];
static const EMPTY_RECORDDATA[E_PRECORDDATA];

enum E_PCONFIGDATA//玩家设定资料
{
    ORM:ORM_ID,//ORM物件编号
    cfID,
    cfPlayerID,
	cfHud1,//是否显示血量防弹衣量表
	cfHud2,//是否显示银行存款
	cfHud3,//是否显示饥饿与体力量表
	cfHud4,//是否显示底部
	cfWalk,//走路方式
	cfHud5,//是否显示时速表
	cfFight,//战斗招式
	cfNameTag,//是否显示其他玩家名字与血条
	cfHud6,//是否显示时间
	cfPhoneOff,//手机是否开机
	cfPhoneMute,//手机是否静音
	cfHitSound,//打击/被打击音效
	cfQuickN1T,//自订常用功能
	cfQuickN1,
	cfQuickN2T,
    cfQuickN2,
    cfQuickN3T,
    cfQuickN3,
    cfQuickN4T,
    cfQuickN4,
    cfQuickN5T,
    cfQuickN5,
    cfQuickN6T,
    cfQuickN6,
    cfQuickN7T,
    cfQuickN7,
    cfQuickN8T,
    cfQuickN8,
    cfQuickN9T,
    cfQuickN9
};

static ConfigData[MAX_PLAYERS+1][E_PCONFIGDATA];
static const EMPTY_CONFIGDATA[E_PCONFIGDATA];

enum E_MISSIONDATA//任务
{
    ORM:ORM_ID,//ORM物件编号
    msID,
    msPlayerID,
    msMissionID,//任务ID
    msPassed,//任务是否已完成
    msStage,//任务阶段(暂存)
    msTimer//任务Timer(暂存)
};

static MissionData[MAX_PLAYERS+1][MAX_MISSIONS][E_MISSIONDATA];
static const EMPTY_MISSIONDATA[E_MISSIONDATA];

enum E_MISSIONSLIST
{
	msType,//任务种类
	msBoss,//请求人
	msMoney,//金钱奖励
	msExp,//经验值奖励
	msTitle[32],//任务标题
	msDes[512]//任务内容
};

static const MissionsList[][E_MISSIONSLIST]=
{
    {MISSION_NONE, MNPC_NONE, 0, 0, " ", " "},
    //1
    {MISSION_TUTORIAL, MNPC_NONE, 500, 200, ""#TEXT_PINKRED"自由国度", ""#TEXT_WHITE"在这里你可以体验新的生活\n为了帮助你起步,这个导览将会帮助你完成必需品的购买以及认识你所在的环境\n** 要进行的项目有:\n- 寻找一辆载具按F上去驾驶\n- 按2键打开载具面板发动引擎\n- 前往便利商店\n- 按F进入商店里面\n- 使用鼠标右键锁定店员与他谈话购买必需品\n- 使用ATM提出存款\n- 前往汉堡店购买食物\n- 按N键打开背包查看自己的物品"},
    {MISSION_TUTORIAL, MNPC_NONE, 1000, 300, ""#TEXT_FADEBLUE"加入聊天频道", ""#TEXT_WHITE"你可以通过世界频道与其他玩家聊天\n也可以在新手频道询问辅导员关于游戏的问题\n** 要进行的项目有:\n- 按H打开频道菜单\n- 选择任一频道便可在上面发送消息"},
    {MISSION_TUTORIAL, MNPC_NONE, 1500, 200, ""#TEXT_WHITE"购买新造型", ""#TEXT_WHITE"觉得现在的样子不好看吗?\n你可以前往各地的服饰店购买新造型\n** 要进行的项目有:\n- 前往服饰店\n- 与店员谈话选择造型\n- 购买任一造型"},
    {MISSION_TUTORIAL, MNPC_NONE, 3500, 300, ""#TEXT_WHITE"购买电子用品", ""#TEXT_WHITE"城内的电子用品商店卖着各种实用的3c用品\n这次前往电子用品商店来购买手机吧\n** 要进行的项目有:\n- 前往电子用品商店\n- 购买手机($1000)"},
    {MISSION_TUTORIAL, MNPC_NONE, 1000, 1000, ""#TEXT_FADEGREEN"寻找工作", ""#TEXT_WHITE"买了必需用品之后,最重要的就是在寻找稳定的收入来源\n你可以前往位于洛圣都的州政府向服务人员询问各地的工作机会\n** 要进行的项目有:\n- 前往州政府\n- 使用鼠标右键锁定柜台左侧的服务人员谈话\n- 签署工作合约"},
    //6
	{MISSION_TUTORIAL, MNPC_NONE, 500, 500, ""#TEXT_GREEN"种植准备", ""#TEXT_WHITE"在这里除了通过工作可以赚钱外还有其他管道可以赚取额外收入\n不过在那之前我们必须先购买些必备工具\n** 要进行的项目有:\n- 前往工具行\n- 购买水桶($200)与泥铲($400)\n- 前往花市购买种子"},
    {MISSION_TUTORIAL, MNPC_NONE, 500, 750, ""#TEXT_GREEN"种植与浇水", ""#TEXT_WHITE"准备好工具也找到种子之后就能开始种植了\n** 要进行的项目有:\n- 按N键打开背包找到种子并使用\n- 打开背包选择工具类使用水桶\n- 前往水边使用水桶装水\n- 前往盆栽旁使用水桶浇水"},
    {MISSION_TUTORIAL, MNPC_NONE, 1000, 750, ""#TEXT_GREEN"收成与出售盆栽", ""#TEXT_WHITE"当植物成熟后就可以收成了\n如果是药草,可以卖到材料市场\n如果是盆栽.则可以卖到花市\n** 要进行的项目有:\n- 前往盆栽旁使用泥铲收成植物\n- 前往花市\n- 与花市人员谈话"},
    {MISSION_TUTORIAL, MNPC_NONE, 1000, 550, ""#TEXT_SKYBLUE"钓鱼准备", ""#TEXT_WHITE"在这里除了通过工作可以赚钱外还有其他管道可以赚取额外收入\n不过在那之前我们必须先购买些必备工具\n** 要进行的项目有:\n- 前往便利商店\n- 购买鱼饵\n- 前往工具行\n- 购买钓竿($500)\n- 前往水岸边打开背包使用购买的钓竿开始钓鱼"},
    {MISSION_TUTORIAL, MNPC_NONE, 500, 550, ""#TEXT_SKYBLUE"卖出渔获", ""#TEXT_WHITE"当终于钓到鱼之后\n你可以将渔获卖到鱼市场赚钱\n** 要进行的项目有:\n- 前往鱼市场\n- 与鱼市场人员谈话"},
    //11
	{MISSION_TUTORIAL, MNPC_NONE, 1500, 1000, ""#TEXT_ORANGE"采集自然资源", ""#TEXT_WHITE"大自然有各式各样的资源可供采集\n有些唾手可得,有些则需要使用特定工具采集\n** 要进行的项目有:\n- 前往工具行购买斧头($500)与十字镐($1500)\n- 前往可伐林场使用斧头砍伐收集10个木头\n- 前往矿场使用十字镐挖掘收集3个铁矿\n- 在森林或沙漠里收集1个纤维"},
    {MISSION_TUTORIAL, MNPC_NONE, 1500, 2000, ""#TEXT_ORANGE"合成", ""#TEXT_WHITE"当拥有各种材料之后,你可以试着合成各式各样的东西\n这次我们来试试看合成文明的象徵,火堆\n** 要进行的项目有:\n- 准备5个木头与1个纤维\n- 按N键打开个人菜单的合成菜单\n- 在(A)栏位放入1个纤维,并在(B)栏位放入2个木头合成火种\n- 在(A)栏位放入3个木头,并在(B)栏位放入一个火种合成火堆\n- 打开背包使用火堆"},
    {MISSION_TUTORIAL, MNPC_NONE, 1500, 1000, ""#TEXT_YELLOW"狩猎", ""#TEXT_WHITE"在大自然中有着各种野生动物可以狩猎\n通过狩猎可以获得材料也能获得经验值\n** 要进行的项目有:\n- 前往武装国度\n- 购买9mm手枪($500)\n- 前往森林或沙漠寻找野生动物狩猎\n- 狩猎1只野生动物"},
    {MISSION_TUTORIAL, MNPC_NONE, 1500, 1000, ""#TEXT_YELLOW"饲养宠物", ""#TEXT_WHITE"宠物是人类最好的朋友\n在这里,训练良好的宠物更能成为你最好的助手\n** 要进行的项目有:\n- 前往宠物店购买宠物(最低至少需准备$2000)\n- 按N键打开个人菜单->资产->宠物来呼叫你的新伙伴\n- 空手按鼠标右键锁定你的宠物来查看他的信息\n- 查看并使用指令来呼叫你的宠物"},
    {MISSION_TUTORIAL, MNPC_NONE, 2000, 2000, ""#TEXT_VIOLET"学习知识", ""#TEXT_WHITE"知识点可以让你学习新技能\n州内各大学院每天在固定时段都会开课让你获取知识点\n** 要进行的项目有:\n- 前往文学院内\n- 与柜台人员谈话查看课表\n- 于开课时间至教室寻找座位按F坐下听课\n- 打开Tab的技能菜单查看技能"},
	//16
	{MISSION_TUTORIAL, MNPC_NONE, 1500, 2000, ""#TEXT_VIOLET"加紧锻练", ""#TEXT_WHITE"学习之余也可以进行锻练\n不论是前往武装国度打靶训练射击能力\n或是前往健身房锻练体能来升级耐打与耐久能力都是好选择\n** 要进行的项目有:\n- 前往武装国度进行射击练习\n- 前往健身房与教练谈话来使用器材\n** 建议准备金额: $1000以上"},
	{MISSION_GLOBAL, MNPC_SWEET, 7000, 1000, "复兴血盟", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:15以上\n建议人数:2人以上\n自从那个追名逐利的家伙抛弃葛洛夫之后,地盘渐渐被复出的巴拉斯一个个抢走了\n拜托,帮我这个老家伙一个小忙,把那群鸠占鹊巢的混帐赶出葛洛夫帮的地盘吧"},
	{MISSION_GLOBAL, MNPC_SWEET, 5000, 2000, "划分地盘", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:6以上\n建议人数:1人以上\n在墙上涂鸦,这不是小朋友的恶作剧,而是我们宣示地盘主权的方式\n显然外面也有一些老牌混混也懂这个传统,去把那些不属于葛洛夫的标记涂掉来宣示葛洛夫的地盘吧"},
	{MISSION_GLOBAL, MNPC_SWEET, 7000, 1000, "扫除毒枭", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:15以上\n建议人数:2人以上\n毒品使人腐化,正因深知这个道理,所以我们葛洛夫的传统一直是禁止毒品侵蚀我们的\n现在外面有一群王八蛋想把这玩意卖给我们的兄弟来赚钱?找到他们的毒窟把他们全部都给宰了"},
	{MISSION_GLOBAL, MNPC_SIMEON, 5000, 2000, "回收车辆", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:6以上\n建议人数:1人以上\n我总是乐意在人们穷困潦倒的时候用低价将商品分期付款卖给他们,但我可不是做慈善事业的\n有个家伙居然缴了头期款把车开走后人就躲起来了,还好我一直有留了一手,掌握到了那台车的位置\n去把我的车从那家伙那里开回来吧,如果你有遇到那个混帐就顺便帮我教训他一下"},
	//21
	{MISSION_GLOBAL, MNPC_SIMEON, 7500, 2000, "公平竞争", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:15以上\n建议人数:2人以上\n我一直都不担心有竞争对手,事实上我一直是尊重市场机制的\n但我不能接受的是,外面居然有同业的诋毁我,说我是做黑心事业的,这我可不能忍了\n我需要你去他们那里帮他们的商品做一点「改装」,当作是他们的小小的警告"},
	{MISSION_GLOBAL, MNPC_SIMEON, 7500, 2000, "上等货物", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:15以上\n建议人数:2人以上\n想了解我们这行的生态?现在可是个好机会\n现在有个上等货物正由一群混混看守着,我需要你把那货物从他们手中抢过来,就是这么简单"},
	{MISSION_GLOBAL, MNPC_TREVOR, 7500, 2000, "安非派对", ""#TEXT_WHITE"地区:沙漠郊区\n建议等级:15以上\n建议人数:2人以上\n有群乡巴佬正准备用满满一油罐的安毒爽一翻\n身为崔佛菲利浦企业的CEO,我可不能放过这批上等货色\n把那一油罐的货物从那群家伙守中抢过来并送回我这里"},
	{MISSION_GLOBAL, MNPC_TREVOR, 8000, 1500, "二轮禁令", ""#TEXT_WHITE"地区:沙漠郊区\n建议等级:20以上\n建议人数:2人以上\n我跟失落摩托车帮的渊源可以追朔到很久以前...\n我就长话短说了,把外面那群该死的二轮仔解决掉!"},
	{MISSION_GLOBAL, MNPC_TREVOR, 8500, 1500, "解决老大哥", ""#TEXT_WHITE"地区:沙漠郊区\n建议等级:20以上\n建议人数:2人以上\n我一直以为是小荣想太多了,但没想到真让我发现我们亲爱的政府正在时时刻刻监听我们\n而现在在后面那座山上正有所谓的老大哥企图监听我们善良民众的大小事\n找到他!解决他!"},
	//26
	{MISSION_GLOBAL, MNPC_CESAR, 8000, 1750, "砸场子", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:20以上\n建议人数:4人以上\n我相信你跟我一样都是很欣赏好车的同好\n我听说现在市区内的某个角落正举行着改装车友会\n我需要你过去把我想要的那台车抢过来并送回我这里,事成奖励绝对不会少"},
	{MISSION_GLOBAL, MNPC_CESAR, 7500, 1500, "黄色恐怖", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:15以上\n建议人数:2人以上\n我们阿兹提克帮跟维戈是长久以来的世仇\n因为这样,所以我有充足的理由请你去好好料理一下那边那个街角上的维戈帮混混吧\n如果你有从他们身上发现什么,都带回来给我就对了"},
	{MISSION_GLOBAL, MNPC_CESAR, 9000, 2000, "维戈斯末日", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:25以上\n建议人数:4人以上\n维戈帮的居然敢动我们的兄弟,我想我不用多说什么了\n去把那群维戈帮混帐找出来然后把他们通通都给干掉吧"},
	{MISSION_GLOBAL, MNPC_EMMET, 8000, 1750, "抢夺武装", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:20以上\n建议人数:2人以上\n现在道上用的家伙越来越先进了,看来我这个老家伙也渐渐落伍了\n看在我这个糟老头的份上,可以去海港岛上的基地劫持一辆载满武装的货车然后送回来给我吗?"},
	{MISSION_GLOBAL, MNPC_EMMET, 9000, 2000, "三方介入", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:25以上\n建议人数:4人以上\n听我说,我听到传闻说等等会有一场两个帮派间的武装交易\n如果说我们.. 去破坏他们的交易,然后趁他们打的正乱时偷偷把他们的货物抢过来\n你觉得怎么样?"},
	//31
	{MISSION_GLOBAL, MNPC_EMMET, 12000, 3000, "角逐竞争", ""#TEXT_WHITE"地区:洛圣都(LS)\n建议等级:25以上\n建议人数:2人以上\n年轻人,我这个老头是不是渐渐的被时代淘汰了?\n希望你可以实现我这个糟老头的愿望,把外面那群兜售武装的竞争对手都解决掉,让我今晚能一觉到天亮"},
	{MISSION_GLOBAL, MNPC_TORENO, 15000, 5000, "绝命追击", ""#TEXT_WHITE"地区:圣费耶洛(SF)\n建议等级:40以上\n建议人数:2人以上\n孩子你要记住,替政府干的事不论多肮脏都是好事\n我需要你去追杀一个被认为会对国家安全造成威胁的危险分子,先让他逃跑来找到他的老巢,把他与他的同夥都杀掉\n不用想太多,做就对了"},
	{MISSION_GLOBAL, MNPC_TORENO, 12000, 3000, "空中支援", ""#TEXT_WHITE"地区:沙漠郊区\n建议等级:25以上\n建议人数:2人以上\n希望你知道,在世界的各个角落都有特工为了国家安全而努力着\n而现在,有一位国家英雄正需要你的帮助\n前往沙漠的那个废弃机场驾驶装有补给品的飞机,并把补给品空投给我的同伴"},
	{MISSION_GLOBAL, MNPC_TORENO, 15000, 5000, "拒毒有责", ""#TEXT_WHITE"地区:拉斯维托拉斯(LV)\n建议等级:40以上\n建议人数:2人以上\n你知道什么会破坏国内的市场机制吗?未经授权与抽税的舶来品是其中一个\n现在国内有一群从南方来的非法分子正在向我们的国民兜售非法的毒品,你现在知道事态的严重性了吗?\n不懂?总之解决那群外来者就对了"},
	{MISSION_GLOBAL, MNPC_WOOZIE, 12000, 3500, "I卫包裹", ""#TEXT_WHITE"地区:圣费耶洛(SF)\n建议等级:35以上\n建议人数:2人以上\n希望你能了解,我们三合会跟越南帮是长期以来的世仇\n一直以来我们都在容忍这次他们的行为,但这次我们忍无可忍了\n他们这次居然拦截了我们十分重要的包裹,我需要你帮助我们将包裹夺回来"},
	//36
	{MISSION_GLOBAL, MNPC_WOOZIE, 15000, 3500, "拦截外袭", ""#TEXT_WHITE"地区:圣费耶洛(SF)\n建议等级:40以上\n建议人数:2人以上\n又一次的,越南帮又向我们发动了攻击\n我希望你可以协助我们报仇,让他们复出血的代价\n他们一定会以为你是不相干的人,必定可以打他们个措手不及"},
	{MISSION_GLOBAL, MNPC_WOOZIE, 18000, 3000, "终止交易", ""#TEXT_WHITE"地区:拉斯维托拉斯(LV)\n建议等级:40以上\n建议人数:4人以上\n我听说有一众义大利黑手党正在这个城市做某种交易\n这是个重创他们的大好机会,我需要你去破坏他们之间的交易,可以让他们打起来更好\n然后将抢到的货送回来给我,事成必以重赏"}
};


enum E_NPCGANG
{
	npgName[32],
	npgSkin[3],
	npgWeapon[3],
	Float:npgHealth,
	npgLevel
};

static const NPCGang[][E_NPCGANG]=
{
	{"",{0,0,0},{0,0,0},0.0,0},
	{"葛洛夫血盟",{105,106,107},{22,24,32},40.0,NPC_NORMAL},//NTEAM_GSF
	{"巴拉斯",{102,103,104},{22,28,29},40.0,NPC_NORMAL},//NTEAM_BALLAS
	{"维戈帮",{108,109,110},{22,28,25},40.0,NPC_NORMAL},//NTEAM_VAGOS
	{"阿兹提克帮",{114,115,116},{24,32,8},40.0,NPC_NORMAL},//NTEAM_AZTECAS
	{"俄罗斯黑手党",{111,112,113},{22,29,29},50.0,NPC_GANGSTER},//NTEAM_RUSSIAN
	{"越南帮",{121,122,123},{22,28,29},50.0,NPC_NORMAL},//NTEAM_DANANG
	{"圣费耶洛拉弗帮",{173,174,175},{22,28,28},40.0,NPC_NORMAL},//NTEAM_RIFA
	{"三合会",{117,118,120},{28,29,30},75.0,NPC_GANGSTER},//NTEAM_TRIAD
	{"里昂家族",{25073,124,125},{22,25,29},100.0,NPC_GANGSTER},//NTEAM_LEONE
	{"森达科家族",{25076,25077,25078},{22,28,29},75.0,NPC_NORMAL},//NTEAM_SINDACCO
	{"失落摩托车帮",{25063,247,248},{26,28,29},60.0,NPC_NORMAL},//NTEAM_LOST
	{"利他邪教",{135,162,200},{24,29,33},50.0,NPC_NORMAL},//NTEAM_CULT
	{"丐帮",{78,135,137},{22,18,4},40.0,NPC_NORMAL}//NTEAM_HOBO
};

enum E_NPCGANGZONE
{
	ngzGang,//所属NPC帮会
	ngzAmount,//敌人数量
	ngzSpawnFrenq,//生成敌人频率(秒)
	Float:ngzPos[3],//初始位置
	Float:ngzSpawn1[4],//生成敌人位置
	Float:ngzSpawn2[4],
	Float:ngzSpawn3[4],
	Float:ngzSpawn4[4]
};

static const NPCGangZone[][E_NPCGANGZONE]=
{
	{NTEAM_NONE,0,0,{0.0,0.0,0.0},{0.0,0.0,0.0,0.0},{0.0,0.0,0.0,0.0},{0.0,0.0,0.0,0.0},{0.0,0.0,0.0,0.0}},
	//1
	{NTEAM_VAGOS,20,5,{2695.2153,-1242.7529,57.9152},{2690.7854,-1233.5460,58.8875,271.2881},{2699.8286,-1229.3735,60.6569,97.4098},{2690.7954,-1224.7422,61.3930,268.1781},{2705.2515,-1272.3553,58.2192,7.9641}},
	{NTEAM_VAGOS,20,6,{2503.0889,-1407.4745,28.5313},{2492.0256,-1399.5299,28.8386,179.0705},{2487.4993,-1409.6844,28.8375,359.2389},{2495.3142,-1424.1068,28.8438,5.8190},{2469.8960,-1402.4344,28.8332,265.4063}},
	{NTEAM_GSF,40,3,{2498.2402,-1683.6045,13.3822},{2514.2561,-1691.2335,14.0460,50.6466},{2498.4678,-1642.7119,13.7826,178.8011},{2469.4434,-1646.5640,13.7801,178.1744},{2520.2327,-1660.8872,14.4176,98.3204}},
	{NTEAM_GSF,15,8,{2393.3069,-1742.3064,13.5469},{2385.6943,-1714.5570,13.7897,181.3000},{2372.4380,-1760.5125,13.5469,358.5033},{2416.1028,-1711.8036,13.7572,180.2617},{2364.4583,-1761.2537,13.5546,351.3432}},
	{NTEAM_BALLAS,20,5,{2324.6321,-1913.0186,13.6099},{2345.0540,-1905.3500,13.5548,92.5845},{2345.3411,-1922.1917,13.5534,80.0511},{2293.9055,-1933.7483,13.5469,269.9095},{2296.5234,-1884.9669,13.5964,180.7770}},
	//6
	{NTEAM_BALLAS,20,5,{2009.1259,-1602.3944,13.5469},{1986.8303,-1605.1875,13.5312,225.6694},{2042.0825,-1623.0790,13.5469,357.1023},{2009.6976,-1650.6398,13.5469,1.8257},{2002.5642,-1594.2679,13.5772,218.1961}},
	{NTEAM_RIFA,15,8,{-2185.5166,43.2925,35.3203},{-2126.4431,23.1451,35.3203,85.2749},{-2159.9197,-10.4872,35.3203,0.6742},{-2208.2590,31.4904,35.3203,276.3867},{-2167.0549,97.5277,35.3203,167.9956}},
	{NTEAM_TRIAD,30,8,{-2154.6665,650.5641,52.3672},{-2130.2014,627.1873,52.3672,86.7546},{-2130.3647,673.9135,58.5008,90.9729},{-2155.8442,681.5967,61.6865,270.4422},{-2155.7637,645.3458,52.3672,269.5746}},
	{NTEAM_TRIAD,30,8,{2031.0459,1017.2606,10.8203},{2026.5337,978.6781,10.8203,270.8617},{2030.1497,1068.8386,10.8203,177.2934},{2025.1731,1006.2166,10.8203,266.6902},{2024.2062,1010.6611,10.8203,269.4376}},
	{NTEAM_LEONE,30,8,{2166.0635,1662.1349,10.8203},{2175.0366,1712.8741,11.0469,174.9640},{2195.2361,1685.6548,12.3672,81.9031},{2195.2078,1677.4915,12.3672,93.7374},{2195.3037,1668.2848,12.3672,93.1107}},
	//11
	{NTEAM_AZTECAS,20,8,{1936.9939,-2102.5847,13.5643},{1953.9125,-2062.1882,13.5469,185.0100},{1898.6825,-2097.7947,13.4874,178.2615},{1897.7747,-2106.5789,13.5849,0.3099},{1954.4581,-2145.0530,13.5469,359.5147}},
	{NTEAM_LOST,20,8,{664.1044,-477.4114,16.3359},{681.5745,-475.7870,16.3359,179.0984},{648.0627,-496.5847,16.3359,357.5552},{664.5005,-452.7624,16.3359,176.1335},{698.2183,-477.5092,16.3359,93.7494}}
};

enum E_PSICKDATA//玩家疾病资料
{
    ORM:ORM_ID,//ORM物件编号
    scID,
    scPlayerID,
    scHealth,//生命疾病
    scHunger,//饥饿疾病
    scStamina,//体力疾病
    scHigh,//药物亢奋
    scSickBuff,//抑制疾病时间(秒)
    scStamBuff//提升体力恢复时间(秒)
};

static SickData[MAX_PLAYERS+1][E_PSICKDATA];
static const EMPTY_SICKDATA[E_PSICKDATA];

enum E_OBJDATA//物件/家具
{
    ORM:ORM_ID,//ORM物件编号
    oID,
    oOwner,
    oObjectID,//下面Object ListID
	Float:oX,
	Float:oY,
	Float:oZ,
	Float:oRX,
	Float:oRY,
	Float:oRZ,
	oInterior,
	oWorld,
	Float:oHealth,
	oExpire,//过期时间(TimeStamp)
	oPass[24],
	oInfinity,
	oObject//在服务器中的物件ID(暂存)
};

static ObjectData[MAX_PLAYER_OBJECTS][E_OBJDATA];

enum E_OBJLIST
{
	oType,
	oName[32],
	oItemType,//道具种类
	oItemID,//道具ID
	oObjID,//Object ID
	Float:oMaxHealth,
	oLast//保存时长(秒)
};

static const ObjectList[][E_OBJLIST]=
{
    {OBJ_NONE," ", 0, 0, 0, 0.0},
    //1
    {OBJ_DECO,"密盆草盆栽", ITEM_USE, 71, 2195, 50.0, 604800},//7天
    {OBJ_DECO,"百合花盆栽", ITEM_USE, 72, 2251, 50.0, 604800},
    {OBJ_DECO,"木盆草盆栽", ITEM_USE, 73, 2252, 50.0, 604800},
    {OBJ_DECO,"圣诞红盆栽", ITEM_USE, 74, 2253, 50.0, 604800},
    {OBJ_DECO,"小椰子盆栽", ITEM_USE, 75, 2011, 50.0, 604800},
    //6
    {OBJ_DECO,"硬草盆栽", ITEM_USE, 76, 2811, 50.0, 604800},
    {OBJ_DECO,"斯兰盆栽", ITEM_USE, 80, 862, 50.0, 604800},
    {OBJ_DECO,"巨型仙人掌盆栽", ITEM_USE, 81, 653, 50.0, 604800},
    {OBJ_DECO,"散叶仙人掌盆栽", ITEM_USE, 82, 753, 50.0, 604800},
    {OBJ_DECO,"小红花盆栽", ITEM_USE, 104, 2245, 50.0, 604800},
    //11
    {OBJ_DECO,"马草盆栽", ITEM_USE, 105, 2240, 50.0, 604800},
    {OBJ_DECO,"二回树盆栽", ITEM_USE, 106, 2010, 50.0, 604800},
    {OBJ_BUILD,"高木墙", ITEM_USE, 193, 19433, 150.0, 432000},//5天
    {OBJ_BUILD,"木t墙", ITEM_USE, 194, 19370, 150.0, 432000},
    {OBJ_BUILD,"木围篱", ITEM_USE, 195, 19641, 250.0, 432000},
    //16
    {OBJ_BUILD,"拼装木栅栏", ITEM_USE, 196, 1460, 5.0, 432000},
    {OBJ_BUILD,"简易木栅栏", ITEM_USE, 197, 1408, 5.0, 432000},
    {OBJ_BUILD,"木栅栏", ITEM_USE, 198, 1446, 5.0, 432000},
    {OBJ_DECO,"小木桌", ITEM_USE, 199, 2115, 50.0, 1209600},//14天
    {OBJ_CHAIR,"木椅", ITEM_USE, 200, 2636, 50.0, 1209600},
    //21
    {OBJ_FIRE,"火堆", ITEM_USE, 93, 19632, 500.0, 7200},//2小时
    {OBJ_BED,"木躺椅", ITEM_USE, 201, 1645, 50.0, 1209600},
    {OBJ_BUILD,"小木阶", ITEM_USE, 202, 1472, 200.0, 432000},
    {OBJ_DECO,"圆木桌", ITEM_USE, 203, 2111, 50.0, 1209600},
    {OBJ_BUILD,"木桥", ITEM_USE, 204, 19588, 300.0, 432000},
    //26
    {OBJ_BUILD,"砖墙", ITEM_USE, 205, 19355, 5000.0, 432000},
    {OBJ_BUILD,"实木墙", ITEM_USE, 206, 19356, 250.0, 432000},
    {OBJ_BUILD,"石墙", ITEM_USE, 207, 19364, 800.0, 432000},
    {OBJ_BUILD,"砖墙(附门框)", ITEM_USE, 208, 19385, 5000.0, 432000},
    {OBJ_BUILD,"实木墙(附门框)", ITEM_USE, 209, 19386, 250.0, 432000},
    //31
    {OBJ_BUILD,"石墙(附门框)", ITEM_USE, 210, 19393, 4000.0, 432000},
    {OBJ_BUILD,"砖墙(附窗框)", ITEM_USE, 211, 19401, 5000.0, 432000},
    {OBJ_BUILD,"实木墙(附窗框)", ITEM_USE, 212, 19402, 250.0, 432000},
    {OBJ_BUILD,"石墙(附窗框)", ITEM_USE, 213, 19410, 4000.0, 432000},
    {OBJ_BUILD,"木墙(附窗框)", ITEM_USE, 214, 19416, 150.0, 432000},
    //36
    {OBJ_BUILD,"小砖墙", ITEM_USE, 215, 19428, 5000.0, 432000},
    {OBJ_BUILD,"小实木墙", ITEM_USE, 216, 19429, 250.0, 432000},
    {OBJ_BUILD,"小石墙", ITEM_USE, 217, 19437, 4000.0, 432000},
    {OBJ_BUILD,"小木墙", ITEM_USE, 218, 19443, 150.0, 432000},
    {OBJ_BUILD,"长砖墙", ITEM_USE, 219, 19447, 5000.0, 432000},
    //41
    {OBJ_BUILD,"长实木墙", ITEM_USE, 220, 19448, 400.0, 432000},
    {OBJ_BUILD,"长石墙", ITEM_USE, 221, 19456, 4000.0, 432000},
    {OBJ_BUILD,"长木墙", ITEM_USE, 222, 19462, 300.0, 432000},
    {OBJ_CHAIR,"阳伞木桌", ITEM_USE, 223, 1281, 10.0, 1209600},
    {OBJ_DECO,"电视柜", ITEM_USE, 224, 2311, 250.0, 1209600},
    //46
    {OBJ_DECO,"电视柜", ITEM_USE, 225, 2313, 250.0, 1209600},
    {OBJ_CHAIR,"黑沙发椅", ITEM_USE, 226, 1704, 250.0, 1209600},
    {OBJ_CHAIR,"白沙发椅", ITEM_USE, 227, 1705, 250.0, 1209600},
    {OBJ_CHAIR,"铁椅", ITEM_USE, 228, 1721, 250.0, 1209600},
    {OBJ_CHAIR,"木摇椅", ITEM_USE, 229, 2096, 100.0, 1209600},
    //51
    {OBJ_CHAIR,"白长沙发", ITEM_USE, 230, 1702, 350.0, 1209600},
    {OBJ_CHAIR,"黑长沙发", ITEM_USE, 231, 1703, 350.0, 1209600},
    {OBJ_CHAIR,"黑皮革沙发", ITEM_USE, 232, 1713, 350.0, 1209600},
    {OBJ_TV,"黑电视", ITEM_USE, 233, 1518, 200.0, 1209600},
    {OBJ_TV,"木框电视", ITEM_USE, 234, 1747, 200.0, 1209600},
    //56
    {OBJ_TV,"高级电视", ITEM_USE, 235, 1792, 200.0, 1209600},
    {OBJ_TV,"设计师电视", ITEM_USE, 236, 2224, 50.0, 1209600},
    {OBJ_TV,"液晶电视", ITEM_USE, 237, 19786, 25.0, 1209600},
    {OBJ_DECO,"R星海滩巾", ITEM_USE, 238, 1641, 75.0, 1209600},
    {OBJ_SPEAKER,"设计师黑音响", ITEM_USE, 239, 2229, 75.0, 1209600},
    //61
    {OBJ_SPEAKER,"设计师木音响", ITEM_USE, 240, 2230, 75.0, 1209600},
    {OBJ_SPEAKER,"设计师立式音响", ITEM_USE, 241, 2233, 20.0, 1209600},
    {OBJ_BUILD,"玻璃片", ITEM_USE, 242, 19466, 10.0, 432000},
    {OBJ_BUILD,"大玻璃片", ITEM_USE, 243, 19325, 15.0, 432000},
    {OBJ_BUILD,"水泥结构(长1*宽1*高5)", ITEM_USE, 244, 18762, 1000.0, 432000},
    //66
    {OBJ_BUILD,"水泥结构(长3*宽3*高5)", ITEM_USE, 245, 18763, 1500.0, 432000},
    {OBJ_BUILD,"水泥结构(长5*宽5*高5)", ITEM_USE, 246, 18764, 2000.0, 432000},
    {OBJ_BUILD,"水泥结构(长10*宽10*高5)", ITEM_USE, 247, 18765, 3000.0, 432000},
    {OBJ_BUILD,"水泥结构(长10*宽1*高5)", ITEM_USE, 248, 18766, 1500.0, 432000},
    {OBJ_BUILD,"铁阶梯(开口朝右)", ITEM_USE, 249, 8614, 1500.0, 432000},
    //71
    {OBJ_BUILD,"铁阶梯(开口朝左)", ITEM_USE, 250, 8615, 1500.0, 432000},
    {OBJ_BED,"黄色双人床", ITEM_USE, 251, 1701, 550.0, 1209600},
    {OBJ_BED,"木制双人床", ITEM_USE, 252, 1794, 550.0, 1209600},
    {OBJ_BED,"黄色双人床", ITEM_USE, 253, 1799, 550.0, 1209600},
    {OBJ_BED,"黄色木制双人床", ITEM_USE, 254, 1701, 550.0, 1209600},
    //76
    {OBJ_BED,"铁制双人床", ITEM_USE, 255, 1801, 550.0, 1209600},
    {OBJ_BED,"棕色木制双人床", ITEM_USE, 256, 2299, 550.0, 1209600},
    {OBJ_BED,"旅馆靠墙双人床组", ITEM_USE, 257, 2563, 550.0, 1209600},
    {OBJ_BED,"旅馆靠墙双人床组", ITEM_USE, 258, 2566, 550.0, 1209600},
    {OBJ_BED,"简易木制双人床", ITEM_USE, 259, 14866, 250.0, 1209600},
    //81
    {OBJ_BED,"简陋床垫", ITEM_USE, 260, 14861, 50.0, 1209600},
    {OBJ_BED,"高级红色双人床", ITEM_USE, 261, 11720, 750.0, 1209600},
    {OBJ_BED,"高级斑马纹四人床", ITEM_USE, 262, 14446, 850.0, 1209600},
    {OBJ_DOOR,"金库门", ITEM_USE, 263, 2949, 4000.0, 432000},
    {OBJ_DOOR,"铁栏门", ITEM_USE, 264, 2634, 3000.0, 432000},
    //86
    {OBJ_DOOR,"木门", ITEM_USE, 265, 1497, 300.0, 432000},
    {OBJ_DOOR,"铁门", ITEM_USE, 266, 1533, 4000.0, 432000},
    {OBJ_LIGHT,"挂式台灯", ITEM_USE, 267, 1731, 50.0, 1209600},
    {OBJ_LIGHT,"黄色吊灯", ITEM_USE, 268, 1734, 50.0, 1209600},
    {OBJ_LIGHT,"悬吊日光灯管", ITEM_USE, 269, 1893, 50.0, 1209600},
    //91
    {OBJ_LIGHT,"落地灯", ITEM_USE, 270, 2069, 50.0, 1209600},
    {OBJ_LIGHT,"小台灯", ITEM_USE, 271, 2070, 50.0, 1209600},
    {OBJ_LIGHT,"黄色吊灯", ITEM_USE, 272, 2073, 50.0, 1209600},
    {OBJ_LIGHT,"悬吊灯泡", ITEM_USE, 273, 2074, 50.0, 1209600},
    {OBJ_LIGHT,"黑色落地灯", ITEM_USE, 274, 2108, 50.0, 1209600},
    //96
    {OBJ_LIGHT,"墙灯", ITEM_USE, 275, 3785, 50.0, 1209600},
    {OBJ_LIGHT,"高级白色吊灯", ITEM_USE, 276, 11726, 50.0, 1209600},
    {OBJ_LIGHT,"迪斯可红灯", ITEM_USE, 277, 18653, 100.0, 1209600},
    {OBJ_LIGHT,"迪斯可绿灯", ITEM_USE, 278, 18654, 100.0, 1209600},
    {OBJ_LIGHT,"迪斯可蓝灯", ITEM_USE, 279, 18655, 100.0, 1209600},
    //101
    {OBJ_LIGHT,"灯桩(白)", ITEM_USE, 280, 19121, 50.0, 1209600},
    {OBJ_LIGHT,"灯桩(蓝)", ITEM_USE, 281, 19122, 50.0, 1209600},
    {OBJ_LIGHT,"灯桩(绿)", ITEM_USE, 282, 19123, 50.0, 1209600},
    {OBJ_LIGHT,"灯桩(红)", ITEM_USE, 283, 19124, 50.0, 1209600},
    {OBJ_LIGHT,"灯桩(黄)", ITEM_USE, 284, 19125, 50.0, 1209600},
    //106
    {OBJ_LIGHT,"灯桩(浅蓝)", ITEM_USE, 285, 19126, 50.0, 1209600},
    {OBJ_LIGHT,"灯桩(粉红)", ITEM_USE, 286, 19127, 50.0, 1209600},
    {OBJ_BUILD,"木阶梯(开口朝左)", ITEM_USE, 287, 10244, 400.0, 432000},
    {OBJ_DECO,"圣诞树", ITEM_USE, 288, 19076, 5000.0, 1209600},
    {OBJ_DECO,"礼物盒", ITEM_USE, 289, 19054, 300.0, 1209600},
    //111
    {OBJ_DECO,"礼物盒", ITEM_USE, 290, 19055, 300.0, 1209600},
    {OBJ_DECO,"礼物盒", ITEM_USE, 291, 19056, 300.0, 1209600},
    {OBJ_DECO,"礼物盒", ITEM_USE, 292, 19057, 300.0, 1209600},
    {OBJ_DECO,"礼物盒", ITEM_USE, 293, 19058, 300.0, 1209600},
    {OBJ_DECO,"南瓜", ITEM_USE, 294, 19320, 30.0, 1209600},
    //116
    {OBJ_DECO,"彩蛋", ITEM_USE, 295, 19341, 30.0, 1209600},
    {OBJ_DECO,"彩蛋", ITEM_USE, 296, 19342, 30.0, 1209600},
    {OBJ_DECO,"彩蛋", ITEM_USE, 297, 19343, 30.0, 1209600},
    {OBJ_DECO,"彩蛋", ITEM_USE, 298, 19344, 30.0, 1209600},
    {OBJ_DECO,"彩蛋", ITEM_USE, 299, 19345, 30.0, 1209600},
    //121
    {OBJ_BUILD,"平屋顶", ITEM_USE, 300, 1695, 3500.0, 432000},
    {OBJ_BUILD,"斜屋顶", ITEM_USE, 301, 1696, 3500.0, 432000},
    {OBJ_DECO,"樱花树", ITEM_USE, 305, -1031, 2000.0, 604800},
    {OBJ_DECO,"林檎树", ITEM_USE, 323, 656, 2000.0, 604800},
	{OBJ_CHAIR,"办公椅", ITEM_USE, 325, 1671, 150.0, 1209600},
	//126
	{OBJ_CHAIR,"高级办公椅", ITEM_USE, 326, 1714, 150.0, 1209600},
	{OBJ_DECO,"黑木长桌", ITEM_USE, 327, 19922, 400.0, 1209600},
	{OBJ_DECO,"麻将桌", ITEM_USE, 328, 11690, 200.0, 1209600},
	{OBJ_DECO,"方形木桌", ITEM_USE, 329, 1516, 200.0, 1209600},
	{OBJ_DECO,"长木柜", ITEM_USE, 330, 2180, 200.0, 1209600},
	//131
	{OBJ_PC,"笔记型电脑(白)", ITEM_USE, 331, -1009, 100.0, 1209600},
	{OBJ_PC,"笔记型电脑(黑)", ITEM_USE, 332, 19893, 100.0, 1209600},
	{OBJ_LIGHT,"七彩舞池", ITEM_USE, 333, 19128, 400.0, 1209600}
};

enum E_PLANTDATA//植物
{
    ORM:ORM_ID,//ORM物件编号
    ptID,
    ptOwner,
    ptPlantID,
    ptWater,//0为不缺水 越大代表植物越缺水分
    ptFirtile,
    ptGrowth,//每分钟增加一点
    ptHealth,//0健康 1缺水 2中毒
    ptSick,
    Float:ptX,
    Float:ptY,
    Float:ptZ,
    ptWorld,
    ptObject,
	Text3D:ptText
};

static PlantData[MAX_PLANTS][E_PLANTDATA];

enum E_PLANTLIST
{
	ptType,//0为无效 1为树木 2为盆栽 3为沙漠植物 4为材料作物
	ptName[48],
	ptDes[256],
	ptMaxGrowth,
};

static const PlantList[][E_PLANTLIST]=
{
    {0," ", "", 0},
    //1
    {2, "密盆草", "", 720},
    {2, "百合花", "", 180},
    {2, "木盆草", "", 180},
    {2, "圣诞红", "", 240},
    {2, "小椰子", "", 1440},
    //6
    {2, "硬草", "", 300},
    {3, "斯兰", "", 1440},
    {3, "巨型仙人掌", "", 2880},
    {3, "散叶仙人掌", "", 1800},
    {2, "小红花", "", 120},
    //11
    {2, "马草", "", 120},
    {2, "二回树", "", 680},
    {4, "绿色药草", "", 1440},
    {4, "黄色药草", "", 720},
    {4, "白色药草", "", 1080},
    //16
    {4, "红色药草", "", 480},
    {1, "樱花树", "", 7200},//五天
    {1, "林檎树", "", 7200}//五天
};

enum E_PETDATA//宠物
{
    ORM:ORM_ID,//ORM物件编号
    petID,
    petName[24],//宠物名字
    petOwner,
    petNPC,//宠物的NPCID
    petAnimal,//宠物的动物ID
    Float:petLove,//宠物好感度
    Float:petHealth,//宠物生命
    Float:petHunger,//宠物饥饿值
    petComeCMD[64],//宠物呼叫指令
    petFollowCMD[64],//宠物跟随指令
    petStayCMD[64],//宠物停止指令
    petEatCMD[64],//宠物进食指令
    petAttackCMD[64],//宠物攻击指令
    petTDropCMD[64],//宠物追踪掉落物指令
    petTAnimalCMD[64],//宠物追踪动物指令
    petTPlayaCMD[64],//宠物追踪玩家指令
    petSwitchCMD[64],//宠物跟玩家切换指令
    petEggCMD[64],//宠物下蛋指令
    petEggTime,//宠物最后一次下蛋时间
    petDying//宠物濒死时间
};

static PetData[MAX_PLAYERS+1][MAX_PETS][E_PETDATA];
static const EMPTY_PETDATA[E_PETDATA];

enum E_ANIMALSLIST
{
	amlType,//动物种类
	amlName[64],//动物名称
	amlModel,//动物模组ID
	Float:amlAttack,//动物攻击力
	Float:amlMaxHealth,//动物最大生命
	amlObey,//被诱捕后顺从率分母
	amlPrice,
	Float:amlSpeed
};

static const AnimalsList[][E_ANIMALSLIST]=
{
    {ANIMAL_NONE," ", 0, 5.0, 0.0, 0, 0, FCNPC_MOVE_SPEED_RUN},//FCNPC_MOVE_SPEED_RUN = 0.56444
    //1
    {ANIMAL_DOG_M, "拳师犬", 25042, 30.0, 70.0, 4, 5000, 0.56},
    {ANIMAL_DOG_M, "牛头", 25043, 30.0, 50.0, 4, 3000, 0.50},
    {ANIMAL_DOG_L, "大麦町", 25044, 30.0, 60.0, 2, 4000, 0.57},
    {ANIMAL_DOG_L, "杜宾犬", 25045, 30.0, 60.0, 3, 4500, 0.60},
    {ANIMAL_DOG_L, "哈士奇", 25046, 30.0, 70.0, 2, 4500, 0.70},
    //6
    {ANIMAL_DOG_M, "黑比特犬", 25047, 40.0, 70.0, 5, 5000, 0.62},
    {ANIMAL_DOG_M, "棕比特犬", 25048, 40.0, 70.0, 5, 5000, 0.62},
    {ANIMAL_DOG_M, "灰比特犬", 25049, 40.0, 70.0, 5, 5000, 0.62},
    {ANIMAL_DOG_M, "白比特犬", 25050, 40.0, 70.0, 5, 5000, 0.62},
    {ANIMAL_DOG_M, "罗威那", 25051, 40.0, 80.0, 4, 4500, 0.56},
    //11
    {ANIMAL_DOG_L, "德国牧羊犬", 25052, 30.0, 60.0, 4, 4000, 0.70},
    {ANIMAL_DOG_L, "德国短毛指示犬", 25053, 30.0, 65.0, 4, 4000, 0.70},
    {ANIMAL_CAT, "猫", 25054, 15.0, 20.0, 2, 2000, 0.60},
    {ANIMAL_FOX, "狐狸", 25027, 20.0, 70.0, 40, 15000, 0.62},
    {ANIMAL_BEAR, "熊", 25028, 60.0, 200.0, 200, 50000, 0.70},
    //16
    {ANIMAL_WOLF, "狼", 25029, 60.0, 90.0, 80, 40000, 0.75},
    {ANIMAL_PIG, "猪", 25030, 0.0, 50.0, 2, 2000, 0.35},
    {ANIMAL_CHICKEN, "鸡", 25031, 1.0, 40.0, 2, 500, 0.50},
    {ANIMAL_SHEEP, "绵羊", 25033, 0.0, 40.0, 2, 2000, 0.40},
    {ANIMAL_PANDA, "熊猫", 25041, 0.0, 50.0, 100, 100000, 0.40},
    //21
    {ANIMAL_DOG_S, "柴犬", 25055, 20.0, 30.0, 2, 2500, 0.52},
    {ANIMAL_BIGFOOT, "谜样生物", 25056, 60.0, 3000.0, 1000000, 0, FCNPC_MOVE_SPEED_RUN},//Big Foot
    {ANIMAL_GATOR, "鳄鱼", 25057, 75.0, 100.0, 1000, 35500, 0.40},
    {ANIMAL_DOG_S, "法国斗牛犬", 25060, 15.0, 25.0, 2, 2000, 0.40}
};

//Mission NPC
enum E_MISSIONNPC
{
	mpcName[24],//名称
	mpcUnLV,//解锁等级
	mpcCD//任务完冷却时间(秒)
};

static const MissionNPC[][E_MISSIONNPC]=
{
    {"系统",9999, 0},
    //1
    {"斯威特",6, 1800},//MNPC_SWEET
    {"西门",6, 1800},//MNPC_SIMEON
	{"崔佛",10, 1800},//MNPC_TREVOR
	{"西萨",12, 1800},//MNPC_CESAR
	{"埃米特",20, 1800},//MNPC_EMMET
	{"托雷诺",30, 3600},//MNPC_TORENO
	{"吴梓穆",20, 3600}//MNPC_WOOZIE
};

enum E_RESOURCEDATA
{
    ORM:ORM_ID,//ORM物件编号
	rID,
    rWood,
    rHerbYellow,
    rHerbGreen,
    rHerbWhite,
    rHerbRed,
    rHSeedYellow,
    rHSeedGreen,
    rHSeedWhite,
    rHSeedRed,
    rIron,
    rRock,
    rNiter,//硝石
    rGold,
    rFiber,//纤维
    aFox,
    aBear,
    aWolf,
	aPanda,
	aChicken,
	aPig,
	aSheep,
	aDog,
	aCat,
	fCod,//鳕鱼
	fSaury,//秋刀鱼
	fHerring,//鲱鱼
	fSardine,//沙丁鱼
	fSwordFish,//旗鱼
	fMackerel,//鲭鱼
	fSquid,//鱿鱼
	fTuna,//鲔鱼
	rSeedF,//森林种子
	rSeedD,//沙漠种子
 	fGoldenCarp,//金鳗鱼
	fPiranha,//食人鱼
	fPomfret,//大白鲳
	fSnapper,//长尾鸟
	fTuskfin,//四齿鱼
	aGator,
	rFruit//水果
};

static ResourceData[E_RESOURCEDATA];

enum E_LUMBERTREE//可伐树
{
	trCreated,//树是否已产生
    Float:trX,//树的坐标
    Float:trY,
    Float:trZ,
    Float:trRX,
    Float:trRY,
    Float:trRZ,
    trWood,//树所剩余的木头数量
    trTimer,//树会用到的TimerID
    trObjID,//跟树连结的Object ID
    trNatural//是否为系统产生的资源树,如果世则会在被砍伐后再产生一棵资源树
}

static LumberTree[MAX_TREES][E_LUMBERTREE];

enum E_PRICEDATA//服务器数值
{
    ORM:ORM_ID,//ORM物件编号
 	prcID,
    prcGas,//油价
    prcCod,//鳕鱼价格
	prcSaury,//秋刀鱼价格
	prcHerring,//鲱鱼价格
	prcSardine,//沙丁鱼价格
	prcSwordFish,//旗鱼价格
	prcMackerel,//鲭鱼价格
	prcSquid,//鱿鱼价格
	prcTuna,//鲔鱼价格
	prcGoldenCarp,//金鳗鱼价格
	prcPiranha,//食人鱼价格
	prcPomfret,//大白鲳价格
	prcSnapper,//长尾鸟价格
	prcTuskfin,//四齿鱼价格
	prcWood,//木头价格
	prcRock,//石材价格
	prcIron,//铁矿价格
	prcNiter,//硝石价格
	prcElec,//每分钟电价
	Float:prcTax,//税率
	prcWelfare,//福利津贴
	prcLotto//乐透奖池
};

static PriceData[E_PRICEDATA];

enum E_WANTEDRULE//通缉规则
{
    ORM:ORM_ID,//ORM物件编号
 	wrID,
    wrHitMin,
    wrHitMax,
    wrHitSMin,
    wrHitSMax,
    wrKillMin,
    wrKillMax,
    wrDestroyMin,
    wrDestroyMax,
    wrRobMin,
    wrRobMax,
    wrStealMin,
    wrStealMax,
    wrGunMin,
    wrGunMax,
    wrHijackMin,
    wrHijackMax
};

static WantedRule[E_WANTEDRULE];

//载具道具储存资料
enum E_VEHITEM
{
	ORM:ORM_ID,
	viID,
	viType,//储存种类 分为消耗型道具(UseItem) 武器 现金
	viItemID,//储存的道具/武器ID
	viVehicleID,//储存的载具
	viCount//储存数量
};

static VehicleItem[MAX_VEHICLES+1][MAX_ITEMS][E_VEHITEM];
static const EMPTY_VEHITEM[E_VEHITEM];

//地产道具储存资料
enum E_ESTITEM
{
	ORM:ORM_ID,
	eiID,
	eiOwnerID,//拥有的玩家ID
	eiType,//储存种类 分为消耗道具(UseItem)、装备道具(EQItem)与武器
	eiItemID,//储存的道具/武器ID
	eiEstateID,//储存的地产
	eiCount//储存数量
};

static EstateItem[MAX_ESTATES][MAX_ITEMS][E_ESTITEM];
static const EMPTY_ESTITEM[E_ESTITEM];

//公部门道具储存资料
enum E_DPTTITEM
{
	ORM:ORM_ID,
	diID,
	diType,//储存种类 分为消耗道具(UseItem)、装备道具(EQItem)与武器
	diItemID,//储存的道具/武器ID
	diDeptID,//储存的部门ID
	diCount//储存数量
};

static DeptItem[MAX_DEPARTMENTS][MAX_ITEMS][E_DPTTITEM];
static const EMPTY_DPTITEM[E_DPTTITEM];


/*
//物件道具储存资料
enum E_OBJITEM
{
	ORM:ORM_ID,
	oiID,
	oiType,//储存种类
	oiItemID,//储存的道具/武器ID
	oiObjectID,//储存的物件ID
	oiCount//储存数量
};

static ObjectItem[MAX_PLAYER_OBJECTS][MAX_ITEMS][E_OBJITEM];
static const EMPTY_OBJITEM[E_OBJITEM];
*/

enum E_TEXTMSG//手机短信(不会保存到资料库)
{
    tmCreated,
	tmPlayerID,//接收人
	tmSenderType,//寄件人种类 1为玩家 2为NPC
	tmSenderID,//寄件人
	tmText[144],//内容
	tmTime//寄件时间(TimeStamp)
};
static TextMsg[MAX_PLAYERS+1][MAX_TEXTS][E_TEXTMSG];
static const EMPTY_TEXTMSG[E_TEXTMSG];

enum E_LOTTO
{
	ORM:ORM_ID,
	lotID,
	lotPlayerID,
	lotNum,
};
static PlayerLotto[MAX_PLAYERS+1][6][E_LOTTO];
static const EMPTY_PLAYERLOTTO[E_LOTTO];

enum E_ITEMS_USE
{
	ORM:ORM_ID,
	iuID,
	iuItemID,
	iuPlayerID,
	iuCount
};

static PlayerItems_USE[MAX_PLAYERS+1][MAX_ITEMS][E_ITEMS_USE];
static const EMPTY_IUDATA[E_ITEMS_USE];

enum E_ITEMS_EQ
{
	ORM:ORM_ID,
	ieqID,
	ieqItemID,
	ieqPlayerID,
	ieqBroke,
};
static PlayerItems_EQ[MAX_PLAYERS+1][MAX_ITEMS][E_ITEMS_EQ];
static const EMPTY_IEQDATA[E_ITEMS_EQ];

enum E_ITEMSLIST_USE
{
	iuType,
	iuModel,
	iuName[48],
	iuPrice,
	iuDes[256],
	iuSpace,
	iuObject
};

static const ItemsList_USE[][E_ITEMSLIST_USE]=
{
    {0,0,"无", 0, "",0, 0},
    //1
	{IU_FOOD,2215,"铃铛儿童号", 59, "小朋友跟正在减肥的人都爱的铃铛儿童号\n除了有鸡块跟小杯汽水外,还有附赠免费的隐形玩具!\n食用后恢复:\n20点生命值\n35点饥饿",1, 0},
	{IU_FOOD,2216,"叮当炸鸡号", 89, "薯条,汽水,还有嘎滋脆的叮当炸鸡\n只有这里的炸鸡能让你吃到嫩肉,喷汁还有满嘴毛!\n食用后恢复:\n25点生命值\n40点饥饿",3, 0},
	{IU_FOOD,2217,"豪华炸鸡桶", 129, "怎么样都吃不饱?点有满满4块肥美炸鸡的豪华炸鸡桶就对了!\n肥有什么不好?自己快乐最重要!\n食用后恢复:\n25点生命值\n60点饥饿",5, 0},
	{IU_FOOD,2217,"黄金分享鸡", 169, "大促销!现在购买黄金分享鸡将享有优惠特价!\n只在午间12-1点以及晚间6-7点贩售\n食用后恢复:\n60点生命值\n100点饥饿",8, 0},
	{IU_FOOD,2218,"小披萨", 60, "六寸小披萨,腊肠,起士以及酥脆的饼皮\n披萨不加凤梨是我们的坚持\n食用后恢复:\n20点生命值\n35点饥饿",1, 0},
	//6
	{IU_FOOD,2219,"披萨组合", 95, "九寸披萨搭配沙士,有海鲜,`鸡,腊肠等口味可供选择\n凤梨加披萨是邪门歪道\n食用后恢复:\n20点生命值\n50点饥饿",3, 0},
	{IU_FOOD,2220,"巨无霸披萨", 135, "十二寸的披萨,最适合跟朋友在派对一起分享\n如果有朋友喜欢夏威夷披萨的,马上跟他绝交\n食用后恢复:\n25点生命值\n65点饥饿",5, 0},
	{IU_FOOD,2220,"叮当合作优惠", 185, "本店目前跟叮当鸡有合作活动\n凡于中午11-12点或下午5-6点间都可以特价购买披萨鸡组合\n食用后恢复:\n60点生命值\n100点饥饿",8, 0},
	{IU_FOOD,2213,"一号小卡拉鸡", 70, "严选沙漠鸡,本店的卡啦鸡品管做到最好\n绝无禽流感,更不会让你吃到任何一根鸡毛\n食用后恢复:\n25点生命值\n30点饥饿",1, 0},
	{IU_FOOD,2214,"二号双层牛肉堡", 90, "本土美国牛,配上起司与生菜的绝佳组合\n让你吃到双倍满满的爱国味\n食用后恢复:\n25点生命值\n40点饥饿",3, 0},
	//11
	{IU_FOOD,2212,"三号四层红牛堡", 120, "嗜血?这里有其他地方绝对找不到的三分熟牛肉汉堡\n就算是吃,也能满足你对血的j望\n食用后恢复:\n30点生命值\n50点饥饿",5, 0},
	{IU_FOOD,2212,"四号全家优惠", 240, "全家都是爱国者?想吃到更多本土味?\n在下午1点到2点间或晚上7点到8点间都能以特价买到家庭份量的特餐\n食用后恢复:\n50点生命值\n100点饥饿",8, 0},
	{IU_FOOD,2221,"草莓甜甜圈", 35, "独家草莓酱,让你吃到酸甜初恋味\n食用后恢复:\n10点生命值\n15点饥饿",1, 0},
	{IU_FOOD,2222,"巧克力甜甜圈", 35, "浓郁的巧克力酱,搭配甜甜圈美味的口感\n食用后恢复:\n10点生命值\n15点饥饿",1, 0},
	{IU_FOOD,2223,"原味甜甜圈", 35, "最正宗的原味甜甜圈,富含你需要的糖分与热量\n食用后恢复:\n10点生命值\n15点饥饿",1, 0},
	//16
	{IU_FOOD,2222,"甜甜圈盒", 140, "\n\n使用后获得随机口味的甜甜圈4个\n以及美式咖啡1个",6, 0},
	{IU_FOOD,19835,"美式咖啡", 35, "使用来自衣索比亚严选咖啡豆,回甘,香醇\n饮用后恢复:\n5点体力\n1点饥饿",2, 0},
	{IU_FOOD,19835,"拿铁", 45, "香醇鲜奶冲泡,提神又美味\n饮用后恢复:\n5点体力\n2点饥饿",2, 0},
	{IU_FOOD,19835,"卡布奇诺", 45, "香甜奶泡,搭配浓郁的咖啡香\n饮用后恢复:\n4点体力\n3点饥饿",2, 0},
	{IU_FOOD,19835,"黑咖啡", 35, "超级提神的浓缩黑咖啡\n饮用后恢复:\n6点体力",2, 0},
	//21
	{IU_FOOD,2601,"可乐", 30, "\n饮用后恢复:\n15点生命值\n5点饥饿",1, 0},
    {IU_FOOD,2601,"红茶", 30, "\n饮用后恢复:\n10点生命值\n7点饥饿",1, 0},
    {IU_FOOD,2601,"汽水", 30, "\n饮用后恢复:\n5点生命值\n10点饥饿",1, 0},
    {IU_FOOD,2601,"沙士", 30, "\n饮用后恢复:\n8点生命值\n8点饥饿",1, 0},
    {IU_FOOD,19567,"鲔鱼罐头", 30, "真空保存的鲔鱼罐头\n食用后恢复:\n8点生命值\n15点饥饿",1, 0},
    //26
    {IU_FOOD,19579,"吐司面包", 30, "富淀粉,适合充饥的吐司面包\n食用后恢复:\n5点生命值\n20点饥饿",1, 0},
    {IU_FOOD,11741,"御饭团", 25, "海苔包着馅料的御饭团\n食用后恢复:\n5点生命值\n15点饥饿",1, 0},
    {IU_FOOD,2703,"微波汉堡", 35, "超市卖的微波汉堡\n食用后恢复:\n7点生命值\n18点饥饿",1, 0},
    {IU_FOOD,19561,"乐活洋芋片", 30, "乐活品牌的原味洋芋片\n食用后恢复:\n15点生命值\n10点饥饿",1, 0},
    {IU_FOOD,19562,"拿丘司玉米片", 30, "墨西哥进口的Nachos玉米片\n食用后恢复:\n12点生命值\n12点饥饿",1, 0},
    //31
    {IU_FOOD,19565,"皮可起司球", 30, "最适合边跑酷边抓一球来吃的起司球\n食用后恢复:\n18点生命值\n8点饥饿",1, 0},
    {IU_USE,11747,"OK绷", 40, "用来做伤口处里的OK绷\n使用:\n生命恢复到75点",1, 0},
    {IU_USE,0,"鱼饵", 2, "常见的鱼饵\n使用:\n搭配钓竿在钓鱼时使用",1, 0},
    {IU_USE,11722,"蛮牛", 30, "不错的提神饮料\n使用后:\n30分钟内体力恢复量增加1.5倍",2, 0},
    {IU_USE,11722,"红牛", 60, "RED BULL给你一对翅膀\n使用后:\n1小时内体力恢复量增加1.5倍",3, 0},
    //36
    {IU_USE,11723,"维他命", 60, "暂时增加免疫力的健康食品\n使用后:\n使用后30分钟内停止因疾病造成的负面效果",2, 0},
    {IU_USE,11723,"抗生素", 240, "短暂抑制细菌生长的营养品\n使用后:\n使用后1小时内停止因疾病造成的负面效果",3, 0},
    {IU_MAT,19809,"铁", 0, "用来合成工具,汽车零件,枪枝等金属物的材料\n来源:\n燃烧合成: 铁矿x2",1, 0},
    {IU_MAT,19793,"木头", 0, "用来合成出工具,升级房屋或基地建筑的材料\n来源:\n伐木、采集",1, 0},
    {IU_MAT,11708,"砖块", 0, "装潢或升级地产的材料\n来源:\n燃烧合成: 黏土x1",1, 0},
	//41
    {IU_MAT,3930,"石材", 0, "装潢或升级地产的材料\n来源:\n采矿",1, 0},
    {IU_MAT,19839,"绿色药草", 0, "用来合成出药品,补品或毒品的材料\n来源:\n采集",1, 0},
    {IU_MAT,19837,"黄色药草", 0, "用来合成出药品,补品或毒品的材料\n来源:\n采集",1, 0},
    {IU_MAT,19838,"白色药草", 0, "用来合成出药品,补品或毒品的材料\n来源:\n采集",1, 0},
    {IU_USE,2663,"鱼饵包", 60, "一包沙虫鱼饵\n使用后获得30个鱼饵",5, 0},
    //46
    {IU_FISH,19630,"龙鱼", 4933, "栖息在淡水的古代鱼,濒临绝种的稀有鱼",5, 0},
    {IU_FISH,19630,"将鱼", 145, "生活于平地之池沼及河川水流缓慢处,水草茂盛处尤多",3, 0},
    {IU_FISH,19630,"鲤鱼", 112, "在淡水中随处可见的鱼",3, 0},
    {IU_FISH,19630,"锦鲤", 176, "在淡水中随处可见的鱼,常被养来做观赏鱼",4, 0},
    {IU_FISH,19630,"赤", 511, "世界上最大的淡水鱼,尾巴藏有毒刺,常做观赏鱼或食用",6, 0},
    //51
    {IU_FISH,19630,"巨骨舌鱼", 1131, "主要分布在热带区域的河流里,要在这里钓到的机率极其稀有",6, 0},
    {IU_FISH,0,"青蛙", 32, "由蝌蚪变态而成的两栖类动物,多见于河岸",2, 0},
    {IU_FISH,0,"蟾蜍", 31, "俗称癞蛤蟆,大部分蟾蜍耳后有毒腺,分泌毒性分泌物",2, 0},
    {IU_FISH,19630,"吴郭鱼", 68, "通常生活于淡水中,杂食性,常吃水中植物和碎物\n此鱼在面积狭小之水域中亦能繁殖,甚至在水稻田里能够生长",3, 0},
    {IU_FISH,0,"河豚", 89, "分布在淡水或海水,具有膨胀身体的能力来吓阻掠食者",2, 0},
    //56
    {IU_FISH,0,"水蚤", 0, "生活在水中的浮游生物,可存在于多种环境中,包括沼泽、池塘、湖泊以及河流",1, 0},
    {IU_FISH,0,"海蟑螂", 0, "常见的岸栖甲壳类,鲜少在海中活动,但遭遇危险会逃入海中",1, 0},
    {IU_FISH,19630,"腔棘鱼", 617, "生活在深海的活化石",3, 0},
    {IU_FISH,19630,"虱目鱼", 81, "属于热带及亚热带海域鱼类,虽然鱼刺较其他食用鱼多但肉质鲜美",3, 0},
    {IU_FISH,19630,"沙丁鱼", 87, "集群性洄游鱼类,常分布在沿海流域",3, 0},
    //61
    {IU_FISH,19630,"旗鱼", 566, "分布于大西洋的热带至温带海域,长度最长可达4公尺",7, 0},
    {IU_FISH,902,"海星", 44, "可见于大部分海域,具有迅速再生的能力",1, 0},
    {IU_FISH,19630,"鲂鱼", 78, "远洋洄游性鱼类",4, 0},
    {IU_SEED,0,"密盆草种子", 50, "密盆草\n\t成长时间: 12 小时\n\t至少每4小时需浇水一次\n\t成熟一株价值$750\n使用将在这里种植",1, 0},
    {IU_SEED,0,"百合花种子", 50, "百合花\n\t成长时间: 3 小时\n\t至少每1小时需浇水一次\n\t成熟一株价值$250\n使用将在这里种植",1, 0},
    //66
    {IU_SEED,0,"木盆草种子", 50, "木盆草\n\t成长时间: 3 小时\n\t至少每2小时需浇水一次\n\t成熟一株价值$150\n使用将在这里种植",1, 0},
    {IU_SEED,0,"圣诞红种子", 50, "圣诞红\n\t成长时间: 4 小时\n\t至少每1.5小时需浇水一次\n\t成熟一株价值$225\n使用将在这里种植",1, 0},
    {IU_SEED,0,"小椰子种子", 50, "小椰子\n\t成长时间: 24 小时\n\t至少每4小时需浇水一次\n\t成熟一株价值$2000\n使用将在这里种植",1, 0},
    {IU_SEED,0,"硬草种子", 50, "硬草\n\t成长时间: 5 小时\n\t至少每3小时需浇水一次\n\t成熟一株价值$350\n使用将在这里种植",1, 0},
    {IU_WATER,0,"水", 0, "_",0, 0},
    //71
    {IU_POT,2195,"密盆草盆栽", 750, "成熟的密盆草\n一株价值$750",4, 1},
    {IU_POT,2251,"百合花盆栽", 250, "成熟的百合花\n一株价值$250",4, 2},
    {IU_POT,2252,"木盆草盆栽", 150, "成熟的木盆草\n一株价值$150",4, 3},
    {IU_POT,2253,"圣诞红盆栽", 225, "成熟的圣诞红\n一株价值$225",4, 4},
    {IU_POT,2011,"小椰子盆栽", 2000, "成熟的小椰子\n一株价值$2000",7, 5},
    //76
    {IU_POT,2811,"硬草盆栽", 350, "成熟的硬草\n一株价值$350",4, 6},
    {IU_SEED,0,"斯兰种子", 75, "斯兰\n\t成长时间: 24 小时\n\t至少每20小时需浇水一次\n\t成熟一株价值$1550\n使用将在这里种植",1, 0},
    {IU_SEED,0,"巨型仙人掌种子", 100, "巨型仙人掌\n\t成长时间: 48 小时\n\t至少每20小时需浇水一次\n\t成熟一株价值$1850\n使用将在这里种植",1, 0},
    {IU_SEED,0,"散叶仙人掌种子", 100, "散叶仙人掌\n\t成长时间: 30 小时\n\t至少每20小时需浇水一次\n\t成熟一株价值$1650\n使用将在这里种植",1, 0},
    {IU_POT,862,"斯兰盆栽", 1550, "成熟的斯兰\n一株价值$1550",5, 7},
    //81
    {IU_POT,653,"巨型仙人掌盆栽", 1850, "成熟的巨型仙人掌\n一株价值$1850",12, 8},
    {IU_POT,753,"散叶仙人掌盆栽", 1650, "成熟的散叶仙人掌\n一株价值$1650",10, 9},
    {IU_MAT,0,"兽皮", 0, "用来合成道具的材料\n来源:\n狩猎",1, 0},
    {IU_MAT,0,"兽毛", 0, "用来合成道具的材料\n来源:\n狩猎",1, 0},
    {IU_FOOD,19582,"生兽肉", 0, "野生动物的肉\n吃了能恢复点体力,但要小心可能有寄生虫\n食用后恢复:\n2点生命值\n4点饥饿",1, 0},
    //86
    {IU_MAT,675,"纤维", 0, "用来合成道具的材料\n来源:\n采集",1, 0},
    {IU_MAT,0,"铁矿", 0, "用来合成铁的材料\n来源:\n采矿",1, 0},
    {IU_MAT,0,"硝石", 0, "用来合成火药的材料\n来源:\n采矿",1, 0},
    {IU_MAT,19573,"木炭", 0, "用来合成火药的材料\n来源:\n燃烧合成: (A)木头x2",1, 0},
    {IU_MAT,1279,"火药", 0, "用来合成枪械的材料\n来源:\n燃烧合成: (A)木头x1 + (B)硝石x1",1, 0},
    //91
    {IU_USE,11747,"手工绷带", 0, "用来做伤口处里的绷带\n使用:\n生命恢复到30点\n\n合成公式:\n(A)兽皮x1 + (B)兽毛x1\n(A)纤维x2",1, 0},
    {IU_MAT,0,"火种", 40, "用来当作生火燃料的火种\n来源:\n合成: 纤维x1 + 木头x2",1, 0},
    {IU_OBJECT,19632,"火堆", 0, "可以用来照明、取暖跟进行燃烧合成的火堆\n使用将会在地面放置一个火堆,持续燃烧2个小时\n合成公式:\n\n(A)木头x3 + (B)火种x1\n(A)木头x3 + (B)木炭x2",4, 21},
    {IU_MAT,11941,"黄金", 0, "用来合成道具的材料\n来源:\n采矿",1, 0},
    {IU_MAT,0,"白银", 0, "用来合成道具的材料\n来源:\n采矿",1, 0},
    //96
    {IU_USE,1241,"肾上腺素", 0, "救急药物\n使用后会从濒死状态恢复至50点生命",3, 0},
    {IU_USE,1486,"绿色药品", 600, "治疗药物\n使用后治疗破伤风等因为生命过低引发的疾病,并恢复生命至50",3, 0},
    {IU_USE,1484,"白色药品", 300, "治疗药物\n使用后治疗感冒等因体力不足引发的疾病,并恢复体力至20",3, 0},
    {IU_USE,1544,"黄色药品", 400, "治疗药物\n使用后治疗健康流失等因饥饿引发的疾病,并恢复饥饿值至25",3, 0},
    {IU_USE,11738,"医疗包", 1000, "使用后会完全恢复生命\n",10, 0},
    //101
    {IU_USE,2663,"天然有机肥", 100, "天然、纯净,含丰富的微生物群\n使用:\n在植物旁使用\n30分钟内,植物成熟速度增为2倍",4, 0},
    {IU_USE,19570,"活力生技营养剂", 600, "富含植物所需各种营养素,让植物更加成长茁壮\n使用:\n在植物旁使用\n2小时内,植物成熟速度增为2倍",4, 0},
    {IU_USE,2663,"金坷垃", 4000, "肥料掺了金坷垃,一袋能顶两袋撒,肥料掺了金坷垃,小麦亩产一千八\n金坷垃能吸收两米下的氮磷钾\n肥料掺了金坷垃,不流失,不蒸发,零浪费\n使用:\n在植物旁使用\n12小时内,植物成熟速度增为2倍",4, 0},
    {IU_POT,2245,"小红花盆栽", 750, "成熟的小红花\n一株价值$150",4, 10},
    {IU_POT,2240,"马草盆栽", 150, "成熟的马草\n一株价值$150",4, 11},
    //106
    {IU_POT,2010,"二回树盆栽", 150, "成熟的二回树\n一株价值$680",4, 12},
    {IU_SEED,0,"小红花种子", 50, "小红花\n\t成长时间: 2 小时\n\t至少每1小时需浇水一次\n\t成熟一株价值$150\n使用将在这里种植",1, 0},
    {IU_SEED,0,"马草种子", 50, "马草\n\t成长时间: 2 小时\n\t至少每1小时需浇水一次\n\t成熟一株价值$150\n使用将在这里种植",1, 0},
    {IU_SEED,0,"二回树种子", 50, "二回树\n\t成长时间: 12 小时\n\t至少每5小时需浇水一次\n\t成熟一株价值$680\n使用将在这里种植",1, 0},
    {IU_SEED,0,"绿色药草种子", 50, "绿色药草\n\t成长时间: 24 小时\n\t至少每8小时需浇水一次\n\t成熟后可收成 绿色药草20个\n使用将在这里种植",1, 0},
    //111
    {IU_SEED,0,"黄色药草种子", 50, "黄色药草\n\t成长时间: 12 小时\n\t至少每8小时需浇水一次\n\t成熟后可收成 黄色药草20个\n使用将在这里种植",1, 0},
    {IU_SEED,0,"白色药草种子", 50, "白色药草\n\t成长时间: 18 小时\n\t至少每12小时需浇水一次\n\t成熟后可收成 白色药草20个\n使用将在这里种植",1, 0},
    {IU_SEED,0,"红色药草种子", 50, "红色药草\n\t成长时间: 8 小时\n\t至少每24小时需浇水一次\n\t成熟后可收成 红色药草20个\n使用将在这里种植",1, 0},
    {IU_MAT,19837,"红色药草", 0, "用来合成出药品,补品或毒品的材料\n来源:\n采集",1, 0},
    {IU_FOOD,0,"鸡蛋", 5, "到底是先有鸡,还是先有蛋?\n管他的,补充丰富营养必问这问题重要多了\n食用后恢复:\n5点生命值\n5点饥饿",1, 0},
    //116
    {IU_USE,862,"迷幻仙人掌", 0, "奇形怪状的仙人掌\n不知道味道如何?",5, 0},
    {IU_MAT,18631,"机器碎片", 0, "看起来不是来自这个时代的机械零件\n每个凹槽卡准都能互相契合的样子\n\n不知道收集到100个后会组合出什么",1, 0},
    {IU_USE,1210,"肮脏的手提箱", 0, "里面不知道装着什么的手提箱\n打开来看看?",8, 0},
    {IU_USE,19897,"香烟", 10, "为了你的肺着想,少抽菸多运动\n使用后:\n按 鼠标左键 能够吸食",1, 0},
    {IU_FOOD,19882,"熟兽肉", 0, "煮熟的肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n15点生命值\n15点饥饿",1, 0},
    //121
    {IU_FOOD,19882,"田鸡肉", 0, "煮熟的青蛙肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n4点生命值\n6点饥饿",1, 0},
    {IU_FOOD,19882,"田鸡肉", 0, "煮熟的蟾蜍肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n4点生命值\n6点饥饿",1, 0},//有毒
    {IU_FOOD,19882,"熟鱼肉(小)", 0, "煮熟的鱼肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n10点生命值\n10点饥饿",1, 0},
    {IU_FOOD,19882,"熟鱼肉(中)", 0, "煮熟的鱼肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n20点生命值\n20点饥饿",2, 0},
    {IU_FOOD,19882,"熟鱼肉(大)", 0, "煮熟的鱼肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n40点生命值\n40点饥饿",3, 0},
    //126
    {IU_FOOD,19882,"熟鱼肉(小)", 0, "煮熟的鱼肉\n在经过火烤后煮熟的肉,吃了能恢复点体力\n食用后恢复:\n10点生命值\n10点饥饿",1, 0},//有毒
    {IU_MAT,0,"狐狸皮草", 0, "狐狸毛而成的皮草\n来源:\n狩猎",2, 0},
    {IU_MAT,0,"熊掌", 0, "来自黑熊的熊掌\n来源:\n狩猎",1, 0},
    {IU_MAT,0,"狼牙", 0, "来自狼的牙齿\n来源:\n狩猎",1, 0},
    {IU_MAT,0,"羊毛", 0, "来自绵羊的毛\n来源:\n狩猎",2, 0},
    //131
    {IU_USE,19918,"海底宝藏", 50, "来自百年前的海盗沈船里掉落的宝藏箱,里面不知道装着什么样的财宝",8, 0},
    {IU_FUEL,2165,"燃料罐(小)", 500, "可以随身携带给载具补给20燃料的燃料罐",4, 0},
    {IU_FUEL,2165,"燃料罐(中)", 1500, "可以随身携带给载具补给50燃料的燃料罐",8, 0},
    {IU_FUEL,2165,"燃料罐(大)", 4000, "可以随身携带给载具补给100燃料的燃料罐",15, 0},
    {IU_ARMOR,1242,"轻型护甲", 200, "轻便的护甲,穿上后可以为你提供20点护甲",8, 0},
    //136
    {IU_ARMOR,1242,"普通护甲", 500, "一般规格的护甲,穿上后可以为你提供50点护甲",12, 0},
    {IU_ARMOR,1242,"重型护甲", 800, "厚实的护甲,穿上后可以为你提供80点护甲",16, 0},
    {IU_ARMOR,1242,"超重型护甲", 1000, "最全面的护甲,穿上后可以为你提供100点护甲",20, 0},
    {IU_FMAT,2972,"武器原料货物", 1000, "装有制作武器原料的货物箱\n运送至工厂后可以进行拆解组装武器",50, 0},
    {IU_FMAT,2972,"火药原料货物", 500, "装有生产弹药原料的货物箱\n运送至工厂后可以用来生产弹药",50, 0},
    //141
    {IU_FMAT,3013,"特殊货物", 10000, "装有新科技的蓝图以及材料\n运送至工厂后可以让通过消耗原料货物来增加武装研究进度",50, 0},
    {IU_FMAT,2975,"药品原料货物", 2000, "装有制作各类药品原料的货物箱\n运送至工厂后可以用来生产各类药品",50, 0},
    {IU_FMAT,2974,"家具原料货物", 1000, "装有制作各类家具原料的货物箱\n运送至工厂后可以用来生产各类家具",50, 0},
    {IU_FMAT,2974,"食材原料货物", 1000, "装有制作各类食品原料的货物箱\n运送至工厂后可以用来生产各类食材",50, 0},
    {IU_FMAT,2974,"成衣原料货物", 1000, "装有制作各类成衣原料的货物箱\n运送至工厂后可以用来生产各类服饰",50, 0},
    //146
    {IU_FMAT,2973,"安毒原料货物", 5000, "装有生产安非他命原料的货物箱\n运送至工厂后可以用来生产安非他命",50, 0},
    {IU_FMAT,2973,"古柯硷原料货物", 15000, "装有生产古柯硷原料的货物箱\n运送至工厂后可以用来生产古柯硷",50, 0},
    {IU_FMAT,2973,"大麻原料货物", 3000, "装有生产大麻原料的货物箱\n运送至工厂后可以用来生产大麻",50, 0},
    {IU_FPROD,2040,"武器货物箱", 500, "装有工厂制造的武器货物\n可以选择卖给国内外市场获利\n或是开封使用随机获得以下其一:\n150弹药的沙漠之鹰手枪\n500弹药的乌兹\n100弹药的霰弹枪\n75弹药的战斗霰弹枪\n400弹药的MP5\n300弹药的AK47\n200弹药的M4\n100弹药的来福枪\n50弹药的狙击枪",10, 0},
    {IU_FPROD,2358,"火药货物箱", 200, "装有工厂制造的火药货物\n可以选择卖给国内外市场获利\n或是开封使用获得:\n火药x50",10, 0},
    //151
    {IU_FPROD,2975,"药品货物箱", 1500, "装有工厂制造的药品货物\n可以选择卖给国内外市场获利\n或是开封使用随机获得以下其一:\n绿色药品x5\n黄色药品x5\n白色药品x5",25, 0},
    {IU_FPROD,1221,"家具货物箱", 250, "装有工厂制造的家具货物\n可以卖给国内外市场获利\n或是开封使用随机一种家具",5, 0},
    {IU_FPROD,1221,"食材货物箱", 250, "装有工厂制造的食材货物\n可以供给餐车制作餐点卖给其他玩家\n或是可以卖给国内外市场获利",5, 0},
    {IU_FPROD,1221,"衣服货物箱", 200, "装有工厂制造的衣服货物\n可以卖给国内外市场获利",5, 0},
    {IU_FPROD,1271,"安毒货物箱", 1125, "装有工厂制造的安非他命\n可以卖给国内外市场获利",5, 0},
    //156
    {IU_FPROD,1271,"古柯硷货物箱", 4500, "装有工厂制造的古柯硷\n可以卖给国内外市场获利",10, 0},
    {IU_FPROD,1271,"大麻货物箱", 600, "装有工厂制造的大麻\n可以卖给国内外市场获利",5, 0},
    {IU_MAT,0,"鳄鱼皮", 0, "来自鳄鱼身上的硬甲\n来源:\n狩猎",4, 0},
    {IU_USE,19570,"瓶装水", 25, "装着水的宝特瓶\n使用后可以补充身上的水桶或浇水桶",2, 0},
    {IU_FOOD,19346,"热狗", 30, "大又多汁的热狗\n食用后恢复:\n15点生命值\n20点饥饿",1, 0},
    //161
    {IU_FOOD,19568,"冰淇淋", 25, "盒装的冰淇淋\n冰凉消暑最适合夏天的甜点\n食用后恢复:\n20点生命值\n10点饥饿",1, 0},
    {IU_MAT,0,"动物脂肪", 0, "用来合成道具的材料\n来源:\n狩猎",1, 0},
    {IU_USE,321,"紫色棒棒", 900, "情趣的好伙伴\n使用后:\n将紫色棒棒变为武器",5, 0},
    {IU_USE,322,"棒棒", 600, "情趣的好伙伴\n使用后:\n将棒棒变为武器",3, 0},
    {IU_USE,323,"按摩棒", 800, "情趣的好伙伴\n使用后:\n将按摩棒变为武器",4, 0},
    //166
    {IU_USE,324,"银色按摩棒", 800, "情趣的好伙伴\n使用后:\n将银色按摩棒变为武器",4, 0},
    {IU_ARMOR,1242,"主宰者重装", 400000, "超级重型装甲,附带1000点护甲值以及减少50%弹药伤害",50, 0},
    {IU_ARMOR,1242,"主宰者重装", 400000, "超级重型装甲,附带1000点护甲值以及减少50%弹药伤害",50, 0},//change
    {IU_WEAPON,19995,"重手枪爆裂子弹", 50000, "只适用于沙漠之鹰手枪的爆裂子弹弹药\n子弹击中目标后会小范围爆炸\n使用后接下来的10发弹药会变为爆裂子弹\n爆裂子弹的效果在死亡或是下线后将会消失",10, 0},
    {IU_WEAPON,19995,"霰弹枪爆裂子弹", 50000, "只适用于战斗霰弹枪的爆裂子弹弹药\n子弹击中目标后会小范围爆炸\n使用后接下来的10发弹药会变为爆裂子弹\n爆裂子弹的效果在死亡或是下线后将会消失",10, 0},
    //171
    {IU_WEAPON,19995,"狙击枪爆裂子弹", 50000, "只适用于狙击霰弹枪的爆裂子弹弹药\n子弹击中目标后会小范围爆炸\n使用后接下来的10发弹药会变为爆裂子弹\n爆裂子弹的效果在死亡或是下线后将会消失",10, 0},
    {IU_WEAPON,2040,"警用基本装备", 500, "装着沙漠之鹰、警棍以及轻型护甲的警用装备箱",15, 0},
    {IU_WEAPON,2040,"警用战斗装备", 1000, "装着沙漠之鹰、霰弹枪以及普通护甲的警用装备箱",15, 0},
    {IU_WEAPON,2040,"警用冲锋装备", 2000, "装着沙漠之鹰、MP5冲锋枪以及重型护甲的警用装备箱",15, 0},
    {IU_WEAPON,2040,"警用镇暴装备", 4000, "装着战斗霰弹枪、M4步枪以及超重型护甲的警用装备箱",15, 0},
    //176
    {IU_TICKET,0,"乐透彩券", 200, "乐透彩券,一夕致富的机会\n使用后输入6个在1-49间的号码来参与下一次乐透开奖\n注意:使用后只会在下一次乐透生效,且只有在线期间才能兑奖",1, 0},
    {IU_TICKET,0,"特殊造型兑换券", 0, "使用后可以选择任意未拥有的特殊造型一个\n如果已经拥有所有特殊造型将会使这张券报废",0, 0},
    {IU_TICKET,0,"特殊造型抽奖券", 0, "使用后会随机抽中一个未拥有的特殊造型一个\n如果已经拥有所有特殊造型将会使这张券报废",0, 0},
    {IU_TICKET,0,"50点一般知识兑换券", 0, "使用后会可以选择任意一种一般知识点50点",0, 0},
    {IU_TICKET,0,"100点一般知识兑换券", 0, "使用后会可以选择任意一种一般知识点100点",0, 0},
    //181
    {IU_TICKET,0,"500点武器技能兑换券", 0, "使用后会可以选择任意一种武器技能500点\n超过武器技能上限将不会返还或转化",0, 0},
    {IU_TICKET,0,"999点武器技能兑换券", 0, "使用后会可以选择任意一种武器技能999点\n超过武器技能上限将不会返还或转化",0, 0},
    {IU_TICKET,0,"任选车商载具兑换券", 0, "使用方式:\n前往任何想要使用这张券的车商订购载具后\n坐上订购的载具选择购买,将会优先消耗这张兑换券来购买载具",0, 0},
    {IU_TICKET,0,"Wang Car跑车兑换券", 0, "使用方式:\n只限用于王氏汽车(Wang Car)车商的载具\n前往车商订购载具后\n坐上订购的载具选择购买,将会优先消耗这张兑换券来购买载具",0, 0},
    {IU_TICKET,0,"机车兑换券", 0, "使用方式:\n只限用于机车售场的载具\n前往车商订购载具后\n坐上订购的载具选择购买,将会优先消耗这张兑换券来购买载具",0, 0},
    //186
    {IU_TICKET,0,"猫狗宠物兑换券", 0, "使用后可以选择任意一种宠物狗或宠物猫一只",0, 0},
    {IU_TICKET,0,"宠物抽奖券", 0, "使用后可以会随机抽到一种宠物一只",0, 0},
    {IU_TICKET,0,"猛禽宠物兑换券", 0, "使用后可以从狼、鳄鱼或熊之中选择一只获得",0, 0},
    {IU_TICKET,0,"爱心满满宠物兑换券", 0, "使用后可以选择任意一种宠物一只,且其的友好度为100",0, 0},
    {IU_TICKET,0,"地产兑换券", 0, "使用方式:\n前往想要使用这张券的地产选择购买\n将会优先消耗这张兑换券来购买地产",0, 0},
    //191
    {IU_TICKET,0,"地产免费装潢券", 0, "使用方式:\n在地产出口的装潢菜单选择想要更改的内装进行装潢\n将会优先消耗这张兑换券来对地产进行装潢",0, 0},
    {IU_TICKET,0,"100背包空间兑换券", 0, "使用后会无视等级限制扩充100格背包空间\n若背包空间已达上限则会使这张券报废",0, 0},
    {IU_OBJECT,19433,"高木墙", 0, "\n由木头组成的高木墙,可以用做建材阻挡物件布置\n耐久度:150\n合成公式:\n(B)木头x12",10, 13},
    {IU_OBJECT,19370,"木墙", 0, "\n由木头组成的木墙,可以用做建材或阻挡物件布置\n耐久度:150\n合成公式:\n(A)木头x6 + (B)木头x6",10, 14},
    {IU_OBJECT,19641,"木围篱", 0, "\n由木头组成的围篱,可以用做建材或阻挡物件布置\n耐久度:250\n合成公式:\n(A)木头x9 + (B)木头x9",15, 15},
    //196
    {IU_OBJECT,1460,"拼装木栅栏", 0, "\n由木头组成的栅栏,可以用做建材或阻挡物件布置\n耐久度:50\n合成公式:\n(A)木头x4 + (B)木头x4",6, 16},
    {IU_OBJECT,1408,"简易木栅栏", 0, "\n由木头组成的栅栏,可以用做建材或阻挡物件布置\n耐久度:50\n合成公式:\n(B)木头x4 + (C)木头x4",6, 17},
    {IU_OBJECT,1446,"木栅栏", 0, "\n由木头组成的栅栏,可以用做建材或阻挡物件布置\n耐久度:75\n合成公式:\n(A)木头x5 + (B)木头x5",8, 18},
    {IU_OBJECT,2115,"小木桌", 900, "\n由木头组成的桌子,可以用做物件布置\n耐久度:50\n合成公式:\n(A)木头x1 + (B)木头x4 + (C)木头x1",6, 19},
    {IU_OBJECT,2636,"木椅", 900, "\n由木头组成的椅子,可以用做物件布置或是按Y可以坐在上面\n耐久度:50\n合成公式:\n(B)木头x3 + (C)木头x2",5, 20},
    //201
    {IU_OBJECT,1645,"木躺椅", 1200, "\n由木头组成的躺椅,可以用做物件布置或是按Y可以躺在上面\n耐久度:50\n合成公式:\n(A)木头x2 + (B)木头x2 + (C)木头x1",5, 22},
    {IU_OBJECT,1472,"小木阶", 1250, "\n由木头组成的阶梯,可以用做建材或阻挡物件布置\n耐久度:200\n合成公式:\n(B)木头x6 + (B)木头x5 + (C)木头x4",15, 23},
    {IU_OBJECT,2111,"圆木桌", 3000, "\n由木头组成的桌子,可以用做建材或阻挡物件布置\n耐久度:50\n合成公式:\n(B)木头x4 + (C)木头x2",6, 24},
    {IU_OBJECT,19588,"木桥", 0, "\n由木头组成的桥,可以用做物件布置\n耐久度:200\n合成公式:\n(A)木头x25 + (B)木头x25 + (C)木头x25",75, 25},
    {IU_OBJECT,19355,"砖墙", 0, "\n由砖块组成的砖墙,可以用做建材或阻挡物件布置\n耐久度:5000\n合成公式:\n(A)砖块x5 + (B)砖块x5",10, 26},
    //206
    {IU_OBJECT,19356,"实木墙", 0, "\n由木头组成的实木墙,可以用做建材或阻挡物件布置\n耐久度:250\n合成公式:\n(A)木头x8 + (B)木头x8",10, 27},
    {IU_OBJECT,19364,"石墙", 0, "\n由石材组成的石墙,可以用做建材或阻挡物件布置\n耐久度:4000\n合成公式:\n(A)石材x6 + (B)石材x6",10, 28},
    {IU_OBJECT,19385,"砖墙(附门框)", 0, "\n由砖块组成的砖墙,可以用做建材或阻挡物件布置\n耐久度:5000\n合成公式:\n(A)砖块x5 + (C)砖块x5",10, 29},
    {IU_OBJECT,19386,"实木墙(附门框)", 0, "\n由木头组成的实木墙,可以用做建材或阻挡物件布置\n耐久度:250\n合成公式:\n(A)木头x8 + (C)木头x8",10, 30},
    {IU_OBJECT,19393,"石墙(附门框)", 0, "\n由石材组成的石墙,可以用做建材或阻挡物件布置\n耐久度:4000\n合成公式:\n(A)石材x6 + (C)石材x6",10, 31},
    //211
    {IU_OBJECT,19401,"砖墙(附窗框)", 0, "\n由砖块组成的砖墙,可以用做建材或阻挡物件布置\n耐久度:5000\n合成公式:\n(B)砖块x5 + (C)砖块x5",10, 32},
    {IU_OBJECT,19402,"实木墙(附窗框)", 0, "\n由木头组成的实木墙,可以用做建材或阻挡物件布置\n耐久度:250\n合成公式:\n(B)木头x8 + (C)木头x8",10, 33},
    {IU_OBJECT,19410,"石墙(附窗框)", 0, "\n由石材组成的石墙,可以用做建材或阻挡物件布置\n耐久度:4000\n合成公式:\n(B)石材x6 + (C)石材x6",10, 34},
    {IU_OBJECT,19416,"木墙(附窗框)", 0, "\n由木头组成的木墙,可以用做建材或阻挡物件布置\n耐久度:150\n合成公式:\n(B)木头x6 + (C)木头x6",10, 35},
    {IU_OBJECT,19428,"小砖墙", 0, "\n由砖块组成的砖墙,可以用做建材或阻挡物件布置\n耐久度:5000\n合成公式:\n(B)砖块x3 + (C)砖块x3",5, 36},
    //216
    {IU_OBJECT,19429,"小实木墙", 0, "\n由木头组成的实木墙,可以用做建材或阻挡物件布置\n耐久度:250\n合成公式:\n(B)木头x4 + (C)木头x4",5, 37},
    {IU_OBJECT,19437,"小石墙", 0, "\n由石材组成的石墙,可以用做建材或阻挡物件布置\n耐久度:4000\n合成公式:\n(B)石材x3 + (C)石材x3",5, 38},
    {IU_OBJECT,19443,"小木墙", 0, "\n由木头组成的木墙,可以用做建材或阻挡物件布置\n耐久度:150\n合成公式:\n(B)木头x3 + (C)木头x3",5, 39},
    {IU_OBJECT,19447,"长砖墙", 0, "\n由砖块组成的砖墙,可以用做建材或阻挡物件布置\n耐久度:5000\n合成公式:\n(A)砖块x10 + (B)砖块x10",20, 40},
    {IU_OBJECT,19448,"长实木墙", 0, "\n由木头组成的实木墙,可以用做建材或阻挡物件布置\n耐久度:400\n合成公式:\n(A)木头x16 + (B)木头x16",20, 41},
	//221
    {IU_OBJECT,19456,"长石墙", 0, "\n由石材组成的石墙,可以用做建材或阻挡物件布置\n耐久度:4000\n合成公式:\n(A)石材x12 + (B)石材x12",30, 42},
    {IU_OBJECT,19462,"长木墙", 0, "\n由木头组成的木墙,可以用做建材或阻挡物件布置\n耐久度:300\n合成公式:\n(A)木头x12 + (B)木头x12",20, 43},
    {IU_OBJECT,1281,"阳伞木桌", 4000, "\n由木头组成附带阳伞的的桌子,可以用做物件布置\n耐久度:10\n合成公式:\n(A)木头x3 + (B)木头x5 + (C)木头x3",10, 44},
    {IU_OBJECT,2311,"电视柜", 2200, "\n用来放置电视的桌柜,可以用做物件布置\n耐久度:250",15, 45},
    {IU_OBJECT,2313,"电视柜", 2200, "\n用来放置电视的桌柜,可以用做物件布置\n耐久度:250",15, 46},
    //226
    {IU_OBJECT,1704,"黑沙发椅", 2000, "\n小而舒适的沙发椅,可以用做物件布置或是按Y可以坐在上面\n耐久度:250",8, 47},
    {IU_OBJECT,1705,"白沙发椅", 2000, "\n小而舒适的沙发椅,可以用做物件布置或是按Y可以坐在上面\n耐久度:250",8, 48},
    {IU_OBJECT,1721,"铁椅", 500, "\n铁制的椅子,可以用做物件布置或是按Y可以坐在上面\n耐久度:250\n(B)铁x3 + (C)铁x2",5, 49},
    {IU_OBJECT,2096,"木摇椅", 1200, "\n由木头组成的摇椅,可以用做物件布置或是按Y可以坐在上面\n耐久度:100\n(B)木头x5 + (C)木头x2",7, 50},
    {IU_OBJECT,1702,"白长沙发", 5000, "\n舒适的沙发,可以用做物件布置或是按Y可以坐在上面\n耐久度:350",15, 51},
    //231
    {IU_OBJECT,1703,"黑长沙发", 5000, "\n舒适的沙发,可以用做物件布置或是按Y可以坐在上面\n耐久度:350",15, 52},
    {IU_OBJECT,1713,"黑皮革沙发", 6000, "\n舒适的沙发,可以用做物件布置或是按Y可以坐在上面\n耐久度:350",15, 53},
    {IU_OBJECT,1518,"黑电视", 4000, "\n可以用来收看电视频道的电视机,可以用做物件布置且在旁按Y键可以收看媒体频道\n耐久度:200",10, 54},
    {IU_OBJECT,1747,"木框电视", 5000, "\n可以用来收看电视频道的电视机,可以用做物件布置且在旁按Y键可以收看媒体频道\n耐久度:200",10, 55},
    {IU_OBJECT,1792,"高级电视", 5000, "\n可以用来收看电视频道的电视机,可以用做物件布置且在旁按Y键可以收看媒体频道\n耐久度:200",10, 56},
    //236
    {IU_OBJECT,2224,"设计师电视", 7500, "\n可以用来收看电视频道的电视机,可以用做物件布置且在旁按Y键可以收看媒体频道\n耐久度:50",8, 57},
    {IU_OBJECT,19786,"液晶电视", 7500, "\n可以用来收看电视频道的电视机,可以用做物件布置且在旁按Y键可以收看媒体频道\n耐久度:25",5, 58},
    {IU_OBJECT,1641,"R星海滩巾", 200, "\n海滩巾,可以用做物件布置\n耐久度:100",3, 59},
    {IU_OBJECT,2229,"设计师黑音响", 3500, "\n可以用来播放音乐的喇叭,可以用做物件布置且在旁按Y键可以自订播放音乐\n耐久度:75",8, 60},
    {IU_OBJECT,2230,"设计师木音响", 3500, "\n可以用来播放音乐的喇叭,可以用做物件布置且在旁按Y键可以自订播放音乐\n耐久度:75",8, 61},
    //241
    {IU_OBJECT,2233,"设计师立式音响", 5000, "\n可以用来播放音乐的喇叭,可以用做物件布置且在旁按Y键可以自订播放音乐\n耐久度:20",5, 62},
    {IU_OBJECT,19466,"玻璃片", 500, "\n一般的玻璃片,可以用做物件布置\n耐久度:10",5, 63},
    {IU_OBJECT,19325,"大玻璃片", 1000, "\n一般的玻璃片,可以用做物件布置\n耐久度:15",10, 64},
    {IU_OBJECT,18762,"水泥结构(1x1x5)", 0, "\n由石材组成的柱状水泥结构,可以用做建材或阻挡物件布置\n耐久度:1000\n合成公式:\n(A)石材x1 + (B)石材x1 + (C)石材x5",7, 65},
    {IU_OBJECT,18763,"水泥结构(3x3x5)", 0, "\n由石材组成的柱状水泥结构,可以用做建材或阻挡物件布置\n耐久度:1500\n合成公式:\n(A)石材x3 + (B)石材x3 + (C)石材x5",11, 66},
    //246
    {IU_OBJECT,18764,"水泥结构(5x5x5)", 0, "\n由石材组成的柱状水泥结构,可以用做建材或阻挡物件布置\n耐久度:2000\n合成公式:\n(A)石材x5 + (B)石材x5 + (C)石材x5",15, 67},
    {IU_OBJECT,18765,"水泥结构(10x10x5)", 0, "\n由石材组成的柱状水泥结构,可以用做建材或阻挡物件布置\n耐久度:3000\n合成公式:\n(A)石材x10 + (B)石材x10 + (C)石材x5",25, 68},
    {IU_OBJECT,18766,"水泥结构(10x1x5)", 0, "\n由石材组成的柱状水泥结构,可以用做建材或阻挡物件布置\n耐久度:1500\n合成公式:\n(A)石材x10 + (B)石材x1 + (C)石材x5",16, 69},
    {IU_OBJECT,8614,"铁阶梯(开口朝右)", 0, "\n由铁制成的阶梯,可以用做建材或阻挡物件布置\n耐久度:1500\n合成公式:\n(A)铁x10 + (B)铁x6 + (C)铁x2",18, 70},
    {IU_OBJECT,8615,"铁阶梯(开口朝左)", 0, "\n由铁制成的阶梯,可以用做建材或阻挡物件布置\n耐久度:1500\n合成公式:\n(A)铁x2 + (B)铁x6 + (C)铁x10",18, 71},
    //251
    {IU_OBJECT,1701,"黄色双人床", 7500, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 72},
    {IU_OBJECT,1794,"木制双人床", 7500, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 73},
    {IU_OBJECT,1799,"黄色双人床", 8500, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 74},
    {IU_OBJECT,1701,"黄色木制双人床", 9000, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 75},
    {IU_OBJECT,1801,"铁制双人床", 4000, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 76},
    //256
    {IU_OBJECT,2299,"棕色木制双人床", 6000, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 77},
    {IU_OBJECT,2563,"旅馆靠墙双人床组", 4500, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 78},
    {IU_OBJECT,2566,"旅馆靠墙双人床组", 4500, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:550",12, 79},
    {IU_OBJECT,14866,"简易木制双人床", 3000, "\n一般的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:250\n合成公式:\n(A)木头x4 + (B)木头x3 + (C)木头x3",10, 80},
    {IU_OBJECT,14861,"简陋床垫", 500, "\n简陋的床垫堆,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:50\n合成公式:\n(A)纤维x5 + (C)纤维x6",11, 81},
    //261
    {IU_OBJECT,11720,"高级红色双人床", 20000, "\n高级的双人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:750",12, 82},
    {IU_OBJECT,14446,"高级斑马纹四人床", 20000, "\n高级的四人床,可以用做物件布置或是按Y躺在上面休息加速体力恢复\n耐久度:850",16, 83},
    {IU_OBJECT,2949,"金库门", 15000, "\n金库门,可以按Y开关并设定开门密码\n耐久度:4000",8, 84},
    {IU_OBJECT,2634,"铁栏门", 4500, "\n铁制的栅栏门,可以按Y开关并设定开门密码\n耐久度:3000\n(B)铁x7",7, 85},
    {IU_OBJECT,1497,"木门", 1000, "\n木制的门,可以按Y开关并设定开门密码\n耐久度:300\n(B)木头x9",7, 86},
    //266
    {IU_OBJECT,1533,"铁门", 6000, "\n铁制的门,可以按Y开关并设定开门密码\n耐久度:4000\n(B)铁x9",7, 87},
    {IU_OBJECT,1731,"挂式台灯", 1100, "\n灯具,可以用做照明或是物件布置\n耐久度:50",5, 88},
    {IU_OBJECT,1734,"黄色吊灯", 2000, "\n灯具,可以用做照明或是物件布置\n耐久度:50",8, 89},
    {IU_OBJECT,1893,"悬吊日光灯管", 1500, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 90},
    {IU_OBJECT,2069,"落地灯", 2200, "\n灯具,可以用做照明或是物件布置\n耐久度:50",8, 91},
    //271
    {IU_OBJECT,2070,"小台灯", 450, "\n灯具,可以用做照明或是物件布置\n耐久度:50",5, 92},
    {IU_OBJECT,2073,"黄色吊灯", 2000, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 93},
    {IU_OBJECT,2074,"悬吊灯泡", 500, "\n灯具,可以用做照明或是物件布置\n耐久度:50",5, 94},
    {IU_OBJECT,2108,"黑色落地灯", 3000, "\n灯具,可以用做照明或是物件布置\n耐久度:50",8, 95},
    {IU_OBJECT,3785,"墙灯", 1500, "\n灯具,可以用做照明或是物件布置\n耐久度:50",4, 96},
    //276
    {IU_OBJECT,11726,"高级白色吊灯", 4000, "\n灯具,可以用做照明或是物件布置\n耐久度:50",10, 97},
    {IU_OBJECT,18653,"迪斯可红灯", 2400, "\n灯具,可以用做照明或是物件布置\n耐久度:100",12, 98},
    {IU_OBJECT,18654,"迪斯可绿灯", 2400, "\n灯具,可以用做照明或是物件布置\n耐久度:100",12, 99},
    {IU_OBJECT,18655,"迪斯可蓝灯", 2400, "\n灯具,可以用做照明或是物件布置\n耐久度:100",12, 100},
    {IU_OBJECT,19121,"灯桩(白)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 101},
    //281
    {IU_OBJECT,19122,"灯桩(蓝)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 102},
    {IU_OBJECT,19123,"灯桩(绿)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 103},
    {IU_OBJECT,19124,"灯桩(红)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 104},
    {IU_OBJECT,19125,"灯桩(黄)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 105},
    {IU_OBJECT,19126,"灯桩(浅蓝)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 106},
    //286
    {IU_OBJECT,19127,"灯桩(粉红)", 250, "\n灯具,可以用做照明或是物件布置\n耐久度:50",6, 107},
    {IU_OBJECT,10244,"木阶梯(开口朝左)", 0, "\n由木头制成的阶梯,可以用做建材或阻挡物件布置\n耐久度:400\n合成公式:\n(A)木头x2 + (B)木头x6 + (C)木头x10",18, 108},
    {IU_OBJECT,19076,"圣诞树", 5000, "\n圣诞树,可以用做物件布置\n耐久度:5000",20, 109},
    {IU_OBJECT,19054,"礼物盒", 100, "\n圣诞礼物盒,可以用做物件布置\n耐久度:300",5, 110},
    {IU_OBJECT,19055,"礼物盒", 100, "\n圣诞礼物盒,可以用做物件布置\n耐久度:300",5, 111},
    //291
    {IU_OBJECT,19056,"礼物盒", 100, "\n圣诞礼物盒,可以用做物件布置\n耐久度:300",5, 112},
    {IU_OBJECT,19057,"礼物盒", 100, "\n圣诞礼物盒,可以用做物件布置\n耐久度:300",5, 113},
    {IU_OBJECT,19058,"礼物盒", 100, "\n圣诞礼物盒,可以用做物件布置\n耐久度:300",5, 114},
    {IU_OBJECT,19320,"南瓜", 50, "\n南瓜,可以用做物件布置\n耐久度:30",4, 115},
    {IU_OBJECT,19341,"彩蛋", 50, "\n彩蛋,可以用做物件布置\n耐久度:30",1, 116},
    //296
    {IU_OBJECT,19342,"彩蛋", 50, "\n彩蛋,可以用做物件布置\n耐久度:30",1, 117},
    {IU_OBJECT,19343,"彩蛋", 50, "\n彩蛋,可以用做物件布置\n耐久度:30",1, 118},
    {IU_OBJECT,19344,"彩蛋", 50, "\n彩蛋,可以用做物件布置\n耐久度:30",1, 119},
    {IU_OBJECT,19345,"彩蛋", 50, "\n彩蛋,可以用做物件布置\n耐久度:30",1, 120},
    {IU_OBJECT,1695,"平屋顶", 0, "\n由石材组成的平面屋顶,可以用做建材或阻挡物件布置\n耐久度:3500\n(A)石材x3 + (B)石材x3 + (C)石材x3",9, 121},
    //301
    {IU_OBJECT,1696,"斜屋顶", 0, "\n由石材组成的斜面屋顶,可以用做建材或阻挡物件布置\n耐久度:3500\n(A)石材x5 + (B)石材x3 + (C)石材x1",9, 122},
    {IU_USE,365,"喷漆罐", 400, "可以涂鸦与自我防卫的利器\n使用后:\n装备喷漆罐",4, 0},
    {IU_USE,344,"瓶中信", 50, "瓶中信,在水域旁使用可以在上面写消息并投入水中\n投入水里瓶中信将有可能被钓客钓到且其可以查看信上的内容\n一个玩家只可以发送一封瓶中信,发送新的瓶中信将会取代旧的瓶中信内容",2, 0},
    {IU_SEED,0,"樱花树种子", 75, "可以长成美丽樱花的樱花树种子\n\t成长时间: 5 天\n\t至少每24小时需浇水一次\n\t成熟一株价值$12000\n使用将在这里种植",1, 0},
	{IU_POT,0,"樱花树", 12000, "成熟的樱花树\n一株价值$12000",25, 123},
	//306
	{IU_WEAPON,19995,"9mm子弹", 51, "只适用于9mm手枪的子弹弹药\n使用后会装填17颗9mm子弹",4, 0},
	{IU_WEAPON,2038,"冲锋枪子弹", 120, "只适用于冲锋枪的子弹弹药\n使用后会装填30颗冲锋枪子弹",4, 0},
	{IU_WEAPON,2038,"霰弹", 50, "只适用于霰弹枪的子弹弹药\n使用后会装填10颗霰弹",4, 0},
	{IU_WEAPON,19995,"重手枪子弹", 56, "只适用于沙漠之鹰手枪的子弹弹药\n使用后会装填7颗重手枪子弹",4, 0},
	{IU_WEAPON,2038,"步枪子弹", 180, "只适用于步枪的子弹弹药\n使用后会装填30颗步枪子弹",4, 0},
	//311
	{IU_WEAPON,2038,"来福枪子弹", 80, "只适用于来福枪的子弹弹药\n使用后会装填10颗重来福枪子弹",4, 0},
	{IU_WEAPON,345,"火箭弹", 5000, "只适用于火箭筒的弹药\n使用后会装填5颗火箭弹",4, 0},
	{IU_FOOD,19575,"苹果", 0, "健康的红色苹果\n食用后恢复:\n9点生命值\n12点饥饿",3, 0},
	{IU_FOOD,19576,"青苹果", 0, "健康的绿色苹果\n食用后恢复:\n6点生命值\n14点饥饿",3, 0},
	{IU_FOOD,19574,"橘子", 0, "健康的橘子\n食用后恢复:\n8点生命值\n10点饥饿",3, 0},
	//316
	{IU_FOOD,19577,"番茄", 0, "饱满的红色大番茄\n食用后恢复:\n10点生命值\n10点体力",3, 0},
	{IU_FOOD,19578,"香蕉", 0, "好吃的黄色香蕉\n食用后恢复:\n15点生命值\n6点体力",3, 0},
	{IU_USE,367,"相机", 500, "可以记录生活点点滴滴的相机\n拍摄后的相片可以在我的文件 > GTA San Andreas User Files > Gallery资料夹里面找到\n使用后:\n装备相机",4, 0},
	{IU_USE,19918,"埋藏的宝藏", 0, "埋藏在土里的宝藏箱\n不知道里面装着什么",8, 0},
	{IU_USE,19570,"巴拉刈", 500, "剧毒除草剂,能有效根绝各类植物的生长\n使用:\n在植物旁使用\n将使植物进入中毒的状态使其生长倒退\n当植物的成熟度倒退至0以下将会死亡",4, 0},
	//321
	{IU_USE,19570,"百草兴", 500, "植物解毒剂,可以解除植物所中的毒\n使用:\n在植物旁使用\n将解除植物受到的毒素效果",4, 0},
	{IU_SEED,0,"林檎树种子", 50, "林檎树,为果树,成熟的林檎树每30分钟会掉落随机种类的水果\n不建议将其收成\n\t成长时间: 5 天\n\t至少每24小时需浇水一次\n\t成熟一株价值$5000\n使用将在这里种植",1, 0},
	{IU_POT,656,"林檎树", 5000, "成熟的林檎树\n一株价值$5000",25, 124},
	{IU_MAT,0,"黏土", 0, "用来合成砖块的必要材料\n来源:\n挖掘",1, 0},
	{IU_OBJECT,1671,"办公椅", 600, "\n舒适的办公椅,可以用做物件布置或是按Y可以坐在上面\n耐久度:150",5, 125},
	//326
	{IU_OBJECT,1714,"高级办公椅", 1500, "\n舒适的办公椅,可以用做物件布置或是按Y可以坐在上面\n耐久度:150",5, 126},
	{IU_OBJECT,19922,"黑木长桌", 4000, "\n长方形木桌,可以用做物件布置\n耐久度:400",15, 127},
	{IU_OBJECT,11690,"麻将桌", 1200, "\n方形木桌,可以用做物件布置\n耐久度:200",10, 128},
	{IU_OBJECT,1516,"方形木桌", 1200, "\n方形木桌,可以用做物件布置\n耐久度:200",10, 129},
	{IU_OBJECT,2180,"长木柜", 1200, "\n长方形木柜,可以用做物件布置\n耐久度:200",15, 130},
	//331
	{IU_OBJECT,19894,"笔记型电脑(白)", 6000, "\n具有上网功能的笔记型电脑,放置后按Y可以使用其上网\n耐久度:100",6, 131},
	{IU_OBJECT,19894,"笔记型电脑(黑)", 6000, "\n具有上网功能的笔记型电脑,放置后按Y可以使用其上网\n耐久度:100",6, 132},
	{IU_OBJECT,19128,"七彩舞池", 10000, "\n色彩缤纷的方块舞池,可以用做物件布置\n耐久度:400",12, 133}
};

enum E_ITEMSLIST_EQ
{//定义enum
    ieqType,//道具分类
    ieqModel,
	ieqName[64],//道具名
	ieqPrice,//道具价格
	ieqDes[256],//道具介绍
	ieqMaxBroke,//最大损坏率
	ieqSpace,//占用空间
	ieqAltID
};

static const ItemsList_EQ[][E_ITEMSLIST_EQ]=
{//以固定不变内部头 static const 阵列来定义 加快读取
    {0,0,"", 0, "",0,0},
    //1
	{IEQ_TOOL,0,"白色胖次", 100, "白色的胖次",0,0,0},
	{IEQ_TOOL,18632,"钓竿", 500, "钓鱼用,每次使用消耗一个鱼饵\n\t每使用一次增加坏掉机率,最小0%最大10%",10,8,0},
	{IEQ_OTHER,1851,"骰子", 20, "六面正方体\n\t使用后在步行状态按Y可以掷骰子\n\t再使用一次则会收起来",0,1,0},
	{IEQ_3C,18867,"传统手机", 1000, "基本的手机,可用于通话及传短信\n按数字键6可以快捷使用",0,2,0},
	{IEQ_SKINX,1275,"YoRHa - 2B", 0, "使用后你的角色会变成:\n来自游戏Nier:Automata的角色2B",0,0,25007},
 	//6
	{IEQ_SKINX,1275,"YoRHa - 9S", 0, "使用后你的角色会变成:\n来自游戏Nier:Automata的角色9S",0,0,25008},
	{IEQ_SKINX,1275,"总统特务 - 里昂 S 甘乃迪", 0, "使用后你的角色会变成:\n来自游戏Biohazard的角色里昂",0,0,25002},
	{IEQ_SKINX,1275,"BSAA - 克里斯 雷德菲尔", 0, "使用后你的角色会变成:\n来自游戏Biohazard的角色克里斯",0,0,25003},
	{IEQ_SKINX,1275,"超人类 - 亚伯 威斯卡", 0, "使用后你的角色会变成:\n来自游戏Biohazard的角色威斯卡",0,0,25001},
	{IEQ_SKINX,1275,"红衣佣兵 - 艾达 王", 0, "使用后你的角色会变成:\n来自游戏Biohazard的角色艾达",0,0,25004},
	//11
	{IEQ_SKINX,1275,"魁儡 - 吉儿 范伦廷", 0, "使用后你的角色会变成:\n来自游戏Biohazard的角色吉儿",0,0,25009},
	{IEQ_SKINX,1275,"私法制裁者 - 艾登 皮尔斯", 0, "使用后你的角色会变成:\n来自游戏Watch Dog的角色艾登",0,0,25015},
	{IEQ_SKINX,1275,"DedSec - 马可仕 哈洛威", 0, "使用后你的角色会变成:\n来自游戏Watch Dog的角色马可仕",0,0,25014},
	{IEQ_SKINX,1275,"DedSec - 板手", 0, "使用后你的角色会变成:\n来自游戏Watch Dog的角色板手",0,0,25011},
	{IEQ_SKINX,1275,"DedSec - 席塔拉 道文", 0, "使用后你的角色会变成:\n来自游戏Watch Dog的角色席塔拉",0,0,25012},
	//16
	{IEQ_SKINX,1275,"DedSec - 克拉拉 里尔", 0, "使用后你的角色会变成:\n来自游戏Watch Dog的角色克拉拉",0,0,25016},
	{IEQ_SKINX,1275,"Joker", 0, "使用后你的角色会变成:\n来自DC系列电影黑暗骑士的Joker",0,0,25017},
	{IEQ_SKINX,1275,"Batman", 0, "使用后你的角色会变成:\n来自DC系列的Batman",0,0,25018},
	{IEQ_SKINX,1275,"Harley Quinn", 0, "使用后你的角色会变成:\n来自DC系列电影自杀突击队的Harley Quinn",0,0,25020},
	{IEQ_SKINX,1275,"Deadshot", 0, "使用后你的角色会变成:\n来自DC系列电影自杀突击队的Deadshot",0,0,25019},
	//21
	{IEQ_SKINX,1275,"Diablos", 0, "使用后你的角色会变成:\n来自DC系列电影自杀突击队的Diablos",0,0,25021},
	{IEQ_SKINX,1275,"Joker", 0, "使用后你的角色会变成:\n来自DC系列电影自杀突击队的Joker",0,0,25022},
	{IEQ_SKINX,1275,"Superman", 0, "使用后你的角色会变成:\n来自DC系列的Superman",0,0,25023},
	{IEQ_SKINX,1275,"Wonderwoman", 0, "使用后你的角色会变成:\n来自DC系列的Wonderwoman",0,0,25024},
	{IEQ_TOOL,19468,"水桶", 200, "可以用来装水\n装满的水桶最多可以浇10个植物\n\t每使用一次增加坏掉机率,最小0%最大1%",1,4,0},
	//26
	{IEQ_TOOL,2228,"泥铲", 400, "可以用来把成熟的植物挖起来收入背包\n被收起来的植物无法再被种植,但可以卖给花市\n\t每使用一次增加坏掉机率,最小0%最大2%",1,3,0},
	{IEQ_TOOL,19468,"浇水桶", 500, "可以用来装水,并更有效率的浇水给植物\n装满的浇水桶最多可以浇20个植物\n\t每使用一次增加坏掉机率,最小0%最大1%",1,6,0},
	{IEQ_TOOL,19167,"圣安地列斯州地标索引图", 500, "记载州内各常用地标的地图\n\t使用后选择要查询的地标,之后位置就会以橘点标记在地图上",0,3,0},
	{IEQ_SKIN,1275,"垃圾清洁员", 0, "使用后你的角色会变成:\n垃圾清洁员造型",0,0,16},
	{IEQ_SKIN,1275,"汉堡女店员", 0, "使用后你的角色会变成:\nBurger Shot店员造型",0,0,205},
	//31
	{IEQ_SKIN,1275,"披萨男店员", 0, "使用后你的角色会变成:\nThe WellStacked Pizzo Co.店员造型",0,0,155},
	{IEQ_TOOL,0,"蓝白胖次", 1000, "蓝白条纹相间的胖次",0,0,0},
	{IEQ_3C,19513,"GPS定位装置", 3500, "GPS卫星定位装置\n使用后可以搜寻要查询的地标,之后位置就会以紫色点标记在地图上\n -可查询任何地点的店家与地标\n -显示距离目的地的剩余地点\n -可查询自订坐标",0,3,0},
	{IEQ_3C,-1005,"笔记型电脑", 20000, "可用来浏览网站\n或远端管理公司或社团信息\n有侵入专业的玩家则可用来作为骇入用具",0,6,0},
	{IEQ_3C,-1009,"智慧型手机", 15000, "除了通话及传短信\n也可用来浏览网站(需支付行动费用)\n转帐(需支付手续费)\n播放音乐或收听广播\n加入特定聊天频道",0,2,0},
	//36
	{IEQ_TOOL,18632,"手工钓竿", 0, "钓鱼用,每次使用消耗一个鱼饵\n\t每使用一次增加坏掉机率,最小0%最大50%\n合成公式: (A)木头x2 + (B)纤维x2",50,8,0},
	{IEQ_TOOL,0,"黑色胖次", 10000, "黑色的胖次",0,0,0},
	{IEQ_SKINX,1275,"DMC - Dante", 0, "使用后你的角色会变成:\n来自恶魔猎人的Dante",0,0,25005},
	{IEQ_SKINX,1275,"DMC - Vergil", 0, "使用后你的角色会变成:\n来自恶魔猎人的Vergil",0,0,25010},
	{IEQ_SKINX,1275,"DMC - Nero(4)", 0, "使用后你的角色会变成:\n来自恶魔猎人的Nero",0,0,25006},
	//41
	{IEQ_SKIN,1275,"DMC - Trish", 0, "使用后你的角色会变成:\n来自恶魔猎人的Trish",0,0,25034},
	{IEQ_TOOL,0,"十字镐", 1500, "可用于采集矿产\n使用后将会开始在原地挖采\n\t每使用一次增加坏掉机率,最小0%最大2%",2,8,0},
	{IEQ_TOOL,0,"手工十字镐", 0, "可用于采集矿产\n使用后将会开始在原地挖采\n\t每使用一次增加坏掉机率,最小0%最大18%\n合成公式: (A)木头x5 + (B)铁x5",18,8,0},
	{IEQ_TOOL,19631,"手工石锤", 0, "可用于采集矿产\n使用后将会开始在原地挖采\n\t每使用一次增加坏掉机率,最小0%最大30%\n合成公式: (A)木头x5 + (B)石材x5",30,8,0},
	{IEQ_TOOL,0,"斧头", 500, "可用于伐木\n\t每使用一次增加坏掉机率,最小0%最大2%",2,8,0},
	//46
	{IEQ_TOOL,0,"手工斧头", 0, "可用于伐木\n\t每使用一次增加坏掉机率,最小0%最大30%\n合成公式: (A)木头x5 + (B)铁x4",30,8,0},
	{IEQ_SKINX,1275,"金钢狼 - 罗根", 0, "使用后你的角色会变成:\n来自Marvel系列的罗根",0,0,25035},
	{IEQ_SKINX,1275,"恶棍英雄 - 死侍", 0, "使用后你的角色会变成:\n来自Marvel系列的死侍",0,0,25036},
	{IEQ_SKINX,1275,"复仇者 - 美国队长", 0, "使用后你的角色会变成:\n来自Marvel系列的美国队长",0,0,25037},
	{IEQ_SKINX,1275,"铁骑士 - 钢铁人", 0, "使用后你的角色会变成:\n来自Marvel系列的钢铁人",0,0,25038},
	//51
	{IEQ_TOOL,19921,"工具箱", 2000, "装着各式各样工具的工具箱\n可用于修车、开锁与维护机具等等用途",0,10,0},
	{IEQ_SKINX,1275,"前YorHa - A2", 0, "使用后你的角色会变成:\n来自游戏Nier:Automata的角色A2",0,0,25040},
	{IEQ_SKIN,1275,"传奇生物 - 大脚", 0, "使用后你的角色会变成:\n传说中的生物大脚怪",0,0,25056},
	{IEQ_SKIN,1275,"蓝夹克卡其裤黑人男性", 500, "使用后将会更改你目前的造型",0,0,7},
	{IEQ_SKIN,1275,"水电工", 500, "使用后将会更改你目前的造型",0,0,8},
	//56
	{IEQ_SKIN,1275,"红格外套婆婆", 500, "使用后将会更改你目前的造型",0,0,10},
	{IEQ_SKIN,1275,"31号黑色球衣黑人女性", 500, "使用后将会更改你目前的造型",0,0,13},
	{IEQ_SKIN,1275,"夏威夷衫黑人男性", 500, "使用后将会更改你目前的造型",0,0,14},
	{IEQ_SKIN,1275,"格子衬衫牛仔裤中年男性", 500, "使用后将会更改你目前的造型",0,0,15},
	{IEQ_SKIN,1275,"深蓝夹克鸭舌帽黑人男性", 500, "使用后将会更改你目前的造型",0,0,24},
	//61
	{IEQ_SKIN,1275,"登山客", 500, "使用后将会更改你目前的造型",0,0,26},
	{IEQ_SKIN,1275,"园丁", 500, "使用后将会更改你目前的造型",0,0,35},
	{IEQ_SKIN,1275,"黑衣黑裤婆婆", 500, "使用后将会更改你目前的造型",0,0,39},
	{IEQ_SKIN,1275,"浅蓝外套长裤女性", 500, "使用后将会更改你目前的造型",0,0,41},
	{IEQ_SKIN,1275,"蓝白条纹Polo衫男性", 500, "使用后将会更改你目前的造型",0,0,48},
	//66
	{IEQ_SKIN,1275,"汽修工", 500, "使用后将会更改你目前的造型",0,0,50},
	{IEQ_SKIN,1275,"黄衣黑短裙筒袜女性", 500, "使用后将会更改你目前的造型",0,0,56},
	{IEQ_SKIN,1275,"红格衬衫男性", 500, "使用后将会更改你目前的造型",0,0,58},
	{IEQ_SKIN,1275,"棕色上衣牛仔裤男性", 500, "使用后将会更改你目前的造型",0,0,60},
	{IEQ_SKIN,1275,"蓝白夹克黑人男性", 500, "使用后将会更改你目前的造型",0,0,66},
	//71
	{IEQ_SKIN,1275,"红头巾白衣黑人男性", 500, "使用后将会更改你目前的造型",0,0,67},
	{IEQ_SKIN,1275,"神父", 500, "使用后将会更改你目前的造型",0,0,68},
	{IEQ_SKIN,1275,"浅蓝衣装黑人女性", 500, "使用后将会更改你目前的造型",0,0,69},
	{IEQ_SKIN,1275,"高发线白发老年男性", 500, "使用后将会更改你目前的造型",0,0,95},
	{IEQ_SKIN,1275,"眼镜土绿衣蓝裙女性", 500, "使用后将会更改你目前的造型",0,0,151},
	//76
	{IEQ_SKIN,1275,"红衣灰裤男性", 500, "使用后将会更改你目前的造型",0,0,170},
	{IEQ_SKIN,1275,"庞克族", 500, "使用后将会更改你目前的造型",0,0,181},
	{IEQ_SKIN,1275,"黑白条纹男性", 500, "使用后将会更改你目前的造型",0,0,184},
	{IEQ_SKIN,1275,"绿衣男性", 500, "使用后将会更改你目前的造型",0,0,188},
	{IEQ_SKIN,1275,"白衣黑人男性", 500, "使用后将会更改你目前的造型",0,0,221},
	//81
	{IEQ_SKIN,1275,"中国风中年女性", 500, "使用后将会更改你目前的造型",0,0,224},
	{IEQ_SKIN,1275,"白色上衣短裙统袜女性", 500, "使用后将会更改你目前的造型",0,0,226},
	{IEQ_SKIN,1275,"爆炸头黑衣男性", 500, "使用后将会更改你目前的造型",0,0,241},
	{IEQ_SKIN,1275,"黑帽白汗衫男性", 500, "使用后将会更改你目前的造型",0,0,242},
	{IEQ_SKIN,1275,"黑头巾黑皮背心男性", 500, "使用后将会更改你目前的造型",0,0,247},
	//86
	{IEQ_SKIN,1275,"红头巾黑皮外套男性", 500, "使用后将会更改你目前的造型",0,0,248},
	{IEQ_SKIN,1275,"皮条客", 500, "使用后将会更改你目前的造型",0,0,249},
	{IEQ_SKIN,1275,"绿衣灰裤男性", 500, "使用后将会更改你目前的造型",0,0,250},
	{IEQ_SKIN,1275,"灰白格子衬衫中年男性", 500, "使用后将会更改你目前的造型",0,0,258},
	{IEQ_SKIN,1275,"蓝格子衬衫中年男性", 500, "使用后将会更改你目前的造型",0,0,259},
	//91
	{IEQ_SKIN,1275,"包头中国风女性", 500, "使用后将会更改你目前的造型",0,0,263},
	{IEQ_SKIN,1275,"海滩裤黑人男性", 350, "使用后将会更改你目前的造型",0,0,18},
	{IEQ_SKIN,1275,"白衣黑短裤男性", 350, "使用后将会更改你目前的造型",0,0,36},
	{IEQ_SKIN,1275,"白衣卡其短裤男性", 350, "使用后将会更改你目前的造型",0,0,37},
	{IEQ_SKIN,1275,"绿色海滩裤男性", 350, "使用后将会更改你目前的造型",0,0,45},
	//96
	{IEQ_SKIN,1275,"黄色单车装", 350, "使用后将会更改你目前的造型",0,0,51},
	{IEQ_SKIN,1275,"红白单车装", 350, "使用后将会更改你目前的造型",0,0,52},
	{IEQ_SKIN,1275,"红裤子黑人拳击手", 350, "使用后将会更改你目前的造型",0,0,80},
	{IEQ_SKIN,1275,"蓝裤子白人拳击手", 350, "使用后将会更改你目前的造型",0,0,81},
	{IEQ_SKIN,1275,"轻便慢跑服女性", 350, "使用后将会更改你目前的造型",0,0,90},
	//101
	{IEQ_SKIN,1275,"轻便慢跑服男性", 350, "使用后将会更改你目前的造型",0,0,96},
	{IEQ_SKIN,1275,"海滩救生员", 350, "使用后将会更改你目前的造型",0,0,97},
	{IEQ_SKIN,1275,"墨镜白色比基尼女性", 350, "使用后将会更改你目前的造型",0,0,138},
	{IEQ_SKIN,1275,"白色比基尼黑人女性", 350, "使用后将会更改你目前的造型",0,0,139},
	{IEQ_SKIN,1275,"红色比基尼女性", 350, "使用后将会更改你目前的造型",0,0,140},
	//106
	{IEQ_SKIN,1275,"蓝色泳裤男性", 350, "使用后将会更改你目前的造型",0,0,154},
	{IEQ_SKIN,1275,"空手道红带", 350, "使用后将会更改你目前的造型",0,0,203},
	{IEQ_SKIN,1275,"空手道红带", 350, "使用后将会更改你目前的造型",0,0,204},
	{IEQ_SKIN,1275,"红泳装女救生员", 350, "使用后将会更改你目前的造型",0,0,251},
	{IEQ_SKIN,1275,"紫外套裤子俄国人", 800, "使用后将会更改你目前的造型",0,0,3},
	//111
	{IEQ_SKIN,1275,"黑连身衣裙女性", 800, "使用后将会更改你目前的造型",0,0,12},
	{IEQ_SKIN,1275,"黄黑衬衫黑人男性", 800, "使用后将会更改你目前的造型",0,0,20},
	{IEQ_SKIN,1275,"黑白夹克黑人男性", 800, "使用后将会更改你目前的造型",0,0,25},
	{IEQ_SKIN,1275,"红连身衣裙女性", 800, "使用后将会更改你目前的造型",0,0,40},
	{IEQ_SKIN,1275,"白衬衫蓝裤子男性", 800, "使用后将会更改你目前的造型",0,0,46},
	//116
	{IEQ_SKIN,1275,"墨镜黑连身衣裙女性", 800, "使用后将会更改你目前的造型",0,0,55},
	{IEQ_SKIN,1275,"直条纹西装裤男性", 800, "使用后将会更改你目前的造型",0,0,59},
	{IEQ_SKIN,1275,"白色连身衣裙女性", 800, "使用后将会更改你目前的造型",0,0,91},
	{IEQ_SKIN,1275,"黑长袖衣黑裤女性", 800, "使用后将会更改你目前的造型",0,0,93},
	{IEQ_SKIN,1275,"白色衬衫黑背心男性", 800, "使用后将会更改你目前的造型",0,0,98},
	//121
	{IEQ_SKIN,1275,"金色长发深绿夹克男性", 800, "使用后将会更改你目前的造型",0,0,101},
	{IEQ_SKIN,1275,"黑旗袍女性", 800, "使用后将会更改你目前的造型",0,0,169},
	{IEQ_SKIN,1275,"紫色条纹衬衫男性", 800, "使用后将会更改你目前的造型",0,0,185},
	{IEQ_SKIN,1275,"黄帽黄衣黑人女性", 800, "使用后将会更改你目前的造型",0,0,215},
	{IEQ_SKIN,1275,"白色连身衣裙女性", 800, "使用后将会更改你目前的造型",0,0,216},
	//126
	{IEQ_SKIN,1275,"紫衣灰裤男性", 800, "使用后将会更改你目前的造型",0,0,223},
	{IEQ_SKIN,1275,"白衣窄管裤女性", 800, "使用后将会更改你目前的造型",0,0,233},
	{IEQ_SKIN,1275,"红帽红裤子黑人男性", 0, "使用后将会更改你目前的造型",0,0,19},
	{IEQ_SKIN,1275,"紫色格子衫黑人男性", 0, "使用后将会更改你目前的造型",0,0,21},
	{IEQ_SKIN,1275,"12号橘黑外套黑人男性", 750, "使用后将会更改你目前的造型",0,0,22},
	//131
	{IEQ_SKIN,1275,"灰T恤七分裤男性", 750, "使用后将会更改你目前的造型",0,0,23},
	{IEQ_SKIN,1275,"金链黑汗衫黑人男性", 750, "使用后将会更改你目前的造型",0,0,28},
	{IEQ_SKIN,1275,"白连帽外套男性", 750, "使用后将会更改你目前的造型",0,0,29},
	{IEQ_SKIN,1275,"灰汗衫拉丁男性", 750, "使用后将会更改你目前的造型",0,0,30},
	{IEQ_SKIN,1275,"绿格子衬衫男性", 750, "使用后将会更改你目前的造型",0,0,47},
	//136
	{IEQ_SKIN,1275,"墨镜皮衣靴子男性", 750, "使用后将会更改你目前的造型",0,0,100},
	{IEQ_SKIN,1275,"白衣紫裤巴拉斯", 750, "使用后将会更改你目前的造型",0,0,102},
	{IEQ_SKIN,1275,"头巾黑夹克巴拉斯", 750, "使用后将会更改你目前的造型",0,0,103},
	{IEQ_SKIN,1275,"墨镜紫外套巴拉斯", 750, "使用后将会更改你目前的造型",0,0,104},
	{IEQ_SKIN,1275,"绿头巾绿衣葛洛夫", 750, "使用后将会更改你目前的造型",0,0,105},
	//141
	{IEQ_SKIN,1275,"玉米须头绿格子衬衫葛洛夫", 750, "使用后将会更改你目前的造型",0,0,106},
	{IEQ_SKIN,1275,"绿球衣鸭舌帽葛洛夫", 750, "使用后将会更改你目前的造型",0,0,107},
	{IEQ_SKIN,1275,"黄头巾赤身维多帮", 750, "使用后将会更改你目前的造型",0,0,108},
	{IEQ_SKIN,1275,"黄头巾白背心维多帮", 750, "使用后将会更改你目前的造型",0,0,109},
	{IEQ_SKIN,1275,"黄头巾白背心维多帮", 750, "使用后将会更改你目前的造型",0,0,110},
	//146
	{IEQ_SKIN,1275,"黑衣俄罗斯黑手党", 750, "使用后将会更改你目前的造型",0,0,111},
	{IEQ_SKIN,1275,"黑夹克毛衣俄罗斯黑手党", 750, "使用后将会更改你目前的造型",0,0,112},
	{IEQ_SKIN,1275,"西装俄罗斯黑手党", 750, "使用后将会更改你目前的造型",0,0,113},
	{IEQ_SKIN,1275,"条纹Polo衫阿兹提克帮", 750, "使用后将会更改你目前的造型",0,0,114},
	{IEQ_SKIN,1275,"黑鸭舌帽黑外套阿兹提克帮", 750, "使用后将会更改你目前的造型",0,0,115},
	//151
	{IEQ_SKIN,1275,"白T恤阿兹提克帮", 750, "使用后将会更改你目前的造型",0,0,116},
	{IEQ_SKIN,1275,"黑衣三合会", 750, "使用后将会更改你目前的造型",0,0,117},
	{IEQ_SKIN,1275,"黑衣三合会", 750, "使用后将会更改你目前的造型",0,0,118},
	{IEQ_SKIN,1275,"黑衣三合会", 750, "使用后将会更改你目前的造型",0,0,120},
	{IEQ_SKIN,1275,"黑衣黑手党", 750, "使用后将会更改你目前的造型",0,0,124},
	//156
	{IEQ_SKIN,1275,"黑夹克黑手党", 750, "使用后将会更改你目前的造型",0,0,125},
	{IEQ_SKIN,1275,"黑外套黑手党", 750, "使用后将会更改你目前的造型",0,0,126},
	{IEQ_SKIN,1275,"棕色夹克黑手党", 750, "使用后将会更改你目前的造型",0,0,127},
	{IEQ_SKIN,1275,"白牛仔帽白衣女性", 400, "使用后将会更改你目前的造型",0,0,31},
	{IEQ_SKIN,1275,"独眼蓝衬衫中年男性", 400, "使用后将会更改你目前的造型",0,0,32},
	//161
	{IEQ_SKIN,1275,"黑大衣男性", 400, "使用后将会更改你目前的造型",0,0,33},
	{IEQ_SKIN,1275,"墨镜牛仔帽蓝格子衬衫男性", 400, "使用后将会更改你目前的造型",0,0,34},
	{IEQ_SKIN,1275,"蓝格子衬衫嬉皮", 400, "使用后将会更改你目前的造型",0,0,72},
	{IEQ_SKIN,1275,"棕色T恤嬉皮", 400, "使用后将会更改你目前的造型",0,0,73},
	{IEQ_SKIN,1275,"长发T恤牛仔裤农夫", 400, "使用后将会更改你目前的造型",0,0,128},
	//166
	{IEQ_SKIN,1275,"白发棕色衣裤农妇", 400, "使用后将会更改你目前的造型",0,0,129},
	{IEQ_SKIN,1275,"黑衣大红裙农妇", 400, "使用后将会更改你目前的造型",0,0,130},
	{IEQ_SKIN,1275,"棕色衣服牛仔裤女性", 400, "使用后将会更改你目前的造型",0,0,131},
	{IEQ_SKIN,1275,"红帽棕衣男性", 400, "使用后将会更改你目前的造型",0,0,133},
	{IEQ_SKIN,1275,"绿衣蓝色吊带裤女性", 400, "使用后将会更改你目前的造型",0,0,157},
	//171
	{IEQ_SKIN,1275,"草帽吊带裤男性", 400, "使用后将会更改你目前的造型",0,0,158},
	{IEQ_SKIN,1275,"红帽灰色吊带裤男性", 400, "使用后将会更改你目前的造型",0,0,159},
	{IEQ_SKIN,1275,"红衬衫秃头中年男性", 400, "使用后将会更改你目前的造型",0,0,160},
	{IEQ_SKIN,1275,"牛仔帽红格子衬衫男性", 400, "使用后将会更改你目前的造型",0,0,161},
	{IEQ_SKIN,1275,"光头赤身男性", 400, "使用后将会更改你目前的造型",0,0,162},
	//176
	{IEQ_SKIN,1275,"牛仔帽紫衣女性", 400, "使用后将会更改你目前的造型",0,0,198},
	{IEQ_SKIN,1275,"大胡子吊带裤男性", 400, "使用后将会更改你目前的造型",0,0,200},
	{IEQ_SKIN,1275,"绑红格子小可爱女性", 400, "使用后将会更改你目前的造型",0,0,201},
	{IEQ_SKIN,1275,"灰帽灰衣男性", 400, "使用后将会更改你目前的造型",0,0,202},
	{IEQ_SKIN,1275,"紫外套裤子婆婆", 1000, "使用后将会更改你目前的造型",0,0,9},
	//181
	{IEQ_SKIN,1275,"黑人女性服务生", 1000, "使用后将会更改你目前的造型",0,0,11},
	{IEQ_SKIN,1275,"黑商业西装黑人男性", 1000, "使用后将会更改你目前的造型",0,0,17},
	{IEQ_SKIN,1275,"老年棕色西装男性", 1000, "使用后将会更改你目前的造型",0,0,57},
	{IEQ_SKIN,1275,"紫色西装白领黑人女性", 1000, "使用后将会更改你目前的造型",0,0,76},
	{IEQ_SKIN,1275,"眼镜黑色办公装女性", 1000, "使用后将会更改你目前的造型",0,0,141},
	//186
    {IEQ_SKIN,1275,"棕色西装男性", 1000, "使用后将会更改你目前的造型",0,0,147},
    {IEQ_SKIN,1275,"蓝绿色办公装女性", 1000, "使用后将会更改你目前的造型",0,0,148},
    {IEQ_SKIN,1275,"蓝色条纹办公装女性", 1000, "使用后将会更改你目前的造型",0,0,150},
    {IEQ_SKIN,1275,"男性服务生", 1000, "使用后将会更改你目前的造型",0,0,171},
    {IEQ_SKIN,1275,"金发女性服务生", 1000, "使用后将会更改你目前的造型",0,0,172},
    //191
    {IEQ_SKIN,1275,"棕色西装男性", 1000, "使用后将会更改你目前的造型",0,0,186},
    {IEQ_SKIN,1275,"深色条纹红领带男性", 1000, "使用后将会更改你目前的造型",0,0,187},
    {IEQ_SKIN,1275,"红背心白衬衫男性", 1000, "使用后将会更改你目前的造型",0,0,189},
    {IEQ_SKIN,1275,"红色办公装女性", 1000, "使用后将会更改你目前的造型",0,0,219},
    {IEQ_SKIN,1275,"黑背心白衬衫男性", 1000, "使用后将会更改你目前的造型",0,0,240},
    //196
    {IEQ_SKIN,1275,"黑西装黑人男性", 2500, "使用后将会更改你目前的造型",0,0,163},
    {IEQ_SKIN,1275,"黑西装白人男性", 2500, "使用后将会更改你目前的造型",0,0,164},
    {IEQ_SKIN,1275,"墨镜黑西装白人男性", 2500, "使用后将会更改你目前的造型",0,0,165},
    {IEQ_SKIN,1275,"墨镜黑西装黑人男性", 2500, "使用后将会更改你目前的造型",0,0,166},
    {IEQ_SKIN,1275,"秃头黑西装男性", 2500, "使用后将会更改你目前的造型",0,0,227},
    //201
    {IEQ_SKIN,1275,"白发黑西装男性", 2500, "使用后将会更改你目前的造型",0,0,228},
    {IEQ_SKIN,1275,"计程车司机", 0, "使用后你的角色会变成:\n计程车司机",0,0,255},
    {IEQ_BOOK,0,"材料之书", 550, "这本书收录了大部分常用材料的来源以及相关用途",0,0,0},
    {IEQ_BOOK,0,"合成之书", 550, "在这本书里可以学到在大自然中采集到的材料能组合出哪些方便的生活用具",0,0,0},
    {IEQ_SKIN,1275,"厨师", 0, "使用后你的角色会变成:\n厨师",0,0,168},
    //206
    {IEQ_SKIN,1275,"胖小丑", 0, "使用后你的角色会变成:\n胖小丑",0,0,264},
    {IEQ_ATTACH,19421,"白色耳机", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19422,"黑色耳机", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19423,"红色耳机", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19424,"蓝色耳机", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //211
    {IEQ_ATTACH,2052,"绿色圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,2053,"绿色钢盔", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18638,"黄色工地帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18639,"黑色礼帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18926,"迷彩鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //216
    {IEQ_ATTACH,2052,"绿色圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,2053,"绿色钢盔", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18638,"黄色工地帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18639,"黑色礼帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18926,"迷彩鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //221
    {IEQ_ATTACH,18927,"蓝纹鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18928,"花样鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18629,"黑白纹鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18930,"火纹鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18931,"波纹鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //226
    {IEQ_ATTACH,18932,"橘黄鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18933,"白黑纹鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18634,"粉红鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18935,"黄色鸭舌帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19553,"草帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //231
    {IEQ_ATTACH,18946,"白竹帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18947,"黑圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18648,"蓝圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18949,"绿圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18950,"红圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //236
    {IEQ_ATTACH,18951,"黄圆顶帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18962,"灰牛仔帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18970,"虎纹帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18971,"黑白细纹帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19064,"圣诞帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //241
    {IEQ_ATTACH,19067,"红黑毛帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19068,"黑灰毛帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19094,"汉堡帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19095,"卡其牛仔帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19096,"黑牛仔帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //246
    {IEQ_ATTACH,19137,"鸡头帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19352,"黑绅士帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19487,"白绅士帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19528,"巫师帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19558,"披萨帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //251
    {IEQ_ATTACH,19015,"黑框眼镜", 250, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19022,"圆框眼镜", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19033,"黑墨镜", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19039,"金表", 1250, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19040,"银表", 750, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //256
    {IEQ_ATTACH,19043,"紫表", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19044,"粉红表", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19045,"绿表", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19046,"蓝表", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18896,"黑头巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //261
    {IEQ_ATTACH,18897,"蓝头巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18898,"绿头巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18899,"紫头巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19078,"鹦鹉", 2500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19085,"单眼罩", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //266
    {IEQ_ATTACH,18912,"黑面巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18913,"绿面巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18914,"迷彩面巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18919,"白面巾", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19036,"白曲棍球面具", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //271
    {IEQ_ATTACH,19037,"红曲棍球面具", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19038,"绿曲棍球面具", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18645,"红焰全罩安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18936,"灰色安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18976,"蓝白赛用安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    //276
    {IEQ_ATTACH,18977,"红全罩安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18978,"白全罩安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,18979,"紫全罩安全帽", 500, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_ATTACH,19200,"警用安全帽", 2000, "使用后可以将这个配件挂在你的玩家角色上",0,0,0},
    {IEQ_TOOL,2483,"遥控直升机", 30000, "使用后可以让你驾驶摇控直升机\n驾驶期间打开载具面板可以离开遥控\n驾驶遥控玩具期间你的玩家角色依旧会被攻击",0,25,0},
    //281
    {IEQ_TOOL,2483,"遥控玩具车", 15000, "使用后可以让你驾驶遥控玩具车\n驾驶期间打开载具面板可以离开遥控\n驾驶遥控玩具期间你的玩家角色依旧会被攻击",0,20,0},
    {IEQ_TOOL,2483,"遥控飞机", 85000, "使用后可以让你驾驶遥控飞机\n驾驶期间打开载具面板可以离开遥控\n驾驶遥控玩具期间你的玩家角色依旧会被攻击",0,30,0},
    {IEQ_TOOL,2483,"遥控坦克车", 50000, "使用后可以让你驾驶遥控坦克车\n驾驶期间打开载具面板可以离开遥控\n驾驶遥控玩具期间你的玩家角色依旧会被攻击",0,30,0},
    {IEQ_TOOL,2483,"空拍机", 50000, "使用后可以让你驾驶空拍机\n驾驶期间打开载具面板可以离开遥控\n驾驶遥控玩具期间你的玩家角色依旧会被攻击\n空拍机可以与你的媒体业连线\n打开载具面板后可以将空拍机的视野传送至媒体业的视讯频道",0,25,0},
    {IEQ_TOOL,2483,"摄影机", 25000, "摄影机可以与你的媒体业连线\n使用后可以将空拍机的视野传送至媒体业的视讯频道\n在使用期间按Y键可以进行设定或是收回摄影机",0,25,0},
    //286
    {IEQ_LICENSE,1581,"枪械执照", 0, "拥有此证便可合法于武装国度购买枪枝\n拥有者使用枪枝只得用于自我防卫用途\n警方有权扣押任何通过此证进行的不法、滥用、营利等行为的玩家的执照\n若需此证必须至各地警局申请\n第一次申请不须经过审核",0,0,0},
    {IEQ_TOOL,0,"折叠单车", 5000, "使用后呼叫出折叠单车\n使用后在单车上按2可以将其收回至背包",0,25,0},
    {IEQ_SKIN,1275,"Terry Thorpe", 0, "使用后你的角色会变成:\n失落摩托车帮的Terry造型",0,0,25064},
    {IEQ_SKIN,1275,"Clay Simons", 0, "使用后你的角色会变成:\n失落摩托车帮的Clay造型",0,0,25065},
    {IEQ_SKIN,1275,"Johnny Klebitz", 0, "使用后你的角色会变成:\n失落摩托车帮的Johnny造型",0,0,25066},
    //291
    {IEQ_SKIN,1275,"Sweet", 0, "使用后你的角色会变成:\n葛洛夫帮的Sweet造型",0,0,270},
    {IEQ_SKIN,1275,"Big Smoke", 0, "使用后你的角色会变成:\nBig Smoke造型",0,0,269},
    {IEQ_SKIN,1275,"Ryder", 0, "使用后你的角色会变成:\nRyder造型",0,0,271},
    {IEQ_SKIN,1275,"Simeon", 0, "使用后你的角色会变成:\nSimeon造型",0,0,25026},
    {IEQ_SKIN,1275,"Trevor", 0, "使用后你的角色会变成:\nTrevor造型",0,0,25025},
    //296
    {IEQ_SKIN,1275,"Cesar", 0, "使用后你的角色会变成:\n阿兹提克帮的Cesar造型",0,0,292},
    {IEQ_SKIN,1275,"Emmet", 0, "使用后你的角色会变成:\nEmmet造型",0,0,6},
    {IEQ_SKIN,1275,"Big Bear(胖)", 0, "使用后你的角色会变成:\nBig Bear造型",0,0,5},
    {IEQ_SKIN,1275,"Big Bear(瘦)", 0, "使用后你的角色会变成:\nBig Bear造型",0,0,4},
    {IEQ_SKIN,1275,"Toreno", 0, "使用后你的角色会变成:\nToreno造型",0,0,295},
    //301
    {IEQ_SKIN,1275,"T-Bone", 0, "使用后你的角色会变成:\nT-Bone造型",0,0,273},
    {IEQ_SKIN,1275,"Jizzy B", 0, "使用后你的角色会变成:\nJizzy造型",0,0,296},
    {IEQ_SKIN,1275,"Wu Zi Mu", 0, "使用后你的角色会变成:\nWoozie造型",0,0,294},
	{IEQ_SKINX,1275,"John Wick", 0, "使用后你的角色会变成:\nJohn Wick造型",0,0,25086},
	//306
	{IEQ_SKINX,1275,"初音未来", 0, "使用后你的角色会变成:\n来自Vocaloid的初音未来",0,0,25013},
	{IEQ_SKINX,1275,"绊爱", 0, "使用后你的角色会变成:\n来自VTuber的绊爱",0,0,25032},
	{IEQ_SKINX,1275,"蜘蛛人", 0, "使用后你的角色会变成:\n来自Marvel系列的蜘蛛人",0,0,25087},
	{IEQ_SKINX,1275,"蜘蛛人(毒液)", 0, "使用后你的角色会变成:\n来自Marvel系列的蜘蛛人",0,0,25088},
	{IEQ_SKINX,1275,"毒液", 0, "使用后你的角色会变成:\n来自Marvel系列的毒液",0,0,25089},
	//311
	{IEQ_SKINX,1275,"蚁人", 0, "使用后你的角色会变成:\n来自Marvel系列的蚁人",0,0,25090},
	{IEQ_SKINX,1275,"萨诺斯", 0, "使用后你的角色会变成:\n来自Marvel系列的萨诺斯",0,0,25091},
	{IEQ_SKINX,1275,"雷神索尔", 0, "使用后你的角色会变成:\n来自Marvel系列的雷神索尔",0,0,25092},
	{IEQ_SKINX,1275,"洛基", 0, "使用后你的角色会变成:\n来自Marvel系列的洛基",0,0,25093},
	{IEQ_SKINX,1275,"琦玉", 0, "使用后你的角色会变成:\n来自一拳超人的琦玉",0,0,25094},
	//316
	{IEQ_SKINX,1275,"地狱的吹雪", 0, "使用后你的角色会变成:\n来自一拳超人的吹雪",0,0,25100},
	{IEQ_SKINX,1275,"饿狼", 0, "使用后你的角色会变成:\n来自一拳超人的饿狼",0,0,25096},
	{IEQ_SKINX,1275,"垂柳", 0, "使用后你的角色会变成:\n来自一拳超人的垂柳",0,0,25097},
	{IEQ_SKINX,1275,"僵尸男", 0, "使用后你的角色会变成:\n来自一拳超人的僵尸男",0,0,25098},
	{IEQ_SKINX,1275,"音速的索尼克", 0, "使用后你的角色会变成:\n来自一拳超人的索尼克",0,0,25099},
	//321
	{IEQ_SKINX,1275,"战栗的龙卷", 0, "使用后你的角色会变成:\n来自一拳超人的龙卷",0,0,25101},
	{IEQ_SKINX,1275,"Tracer", 0, "使用后你的角色会变成:\n来自Overwatch的Tracer",0,0,25095}
};

enum E_FISHERY//渔获(暂存)
{
    fsCod,//鳕鱼
	fsSaury,//秋刀鱼
	fsHerring,//鲱鱼
	fsSardine,//沙丁鱼
	fsSwordFish,//旗鱼
	fsMackerel,//鲭鱼
	fsSquid,//鱿鱼
	fsTuna,//鲔鱼
	fsGoldenCarp,//金鳗鱼
	fsPiranha,//食人鱼
	fsPomfret,//大白鲳
	fsSnapper,//长尾鸟
	fsTuskfin//四齿鱼
};

static Fishery[MAX_PLAYERS+1][E_FISHERY];
static const EMPTY_FISHERY[E_FISHERY];

enum E_PWDATA//玩家武器资料
{
    ORM:ORM_ID,//ORM物件编号
    pwID,
    pwPlayerID,
    pwWeapon0,
    pwWeapon1,
    pwWeapon2,
    pwWeapon3,
    pwWeapon4,
    pwWeapon5,
    pwWeapon6,
    pwWeapon7,
    pwWeapon8,
    pwWeapon9,
    pwWeapon10,
    pwAmmo0,
    pwAmmo1,
    pwAmmo2,
    pwAmmo3,
    pwAmmo4,
    pwAmmo5,
    pwAmmo6,
    pwAmmo7,
    pwAmmo8,
    pwAmmo9,
    pwAmmo10,
    pw9mmCol,
    pwDEACol,
    pwShotgunCol,
    pwSawnCol,
    pwSpasCol,
    pwUZICol,
    pwTec9Col,
    pwMP5Col,
    pwAK47Col,
    pwM4Col,
    pwSniperCol,
    pwRifleCol
};

static WeaponData[MAX_PLAYERS+1][E_PWDATA];
static const EMPTY_WPDATA[E_PWDATA];

enum E_AMMOLIST
{
	amName[16],
	amAmount,//一个单位包含的弹药
	amPrice//弹药价格
}

static const AmmosList[][E_AMMOLIST] =
{
	//0
	{"无", 0, 0},
	{"9mm子弹", 17, 51},
	{"重手枪子弹", 7, 56},
	{"霰弹", 10, 50},
	{"冲锋枪子弹", 30, 120},
	//5
	{"步枪子弹", 30, 180},
	{"来福枪子弹", 10, 80},
	{"手榴弹", 1, 500},
	{"火箭弹", 1, 1000}
};

enum E_WPLIST
{
	wName[16],//武器名称
	wSlot,//武器栏位
	Float:wDamage,//武器基础伤害
	wSpace,//武器占用空间
	wPrice,//武器价格
	wModel,//武器模组ID
	wDefaultAmmo,//预设弹药
	wAmmo,//弹药种类 1:9mm 2:沙漠之鹰 3:霰弹枪 4:冲锋枪 5:步枪 6:来福枪 7:手榴弹 8:火箭弹
	Float:wRange
}

static const WeaponsList[][E_WPLIST] =
{
	//0
	{"拳头",0, 7.0, 0, 0, 0, 1, 0, 1.0},
	{"手指虎",0, 10.0, 1, 350, 331, 1, 0, 1.0},
	{"高尔夫球杆",1, 10.0, 8, 800, 333, 1, 0, 1.0},
	{"警棍",1, 14.0, 5, 1400, 334, 1, 0, 1.0},
	{"小刀",1, 13.5, 2, 700, 335, 1, 0, 1.0},
	//5
	{"球棒",1, 12.0, 8, 600, 336, 1, 0, 1.0},
	{"铲子",1, 14.0, 12, 650, 337, 1, 0, 1.0},
	{"撞球棍",1, 9.5, 10, 500, 338, 1, 0, 1.0},
	{"武士刀",1, 18.0, 10, 2000, 339, 1, 0, 1.0},
	{"电锯",1, 6.0, 15, 3500, 341, 1, 0, 1.0},
	//10
	{"紫色棒棒",10, 6.0, 5, 900, 321, 1, 0, 1.0},
	{"棒棒",10, 6.0, 3, 600, 320, 1, 0, 1.0},
	{"按摩棒",10, 6.0, 3, 800, 319, 1, 0, 1.0},
	{"银色按摩棒",10, 6.0, 3, 800, 318, 1, 0, 1.0},
	{"花",10, 3.0, 5, 0, 325, 1, 0, 1.0},
	//15
	{"拐杖",10, 5.5, 7, 0, 326, 1, 0, 1.0},
	{"手榴弹",8, 100.0, 1, 500, 342, 5, 7, 25.0},
	{"烟雾弹",8, 0.0, 1, 0, 343, 5, 0, 25.0},
	{"燃烧瓶",8, 1.0, 1, 0, 344, 5, 0, 25.0},
	{"_",0, 0.0, 0, 0, 0, 0, 0},
	//20
	{"_",0, 0.0, 0, 0, 0, 0, 0, 0.0},
	{"_",0, 0.0, 0, 0, 0, 0, 0, 0.0},
	{"9mm手枪",2, 15.0, 5, 500, 346, 17, 1, 16.0},
	{"消音手枪",2, 15.0, 6, 750, 347, 17, 1, 25.0},
	{"沙漠之鹰",2, 35.0, 6, 1500, 348, 7, 2, 20.0},
	//25
	{"霰弹枪",3, 40.0, 12, 2000, 349, 10, 3, 15.0},
	{"短管霰弹枪",3, 40.0, 8, 2000, 350, 10, 3, 12.0},
	{"战斗霰弹枪",3, 40.0, 12, 3500, 351, 14, 3, 12.0},
	{"乌兹",4, 12.0, 7, 1250, 352, 50, 4, 20.0},
	{"MP5冲锋枪",4, 18.0, 9, 2500, 353, 30, 4, 40.0},
	//30
	{"AK47",5, 22.0, 15, 4000, 355, 30, 5, 60.0},
	{"M4",5, 25.5, 15, 5000, 356, 50, 5, 65.0},
	{"Tec9",4, 12.0, 8, 900, 372, 50, 4, 20.0},
	{"来福枪",6, 50.0, 12, 3000, 357, 10, 6, 110.0},
	{"狙击枪",6, 70.0, 13, 6000, 358, 10, 6, 180.0},
	//35
	{"火箭筒",7, 500.0, 25, 20000, 359, 5, 8, 50.0},
	{"热感应火箭筒",7, 500.0, 28, 40000, 360, 5, 8, 50.0},
	{"火焰喷射器",7, 1.0, 20, 0, 361, 30, 0, 15.0},
	{"火神机枪",7, 20.0, 30, 0, 362, 1000, 5, 50.0},
	{"黏弹",8, 90.0, 2, 0, 363, 5, 0, 10.0},
	//40
	{"_",12, 0.0, 0, 0, 0, 0, 0},
	{"喷漆",9, 1.2, 2, 200, 365, 500, 0, 0.0},
	{"灭火器",9, 1.0, 6, 200, 366, 500, 0, 8.0},
	{"相机",9, 0.0, 2, 200, 367, 50, 0, 15.0},
	{"_",11, 0.0, 0, 0, 0, 0, 0, 0.0},
	//45
	{"_",11, 0.0, 0, 0, 0, 0, 0, 0.0},
	{"降落伞",11, 0.0, 0, 0, 370, 0, 0, 1.0},
	{"_",-1, 0.0, 0, 0, 0, 0, 0, 0.0},
	{"_",-1, 0.0, 0, 0, 0, 0, 0, 0.0},
	{"撞击",-1, 40.0, 0, 0, 0, 0, 0, 0.0},
	//50
	{"螺旋桨",-1, 25.0, 0, 0, 0, 0, 0, 0.0},
	{"爆炸",-1, 500.0, 0, 0, 0, 0, 0, 0.0}
};

enum E_ANIMLIST
{//动作列表
	anmName[32],
	anmType,
	anmLibA[32],
	anmFileA[32],
	anmLibB[32],
	anmFileB[32]
};

static const AnimList[][E_ANIMLIST]=
{
    {"无", ANIM_NONE, " ", " ", " ", " "},
    //1
    {"挥手1", ANIM_NORMAL, "KISSING", "GFWAVE2", " ", " "},
    {"挥手2", ANIM_NORMAL, "PED", "ENDCHAT_03", " ", " "},
    {"挥手3", ANIM_NORMAL, "PED", "IDLE_TAXI", " ", " "},
    {"胜利手势1", ANIM_NORMAL, "CASINO", "MANWINB", " ", " "},
    {"胜利手势2", ANIM_NORMAL, "CASINO", "MANWIND", " ", " "},
    //6
    {"胜利手势3", ANIM_NORMAL, "CLOTHES", "CLO_BUY", " ", " "},
    {"胜利手势4", ANIM_NORMAL, "OTB", "WTCHRACE_WIN", " ", " "},
    {"同意", ANIM_NORMAL, "GANGS", "INVITE_YES", " ", " "},
    {"拒绝1", ANIM_NORMAL, "GANGS", "INVITE_NO", " ", " "},
    {"拒绝2", ANIM_NORMAL, "POLICE", "COPTRAF_STOP", " ", " "},
    //11
    {"帮会手势1", ANIM_NORMAL, "GHANDS", "GSIGN1", " ", " "},
    {"帮会手势2", ANIM_NORMAL, "GHANDS", "GSIGN1LH", " ", " "},
    {"帮会手势3", ANIM_NORMAL, "GHANDS", "GSIGN2", " ", " "},
    {"帮会手势4", ANIM_NORMAL, "GHANDS", "GSIGN2LH", " ", " "},
    {"帮会手势5", ANIM_NORMAL, "GHANDS", "GSIGN3", " ", " "},
    //16
    {"帮会手势6", ANIM_NORMAL, "GHANDS", "GSIGN3LH", " ", " "},
    {"帮会手势7", ANIM_NORMAL, "GHANDS", "GSIGN4", " ", " "},
    {"帮会手势8", ANIM_NORMAL, "GHANDS", "GSIGN4LH", " ", " "},
    {"帮会手势9", ANIM_NORMAL, "GHANDS", "GSIGN5", " ", " "},
    {"帮会手势10", ANIM_NORMAL, "GHANDS", "GSIGN5LH", " ", " "},
	//21
	{"CPR", ANIM_NORMAL, "MEDIC ", "CPR", " ", " "},
    {"无奈", ANIM_NORMAL, "MISC", "PLYR_SHKHEAD", " ", " "},
    {"胯下痒", ANIM_NORMAL, "MISC", "SRATCHBALLS_01", " ", " "},
    {"向前指", ANIM_NORMAL, "ON_LOOKERS", "POINT_LOOP", " ", " "},
    {"自娱完毕", ANIM_NORMAL, "PAULNMAC", "WANK_OUT", " ", " "},
    //26
	{"咒骂", ANIM_NORMAL, "PED ", "FUCKU", " ", " "},
    {"惊吓倒退1", ANIM_NORMAL, "PED", "HANDSCOWER", " ", " "},
    {"惊吓倒退2", ANIM_NORMAL, "SHOP", "SHP_ROB_REACT", " ", " "},
    {"向前指", ANIM_NORMAL, "ON_LOOKERS", "POINT_LOOP", " ", " "},
    {"摇摆", ANIM_NORMAL, "PED", "XPRESSSCRATCH", " ", " "},
    //31
	{"摇摆1", ANIM_NORMAL, "PLAYERIDLES ", "SHIFT", " ", " "},
    {"摇摆2", ANIM_NORMAL, "PLAYERIDLES", "STRETCH", " ", " "},
    {"摇摆3", ANIM_NORMAL, "PLAYERIDLES", "SHLDR", " ", " "},
    {"摇摆4", ANIM_NORMAL, "PLAYERIDLES", "STRLEG", " ", " "},
    {"摇摆5", ANIM_NORMAL, "PLAYERIDLES", "TIME", " ", " "},
    //36
	{"大笑", ANIM_NORMAL, "RAPPING ", "LAUGH_01", " ", " "},
    {"示威", ANIM_NORMAL, "RIOT", "RIOT_ANGRY", " ", " "},
    {"助威", ANIM_NORMAL, "RIOT", "RIOT_CHANT", " ", " "},
    {"席地而坐1", ANIM_LOOP, "BEACH", "BATHER", " ", " "},
    {"席地而坐2", ANIM_LOOP, "BEACH", "BAC_LOOP", " ", " "},
    //41
    {"席地而坐3", ANIM_LOOP, "BEACH", "LAY_BAC_LOOP", " ", " "},
    {"席地而坐4", ANIM_LOOP, "BEACH", "PARKSIT_M_", " ", " "},
    {"席地而坐5", ANIM_LOOP, "BEACH", "PARKSIT_W_LOOP", " ", " "},
    {"席地而坐6", ANIM_LOOP, "BEACH", "SITWAIT_LOOP_W", " ", " "},
    {"阻挡", ANIM_LOOP, "BSKTBALL", "BBALL_DEF_LOOP", " ", " "},
    //46
    {"等待1", ANIM_LOOP, "CASINO", "CARDS_LOOP", " ", " "},
    {"等待2", ANIM_LOOP, "COP_AMBIENT", "COPLOOK_LOOP", " ", " "},
    {"等待3", ANIM_LOOP, "DEALER", "DEALER_IDLE", " ", " "},
    {"等待4", ANIM_LOOP, "GRAVEYARD", "PRST_LOOPA", " ", " "},
    {"等待5", ANIM_LOOP, "OTB", "WTCHRACE_LOOP", " ", " "},
    //51
    {"等待6", ANIM_LOOP, "RAPPING", "RAP_A_LOOP", " ", " "},
    {"等待7", ANIM_LOOP, "SMOKING", "M_SMK_LOOP", " ", " "},
    {"等待8", ANIM_LOOP, "WUZI", "WUZI_STAND_LOOP", " ", " "},
    {"靠墙1", ANIM_LOOP, "GANGS", "LEANIDLE", " ", " "},
    {"靠墙2", ANIM_LOOP, "MISC", "PLAYERLEAN_LOOP", " ", " "},
    //56
    {"悲伤1", ANIM_LOOP, "GRAVEYARD", "MRNF_LOOP", " ", " "},
    {"悲伤2", ANIM_LOOP, "GRAVEYARD", "MRNM_LOOP", " ", " "},
    {"警戒", ANIM_LOOP, "ON_LOOKERS", "LKAROUND_LOOP", " ", " "},
    {"向前指", ANIM_LOOP, "ON_LOOKERS", "POINTUP_LOOP", " ", " "},
    {"挥手", ANIM_LOOP, "ON_LOOKERS", "WAVE_LOOP", " ", " "},
    //61
    {"排遗", ANIM_LOOP, "PAULNMAC", "PISS_LOOP", " ", " "},
    {"自娱", ANIM_LOOP, "PAULNMAC", "WANK_LOOP", " ", " "},
    {"避难", ANIM_LOOP, "PED", "COWER", " ", " "},
    {"投降", ANIM_LOOP, "PED", "HANDSUP", " ", " "},
    {"饶舌", ANIM_LOOP, "RAPPING", "RAP_C_LOOP", " ", " "},
    //66
    {"负伤1", ANIM_LOOP, "SWAT", "GNSTWALL_INJURD", " ", " "},
    {"负伤2", ANIM_LOOP, "SWEET", "INJUREDLOOP", " ", " "},
    {"太极拳", ANIM_LOOP, "PARK", "TAI_CHI_LOOP", " ", " "},
    {"握手1", ANIM_INTER, "GANGS", "HNDSHKAA", "GANGS", "HNDSHKAA"},
    {"握手2", ANIM_INTER, "GANGS", "HNDSHKBA", "GANGS", "HNDSHKBA"},
    //71
    {"握手3", ANIM_INTER, "GANGS", "HNDSHKCA", "GANGS", "HNDSHKCA"},
    {"握手4", ANIM_INTER, "GANGS", "HNDSHKCB", "GANGS", "HNDSHKCB"},
    {"碰拳", ANIM_INTER, "GANGS", "HNDSHKDA", "GANGS", "HNDSHKDA"},
    {"击掌", ANIM_INTER, "GANGS", "HNDSHKEA", "GANGS", "HNDSHKEA"},
    {"握手5", ANIM_INTER, "GANGS", "HNDSHKFA", "GANGS", "HNDSHKFA"},
    //76
    {"握手6", ANIM_INTER, "GANGS", "HNDSHKFA_SWT", "GANGS", "HNDSHKFA_SWT"},
    {"握手(无效)", ANIM_NONE, "GANGS", "PARTIAL_HNDSHK_01", "GANGS", "PARTIAL_HNDSHK_01"},
    {"握手(无效)", ANIM_NONE, "GANGS", "PARTIAL_HNDSHK_BIZ_01", "GANGS", "PARTIAL_HNDSHK_BIZ_01"},
    {"亲吻1", ANIM_INTER, "KISSING", "PLAYA_KISS_02", "KISSING", "GRLFRD_KISS_02"},
    {"亲吻2", ANIM_INTER, "KISSING", "PLAYA_KISS_03", "KISSING", "GRLFRD_KISS_03"},
    //81
    {"慢舞1", ANIM_DANCE, " ", " ", " ", " "},
    {"慢舞2", ANIM_DANCE, " ", " ", " ", " "},
    {"快舞", ANIM_DANCE, " ", " ", " ", " "},
    {"艳舞", ANIM_DANCE, " ", " ", " ", " "}
};

enum E_PAINTJOB
{//by Dimi
    pjVeh,
	pjID,
	pjPrice,
	pjName[32]
};

static const Paintjob[][E_PAINTJOB] =
{
    {483, 0, 2500, "嬉皮涂装"},
    {534, 0, 1000, "涂装1"},
    {534, 1, 1000, "涂装2"},
    {534, 2, 1000, "涂装3"},
    {535, 0, 1000, "涂装1"},
    {535, 1, 1000, "涂装2"},
    {535, 2, 1000, "涂装3"},
    {536, 0, 1000, "涂装1"},
    {536, 1, 1000, "涂装2"},
    {536, 2, 1000, "涂装3"},
    {558, 0, 1000, "涂装1"},
    {558, 1, 1000, "涂装2"},
    {558, 2, 1000, "涂装3"},
    {559, 0, 1000, "涂装1"},
    {559, 1, 1000, "涂装2"},
    {559, 2, 1000, "涂装3"},
    {560, 0, 1000, "涂装1"},
    {560, 1, 1000, "涂装2"},
    {560, 2, 1000, "涂装3"},
    {561, 0, 1000, "涂装1"},
    {561, 1, 1000, "涂装2"},
    {561, 2, 1000, "涂装3"},
    {562, 0, 1000, "涂装1"},
    {562, 1, 1000, "涂装2"},
    {562, 2, 1000, "涂装3"},
    {565, 0, 1000, "涂装1"},
    {565, 1, 1000, "涂装2"},
    {565, 2, 1000, "涂装3"},
    {567, 0, 1000, "涂装1"},
    {567, 1, 1000, "涂装2"},
    {567, 2, 1000, "涂装3"},
    {575, 0, 1000, "涂装1"},
    {575, 1, 1000, "涂装2"},
    {576, 0, 1000, "涂装1"},
    {576, 1, 1000, "涂装2"},
    {576, 2, 1000, "涂装3"}
};

enum E_VTUNE
{
    vtID,
	vtName[32],
	vtPrice,
	vtType
};

static const VehTune[][E_VTUNE]=
{//by Dimi
    {0, "无", 0, 99},
    //1
    {1000, "Pro尾翼", 500, CARMODTYPE_SPOILER},
    {1001, "Win尾翼", 500, CARMODTYPE_SPOILER},
    {1002, "Drag尾翼", 500, CARMODTYPE_SPOILER},
    {1003, "Alpha尾翼", 500, CARMODTYPE_SPOILER},
    {1004, "Champ引擎罩", 350, CARMODTYPE_HOOD},
    {1005, "Fury引擎罩", 350, CARMODTYPE_HOOD},
    {1006, "顶罩", 350, CARMODTYPE_ROOF},
    {1007, "右侧裙", 150, CARMODTYPE_SIDESKIRT},
    {1008, "5x氮气", 500, CARMODTYPE_NITRO},
    {1009, "2x氮气", 250, CARMODTYPE_NITRO},
    {1010, "10x氮气", 1500, CARMODTYPE_NITRO},
    {1011, "Race引擎罩", 250, CARMODTYPE_HOOD},
    {1012, "Worx引擎罩", 250, CARMODTYPE_HOOD},
    {1013, "圆雾灯", 300, CARMODTYPE_LAMPS},
    {1014, "Champ尾翼", 500, CARMODTYPE_SPOILER},
    {1015, "Race尾翼", 500, CARMODTYPE_SPOILER},
    {1016, "Worx尾翼", 500, CARMODTYPE_SPOILER},
    {1017, "左侧裙", 150, CARMODTYPE_SIDESKIRT},
    {1018, "上挑排气管", 400, CARMODTYPE_EXHAUST},
    {1019, "双排气管", 500, CARMODTYPE_EXHAUST},
    {1020, "大型排气管", 600, CARMODTYPE_EXHAUST},
    {1021, "中型排气管", 400, CARMODTYPE_EXHAUST},
    {1022, "小型排气管", 350, CARMODTYPE_EXHAUST},
    {1023, "Fury尾翼", 500, CARMODTYPE_SPOILER},
    {1024, "方形雾灯", 300, CARMODTYPE_LAMPS},
    {1025, "越野轮胎", 800, CARMODTYPE_WHEELS},
    {1026, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1027, "左侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1028, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1029, "X-Flow排气管", 1000, CARMODTYPE_EXHAUST},
    {1030, "左侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1031, "右侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1032, "Alien车顶", 800, CARMODTYPE_ROOF},
    {1033, "X-Flow车顶", 900, CARMODTYPE_ROOF},
    {1034, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1035, "X-Flow车顶", 1000, CARMODTYPE_ROOF},
    {1036, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1037, "X-Flow排气管", 1200, CARMODTYPE_EXHAUST},
    {1038, "Alien车顶", 1000, CARMODTYPE_ROOF},
    {1039, "左侧X-Flow侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1040, "左侧Alien侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1041, "右侧X-Flow侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1042, "右侧Chrome侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1043, "Slamin排气管", 1300, CARMODTYPE_EXHAUST},
    {1044, "Chrome排气管", 110, CARMODTYPE_EXHAUST},
    {1045, "X-Flow排气管", 1000, CARMODTYPE_EXHAUST},
    {1046, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1047, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1048, "右侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1049, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1050, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1051, "左侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1052, "左侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1053, "X-Flow车顶", 900, CARMODTYPE_ROOF},
    {1054, "Alien车顶", 800, CARMODTYPE_ROOF},
    {1055, "Alien车顶", 800, CARMODTYPE_ROOF},
    {1056, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1057, "右侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1058, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1059, "X-Flow排气管", 1000, CARMODTYPE_EXHAUST},
    {1060, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1061, "X-Flow车顶", 1000, CARMODTYPE_ROOF},
    {1062, "左侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1063, "左侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1064, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1065, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1066, "X-Flow排气管", 1000, CARMODTYPE_EXHAUST},
    {1067, "Alien车顶", 1200, CARMODTYPE_ROOF},
    {1068, "X-Flow车顶", 1000, CARMODTYPE_ROOF},
    {1069, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1070, "右侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1071, "左侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1072, "左侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1073, "Shadow轮胎", 400, CARMODTYPE_WHEELS},
    {1074, "Mega轮胎", 400, CARMODTYPE_WHEELS},
    {1075, "Rimshine轮胎", 450, CARMODTYPE_WHEELS},
    {1076, "Wires轮胎", 750, CARMODTYPE_WHEELS},
    {1077, "Classic轮胎", 750, CARMODTYPE_WHEELS},
    {1078, "Twist轮胎", 600, CARMODTYPE_WHEELS},
    {1079, "Cutter轮胎", 500, CARMODTYPE_WHEELS},
    {1080, "Switch轮胎", 1000, CARMODTYPE_WHEELS},
    {1081, "Grove轮胎", 500, CARMODTYPE_WHEELS},
    {1082, "Import轮胎", 600, CARMODTYPE_WHEELS},
    {1083, "Dollar轮胎", 1500, CARMODTYPE_WHEELS},
    {1084, "Trance轮胎", 1200, CARMODTYPE_WHEELS},
    {1085, "Atomic轮胎", 600, CARMODTYPE_WHEELS},
    {1086, "立体音效", 300, -1},
    {1087, "液压系统", 500, CARMODTYPE_HYDRAULICS},
    {1088, "Alien车顶", 1200, CARMODTYPE_ROOF},
    {1089, "X-Flow排气管", 1000, CARMODTYPE_EXHAUST},
    {1090, "右侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1091, "X-Flow车顶", 900, CARMODTYPE_ROOF},
    {1092, "Alien排气管", 1200, CARMODTYPE_EXHAUST},
    {1093, "右侧X-Flow侧裙", 450, CARMODTYPE_SIDESKIRT},
    {1094, "左侧Alien侧裙", 550, CARMODTYPE_SIDESKIRT},
    {1095, "右侧X-Flow侧裙", 350, CARMODTYPE_SIDESKIRT},
    {1096, "Ahab轮胎", 400, CARMODTYPE_WHEELS},
    {1097, "Virtual轮胎", 400, CARMODTYPE_WHEELS},
    {1098, "Access轮胎", 500, CARMODTYPE_WHEELS},
    {1099, "左侧Chrome侧裙", 650, CARMODTYPE_SIDESKIRT},
    {1100, "Chrome防撞条", 300, CARMODTYPE_FRONT_BUMPER}, // Bullbar
    {1101, "左侧Chrome火焰侧裙", 750, CARMODTYPE_SIDESKIRT},
    {1102, "左侧Chrome条纹侧裙", 500, CARMODTYPE_SIDESKIRT},
    {1103, "软顶", 800, CARMODTYPE_ROOF},
    {1104, "Chrome排气管", 1000, CARMODTYPE_EXHAUST},
    {1105, "Slamin排气管", 1000, CARMODTYPE_EXHAUST},
    {1106, "右侧Chrome弧形侧裙", 750, CARMODTYPE_SIDESKIRT},
    {1107, "左侧Chrome侧条", 400, CARMODTYPE_SIDESKIRT},
    {1108, "右侧Chrome侧条", 400, CARMODTYPE_SIDESKIRT},
    {1109, "Chrome防撞杆", 600, CARMODTYPE_REAR_BUMPER}, // Bullbar
    {1110, "Slamin防撞杆", 600, CARMODTYPE_REAR_BUMPER}, // Bullbar
    {1111, "小标志", 100, -1}, // sig
    {1112, "小标志", 100, -1}, // sig
    {1113, "Chrome排气管", 1000, CARMODTYPE_EXHAUST},
    {1114, "Slamin排气管", 1000, CARMODTYPE_EXHAUST},
    {1115, "Chrome防撞杆", 600, CARMODTYPE_FRONT_BUMPER}, // Bullbar
    {1116, "Slamin防撞杆", 600, CARMODTYPE_FRONT_BUMPER}, // Bullbar
    {1117, "Chrome前保险杆", 800, CARMODTYPE_FRONT_BUMPER},
    {1118, "右侧Chrome镶边侧裙", 300, CARMODTYPE_SIDESKIRT},
    {1119, "右侧轮罩", 400, CARMODTYPE_SIDESKIRT},
    {1120, "左侧Chrome镶边侧裙", 300, CARMODTYPE_SIDESKIRT},
    {1121, "左侧轮罩", 400, CARMODTYPE_SIDESKIRT},
    {1122, "右侧Chrome火焰侧裙", 750, CARMODTYPE_SIDESKIRT},
    {1123, "Chrome防撞杆", 600, CARMODTYPE_FRONT_BUMPER}, // Bullbar
    {1124, "左侧Chrome弧形侧裙", 750, CARMODTYPE_SIDESKIRT},
    {1125, "Chrome防撞杆", 600, CARMODTYPE_FRONT_BUMPER}, // Bullbar
    {1126, "Chrome排气管", 1000, CARMODTYPE_EXHAUST},
    {1127, "Slamin排气管", 1000, CARMODTYPE_EXHAUST},
    {1128, "硬顶", 1200, CARMODTYPE_ROOF},
    {1129, "Chrome排气管", 1000, CARMODTYPE_EXHAUST},
    {1130, "硬顶", 1200, CARMODTYPE_ROOF},
    {1131, "软顶", 800, CARMODTYPE_ROOF},
    {1132, "Slamin排气管", 1000, CARMODTYPE_EXHAUST},
    {1133, "右侧Chrome条纹侧裙", 500, CARMODTYPE_SIDESKIRT},
    {1134, "右侧Chrome条纹侧裙", 500, CARMODTYPE_SIDESKIRT},
    {1135, "Slamin排气管", 1000, CARMODTYPE_EXHAUST},
    {1136, "Chrome排气管", 1000, CARMODTYPE_EXHAUST},
    {1137, "左侧Chrome条纹侧裙", 500, CARMODTYPE_SIDESKIRT},
    {1138, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1139, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1140, "X-Flow后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1141, "Alien后保险杆", 500, CARMODTYPE_REAR_BUMPER},
    {1142, "椭圆排气口", 200, CARMODTYPE_VENT_LEFT},
    {1144, "方形排气口", 200, CARMODTYPE_VENT_LEFT},
    {1146, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1147, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1148, "X-Flow后保险杆", 500, CARMODTYPE_REAR_BUMPER},
    {1149, "Alien后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1150, "Alien后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1151, "X-Flow后保险杆", 500, CARMODTYPE_REAR_BUMPER},
    {1152, "X-Flow前保险杆", 500, CARMODTYPE_FRONT_BUMPER},
    {1153, "Alien前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1154, "Alien后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1155, "Alien前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1156, "X-Flow后保险杆", 500, CARMODTYPE_REAR_BUMPER},
    {1157, "X-Flow前保险杆", 500, CARMODTYPE_FRONT_BUMPER},
    {1158, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1159, "Alien后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1160, "Alien前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1161, "X-Flow后保险杆", 500, CARMODTYPE_REAR_BUMPER},
    {1162, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1163, "X-Flow尾翼", 1000, CARMODTYPE_SPOILER},
    {1164, "Alien尾翼", 1200, CARMODTYPE_SPOILER},
    {1165, "X-Flow前保险杆", 1000, CARMODTYPE_FRONT_BUMPER},
    {1166, "Alien前保险杆", 1200, CARMODTYPE_FRONT_BUMPER},
    {1167, "X-Flow后保险杆", 1000, CARMODTYPE_REAR_BUMPER},
    {1168, "Alien后保险杆", 1200, CARMODTYPE_REAR_BUMPER},
    {1169, "Alien前保险杆", 1200, CARMODTYPE_FRONT_BUMPER},
    {1170, "X-Flow前保险杆", 1000, CARMODTYPE_FRONT_BUMPER},
    {1171, "Alien前保险杆", 1200, CARMODTYPE_FRONT_BUMPER},
    {1172, "X-Flow前保险杆", 1000, CARMODTYPE_FRONT_BUMPER},
    {1173, "X-Flow前保险杆", 1000, CARMODTYPE_FRONT_BUMPER},
    {1174, "Chrome前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1175, "Slamin前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1176, "Chrome后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1177, "Slamin后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1178, "Slamin后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1179, "Chrome前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1180, "Chrome后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1181, "Slamin前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1182, "Chrome前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1183, "Slamin后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1184, "Chrome后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1185, "Slamin前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1186, "Slamin后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1187, "Chrome后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1188, "Slamin前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1189, "Chrome前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1190, "Slamin前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1191, "Chrome前保险杆", 600, CARMODTYPE_FRONT_BUMPER},
    {1192, "Chrome后保险杆", 600, CARMODTYPE_REAR_BUMPER},
    {1193, "Slamin后保险杆", 600, CARMODTYPE_REAR_BUMPER}
};

enum E_MARKETDATA//交易所物件
{
    ORM:ORM_ID,//ORM物件编号
    mID,
    mType,//交易种类
    mStuffID,//交易物ID
    mAmount,//交易数量
    mPrice,//交易价
    mPoster,//张贴交易的玩家的资料库ID 0的话代表为系统
    mTime,//交易天数 到期将自动删除交易
    mSold,//交易是否完成
    mSeller//完成交易的玩家
};

static MarketData[MAX_DEALS][E_MARKETDATA];

enum E_GOODBUYER//货物买家
{
    gbBuyerID,//买家ID
    gbGoodID,//交易货物ID
    gbGoodPrice,//每个货物金额
    gbGoodAmount,//需求数量
};

static GoodBuyer[MAX_GOODBUYERS][E_GOODBUYER];

enum E_BUYLIST
{
	gbName[24],//买家名称
	gbGood1,//收购的货物1
	gbGood2,//收购的货物2
	gbGood3,//收购的货物3
};

static const BuyersList[][E_BUYLIST]=
{
    {"无", 0, 0, 0},
    //1
    {"大唐企业", 152, 153, 154},
    {"五月雨民生企业", 152, 152, 154},
    {"领衔股份有限公司", 152, 153, 154},
    {"圣荷西企业", 152, 152, 153},
    {"伊莎贝拉企业", 153, 154, 154},
    //6
    {"百利制药", 151, 151, 151},
    {"狄克森万药", 151, 151, 157},
    {"菲尔军业", 149, 149, 150},
    {"哥伦比亚集团", 149, 156, 157},
    {"西西里黑手党", 149, 149, 155},
    //11
    {"俄罗斯黑手党", 149, 155, 156},
    {"日本山口组", 149, 156, 157}
};

enum E_BOTTLELETTER//瓶中信
{
    btlCreated,
    btlOwner,
    btlText[64],
};

static BottleLetter[MAX_BLETTERS][E_BOTTLELETTER];

enum E_EXP
{
	expLV,
	expAmount
}

static const ExpList[][E_EXP] =
{
	{0,0},
	{1,0},{2,500},{3,1200},{4,2000},{5,3500},
	{6,5600},{7,7800},{8,10000},{9,14000},{10,18800},
	{11,23100},{12,28400},{13,33600},{14,39800},{15,45500},
	{16,52100},{17,60000},{18,68100},{19,76300},{20,85700},
	{21,95000},{22,104200},{23,114500},{24,125000},{25,136400},
	{26,147700},{27,159000},{28,171100},{29,183400},{30,197100},
	{31,210500},{32,223900},{33,237000},{34,251500},{35,266600},
	{36,281200},{37,297300},{38,313200},{39,335000},{40,354500},
	{41,374100},{42,392510},{43,411700},{44,432000},{45,456800},
	{46,476200},{47,491000},{48,512300},{49,532100},{50,560000},
	{51,581500},{52,602200},{53,623700},{54,644500},{55,665300},
	{56,687100},{57,709900},{58,730100},{59,753000},{60,776500},
	{61,800100},{62,825200},{63,853700},{64,879000},{65,905000},
	{66,934000},{67,959700},{68,985100},{69,1012300},{70,1039100},
	{71,1062000},{72,1095000},{73,1218700},{74,1250300},{75,1284000},
	{76,1314500},{77,1346800},{78,1378300},{79,1410400},{80,1442800},
	{81,1475200},{82,1509500},{83,1544100},{84,1579000},{85,1614000},
	{86,1772500},{87,1809200},{88,1846800},{89,1884400},{90,1922700},
	{91,1961800},{92,2001700},{93,2041900},{94,2082100},{95,2123300},
	{96,2165000},{97,2209200},{98,2251400},{99,2296500},{100,2345000},
	{101,2400000},{102,2450000},{103,2510000},{104,2580000},{105,2680000},
	{106,2790000},{107,2810000},{108,2840000},{109,3000000},{110,3200000},
	{111,3400000},{112,3600000},{113,3800000},{114,4000000},{115,4200000},
	{116,4400000},{117,4600000},{118,4800000},{119,5000000},{120,5200000}//200000

};

enum E_WANTED
{
    ORM:ORM_ID,
 	wtID,
	wtJailTime,//入狱时间
	wtFine,//罚金
	wtDisTime//消除时间
}

static WantedList[7][E_WANTED];

static const Letters[26][] =
{
    "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"
};

static const LettersNNums[] =
{
	"0","1","2","3","4","5","6","7","8","9",
	"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r", "s","t","u","v","w","x","y","z",
	"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"
};

static const s_AnimationLibraries[][] =
{
        !"AIRPORT",    !"ATTRACTORS",   !"BAR",                 !"BASEBALL",
        !"BD_FIRE",    !"BEACH",            !"BENCHPRESS",  !"BF_INJECTION",
        !"BIKED",          !"BIKEH",        !"BIKELEAP",        !"BIKES",
        !"BIKEV",          !"BIKE_DBZ",     !"BMX",             !"BOMBER",
        !"BOX",            !"BSKTBALL",     !"BUDDY",           !"BUS",
        !"CAMERA",         !"CAR",          !"CARRY",           !"CAR_CHAT",
        !"CASINO",         !"CHAINSAW",     !"CHOPPA",          !"CLOTHES",
        !"COACH",          !"COLT45",       !"COP_AMBIENT", !"COP_DVBYZ",
        !"CRACK",          !"CRIB",         !"DAM_JUMP",         !"DANCING",
        !"DEALER",         !"DILDO",        !"DODGE",            !"DOZER",
        !"DRIVEBYS",   !"FAT",          !"FIGHT_B",      !"FIGHT_C",
        !"FIGHT_D",    !"FIGHT_E",      !"FINALE",               !"FINALE2",
        !"FLAME",      !"FLOWERS",      !"FOOD",                 !"FREEWEIGHTS",
        !"GANGS",      !"GHANDS",       !"GHETTO_DB",    !"GOGGLES",
        !"GRAFFITI",   !"GRAVEYARD",    !"GRENADE",      !"GYMNASIUM",
        !"HAIRCUTS",   !"HEIST9",       !"INT_HOUSE",    !"INT_OFFICE",
        !"INT_SHOP",   !"JST_BUISNESS", !"KART",                 !"KISSING",
        !"KNIFE",      !"LAPDAN1",              !"LAPDAN2",      !"LAPDAN3",
        !"LOWRIDER",   !"MD_CHASE",     !"MD_END",               !"MEDIC",
        !"MISC",       !"MTB",                  !"MUSCULAR",     !"NEVADA",
        !"ON_LOOKERS", !"OTB",                  !"PARACHUTE",    !"PARK",
        !"PAULNMAC",   !"PED",                  !"PLAYER_DVBYS", !"PLAYIDLES",
        !"POLICE",     !"POOL",                 !"POOR",                 !"PYTHON",
        !"QUAD",       !"QUAD_DBZ",     !"RAPPING",      !"RIFLE",
        !"RIOT",       !"ROB_BANK",     !"ROCKET",               !"RUSTLER",
        !"RYDER",      !"SCRATCHING",   !"SHAMAL",               !"SHOP",
        !"SHOTGUN",    !"SILENCED",     !"SKATE",                !"SMOKING",
        !"SNIPER",     !"SPRAYCAN",     !"STRIP",                !"SUNBATHE",
        !"SWAT",       !"SWEET",                !"SWIM",                 !"SWORD",
        !"TANK",       !"TATTOOS",              !"TEC",                  !"TRAIN",
        !"TRUCK",      !"UZI",                  !"VAN",                  !"VENDING",
        !"VORTEX",     !"WAYFARER",     !"WEAPONS",      !"WUZI",
        !"WOP",        !"GFUNK",     !"RUNNINGMAN",	!"SAMP",	!"SEX",	!"BLOWJOBZ",
        !"SnM"
};



enum E_AREAS
{
	arName[32],
	arNameCHT[32],
	Float:arZone[6]
};

static const Area[][E_AREAS] =
{
    {"Los Santos", "洛圣都", {128.45,-2580.81,-242.90,3082.95,315.30,900.00}},//(minx,miny,minz,maxx,maxy,maxz)
	{"San Fierro", "圣费耶洛", {-3106.31,-1015.97,-242.90,-1039.33,1961.88,900.00}},
	{"Las Venturas", "拉斯维托拉斯", {-840.80,537.18,-242.90,3106.31,3269.80,900.00}},
	{"Bone County", "骨镇", {-480.50,596.30,-242.90,869.40,2993.80,900.00}},
	{"Angel Pine", "安洁派", {-2324.90,-2584.20,-6.10,-1964.20,-2212.10,200.00}},
	{"Fort Carson", "卡森要塞", {-376.20,826.30,-3.00,123.70,1220.40,200.00}},
	{"Tierra Robada", "提耶拉罗巴达", {-2997.40,1659.60,-242.90,-480.50,2993.80,900.00}},
	{"Tierra Robada", "提耶拉罗巴达", {-1213.90,596.30,-242.90,-480.50,1659.60,900.00}},
	{"Red County", "瑞德镇", {-1213.90,-768.00,-242.90,2997.00,596.30,900.00}},
	{"Flint County", "燧石镇", {-1213.90,-2892.90,-242.90,44.60,-768.00,900.00}},
	{"Whetstone", "磨石乡", {-2997.40,-2892.90,-242.90,-1213.90,-1115.50,900.00}}
};

enum E_SAREAS
{
	arsName[32],
	Float:arsZone[6]
};

static const SmallArea[][E_SAREAS] =
{
	{"The Big Ear",	                {-410.00,1403.30,-3.00,-137.90,1681.20,200.00}},
	{"Aldea Malvada",               {-1372.10,2498.50,0.00,-1277.50,2615.30,200.00}},
	{"Angel Pine",                  {-2324.90,-2584.20,-6.10,-1964.20,-2212.10,200.00}},
	{"Arco del Oeste",              {-901.10,2221.80,0.00,-592.00,2571.90,200.00}},
	{"Avispa Country Club",         {-2646.40,-355.40,0.00,-2270.00,-222.50,200.00}},
	{"Avispa Country Club",         {-2831.80,-430.20,-6.10,-2646.40,-222.50,200.00}},
	{"Avispa Country Club",         {-2361.50,-417.10,0.00,-2270.00,-355.40,200.00}},
	{"Avispa Country Club",         {-2667.80,-302.10,-28.80,-2646.40,-262.30,71.10}},
	{"Avispa Country Club",         {-2470.00,-355.40,0.00,-2270.00,-318.40,46.10}},
	{"Avispa Country Club",         {-2550.00,-355.40,0.00,-2470.00,-318.40,39.70}},
	{"Back o Beyond",               {-1166.90,-2641.10,0.00,-321.70,-1856.00,200.00}},
	{"Battery Point",               {-2741.00,1268.40,-4.50,-2533.00,1490.40,200.00}},
	{"Bayside",                     {-2741.00,2175.10,0.00,-2353.10,2722.70,200.00}},
	{"Bayside Marina",              {-2353.10,2275.70,0.00,-2153.10,2475.70,200.00}},
	{"Beacon Hill",                 {-399.60,-1075.50,-1.40,-319.00,-977.50,198.50}},
	{"Blackfield",                  {964.30,1203.20,-89.00,1197.30,1403.20,110.90}},
	{"Blackfield",                  {964.30,1403.20,-89.00,1197.30,1726.20,110.90}},
	{"Blackfield Chapel",           {1375.60,596.30,-89.00,1558.00,823.20,110.90}},
	{"Blackfield Chapel",           {1325.60,596.30,-89.00,1375.60,795.00,110.90}},
	{"Blackfield Intersection",     {1197.30,1044.60,-89.00,1277.00,1163.30,110.90}},
	{"Blackfield Intersection",     {1166.50,795.00,-89.00,1375.60,1044.60,110.90}},
	{"Blackfield Intersection",     {1277.00,1044.60,-89.00,1315.30,1087.60,110.90}},
	{"Blackfield Intersection",     {1375.60,823.20,-89.00,1457.30,919.40,110.90}},
	{"Blueberry",                   {104.50,-220.10,2.30,349.60,152.20,200.00}},
	{"Blueberry",                   {19.60,-404.10,3.80,349.60,-220.10,200.00}},
	{"Blueberry Acres",             {-319.60,-220.10,0.00,104.50,293.30,200.00}},
	{"Caligula's Palace",           {2087.30,1543.20,-89.00,2437.30,1703.20,110.90}},
	{"Caligula's Palace",           {2137.40,1703.20,-89.00,2437.30,1783.20,110.90}},
	{"Calton Heights",              {-2274.10,744.10,-6.10,-1982.30,1358.90,200.00}},
	{"Chinatown",                   {-2274.10,578.30,-7.60,-2078.60,744.10,200.00}},
	{"City Hall",                   {-2867.80,277.40,-9.10,-2593.40,458.40,200.00}},
	{"Come-A-Lot",                  {2087.30,943.20,-89.00,2623.10,1203.20,110.90}},
	{"Commerce",                    {1323.90,-1842.20,-89.00,1701.90,-1722.20,110.90}},
	{"Commerce",                    {1323.90,-1722.20,-89.00,1440.90,-1577.50,110.90}},
	{"Commerce",                    {1370.80,-1577.50,-89.00,1463.90,-1384.90,110.90}},
	{"Commerce",                    {1463.90,-1577.50,-89.00,1667.90,-1430.80,110.90}},
	{"Commerce",                    {1583.50,-1722.20,-89.00,1758.90,-1577.50,110.90}},
	{"Commerce",                    {1667.90,-1577.50,-89.00,1812.60,-1430.80,110.90}},
	{"Conference Center",           {1046.10,-1804.20,-89.00,1323.90,-1722.20,110.90}},
	{"Conference Center",           {1073.20,-1842.20,-89.00,1323.90,-1804.20,110.90}},
	{"Cranberry Station",           {-2007.80,56.30,0.00,-1922.00,224.70,100.00}},
	{"Creek",                       {2749.90,1937.20,-89.00,2921.60,2669.70,110.90}},
	{"Dillimore",                   {580.70,-674.80,-9.50,861.00,-404.70,200.00}},
	{"Doherty",                     {-2270.00,-324.10,-0.00,-1794.90,-222.50,200.00}},
	{"Doherty",                     {-2173.00,-222.50,-0.00,-1794.90,265.20,200.00}},
	{"Downtown",                    {-1982.30,744.10,-6.10,-1871.70,1274.20,200.00}},
	{"Downtown",                    {-1871.70,1176.40,-4.50,-1620.30,1274.20,200.00}},
	{"Downtown",                    {-1700.00,744.20,-6.10,-1580.00,1176.50,200.00}},
	{"Downtown",                    {-1580.00,744.20,-6.10,-1499.80,1025.90,200.00}},
	{"Downtown",                    {-2078.60,578.30,-7.60,-1499.80,744.20,200.00}},
	{"Downtown",                    {-1993.20,265.20,-9.10,-1794.90,578.30,200.00}},
	{"Downtown Los Santos",         {1463.90,-1430.80,-89.00,1724.70,-1290.80,110.90}},
	{"Downtown Los Santos",         {1724.70,-1430.80,-89.00,1812.60,-1250.90,110.90}},
	{"Downtown Los Santos",         {1463.90,-1290.80,-89.00,1724.70,-1150.80,110.90}},
	{"Downtown Los Santos",         {1370.80,-1384.90,-89.00,1463.90,-1170.80,110.90}},
	{"Downtown Los Santos",         {1724.70,-1250.90,-89.00,1812.60,-1150.80,110.90}},
	{"Downtown Los Santos",         {1370.80,-1170.80,-89.00,1463.90,-1130.80,110.90}},
	{"Downtown Los Santos",         {1378.30,-1130.80,-89.00,1463.90,-1026.30,110.90}},
	{"Downtown Los Santos",         {1391.00,-1026.30,-89.00,1463.90,-926.90,110.90}},
	{"Downtown Los Santos",         {1507.50,-1385.20,110.90,1582.50,-1325.30,335.90}},
	{"East Beach",                  {2632.80,-1852.80,-89.00,2959.30,-1668.10,110.90}},
	{"East Beach",                  {2632.80,-1668.10,-89.00,2747.70,-1393.40,110.90}},
	{"East Beach",                  {2747.70,-1668.10,-89.00,2959.30,-1498.60,110.90}},
	{"East Beach",                  {2747.70,-1498.60,-89.00,2959.30,-1120.00,110.90}},
	{"East Los Santos",             {2421.00,-1628.50,-89.00,2632.80,-1454.30,110.90}},
	{"East Los Santos",             {2222.50,-1628.50,-89.00,2421.00,-1494.00,110.90}},
	{"East Los Santos",             {2266.20,-1494.00,-89.00,2381.60,-1372.00,110.90}},
	{"East Los Santos",             {2381.60,-1494.00,-89.00,2421.00,-1454.30,110.90}},
	{"East Los Santos",             {2281.40,-1372.00,-89.00,2381.60,-1135.00,110.90}},
	{"East Los Santos",             {2381.60,-1454.30,-89.00,2462.10,-1135.00,110.90}},
	{"East Los Santos",             {2462.10,-1454.30,-89.00,2581.70,-1135.00,110.90}},
	{"Easter Basin",                {-1794.90,249.90,-9.10,-1242.90,578.30,200.00}},
	{"Easter Basin",                {-1794.90,-50.00,-0.00,-1499.80,249.90,200.00}},
	{"Easter Bay Airport",          {-1499.80,-50.00,-0.00,-1242.90,249.90,200.00}},
	{"Easter Bay Airport",          {-1794.90,-730.10,-3.00,-1213.90,-50.00,200.00}},
	{"Easter Bay Airport",          {-1213.90,-730.10,0.00,-1132.80,-50.00,200.00}},
	{"Easter Bay Airport",          {-1242.90,-50.00,0.00,-1213.90,578.30,200.00}},
	{"Easter Bay Airport",          {-1213.90,-50.00,-4.50,-947.90,578.30,200.00}},
	{"Easter Bay Airport",          {-1315.40,-405.30,15.40,-1264.40,-209.50,25.40}},
	{"Easter Bay Airport",          {-1354.30,-287.30,15.40,-1315.40,-209.50,25.40}},
	{"Easter Bay Airport",          {-1490.30,-209.50,15.40,-1264.40,-148.30,25.40}},
	{"Easter Bay Chemicals",        {-1132.80,-768.00,0.00,-956.40,-578.10,200.00}},
	{"Easter Bay Chemicals",        {-1132.80,-787.30,0.00,-956.40,-768.00,200.00}},
	{"El Castillo del Diablo",      {-464.50,2217.60,0.00,-208.50,2580.30,200.00}},
	{"El Castillo del Diablo",      {-208.50,2123.00,-7.60,114.00,2337.10,200.00}},
	{"El Castillo del Diablo",      {-208.50,2337.10,0.00,8.40,2487.10,200.00}},
	{"El Corona",                   {1812.60,-2179.20,-89.00,1970.60,-1852.80,110.90}},
	{"El Corona",                   {1692.60,-2179.20,-89.00,1812.60,-1842.20,110.90}},
	{"El Quebrados",                {-1645.20,2498.50,0.00,-1372.10,2777.80,200.00}},
	{"Esplanade East",              {-1620.30,1176.50,-4.50,-1580.00,1274.20,200.00}},
	{"Esplanade East",              {-1580.00,1025.90,-6.10,-1499.80,1274.20,200.00}},
	{"Esplanade East",              {-1499.80,578.30,-79.60,-1339.80,1274.20,20.30}},
	{"Esplanade North",             {-2533.00,1358.90,-4.50,-1996.60,1501.20,200.00}},
	{"Esplanade North",             {-1996.60,1358.90,-4.50,-1524.20,1592.50,200.00}},
	{"Esplanade North",             {-1982.30,1274.20,-4.50,-1524.20,1358.90,200.00}},
	{"Fallen Tree",                 {-792.20,-698.50,-5.30,-452.40,-380.00,200.00}},
	{"Fallow Bridge",               {434.30,366.50,0.00,603.00,555.60,200.00}},
	{"Fern Ridge",                  {508.10,-139.20,0.00,1306.60,119.50,200.00}},
	{"Financial",                   {-1871.70,744.10,-6.10,-1701.30,1176.40,300.00}},
	{"Fisher's Lagoon",             {1916.90,-233.30,-100.00,2131.70,13.80,200.00}},
	{"Flint Intersection",          {-187.70,-1596.70,-89.00,17.00,-1276.60,110.90}},
	{"Flint Range",                 {-594.10,-1648.50,0.00,-187.70,-1276.60,200.00}},
	{"Fort Carson",                 {-376.20,826.30,-3.00,123.70,1220.40,200.00}},
	{"Foster Valley",               {-2270.00,-430.20,-0.00,-2178.60,-324.10,200.00}},
	{"Foster Valley",               {-2178.60,-599.80,-0.00,-1794.90,-324.10,200.00}},
	{"Foster Valley",               {-2178.60,-1115.50,0.00,-1794.90,-599.80,200.00}},
	{"Foster Valley",               {-2178.60,-1250.90,0.00,-1794.90,-1115.50,200.00}},
	{"Frederick Bridge",            {2759.20,296.50,0.00,2774.20,594.70,200.00}},
	{"Gant Bridge",                 {-2741.40,1659.60,-6.10,-2616.40,2175.10,200.00}},
	{"Gant Bridge",                 {-2741.00,1490.40,-6.10,-2616.40,1659.60,200.00}},
	{"Ganton",                      {2222.50,-1852.80,-89.00,2632.80,-1722.30,110.90}},
	{"Ganton",                      {2222.50,-1722.30,-89.00,2632.80,-1628.50,110.90}},
	{"Garcia",                      {-2411.20,-222.50,-0.00,-2173.00,265.20,200.00}},
	{"Garcia",                      {-2395.10,-222.50,-5.30,-2354.00,-204.70,200.00}},
	{"Garver Bridge",               {-1339.80,828.10,-89.00,-1213.90,1057.00,110.90}},
	{"Garver Bridge",               {-1213.90,950.00,-89.00,-1087.90,1178.90,110.90}},
	{"Garver Bridge",               {-1499.80,696.40,-179.60,-1339.80,925.30,20.30}},
	{"Glen Park",                   {1812.60,-1449.60,-89.00,1996.90,-1350.70,110.90}},
	{"Glen Park",                   {1812.60,-1100.80,-89.00,1994.30,-973.30,110.90}},
	{"Glen Park",                   {1812.60,-1350.70,-89.00,2056.80,-1100.80,110.90}},
	{"Green Palms",                 {176.50,1305.40,-3.00,338.60,1520.70,200.00}},
	{"Greenglass College",          {964.30,1044.60,-89.00,1197.30,1203.20,110.90}},
	{"Greenglass College",          {964.30,930.80,-89.00,1166.50,1044.60,110.90}},
	{"Hampton Barns",               {603.00,264.30,0.00,761.90,366.50,200.00}},
	{"Hankypanky Point",            {2576.90,62.10,0.00,2759.20,385.50,200.00}},
	{"Harry Gold Parkway",          {1777.30,863.20,-89.00,1817.30,2342.80,110.90}},
	{"Hashbury",                    {-2593.40,-222.50,-0.00,-2411.20,54.70,200.00}},
	{"Hilltop Farm",                {967.30,-450.30,-3.00,1176.70,-217.90,200.00}},
	{"Hunter Quarry",               {337.20,710.80,-115.20,860.50,1031.70,203.70}},
	{"Idlewood",                    {1812.60,-1852.80,-89.00,1971.60,-1742.30,110.90}},
	{"Idlewood",                    {1812.60,-1742.30,-89.00,1951.60,-1602.30,110.90}},
	{"Idlewood",                    {1951.60,-1742.30,-89.00,2124.60,-1602.30,110.90}},
	{"Idlewood",                    {1812.60,-1602.30,-89.00,2124.60,-1449.60,110.90}},
	{"Idlewood",                    {2124.60,-1742.30,-89.00,2222.50,-1494.00,110.90}},
	{"Idlewood",                    {1971.60,-1852.80,-89.00,2222.50,-1742.30,110.90}},
	{"Jefferson",                   {1996.90,-1449.60,-89.00,2056.80,-1350.70,110.90}},
	{"Jefferson",                   {2124.60,-1494.00,-89.00,2266.20,-1449.60,110.90}},
	{"Jefferson",                   {2056.80,-1372.00,-89.00,2281.40,-1210.70,110.90}},
	{"Jefferson",                   {2056.80,-1210.70,-89.00,2185.30,-1126.30,110.90}},
	{"Jefferson",                   {2185.30,-1210.70,-89.00,2281.40,-1154.50,110.90}},
	{"Jefferson",                   {2056.80,-1449.60,-89.00,2266.20,-1372.00,110.90}},
	{"Julius Thruway East",         {2623.10,943.20,-89.00,2749.90,1055.90,110.90}},
	{"Julius Thruway East",         {2685.10,1055.90,-89.00,2749.90,2626.50,110.90}},
	{"Julius Thruway East",         {2536.40,2442.50,-89.00,2685.10,2542.50,110.90}},
	{"Julius Thruway East",         {2625.10,2202.70,-89.00,2685.10,2442.50,110.90}},
	{"Julius Thruway North",        {2498.20,2542.50,-89.00,2685.10,2626.50,110.90}},
	{"Julius Thruway North",        {2237.40,2542.50,-89.00,2498.20,2663.10,110.90}},
	{"Julius Thruway North",        {2121.40,2508.20,-89.00,2237.40,2663.10,110.90}},
	{"Julius Thruway North",        {1938.80,2508.20,-89.00,2121.40,2624.20,110.90}},
	{"Julius Thruway North",        {1534.50,2433.20,-89.00,1848.40,2583.20,110.90}},
	{"Julius Thruway North",        {1848.40,2478.40,-89.00,1938.80,2553.40,110.90}},
	{"Julius Thruway North",        {1704.50,2342.80,-89.00,1848.40,2433.20,110.90}},
	{"Julius Thruway North",        {1377.30,2433.20,-89.00,1534.50,2507.20,110.90}},
	{"Julius Thruway South",        {1457.30,823.20,-89.00,2377.30,863.20,110.90}},
	{"Julius Thruway South",        {2377.30,788.80,-89.00,2537.30,897.90,110.90}},
	{"Julius Thruway West",         {1197.30,1163.30,-89.00,1236.60,2243.20,110.90}},
	{"Julius Thruway West",         {1236.60,2142.80,-89.00,1297.40,2243.20,110.90}},
	{"Juniper Hill",                {-2533.00,578.30,-7.60,-2274.10,968.30,200.00}},
	{"Juniper Hollow",              {-2533.00,968.30,-6.10,-2274.10,1358.90,200.00}},
	{"K.A.C.C. Military Fuels",     {2498.20,2626.50,-89.00,2749.90,2861.50,110.90}},
	{"Kincaid Bridge",              {-1339.80,599.20,-89.00,-1213.90,828.10,110.90}},
	{"Kincaid Bridge",              {-1213.90,721.10,-89.00,-1087.90,950.00,110.90}},
	{"Kincaid Bridge",              {-1087.90,855.30,-89.00,-961.90,986.20,110.90}},
	{"King's",                      {-2329.30,458.40,-7.60,-1993.20,578.30,200.00}},
	{"King's",                      {-2411.20,265.20,-9.10,-1993.20,373.50,200.00}},
	{"King's",                      {-2253.50,373.50,-9.10,-1993.20,458.40,200.00}},
	{"LVA Freight Depot",           {1457.30,863.20,-89.00,1777.40,1143.20,110.90}},
	{"LVA Freight Depot",           {1375.60,919.40,-89.00,1457.30,1203.20,110.90}},
	{"LVA Freight Depot",           {1277.00,1087.60,-89.00,1375.60,1203.20,110.90}},
	{"LVA Freight Depot",           {1315.30,1044.60,-89.00,1375.60,1087.60,110.90}},
	{"LVA Freight Depot",           {1236.60,1163.40,-89.00,1277.00,1203.20,110.90}},
	{"Las Barrancas",               {-926.10,1398.70,-3.00,-719.20,1634.60,200.00}},
	{"Las Brujas",                  {-365.10,2123.00,-3.00,-208.50,2217.60,200.00}},
	{"Las Colinas",                 {1994.30,-1100.80,-89.00,2056.80,-920.80,110.90}},
	{"Las Colinas",                 {2056.80,-1126.30,-89.00,2126.80,-920.80,110.90}},
	{"Las Colinas",                 {2185.30,-1154.50,-89.00,2281.40,-934.40,110.90}},
	{"Las Colinas",                 {2126.80,-1126.30,-89.00,2185.30,-934.40,110.90}},
	{"Las Colinas",                 {2747.70,-1120.00,-89.00,2959.30,-945.00,110.90}},
	{"Las Colinas",                 {2632.70,-1135.00,-89.00,2747.70,-945.00,110.90}},
	{"Las Colinas",                 {2281.40,-1135.00,-89.00,2632.70,-945.00,110.90}},
	{"Las Payasadas",               {-354.30,2580.30,2.00,-133.60,2816.80,200.00}},
	{"Las Venturas Airport",        {1236.60,1203.20,-89.00,1457.30,1883.10,110.90}},
	{"Las Venturas Airport",        {1457.30,1203.20,-89.00,1777.30,1883.10,110.90}},
	{"Las Venturas Airport",        {1457.30,1143.20,-89.00,1777.40,1203.20,110.90}},
	{"Las Venturas Airport",        {1515.80,1586.40,-12.50,1729.90,1714.50,87.50}},
	{"Last Dime Motel",             {1823.00,596.30,-89.00,1997.20,823.20,110.90}},
	{"Leafy Hollow",                {-1166.90,-1856.00,0.00,-815.60,-1602.00,200.00}},
	{"Liberty City",                {-1000.00,400.00,1300.00,-700.00,600.00,1400.00}},
	{"Lil' Probe Inn",              {-90.20,1286.80,-3.00,153.80,1554.10,200.00}},
	{"Linden Side",                 {2749.90,943.20,-89.00,2923.30,1198.90,110.90}},
	{"Linden Station",              {2749.90,1198.90,-89.00,2923.30,1548.90,110.90}},
	{"Linden Station",              {2811.20,1229.50,-39.50,2861.20,1407.50,60.40}},
	{"Little Mexico",               {1701.90,-1842.20,-89.00,1812.60,-1722.20,110.90}},
	{"Little Mexico",               {1758.90,-1722.20,-89.00,1812.60,-1577.50,110.90}},
	{"Los Flores",                  {2581.70,-1454.30,-89.00,2632.80,-1393.40,110.90}},
	{"Los Flores",                  {2581.70,-1393.40,-89.00,2747.70,-1135.00,110.90}},
	{"Los Santos International",    {1249.60,-2394.30,-89.00,1852.00,-2179.20,110.90}},
	{"Los Santos International",    {1852.00,-2394.30,-89.00,2089.00,-2179.20,110.90}},
	{"Los Santos International",    {1382.70,-2730.80,-89.00,2201.80,-2394.30,110.90}},
	{"Los Santos International",    {1974.60,-2394.30,-39.00,2089.00,-2256.50,60.90}},
	{"Los Santos International",    {1400.90,-2669.20,-39.00,2189.80,-2597.20,60.90}},
	{"Los Santos International",    {2051.60,-2597.20,-39.00,2152.40,-2394.30,60.90}},
	{"Marina",                      {647.70,-1804.20,-89.00,851.40,-1577.50,110.90}},
	{"Marina",                      {647.70,-1577.50,-89.00,807.90,-1416.20,110.90}},
	{"Marina",                      {807.90,-1577.50,-89.00,926.90,-1416.20,110.90}},
	{"Market",                      {787.40,-1416.20,-89.00,1072.60,-1310.20,110.90}},
	{"Market",                      {952.60,-1310.20,-89.00,1072.60,-1130.80,110.90}},
	{"Market",                      {1072.60,-1416.20,-89.00,1370.80,-1130.80,110.90}},
	{"Market",                      {926.90,-1577.50,-89.00,1370.80,-1416.20,110.90}},
	{"Market Station",              {787.40,-1410.90,-34.10,866.00,-1310.20,65.80}},
	{"Martin Bridge",               {-222.10,293.30,0.00,-122.10,476.40,200.00}},
	{"Missionary Hill",             {-2994.40,-811.20,0.00,-2178.60,-430.20,200.00}},
	{"Montgomery",                  {1119.50,119.50,-3.00,1451.40,493.30,200.00}},
	{"Montgomery",                  {1451.40,347.40,-6.10,1582.40,420.80,200.00}},
	{"Montgomery Intersection",     {1546.60,208.10,0.00,1745.80,347.40,200.00}},
	{"Montgomery Intersection",     {1582.40,347.40,0.00,1664.60,401.70,200.00}},
	{"Mulholland",                  {1414.00,-768.00,-89.00,1667.60,-452.40,110.90}},
	{"Mulholland",                  {1281.10,-452.40,-89.00,1641.10,-290.90,110.90}},
	{"Mulholland",                  {1269.10,-768.00,-89.00,1414.00,-452.40,110.90}},
	{"Mulholland",                  {1357.00,-926.90,-89.00,1463.90,-768.00,110.90}},
	{"Mulholland",                  {1318.10,-910.10,-89.00,1357.00,-768.00,110.90}},
	{"Mulholland",                  {1169.10,-910.10,-89.00,1318.10,-768.00,110.90}},
	{"Mulholland",                  {768.60,-954.60,-89.00,952.60,-860.60,110.90}},
	{"Mulholland",                  {687.80,-860.60,-89.00,911.80,-768.00,110.90}},
	{"Mulholland",                  {737.50,-768.00,-89.00,1142.20,-674.80,110.90}},
	{"Mulholland",                  {1096.40,-910.10,-89.00,1169.10,-768.00,110.90}},
	{"Mulholland",                  {952.60,-937.10,-89.00,1096.40,-860.60,110.90}},
	{"Mulholland",                  {911.80,-860.60,-89.00,1096.40,-768.00,110.90}},
	{"Mulholland",                  {861.00,-674.80,-89.00,1156.50,-600.80,110.90}},
	{"Mulholland Intersection",     {1463.90,-1150.80,-89.00,1812.60,-768.00,110.90}},
	{"North Rock",                  {2285.30,-768.00,0.00,2770.50,-269.70,200.00}},
	{"Ocean Docks",                 {2373.70,-2697.00,-89.00,2809.20,-2330.40,110.90}},
	{"Ocean Docks",                 {2201.80,-2418.30,-89.00,2324.00,-2095.00,110.90}},
	{"Ocean Docks",                 {2324.00,-2302.30,-89.00,2703.50,-2145.10,110.90}},
	{"Ocean Docks",                 {2089.00,-2394.30,-89.00,2201.80,-2235.80,110.90}},
	{"Ocean Docks",                 {2201.80,-2730.80,-89.00,2324.00,-2418.30,110.90}},
	{"Ocean Docks",                 {2703.50,-2302.30,-89.00,2959.30,-2126.90,110.90}},
	{"Ocean Docks",                 {2324.00,-2145.10,-89.00,2703.50,-2059.20,110.90}},
	{"Ocean Flats",                 {-2994.40,277.40,-9.10,-2867.80,458.40,200.00}},
	{"Ocean Flats",                 {-2994.40,-222.50,-0.00,-2593.40,277.40,200.00}},
	{"Ocean Flats",                 {-2994.40,-430.20,-0.00,-2831.80,-222.50,200.00}},
	{"Octane Springs",              {338.60,1228.50,0.00,664.30,1655.00,200.00}},
	{"Old Venturas Strip",          {2162.30,2012.10,-89.00,2685.10,2202.70,110.90}},
	{"Palisades",                   {-2994.40,458.40,-6.10,-2741.00,1339.60,200.00}},
	{"Palomino Creek",              {2160.20,-149.00,0.00,2576.90,228.30,200.00}},
	{"Paradiso",                    {-2741.00,793.40,-6.10,-2533.00,1268.40,200.00}},
	{"Pershing Square",             {1440.90,-1722.20,-89.00,1583.50,-1577.50,110.90}},
	{"Pilgrim",                     {2437.30,1383.20,-89.00,2624.40,1783.20,110.90}},
	{"Pilgrim",                     {2624.40,1383.20,-89.00,2685.10,1783.20,110.90}},
	{"Pilson Intersection",         {1098.30,2243.20,-89.00,1377.30,2507.20,110.90}},
	{"Pirates in Men's Pants",      {1817.30,1469.20,-89.00,2027.40,1703.20,110.90}},
	{"Playa del Seville",           {2703.50,-2126.90,-89.00,2959.30,-1852.80,110.90}},
	{"Prickle Pine",                {1534.50,2583.20,-89.00,1848.40,2863.20,110.90}},
	{"Prickle Pine",                {1117.40,2507.20,-89.00,1534.50,2723.20,110.90}},
	{"Prickle Pine",                {1848.40,2553.40,-89.00,1938.80,2863.20,110.90}},
	{"Prickle Pine",                {1938.80,2624.20,-89.00,2121.40,2861.50,110.90}},
	{"Queens",                      {-2533.00,458.40,0.00,-2329.30,578.30,200.00}},
	{"Queens",                      {-2593.40,54.70,0.00,-2411.20,458.40,200.00}},
	{"Queens",                      {-2411.20,373.50,0.00,-2253.50,458.40,200.00}},
	{"Randolph Industrial Estate",  {1558.00,596.30,-89.00,1823.00,823.20,110.90}},
	{"Redsands East",               {1817.30,2011.80,-89.00,2106.70,2202.70,110.90}},
	{"Redsands East",               {1817.30,2202.70,-89.00,2011.90,2342.80,110.90}},
	{"Redsands East",               {1848.40,2342.80,-89.00,2011.90,2478.40,110.90}},
	{"Redsands West",               {1236.60,1883.10,-89.00,1777.30,2142.80,110.90}},
	{"Redsands West",               {1297.40,2142.80,-89.00,1777.30,2243.20,110.90}},
	{"Redsands West",               {1377.30,2243.20,-89.00,1704.50,2433.20,110.90}},
	{"Redsands West",               {1704.50,2243.20,-89.00,1777.30,2342.80,110.90}},
	{"Regular Tom",                 {-405.70,1712.80,-3.00,-276.70,1892.70,200.00}},
	{"Richman",                     {647.50,-1118.20,-89.00,787.40,-954.60,110.90}},
	{"Richman",                     {647.50,-954.60,-89.00,768.60,-860.60,110.90}},
	{"Richman",                     {225.10,-1369.60,-89.00,334.50,-1292.00,110.90}},
	{"Richman",                     {225.10,-1292.00,-89.00,466.20,-1235.00,110.90}},
	{"Richman",                     {72.60,-1404.90,-89.00,225.10,-1235.00,110.90}},
	{"Richman",                     {72.60,-1235.00,-89.00,321.30,-1008.10,110.90}},
	{"Richman",                     {321.30,-1235.00,-89.00,647.50,-1044.00,110.90}},
	{"Richman",                     {321.30,-1044.00,-89.00,647.50,-860.60,110.90}},
	{"Richman",                     {321.30,-860.60,-89.00,687.80,-768.00,110.90}},
	{"Richman",                     {321.30,-768.00,-89.00,700.70,-674.80,110.90}},
	{"Robada Intersection",         {-1119.00,1178.90,-89.00,-862.00,1351.40,110.90}},
	{"Roca Escalante",              {2237.40,2202.70,-89.00,2536.40,2542.50,110.90}},
	{"Roca Escalante",              {2536.40,2202.70,-89.00,2625.10,2442.50,110.90}},
	{"Rockshore East",              {2537.30,676.50,-89.00,2902.30,943.20,110.90}},
	{"Rockshore West",              {1997.20,596.30,-89.00,2377.30,823.20,110.90}},
	{"Rockshore West",              {2377.30,596.30,-89.00,2537.30,788.80,110.90}},
	{"Rodeo",                       {72.60,-1684.60,-89.00,225.10,-1544.10,110.90}},
	{"Rodeo",                       {72.60,-1544.10,-89.00,225.10,-1404.90,110.90}},
	{"Rodeo",                       {225.10,-1684.60,-89.00,312.80,-1501.90,110.90}},
	{"Rodeo",                       {225.10,-1501.90,-89.00,334.50,-1369.60,110.90}},
	{"Rodeo",                       {334.50,-1501.90,-89.00,422.60,-1406.00,110.90}},
	{"Rodeo",                       {312.80,-1684.60,-89.00,422.60,-1501.90,110.90}},
	{"Rodeo",                       {422.60,-1684.60,-89.00,558.00,-1570.20,110.90}},
	{"Rodeo",                       {558.00,-1684.60,-89.00,647.50,-1384.90,110.90}},
	{"Rodeo",                       {466.20,-1570.20,-89.00,558.00,-1385.00,110.90}},
	{"Rodeo",                       {422.60,-1570.20,-89.00,466.20,-1406.00,110.90}},
	{"Rodeo",                       {466.20,-1385.00,-89.00,647.50,-1235.00,110.90}},
	{"Rodeo",                       {334.50,-1406.00,-89.00,466.20,-1292.00,110.90}},
	{"Royal Casino",                {2087.30,1383.20,-89.00,2437.30,1543.20,110.90}},
	{"San Andreas Sound",           {2450.30,385.50,-100.00,2759.20,562.30,200.00}},
	{"Santa Flora",                 {-2741.00,458.40,-7.60,-2533.00,793.40,200.00}},
	{"Santa Maria Beach",           {342.60,-2173.20,-89.00,647.70,-1684.60,110.90}},
	{"Santa Maria Beach",           {72.60,-2173.20,-89.00,342.60,-1684.60,110.90}},
	{"Shady Cabin",                 {-1632.80,-2263.40,-3.00,-1601.30,-2231.70,200.00}},
	{"Shady Creeks",                {-1820.60,-2643.60,-8.00,-1226.70,-1771.60,200.00}},
	{"Shady Creeks",                {-2030.10,-2174.80,-6.10,-1820.60,-1771.60,200.00}},
	{"Sobell Rail Yards",           {2749.90,1548.90,-89.00,2923.30,1937.20,110.90}},
	{"Spinybed",                    {2121.40,2663.10,-89.00,2498.20,2861.50,110.90}},
	{"Starfish Casino",             {2437.30,1783.20,-89.00,2685.10,2012.10,110.90}},
	{"Starfish Casino",             {2437.30,1858.10,-39.00,2495.00,1970.80,60.90}},
	{"Starfish Casino",             {2162.30,1883.20,-89.00,2437.30,2012.10,110.90}},
	{"Temple",                      {1252.30,-1130.80,-89.00,1378.30,-1026.30,110.90}},
	{"Temple",                      {1252.30,-1026.30,-89.00,1391.00,-926.90,110.90}},
	{"Temple",                      {1252.30,-926.90,-89.00,1357.00,-910.10,110.90}},
	{"Temple",                      {952.60,-1130.80,-89.00,1096.40,-937.10,110.90}},
	{"Temple",                      {1096.40,-1130.80,-89.00,1252.30,-1026.30,110.90}},
	{"Temple",                      {1096.40,-1026.30,-89.00,1252.30,-910.10,110.90}},
	{"The Camel's Toe",             {2087.30,1203.20,-89.00,2640.40,1383.20,110.90}},
	{"The Clown's Pocket",          {2162.30,1783.20,-89.00,2437.30,1883.20,110.90}},
	{"The Emerald Isle",            {2011.90,2202.70,-89.00,2237.40,2508.20,110.90}},
	{"The Farm",                    {-1209.60,-1317.10,114.90,-908.10,-787.30,251.90}},
	{"The Four Dragons Casino",     {1817.30,863.20,-89.00,2027.30,1083.20,110.90}},
	{"The High Roller",             {1817.30,1283.20,-89.00,2027.30,1469.20,110.90}},
	{"The Mako Span",               {1664.60,401.70,0.00,1785.10,567.20,200.00}},
	{"The Panopticon",              {-947.90,-304.30,-1.10,-319.60,327.00,200.00}},
	{"The Pink Swan",               {1817.30,1083.20,-89.00,2027.30,1283.20,110.90}},
	{"The Sherman Dam",             {-968.70,1929.40,-3.00,-481.10,2155.20,200.00}},
	{"The Strip",                   {2027.40,863.20,-89.00,2087.30,1703.20,110.90}},
	{"The Strip",                   {2106.70,1863.20,-89.00,2162.30,2202.70,110.90}},
	{"The Strip",                   {2027.40,1783.20,-89.00,2162.30,1863.20,110.90}},
	{"The Strip",                   {2027.40,1703.20,-89.00,2137.40,1783.20,110.90}},
	{"The Visage",                  {1817.30,1863.20,-89.00,2106.70,2011.80,110.90}},
	{"The Visage",                  {1817.30,1703.20,-89.00,2027.40,1863.20,110.90}},
	{"Unity Station",               {1692.60,-1971.80,-20.40,1812.60,-1932.80,79.50}},
	{"Valle Ocultado",              {-936.60,2611.40,2.00,-715.90,2847.90,200.00}},
	{"Verdant Bluffs",              {930.20,-2488.40,-89.00,1249.60,-2006.70,110.90}},
	{"Verdant Bluffs",              {1073.20,-2006.70,-89.00,1249.60,-1842.20,110.90}},
	{"Verdant Bluffs",              {1249.60,-2179.20,-89.00,1692.60,-1842.20,110.90}},
	{"Verdant Meadows",             {37.00,2337.10,-3.00,435.90,2677.90,200.00}},
	{"Verona Beach",                {647.70,-2173.20,-89.00,930.20,-1804.20,110.90}},
	{"Verona Beach",                {930.20,-2006.70,-89.00,1073.20,-1804.20,110.90}},
	{"Verona Beach",                {851.40,-1804.20,-89.00,1046.10,-1577.50,110.90}},
	{"Verona Beach",                {1161.50,-1722.20,-89.00,1323.90,-1577.50,110.90}},
	{"Verona Beach",                {1046.10,-1722.20,-89.00,1161.50,-1577.50,110.90}},
	{"Vinewood",                    {787.40,-1310.20,-89.00,952.60,-1130.80,110.90}},
	{"Vinewood",                    {787.40,-1130.80,-89.00,952.60,-954.60,110.90}},
	{"Vinewood",                    {647.50,-1227.20,-89.00,787.40,-1118.20,110.90}},
	{"Vinewood",                    {647.70,-1416.20,-89.00,787.40,-1227.20,110.90}},
	{"Whitewood Estates",           {883.30,1726.20,-89.00,1098.30,2507.20,110.90}},
	{"Whitewood Estates",           {1098.30,1726.20,-89.00,1197.30,2243.20,110.90}},
	{"Willowfield",                 {1970.60,-2179.20,-89.00,2089.00,-1852.80,110.90}},
	{"Willowfield",                 {2089.00,-2235.80,-89.00,2201.80,-1989.90,110.90}},
	{"Willowfield",                 {2089.00,-1989.90,-89.00,2324.00,-1852.80,110.90}},
	{"Willowfield",                 {2201.80,-2095.00,-89.00,2324.00,-1989.90,110.90}},
	{"Willowfield",                 {2541.70,-1941.40,-89.00,2703.50,-1852.80,110.90}},
	{"Willowfield",                 {2324.00,-2059.20,-89.00,2541.70,-1852.80,110.90}},
	{"Willowfield",                 {2541.70,-2059.20,-89.00,2703.50,-1941.40,110.90}},
	{"Yellow Bell Station",         {1377.40,2600.40,-21.90,1492.40,2687.30,78.00}}
};

static const Float:FisherJobSellLS[][3] =
{
	{728.3644,-1502.7001,-0.4665},
	{2110.0696,-107.6240,-0.3337}
};
static const Float:FisherJobSellSF[][3] =
{
	{-1560.2140,1251.3232,-0.3421},
	{-2956.2959,498.1174,0.0605}
};
static const Float:FisherJobSellLV[][3] =
{
	{1628.6328,565.5170,-0.5068},
	{-652.9754,866.7454,-0.4746}
};

static const Float:FisherJobSellAll[][3] =
{
    {728.3644,-1502.7001,-0.4665},
	{2110.0696,-107.6240,-0.3337},
    {-1560.2140,1251.3232,-0.3421},
	{-2956.2959,498.1174,0.0605},
	{1628.6328,565.5170,-0.5068},
	{-652.9754,866.7454,-0.4746}
};

static const Float:LumberTreeZone[][4] =
{
    {1098.4734, 980.0427, 380.9460, 227.4715},//(maxx,minx,maxy,miny)
	{1471.7699, 1450.0593, 49.6959, -140.075},
	{-365.9265, -583.1401, -1290.4375, -1389.2458},
	{-2169.6094, -2224.7881, -2198.4277, -2239.5076},
	{-1501.3745, -1649.1490, 2282.0403, 2125.7041}
};

static const Float:ForestZone[][4] =
{
	{-1235.5297, -2885.8521, 2964.4587, 2193.4832},//(maxx,minx,maxy,miny)
	{-2137.051, -2826.046, -245.2354, -1611.547},
	{-268.5911, -2639.2, -1062.687, -2335.575},
	{-93.423, -1611.547, -630.6053, -992.6194},
	{-338.6584, -957.5858, 467.115, -502.1487},
	{2720.945, -326.9805, 350.3363, -93.423},
	{2884.435, 105.1009, -46.7115, -537.1823}
};

static const Float:DesertZone[][4] =
{
    {899.1964, -303.6248, 1669.936, 840.807},
	{875.8406, 513.8265, 2861.08, 1529.802},
	{560.538, -887.5186, 2861.08, 2335.575},
	{-151.8124, -490.4708, 2464.032, 1354.634}
};

static const Float:CityZone[][4] =
{
    {2685.911, 1237.855, 2826.046, 1015.975},
	{2837.724, 210.2018, -735.7062, -1564.835},
	{-1985.239, -2779.334, 1144.432, 23.35575}
};

static const Float:HerbYellowZone[][4] =
{
    {-2347.253, -2720.945, 2791.012, 2732.623},
	{-1342.956, -1646.58, -2020.272, -2160.407},
	{-1027.653, -1132.754, 2090.34, 2008.595}
};

static const Float:HerbGreenZone[][4] =
{
    {-2148.729, -2639.2, -1039.331, -1448.057},
	{2592.488, 1798.393, -128.4566, -513.8265}
};

static const Float:HerbWhiteZone[][4] =
{
    {-618.9274, -817.4513, -1448.057, -1751.681},
	{2195.441, 1845.104, 256.9133, -105.1009},
	{-1483.09, -1564.835, -1810.071, -1973.561},
	{-1214.499, -1366.311, 2253.83, 2090.34}
};

static const Float:HerbRedZone[][4] =
{
    {-712.3504, -1202.821, -1062.687, -1506.446},
	{1226.177, 548.8602, 455.4371, 151.8124}
};

static const Float:PandaZone[][4] =
{
    {805.3547, 744.5093, -1216.028, -1306.826},
	{-2278.802, -2394.683, 313.9693, 96.99627},
	{1396.395, 1107.436, 2838.682, 2726.508}
};

static const Float:SwampZone[][4] =
{
    {-643.8810, -881.4095, -1931.7344, -2079.1746}
};

// Function S

// For actor sync
_CreateDynamicActor(modelid, Float:x, Float:y, Float:z, Float:r, invulnerable = 1, Float:health = 100.0, worldid = -1, interiorid = -1, playerid = -1, Float:streamdistance = STREAMER_ACTOR_SD, areaid = STREAMER_TAG_AREA:-1, priority = 0){
	new dA = CreateDynamicActor(modelid, x, y, z, r, invulnerable, health, worldid, interiorid, playerid, streamdistance, areaid, priority);

	SetGVarFloat("dAtrX", x, dA);
	SetGVarFloat("dAtrY", y, dA);
	SetGVarFloat("dAtrZ", z, dA);

	SetGVarFloat("dAtrA", r, dA);

	return dA;
}

// For team
PutPlayerToTeam(playerid, teamID){
	SetGVarInt("pTeam", teamID, playerid);
	SetPlayerTeam(playerid, teamID);
}

stock IsComponentidCompatible(modelid, componentid)
{//by Dimi
    if( componentid == 1025 || componentid == 1073 || componentid == 1074 || componentid == 1075 || componentid == 1076 ||
                componentid == 1077 || componentid == 1078 || componentid == 1079 || componentid == 1080 || componentid == 1081 ||
        componentid == 1082 || componentid == 1083 || componentid == 1084 || componentid == 1085 || componentid == 1096 ||
        componentid == 1097 || componentid == 1098 || componentid == 1087 || componentid == 1086 )
	{
        return componentid;
    }

    switch( modelid )
	{
        case 400: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1013 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 ) return componentid;
        case 401: if( componentid == 1005 || componentid == 1004 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 114 || componentid == 1020 || componentid == 1019 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 402: if( componentid == 1008 || componentid == 1009 || componentid == 1010 ) return componentid;
        case 404: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1002 || componentid == 1016 || componentid == 1000 || componentid == 1017 || componentid == 1007) return componentid;
        case 405: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1014 || componentid == 1023 || componentid == 1000) return componentid;
        case 409: if( componentid == 1009 ) return componentid;
        case 410: if( componentid == 1019 || componentid == 1021 || componentid == 1020 || componentid == 1013 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 411: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 412: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 415: if( componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 418: if( componentid == 1020 || componentid == 1021 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1002 || componentid == 1016) return componentid;
        case 419: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 420: if( componentid == 1005 || componentid == 1004 || componentid == 1021 || componentid == 1019 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1003) return componentid;
        case 421: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1014 || componentid == 1023 || componentid == 1016 || componentid == 1000) return componentid;
        case 422: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1017 || componentid == 1007) return componentid;
        case 426: if( componentid == 1005 || componentid == 1004 || componentid == 1021 || componentid == 1019 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1003) return componentid;
        case 429: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 436: if( componentid == 1020 || componentid == 1021 || componentid == 1022 || componentid == 1019 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 438: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 439: if( componentid == 1003 || componentid == 1023 || componentid == 1001 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1017 || componentid == 1007 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1013) return componentid;
        case 442: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 445: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 451: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 458: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 466: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 467: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 474: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 475: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 477: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1017 || componentid == 1007) return componentid;
        case 478: if( componentid == 1005 || componentid == 1004 || componentid == 1012 || componentid == 1020 || componentid == 1021 || componentid == 1022 || componentid == 1013 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 479: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 480: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 489: if( componentid == 1005 || componentid == 1004 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1013 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1002 || componentid == 1016 || componentid == 1000) return componentid;
        case 491: if( componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1014 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 492: if( componentid == 1005 || componentid == 1004 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1016 || componentid == 1000) return componentid;
        case 496: if( componentid == 1006 || componentid == 1017 || componentid == 1007 || componentid == 1011 || componentid == 1019 || componentid == 1023 || componentid == 1001 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1003 || componentid == 1002 || componentid == 1142 || componentid == 1143 || componentid == 1020) return componentid;
        case 500: if( componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1013 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 506: if( componentid == 1009) return componentid;
        case 507: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 516: if( componentid == 1004 || componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1002 || componentid == 1015 || componentid == 1016 || componentid == 1000 || componentid == 1017 || componentid == 1007) return componentid;
        case 517: if( componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1002 || componentid == 1023 || componentid == 1016 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 518: if( componentid == 1005 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1018 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 526: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 527: if( componentid == 1021 || componentid == 1020 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1014 || componentid == 1015 || componentid == 1017 || componentid == 1007) return componentid;
        case 529: if( componentid == 1012 || componentid == 1011 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 533: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 534: if( componentid == 1126 || componentid == 1127 || componentid == 1179 || componentid == 1185 || componentid == 1100 || componentid == 1123 || componentid == 1125 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1180 || componentid == 1178 || componentid == 1101 || componentid == 1122 || componentid == 1124 || componentid == 1106) return componentid;
        case 535: if( componentid == 1109 || componentid == 1110 || componentid == 1113 || componentid == 1114 || componentid == 1115 || componentid == 1116 || componentid == 1117 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1120 || componentid == 1118 || componentid == 1121 || componentid == 1119) return componentid;
        case 536: if( componentid == 1104 || componentid == 1105 || componentid == 1182 || componentid == 1181 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1184 || componentid == 1183 || componentid == 1128 || componentid == 1103 || componentid == 1107 || componentid == 1108) return componentid;
        case 540: if( componentid == 1004 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1017 || componentid == 1007) return componentid;
        case 541: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 542: if( componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1014 || componentid == 1015) return componentid;
        case 545: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 546: if( componentid == 1004 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1019 || componentid == 1018 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1002 || componentid == 1001 || componentid == 1023 || componentid == 1017 || componentid == 1007) return componentid;
        case 547: if( componentid == 1142 || componentid == 1143 || componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1016 || componentid == 1003 || componentid == 1000) return componentid;
        case 549: if( componentid == 1012 || componentid == 1011 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 550: if( componentid == 1005 || componentid == 1004 || componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1003) return componentid;
        case 551: if( componentid == 1005 || componentid == 1020 || componentid == 1021 || componentid == 1019 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1002 || componentid == 1023 || componentid == 1016 || componentid == 1003) return componentid;
        case 555: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 558: if( componentid == 1092 || componentid == 1089 || componentid == 1166 || componentid == 1165 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1168 || componentid == 1167 || componentid == 1088 || componentid == 1091 || componentid == 1164 || componentid == 1163 || componentid == 1094 || componentid == 1090 || componentid == 1095 || componentid == 1093) return componentid;
        case 559: if( componentid == 1065 || componentid == 1066 || componentid == 1160 || componentid == 1173 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1159 || componentid == 1161 || componentid == 1162 || componentid == 1158 || componentid == 1067 || componentid == 1068 || componentid == 1071 || componentid == 1069 || componentid == 1072 || componentid == 1070 || componentid == 1009) return componentid;
        case 560: if( componentid == 1028 || componentid == 1029 || componentid == 1169 || componentid == 1170 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1141 || componentid == 1140 || componentid == 1032 || componentid == 1033 || componentid == 1138 || componentid == 1139 || componentid == 1027 || componentid == 1026 || componentid == 1030 || componentid == 1031) return componentid;
        case 561: if( componentid == 1064 || componentid == 1059 || componentid == 1155 || componentid == 1157 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1154 || componentid == 1156 || componentid == 1055 || componentid == 1061 || componentid == 1058 || componentid == 1060 || componentid == 1062 || componentid == 1056 || componentid == 1063 || componentid == 1057) return componentid;
        case 562: if( componentid == 1034 || componentid == 1037 || componentid == 1171 || componentid == 1172 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1149 || componentid == 1148 || componentid == 1038 || componentid == 1035 || componentid == 1147 || componentid == 1146 || componentid == 1040 || componentid == 1036 || componentid == 1041 || componentid == 1039) return componentid;
        case 565: if( componentid == 1046 || componentid == 1045 || componentid == 1153 || componentid == 1152 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1150 || componentid == 1151 || componentid == 1054 || componentid == 1053 || componentid == 1049 || componentid == 1050 || componentid == 1051 || componentid == 1047 || componentid == 1052 || componentid == 1048) return componentid;
        case 566: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 567: if( componentid == 1129 || componentid == 1132 || componentid == 1189 || componentid == 1188 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1187 || componentid == 1186 || componentid == 1130 || componentid == 1131 || componentid == 1102 || componentid == 1133) return componentid;
        case 575: if( componentid == 1044 || componentid == 1043 || componentid == 1174 || componentid == 1175 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1176 || componentid == 1177 || componentid == 1099 || componentid == 1042) return componentid;
        case 576: if( componentid == 1136 || componentid == 1135 || componentid == 1191 || componentid == 1190 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1192 || componentid == 1193 || componentid == 1137 || componentid == 1134) return componentid;
        case 579: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 580: if( componentid == 1020 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1017 || componentid == 1007) return componentid;
        case 585: if( componentid == 1142 || componentid == 1143 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1003 || componentid == 1017 || componentid == 1007) return componentid;
        case 587: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 589: if( componentid == 1005 || componentid == 1004 || componentid == 1144 || componentid == 1145 || componentid == 1020 || componentid == 1018 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1024 || componentid == 1013 || componentid == 1006 || componentid == 1016 || componentid == 1000 || componentid == 1017 || componentid == 1007) return componentid;
        case 600: if( componentid == 1005 || componentid == 1004 || componentid == 1020 || componentid == 1022 || componentid == 1018 || componentid == 1013 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1017 || componentid == 1007) return componentid;
        case 602: if( componentid == 1008 || componentid == 1009 || componentid == 1010) return componentid;
        case 603: if( componentid == 1144 || componentid == 1145 || componentid == 1142 || componentid == 1143 || componentid == 1020 || componentid == 1019 || componentid == 1018 || componentid == 1024 || componentid == 1008 || componentid == 1009 || componentid == 1010 || componentid == 1006 || componentid == 1001 || componentid == 1023 || componentid == 1017 || componentid == 1007) return componentid;
    }
    return false;
}

stock GetCompatibleTypeAmount(modelid, type)
{
	new i, j, k;
	for(j = sizeof(VehTune); i < j; i++)
	{
	    if(VehTune[i][vtType] == type)
	    {
	        if(IsComponentidCompatible(modelid, VehTune[i][vtID]) > 0)
	        {
	            k ++;
	        }
	    }
	}
	return k;
}
//防止玩家滥用Spectate功能
stock Float:GetPlayerDistanceFromPointEx(playerid, Float:X, Float:Y, Float:Z)
{
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING) return 6000.0;
	else return GetPlayerDistanceFromPoint(playerid, X, Y, Z);
}

stock IsPlayerInRangeOfPointEx(playerid, Float:range, Float:x, Float:y, Float:z)
{
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING) return false;
	else return IsPlayerInRangeOfPoint(playerid, range, x, y, z);
}

stock bool:IsPlayerOnSWOcean(playerid)//玩家是否在西南海上
{
	static Float:px, Float:py, Float:pz, Float:depth, Float:playerdepth;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	GetPlayerPos(playerid, px, py, pz);
	if((px < -1366.311 && py < 2989.536) && depth > 5.0 && pz < 5.0) return true;
	else return false;
}

stock bool:IsPlayerOnSEOcean(playerid)//玩家是否在东南海上
{
	static Float:px, Float:py, Float:pz, Float:depth, Float:playerdepth;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	GetPlayerPos(playerid, px, py, pz);
	if((px > -1004.297 && py < -478.7929) && depth > 5.0 && pz < 5.0) return true;
	else return false;
}

stock bool:IsPlayerOnOcean(playerid)//玩家是否在海上
{
	static Float:px, Float:py, Float:pz, Float:depth, Float:playerdepth;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	GetPlayerPos(playerid, px, py, pz);
	if(depth > 5.0 && pz < 5.0) return true;
	else return false;
}

stock bool:IsPlayerOnInnerOcean(playerid)//玩家是否在内海上
{
	static Float:px, Float:py, Float:pz, Float:depth, Float:playerdepth;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	GetPlayerPos(playerid, px, py, pz);
	if((-2615.0000 < px < 2650.0000 && -747.0000 < py < 2814.0000) && depth > 5.0 && pz < 5.0) return true;
	else return false;
}

stock bool:IsPlayerOnSwamp(playerid)//玩家是否在沼泽上
{
	static Float:px, Float:py, Float:pz, Float:depth, Float:playerdepth;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	GetPlayerPos(playerid, px, py, pz);
	if((-829.0000 < px < -665.0000 && -1740.0000 < py < -1470.0000) && depth > 5.0 && pz < 5.0) return true;
	else return false;
}

stock bool:IsPlayerInMineZone(playerid)//玩家是否在矿场内
{
	new Float:px, Float:py, Float:pz;
	GetPlayerPos(playerid, px, py, pz);
	if((413.4371 < px < 750.7062) && (798.2322 < py < 992.076)) return true;
	else if((-1905.4371 < px < -1775.7062) && (-1706.956 < py < -1594.821)) return true;
	else if((2082.122 < px < 2185.784) && (-2029.263 < py < -1969.786)) return true;
	else return false;
}

stock bool:IsPlayerInForestZone(playerid)
{
	new Float:px, Float:py, Float:pz;
	GetPlayerPos(playerid, px, py, pz);
	for(new i; i < sizeof(ForestZone); i++)
	{
		if((ForestZone[i][0] > px > ForestZone[i][1]) && (ForestZone[i][2] > py > ForestZone[i][3]) && pz < 40.0)
		{
			return true;
		}
	}
	return false;
}

static const Float:MatWar_Vehicle[][4] =
{
    {2578.5410,1982.0063,10.9107,90.1954},
	{2284.8669,2050.3989,10.9140,269.5366},
	{1672.1283,2139.5698,10.9059,89.7399},
	{1352.0669,2695.1191,10.9141,0.4339},
	{1110.7273,1838.6991,10.9140,2.8480},
	{2300.8022,1451.0269,10.9156,90.2308},
	{1928.8962,697.9729,10.9141,358.6574},
	{1058.4690,1470.4215,5.9141,309.7330},
	{-81.1454,971.4492,19.5432,184.6263},
	{-22.3494,2330.6702,23.7092,270.5854},
	{-538.8921,2608.6843,52.9836,90.1876},
	{-1464.4908,2646.3564,55.4045,264.6972},
	{-1812.7942,2042.9149,8.2985,155.9528},
	{-2188.3528,293.3272,34.6857,179.2427},
	{-2090.1240,855.9508,69.1311,89.2229},
	{-1699.4918,1036.7324,44.7795,272.4632},
	{-1780.5422,1293.5105,22.1359,265.5034},
	{-2521.3154,1229.0793,36.9969,28.9011},
	{-2533.7322,-21.7655,15.9974,272.5484},
	{-1944.4860,-1084.6188,30.3464,181.0625},
	{-1862.9647,-1684.4427,21.3186,307.1299},
	{-1104.0762,-1620.9213,75.9357,269.3903},
	{-444.1405,-66.8782,58.7329,358.2074},
	{670.8404,-445.9725,15.9081,270.9047},
	{1119.3259,-866.8636,42.7770,271.9487},
	{2429.5518,-1240.6687,23.9475,175.4330},
	{2792.9211,-1875.3169,9.4202,179.1268},
	{2475.5403,-2241.6763,13.1154,90.1379},
	{482.0738,-1765.2229,5.1084,90.7885},
	{744.8953,-1335.7012,13.1063,1.7502},
	{1292.2715,-1251.6119,13.1154,358.7964},
	{2429.1108,-1774.6775,13.1154,269.2862}
};

static const Float:MatWar_Drop[][3] =
{
    {2425.8469,1952.7693,6.0156},
	{1512.6222,2217.3184,10.8203},
	{1297.1285,2805.1047,10.9688},
	{1432.0098,1383.6864,10.8203},
	{2448.0845,1273.9017,10.8203},
	{2699.3638,845.8808,9.0475},
	{1089.8658,1075.0408,10.8359},
	{620.1198,873.0418,-42.9609},
	{243.6176,2535.7769,16.8047},
	{-785.6686,2428.9246,157.1581},
	{-1262.6715,2279.4443,132.7380},
	{-991.3228,1483.9297,46.8106},
	{-2102.6729,165.2421,35.0940},
	{-1560.4775,1108.5332,7.1875},
	{-2571.2427,658.1896,27.8125},
	{-2349.3945,-259.0406,42.6693},
	{-2164.9128,-420.8883,34.9042},
	{-2392.0444,-2179.6528,33.2891},
	{-1312.0714,-2147.9626,23.6854},
	{-1093.1938,-992.0935,129.2188},
	{-188.3494,37.6040,3.1172},
	{900.1759,7.0664,91.2362},
	{1449.9023,-114.4051,19.7869},
	{2137.0232,-75.0089,2.8231},
	{2565.0195,-640.9746,136.6425},
	{1902.0664,-1217.6080,17.8557},
	{2891.1821,-2042.6237,4.9830},
	{2008.9637,-2543.5688,13.1154},
	{1506.1163,-2544.8262,13.1133},
	{1259.3418,-2021.0685,59.4387},
	{837.3662,-2059.7017,12.4357},
	{241.0523,-1813.3701,4.2729},
	{843.2795,-1102.0964,23.8709},
	{1952.5780,-1371.6936,19.6484},
	{1128.1255,-1448.7688,15.3654}
};

static const Float:MatWar_NPC[][3] =
{
    {1499.0342,2081.1338,10.8203},
	{1361.6521,2657.2700,10.8203},
	{1647.7816,958.0035,10.7339},
	{2646.9614,1087.9357,10.8203},
	{2849.6245,2402.7449,10.8203},
	{-2825.7466,1308.3816,7.1016},
	{-1638.6914,1417.2772,7.1875},
	{-2103.7610,237.9263,35.5288},
	{-2276.0901,72.5390,35.1641},
	{-2757.3164,-303.1581,7.0391},
	{-1725.6914,295.3466,7.1875},
	{381.6616,-2077.7173,7.8359},
	{930.6616,-1114.9618,24.1255},
	{989.0924,-916.9191,42.1797},
	{1556.3020,-1016.0511,23.9063},
	{1259.6414,-2023.5217,59.4302},
	{1764.0238,-1896.5651,13.5627},
	{2673.2375,-1689.3173,9.3823}
};

static const MatWarSkin[][3] =
{
	{100,247,248},
	{124,125,126},
	{121,122,123},
	{117,118,120},
	{111,112,113}
};

static const Float:TVPos[][3] =
{
    {304.8052,304.1017,1003.3047},
	{2306.4854,-1207.6205,1049.0234},
	{-50.4893,1410.9125,1084.4297},
	{2282.3674,-1137.6410,1050.8984},
	{226.1040,1292.8903,1082.1406},
	{2264.6348,-1137.4714,1050.6328},
	{2209.5308,-1077.0686,1050.4844},
	{2234.7087,-1105.1919,1050.8828},
	{2242.7842,-1067.2327,1049.0234},
	{2510.8904,-1725.8890,778.6371},
	{328.6100,1489.9462,1084.4375},
	{326.1428,1488.9244,1084.4448},
	{2455.5796,-1703.4188,1013.5078},
	{264.4115,1238.4465,1084.2653},
	{-63.7938,1360.4443,1080.2185},
	{224.6523,1158.8326,1082.6168},
	{218.6754,1153.7288,1082.6094},
	{258.3689,1293.2838,1080.2578},
	{266.5648,1285.8646,1080.2578},
	{267.1992,1294.7776,1080.2578},
	{384.2447,1468.2501,1080.1875},
	{375.2120,1463.0897,1080.1875},
	{302.3782,1479.0806,1080.2578},
	{289.7708,1488.7205,1080.2578},
	{32.6181,1417.0491,1084.4297},
	{25.5125,1416.6249,1084.4370},
	{436.7221,1406.7755,1084.3120},
	{2255.7791,-1212.6425,1049.0234},
	{2191.4451,-1201.2375,1049.0234},
	{2187.8123,-1215.9460,1049.0234},
	{2323.6589,-1018.9704,1050.2109},
	{-278.9083,1453.5129,1084.3672},
	{-265.2449,1451.1293,1084.3745},
	{476.5402,1405.4161,1080.2645},
	{500.5476,1399.1940,1080.2578},
	{488.3430,1417.7117,1084.3654},
	{484.1059,1403.3666,1084.4063},
	{234.3048,1119.5323,1080.9922},
	{243.0862,1106.6248,1080.9922},
	{241.5131,1117.0345,1084.9922},
	{236.6080,1085.1229,1084.2344},
	{223.4651,1084.9939,1084.1985},
	{243.4500,1030.9552,1084.0078},
	{238.3060,1046.3990,1084.0052},
	{228.4779,1046.6095,1084.0106},
	{243.3742,1018.2090,1084.0132},
	{236.4737,1026.9287,1088.3104},
	{140.2805,1380.8993,1083.8672},
	{152.1052,1367.7642,1083.8594},
	{1774.5939,-1568.0056,1742.4524},
	{1560.7208,-1355.1267,1226.4853}
};
static TVPick[sizeof(TVPos)+1];

static const Float:BedPos[][3] =
{
    {345.3888,302.4088,999.9382},
	{308.9965,301.6534,1003.3047},
	{270.0237,307.2422,1000.0204},
	{2285.2666,-1135.2299,1051.5265},
	{232.1426,1287.2772,1082.8839},
	{2262.5459,-1141.5497,1051.3297},
	{2209.7983,-1071.5797,1051.3308},
	{2206.3992,-1071.6963,1051.3308},
	{2229.7393,-1106.2703,1051.5967},
	{2241.6101,-1080.8708,1049.5619},
	{2243.9995,-1080.9369,1049.5619},
	{2511.4595,-1719.3839,779.2051},
	{333.4259,1489.0819,1085.1224},
	{260.0410,1254.2042,1085.0099},
	{227.4878,1148.9689,1083.2633},
	{266.3387,1288.3929,1080.9987},
	{374.7115,1460.2646,1080.7437},
	{291.4643,1477.8489,1081.0051},
	{302.5671,1476.2258,1080.9683},
	{2358.4536,-1132.8041,1051.4023},
	{2361.9888,-1122.5228,1051.5746},
	{20.2308,1417.4906,1085.1404},
	{16.0583,1406.0112,1085.1503},
	{437.4640,1398.3866,1084.9213},
	{455.9858,1404.3115,1084.9852},
	{2258.1016,-1223.7579,1049.7917},
	{2188.1370,-1209.6995,1049.7090},
	{2198.6179,-1213.7380,1049.5664},
	{2187.9700,-1219.7792,1049.7371},
	{2326.3682,-1007.9090,1055.2461},
	{-275.7158,1448.5945,1089.4170},
	{479.5542,1408.2256,1081.0056},
	{488.1669,1422.2819,1085.0627},
	{479.4336,1403.1774,1085.1855},
	{226.6894,1109.7592,1081.7094},
	{245.0633,1118.8109,1085.7146},
	{239.5973,1109.6971,1085.7544},
	{231.1904,1109.7609,1085.7340},
	{246.8869,1075.3654,1084.8210},
	{246.9196,1082.6151,1084.8210},
	{238.6201,1083.1724,1088.4515},
	{228.4570,1050.4755,1084.4961},
	{238.2671,1050.4312,1084.4961},
	{237.2457,1029.8713,1088.8088},
	{241.4218,1034.8420,1088.7943},
	{2308.9004,-1141.7783,1055.1511},
	{2337.7590,-1136.0581,1054.8242},
	{140.3345,1386.5303,1084.5214},
	{135.0844,1385.2947,1089.0525},
	{147.2026,1385.3135,1089.0525},
	{152.4421,1376.9603,1089.0525},
	{737.3594,1436.7712,1103.4363},
	{735.3572,1436.8003,1103.4363},
	{952.4783,-43.6437,1001.8738},
	{944.9789,-41.5000,1001.7659},
	{245.4652,302.4045,1000.0068},
	{2268.8972,-1134.1964,1051.2765},
	{335.4219,1478.8671,1085.0668},
	{1554.2634,-1339.2118,1226.9831},
	{1261.1011,-1547.4736,2063.3430}
};
static BedPick[sizeof(BedPos)+1];

static const Float:ChairPos[][3] =
{
    {306.2191,304.3997,1003.3047},
    {305.0792,302.2521,1003.3047},
    {273.4522,304.9855,999.1484},
    {2306.6162,-1209.3925,1049.0234},
    {2309.8223,-1209.5116,1049.0234},
    {2315.5842,-1208.8135,1049.0234},
    {2318.1245,-1209.0999,1049.0234},
    {-50.7962,1408.6483,1084.4297},
    {-50.7543,1406.1770,1084.4297},
    {-47.8917,1404.2982,1084.4370},
    {-46.0313,1406.1663,1084.4297},
    {2284.9153,-1138.5413,1050.8984},
    {222.3006,1290.1377,1082.1328},
    {223.2258,1292.9244,1082.1406},
    {2260.0825,-1142.1002,1050.6328},
    {2261.6885,-1134.2487,1050.6328},
    {2264.6555,-1134.3746,1050.6328},
    {2205.4568,-1077.2388,1050.4844},
    {2203.5720,-1071.6177,1050.4766},
    {2233.5608,-1104.7844,1050.8828},
    {2242.8716,-1072.5647,1049.0234},
    {2241.3579,-1068.6204,1049.0234},
    {2244.4094,-1068.6979,1049.0234},
    {323.3409,1489.2292,1084.4435},
    {320.5117,1486.9524,1084.4434},
    {322.2414,1483.6127,1084.4408},
    {332.2704,1484.8024,1084.4387},
    {-35.2447,1409.5754,1084.4370},
    {2277.5962,-1139.8884,1050.8984},
    {217.6288,1288.1084,1082.1406},
    {2266.7024,-1141.4755,1050.6328},
    {2238.1370,-1068.1128,1049.0234},
    {2448.8870,-1702.2085,1013.5078},
    {2448.8181,-1699.6914,1013.5078},
    {2451.2083,-1699.0277,1013.5078},
    {2457.0076,-1693.8507,1013.5078},
    {260.1134,1240.9668,1084.2578},
    {264.6286,1240.6158,1084.2578},
    {252.6314,1248.7314,1084.2578},
    {-62.7513,1355.9999,1080.2109},
    {-65.6933,1366.0059,1080.2109},
    {-67.8534,1366.0155,1080.2109},
    {-69.8949,1366.0077,1080.2109},
    {-70.5219,1362.8579,1080.2109},
    {220.3678,1159.0731,1082.6094},
    {218.5522,1157.2522,1082.6094},
    {222.2590,1155.7283,1082.6094},
    {256.4273,1286.4404,1080.2578},
    {254.5820,1288.3802,1080.2578},
    {258.5107,1290.4451,1080.2578},
    {256.6515,1293.3644,1080.2578},
    {250.3086,1293.5101,1080.2578},
    {378.5558,1464.1230,1080.1875},
    {378.5962,1466.5201,1080.1875},
    {384.1961,1464.5885,1080.1875},
    {296.1162,1487.3105,1080.2578},
    {292.7656,1489.1321,1080.2578},
    {289.5432,1486.3594,1080.2578},
    {292.3257,1484.5204,1080.2578},
    {285.1192,1482.2561,1080.2578},
    {2371.1448,-1131.7260,1050.8750},
    {2371.2246,-1134.1150,1050.8750},
    {2370.9529,-1123.3470,1050.8750},
    {2372.6890,-1122.0724,1050.8750},
    {2374.1165,-1123.5829,1050.8750},
    {30.8359,1410.5520,1084.4297},
    {32.6724,1412.6117,1084.4297},
    {30.8704,1417.4070,1084.4297},
    {27.9294,1414.9108,1084.4370},
    {444.9337,1412.9749,1084.3047},
    {452.9533,1419.0162,1084.3080},
    {455.4454,1419.0314,1084.3080},
    {458.4341,1417.3379,1084.3080},
    {458.4356,1414.8136,1084.3080},
    {2260.3323,-1212.1992,1049.0234},
    {2258.5300,-1208.4280,1049.0234},
    {2254.3577,-1217.5598,1049.0234},
    {2194.9583,-1205.6531,1049.0234},
    {2191.4114,-1205.8550,1049.0234},
    {2185.4951,-1203.2299,1049.0308},
    {2185.4937,-1204.6445,1049.0234},
    {2183.8184,-1202.8120,1049.0308},
    {2193.9819,-1223.0970,1049.0234},
    {2326.8762,-1021.7144,1050.2109},
    {2325.0720,-1024.2147,1050.2109},
    {2319.3994,-1008.5460,1050.2109},
    {2314.2695,-1012.1447,1050.2109},
    {2315.7288,-1009.6722,1050.2109},
    {2328.5015,-1011.3467,1050.2109},
    {2327.0940,-1010.2708,1050.2109},
    {2324.9072,-1010.2696,1050.2109},
    {2323.2466,-1014.3602,1054.7111},
    {2329.8008,-1012.5222,1054.7188},
    {2329.7317,-1009.5638,1054.7188},
    {2323.6282,-1009.9114,1054.7188},
    {2321.2908,-1005.3114,1054.7188},
    {-273.6002,1451.7172,1084.3745},
    {-275.7936,1447.9138,1084.3672},
    {-279.2049,1449.5366,1084.3672},
    {-279.2051,1451.8201,1084.3672},
    {479.8220,1399.6538,1080.2578},
    {480.2017,1405.4008,1080.2645},
    {483.1835,1405.3973,1080.2645},
    {485.0370,1401.5212,1080.2578},
    {488.9401,1421.5781,1080.2645},
    {243.1001,1109.0137,1080.9922},
    {244.8046,1106.3187,1080.9922},
    {246.7361,1108.6956,1080.9922},
    {235.3328,1119.2887,1084.9922},
    {220.1081,1074.4716,1084.1953},
    {234.7154,1085.1979,1084.2344},
    {232.2670,1082.3333,1084.2344},
    {231.6579,1080.3596,1084.2344},
    {236.5347,1077.7987,1084.2344},
    {225.6365,1087.3882,1087.8281},
    {236.5211,1030.5487,1084.0078},
    {239.6638,1030.5492,1084.0078},
    {243.4463,1027.9753,1084.0078},
    {241.1150,1024.9124,1084.0078},
    {238.5971,1040.5822,1088.3053},
    {2325.9185,-1141.5131,1050.4922},
    {2324.4492,-1140.1343,1050.4990},
    {2322.8328,-1141.4810,1050.4922},
    {2333.9580,-1140.4515,1050.7101},
    {2335.2593,-1138.1270,1050.7031},
    {149.3910,1367.7875,1083.8594},
    {152.2714,1369.8998,1083.8594},
    {152.2276,1373.5415,1083.8594},
    {149.4573,1375.3759,1083.8594},
    {359.7144,173.6209,1008.3893},
    {354.4190,168.7333,1008.3808},
    {355.4953,178.4164,1008.3782},
    {355.2823,182.5645,1008.3787},
    {355.4816,186.7480,1008.3782},
    {355.4863,162.7994,1008.3782},
    {372.6860,183.1888,1008.3828},
    {374.1652,184.1170,1008.3893},
    {373.3938,185.4674,1008.3893},
    {372.2627,184.8316,1008.3893},
    {363.9760,210.4181,1008.3828},
    {361.3171,211.8229,1008.3828},
    {357.9742,209.1031,1008.3828},
    {355.0741,208.0969,1008.3828},
    {359.5557,203.7528,1008.3828},
    {361.0678,200.9694,1008.3828},
    {363.4048,201.0514,1008.3828},
    {358.0772,201.1567,1008.3828},
    {355.2295,201.2179,1008.3828},
    {354.1950,204.7380,1008.3828},
    {372.6906,173.6780,1019.9844},
    {371.0325,171.8736,1019.9844},
    {358.7038,177.8602,1019.9844},
    {354.1490,177.8301,1019.9844},
    {356.3471,162.3974,1019.9844},
    {350.7552,167.6551,1019.9844},
    {340.6550,177.8469,1019.9844},
    {336.1811,177.8358,1019.9844},
    {359.8415,156.3868,1025.7964},
    {362.4044,171.7667,1025.7891},
    {365.7939,167.2581,1025.7891},
    {352.0898,167.2225,1025.7891},
    {355.1073,151.9738,1025.7891},
    {357.8959,157.0789,1025.7891},
    {348.3639,164.2117,1025.7891},
    {-2284.6243,-2292.7559,1999.0031},
    {-2284.5693,-2290.6738,1999.0031},
    {-2287.0056,-2286.8533,1999.0031},
    {-2290.2488,-2289.7190,1999.0031},
    {-2297.8945,-2290.6184,1999.0031},
    {-2293.6934,-2287.0745,1999.0031},
    {-2292.2200,-2291.5227,1999.0031},
    {-2302.6597,-2298.2048,1999.0031},
    {-2304.0332,-2298.3201,1999.0031},
    {-2305.7217,-2298.0977,1999.0031},
    {-2306.7727,-2299.6062,1999.0104},
    {-2304.1316,-2300.4331,1999.0031},
    {-2302.6199,-2300.4263,1999.0031},
    {-2297.4436,-2305.0771,1999.0031},
    {-2297.4128,-2308.5769,1999.0031},
    {-3.3035,8.8066,1498.6715},
    {-3.1904,5.9338,1498.6715},
    {-6.2401,6.0006,1498.6715},
    {-6.6173,8.9623,1498.6715},
    {-9.3864,6.0547,1498.6715},
    {-9.3232,8.9547,1498.6715},
    {-7.1845,13.5729,1498.6715},
    {-9.1289,12.7150,1498.6715},
    {-9.6261,13.7941,1498.6715},
    {-9.9122,16.1840,1498.6715},
    {-10.0532,18.6923,1498.6715},
    {-5.6845,19.2824,1498.6715},
    {-5.6194,17.5618,1498.6715},
    {-5.6017,15.1183,1498.6715},
    {-2165.8501,644.0930,1057.5938},
    {-2166.8430,645.2964,1057.5938},
    {760.2958,1438.6633,1102.7031},
    {760.0867,1437.1039,1102.7031},
    {756.6669,1436.7563,1102.7031},
    {757.1187,1438.2998,1102.7031},
    {751.7753,1438.0239,1102.7031},
    {751.1732,1442.9806,1102.7031},
    {749.8095,1442.9884,1102.7031},
    {747.4274,1442.1134,1102.7031},
    {746.8845,1442.5970,1102.7031},
    {935.7075,-9.6983,1000.9297},
    {940.1328,-4.2606,1000.9297},
    {940.1440,-1.9439,1000.9297},
    {946.9274,-3.2872,1000.9297},
    {944.8691,4.7674,1000.9297},
    {963.5019,-57.9578,1001.1246},
    {961.3021,-60.8369,1001.1172},
    {957.3907,-58.4995,1001.1246},
    {957.5412,-45.9282,1001.1172},
    {961.4047,-43.9560,1001.1172},
    {968.0820,-45.7477,1001.1172},
    {968.7748,-46.8150,1001.1172},
    {968.0189,-49.1372,1001.1172},
    {950.2250,-59.7183,1001.1172},
    {-791.7290,500.7597,1371.7490},
    {-779.8091,496.4761,1376.1953},
    {-779.6995,494.1891,1376.1875},
    {-779.6191,491.6664,1376.1953},
    {953.7700,1010.2598,1976.7859},
    {3973.5383,4013.2800,2988.0356},
	{2512.4060,-1726.9469,778.6371},
	{2512.7603,-1727.3468,778.6371},
	{2512.7446,-1731.1976,778.6371},
	{2511.6057,-1731.1976,778.6371},
	{2510.6799,-1731.1976,778.6371},
	{985.2710,-1525.8333,2200.7690},
	{979.6291,-1526.0417,2200.7690},
	{979.3474,-1523.9651,2200.7690},
	{979.3602,-1519.6650,2200.7690},
	{983.4711,-1520.3302,2200.7690},
	{1548.1523,-1351.8301,1226.4853},
	{1548.0004,-1350.0983,1226.4853},
	{1548.0417,-1359.0332,1226.4853},
	{1548.1161,-1360.7699,1226.4853},
	{1554.9619,-1355.4600,1226.4853},
	{1548.4165,-1368.2361,1226.4853},
	{1551.3350,-1368.6237,1226.4853},
	{1554.6864,-1364.9762,1226.4853},
	{1556.0614,-1364.9004,1226.4853},
	{1561.2395,-1366.6523,1226.4853},
	{1563.1689,-1366.5734,1226.4853},
	{1564.8408,-1367.4984,1226.4853},
	{1563.4276,-1368.5148,1226.4853},
	{1561.3580,-1368.4757,1226.4853},
	{1561.0448,-1357.3801,1226.4853},
	{1563.2399,-1355.1571,1226.4853},
	{1561.1820,-1352.7191,1226.4853},
	{1563.0414,-1341.7485,1226.4853},
	{1562.5370,-1339.8080,1226.4853},
	{1549.5558,-1341.0319,1226.4853},
	{1248.1320,-1550.7938,2063.2781},
	{1245.9780,-1550.7208,2063.2781},
	{1250.6129,-1550.7715,2063.2781},
	{1246.3376,-1541.4370,2062.9138},
	{1248.1882,-1541.5792,2062.6479},
	{1250.1062,-1541.5564,2062.6479},
	{1262.1581,-1550.7708,2062.6479},
	{1254.9344,-1554.2549,2062.6479},
	{254.0991,1034.3671,1084.7374}
};
static ChairPick[sizeof(ChairPos)+1];

static const Float:RadioPos[][3] =
{
    {303.0158,302.5440,1004.5970},
    {248.5340,301.5948,999.1484},
    {2311.2097,-1207.5189,1049.0234},
    {-47.9024,1411.0833,1084.4297},
    {2282.0420,-1135.9063,1050.8984},
    {232.9865,1290.0260,1082.1406},
    {320.7027,1478.6807,1084.4452},
    {2451.9404,-1705.9604,1013.5078},
    {-57.5667,1364.6975,1080.2109},
    {228.4735,1158.8733,1082.6094},
    {263.5601,1288.6121,1080.2578},
    {378.4193,1453.2422,1080.1875},
    {371.7932,1465.0581,1080.1875},
    {301.4736,1472.0742,1080.2578},
    {292.3991,1472.9630,1080.2640},
    {302.3807,1485.1282,1080.2578},
    {2360.6450,-1130.8229,1050.8750},
    {2370.0195,-1125.9513,1050.8750},
    {17.9892,1407.9407,1084.4297},
    {31.1520,1404.0431,1084.4297},
    {23.6393,1418.4727,1084.4297},
    {439.8078,1406.7803,1084.3120},
    {450.5948,1414.0292,1084.3080},
    {2261.9563,-1208.6343,1049.0308},
    {2194.7205,-1201.1506,1049.0234},
    {2326.9893,-1018.0863,1050.2178},
    {-266.7509,1447.5149,1084.3672},
    {-270.7624,1447.6951,1088.8672},
    {500.1326,1399.1940,1080.2578},
    {482.3943,1399.6127,1080.2578},
    {483.9596,1408.3875,1080.2601},
    {488.2357,1418.7067,1084.3672},
    {240.1793,1119.3243,1080.9922},
    {223.4641,1082.6880,1084.1979},
    {236.4878,1082.4698,1084.2415},
    {243.7679,1078.7263,1084.1946},
    {234.7280,1083.3569,1087.8203},
    {241.1715,1018.1494,1084.0203},
    {236.3886,1048.1581,1084.0067},
    {226.5372,1048.2129,1084.0078},
    {235.3030,1027.6877,1088.3147},
    {240.3285,1032.9467,1088.3125},
    {147.5554,1373.5364,1083.8594},
    {148.5588,1376.5592,1088.3672},
    {148.7277,1383.3914,1088.3672},
    {138.3630,1383.4077,1088.3672},
    {-2166.2373,641.7695,1057.5873},
    {750.5601,1437.1901,1102.7031},
    {746.2112,1437.1761,1102.7031}
};
static RadioPick[sizeof(RadioPos)+1];

static const Float:StovePos[][3] =
{
    {300.5839,303.4521,1003.5391},
    {2320.4248,-1211.7650,1049.0234},
    {-51.3935,1397.9640,1084.4297},
    {2277.7129,-1135.3750,1050.8984},
    {217.6423,1292.0737,1082.1406},
    {2512.4998,-1723.1954,778.6371},
    {320.7649,1480.4541,1084.4404},
    {2447.9595,-1689.4210,1013.5078},
    {264.3858,1248.9348,1084.2578},
    {-58.1016,1360.3420,1080.2109},
    {228.3532,1156.6848,1082.6094},
    {267.2348,1293.5875,1080.2578},
    {381.8150,1452.8136,1080.1875},
    {302.0278,1478.8666,1080.2578},
    {2373.8516,-1133.3768,1050.8750},
    {26.0899,1404.1639,1084.4370},
    {436.5125,1410.1764,1084.3047},
    {2248.4844,-1207.5610,1049.0234},
    {2182.2957,-1205.4279,1049.0234},
    {2313.3247,-1008.1951,1050.2109},
    {-265.7532,1447.5236,1084.3672},
    {500.7628,1399.6685,1080.2578},
    {235.6924,1119.7858,1080.9922},
    {224.8491,1085.1375,1084.2073},
    {238.1405,1018.1478,1084.0298},
    {2336.3821,-1143.5090,1050.7031},
    {-2160.2336,639.9995,1057.5861},
    {-786.2900,506.2685,1367.3672},
    {-789.9830,500.4206,1367.3672},
	{1553.7247,-1368.7606,1226.4853}
};
static StovePick[sizeof(StovePos)+1];

static const Float:PhoneBooth[][3] =
{
	{2165.92, -1155.80, 24.4141},
	{2165.92, -1154.96, 24.4141},
	{2257.66, -1211.19, 23.6797},
	{2259.20, -1211.21, 23.6797},
	{2069.00, -1766.66, 13.2109},
	{2068.94, -1767.84, 13.2109},
	{1721.67, -1721.29, 13.2266},
	{1721.67, -1720.39, 13.2266},
	{1722.61, -1721.29, 13.2266},
	{1722.61, -1720.39, 13.2266},
	{1711.34, -1606.04, 13.2266},
	{1709.99, -1604.91, 13.2266},
	{1805.41, -1600.46, 13.2266},
	{1806.39, -1599.62, 13.2266},
	{1807.38, -1598.78, 13.2266},
	{1808.38, -1597.92, 13.2266},
	{1809.34, -1597.09, 13.2266},
	{303.03, -1593.31, 32.5156},
	{302.09, -1593.20, 32.5156},
	{295.16, -1573.06, 33.1562},
	{296.76, -1573.30, 33.1562},
	{355.81, -1364.95, 14.1641},
	{356.38, -1364.68, 14.1641},
	{638.03, -1228.66, 17.7891},
	{638.03, -1228.02, 17.8203},
	{279.19, -1630.78, 32.9297},
	{278.56, -1630.67, 32.9297},
	{379.11, -1717.05, 23.0391},
	{379.11, -1717.91, 22.7734},
	{-1696.69, 1334.48, 6.8828},
	{-1689.12, 1359.55, 6.8828},
	{-1661.59, 1398.09, 6.8828},
	{-1967.36, 162.87, 27.3516},
	{-1966.28, 162.87, 27.3516},
	{-1965.21, 162.87, 27.3516},
	{-1964.14, 162.87, 27.3516},
	{-2419.35, 718.21, 34.8594},
	{2279.26, 2524.98, 10.5391},
	{2279.26, 2526.73, 10.5391},
	{2279.26, 2528.55, 10.5391}
};
stock GetVehicleDriver(vehicleid)
{
	ForEachPlayer(i)
    {
        if(GetPlayerVehicleID(i) == vehicleid && GetPlayerState(i) == PLAYER_STATE_DRIVER)
        {
        	return i;
        }
    }
    return INVALID_PLAYER_ID;
}

stock GetOnlinePlayers()
{
	static count;
	count = 0;
	ForEachPlayer(i)
    {
        if(GetGVarInt("Logged", i) == 1)
        {
        	count++;
        }
    }
    return count;
}

stock GetWeekDay(day=0, month=0, year=0)
{
	if(day == 0) getdate(year, month, day);
	static weekday, j, e;
	if(month <= 2)
	{
		month += 12;
		--year;
	}
	j = year % 100;
	e = year / 100;
	switch ((day + (month+1)*26/10 + j + j/4 + e/4 - 2*e) % 7)
	{
		case 0: weekday = 6;
		case 1: weekday = 7;
		case 2: weekday = 1;
		case 3: weekday = 2;
		case 4: weekday = 3;
		case 5: weekday = 4;
		case 6: weekday = 5;
	}
	return weekday;
}

stock SecondToHMS(secs, &hours, &minutes, &seconds)
{
	if(secs < 0) return 0;
	minutes = secs/60;
	seconds = secs - (minutes*60);
	hours = minutes/60;
	minutes = minutes - (hours*60);
	return 1;
}

stock MilisecondToHMS(milisecs, &hours, &minutes, &seconds, &miliseconds)
{
	if(milisecs < 0) return 0;
	seconds = milisecs / 1000;
	miliseconds = milisecs - (seconds*1000);
	minutes = seconds / 60;
	seconds = seconds - (minutes*60);
	hours = minutes / 60;
	minutes = minutes - (hours*60);
	return 1;
}

PUBLIC:SpawnAllNPCGangZoneNPC()
{
	for(new i; i < sizeof(NPCGangZone); i++)
	{
		if(NPCGangZone[i][ngzGang] == NTEAM_NONE) continue;
		SpawnNPCGangZoneNPC(i);
	}
}

PUBLIC:SpawnNPCGangZoneNPC(nzone)//生成NPC地盘成员
{
	new ngang, npcid;
	ngang = NPCGangZone[nzone][ngzGang];
	for(new i; i < 2+random(3); i++)
	{
		npcid = CreateNPC(NPCGang[ngang][npgSkin][random(3)], NPCGang[ngang][npgWeapon][random(3)], NPCGang[ngang][npgHealth], 0.0
		, NPCGangZone[nzone][ngzPos][0]+float(random(3)-random(3)), NPCGangZone[nzone][ngzPos][1]+float(random(3)-random(3)), NPCGangZone[nzone][ngzPos][2]
		, float(random(360)), 0, 0, NPCGang[ngang][npgLevel], 1, 0, NPCGangZone[nzone][ngzGang]);
		SetGVarInt("NZNPC", nzone, npcid);
	}
	SetGVarInt("NZCD", 0, nzone);
	SetGVarInt("NZStatus", STATUS_FINISHED, nzone);
	SetGVarInt("NZAmount", NPCGangZone[nzone][ngzAmount], nzone);
}

PUBLIC:NPCGangZoneStart(nzone)//开始NPC地盘战争
{
	SetGVarInt("NZCD", 0, nzone);
	SetGVarInt("NZStatus", STATUS_STARTED, nzone);
	//SetGVarInt("NZAmount", NPCGangZone[nzone][ngzAmount], nzone);
	SetTimerEx("NPCGangZoneSpawn", 5000, 0, "i", nzone);
	SetTimerEx("NPCGangZoneEnd", 900000, 0, "i", nzone);
}

PUBLIC:NPCGangZoneSpawn(nzone)//生成NPC地盘战争敌人
{
	if(GetGVarInt("NZStatus", nzone) == STATUS_STARTED)
	{
		new count, amount = GetGVarInt("NZAmount", nzone);
		ForEachNPC(n)
		{
			if(GetGVarInt("DeadNPC", n) == 1) continue;
			if(GetGVarInt("NZNPC", n) == nzone) count ++;
		}
		if(count < 10)
		{
			new npcid, nenemy, Float:nx, Float:ny, Float:nz, Float:na,
				ngang = NPCGangZone[nzone][ngzGang];
			switch(random(4))
			{
				case 0: {nx = NPCGangZone[nzone][ngzSpawn1][0], ny = NPCGangZone[nzone][ngzSpawn1][1], nz = NPCGangZone[nzone][ngzSpawn1][2], na = NPCGangZone[nzone][ngzSpawn1][3];}
				case 1: {nx = NPCGangZone[nzone][ngzSpawn2][0], ny = NPCGangZone[nzone][ngzSpawn2][1], nz = NPCGangZone[nzone][ngzSpawn2][2], na = NPCGangZone[nzone][ngzSpawn2][3];}
				case 2: {nx = NPCGangZone[nzone][ngzSpawn3][0], ny = NPCGangZone[nzone][ngzSpawn3][1], nz = NPCGangZone[nzone][ngzSpawn3][2], na = NPCGangZone[nzone][ngzSpawn3][3];}
				case 3: {nx = NPCGangZone[nzone][ngzSpawn4][0], ny = NPCGangZone[nzone][ngzSpawn4][1], nz = NPCGangZone[nzone][ngzSpawn4][2], na = NPCGangZone[nzone][ngzSpawn4][3];}
			}
			npcid = CreateNPC(NPCGang[ngang][npgSkin][random(3)], NPCGang[ngang][npgWeapon][random(3)], NPCGang[ngang][npgHealth], 0.0, nx, ny, nz, na, 0, 0, NPCGang[ngang][npgLevel], 2, 0, NPCGangZone[nzone][ngzGang]);
			SetGVarInt("NZNPC", nzone, npcid);
			nenemy = GetNZEnemyPlayer(npcid);
			if(nenemy != INVALID_PLAYER_ID) NPCToTarget(npcid, TARGET_PLAYER, nenemy, 1);
			amount -= 1;
			SetGVarInt("NZAmount", amount, nzone);
		}
		if(amount > 0) SetTimerEx("NPCGangZoneSpawn", NPCGangZone[nzone][ngzSpawnFrenq]*1000, 0, "i", nzone);
	}
}

PUBLIC:NPCGangZoneEnd(nzone)//结束NPC地盘战争
{
	if(GetGVarInt("NZStatus", nzone) == STATUS_STARTED)
	{
		ForEachNPC(n)
		{
			if(GetGVarInt("DeadNPC", n) == 1) continue;
			if(GetGVarInt("NZNPC", n) == nzone)
			{
				SetGVarInt("NUnStreamDel", 1, n);
			}
		}
		ForEachPlayer(i)
		{
			if(GetGVarInt("AtkNZ", i) == nzone)
			{
				SendClientMessage(i, COLOR_WHITE, "地方帮派分子讨伐已经结束了");
				ShowPTD(i, 5, 1);
				DeleteGVar("AtkNZ", i);
			}
		}
		SetGVarInt("NZCD", 1, nzone);
		SetGVarInt("NZStatus", STATUS_FINISHED, nzone);
		SetGVarInt("NZAmount", 0, nzone);
	}
	SetTimerEx("SpawnNPCGangZoneNPC", 3600000, 0, "i", nzone);
}

stock GetNZEnemyPlayer(npcid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1,
    Float:NearestRange = max_range,
    NearestID = INVALID_PLAYER_ID;
    FCNPC_GetPosition(npcid, x1, y1, z1);
    ForEachPlayer(i)
    {
        if(GetGVarInt("Spawned", i) == 0) continue;
		if(GetGVarInt("AtkNZ", i) == GetGVarInt("NZNPC", npcid))
		{
			CurrentRange = GetPlayerDistanceFromPointEx(i, x1, y1, z1);
			if(CurrentRange < NearestRange)
			{
				NearestRange = CurrentRange;
				NearestID = i;
			}
        }
    }
    return NearestID;
}

stock PlayerLeaveNPCGangZone(playerid)
{
	new nzone = GetGVarInt("AtkNZ", playerid), count;
	DeleteGVar("AtkNZ", playerid);
	ForEachPlayer(i)
    {
        if(GetGVarInt("Spawned", i) == 0) continue;
		if(GetGVarInt("AtkNZ", i) == nzone) count ++;
    }
	if(count == 0) NPCGangZoneEnd(nzone);
}

stock CreateRandPosResource(resourceid, amount=1, bury=0)
{
    new dropid, Float:fx, Float:fy, Float:fz, distime;
	switch(resourceid)
	{
	    case 64..69,107..110, 313..317, 304, 322: GetRandPos(AREA_FOREST, fx, fy, fz);//只在森林的资源
		case 77..79,112,116,117: GetRandPos(AREA_DESERT, fx, fy, fz);//只在沙漠的资源
		case 86,113,111,118,319://在森林跟沙漠都有的资源
	    {
	        switch(random(2))
	        {
				case 0: GetRandPos(AREA_FOREST, fx, fy, fz);
				case 1: GetRandPos(AREA_DESERT, fx, fy, fz);
			}
		}
		case 42: GetRandPos(AREA_HERBG, fx, fy, fz);
		case 43: GetRandPos(AREA_HERBY, fx, fy, fz);
		case 44: GetRandPos(AREA_HERBW, fx, fy, fz);
		case 114:  GetRandPos(AREA_HERBR, fx, fy, fz);
	}
	if(resourceid == 117 || resourceid == 118) distime = 18000;//为机械碎片与手提箱增加消除时间以避免积累在地图上
	else distime = 0;
	if(bury == 1) dropid = CreateDropItem(ITEM_BURY, resourceid, amount, fx, fy, fz+1.0, 0, distime, 1);
	else dropid = CreateDropItem(ITEM_USE, resourceid, amount, fx, fy, fz+1.0, 0, distime, 1);
    return dropid;
}

PUBLIC:CreateRandPosAnimal(animalid)
{
    static npcid, Float:fx, Float:fy, Float:fz, hostile;
	switch(animalid)
	{
	    case 1..13,21: GetRandPos(AREA_CITY, fx, fy, fz);//只在城市内的动物
		case 14,15,19: GetRandPos(AREA_FOREST, fx, fy, fz);//只在森林的动物
		case 18: GetRandPos(AREA_DESERT, fx, fy, fz);//只在沙漠的动物
		case 16,17://在森林跟沙漠都有的动物
	    {
			switch(random(2))
			{
		        case 0: GetRandPos(AREA_FOREST, fx, fy, fz);
				case 1: GetRandPos(AREA_DESERT, fx, fy, fz);
			}
		}
		case 20: GetRandPos(AREA_PANDA, fx, fy, fz);
		case 23: GetRandPos(AREA_SWAMP, fx, fy, fz);//鳄鱼
	}
    if(AnimalsList[animalid][amlType] == ANIMAL_WOLF || AnimalsList[animalid][amlType] == ANIMAL_BEAR || AnimalsList[animalid][amlType] == ANIMAL_GATOR)
	{
	    switch(random(2))//有可能会主动攻击(hostile=2),有可能被动攻击(hostile=1)
	    {
	        case 0: hostile = 2;
	        case 1: hostile = 1;
	    }
	}
	else if(AnimalsList[animalid][amlType] == ANIMAL_DOG_M)
	{
	    switch(random(10))//有可能会主动攻击(hostile=2),有可能被动攻击(hostile=1)
	    {
	        case 0: hostile = 2;
	        default: hostile = 1;
	    }
	}
	else if(AnimalsList[animalid][amlAttack] > 0.0)
	{
		switch(random(2))//可能会主动逃跑(hostile=-1),也有可能被动攻击(hostile=1)
	    {
	        case 0: hostile = 1;
	        case 1: hostile = -1;
	    }
	}
    else
	{
		switch(random(2))//没攻击力的动物,可能会主动逃跑(hostile=-1)
	    {
	        case 0: hostile = 0;
	        case 1: hostile = -1;
	    }
	}

    npcid = CreateNPC(AnimalsList[animalid][amlModel], 0, AnimalsList[animalid][amlMaxHealth], 0.0, fx, fy, fz+1.0, float(random(360)), 0, 0, NPC_NORMAL, hostile);
    if(npcid == -1) return 0;
    SetGVarInt("Animal", animalid, npcid);
    return 1;
}

stock CreateRandPosTree(wood=DEFAULT_TREE_WOODS)
{
    static Float:fx, Float:fy, Float:fz;
	GetRandPos(AREA_TREE, fx, fy, fz);
	CreateLumberTree(wood, fx, fy, fz, 0.0, 0.0, float(random(360)), 1);
    return 0;
}

stock GetRandPos(area, &Float:fx, &Float:fy, &Float:fz)
{
	static maxx, minx, maxy, miny, rand, randx, randy;
	fx = fy = fz = 0.0;
	switch(area)
	{
	    case AREA_CITY:
	    {
	        while(fz > 50.0 || fz < 1.0 || GetNearestHospital(fx, fy, fz, 30.0) != -1)
	        {
		        rand = random(sizeof(CityZone));
				maxx = floatround(CityZone[rand][0]), minx = floatround(CityZone[rand][1]),
				maxy = floatround(CityZone[rand][2]), miny = floatround(CityZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_FOREST:
	    {
	        while(fz < 1.0 || GetNearestHospital(fx, fy, fz, 30.0) != -1)
	        {
		        rand = random(sizeof(ForestZone));
				maxx = floatround(ForestZone[rand][0]), minx = floatround(ForestZone[rand][1]),
				maxy = floatround(ForestZone[rand][2]), miny = floatround(ForestZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_DESERT:
	    {
	        while(fz < 1.0 || GetNearestHospital(fx, fy, fz, 30.0) != -1)
	        {
		        rand = random(sizeof(DesertZone));
				maxx = floatround(DesertZone[rand][0]), minx = floatround(DesertZone[rand][1]),
				maxy = floatround(DesertZone[rand][2]), miny = floatround(DesertZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_PANDA:
	    {
	        while(fz > 40.0 || fz < 1.0)
	        {
		        rand = random(sizeof(PandaZone));
				maxx = floatround(PandaZone[rand][0]), minx = floatround(PandaZone[rand][1]),
				maxy = floatround(PandaZone[rand][2]), miny = floatround(PandaZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_SWAMP:
	    {
	        while(fz == 0.0)
	        {
				maxx = floatround(SwampZone[0][0]), minx = floatround(SwampZone[0][1]),
				maxy = floatround(SwampZone[0][2]), miny = floatround(SwampZone[0][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_HERBG:
	    {
	        while(fz == 0.0)
	        {
		        rand = random(sizeof(HerbGreenZone));
				maxx = floatround(HerbGreenZone[rand][0]), minx = floatround(HerbGreenZone[rand][1]),
				maxy = floatround(HerbGreenZone[rand][2]), miny = floatround(HerbGreenZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_HERBY:
	    {
	        while(fz == 0.0)
	        {
		        rand = random(sizeof(HerbYellowZone));
				maxx = floatround(HerbYellowZone[rand][0]), minx = floatround(HerbYellowZone[rand][1]),
				maxy = floatround(HerbYellowZone[rand][2]), miny = floatround(HerbYellowZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_HERBW:
	    {
	        while(fz == 0.0)
	        {
		        rand = random(sizeof(HerbWhiteZone));
				maxx = floatround(HerbWhiteZone[rand][0]), minx = floatround(HerbWhiteZone[rand][1]),
				maxy = floatround(HerbWhiteZone[rand][2]), miny = floatround(HerbWhiteZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_HERBR:
	    {
	        while(fz == 0.0)
	        {
		        rand = random(sizeof(HerbRedZone));
				maxx = floatround(HerbRedZone[rand][0]), minx = floatround(HerbRedZone[rand][1]),
				maxy = floatround(HerbRedZone[rand][2]), miny = floatround(HerbRedZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	    case AREA_TREE:
	    {
	        while(fz == 0.0)
	        {
		        rand = random(sizeof(LumberTreeZone));
				maxx = floatround(LumberTreeZone[rand][0]), minx = floatround(LumberTreeZone[rand][1]),
				maxy = floatround(LumberTreeZone[rand][2]), miny = floatround(LumberTreeZone[rand][3]);
				randx = minx + random(maxx - minx);
			    randy = miny + random(maxy - miny);
				fx = float(randx), fy = float(randy);
				CA_FindZ_For2DCoord(fx, fy, fz);
			}
	    }
	}
}

stock CreateLumberTree(wood, Float:posx, Float:posy, Float:posz, Float:rotx, Float:roty, Float:rotz, natural=0)
{
	static i, j;
	for(i = 0, j = MAX_TREES; i < j; i++)
	{
	    if(LumberTree[i][trCreated] == 0)
	    {
	        LumberTree[i][trX] = posx;
	        LumberTree[i][trY] = posy;
	        LumberTree[i][trZ] = posz;
	        LumberTree[i][trRX] = rotx;
	        LumberTree[i][trRY] = roty;
	        LumberTree[i][trRZ] = rotz;
	        LumberTree[i][trObjID] = CreateDynamicObject(708, posx, posy, posz, rotx, roty, rotz);
	        LumberTree[i][trWood] = wood;
	        LumberTree[i][trCreated] = 1;
	        LumberTree[i][trNatural] = natural;
	        break;
	    }
	}
	return i;
}

stock LumberTreeDown(id)
{
	if(LumberTree[id][trCreated] != 0)
	{
     	DestroyDynamicObject(LumberTree[id][trObjID]);
	    if(LumberTree[id][trNatural] == 1 && ResourceData[rWood] > 0)
		{
		    LumberTree[id][trObjID] = CreateDynamicObject(843, LumberTree[id][trX], LumberTree[id][trY], LumberTree[id][trZ], LumberTree[id][trRX], LumberTree[id][trRY], LumberTree[id][trRZ]);
		    LumberTree[id][trWood] = 0;
		    LumberTree[id][trCreated] = 2;
			LumberTree[id][trTimer] = SetTimerEx("RecreateTree", 120000, 0, "i", id);
			ResourceData[rWood] --;
		}
	}
}

PUBLIC:RecreateTree(oldid)
{
	if(LumberTree[oldid][trCreated] == 2)
	{
	    DeleteLumberTree(oldid);
		if(ResourceData[rWood] > 0)
		{
	    	CreateRandPosTree();
	    }
	}
}

stock DeleteLumberTree(id)
{
	if(LumberTree[id][trCreated] != 0)
	{
	    DestroyDynamicObject(LumberTree[id][trObjID]);
		LumberTree[id][trX] =
	    LumberTree[id][trY] =
	    LumberTree[id][trZ] =
	    LumberTree[id][trRX] =
	    LumberTree[id][trRY] =
	    LumberTree[id][trRZ] = 0.0;
	    LumberTree[id][trWood] =
	    LumberTree[id][trNatural] =
	    LumberTree[id][trCreated] = 0;
	}
}

//  warning 214 : 因为area这个阵列在传递到该函数内运行时没有被变动 因此加上const代表固定最为适当.
stock bool:IsPlayerInArea(playerid, const area[])
{
    static Float:px, Float:py, Float:pz, i;
    if(GetGVarInt("Dead", playerid) > 0)
    {
		px = PlayerData[playerid][pX];
		py = PlayerData[playerid][pY];
		pz = PlayerData[playerid][pZ];
    }
    else GetPlayerPos_Out(playerid, px, py, pz);
	for(i = 0; i < sizeof(Area); i++)
	{
		if(strfind(Area[i][arName], area, true) != -1)
		{
            if(Area[i][arZone][0] <= px <= Area[i][arZone][3] && Area[i][arZone][1] <= py <= Area[i][arZone][4])
		    {
                return true;
		    }
		}
	}
	return false;
}

stock GetPosArea(Float:ax,Float:ay)
{
    new i, check;
	for(i = 0, check = -1; i < sizeof(Area); i++)
	{
		if(Area[i][arZone][0] <= ax <= Area[i][arZone][3] && Area[i][arZone][1] <= ay <= Area[i][arZone][4])
		{
            check = i;
            break;
		}
	}
	if(strfind(Area[check][arName], "Los Santos", true) != -1) return AREA_LS;
	if(strfind(Area[check][arName], "San Fierro", true) != -1) return AREA_SF;
	if(strfind(Area[check][arName], "Las Venturas", true) != -1) return AREA_LV;
	return AREA_SA;
}

stock GetPlayerArea(playerid)
{
    new Float:px, Float:py, Float:pz, i, check;
    if(GetGVarInt("Dead", playerid) > 0)
    {
		px = PlayerData[playerid][pX];
		py = PlayerData[playerid][pY];
		pz = PlayerData[playerid][pZ];
    }
    else GetPlayerPos_Out(playerid, px, py, pz);
	for(i = 0, check = -1; i < sizeof(SmallArea); i++)
	{
		if(SmallArea[i][arsZone][0] <= px <= SmallArea[i][arsZone][3] && SmallArea[i][arsZone][1] <= py <= SmallArea[i][arsZone][4])
		{
            check = i;
            break;
		}
	}
	return check;
}

stock bool:AllowSaveCoords(playerid)
{
	if(GetGVarInt("PlayerBuyingCarPlace", playerid) == 0 && GetGVarInt("Spawned", playerid) == 1
	 && GetGVarInt("RangeShooting", playerid) == 0 && GetGVarInt("pTuning", playerid) == 0
	 && GetGVarInt("ModdingShop", playerid) == 0 && GetGVarInt("PlayerBuyingSkin", playerid) == 0 && GetGVarInt("pArena", playerid) == 0
	 && GetGVarInt("ViewEstate", playerid) == 0 && GetGVarInt("UsingRC", playerid) == 0 && GetPlayerState(playerid) != PLAYER_STATE_SPECTATING
	 && GetGVarInt("Eventing", playerid) == 0 && PlayerData[playerid][pJail] == 0 && PlayerData[playerid][pReg] == 1) {return true;}
	else {return false;}
}

stock bool:PlayerCanUseAnim(playerid)
{
	return (GetGVarInt("Spawned", playerid) == 1 && GetPlayerState(playerid) == 1 && GetGVarInt("Cuffed", playerid) == 0 && GetGVarInt("Fishing", playerid) == 0
	&& GetGVarInt("Digging", playerid) == 0 && GetGVarInt("Hewing", playerid) == 0 && GetGVarInt("Healing", playerid) == 0
    && GetGVarInt("PlayerQTEing", playerid) == 0 && GetGVarInt("Papaed", playerid) == 0
	&& GetGVarInt("pCAnim", playerid) == 0);
}

//使用SAMP原本的GetPlayerHealth/Armour 如果值大于255.0会回传错误的值 进一步造成OnPlayerTakeDamage与GiveHealth/Armour...等等的错误 所以改采用GVar储存玩家的生命与护甲值
stock SetPlayerHealth_Fix(playerid, Float:health)
{
	SetGVarFloat("PlayerHealth", health, playerid);
	SetPlayerHealth(playerid, health);
}

stock SetPlayerArmour_Fix(playerid, Float:armour)
{
	SetGVarFloat("PlayerArmour", armour, playerid);
	SetPlayerArmour(playerid, armour);
}

stock Float:GetPlayerHealth_Fix(playerid)
{
	return GetGVarFloat("PlayerHealth", playerid);
}

stock Float:GetPlayerArmour_Fix(playerid)
{
	return GetGVarFloat("PlayerArmour", playerid);
}

stock GiveHealth(playerid, Float:amount)
{
	new Float:php;
    if(!IsPlayerConnected(playerid) || GetGVarInt("Logged", playerid) == 0) return 0;
	php = GetPlayerHealth_Fix(playerid);
	if(amount > 0 && (php + amount > 100.0 + PlayerData[playerid][pMaxHealth])) SetPlayerHealth_Fix(playerid, 100.0 + PlayerData[playerid][pMaxHealth]);
	else if(php < 0) SetPlayerHealth_Fix(playerid, 0.0);
	else SetPlayerHealth_Fix(playerid, php + amount);
	UpdatePlayerHPBar(playerid);
	return 1;
}

stock GiveArmour(playerid, Float:amount)
{
	new Float:par;
    if(!IsPlayerConnected(playerid) || GetGVarInt("Logged", playerid) == 0) return 0;
	par = GetPlayerArmour_Fix(playerid) + amount;
	if(par < 0)
	{
	    SetPlayerArmour_Fix(playerid, 0.0);
		GiveHealth(playerid, par);
	}
	else {SetPlayerArmour_Fix(playerid, par);}
	UpdatePlayerHPBar(playerid);
	return 1;
}

stock GiveHealth_Delayed(playerid, Float:amount)
{
	SetGVarFloat("HPDelayed", GetGVarFloat("HPDelayed", playerid) + amount, playerid);
}

stock GetPlayerPos_Out(playerid, &Float:px, &Float:py, &Float:pz)
{
	if(GetGVarFloat("PlayerX", playerid) == 0.0 && GetGVarFloat("PlayerY", playerid) == 0.0 && GetGVarFloat("PlayerZ", playerid) == 0.0)
	{
		GetPlayerPos(playerid, px, py, pz);
	}
	else
	{
		px = GetGVarFloat("PlayerX", playerid);
		py = GetGVarFloat("PlayerY", playerid);
		pz = GetGVarFloat("PlayerZ", playerid);
	}
}

//修正有时候切换skin会导致玩家卡住的问题
stock SetPlayerSkin_Fix(playerid, skinid)
{
	new value = SetPlayerSkin(playerid, skinid);
	if(GetGVarInt("Cuffed", playerid == 0) && GetGVarInt("Tazzed", playerid == 0)) TogglePlayerControllable(playerid, true);
	return value;
}

stock PlayerTextDrawHideDestroy(playerid, PlayerText:playertextid)
{
	PlayerTextDrawHide(playerid, playertextid);
	PlayerTextDrawDestroy(playerid, playertextid);
}

stock SelectObject_Fix(playerid)
{
	OnPlayerClickTextDraw(playerid, Text:INVALID_TEXT_DRAW);
	return SelectObject(playerid);
}

stock EditObject_Fix(playerid, objectid)
{
	OnPlayerClickTextDraw(playerid, Text:INVALID_TEXT_DRAW);
	return EditObject(playerid, objectid);
}

stock bool:AngleInRangeOfAngle(Float:a1, Float:a2, Float:range)
{

	a1 -= a2;
	if((a1 < range) && (a1 > -range)) return true;

	return false;

}

stock bool:IsPlayerFacingPoint(playerid, Float:dOffset, Float:px, Float:py, Float:pz)
{
	#pragma unused pz
	new
		Float:X,
		Float:Y,
		Float:Z,
		Float:Angle,
		Float:ang;

	if(!IsPlayerConnected(playerid)) return false;

	GetPlayerPos(playerid, X, Y, Z);
	GetPlayerFacingAngle(playerid, Angle);

	if( Y > py ) ang = (-acos((X - px) / floatsqroot((X - px)*(X - px) + (Y - py)*(Y - py))) - 90.0);
	else if( Y < py && X < px ) ang = (acos((X - px) / floatsqroot((X - px)*(X - px) + (Y - py)*(Y - py))) - 450.0);
	else if( Y < py ) ang = (acos((X - px) / floatsqroot((X - px)*(X - px) + (Y - py)*(Y - py))) - 90.0);

	if(AngleInRangeOfAngle(-ang, Angle, dOffset)) return true;

	return false;

}

stock GetXYInFrontOfPlayer(playerid, &Float:x, &Float:y, Float:distance)
{
	static Float:a;
	GetPlayerPos(playerid, x, y, a);
	GetPlayerFacingAngle(playerid, a);
	if (GetPlayerVehicleID(playerid))
	{
	    GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
	}
	x += (distance * floatsin(-a, degrees));
	y += (distance * floatcos(-a, degrees));
}

stock GetXYRightToPlayer(playerid, &Float:x, &Float:y, Float:distance)
{
	static Float:a;
	GetPlayerPos(playerid, x, y, a);
	GetPlayerFacingAngle(playerid, a);
	if (GetPlayerVehicleID(playerid))
	{
	    GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
	}
	a = a-90.0;
	if(a > 360.0) a = a - 360.0;
	x += (distance * floatsin(-a, degrees));
	y += (distance * floatcos(-a, degrees));
}

stock GetXYLeftToPlayer(playerid, &Float:x, &Float:y, Float:distance)
{
	static Float:a;
	GetPlayerPos(playerid, x, y, a);
	GetPlayerFacingAngle(playerid, a);
	if (GetPlayerVehicleID(playerid))
	{
	    GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
	}
	a = a+90.0;
	if(a > 360.0) a = a - 360.0;
	x += (distance * floatsin(-a, degrees));
	y += (distance * floatcos(-a, degrees)); // * 问题行 导致崩溃有关
}

stock GetXYRightToAngle(Float:a, Float:x1, Float:y1, &Float:x2, &Float:y2, Float:distance)
{
	a = a-90.0;
	if(a > 360.0) a = a - 360.0;
	x2 = x1 + (distance * floatsin(-a, degrees));
	y2 = y1 + (distance * floatcos(-a, degrees));
}

stock GetXYLeftToAngle(Float:a, Float:x1, Float:y1, &Float:x2, &Float:y2, Float:distance)
{
	a = a+90.0;
	if(a > 360.0) a = a - 360.0;
	x2 = x1 + (distance * floatsin(-a, degrees));
	y2 = y1 + (distance * floatcos(-a, degrees));
}

stock Float:GetPointDistanceToPoint(Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2)
{
    new
    Float:x = x1-x2,
    Float:y = y1-y2,
    Float:z = z1-z2;
    return floatsqroot(x*x+y*y+z*z);
}

stock Float:GetVehicleSpeed(vehicleid)
{
	new Float:vx, Float:vy, Float:vz;
	GetVehicleVelocity(vehicleid, vx, vy, vz);
	return (floatsqroot((vx * vx) + (vy * vy) + (vz * vz)) * 181.0);
}

stock SetPlayerLookAt(playerid, Float:x, Float:y)
{
    static Float:Px, Float:Py, Float: Pa;
    GetPlayerPos(playerid, Px, Py, Pa);
    Pa = floatabs(atan((y-Py)/(x-Px)));
    if (x <= Px && y >= Py) Pa = floatsub(180, Pa);
    else if (x < Px && y < Py) Pa = floatadd(Pa, 180);
    else if (x >= Px && y <= Py) Pa = floatsub(360.0, Pa);
    Pa = floatsub(Pa, 90.0);
    if (Pa >= 360.0) Pa = floatsub(Pa, 360.0);
    SetPlayerFacingAngle(playerid, Pa);
}

stock GetAngleToXY(Float:X, Float:Y, Float:CurrX, Float:CurrY, &Float:angle)
{
    angle = atan2(Y-CurrY, X-CurrX);
    angle = floatsub(angle, 90.0);
    if(angle < 0.0) angle = floatadd(angle, 360.0);
}

stock GetXYInFrontOfPos(Float:xx,Float:yy,Float:a, &Float:x2, &Float:y2, Float:distance)
{
    if(a > 360.0)
	{
        a = a - 360.0;
    }
    xx += (distance * floatsin(-a, degrees)); //问题行
    yy += (distance * floatcos(-a, degrees));
    x2=xx;
    y2=yy;
}

stock GetXYBehindPos(Float:xx, Float:yy, Float:a, &Float:x2, &Float:y2, Float:distance)
{
	a = a + 180;
    if(a > 360.0)
	{
        a = a - 360.0;
    }
    xx += (distance * floatsin(-a, degrees));
    yy += (distance * floatcos(-a, degrees));
    x2=xx;
    y2=yy;
}

stock Is2DPointInRangeOfPoint(Float:x, Float:y, Float:x2, Float:y2, Float:range)
{
    x2 -= x;
    y2 -= y;
    return ((x2 * x2) + (y2 * y2)) < (range * range);
}

stock bool:IsDynamicObjectInSphere(objectid,Float:x,Float:y,Float:z,Float:radius2)
{
    new Float:x1,Float:y1,Float:z1,Float:tmpdis;
    GetDynamicObjectPos(objectid,x1,y1,z1);
    tmpdis = floatsqroot(floatpower(floatabs(floatsub(x,x1)),2)+ floatpower(floatabs(floatsub(y,y1)),2)+ floatpower(floatabs(floatsub(z,z1)),2));
    if(tmpdis < radius2) return true;
    return false;
}

stock GetXYBehindDynamicObjectInAngle(objectid, Float:a, &Float:x2, &Float:y2, Float:distance)
{
    new Float:z;
    GetDynamicObjectPos(objectid, x2, y2, z);

    x2 += (distance * floatsin(-a+180, degrees));
    y2 += (distance * floatcos(-a+180, degrees));
}

stock PreloadAnim(playerid)
{
    for(new i = 0; i < sizeof(s_AnimationLibraries); i ++)
    {
    	ApplyAnimation(playerid,s_AnimationLibraries[i],"null",0.0,0,0,0,0,0);
    }
}

stock bool:IsStringOnlyHaveLetter(const string[])
{
    new l = strlen(string), p = sizeof(LettersNNums), n;
    for(new i = 0; i < l; i++)
    {
        for(n = 0; n < p; n++)
        {
            if(string[i] == LettersNNums[n]) break;
        }
        if(n == p) return false;
    }
    return true;
}

stock GenerateRandomPassword(digit)
{
	static i, j, rand, string[144];
	string[0] = EOS;
	for(i = 0, j = digit; i < j; i++)
	{
	    rand = random(sizeof(LettersNNums));
		format(string, sizeof(string), "%s%s", string, LettersNNums[rand]);
	}
	return string;
}

stock GetWeatherStatus(id)
{
	new status;
	switch(id)
	{
		case 7,12,15,20: status = WEATHER_CLOUDY;
		case 8,16: status = WEATHER_RAINY;
		case 9: status = WEATHER_FOGGY;
		case 19: status = WEATHER_DUSTY;
		default: status = WEATHER_SUNNY;
	}
    return status;//优化
}

stock ApplyAnimationEx(playerid, animlib[], animname[], Float:fDelta, loop, lockx, locky, freeze, time, forcesync=1)
{
	if(GetGVarInt("Cuffed", playerid) == 0)
	{
	    SetGVarInt("Animating", 1, playerid);
	    return ApplyAnimation(playerid, animlib, animname, fDelta, loop, lockx, locky, freeze, time, forcesync);
	}
	return 0;
}

stock ClearAnimationsEx(playerid)
{
    DeleteGVar("Animating", playerid);
	ApplyAnimation(playerid, "CARRY", "crry_prtial", 1.0, 0, 0, 0, 0, 0, 1);
}

//Shop
static const ShopList_USE[][] =
{
	{0},
	{9, 10, 11, 12, 21, 22, 23, 24, 0},//USESHOP_BURGER
	{5, 6, 7, 8, 21, 22, 23, 24, 0},//USESHOP_PIZZA
	{1, 2, 3, 4, 21, 22, 23, 24, 0},//USESHOP_CHICKEN
	{13, 14, 15, 16, 21, 22, 17, 18, 0},//USESHOP_DONUT
	{26, 27, 28, 29, 30, 31, 0},//USESHOP_247_FOOD
	{159, 119, 32, 303, 45, 176, 302, 318, 0},//USESHOP_247_TOOL
	{34, 35, 36, 37, 0},//USESHOP_247_VITA
	{132, 133, 134, 21, 22, 23, 24, 0},//USESHOP_GAS
	{135, 136, 137, 138, 0},//USESHOP_AMMU_ARMOR
	{163, 164, 165, 166},//USESHOP_SEX
	{64, 65, 66, 67, 68, 69, 77, 78, 79, 107, 108, 109, 0},//USESHOP_PLANT_SEED
	{101, 102, 103, 320, 321, 0},//USESHOP_PLANT_FERT
	{200, 201, 226, 227, 228, 229, 230, 231, 232, 325, 326, 203, 223, 327, 328, 329, 0},//USESHOP_FNT_CNT
	{224, 225, 330, 251, 252, 253, 254, 255, 256, 257, 258, 259, 261, 262, 0},//USESHOP_FNT_BND
	{267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 333, 0},//USESHOP_FNT_LIGHT
	{331, 233, 234, 235, 236, 237, 239, 240, 241, 0},//USESHOP_FNT_ELEC
	{242, 243, 202, 264, 265, 266, 0}//USESHOP_FNT_OTHER
};

static const ShopList_EQ[][] =
{
	{0},
	{4, 33, 0},//EQSHOP_MOBILE
	{280, 281, 283, 0},//EQSHOP_RC
	{2, 25, 26, 45, 42, 51, 0},//EQSHOP_TOOL
	{27, 26, 0},//EQSHOP_PLANT
	{28, 0}//EQSHOP_247_TOOL
};

//Random Special Plate
static const SpecialPlate[][32] =
{
	{"LUVF1ST"}, {"4GEDIT"}, {"ASSMAN"}, {"A2TMFK"}, {"GROVE4L"},
	{"J3NYTAL5"}, {"LVA4L"}, {"OMEGA"}, {"TIMEBOMB"}, {"FA5T66"},
	{"V1N3W88D"}, {"K1FFL0M"}, {"P4P4R4Z0"}, {"B3LI3V3"}, {"DR3YFU55"},
	{"V1NTAG3"}, {"FUTUR3"}, {"TURB0"}, {"M4K3B4NK"}, {"C1TRUS"},
	{"B35TL4P"}, {"TR3X"}, {"BE4STY"}, {"5T3ALTH"}, {"5M00TH"},
	{"CAR4M3L"}, {"D3V1L"}, {"B1GB0Y"}, {"M0N4RCH"}, {"PR3TTY"},
	{"0H3LL0"}, {"PH4R40H"}, {"C4TCHM3"}, {"H0T4U"}, {"2FA5T4U"},
	{"M1DL1F3"}, {"R3G4L"}, {"V1S10NRY"}, {"L0NG80Y"}, {"R31GN"},
	{"0LDBLU3"}, {"CH4RG3D"}, {"CRU151N"}, {"MU5CL3"}, {"M1DL1F3"},
	{"L4WLESS"}, {"0LDT1M3R"}, {"M4J3ST1C"}, {"R4LLY"}, {"B1GM0N3Y"},
	{"K1NGP1N"}, {"0V3RFL0D"}, {"W1DEB0Y"}, {"F1D3L1TY"}, {"5H0W0FF"},
	{"W1NN1NG"}, {"H3R0"}, {"0LDN3W5"}, {"0BEYM3"}, {"D1RTY"},
	{"FRU1TY"}, {"PR3C10US"}, {"P0W3RFUL"}, {"R4C3R"}, {"CL45SY"}
};

stock SetVehicleRandomNumberPlate(vehicleid)
{
	new rand = random(sizeof(SpecialPlate)), text[32];
	format(text, sizeof(text), ""#TEXT_BLACK"%s", SpecialPlate[rand]);
	SetVehicleNumberPlate(vehicleid, text);
}

static const Float:HospitalPos[][4] =
{
	{2037.8169,-1410.8481,17.1641,135.1726},
	{1177.8035,-1323.6383,14.0887,270.1442},
	{-2199.3457,-2308.2549,30.6250,319.5160},
	{-2655.0022,633.5826,14.4531,180.2897},
	{-315.3772,1056.1277,19.7422,1.7784},
	{1607.7200,1819.9154,10.8280,356.3941},
	{1242.7601,328.8835,19.7578,337.4333},
	{-1514.6506,2528.3330,55.7215,1.2471}
};

static const Float:AirportPos[][3] =
{
	{1961.0814,-2184.0371,13.5469},//LS
	{-1548.8744,-433.8087,5.6760},//SF
	{1711.7991,1605.9913,9.6715}//LV
};

static const Float:DockPos[][3] =
{
	{2303.7568,-2395.0671,13.3334},//LS
	{-1743.0713,1398.4471,7.1875},//SF
	{2287.8958,614.3530,10.8203}//LV
};

static const Float:LSAirWBSpawnPos[][4] =
{
	{1917.9930,-2325.3625,14.0088,180.1744},
	{1918.1836,-2388.2419,14.0047,180.1739},
	{1878.5331,-2433.6799,14.0139,177.1223},
	{1813.9512,-2446.8105,14.0096,180.7842},
	{1996.1095,-2625.9468,14.0044,356.6445},
	{2071.9116,-2633.0552,14.0048,0.1108},
	{2079.7683,-2444.4570,14.0073,178.8113},
	{2135.1084,-2443.8425,14.0087,177.9243}
};

static const Float:SFAirWBSpawnPos[][4] =
{
	{-1247.3884,-598.9246,14.6089,35.8597},
	{-1245.8732,-559.9352,14.6023,22.4329},
	{-1199.3802,-494.3391,14.6085,357.5121},
	{-1299.6693,-475.3003,14.6073,297.1103},
	{-1556.8844,-244.9432,14.6062,3.4667},
	{-1603.5470,-292.4654,14.6103,10.0370},
	{-1641.4653,-333.0077,14.6099,4.6456}
};

static const Float:LVAirWBSpawnPos[][4] =
{
	{1283.8501,1460.6368,11.2713,268.9567},
	{1358.5695,1439.4929,11.2801,270.5693},
	{1300.1697,1421.7222,11.2818,271.0181},
	{1336.6584,1402.5724,11.2750,267.8463},
	{1521.1372,1187.1016,11.2746,54.5431},
	{1514.6904,1243.7313,11.2739,58.2116},
	{1528.7883,1713.7689,11.2797,89.8677},
	{1528.5988,1789.4878,11.2784,89.3092}
};

static const Float:LSDockWBSpawnPos[][4] =
{
	{2280.7493,-2438.9597,-0.3119,180.4927},
	{2297.1445,-2427.0464,-0.2730,136.7064},
	{2318.6267,-2405.9307,-0.1433,135.6236},
	{2322.5732,-2385.7437,-0.2013,228.4338}
};

static const Float:SFDockWBSpawnPos[][4] =
{
	{-1719.6321,1449.2195,-0.2433,359.8652},
	{-1719.2513,1475.3921,-0.2719,357.9850},
	{-1910.1455,1401.3069,-0.2138,88.8068},
	{-1928.3448,1401.2294,-0.2071,89.3661}
};

static const Float:LVDockWBSpawnPos[][4] =
{
	{2283.1086,535.3300,-0.2555,176.4400},
	{2304.2009,536.7045,-0.3428,180.0335},
	{2344.0403,534.9079,-0.3004,181.0544},
	{2375.7307,534.7109,-0.2575,179.7146}
};

//LV售车场1
static LVCarSell1Spawned[5];

static const Float:LVCarSell1SpawnPos[][4] =
{
	{1979.1338,2059.1375,10.6953,179.9164},
	{1983.5834,2058.9517,10.6953,179.9164},
	{1986.6863,2058.6045,10.6953,179.9164},
	{1986.6863,2058.6045,10.6953,179.9164},
	{1994.1256,2057.7710,10.6953,179.9164}
};

//Grotti卖车厂
static GrottiSpawned[5];

static const Float:GrottiSpawnPos[][4] =
{
	{536.4372,-1276.5222,17.0139,217.6394},
	{539.5720,-1274.9026,17.0134,217.6394},
	{542.7242,-1272.2406,17.0162,217.6394},
	{547.4552,-1268.9408,17.0154,217.6394},
	{551.8088,-1266.0712,17.0147,217.6394}
};

//LS营业用车卖场
static LSBisVehSellSpawned[5];

static const Float:LSBisVehSellSpawnPos[][4] =
{
	{1254.5295,-1834.1450,13.0962,179.6073},
	{1258.5295,-1834.1450,13.0962,179.6073},
	{1262.5295,-1834.1450,13.0962,179.6073},
	{1266.5295,-1834.1450,13.0962,179.6073},
	{1270.5295,-1834.1450,13.0962,179.6073}
};

//SF营业用车卖场
static SFBisVehSellSpawned[5];

static const Float:SFBisVehSellSpawnPos[][4] =
{
	{-1558.4283,1191.7146,6.8931,90.0080},
	{-1558.4283,1196.7146,6.8931,90.0080},
	{-1558.4283,1201.7146,6.8931,90.0080},
	{-1558.4283,1206.7146,6.8931,90.0080},
	{-1558.4283,1211.7146,6.8931,90.0080}
};

//LV营业用车卖场
static LVBisVehSellSpawned[5];

static const Float:LVBisVehSellSpawnPos[][4] =
{
	{2148.7144,1398.2848,10.5181,180.1342},
	{2145.7144,1398.2848,10.5181,180.1342},
	{2142.7144,1398.2848,10.5181,180.1342},
	{2139.7144,1398.2848,10.5181,180.1342},
	{2136.7144,1398.2848,10.5181,180.1342}
};

//SF Bike
static SFBikeSpawned[5];

static const Float:SFBikeSpawnPos[][4] =
{
	{-2464.9902,774.6654,34.7406,180.0000},
	{-2466.5151,774.6064,34.7493,180.0000},
	{-2468.1223,774.3414,34.7485,180.0000},
	{-2469.6487,774.4367,34.7431,180.0000},
	{-2471.1750,774.5132,34.7439,180.0000}
};

//Simeon
static LSCarSell1Spawned[8];

static const Float:LSCarSell1SpawnPos[][4] =
{
	{2122.3420,-1157.1550,23.8076,358.7910},
	{2116.9468,-1155.6498,24.0482,355.7322},
	{2117.6670,-1149.9696,24.0792,316.9252},
	{2117.6670,-1149.9696,24.0792,316.9252},
	{2119.3391,-1130.1509,25.0298,311.1589},
	{2135.7087,-1149.1652,24.0524,37.9078},
	{2136.4216,-1141.5194,24.8957,45.2926},
	{2135.9883,-1129.6348,25.3432,46.9287}
};

//Wang Car
static WangCarSpawned[8];

static const Float:WangCarSpawnPos[][4] =
{
	{-1989.0612,275.3152,34.8298,267.7338},
	{-1989.0621,272.3140,34.8272,267.7338},
	{-1989.0621,269.3140,34.8203,267.7338},
	{-1989.9813,266.3492,34.8315,267.7607},
	{-1989.9813,263.3492,34.8276,267.7609},
	{-1989.9813,260.3492,34.8389,267.7609},
	{-1990.6466,257.3731,34.8298,267.7602},
	{-1990.6453,254.3750,34.8068,267.8321}
};

//LS Muscle Car
static LSMuscleSpawned[5];

static const Float:LSMuscleSpawnPos[][4] =
{
	{1938.5197,-2092.9497,13.6837,270.5187},
	{1938.5197,-2089.9497,13.6837,270.5187},
	{1938.5197,-2086.9497,13.6837,270.5187},
	{1938.5197,-2083.9497,13.6837,270.5187},
	{1938.5197,-2080.9497,13.6837,270.5187}
};

//SF售车场1
static SFCarSell1Spawned[8];

static const Float:SFCarSell1SpawnPos[][4] =
{
	{-2265.5078,188.7796,34.8689,269.7395},
	{-2265.6970,192.7023,34.8695,269.2575},
	{-2265.7524,196.7012,34.8693,268.9609},
	{-2265.4321,200.6873,34.8689,269.4402},
	{-2265.5952,204.6455,34.8688,268.8591},
	{-2265.5479,208.7218,34.8693,269.8457},
	{-2265.5845,212.4766,34.8693,269.6747},
	{-2265.4219,216.5427,34.8688,269.7533}
};

static const Float:GasStationPos[][3] =
{
	{1004.0070,-939.3102,42.1797},//0
	{1944.3260,-1772.9254,13.3906},
	{-90.5515,-1169.4578,2.4079},
	{-1609.7958,-2718.2048,48.5391},
	{-2029.4968,156.4366,28.9498},
	{-2408.7590,976.0934,45.4175},
	{-1676.6323,414.0262,6.9484},
	{-2243.9629,-2560.6477,31.8841},
	{2202.2349,2474.3494,10.5258},
	{614.9333,1689.7418,6.6968},
	{70.3882,1218.6783,18.5165},
	{2113.7390,920.1079,10.5255},
	{1596.3295,2199.1621,10.6951},
	{2639.3064,1106.5571,10.3922},
	{1382.0522,462.2694,19.9949},
	{-1470.1316,1864.1896,32.2050},
	{2147.0564,2747.5190,10.5266},
	{-1327.7218,2678.8723,50.0625}
};

static Text3D:GasText[sizeof(GasStationPos)];
static GasStationFilled[sizeof(GasStationPos)];

static const Float:LSFDHousePos[][3] =
{
	{2166.9827,-1672.6815,14.6434},//0
	{2140.4919,-1706.9513,14.6537},
	{2152.1912,-1807.6830,13.1145},
	{2326.5303,-1719.3022,13.1147},
	{2385.8599,-1713.3286,13.6841},
	{2362.2952,-1795.5830,13.1147},
	{2305.6580,-1786.0088,13.1245},
	{2248.2007,-1795.7778,13.1147},
	{2493.3110,-1957.4276,13.1600},
	{2498.6729,-1644.0135,13.3057},
	{2518.6116,-1661.6501,13.8821},
	{2362.9446,-1645.9576,13.1015},
	{2328.6501,-1681.8887,14.3488},
	{2387.2366,-1346.8357,24.1474},
	{2435.7139,-1274.8638,23.9056},
	{2440.6936,-1338.7865,23.6218},
	{2492.3296,-1400.0111,28.4064},
	{2469.2466,-1296.3286,29.4931},
	{2699.0532,-1237.9298,57.5604},
	{2747.5234,-1238.9458,60.9842},
	{2709.0078,-1203.0817,69.1228},
	{2550.5313,-1195.4839,60.3586},
	{2351.6501,-1168.4933,27.9610},
	{2427.3486,-1138.5266,34.2274},
	{2186.0298,-997.8646,66.4688},
	{2109.2905,-1000.2827,60.5078},
	{2008.8373,-986.8470,33.8637},
	{2095.1641,-1145.2783,26.5929},
	{2091.5212,-1185.3850,27.0571},
	{1822.2306,-1994.1792,13.5469},
	{2269.3740,-1883.0568,14.2344},
	{2853.4287,-1365.8844,14.1641},
	{2783.0442,-1333.3295,32.3537},
	{1326.3837,-1067.7231,31.5547},
	{1242.8193,-1100.5562,27.9766},
	{1242.5116,-877.7011,46.6406},
	{1290.6486,-896.7795,46.6251},
	{877.8835,-1517.4453,13.5547},
	{822.4454,-1502.2883,13.5938},
	{784.5083,-1464.6713,13.5469},
	{652.0106,-1619.8658,15.0000},
	{791.0557,-1663.6750,13.4854},
	{797.9606,-1729.5839,13.5469},
	{768.7399,-1696.4340,5.1554},
	{699.8597,-1060.0310,49.4217},
	{299.4782,-1155.4279,80.9099},
	{255.6136,-1366.3999,53.1094},
	{192.2754,-1746.0286,3.9013},
	{281.8605,-1771.1866,4.0343},
	{168.5979,-1770.2214,3.9970}
};

static const Float:SFFDHousePos[][3] =
{
	{-2027.6593,-41.4770,38.8047},//0
	{-2513.3015,-153.9423,25.2817},
	{-2514.0618,-189.5075,25.1968},
	{-2514.0618,-189.5075,25.1968},
	{-2541.6418,-120.1298,15.5897},
	{-2616.4187,-153.6438,3.9037},
	{-2722.5757,-105.5018,3.9073},
	{-2693.0796,-114.2415,3.9071},
	{-2723.2026,-179.0743,7.2031},
	{-2719.8816,-318.7888,7.4115},
	{-2720.0801,-146.6812,3.9037},
	{-2689.1541,-89.4697,3.9037},
	{-2689.1541,-89.4697,3.9037},
	{-2617.7322,115.0453,3.9037},
	{-2627.8276,168.6335,5.0000},
	{-2654.1453,200.3039,5.0000},
	{-2632.7285,274.4547,4.3348},
	{-2581.3433,716.4241,27.5289},
	{-2539.5540,767.4457,39.3913},
	{-2448.7200,818.7539,34.7475},
	{-2282.6919,849.6506,63.5078},
	{-2228.9351,931.6470,66.2162},
	{-2174.4946,905.0565,79.5756},
	{-2058.9966,891.4042,61.8542},
	{-2016.4860,999.7545,50.4130},
	{-1930.7314,1188.4717,45.0130},
	{-1782.9556,1158.7739,29.9343},
	{-2036.4120,1196.6880,45.8045},
	{-2354.3787,1243.9181,29.4656},
	{-2380.2034,1281.5100,22.5136},
	{-2475.8914,1264.0237,28.0264},
	{-2535.0933,1141.5095,55.2947},
	{-2598.0259,980.3644,77.8414},
	{-2640.6060,934.8857,71.5209},
	{-2707.1616,868.5742,70.2709},
	{-2855.6096,841.2527,39.7037},
	{-2851.9365,948.1660,43.6220}
};

static const Float:LVFDHousePos[][3] =
{
	{1498.4106,2535.5273,10.3881},//0
	{1273.9097,2564.1426,10.3881},
	{1265.5112,2607.7607,10.3881},
	{1576.0175,2842.3284,10.3881},
	{1703.5898,2691.1042,10.3883},
	{1998.7585,2722.1448,10.3881},
	{1989.0940,2663.9180,10.3881},
	{2625.1582,2196.4055,10.3882},
	{2825.0896,2140.5891,14.6615},
	{2483.4558,1526.7949,10.8663},
	{2501.1462,1681.4028,10.5915},
	{2206.3147,692.6636,11.0287},
	{2398.7346,734.6701,11.0287},
	{2572.1716,719.2676,14.7396},
	{2011.2058,694.3920,11.4609},
	{1533.3480,750.9860,10.5912},
	{1029.7991,1876.0640,11.0366},
	{987.3326,2000.3405,11.0287},
	{986.4238,2314.0884,11.0287},
	{1309.2421,1932.4868,11.0287},
	{1641.1229,2044.4384,10.8877},
	{1597.6741,2147.2051,11.0287}
};

static const Float:TrailerDeliverPos[][3] =
{
    {1702.3779,996.4951,10.5275},
    {1685.4573,2320.7605,10.5274},
    {2415.9890,-2210.1663,13.5469}
};

static const Float:SimeonM1TargetPos[][4] =
{
	{2348.1528,-1263.1725,22.1845,93.2948},
	{2464.1113,-1412.9166,23.4351,89.8445},
	{2261.5806,-1100.5785,37.6522,246.2100},
	{2484.3230,-1655.3047,12.9963,88.1689},
	{2362.6035,-1789.6608,13.2222,1.3412},
	{2344.7703,-1924.3829,13.2319,359.3860},
	{2495.3228,-1988.1752,13.1326,181.9881},
	{1878.1946,-2034.1544,13.1438,179.7404},
	{1700.3099,-2084.9377,13.2232,178.9978},
	{229.8227,-1741.0548,4.1060,1.1481},
	{564.2745,-1193.4672,44.4116,291.8602},
	{973.6129,-759.7849,111.7842,94.2320},
	{1410.4132,-635.2560,87.6391,164.2197},
	{882.0466,-1451.2513,13.2636,359.9349},
	{888.6047,-1668.7175,13.2303,180.7951},
	{686.3292,-1570.7379,13.9260,0.9377},
	{1947.0557,-1564.0598,13.2881,134.3178}
};

static const Float:SimeonM2TargetPos[][19] =
{//{centerX,centerY,centerZ, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A, veh4X,veh4Y,veh4Z,veh4A}
	{2797.1479,-1685.0530,9.8827, 2807.9780,-1672.2719,9.8105,179.7802, 2817.8286,-1672.7633,9.8249,180.0303, 2812.7327,-1672.7953,9.8146,180.0946, 2827.8091,-1672.7042,9.8517,179.5084},
	{1805.8187,-1938.6632,13.5469, 1804.9736,-1932.3495,13.2649,180.3671, 1800.1884,-1932.3799,13.2651,180.2039, 1795.5447,-1932.5366,13.2648,180.1910, 1790.0551,-1932.3307,13.2650,180.7634},
	{2092.6313,-1562.8428,13.1436, 2087.6201,-1556.8130,13.0907,179.8872, 2087.5518,-1566.0986,13.1386,179.2740, 2097.2537,-1557.0436,13.0773,359.5037, 2097.2297,-1567.4761,13.1380,0.0477},
	{1660.3774,-1702.8817,15.6094, 1668.9904,-1702.9949,15.4878,89.8672, 1669.3402,-1713.2743,15.4879,90.8616, 1660.3356,-1717.2241,15.4879,178.3514, 1669.4237,-1696.6510,15.4878,271.8580},
	{1607.2988,-1141.4758,24.0703, 1616.3958,-1132.8527,23.7848,89.5573, 1617.0730,-1128.2849,23.7848,90.6068, 1616.7970,-1123.8292,23.7848,91.0429, 1616.7588,-1119.0935,23.7847,90.9001}
};

static const Float:SimeonM3TargetPos[][4] =
{
    {2180.3855,-2276.9426,13.2229,315.4410},
	{839.1003,-2047.0499,12.5719,2.0154},
	{406.5372,-1314.7433,14.6075,212.9850},
	{860.1884,-1288.7499,13.5380,3.1085},
	{1248.7543,-807.2103,83.8459,180.4374},
	{1608.5762,-1264.5353,17.1945,179.4979},
	{2942.3376,-1449.4031,10.4908,87.7479}
};

static const Float:SweetM1TargetPos[][3] =
{
	{2144.8459,-1198.0472,23.8761},
	{1993.5780,-1231.4181,20.5149},
	{1889.9816,-1170.8395,24.1342},
	{2083.4956,-1366.0527,23.9844},
	{2223.6931,-1333.6006,23.9844},
	{2294.4209,-1327.8904,24.0000},
	{2289.6880,-1524.2729,26.8750},
	{2317.1443,-1533.1052,25.3438},
	{2245.9583,-1742.3080,13.5469},
	{2099.8108,-1772.3699,13.5632},
	{2061.9673,-1914.2665,13.5469},
	{2041.2958,-1649.4277,13.5469},
	{2041.0125,-1703.3312,13.5547},
	{1923.4966,-1792.2919,13.3828},
	{2313.7380,-1989.2679,13.5583},
	{2484.8794,-1949.1919,13.4627},
	{2509.5032,-1781.8717,13.5469}
};

static const Float:SweetM2TargetPos[][9] =
{
	{2054.4702, -1101.2370, 25.3005, 0.0000, 0.0000, 93.0998, 2060.1133,-1106.5405,24.5081},//{TagX, TagY, TagZ, TagRX, TagRY, TagRZ, NPCX,NPCY,NPCZ}
	{2233.3278, -1351.1704, 24.5259, 0.0000, 0.0000, 0.0000, 2229.9753,-1350.7771,23.9858},
	{2105.5627, -1345.6685, 24.7743, 0.0000, 0.0000, -91.0000, 2106.0500,-1343.5144,23.9844},
	{2260.6213, -1687.4084, 14.6890, 0.0000, 0.0000, 90.7000, 2259.6257,-1691.0844,13.7191},
	{2138.5214, -1729.6927, 14.2800, 0.0000, 0.0000, -89.9999, 2138.5566,-1727.5601,13.5402},
	{2055.0261, -1781.8861, 14.4968, 0.0000, 0.0000, -90.3999, 2053.7278,-1778.8141,13.5469},
	{2065.4904, -1897.2148, 13.5868, 0.0000, 0.0000, 90.5998, 2065.7195,-1909.0449,13.5469},
	{1700.6556, -1852.7655, 13.7353, 0.0000, 0.0000, -179.5000, 1702.2059,-1864.0189,13.5697},
	{1767.7535, -1687.1751, 14.0957, 0.0000, 0.0000, 90.2998, 1767.5033,-1691.3953,13.4276},
	{1914.0715, -1435.7670, 14.0545, 0.0000, 0.0000, 89.8999, 1914.1603,-1441.3032,13.5251},
	{2375.3315, -1412.2729, 24.5530, 0.0000, 0.0000, 178.8000, 2381.9475,-1415.9578,24.0078},
	{2480.4995, -1538.9658, 24.6601, 0.0000, 0.0000, 179.1002, 2484.9019,-1539.1998,23.9908},
	{2500.6594, -1454.5963, 24.5680, 0.0000, 0.0000, 90.9000, 2519.8477,-1474.1907,23.9944},
	{2399.6979, -2017.8018, 13.9837, 0.0000, 0.0000, -90.2000, 2406.2573,-2015.1486,13.5469},
	{2100.1315, -1907.4329, 14.3228, 0.0000, 0.0000, 179.5002, 2113.5940,-1901.9635,13.5469}
};

static const Float:SweetM3TargetPos[][9] =
{
    {2347.4282,-1990.1860,13.3828},
	{2782.0212,-2005.9083,13.5547},
	{2632.0798,-1614.2319,10.7448},
	{2330.6877,-1775.5005,13.5623},
	{2522.5266,-1525.8760,23.8080},
	{2223.0208,-1161.1616,25.7331},
	{1826.9879,-1396.6053,13.4267}
};

static const Float:TrevorM1TargetPos[][14] =
{//{veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, npc1X,npc1Y,npc1Z, npc2X,npc2Y,npc2Z}
	{653.6174,1692.2836,7.5773,42.0615, 647.6912,1686.7699,7.5777,40.8028, 642.2659,1699.2957,6.9922, 659.4976,1706.1659,10.9149},
	{1282.4331,192.7992,20.4730,157.0502, 1289.1521,184.1978,20.9544,154.2757, 1274.7974,152.9876,20.3305, 1288.3069,171.3759,20.4609},
	{-227.2456,2799.2629,62.6059,88.5449, -237.2084,2811.3862,62.2432,179.9186, -247.3714,2799.3574,62.1196, -218.5359,2779.2029,62.5078}
};

static const Float:TrevorM2TargetPos[][15] =
{//{veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A, npcX,npcY,npcZ}
	{-865.6564,1544.7581,22.5319,91.7931, -865.5944,1547.6132,22.7796,91.1769, -866.2376,1550.8378,23.0594,91.4326, -859.9171,1545.8145,23.0811},
	{-1476.4386,1878.2848,32.1729,4.0101, -1479.6421,1877.6947,32.1729,3.8555, -1489.0801,1877.2795,32.1730,185.1457, -1487.9421,1867.2894,32.5754},
	{-1288.6891,2720.5842,49.6026,4.0914, -1292.5314,2718.6465,49.6026,3.3521, -1296.3309,2716.5527,49.6026,3.5667, -1290.9722,2702.2366,50.0625},
	{274.5114,2547.3403,16.2709,42.1159, 266.1537,2555.4805,16.3170,90.3644, 255.8967,2538.0981,16.2631,98.2195, 267.5355,2545.4060,16.8125},
	{-123.9851,927.8809,19.7597,298.1395, -106.6907,943.3585,20.2835,357.9516, -121.2078,957.4858,20.1297,86.0831, -119.7082,946.8507,20.8221},
	{395.7949,1149.5226,8.0137,91.0780, 395.7155,1165.9291,7.4535,89.9198, 395.2486,1172.0042,7.4536,87.7153, 406.6158,1153.2471,8.0881},
	{-80.2751,1077.8580,19.2823,177.0340, -83.9485,1076.7739,19.2823,180.7454, -87.3700,1076.5685,19.2823,179.0152, -80.9844,1084.7030,19.7422}
};

static const Float:TrevorM3TargetPos[][4] =
{//{zoneMaxX, zoneMinX, zoneMaxY, zoneMinY}
    {163.4902, -432.0814, 1109.398, 887.5186},
	{864.1628, 338.6584, 1377.989, 1167.788},
	{-665.6389, -817.4513, 1366.311, 817.4513},
	{-210.2018, -455.4371, 1693.292, 1471.412},
	{303.6248, -81.74512, 1716.648, 1448.057},
	{770.7397, 338.6584, 1716.648, 1413.023},
	{-864.1628, -1109.398, 1833.426, 1529.802},
	{-1132.754, -1424.701, 2604.166, 2323.897},
	{-1506.446, -1763.359, 2300.542, 1985.239},
	{-607.2495, -852.4849, 2545.777, 2347.253},
	{-420.4035, -688.9946, 2767.656, 2510.743},
	{478.7929, -93.423, 2674.233, 2440.676},
	{-163.4902, -420.4035, 2452.354, 2242.152},
	{-268.5911, -478.7929, 2148.729, 1880.138},
	{548.8602, 210.2018, 2487.387, 2230.474},
	{303.6248, -980.9415, 2872.757, 2767.656},
	{-1296.244, -2160.407, 2861.08, 2732.623}
};

static const Float:CesarM1TargetPos[][19] =
{//{npcX,npcY,npcZ, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A, veh4X,veh4Y,veh4Z,veh4A}
	{1791.8259,-1911.3333,13.3980, 1778.3464,-1929.0800,13.1857,313.5086, 1777.5743,-1915.8149,13.1879,296.8260, 1776.4480,-1895.2719,13.1588,181.2063, 1797.3943,-1922.6860,13.2570,53.1148},
	{2750.3604,-1860.8195,9.6719, 2752.5366,-1875.7592,9.4947,1.0692, 2763.1853,-1876.0199,9.5237,359.5166, 2748.1099,-1850.6652,9.4660,193.0205, 2762.6189,-1845.3240,9.5088,200.1734},
	{1713.3853,-1022.7259,23.9063, 1703.4705,-1005.4833,23.6803,172.6844, 1712.7561,-1006.3979,23.7789,171.3159, 1725.9735,-1007.5822,23.7347,165.6196, 1735.8058,-1010.2098,23.7508,167.4143},
	{584.5042,-1856.0618,4.9501, 582.7802,-1873.2341,3.9720,352.6575, 561.6414,-1875.3484,3.7021,302.8534, 543.6694,-1841.7771,5.0542,267.2325, 609.7682,-1855.4896,4.9967,120.7938},
	{1260.8921,-2032.4625,59.3944, 1276.9930,-2041.8362,58.7960,91.1603, 1276.6521,-2036.2018,58.7171,88.9767, 1251.4640,-2010.2550,59.4320,181.1026, 1246.2560,-2030.5042,59.5944,269.1020}
};

static const Float:CesarM2TargetPos[][3] =
{
	{2661.3315,-1430.0647,30.4847},
	{2817.2161,-1559.4824,10.9219},
	{2599.7571,-1066.7523,69.5802},
	{2339.3469,-1196.1068,27.9766},
	{2359.8806,-1361.8518,24.0203},
	{2155.9070,-1137.9600,25.2792},
	{1746.1823,-1967.9073,14.1172}
};

static const Float:CesarM3TargetPos[][12] =
{//{wave1X,wave1Y,wave1Z, wave2X,wave2Y,wave2Z, wave3X,wave3Y,wave3Z, wave4X,wave4Y,wave4Z}
	{1827.0712,-1993.3075,13.5469, 1867.5491,-1992.0449,13.5469, 1882.2955,-2021.3333,13.3906, 1907.3936,-2017.4952,13.5469},
	{2269.5615,-1107.9409,37.9766, 2287.3240,-1053.5051,49.2943, 2267.0588,-1038.9641,51.5575, 2220.7190,-1055.3824,46.0057},
	{2411.0647,-1379.7128,24.4631, 2480.6785,-1371.1682,28.8358, 2539.2397,-1357.3121,30.7997, 2542.8669,-1321.9984,35.8115},
	{2659.6404,-1592.9417,13.4958, 2677.2737,-1551.9098,22.7412, 2677.9844,-1593.8069,13.1997, 2710.1133,-1595.6708,13.4534}
};

static const Float:EmmetM1TargetPos[][4] =
{
	{2796.5293,-2417.6880,13.3744,90.0},
	{2796.0059,-2455.9050,13.3750,90.0},
	{2795.2505,-2494.2688,13.3839,90.0}
};

static const Float:EmmetM1BackupPos[][4] =
{
	{2641.6592,-2503.6152,13.2356,177.1858},
	{2406.8547,-2421.6167,13.1229,135.6636},
	{2507.5701,-2304.5261,24.0701,133.8659},
	{2380.1506,-2176.7083,22.7173,131.7487},
	{2344.8711,-2361.3809,13.1233,133.9386},
	{2277.6650,-2663.1028,13.2936,194.3782}
};

static const Float:EmmetM2TargetPos[][20] =
{//{npc1X,npc1Y,npc1Z,npc1A, npc2X,npc2Y,npc2Z,npc2A, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A}
	{1652.3350,-1711.7389,20.4844,269.5951, 1666.0408,-1709.1053,20.4772,89.4501, 1672.9565,-1698.4344,20.2644,0.9735, 1649.9955,-1694.7699,20.2360,90.8248, 1647.9890,-1720.8198,20.2567,91.0201},
	{2222.8774,-2224.2551,13.5469,138.4323, 2209.4697,-2238.3792,13.5469,314.1906, 2196.9089,-2237.0703,13.3277,223.9029, 2234.7959,-2225.7400,13.3309,134.8331, 2209.3674,-2219.4729,13.2517,136.6902},
	{1112.1571,-1477.8512,15.7969,180.9700, 1111.5515,-1494.2257,15.7969,359.2350, 1069.5906,-1495.1169,13.8283,180.3553, 1128.7157,-1539.6866,14.7085,268.4111, 1128.7157,-1539.6866,14.7085,268.4111}
};

static const Float:EmmetM3TargetPos[][3] =
{
	{1801.4016,-2032.8677,13.5108},
	{2119.3208,-2171.0601,13.5469},
	{2747.6631,-1944.1094,13.5469},
	{2167.1785,-1700.6956,15.0859},
	{2231.3298,-1437.8381,24.0309},
	{2388.1443,-1310.2842,25.2229},
	{2553.9270,-1217.1670,53.7729},
	{2702.9580,-1640.3025,12.4137},
	{1710.8000,-1477.9153,13.5469},
	{1665.1970,-1893.5457,13.5469},
	{1374.3362,-1502.4121,13.5469},
	{1712.6099,-1102.0923,24.0781},
	{2011.1007,-1044.7638,24.6964}
};

static const Float:TorenoM1TargetPos[][10] =
{//{npc1X,npc1Y,npc1Z, vehX,vehY,vehZ,vehA, npc2X,npc2Y,npc2Z}
	{-2774.2327,-296.7823,7.0391, -2779.0715,-282.4665,6.8775,180.4807, -2431.9614,2231.5505,4.9844},
	{-2124.0642,145.5989,35.0282, -2136.3826,124.9722,35.4616,270.8463, -2079.0144,1412.8643,7.1016},
	{-1834.2554,1420.3352,7.1875, -1848.3492,1412.4944,7.0193,180.2399, -2706.4414,389.4614,4.3750},
	{-2434.5403,731.5325,35.0156, -2425.4941,741.2961,34.5842,179.0596, -2523.1001,-7.9220,25.6172}
};

static const Float:TorenoM2VehPos[][4] =
{
    {425.0530,2513.1897,16.9426,89.8220},
	{425.0312,2494.5078,16.9453,88.9815},
	{398.2686,2494.9819,16.9401,88.9819},
	{398.3625,2513.2427,16.9477,89.8802}
};

static const Float:TorenoM2TargetPos[][4] =
{
	{-793.2452,2418.9785,156.9796,111.2597},
	{-239.4686,1442.1161,74.6127,279.1317},
	{-1112.6492,2051.8489,143.7646,146.3423},
	{-1693.9067,2813.6196,107.4461,109.1576},
	{-1666.3676,1791.4479,21.4694,8.2019},
	{-909.7187,814.3466,17.0949,200.7004},
	{-43.0743,702.2271,22.1386,35.7104},
	{842.8348,823.1984,13.1592,9.2230},
	{860.1342,2212.6782,10.8203,356.5654}
};

static const Float:TorenoM3TargetPos[][11] =
{//{npcX,npcY,npcZ, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A}
    {1152.0795,1450.0895,5.8203, 1156.9211,1428.6095,5.4767,115.7380, 1142.7189,1450.2266,5.4763,353.1847},
    {1045.8828,2085.8770,10.8203, 1050.5889,2099.9905,10.4728,265.9559, 1040.2439,2099.9150,10.4766,277.5498},
    {1610.0486,2235.1646,10.8203, 1600.6499,2214.1716,10.4768,234.9005, 1610.6155,2213.5581,10.4766,283.3900},
    {1632.8970,2357.8875,10.8203, 1637.3419,2345.8467,10.4460,89.8546, 1627.5557,2370.2175,10.4766,156.8066},
    {1675.3079,2843.6416,10.8203, 1675.5052,2829.4165,10.4770,246.6762, 1688.0718,2826.2131,10.4569,277.2056},
    {2208.3374,2751.3689,10.8203, 2216.9473,2748.7622,10.4769,177.6087, 2211.6711,2760.3408,10.4766,105.7178},
    {2204.0359,2518.8694,10.8130, 2214.8938,2522.9573,10.4771,164.4149, 2217.2905,2515.0378,10.4766,209.5007},
    {2063.3740,2474.3723,10.8203, 2067.7532,2463.8005,10.4742,88.7888, 2057.8005,2464.0103,10.4767,88.6243},
    {2045.7914,2258.0576,10.8203, 2037.2064,2274.3406,10.4766,264.9637, 2046.1040,2274.2813,10.4764,270.9085},
    {2556.4063,2313.9978,10.8203, 2542.7700,2320.9907,10.4697,89.0496, 2556.0327,2297.5891,10.4767,177.6145},
    {2427.6965,1934.3469,6.0156, 2429.1272,1944.6912,5.6725,87.1497, 2412.2366,1927.1890,5.6719,177.9069},
    {2603.1296,1391.6155,10.8203, 2593.4207,1395.2657,10.4771,173.1226, 2593.3933,1386.4243,10.4766,180.9607},
    {2551.4014,1228.3846,10.8203, 2551.1482,1243.1409,10.4696,262.3294, 2550.9619,1202.7222,10.4766,81.9584},
    {2406.3989,956.7664,10.8130, 2416.2891,953.8036,10.4659,90.4292, 2385.4565,958.0408,10.4766,44.4131},
    {1853.4518,1249.3527,10.8312, 1847.1910,1238.1549,10.4837,266.0987, 1858.7035,1238.8707,10.4862,283.3376},
    {1748.9485,754.0278,10.8203, 1751.3752,738.6583,10.4767,272.5771, 1742.2030,737.7753,10.4766,244.5059}
};

static const Float:WoozieM1TargetPos[][22] =
{//{npc1X,npc1Y,npc1Z, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A, npc2X,npc2Y,npc2Z, veh4X,veh4Y,veh4Z,veh4A}
	{-1372.2922,-205.3065,6.0000, -1370.5574,-212.0531,5.6562,89.3253, -1397.3065,-238.0189,5.6632,177.8067, -1345.8334,-145.8384,5.6563,270.1430, -1727.6516,-579.9041,16.3359, -1725.0947,-580.2416,15.9887,179.3360},
	{-2110.0171,-260.7696,35.3203, -2105.8245,-270.7740,34.9766,6.1447, -2139.8994,-181.9860,34.9766,83.5524, -2131.3064,-180.6152,34.9767,90.7601, -2126.6523,-76.7395,35.1797, -2126.9075,-81.9334,34.9688,92.7364},
	{-2535.4543,1229.2141,37.4219, -2538.7705,1223.1508,37.0782,268.7364, -2494.5754,1197.8964,37.6356,295.3926, -2486.7798,1201.7998,36.3982,299.8743, -2467.8965,1206.6605,35.0859, -2471.2380,1203.6191,34.7423,223.3116},
	{-1811.9740,1302.8660,31.8516, -1811.0231,1293.2023,31.5077,4.8124, -1777.3411,1292.0521,31.5038,1.1876, -1848.3101,1281.8163,31.5098,198.4015, -1812.4105,1274.8525,14.9610, -1811.5341,1281.0155,14.5219,92.1306},
	{-1702.8904,1016.9847,17.5859, -1703.8397,1028.4912,17.2423,270.7346, -1783.4215,969.8909,24.3908,184.2724, -1783.0900,996.9935,24.3907,357.6982, -1776.7233,984.8298,23.5498, -1771.7260,984.8625,23.1737,181.0787}
};

static const Float:WoozieM2TargetPos[][3] =
{
	{-1575.4097,127.4277,3.5495},
	{-1742.8025,264.1472,7.1172},
	{-1655.4448,436.0953,7.1797},
	{-1430.1107,936.0643,7.1875},
	{-1459.7230,1142.0250,7.1875},
	{-1790.8558,1418.0835,7.1875},
	{-2113.3713,1255.1187,19.6476},
	{-2224.8718,438.3862,35.1719},
	{-1986.6617,582.2642,35.2464},
	{-1834.1088,422.7545,17.1773}
};

static const Float:WoozieM3TargetPos[][20] =
{//{npc1X,npc1Y,npc1Z,npc1A, npc2X,npc2Y,npc2Z,npc2A, veh1X,veh1Y,veh1Z,veh1A, veh2X,veh2Y,veh2Z,veh2A, veh3X,veh3Y,veh3Z,veh3A}
	{1388.1161,679.5417,10.8280,87.8488, 1372.8701,678.8546,10.8203,263.2938, 1360.7910,701.0184,10.4823,271.5238, 1380.7869,700.9555,10.4766,84.2707, 1392.4430,666.1379,10.4843,91.1750},
	{2297.8228,583.7283,7.7813,90.6542, 2283.8560,580.8252,7.7813,268.9192, 2281.8667,623.7659,10.4447,250.3968, 2292.4607,623.8525,10.4353,271.9797, 2274.9404,596.2896,7.4370,90.2397},
	{2407.3740,1235.1949,7.1641,359.0258, 2407.3032,1258.4857,7.1641,180.4241, 2407.1709,1218.0295,6.8067,82.7021, 2406.4563,1311.2402,6.8204,269.4134, 2407.0830,1326.6343,6.8203,86.9211},
	{2650.1775,2319.4788,10.6719,345.9247, 2653.5410,2336.1062,10.6719,169.5163, 2637.5615,2311.2920,10.4786,359.3615, 2635.5654,2318.5366,10.3321,30.6742, 2647.3132,2342.5486,10.3281,147.7720},
	{2012.8623,2331.0923,10.8203,179.6033, 2013.1047,2320.2705,10.8203,356.6383, 2013.8823,2354.8750,10.4768,99.5290, 2013.8800,2300.2852,10.4766,248.9178, 1936.2489,2329.9341,10.4767,1.0607},
	{956.5798,2024.1552,10.8203,178.6893, 956.8395,2008.8206,10.8203,357.2676, 951.0291,1997.8842,10.4766,262.1696, 964.9109,1999.3844,10.4766,358.5786, 964.0992,2040.5277,10.4767,179.4464}
};

static const Float:BigFootPos[][4] =
{
	{-724.4617,-2075.7205,10.0185,102.4876},
	{-987.2568,-2437.7788,77.2093,336.1896},
	{-681.7050,-2558.9907,55.4551,258.4127},
	{-1389.4860,-2389.5144,33.0984,354.4531},
	{-1800.7948,-1991.8853,86.1843,343.6352},
	{-558.0043,-1480.3042,9.3966,253.1924},
	{2516.9487,-428.3617,79.0419,156.7613},
	{-2836.1760,-1576.8777,141.3203,62.0509}
};

static Text3D:lakeinfo;

static const Float:RepairGarage[][] =
{
	{1024.9022,-1031.9060,31.5465},
	{488.6485,-1732.2764,10.8115},
	{-1420.7141,2594.3171,55.3339},
	{-1904.8491,274.4849,40.6354},
	{-2425.6284,1031.5087,49.9885},
	{1965.5154,2162.2080,10.4183},
	{2386.4438,1039.8445,10.4155},
	{-100.1489,1106.7852,19.3409},
	{719.9736,-466.5667,15.9350},
	{2075.3284,-1831.4305,13.1522}
};

static const SkinShop_Cheap[][] =
{
	{54},{55},{56},{57},{58},
	{59},{60},{61},{62},{63},
	{64},{65},{66},{67},{68},
	{69},{70},{71},{72},{73},
	{74},{75},{76},{77},{78},
    {79},{80},{81},{82},{83},
	{84},{85},{86},{87},{88},
	{89},{90},{91}
};

static const SkinShop_Leisure[][] =
{
	{92},{93},{94},{95},{96},
	{97},{98},{99},{100},{101},
	{102},{103},{104},{105},{106},
	{107},{108},{109}
};

static const SkinShop_Fashion[][] =
{
	{110},{111},{112},{113},{114},
	{115},{116},{117},{118},{119},
	{120},{121},{122},{123},{124},
	{125},{126},{127}
};

static const SkinShop_Street[][] =
{
	{128},{129},{130},{131},{132},
	{133},{134},{135},{136},{137},
	{138},{139},{140},{141},{142},
	{143},{144},{145},{146},{147},
	{148},{149},{150},{151},{152},
    {153},{154},{155},{156},{157},
	{158}
};

static const SkinShop_Country[][] =
{
	{159},{160},{161},{162},{163},
	{164},{165},{166},{167},{168},
	{169},{170},{171},{172},{173},
	{174},{175},{176},{177},{178},
	{179}
};

static const SkinShop_Business[][] =
{
	{180},{181},{182},{183},{184},
	{185},{186},{187},{188},{189},
	{190},{191},{192},{193},{194},
	{195}
};

static const SkinShop_Suit[][] =
{
	{196},{197},{198},{199},{200},
	{201}
};

static const SkinShop_Newbie[][] =
{
	{88},{131},{54},{129},{135},
	{120},{134},{69},{125},{111},
	{100},{119},{67},{57},{75},
	{122}
};

enum E_CARSELL
{
	csModel,
	csDes[144]
}

static const LVCARSELL1DATA[][E_CARSELL] =
{
    {518,""},
    {517,""},
	{579,""},
	{405,""},
	{507,""},
	{535,""},
	{560,""},
	{411,""}
};

static const GROTTIDATA[][E_CARSELL] =
{
    {415,""},
    {451,""},
	{506,""},
	{603,""}
};

static const LSCARSELL1DATA[][E_CARSELL] =
{
    {400,""},
    {516,""},
	{527,""},
	{536,""},
	{540,""},
	{542,""},
	{543,""},
	{546,""},
	{549,""},
	{555,""},
	{586,""}
};

static const WANGCARDATA[][E_CARSELL] =
{
    {565,""},
    {558,""},
	{559,""},
	{560,""},
	{561,""},
	{562,""},
	{587,""},
	{602,""},
	{477,""},
	{496,""}
};

static const LSMUSCLEDATA[][E_CARSELL] =
{
    {412,""},
    {534,""},
	{535,""},
	{536,""},
	{566,""},
	{567,""},
	{575,""},
	{576,""},
	{439,""},
	{533,""},
	{467,""},
	{466,""},
	{603,""},
	{491,""},
	{475,""}
};

static const BISVEHSELLDATA[][E_CARSELL] =
{
    {413,""},
    {414,""},
	{420,""},
	{438,""},
	{422,""},
	{428,""},
	{431,""},
	{437,""},
	{440,""},
	{456,""},
	{459,""},
	{482,""},
	{498,""},
	{499,""},
	{525,""},
	{530,""},
	{554,""},
	{514,""},
	{403,""},
	{435,"订购后请到货柜旁按Y完成购买手续,货柜有更多的储物空间(在货柜旁按Y存取),当你有货车头时可以挂载此货柜进行运送以及更改重生位置"},
	{591,"订购后请到货柜旁按Y完成购买手续,货柜有更多的储物空间(在货柜旁按Y存取),当你有货车头时可以挂载此货柜进行运送以及更改重生位置"},
	{582,"记者车上附有空拍机以及摄影设备,打开储物空间即可存取"}
};

static const SFBIKEDATA[][E_CARSELL] =
{
    {462,""},
    {463,""},
	{461,""},
	{581,""},
	{521,""},
	{468,""}
};

static const SFCARSELL1DATA[][E_CARSELL] =
{
    {402,""},
    {419,""},
    {483,""},
	{554,""},
	{551,""},
	{550,""},
	{546,""},
	{542,""},
	{517,""},
	{505,""},
	{426,""},
	{429,""},
	{541,""}
};

//让汽车销售员贩售的载具列表(已贩售次数更多可以选择贩售更高级的载具)
static const CarSellJob_Low[][E_CARSELL] =
{
    {400,""},
    {401,""},
    {404,""},
    {410,""},
    {418,""},
    {422,""},
    {436,""},
    {445,""},
    {458,""},
    {462,""},
    {479,""},
    {518,""},
    {529,""},
    {542,""},
    {546,""},
    {547,""},
    {604,""},
    {605,""}
};

static const CarSellJob_Mid[][E_CARSELL] =
{
    {405,""},
    {421,""},
    {426,""},
    {439,""},
    {463,""},
    {468,""},
    {471,""},
    {492,""},
    {496,""},
    {500,""},
    {505,""},
    {507,""},
    {526,""},
    {527,""},
    {533,""},
    {535,""},
    {545,""},
    {555,""},
    {561,""},
    {566,""},
    {567,""},
    {575,""},
    {576,""},
    {586,""},
    {600,""},
    {602,""}
};

static const CarSellJob_High[][E_CARSELL] =
{
    {402,""},
    {409,""},
    {461,""},
    {477,""},
    {521,""},
	{558,""},
	{559,""},
	{560,""},
	{562,""},
	{565,""},
	{568,""},
	{581,""},
	{587,""},
	{589,""},
	{603,""}
};

static const CarSellJob_Super[][E_CARSELL] =
{
    {411,""},
    {415,""},
    {429,""},
    {444,""},
	{451,""},
	{480,""},
	{494,""},
	{502,""},
	{503,""},
	{506,""},
	{522,""},
	{556,""},
	{557,""}
};

enum E_VEHLIST
{
    vName[32],
	vValue,
    Float:vAttachZ,//By X337
    Float:voArmor
}

static const VehList[212][E_VEHLIST] =
{
		{"Landstalker", 300000, 0.85, 0.0},
		{"Bravura", 90000, 0.8, 0.0},
		{"Buffalo", 650000, 0.79, 0.0},
		{"Linerunner", 400000, 2.15, 0.0},
		{"Perrenial", 110000, -1.0, 0.0},
		{"Sentinel", 300000, 0.73, 0.0},
		{"Dumper", 2000000, -1.0, 1000.0},
		{"Firetruck", 500000, -1.0, 500.0},
		{"Trashmaster", 500000, -1.0, 0.0},
		{"Stretch", 800000, 0.8, 0.0},
		{"Manana", 65000, 0.899999, 0.0},
		{"Infernus", 1250000, 0.699999, 0.0},
		{"Voodoo", 210000, 0.699999, 0.0},
		{"Pony", 240000, 1.149999, 0.0},
		{"Mule", 400000, 2.4, 0.0},
		{"Cheetah", 1220000, 0.61, 0.0},
		{"Ambulance", 500000, -1.0, 200.0},
		{"Leviathan", 2400000, -1.0, 0.0},
		{"Moonbeam", 200000, 1.1, 0.0},
		{"Esperanto", 195000, 0.699999, 0.0},
		{"Taxi", 200000, 0.85, 0.0},
		{"Washington", 280000, 0.699999, 0.0},
		{"Bobcat", 185000, -1.0, 0.0},
		{"Mr Whoopee", 200000, -1.0, 0.0},
		{"BF Injection", 450000, -1.0, 0.0},
		{"Hunter", 5000000, -1.0, 1000.0},
		{"Premier", 180000, 0.85, 0.0},
		{"Enforcer", 500000, -1.0, 1000.0},
		{"Securicar", 450000, 1.6, 500.0},
		{"Banshee", 1000000, -1.0, 0.0},
		{"Predator", 850000, -1.0, 0.0},
		{"Bus", 500000, -1.0, 0.0},
		{"Rhino", 50000000, -1.0, 2000.0},
		{"Barracks", 500000, -1.0, 500.0},
		{"Hotknife", 900000, 0.8, 0.0},
		{"Trailer", 100000, -1.0, 0.0},
		{"Previon", 85000, 0.8, 0.0},
		{"Coach", 500000, -1.0, 0.0},
		{"Cabbie", 200000, 0.95, 0.0},
		{"Stallion", 210000, -1.0, 0.0},
		{"Rumpo", 300000, 1.269999, 0.0},
		{"RC Bandit", 0, -1.0},
		{"Romero", 266666, 0.92, 0.0},
		{"Packer", 420000, -1.0, 0.0},
		{"Monster", 10000000, -1.0, 0.0},
		{"Admiral", 1000000, 0.86, 0.0},
		{"Squalo", 820000, -1.0, 0.0},
		{"Seasparrow", 4000000, -1.0, 0.0},
		{"Pizzaboy", 40000, -1.0, 0.0},
		{"Tram", 0, -1.0, 0.0},
		{"Trailer", 100000, -1.0, 0.0},
		{"Turismo", 1250000, 0.569999, 0.0},
		{"Speeder", 900000, -1.0, 0.0},
		{"Reefer", 500000, -1.0, 0.0},
		{"Tropic", 500000, -1.0, 0.0},
		{"Flatbed", 500000, -1.0, 0.0},
		{"Yankee", 450000, -1.0, 0.0},
		{"Caddy", 50000, -1.0, 0.0},
		{"Solair", 140000, 0.759999, 0.0},
		{"Berkley's RC Van", 2500000, -1.0, 0.0},
		{"Skimmer", 1100000, -1.0, 0.0},
		{"PCJ-600", 600000, -1.0, 0.0},
		{"Faggio", 40000, -1.0, 0.0},
		{"Freeway", 450000, -1.0, 0.0},
		{"RC Baron", 0, -1.0, 0.0},
		{"RC Raider", 0, -1.0, 0.0},
		{"Glendale", 230000, 0.86, 0.0},
		{"Oceanic", 175000, 0.86, 0.0},
		{"Sanchez", 200000, -1.0, 0.0},
		{"Sparrow", 1000000, -1.0, 0.0},
		{"Patriot", 600000, 1.1, 0.0},
		{"Quad", 80000, -1.0, 0.0},
		{"Coastguard", 800000, -1.0, 0.0},
		{"Dinghy", 650000, -1.0, 0.0},
		{"Hermes", 150000, 0.839999, 0.0},
		{"Sabre", 250000, 0.699999, 0.0},
		{"Rustler", 4000000, -1.0, 0.0},
		{"ZR-350", 7500000, 0.699999, 0.0},
		{"Walton", 50000, -1.0, 0.0},
		{"Regina", 110000, 1.0, 0.0},
		{"Comet", 860000, -1.0, 0.0},
		{"BMX", 3000, -1.0, 0.0},
		{"Burrito", 300000, 1.0, 0.0},
		{"Camper", 200000, 1.049999, 0.0},
		{"Marquis", 500000, -1.0, 0.0},
		{"Baggage", 40000, -1.0, 0.0},
		{"Dozer", 5000000, -1.0, 500.0},
		{"Maverick", 1000000, -1.0, 0.0},
		{"News Chopper", 850000, -1.0, 0.0},
		{"Rancher", 300000, 1.1, 0.0},
		{"FBI Rancher", 300000, 1.0, 500.0},
		{"Virgo", 140000, 0.699999, 0.0},
		{"Greenwood", 110000, 0.87, 0.0},
		{"Jetmax", 820000, -1.0, 0.0},
		{"Hotring", 1000000, 0.74, 0.0},
		{"Sandking", 720000, 1.039999, 0.0},
		{"Blista Compact", 150000, 0.839999, 0.0},
		{"Police Maverick", 900000, -1.0, 0.0},
		{"Boxville", 275000, -1.0, 0.0},
		{"Benson", 275000, -1.0, 0.0},
		{"Mesa", 315000, 1.0, 0.0},
		{"RC Goblin", 0, -1.0, 0.0},
		{"Hotring Racer A", 1000000, -1.0, 0.0},
		{"Hotring Racer B", 1000000, -1.0, 0.0},
		{"Bloodring Banger", 850000, 0.899999, 0.0},
		{"Rancher", 300000, -1.0, 0.0},
		{"Super GT", 860000, -1.0, 0.0},
		{"Elegant", 315000, 0.81, 0.0},
		{"Journey", 400000, -1.0, 0.0},
		{"Bike", 1000, -1.0, 0.0},
		{"Mountain Bike", 4500, -1.0, 0.0},
		{"Beagle", 1400000, -1.0, 0.0},
		{"Cropdust", 950000, -1.0, 0.0},
		{"Stunt", 1500000, -1.0, 0.0},
		{"Tanker", 100000, 1.549999, 0.0},
		{"Roadtrain", 500000, 1.47, 0.0},
		{"Nebula", 160000, 0.86, 0.0},
		{"Majestic", 150000, 0.86, 0.0},
		{"Buccaneer", 120000, 0.699999, 0.0},
		{"Shamal", 3500000, 1.0, 0.0},
		{"Hydra", 6000000, -1.0, 500.0},
		{"FCR-900", 640000, -1.0, 0.0},
		{"NRG-500", 900000, -1.0, 0.0},
		{"HPV1000", 400000, -1.0, 0.0},
		{"Cement Truck", 500000, -1.0, 0.0},
		{"Tow Truck", 300000, -1.0, 0.0},
		{"Fortune", 100000, 0.68, 0.0},
		{"Cadrona", 104000, 0.85, 0.0},
		{"FBI Truck", 500000, 1.1, 1500.0},
		{"Willard", 84000, 0.92, 0.0},
		{"Forklift", 50000, -1.0, 0.0},
		{"Tractor", 150000, -1.0, 0.0},
		{"Combine", 600000, -1.0, 1000.0},
		{"Feltzer", 400000, -1.0, 0.0},
		{"Remington", 450000, 0.649999, 0.0},
		{"Slamvan", 500000, -1.0, 0.0},
		{"Blade", 350000, -1.0, 0.0},
		{"Freight", 0, -1.0, 0.0},
		{"Streak", 0, -1.0, 0.0},
		{"Vortex", 900000, -1.0, 0.0},
		{"Vincent", 350000, 0.73, 0.0},
		{"Bullet", 950000, 0.639999, 0.0},
		{"Clover", 90000, 0.85, 0.0},
		{"Sadler", 45000, -1.0, 0.0},
		{"Firetruck", 500000, -1.0, 500.0},
		{"Hustler", 390000, 0.769999, 0.0},
		{"Intruder", 79000, 0.85, 0.0},
		{"Primo", 120000, 0.899999, 0.0},
		{"Cargobob", 2000000, -1.0, 500.0},
		{"Tampa", 100000, -1.0, 0.0},
		{"Sunrise", 265000, 0.74, 0.0},
		{"Merit", 215000, 0.899999, 0.0},
		{"Utility", 200000, -1.0, 0.0},
		{"Nevada", 2000000, -1.0, 0.0},
		{"Yosemite", 350000, -1.0, 0.0},
		{"Windsor", 350000, -1.0, 0.0},
		{"Monster A Type", 1000000, -1.0, 500.0},
		{"Monster B Type", 1000000, -1.0, 500.0},
		{"Uranus", 545000, 0.87, 0.0},
		{"Jester", 750000, 0.759999, 0.0},
		{"Sultan", 720000, 0.84, 0.0},
		{"Stratum", 450000, 0.87, 0.0},
		{"Elegy", 700000, 0.8, 0.0},
		{"Raindance", 2450000, -1.0, 500.0},
		{"RC Tiger", 0, -1.0, 0.0},
		{"Flash", 490000, 0.699999, 0.0},
		{"Tahoma", 175000, 0.85, 0.0},
		{"Savanna", 390000, -1.0, 0.0},
		{"Bandito", 350000, -1.0, 0.0},
		{"Freight Flat", 0, -1.0, 0.0},
		{"Streak Carriage", 0, -1.0, 0.0},
		{"Kart", 100000, -1.0, 0.0},
		{"Mower", 100000, -1.0, 0.0},
		{"Duneride", 900000, -1.0, 0.0},
		{"Sweeper", 50000, -1.0, 0.0},
		{"Broadway", 330000, -1.0, 0.0},
		{"Tornado", 250000, 0.899999, 0.0},
		{"AT-400", 2400000, -1.0, 0.0},
		{"DFT-30", 400000, -1.0, 0.0},
		{"Huntley", 300000, 1.24, 0.0},
		{"Stafford", 320000, 1.24, 0.0},
		{"BF-400", 575000, -1.0, 0.0},
		{"传媒车", 100000, -1.0, 0.0},
		{"Tug", 50000, -1.0, 0.0},
		{"Trailer", 1000000, -1.0, 0.0},
		{"Emperor", 200000, 1.0, 0.0},
		{"Wayfarer", 180000, -1.0, 0.0},
		{"Euros", 450000, 0.73, 0.0},
		{"Hotdog", 210000, -1.0, 0.0},
		{"Club", 400000, 1.1, 0.0},
		{"Freight Carriage", 0, -1.0, 0.0},
		{"Trailer", 100000, -1.0, 0.0},
		{"Andromada", 2000000, -1.0, 0.0},
		{"Dodo", 1500000, -1.0, 0.0},
		{"RC Cam", 0, -1.0, 0.0},
		{"Launch", 650000, -1.0, 0.0},
		{"Police Car", 200000, -1.0, 500.0},
		{"Police Car", 200000, -1.0, 500.0},
		{"Police Car", 200000, -1.0, 500.0},
		{"Police Ranger", 200000, -1.0, 500.0},
		{"Picador", 160000, -1.0, 500.0},
		{"S.W.A.T. Van", 850000, -1.0, 1500.0},
		{"Alpha", 450000, 0.709999, 500.0},
		{"Phoenix", 800000, 0.68, 500.0},
		{"Glendale", 50000, -1.0, 500.0},
		{"Sadler", 50000, -1.0, 500.0},
		{"Luggage Trailer A", 0, -1.0, 500.0},
		{"Luggage Trailer B", 0, -1.0, 500.0},
		{"Stair Trailer", 0, -1.0, 500.0},
		{"Boxville", 275000, -1.0, 500.0},
		{"Farm Plow", 0, -1.0, 500.0},
		{"Utility Trailer", 0, -1.0, 500.0}
};

stock GetVehicleName(modelid)
{
	new string[32], value;
	value = modelid - 400;
	if(value < 0) {format(string, sizeof(string), "Null");}
	else {format(string, sizeof(string), "%s", VehList[value][vName]);}
	return string;
}

stock GetVehiclePrice(modelid)
{
	new price, value;
	value = modelid - 400;
	if(value < 0) {price = 0;}
	else {price = VehList[value][vValue];}
	return price;
}

main()
{
	print("_____自由国度 RPG_____");
	print("____by Yun & [SOT]Alice____");
	print("____edit ver1happ1____");
	GenerateAdminPass();
}


//连接到MySQL服务器 &MySQL:Session 代表该函数内的Sesstion会将结果连结至传来的Session 则const代表不变
static stock bool:ConnectToMySQLServer(&MySQL:Session, const sqlhost[], const sqluser[], const sqlpass[], const sqldb[], const port)
{
	new MySQLOpt:options = mysql_init_options();//新增MySQL的连线选项

	mysql_set_option(options, AUTO_RECONNECT, true);//启用自动重新连线
	mysql_set_option(options, SERVER_PORT, port);//设置端口为port(预设为3306)

	Session = mysql_connect(sqlhost, sqluser, sqlpass, sqldb, options);//将代入的Session赋予mysql_connect的回传值(也就是MySQL的Session编号)

	return (mysql_errno(Session)==0);//代表回传数据库是否连接顺利
}

stock AddTP(pickupid, icon, Float:outx, Float:outy, Float:outz, Float:outangle, Float:inx, Float:iny, Float:inz, Float:inangle, outint, outworld, inint, inworld, const showmsg[], gpstype=GPS_NONE, tptype=0, tptypeid=0)
{
	new gpsmsg[32], gpsid;
	for(new i, j = MAX_TPS; i < j; i++)
	{
		if(TPData[i][tpCreated] == true) continue;
		TPData[i][tpPickO] = CreateDynamicPickup(pickupid, 1, outx, outy, outz, outworld, outint);
		SetGVarInt("TPPick", 1, TPData[i][tpPickO]);
		SetGVarInt("TPPickID", i, TPData[i][tpPickO]);
		TPData[i][tpPickI] = CreateDynamicPickup(pickupid, 1, inx, iny, inz, inworld, inint);
		SetGVarInt("TPPick", 1, TPData[i][tpPickI]);
		SetGVarInt("TPPickID", i, TPData[i][tpPickI]);
		format(TPData[i][tpMsg], 128, "%s\n"#TEXT_YELLOW"按F键进入", showmsg);
		TPData[i][tp3DText] = CreateDynamic3DTextLabel(TPData[i][tpMsg], COLOR_WHITE, outx, outy, outz, 15.0, _, _, 0, outworld, outint);
		if(icon > -1) TPData[i][tpIcon] = CreateDynamicMapIcon(outx, outy, outz, icon, -1, outworld, outint);

		TPData[i][tpCreated] = true,
		TPData[i][tpOutX] = outx,
		TPData[i][tpOutY] = outy,
		TPData[i][tpOutZ] = outz,
		TPData[i][tpOutA] = outangle,
		TPData[i][tpOutI] = outint,
		TPData[i][tpOutW] = outworld,
		TPData[i][tpInX] = inx,
		TPData[i][tpInY] = iny,
		TPData[i][tpInZ] = inz,
		TPData[i][tpInA] = inangle,
		TPData[i][tpInI] = inint,
		TPData[i][tpInW] = inworld,
		TPData[i][tpType] = tptype,
		TPData[i][tpTypeID] = tptypeid;
		SetGVarInt("TPCount", GetGVarInt("TPCount")+1);

		if(gpstype > GPS_NONE)
		{
			if(tptype == ESTATE_NONE) format(gpsmsg, sizeof(gpsmsg), "%s", showmsg);
			else format(gpsmsg, sizeof(gpsmsg), "%s", EstateData[i][eName]);
			gpsid = CreateGPS(gpsmsg, outx, outy, outz, gpstype);
		}
		SetGVarInt("TPGPS", gpsid, i);
		return i;
	}
	return -1;
}

stock DeleteTP(tpid)
{
    if(TPData[tpid][tpCreated] == true)
    {
        DestroyDynamicPickup(TPData[tpid][tpPickO]);
		DestroyDynamicPickup(TPData[tpid][tpPickI]);
		Delete3DTextLabel(TPData[tpid][tp3DText]);
		DestroyDynamicMapIcon(TPData[tpid][tpIcon]);
		TPData[tpid][tpCreated] = false;
    }
	DeleteGPS(GetGVarInt("TPGPS", tpid));
	DeleteGVar("TPGPS", tpid);
}

stock bool:IsValidTP(tpid)
{
	return TPData[tpid][tpCreated];
}

stock CreateGPS(const name[], Float:gpsx, Float:gpsy, Float:gpsz, type=GPS_NONE)
{
    for(new i = 0; i < MAX_GPS; i++)
	{
	    if(GPSList[i][gpsCreated] == true) continue;
	    format(GPSList[i][gpsName], 32, "%s", name);
	    GPSList[i][gpsX] = gpsx;
	    GPSList[i][gpsY] = gpsy;
	    GPSList[i][gpsZ] = gpsz;
	    GPSList[i][gpsCreated] = true;
	    GPSList[i][gpsType] = type;
	    return i;
	}
	return -1;
}

stock DeleteGPS(id)
{
	if(GPSList[id][gpsCreated] == false) return 0;
    GPSList[id][gpsCreated] = false;
    return 1;
}

stock bool:IsPlayerBusy(playerid)
{
	return !(GetGVarInt("Trashing", playerid) == 0 && GetGVarInt("Transporting", playerid) == 0 && GetGVarInt("Questing", playerid) == 0
	 && GetGVarInt("Papering", playerid) == 0 && GetGVarInt("Digging", playerid) == 0 && GetGVarInt("Racing", playerid) == 0
	 && GetGVarInt("Fishering", playerid) == 0 && GetGVarInt("CarSelling", playerid) == 0 && GetGVarInt("SellingFish", playerid) == 0
	 && GetGVarInt("TaxiOn", playerid) == 0 && GetGVarInt("BusOn", playerid) == 0 && GetGVarInt("FoodDelivering", playerid) == 0
	 && GetGVarInt("Hewing", playerid) == 0 && GetGVarInt("FVendoring", playerid) == 0 && GetGVarInt("Cooking", playerid) == 0
	 && GetGVarInt("Towing", playerid) == 0 && GetGVarInt("UsingRC", playerid) == 0 && GetGVarInt("Cuffed", playerid) == 0
	 && GetGVarInt("Laying", playerid) == 0 && GetGVarInt("Hunting", playerid) == 0);
}

stock bool:PlayerCanUseHands(playerid)
{
	return ((GetGVarInt("PlayerAnimal", playerid) == 0 || GetGVarInt("PlayerAnimal", playerid) == 22) && GetGVarInt("Tied", playerid) == 0 && GetGVarInt("Cuffed", playerid) == 0
	&& GetGVarInt("PTazzed", playerid) == 0 && GetGVarInt("Surr", playerid) == 0);
}

stock bool:PlayerCanPlaceObject(playerid)
{
	return !(0 < GetPlayerVirtualWorld(playerid) < MAX_SHOP_WORLD);
}

stock bool:PlayerCanSpectate(playerid)
{
	return !(IsPlayerBusy(playerid) && PlayerData[playerid][pWanted] > 0 && GetGVarInt("Spawned", playerid) == 0 && PlayerData[playerid][pJail] > 0);
}

stock GetRandAgentPos(&zoneid, &Float:fx, &Float:fy, &Float:fz)//for Trevor Quest
{
	zoneid = random(sizeof(TrevorM3TargetPos));

    new randx, randy,
	maxx = floatround(TrevorM3TargetPos[zoneid][0]), minx = floatround(TrevorM3TargetPos[zoneid][1]),
	maxy = floatround(TrevorM3TargetPos[zoneid][2]), miny = floatround(TrevorM3TargetPos[zoneid][3]);

    randx = minx + random(maxx - minx);
    randy = miny + random(maxy - miny);

	fx = float(randx), fy = float(randy);
	CA_FindZ_For2DCoord(fx, fy, fz);
}

stock GetNearestVehicle(playerid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:px, Float:py, Float:pz, i, j,
    Float:NearestRange = max_range,
    NearestVehicleID = 0;
    GetPlayerPos(playerid, px, py, pz);
    for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)//使用GetVehiclePoolSize获取最大车辆编号来增加效率
    {
        if(GetVehicleModel(i) < 400) continue;
        CurrentRange = GetVehicleDistanceFromPoint(i, px, py, pz);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestVehicleID = i;
        }
    }
    return NearestVehicleID;
}

stock GetNearestVehicleForVehicle(vehicleid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, NearestVehicleID, Float:vx, Float:vy, Float:vz, i, j;
    NearestRange = max_range,
    NearestVehicleID = 0;
    GetVehiclePos(vehicleid, vx, vy, vz);
    for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)//使用GetVehiclePoolSize获取最大车辆编号来增加效率
    {
    	if(GetVehicleModel(i) < 400 || i == vehicleid) continue;
        CurrentRange = GetVehicleDistanceFromPoint(i, vx, vy, vz);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestVehicleID = i;
        }
    }
    return NearestVehicleID;
}

stock GetNearestGPS(playerid, const location[])
{
    static i, j, Float:curdis, Float:minidis, mini, Float:px, Float:py, Float:pz;
    minidis = 6000.0, mini = -1;
	GetPlayerPos_Out(playerid, px, py, pz);
	for(i = 0, j = MAX_GPS; i < j ; i++)
	{
		if(GPSList[i][gpsCreated] == false){continue;}
		if(strfind(GPSList[i][gpsName], location, true) != -1)
		{
			curdis = GetPointDistanceToPoint(px, py, pz, GPSList[i][gpsX], GPSList[i][gpsY], GPSList[i][gpsZ]);
			if(curdis < minidis)
			{
				minidis = curdis;
				mini = i;
			}
		}
	}
	return mini;
}


stock GetNearestHospital(Float:px, Float:py, Float:pz, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
    for(i = 0, j = sizeof(HospitalPos); i < j ; i++)
    {
        CurrentRange = GetPointDistanceToPoint(px, py, pz, HospitalPos[i][0], HospitalPos[i][1], HospitalPos[i][2]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestAirport(Float:px, Float:py, Float:pz, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
    for(i = 0, j = sizeof(AirportPos); i < j ; i++)
    {
        CurrentRange = GetPointDistanceToPoint(px, py, pz, AirportPos[i][0], AirportPos[i][1], AirportPos[i][2]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestDock(Float:px, Float:py, Float:pz, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
    for(i = 0, j = sizeof(DockPos); i < j ; i++)
    {
        CurrentRange = GetPointDistanceToPoint(px, py, pz, DockPos[i][0], DockPos[i][1], DockPos[i][2]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestFishSell(playerid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
    NearestRange = max_range;
    for(i = 0, j = sizeof(FisherJobSellAll); i < j ; i++)
    {
        CurrentRange = GetPlayerDistanceFromPointEx(playerid, FisherJobSellAll[i][0], FisherJobSellAll[i][1], FisherJobSellAll[i][2]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestEstate(playerid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
    for(i = 0, j = MAX_ESTATES; i < j ; i++)
    {
        CurrentRange = GetPlayerDistanceFromPointEx(playerid, EstateData[i][eX], EstateData[i][eY], EstateData[i][eZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestObjectData(playerid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
	for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
	{
	    CurrentRange = GetPlayerDistanceFromPointEx(playerid, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock GetNearestObjectDataEx(playerid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
	for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
	{
	    if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_BUILD || ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_DECO) continue;
	    CurrentRange = GetPlayerDistanceFromPointEx(playerid, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            nearest = i;
        }
    }
    return nearest;
}

stock IsPlayerCloseToDeptHQ(playerid, Float:max_range = 99999.0)
{
	static Float:NearestRange, Float:CurrentRange, nearest, i, j;
	nearest = -1;
    NearestRange = max_range;
    switch(PlayerData[playerid][pDepartment])
    {
        case DEPT_POLICE:
        {
		    for(i = 0, j = sizeof(PoliceSpawn); i < j ; i++)
		    {
		        CurrentRange = GetPlayerDistanceFromPointEx(playerid, PoliceSpawn[i][dpsoutX], PoliceSpawn[i][dpsoutY], PoliceSpawn[i][dpsoutZ]);
		        if(CurrentRange < NearestRange)
		        {
		            NearestRange = CurrentRange;
		            nearest = i;
		            break;
		        }
		    }
		}
		case DEPT_MEDIC:
        {
		    for(i = 0, j = sizeof(MedicSpawn); i < j ; i++)
		    {
		        CurrentRange = GetPlayerDistanceFromPointEx(playerid, MedicSpawn[i][dpsoutX], MedicSpawn[i][dpsoutY], MedicSpawn[i][dpsoutZ]);
		        if(CurrentRange < NearestRange)
		        {
		            NearestRange = CurrentRange;
		            nearest = i;
		            break;
		        }
		    }
		}
		case DEPT_GOVERNMENT:
        {
		    for(i = 0, j = sizeof(GovernmentSpawn); i < j ; i++)
		    {
		        CurrentRange = GetPlayerDistanceFromPointEx(playerid, GovernmentSpawn[i][dpsoutX], GovernmentSpawn[i][dpsoutY], GovernmentSpawn[i][dpsoutZ]);
		        if(CurrentRange < NearestRange)
		        {
		            NearestRange = CurrentRange;
		            nearest = i;
		            break;
		        }
		    }
		}
		case DEPT_COUNSELOR:
        {
		    for(i = 0, j = sizeof(CounselorSpawn); i < j ; i++)
		    {
		        CurrentRange = GetPlayerDistanceFromPointEx(playerid, CounselorSpawn[i][dpsoutX], CounselorSpawn[i][dpsoutY], CounselorSpawn[i][dpsoutZ]);
		        if(CurrentRange < NearestRange)
		        {
		            NearestRange = CurrentRange;
		            nearest = i;
		            break;
		        }
		    }
		}
		default: return 0;
	}
	if(nearest == -1) return 0;
    else return 1;
}

stock GetNearestPlayer(playerid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1,
    Float:NearestRange = max_range,
    NearestID = -1;
    GetPlayerPos(playerid, x1, y1, z1);
    ForEachPlayer(i)
    {
        if(i == playerid || GetGVarInt("Spawned", i) == 0) continue;
        CurrentRange = GetPlayerDistanceFromPointEx(i, x1, y1, z1);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    return NearestID;
}

stock GetNearestDrop(playerid, id=0, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1, i, j,
    Float:NearestRange = max_range,
    NearestID = -1;
    GetPlayerPos(playerid, x1, y1, z1);
    for(i = 0, j = MAX_DROPS; i < j ; i++)
    {
        if(DropItem[i][idCreated] == 0) continue;
        if(id > 0 && DropItem[i][idItemID] != id)  continue;
        CurrentRange = GetPointDistanceToPoint(x1, y1, z1, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    return NearestID;
}

stock GetNearestAnimal_NPC(npcid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2, i, j,
    Float:NearestRange = max_range,
    NearestID = -1;
    FCNPC_GetPosition(npcid, x1, y1, z1);
    for(i = 0, j = MAX_PLAYERS; i < j ; i++)
    {
        if(!IsPlayerNPC(i) || GetGVarInt("Animal", i) == 0 || i == npcid) continue;
        FCNPC_GetPosition(i, x2, y2, z2);
        CurrentRange = GetPointDistanceToPoint(x1, y1, z1, x2, y2, z2);
        if(CurrentRange < max_range && CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    return NearestID;
}

stock GetNearestFood_NPC(npcid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1, i, j,
    Float:NearestRange = max_range,
    NearestID = -1;
    FCNPC_GetPosition(npcid, x1, y1, z1);
    for(i = 0, j = MAX_DROPS; i < j ; i++)
    {
        if(DropItem[i][idCreated] == 0) continue;
        if(DropItem[i][idType] == ITEM_USE && (ItemsList_USE[DropItem[i][idItemID]][iuType] == IU_FOOD || ItemsList_USE[DropItem[i][idItemID]][iuType] == IU_FISH))
        {
	        CurrentRange = GetPointDistanceToPoint(x1, y1, z1, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]);
	        if(CurrentRange < NearestRange)
	        {
	            NearestRange = CurrentRange;
	            NearestID = i;
	        }
	    }
    }
    return NearestID;
}

stock GetNearestDrop_NPC(npcid, Float:max_range = 99999.0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1, i, j,
    Float:NearestRange = max_range,
    NearestID = -1;
    FCNPC_GetPosition(npcid, x1, y1, z1);
    for(i = 0, j = MAX_DROPS; i < j ; i++)
    {
        if(DropItem[i][idCreated] == 0) continue;
        CurrentRange = GetPointDistanceToPoint(x1, y1, z1, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    return NearestID;
}

stock GetNearestPlayer_NPC(npcid, Float:max_range = 99999.0, exception = -1, checkveh = 0)
{
	new Float:CurrentRange, Float:x1, Float:y1, Float:z1,
    Float:NearestRange = max_range,
    NearestID = INVALID_PLAYER_ID;
    FCNPC_GetPosition(npcid, x1, y1, z1);
    ForEachPlayer(i)
    {
        if(i == exception || GetGVarInt("Spawned", i) == 0) continue;
        if(checkveh == 1)
        {
            if(IsPlayerInAnyVehicle(i)) continue;
        }
        CurrentRange = GetPlayerDistanceFromPointEx(i, x1, y1, z1);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    return NearestID;
}

//取得最近道路功能,使用/getcars测试
stock bool:GetNearestRoad(Float:fromx, Float:fromy, Float:fromz, &Float:roadx, &Float:roady, &Float:roadz, &Float:roadangle, Float:max_range = 99999.0)
{//缺点: 机场无节点,尽量只用在汽机车上
	static Float:NearestRange, Float:CurrentRange, NearestID, node1, node2, navi, start, end, i, j;
    NearestRange = max_range,
    NearestID = -1;
    for(i = 0, j = sizeof(nodes); i < j ; i++)
    {
        CurrentRange = GetPointDistanceToPoint(fromx, fromy, fromz, nodes[i][nodeX], nodes[i][nodeY], nodes[i][nodeZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = i;
        }
    }
    node1 = NearestID;
    if(node1 == -1)
	{
		//SendClientMessage(playerid, COLOR_WHITE, "找不到节点1");
		return false;
	}
    NearestRange = 6000.0,
    NearestID = -1;
    if(nodes[node1][link1ID] != -1)
    {
        CurrentRange = GetPointDistanceToPoint(fromx, fromy, fromz, nodes[nodes[node1][link1ID]][nodeX], nodes[nodes[node1][link1ID]][nodeY], nodes[nodes[node1][link1ID]][nodeZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = nodes[node1][link1ID];
            navi = nodes[node1][navi1ID];
        }
    }
    if(nodes[node1][link2ID] != -1)
    {
        CurrentRange = GetPointDistanceToPoint(fromx, fromy, fromz, nodes[nodes[node1][link2ID]][nodeX], nodes[nodes[node1][link2ID]][nodeY], nodes[nodes[node1][link2ID]][nodeZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = nodes[node1][link2ID];
            navi = nodes[node1][navi2ID];
        }
    }
    if(nodes[node1][link3ID] != -1)
    {
        CurrentRange = GetPointDistanceToPoint(fromx, fromy, fromz, nodes[nodes[node1][link3ID]][nodeX], nodes[nodes[node1][link3ID]][nodeY], nodes[nodes[node1][link3ID]][nodeZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = nodes[node1][link3ID];
            navi = nodes[node1][navi3ID];
        }
    }
    if(nodes[node1][link4ID] != -1)
    {
        CurrentRange = GetPointDistanceToPoint(fromx, fromy, fromz, nodes[nodes[node1][link4ID]][nodeX], nodes[nodes[node1][link4ID]][nodeY], nodes[nodes[node1][link4ID]][nodeZ]);
        if(CurrentRange < NearestRange)
        {
            NearestRange = CurrentRange;
            NearestID = nodes[node1][link4ID];
            navi = nodes[node1][navi4ID];
        }
    }
    node2 = NearestID;
    if(node2 == -1)
	{
		//SendClientMessage(playerid, COLOR_WHITE, "找不到节点2");
		return false;
	}
    if(navi == -1)
	{
		//SendClientMessage(playerid, COLOR_WHITE, "找不到道路");
		return false;
	}

	start = navis[navi][from];
	end = navis[navi][to];
    roadx = (nodes[start][nodeX] + nodes[end][nodeX])/2,
    roady = (nodes[start][nodeY] + nodes[end][nodeY])/2,
    roadz = (nodes[start][nodeZ] + nodes[end][nodeZ])/2 + 1.8;
    GetAngleToXY(nodes[end][nodeX], nodes[end][nodeY], nodes[start][nodeX], nodes[start][nodeY], roadangle);

    //printf("node1 = %d, node2 = %d", node1, node2);
    //printf("x1:%f y1:%f z1:%f x2:%f y2:%f z2:%f x3:%f y3:%f z3:%f angle:%f", nodes[node1][nodeX], nodes[node1][nodeY], nodes[node1][nodeZ], nodes[node2][nodeX], nodes[node2][nodeY], nodes[node2][nodeZ], roadx, roady, roadz, roadangle);
    //printf("start:%d end:%d left:%d right:%d", start, end, navis[navi][leftLanes], navis[navi][rightLanes]);
    GetXYRightToAngle(roadangle, roadx, roady, roadx, roady, 4.0);

    return true;
}

stock bool:GetPlayerRoad(playerid, &Float:roadx, &Float:roady, &Float:roadz, &Float:roadangle, Float:max_range = 99999.0)
{
	static Float:px, Float:py, Float:pz;
	GetPlayerPos(playerid, px, py, pz);
	return GetNearestRoad(px, py, pz, roadx, roady, roadz, roadangle, max_range);
}

stock GetRandomRoadInZone(Float:minx, Float:miny, Float:maxx, Float:maxy, &Float:roadx, &Float:roady, &Float:roadz, &Float:roadangle)
{
	new
	Float:randx = minx + float(random(floatround(maxx - minx))),
	Float:randy = miny + float(random(floatround(maxy - miny)));
	GetNearestRoad(randx, randy, 10.0, roadx, roady, roadz, roadangle);
}

stock bool:IsPlayerCloseToDynamicObject(playerid, objectid, Float:range = 3.0)
{
    new Float:ox, Float:oy, Float:oz;
    GetDynamicObjectPos(objectid, ox, oy, oz);
    return IsPlayerInRangeOfPointEx(playerid, range, ox, oy, oz) ? true : false;
}

stock bool:IsPlayerCloseToFire(playerid, Float:range = 2.0)
{
    new i, j, iWorld, bool:found;
    if(GetGVarInt("ViewEstate", playerid) == 1) return false;
    for(i = 0, j = sizeof(StovePos); i < j ; i++)
    {
    	if(IsPlayerInRangeOfPointEx(playerid, range, StovePos[i][0], StovePos[i][1], StovePos[i][2]))
    	{
    	    found = true;
    	    break;
    	}
    }
    iWorld = GetPlayerVirtualWorld(playerid);
    for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
    {
		if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_FIRE)
		{
	    	if(iWorld == ObjectData[i][oWorld] && IsPlayerInRangeOfPointEx(playerid, range, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]))
	    	{
	    	    found = true;
	    	    break;
	    	}
	    }
    }
    return found;
}

stock bool:IsPlayerCloseToTV(playerid, Float:range = 0.8)
{
    new i, j, tWorld, bool:found;
    if(GetGVarInt("ViewEstate", playerid) == 1) return false;
    for(i = 0, j = sizeof(TVPos); i < j ; i++)
    {
    	if(IsPlayerInRangeOfPointEx(playerid, range, TVPos[i][0], TVPos[i][1], TVPos[i][2]))
    	{
    	    found = true;
    	    break;
    	}
    }
	tWorld = GetPlayerVirtualWorld(playerid);
    for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
    {
		if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_TV)
		{
	    	if(tWorld == ObjectData[i][oWorld] && IsPlayerInRangeOfPointEx(playerid, range, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]))
	    	{
	    	    found = true;
	    	    break;
	    	}
	    }
    }
    return found;
}

stock IsPlayerCloseToBed(playerid, Float:range = 1.5)
{
    new i, j, tWorld, found;
    if(GetGVarInt("ViewEstate", playerid) == 1) return 0;
    for(i = 0, j = sizeof(BedPos); i < j ; i++)
    {
    	if(IsPlayerInRangeOfPointEx(playerid, range, BedPos[i][0], BedPos[i][1], BedPos[i][2]))
    	{
    	    found = 2;
    	    break;
    	}
    }
	tWorld = GetPlayerVirtualWorld(playerid);
    for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
    {
		if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_BED)
		{
	    	if(tWorld == ObjectData[i][oWorld] && IsPlayerInRangeOfPointEx(playerid, range, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]))
	    	{
	    	    found = 1;
	    	    break;
	    	}
	    }
    }
    return found;
}

stock IsPlayerCloseToChair(playerid, Float:range = 1.5)
{
    new i, j, tWorld, found;
    if(GetGVarInt("ViewEstate", playerid) == 1) return 0;
    for(i = 0, j = sizeof(ChairPos); i < j ; i++)
    {
    	if(IsPlayerInRangeOfPointEx(playerid, range, ChairPos[i][0], ChairPos[i][1], ChairPos[i][2]))
    	{
    	    found = 2;
    	    break;
    	}
    }
	tWorld = GetPlayerVirtualWorld(playerid);
    for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
    {
		if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_CHAIR)
		{
	    	if(tWorld == ObjectData[i][oWorld] && IsPlayerInRangeOfPointEx(playerid, range, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]))
	    	{
	    	    found = 1;
	    	    break;
	    	}
	    }
    }
    return found;
}

stock IsPlayerCloseToSpeaker(playerid, &stype, &sid, Float:range = 1.5)
{
    new i, j, rWorld;
    rWorld = GetPlayerVirtualWorld(playerid);
	if(GetGVarInt("ViewEstate", playerid) == 1) sid = 0;
	else
	{
		for(i = 0, j = sizeof(RadioPos); i < j ; i++)
		{
			if(IsPlayerInRangeOfPointEx(playerid, range, RadioPos[i][0], RadioPos[i][1], RadioPos[i][2]))
			{
				stype = 2, sid = i;
				break;
			}
		}
		for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
		{
			if(ObjectList[ObjectData[i][oObjectID]][oType] == OBJ_SPEAKER)
			{
				if(rWorld == ObjectData[i][oWorld] && IsPlayerInRangeOfPointEx(playerid, range, ObjectData[i][oX], ObjectData[i][oY], ObjectData[i][oZ]))
				{
					stype = 1, sid = i;
					break;
				}
			}
		}
	}
}

stock bool:IsPlayerCloseToPhoneBooth(playerid, Float:range = 3.0)
{
    new bool: found;
    for(new i = 0, j = sizeof(PhoneBooth); i < j ; i++)
    {
    	if(IsPlayerInRangeOfPointEx(playerid, range, PhoneBooth[i][0], PhoneBooth[i][1], PhoneBooth[i][2]))
    	{
    	    found = true;
    	    break;
    	}
    }
    return found;
}

stock bool:IsArmed(playerid)
{
	new armid = GetPlayerWeapon(playerid);
	switch (armid)
	{
		case 8, 9, 16, 18, 22 .. 39: return true;
	}
	return false;
}

stock bool:IsNPCArmed(npcid)
{
	new armid = FCNPC_GetWeapon(npcid);
	switch (armid)
	{
		case 16, 18, 22 .. 43: return true;
	}
	return false;
}

stock bool:IsNPCArmedAutoGun(npcid)
{
	new armid = FCNPC_GetWeapon(npcid);
	switch (armid)
	{
		case 22, 23, 27..32, 37, 38, 41, 42: return true;
	}
	return false;
}

stock bool:IsAPlane(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 592, 577, 511, 512, 593, 520, 553, 476, 519, 460, 513: return true;
	}
	return false;
}

stock bool:IsAPlane_M(modelid)
{
	switch (modelid)
	{
		case 592, 577, 511, 512, 593, 520, 553, 476, 519, 460, 513: return true;
	}
	return false;
}

stock bool:IsAMotorBike(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 462, 448, 581, 522, 461, 521, 523, 463, 586, 468: return true;
	}
	return false;
}

stock bool:IsABomberPlane(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 476, 592: return true;
	}
	return false;
}

stock bool:IsABike(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 481, 509, 510: return true;
	}
	return false;
}

stock bool:IsABoat(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 472, 473, 493, 595, 484, 430, 453, 452, 446, 454: return true;
	}
	return false;
}

stock bool:IsABoat_M(modelid)
{
	switch (modelid)
	{
		case 472, 473, 493, 595, 484, 430, 453, 452, 446, 454: return true;
	}
	return false;
}

stock bool:IsAHelicopter(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 548, 425, 417, 487, 488, 497, 563, 447, 469: return true;
	}
	return false;
}

stock bool:IsAHelicopter_M(modelid)
{
	switch (modelid)
	{
		case 548, 425, 417, 487, 488, 497, 563, 447, 469: return true;
	}
	return false;
}

stock bool:IsAVan(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 413, 418, 422, 423, 440, 444, 459, 478, 482, 483, 505, 528, 543, 554, 556, 557, 573: return true;
	}
	return false;
}

stock bool:IsATruck(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 427, 428, 455, 456, 498, 499, 609: return true;
	}
	return false;
}

stock bool:IsACargoHeli(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 417, 548, 563: return true;
	}
	return false;
}

stock bool:IsACargoPlane(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 533, 592: return true;
	}
	return false;
}

stock bool:IsACar(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 401 .. 409, 410 .. 412, 415, 416, 418 .. 424, 426 .. 429, 431 .. 434, 436 .. 439, 442, 445, 449, 451: return true;
		case 457 .. 459, 466, 467, 474 .. 480, 482, 483, 485, 486, 488, 490 .. 492, 494 .. 496, 498 .. 500, 502 .. 508, 514 .. 518: return true;
		case 524 .. 536, 540 .. 547, 549 .. 552, 554, 555, 558 .. 562, 565 .. 568, 571 .. 576, 578 .. 583, 585 .. 589: return true;
		case 596 .. 599, 601 .. 605: return true;
	}
	return false;
}

stock bool:IsATrailerTruck(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 403, 514, 515: return true;
	}
	return false;
}

stock bool:IsATrailer(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 435, 591: return true;
	}
	return false;
}

stock bool:IsAVendor(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 588, 423: return true;
	}
	return false;
}

stock bool:IsATowTruck(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 485, 525, 531, 583: return true;
	}
	return false;
}

stock bool:IsAPoliceCar(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 427, 431, 437, 490, 497, 523, 528, 596 .. 599, 601: return true;
	}
	if(VehData[vehicleid][vPolice] == 1) return true;
	return false;
}

stock bool:IsATaxi(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 420, 438: return true;
	}
	if(VehData[vehicleid][vTaxi] != 0) return true;
	return false;
}

stock bool:IsABus(vehicleid)
{
	new vmodel = GetVehicleModel(vehicleid);
	switch (vmodel)
	{
		case 431, 437: return true;
	}
	return false;
}

stock PlayerHaveItem(playerid, itemtype, itemid)
{//确认玩家是否持有itemtype类型的 itemid物品
	if(itemid == 0) return 1;
	new PHI_i, PHI_j, count;
	switch(itemtype)
	{
		case ITEM_USE:
		{
			for(PHI_i = 0, PHI_j = sizeof(PlayerItems_USE[]); PHI_i < PHI_j; PHI_i++)
			{
				if(PlayerItems_USE[playerid][PHI_i][iuItemID] == itemid)
				{
					count = PlayerItems_USE[playerid][PHI_i][iuCount];
					if(GetGVarInt("MixSlot1", playerid) == itemid)//减掉已被选取当合成材料的道具
					{
					    count -= GetGVarInt("MixAmount1", playerid);
					}
					if(GetGVarInt("MixSlot2", playerid) == itemid)
					{
					    count -= GetGVarInt("MixAmount2", playerid);
					}
					if(GetGVarInt("MixSlot3", playerid) == itemid)
					{
					    count -= GetGVarInt("MixAmount3", playerid);
					}
					break;
				}
			}
		}
		case ITEM_EQ:
		{
			for(PHI_i = 0, PHI_j = sizeof(PlayerItems_EQ[]); PHI_i < PHI_j; PHI_i++)
			{
				if(PlayerItems_EQ[playerid][PHI_i][ieqItemID] == itemid)
				{
					count = 1;
					break;
				}
			}
		}
	}
	if(count < 0) count = 0;
	return count;
}

stock PlayerHaveTypeItem(playerid, type1, type2)
{
	new i, j, count;
	switch(type1)
	{
	    case ITEM_USE:
		{
			for(i = count = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
			{
				if(ItemsList_USE[PlayerItems_USE[playerid][i][iuItemID]][iuType] == type2)
				{
					count += PlayerItems_USE[playerid][i][iuCount];
				}
			}
		}
		case ITEM_EQ:
		{
		    for(i = count = 0, j = sizeof(PlayerItems_EQ[]); i < j; i++)
			{
				if(ItemsList_EQ[PlayerItems_EQ[playerid][i][ieqItemID]][ieqType] == type2)
				{
					count += 1;
				}
			}
		}
	}
	return count;
}

stock PlayerHaveSameSlotWeapon(playerid, weaponid)
{
    new i, j, k, pgun, pammo;
    for(i = k = 0, j = 10; i < j; i++)
	{
	    GetPlayerWeaponData(playerid, i, pgun, pammo);
	    if(pgun == weaponid) continue;
	    if(pammo > 0)
	    {
		    switch(weaponid)
		    {
		        case 2..9: {if(i == 1) k = pgun; break;}
		        case 10..15: {if(i == 10) k = pgun; break;}
		        case 16..18,39: {if(i == 8) k = pgun; break;}
		        case 22..24: {if(i == 2) k = pgun; break;}
		        case 25..27: {if(i == 3) k = pgun; break;}
		        case 28,29,32: {if(i == 4) k = pgun; break;}
		        case 30,31: {if(i == 5) k = pgun; break;}
		        case 33,34: {if(i == 6) k = pgun; break;}
		        case 35..38: {if(i == 7) k = pgun; break;}
		        case 41..43: {if(i == 11) k = pgun; break;}
		    }
		}
	}
	return k;
}

stock PlayerHaveSameAmmoWeapon(playerid, weaponid)
{
    new i, j, pgun, pammo;
    for(i = 0, j = 10; i < j; i++)
	{
	    GetPlayerWeaponData(playerid, i, pgun, pammo);
	    if(pgun == weaponid) return 0;
	    if(pammo > 0)
	    {
		    switch(pgun)
		    {
		        case 22,23: if(weaponid == 22 || weaponid == 23) {return pgun;}
		        case 25..27: if(weaponid == 25 || weaponid == 26 || weaponid == 27) {return pgun;}
		        case 28,29,32: if(weaponid == 28 || weaponid == 29 || weaponid == 32) {return pgun;}
		        case 30,31: if(weaponid == 30 || weaponid == 31) {return pgun;}
		    }
		}
	}
	return 0;
}

stock GetPlayerPoint(playerid, ptid)
{
	for(new i = 0, j = MAX_PT; i < j; i++)
	{
		if(PlayerPt[playerid][i][spPtID] == ptid)
		{
			return PlayerPt[playerid][i][spCount];
		}
	}
	return 0;
}

stock GetPlayerUsedSpace(playerid)
{
    new u_i, u_j, eq_i, eq_j, count;
    for(u_i = 0, u_j = sizeof(PlayerItems_USE[]); u_i < u_j; u_i++)
	{
		if(PlayerItems_USE[playerid][u_i][iuPlayerID] == PlayerData[playerid][pID])
		{
			count += ItemsList_USE[PlayerItems_USE[playerid][u_i][iuItemID]][iuSpace]*PlayerItems_USE[playerid][u_i][iuCount];
		}
	}
	for(eq_i = 0, eq_j = sizeof(PlayerItems_EQ[]); eq_i < eq_j; eq_i++)
	{
		if(PlayerItems_EQ[playerid][eq_i][ieqPlayerID] == PlayerData[playerid][pID])
		{
			count += ItemsList_EQ[PlayerItems_EQ[playerid][eq_i][ieqItemID]][ieqSpace];
		}
	}
	/*for(w_i = 0, w_j = 10; w_i < w_j; w_i++)
	{
	    GetPlayerWeaponData(playerid, w_i, pgun, pammo);
		if(pgun != 0 && pammo != 0)
		{
			count += WeaponsList[pgun][wSpace];
		}
	}*/
	return count;
}

stock PlayerHaveWeapon(playerid, weaponid)
{
	new i, j, k, pgun, pammo;
    for(j = 10; i < j; i++)
	{
	    GetPlayerWeaponData(playerid, i, pgun, pammo);
	    if(pgun == weaponid)
		{
			k = pammo;
			break;
		}
	}
	return k;
}

stock bool:IsPlayerHaveSpace(playerid)
{
	new
	usedspace = GetPlayerUsedSpace(playerid),
	pbag = PlayerData[playerid][pBag];
	if(usedspace < pbag){return true;}
	else{return false;}
}

stock GetPlayerRemainingSpace(playerid)
{
	new result,
	usedspace = GetPlayerUsedSpace(playerid),
	pbag = PlayerData[playerid][pBag];
	if(usedspace < pbag){result = pbag - usedspace;}
	else{result = 0;}
	return result;
}


#include "phone/index" // phone
public OnGameModeInit()
{
	if(ConnectToMySQLServer(MYSQL_SESSION_A, SQLHOST, SQLUSER, SQLPASS, SQLDB, SQLPORT))
	{
	    mysql_query(MYSQL_SESSION_A, "SET NAMES utf8", false);
		mysql_set_charset("gbk");
		print("MySQL连接完成");
		SendRconCommand("password freesafreedom2021");
	}
	else
	{
		print("MySQL连接失败");
		SendRconCommand("exit");
	}
	mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `vehicledata`", "OnVehicleDataLoad");
	mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `plantdata`", "LoadPlantData");
	mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `objectdata`", "LoadObjectData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `marketdata`", "LoadMarketData");
    //mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `marketdata`", "ResetSystemDeal");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `skillslist`", "LoadSkillsList");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `resourcedata`", "LoadResourceData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `racedata`", "LoadRaceData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `pricedata`", "LoadPriceData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `companydata`", "LoadCompanyData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `gangdata`", "LoadGangData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `estatedata`", "LoadEstateData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `busroute`", "LoadBusRoute");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `gangzone`", "LoadGangZone");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `department`", "LoadDepartment");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `wantedrule`", "LoadWantedRule");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `wantedlist`", "LoadWantedList");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `giftdata`", "LoadGiftData");

    AddSimpleModel(-1,19377, -1004, "wallzzz.dff", "speedov1.txd");
	AddSimpleModel(-1,19377, -1002, "wallzzz.dff", "materialsv1.txd");
	AddSimpleModel(-1,19377, -1003, "wallzzz.dff", "univ1.txd");
	AddCharModel(280, 25001, "weskerv1.dff", "weskerv1.txd");
	AddCharModel(299, 25002, "leonv1.dff", "leonv1.txd");
	AddCharModel(285, 25003, "chrisv1.dff", "chrisv1.txd");
	AddCharModel(306, 25004, "adav1.dff", "adav1.txd");
	AddCharModel(20, 25005, "dantev1.dff", "dantev1.txd");
	AddCharModel(29, 25006, "nerov1.dff", "nerov1.txd");
	AddCharModel(306, 25007, "2bv1.dff", "2bv1.txd");
	AddCharModel(29, 25008, "9sv1.dff", "9sv1.txd");
	AddCharModel(299, 25010, "vergilv1.dff", "vergilv1.txd");
	AddCharModel(299, 25009, "jillv1.dff", "jillv1.txd");
	AddCharModel(299, 25011, "wrenchv1.dff", "wrenchv1.txd");
	AddCharModel(306, 25012, "sitarav1.dff", "sitarav1.txd");
	AddCharModel(40, 25013, "miku.dff", "miku.txd");
	AddCharModel(7, 25014, "marcusv2.dff", "marcusv2.txd");
	AddCharModel(299, 25015, "aidenv1.dff", "aidenv1.txd");
	AddCharModel(56, 25016, "clarav1.dff", "clarav1.txd");
	AddCharModel(264, 25017, "jokersv1.dff", "jokersv1.txd");
	AddCharModel(285, 25018, "batmanv1.dff", "batmanv1.txd");
	AddCharModel(265, 25019, "deadshotv1.dff", "deadshotv1.txd");
	AddCharModel(246, 25020, "quinnv1.dff", "quinnv1.txd");
	AddCharModel(292, 25021, "eldiablov1.dff", "eldiablov1.txd");
	AddCharModel(264, 25022, "jokerv1.dff", "jokerv1.txd");
	AddCharModel(280, 25023, "supermanv1.dff", "supermanv1.txd");
	AddCharModel(309, 25024, "dianav1.dff", "dianav1.txd");
	AddCharModel(32, 25025, "trevorv1.dff", "trevorv1.txd");
	AddCharModel(223, 25026, "simeonv1.dff", "simeonv1.txd");
	AddSimpleModel(-1,18865, -1005, "sphone1.dff", "sphone1.txd");
	AddSimpleModel(-1,18865, -1006, "sphone2.dff", "sphone2.txd");
	AddSimpleModel(-1,18865, -1007, "sphone3.dff", "sphone3.txd");
	AddSimpleModel(-1,18865, -1008, "sphone4.dff", "sphone4.txd");
	AddSimpleModel(-1,19893, -1009, "laptop1.dff", "laptop1.txd");
	AddCharModel(299, 25027, "foxv1.dff", "foxv1.txd");
	AddCharModel(299, 25028, "bearv1.dff", "bearv1.txd");
	AddCharModel(299, 25029, "wolfv1.dff", "wolfv1.txd");
	AddCharModel(299, 25030, "pigv1.dff", "pigv1.txd");
	AddCharModel(299, 25031, "chickenv1.dff", "chickenv1.txd");
	AddCharModel(40, 25032, "kizunaai.dff", "kizunaai.txd");
	AddCharModel(299, 25033, "sheepv1.dff", "sheepv1.txd");
	AddSimpleModel(-1,19377, -1010, "wallzzz.dff", "npcavatarv1.txd");
	AddCharModel(299, 25034, "trishv1.dff", "trishv1.txd");
	AddSimpleModel(-1,19631, -1011, "axe.dff", "axe.txd");
	AddSimpleModel(-1,19631, -1012, "pick.dff", "pick.txd");
	AddCharModel(299, 25035, "loganv1.dff", "loganv1.txd");
	AddCharModel(299, 25036, "deadpoolv1.dff", "deadpoolv1.txd");
	AddCharModel(299, 25037, "capusav1.dff", "capusav1.txd");
	AddCharModel(299, 25038, "ironmanv1.dff", "ironmanv1.txd");
	AddCharModel(299, 25039, "invisible.dff", "invisible.txd");
	AddCharModel(306, 25040, "a2v1.dff", "a2v1.txd");
	AddSimpleModel(-1,19377, -1013, "wallzzz.dff", "menu1.txd");
	AddSimpleModel(-1,19377, -1014, "wallzzz.dff", "hudbar.txd"); //hudbar
	AddCharModel(299, 25041, "pandav1.dff", "pandav1.txd");
	AddCharModel(299, 25042, "dog_boxer.dff", "dog_boxer.txd");
	AddCharModel(299, 25043, "dog_bullterrier.dff", "dog_bullterrier.txd");
	AddCharModel(299, 25044, "dog_dalmation.dff", "dog_dalmation.txd");
	AddCharModel(299, 25045, "dog_doberman.dff", "dog_doberman.txd");
	AddCharModel(299, 25046, "dog_husky.dff", "dog_husky.txd");
	AddCharModel(299, 25047, "dog_pitbull.dff", "dog_pitbull.txd");
	AddCharModel(299, 25048, "dog_pitbull2.dff", "dog_pitbull2.txd");
	AddCharModel(299, 25049, "dog_pitbull3.dff", "dog_pitbull3.txd");
	AddCharModel(299, 25050, "dog_pitbull4.dff", "dog_pitbull4.txd");
	AddCharModel(299, 25051, "dog_rottweiler.dff", "dog_rottweiler.txd");
	AddCharModel(299, 25052, "dog_shepherd.dff", "dog_shepherd.txd");
	AddCharModel(299, 25053, "dog_shorthair.dff", "dog_shorthair.txd");
	AddCharModel(299, 25054, "cat.dff", "cat.txd");
	AddCharModel(299, 25055, "dog_shiba.dff", "dog_shiba.txd");
	AddCharModel(299, 25056, "bigfoot.dff", "bigfoot.txd");
	AddCharModel(299, 25057, "gator.dff", "gator.txd");
	AddCharModel(299, 25058, "juggernaut.dff", "juggernaut.txd");
    AddCharModel(299, 25060, "frbulldog.dff", "frbulldog.txd");
    AddCharModel(299, 25061, "rocky1.dff", "rocky1.txd");
    AddCharModel(299, 25062, "rocky2.dff", "rocky2.txd");
    AddCharModel(248, 25063, "lost3.dff", "lost3.txd");
    AddCharModel(100, 25064, "terry.dff", "terry.txd");
    AddCharModel(247, 25065, "clay.dff", "clay.txd");
    AddCharModel(248, 25066, "johnny.dff", "johnny.txd");
    AddSimpleModel(-1,669, -1030, "sakura_boak.dff", "sakura_boak.txd");
	AddSimpleModel(-1,645, -1031, "sakura_palm.dff", "sakura_palm.txd");
	AddCharModel(287, 25067, "merryweather1.dff", "merryweather1.txd");
	AddCharModel(285, 25068, "merryweather2.dff", "merryweather2.txd");
	AddCharModel(286, 25069, "merryweather3.dff", "merryweather3.txd");
	AddCharModel(286, 25070, "merryweather4.dff", "merryweather4.txd");
	AddCharModel(282, 25071, "merryweather5.dff", "merryweather5.txd");
	AddCharModel(280, 25072, "merryweather6.dff", "merryweather6.txd");
	AddCharModel(124, 25073, "leone1.dff", "leone1.txd");
	AddCharModel(125, 25074, "forelli1.dff", "forelli1.txd");
	AddCharModel(125, 25075, "forelli2.dff", "forelli2.txd");
	AddCharModel(126, 25076, "sindacco1.dff", "sindacco1.txd");
	AddCharModel(126, 25077, "sindacco2.dff", "sindacco2.txd");
	AddCharModel(126, 25078, "sindacco3.dff", "sindacco3.txd");
	AddCharModel(25, 25079, "luis.dff", "luis.txd");
	AddCharModel(112, 25080, "niko.dff", "niko.txd");
	AddCharModel(299, 25081, "wolf_king.dff", "wolf_king.txd");
	AddCharModel(299, 25082, "fox_king.dff", "fox_king.txd");
	AddCharModel(299, 25083, "gator_king.dff", "gator_king.txd");
	AddCharModel(285, 25086, "keanu.dff", "keanu.txd");
	AddCharModel(285, 25087, "spiderman.dff", "spiderman.txd");
	AddCharModel(285, 25088, "spiderman_b.dff", "spiderman_b.txd");
	AddCharModel(299, 25089, "venom.dff", "venom.txd");
	AddCharModel(299, 25090, "antman.dff", "antman.txd");
	AddCharModel(299, 25091, "thanos.dff", "thanos.txd");
	AddCharModel(299, 25092, "thor.dff", "thor.txd");
	AddCharModel(299, 25093, "loki.dff", "loki.txd");
	AddCharModel(299, 25094, "opm_saitama.dff", "opm_saitama.txd");
	AddCharModel(299, 25096, "opm_garou.dff", "opm_garou.txd");
	AddCharModel(299, 25097, "opm_suiryu.dff", "opm_suiryu.txd");
	AddCharModel(299, 25098, "opm_zombie.dff", "opm_zombie.txd");
	AddCharModel(299, 25099, "opm_sonic.dff", "opm_sonic.txd");
	AddCharModel(211, 25100, "opm_fubuki.dff", "opm_fubuki.txd");
	AddCharModel(211, 25101, "opm_tatsumaki.dff", "opm_tatsumaki.txd");
	AddCharModel(211, 25095, "tracer.dff", "tracer.txd");
	AddCharModel(211, 25101, "opm_tatsumaki.dff", "opm_tatsumaki.txd");
	
	AddSimpleModel(-1, 19379, -5000, "td.dff", "basic.txd");
	AddSimpleModel(-1, 19379, -5003, "td.dff", "phone/phones.txd");
	AddSimpleModel(-1, 19379, -5004, "td.dff", "phone/wallpapers.txd");
	AddSimpleModel(-1, 19379, -5005, "td.dff", "phone/apps.txd");
	AddSimpleModel(-1, 19379, -5006, "td.dff", "phone/status_bar.txd");
	AddSimpleModel(-1, 19379, -5007, "td.dff", "phone/contacts.txd");
	AddSimpleModel(-1, 19379, -5008, "td.dff", "phone/settings.txd");
	
	//AddCharModel(299, 25103, "bops.dff", "bops.txd");
	CA_Init();

	YMD = TextDrawCreate(320.000000, 26.000000, "2021-08-01");
	TextDrawFont(YMD, 2);
	TextDrawLetterSize(YMD, 0.383333, 2.149999);
	TextDrawSetOutline(YMD, 1);
	TextDrawAlignment(YMD, 2);
	TextDrawColor(YMD, -1);
	TextDrawSetProportional(YMD, 1);

	HMS = TextDrawCreate(320.000000, 42.000000, "18:00:00");
	TextDrawFont(HMS, 2);
	TextDrawLetterSize(HMS, 0.383333, 2.149999);
	TextDrawSetOutline(HMS, 1);
	TextDrawAlignment(HMS, 2);
	TextDrawColor(HMS, -1);
	TextDrawSetProportional(HMS, 1);

	Black = TextDrawCreate(320.000000, 0.000000, "_");
	TextDrawLetterSize(Black, 0.600000, 49.549991);
	TextDrawTextSize(Black, 298.500000, 638.000000);
	TextDrawAlignment(Black, 2);
	TextDrawBoxColor(Black, 255);
	TextDrawUseBox(Black, 1);

	SetTimer("SecondTimer",1000,1);
	SetTimer("MinuteTimer",60000,1);
	SetTimer("Hint",302200,1);
	SetTimer("Peyote",3600000,0);
	SetTimer("Robot",1800000,0);
	SetTimer("DirtyCash",7200000,0);
	SetTimer("BuryTreasure",3600000,0);
	SetTimer("SeaTreasure", 300000, 0);
	SetTimer("MatWarStarter", 1800000, 1);
	SetTimer("NPCTimer", 1000, 1);
	SetTimer("LevelChecker",900000,1);
	SetTimer("MoonLake",5400000,1);
	//SetTimer("Weather",(18+random(36))*100000,0);
	SetTimer("SpawnAllNPCGangZoneNPC",30000,0);

	Weather();
	ResetGoodBuyer();
	RefreshSystemHuntQuest();
	BlockGarages();

	new thr,tmin,tsec;
	gettime(thr,tmin,tsec);
	SetWorldTime(thr);
	oldhr = thr;

	SetGameModeText("FC:1.3");
	SendRconCommand("hostname FCMP★自由国度★-仿GTAOL-RPG");
	SendRconCommand("language 简体中文");
	
	EnableStuntBonusForAll(0);
	//EnableVehicleFriendlyFire();
	ManualVehicleEngineAndLights();
	UsePlayerPedAnims();
	DisableInteriorEnterExits();
	FCNPC_UseMovePathfinding(FCNPC_MOVE_PATHFINDING_RAYCAST);
	FCNPC_UseMoveMode(FCNPC_MOVE_MODE_COLANDREAS);

	Streamer_SetTickRate(40);
	// 增加可显Streamer物件上限
	Streamer_SetVisibleItems(STREAMER_TYPE_OBJECT, 3000);

	// Static Object
	new staticObj[256], staticID;

	AddPlayerClassEx(NO_TEAM, 0, 1958.3783, 1343.1572, 15.3746, 269.1425, 0, 0, 0, 0, 0, 0);
	CreateDynamicObject(1227, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);//id0
	CreateDynamicObject(1681, -4500.0, 0.0, 400.0, 0.0, 0.0, 270.0);//Plane
	CreateDynamicObject(18674, -4500.0, 0.0, 460.0, 0.0, 0.0, 90.0);//Cloud
	//Objects
	LSTrashCan[0] = CreateDynamicObject(1227, 2232.5378, -1691.6254, 13.8431, -0.2999, 1.4999, -179.3000); //dump1
	LSTrashCan[1] = CreateDynamicObject(1227, 2312.9345, -1249.0997, 23.8717, 0.0000, 0.0000, -89.1000); //dump1
	LSTrashCan[2] = CreateDynamicObject(1227, 2405.1923, -1393.1243, 24.0015, 0.0000, 0.0000, 178.0999); //dump1
	LSTrashCan[3] = CreateDynamicObject(1227, 2513.5065, -1944.3605, 13.4851, -0.1000, 0.3000, -179.6000); //dump1
	LSTrashCan[4] = CreateDynamicObject(1227, 2726.8137, -2018.6057, 13.3754, 0.0000, 0.2999, 177.4999); //dump1
	LSTrashCan[5] = CreateDynamicObject(1227, 2754.0610, -1432.5075, 30.2314, 0.0000, 0.0000, -177.9000); //dump1
	LSTrashCan[6] = CreateDynamicObject(1227, 2177.1921, -1016.5087, 62.8410, 0.0000, 0.0000, 170.6999); //dump1
	LSTrashCan[7] = CreateDynamicObject(1227, 2521.0495, -1290.2163, 34.6557, 0.0000, 0.0000, -92.1998); //dump1
	LSTrashCan[8] = CreateDynamicObject(1227, 1966.6744, -1272.6906, 23.8426, 0.0000, 0.0000, 87.7000); //dump1
	LSTrashCan[9] = CreateDynamicObject(1227, 1833.1671, -1592.5968, 13.5284, 0.0000, 0.0000, -104.4998); //dump1
	LSTrashCan[10] = CreateDynamicObject(1227, 1949.7215, -1976.7281, 13.3551, 0.0000, 0.0000, 0.0000); //dump1
	LSTrashCan[11] = CreateDynamicObject(1227, 2292.5327, -2050.6586, 13.4351, 0.0000, 0.0000, 131.3999); //dump1
	LSTrashCan[12] = CreateDynamicObject(1227, 2208.3469, -2534.0559, 13.5351, 0.0000, 0.0000, 178.7998); //dump1
	LSTrashCan[13] = CreateDynamicObject(1227, 1675.9108, -2103.6184, 13.3351, 0.0000, 0.0000, 90.7999); //dump1
	LSTrashCan[14] = CreateDynamicObject(1227, 1366.3341, -1885.4737, 13.3763, 0.0000, 0.0000, 89.4999); //dump1
	LSTrashCan[15] = CreateDynamicObject(1227, 1365.3802, -1485.9985, 13.4651, 0.0000, 0.0000, -19.1999); //dump1
	LSTrashCan[16] = CreateDynamicObject(1227, 1526.2332, -1186.0113, 23.7921, 0.0000, 0.0000, -90.6000); //dump1
	LSTrashCan[17] = CreateDynamicObject(1227, 1094.2855, -922.8018, 43.2008, 0.0000, 0.0000, 0.0000); //dump1
	LSTrashCan[18] = CreateDynamicObject(1227, 954.3615, -1276.6722, 15.0622, -4.8000, 0.1000, -179.5999); //dump1
	LSTrashCan[19] = CreateDynamicObject(1227, 782.6314, -1799.9160, 13.0117, 0.0000, 0.0000, 80.9999); //dump1
	LSTrashCan[20] = CreateDynamicObject(1227, 614.6759, -1345.0539, 13.4337, 0.0000, 0.0000, 11.9000); //dump1
	LSTrashCan[21] = CreateDynamicObject(1227, 275.9364, -1462.3205, 28.0887, 0.0000, 0.0000, -144.9000); //dump1
	LSTrashCan[22] = CreateDynamicObject(1227, 441.1723, -1737.5267, 9.2340, 0.0000, 0.0000, 86.4999); //dump1
	LSTrashCan[23] = CreateDynamicObject(1227, 422.7249, -1230.2795, 50.7240, -0.0000, 2.5999, 15.7000); //dump1
	LSTrashCan[24] = CreateDynamicObject(1227, 1030.3793, -792.2167, 102.8434, 1.5999, 1.2999, -75.9999); //dump1
	LSTrashCan[25] = CreateDynamicObject(1227, 1321.6116, -876.1414, 39.5666, -1.2999, 0.5999, -178.4000); //dump1
	SFTrashCan[0] = CreateDynamicObject(1227, -2646.7285, -201.0525, 4.1842, 0.0000, 0.0000, 0.0000); //dump1
	SFTrashCan[1] = CreateDynamicObject(1227, -2305.7866, -58.4113, 35.0808, 0.0000, 0.0000, -87.2999); //dump1
	SFTrashCan[2] = CreateDynamicObject(1227, -1848.7202, -166.9674, 8.9739, 0.0000, 0.0000, 0.0000); //dump1
	SFTrashCan[3] = CreateDynamicObject(1227, -1623.8896, 868.5534, 7.4557, 0.0000, 0.0000, 0.0000); //dump1
	SFTrashCan[4] = CreateDynamicObject(1227, -1717.0841, 1353.3234, 7.0610, 0.0000, 0.0000, -42.9999); //dump1
	SFTrashCan[5] = CreateDynamicObject(1227, -2507.4753, 1199.7625, 37.3301, 0.0000, 0.0000, 91.4999); //dump1
	SFTrashCan[6] = CreateDynamicObject(1227, -2130.3427, 886.4700, 79.8883, 0.0000, 0.0000, -91.2999); //dump1
	SFTrashCan[7] = CreateDynamicObject(1227, -2166.0114, 363.7884, 35.1086, 0.0000, 0.0000, 178.3000); //dump1
	SFTrashCan[8] = CreateDynamicObject(1227, -2677.0964, 167.0217, 4.1679, 0.0000, 0.0000, 0.0000); //dump1
	SFTrashCan[9] = CreateDynamicObject(1227, -2539.2719, 823.9302, 49.7917, 0.0000, 0.0000, 93.0999); //dump1
	SFTrashCan[10] = CreateDynamicObject(1227, -2125.2766, 648.3221, 52.2754, 0.0000, 0.0000, 177.6000); //dump1
	LVTrashCan[0] = CreateDynamicObject(1227, 1032.2364, 2044.4775, 10.7008, 0.0000, 0.8999, -176.7000); //dump1
	LVTrashCan[1] = CreateDynamicObject(1227, 1072.0201, 1222.5489, 10.6586, 0.0000, 0.0000, 0.0000); //dump1
	LVTrashCan[2] = CreateDynamicObject(1227, 1584.6295, 924.1731, 10.6601, 0.0000, 0.0000, 179.6999); //dump1
	LVTrashCan[3] = CreateDynamicObject(1227, 1872.3363, 1263.8803, 10.6001, 0.0000, 0.0000, -178.3001); //dump1
	LVTrashCan[4] = CreateDynamicObject(1227, 1665.3045, 1722.5548, 10.6579, 0.0000, 0.0000, 0.0000); //dump1
	LVTrashCan[5] = CreateDynamicObject(1227, 1577.8685, 2057.9028, 10.4286, 0.0000, 0.0000, -87.7999); //dump1
	LVTrashCan[6] = CreateDynamicObject(1227, 1576.3504, 2366.1147, 10.7286, 0.0000, 0.0000, -90.8999); //dump1
	LVTrashCan[7] = CreateDynamicObject(1227, 1535.2017, 2694.8063, 10.6601, 0.0000, 0.0000, 89.9999); //dump1
	LVTrashCan[8] = CreateDynamicObject(1227, 2202.5676, 2761.0800, 10.6486, 0.0000, 0.0000, 89.4999); //dump1
	LVTrashCan[9] = CreateDynamicObject(1227, 2074.0236, 2295.7932, 10.6388, 0.0000, 0.0000, 85.2999); //dump1
	LVTrashCan[10] = CreateDynamicObject(1227, 2516.3469, 2343.2749, 10.7186, 0.0000, 0.0000, 179.7999); //dump1
	LVTrashCan[11] = CreateDynamicObject(1227, 2838.2805, 2146.5393, 10.6701, 0.0000, 0.0000, 88.8000); //dump1
	LVTrashCan[12] = CreateDynamicObject(1227, 2482.2058, 1727.2493, 10.6886, 0.0000, 0.0000, 93.8000); //dump1
	LVTrashCan[13] = CreateDynamicObject(1227, 2446.5810, 1239.6174, 10.6286, 0.0000, 0.0000, 89.3999); //dump1
	LVTrashCan[14] = CreateDynamicObject(1227, 2516.8188, 747.5379, 10.5886, 0.0000, 0.0000, -87.3999); //dump1
	LVTrashCan[15] = CreateDynamicObject(1227, 1972.5985, 712.6513, 10.6486, 0.0000, 0.0000, 0.0000); //dump1
	LVTrashCan[16] = CreateDynamicObject(1227, 1871.7152, 1142.5067, 10.6001, 0.0000, 0.0000, 0.0000); //dump1
	//3cShop
	CreateDynamicObject(18026, 1214.8735, 1227.8363, 509.1601, 0.0000, 0.0000, 0.0000); //clothes_shit
	CreateDynamicObject(1649, 1219.7631, 1219.1019, 510.0862, 0.0000, 89.9001, 179.5999); //wglasssmash
	CreateDynamicObject(1500, 1214.2186, 1219.8327, 509.0587, 0.0000, 0.0000, 0.0000); //Gen_doorEXT05
	CreateDynamicObject(19786, 1226.4155, 1233.0836, 510.6002, 0.0000, 90.2999, -90.4000); //LCDTVBig1
	CreateDynamicObject(1649, 1209.8441, 1219.1712, 510.1035, 0.0000, 89.9001, 179.5999); //wglasssmash
	CreateDynamicObject(14869, 1221.6920, 1225.5522, 509.7900, 0.0000, 0.0000, 0.0000); //bobbie-table
	CreateDynamicObject(19893, 1221.6309, 1225.5603, 509.9523, 0.0000, 0.0000, -85.5999); //LaptopSAMP1
	CreateDynamicObject(14869, 1221.6920, 1222.8104, 509.7900, 0.0000, 0.0000, 0.0000); //bobbie-table
	CreateDynamicObject(14869, 1208.0517, 1222.8133, 509.7900, 0.0000, 0.0000, -179.9000); //bobbie-table
	CreateDynamicObject(14869, 1208.0487, 1225.5946, 509.7900, 0.0000, 0.0000, -179.9000); //bobbie-table
	CreateDynamicObject(-1009, 1208.1387, 1222.8336, 509.9523, 0.0000, 0.0000, 92.1999); //LaptopSAMP1
	CreateDynamicObject(19421, 1208.1459, 1222.4221, 509.9451, 0.0000, 0.0000, 94.7999); //headphones01
	CreateDynamicObject(19423, 1207.6339, 1225.5780, 510.1680, 88.1999, 98.0999, -6.5000); //headphones03
	CreateDynamicObject(19894, 1208.0693, 1225.6132, 509.9630, 0.0000, 0.0000, 0.0000); //LaptopSAMP2
	CreateDynamicObject(18866, 1221.5535, 1223.1947, 509.9451, 0.0000, 0.0000, -87.3000); //MobilePhone2
	CreateDynamicObject(18868, 1221.5631, 1222.8616, 509.9552, 0.0000, 0.0000, -55.9999); //MobilePhone4
	CreateDynamicObject(18872, 1221.4443, 1222.4299, 509.9851, 0.0000, 0.0000, -99.2000); //MobilePhone8
	CreateDynamicObject(19422, 1222.0646, 1222.8687, 510.1018, 78.1999, 85.0999, 0.0000); //headphones02
	CreateDynamicObject(19922, 1224.1380, 1230.7756, 509.1256, 0.0000, 0.0000, -89.4999); //MKTable1
	CreateDynamicObject(19423, 1221.5949, 1225.8710, 509.9529, 0.0000, 0.0000, -64.5999); //headphones03
	CreateDynamicObject(2368, 1214.2091, 1232.0175, 509.0965, 0.0000, 0.0000, 0.5000); //Shop_counter_1
	CreateDynamicObject(1999, 1212.2565, 1233.3359, 509.1211, 0.0000, 0.0000, 89.7999); //officedesk2
	CreateDynamicObject(2099, 1217.2106, 1235.3204, 509.1817, 0.0000, 0.0000, -0.8000); //MED_HI_FI_1
	CreateDynamicObject(2232, 1222.9968, 1233.9841, 509.7484, 0.0000, 0.0000, 0.0000); //MED_SPEAKER_4
	CreateDynamicObject(1702, 1218.7829, 1236.1324, 509.1718, 0.0000, 0.0000, 0.0000); //kb_couch06
	CreateDynamicObject(2310, 1222.8735, 1230.1578, 509.6231, 0.0000, 0.0000, -179.3999); //MIKE_DIN_CHAIR
	CreateDynamicObject(2310, 1222.8637, 1231.0186, 509.6231, 0.0000, 0.0000, 179.3999); //MIKE_DIN_CHAIR
	CreateDynamicObject(2310, 1224.0578, 1232.7031, 509.6231, 0.0000, 0.0000, 111.1999); //MIKE_DIN_CHAIR
	CreateDynamicObject(2310, 1225.1086, 1231.6732, 509.6231, 0.0000, 0.0000, -0.0000); //MIKE_DIN_CHAIR
	CreateDynamicObject(2310, 1224.7102, 1230.3581, 509.6532, 0.0000, 0.0000, 0.0000); //MIKE_DIN_CHAIR
	CreateDynamicObject(14869, 1215.7126, 1225.5081, 509.7900, 0.0000, 0.0000, -179.9000); //bobbie-table
	CreateDynamicObject(14869, 1214.9628, 1225.4777, 509.7900, 0.0000, 0.0000, 1.9000); //bobbie-table
	CreateDynamicObject(-1005, 1215.8065, 1225.4945, 509.9545, 87.1998, 0.0000, -93.0999); //cellphone
	CreateDynamicObject(-1006, 1214.8858, 1225.5444, 510.0140, 92.9999, -174.0000, -93.0999); //cellphone
	//ToolShop
	CreateDynamicObject(18024, 463.9786, 954.6851, 599.9609, 0.0000, 0.0000, 0.0000); //int_clothe_ship
	CreateDynamicObject(19454, 467.3795, 944.7718, 598.6500, 0.0000, 0.0000, 90.1998); //wall094
	CreateDynamicObject(18632, 453.9852, 945.6357, 598.4579, -41.0999, -177.9002, 0.0000); //FishingRod
	CreateDynamicObject(19454, 455.2597, 944.7681, 598.6500, 0.0000, 0.0000, 89.9998); //wall094
	CreateDynamicObject(1501, 460.8790, 944.7557, 596.7861, 0.0000, 0.0000, 0.0000); //Gen_doorEXT04
	CreateDynamicObject(19631, 469.2022, 948.3084, 599.5723, -91.0000, 0.0000, 0.0000); //SledgeHammer1
	CreateDynamicObject(-1012, 469.1922, 947.8523, 599.1094, 0.0000, 0.0000, 90.0000); //pick
	CreateDynamicObject(19631, 469.2022, 948.8220, 599.1925, -91.0000, 0.0000, 0.0000); //SledgeHammer1
	CreateDynamicObject(-1011, 469.1922, 947.2687, 599.4899, 0.0000, 0.0000, 90.0000); //axe
	CreateDynamicObject(-1012, 469.1922, 946.7023, 599.1025, 0.0000, 0.0000, 90.0000); //pick
	CreateDynamicObject(-1011, 469.1922, 945.9005, 599.4044, 0.0000, 0.0000, 90.0000); //axe
	CreateDynamicObject(19468, 454.1319, 945.7340, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(18632, 453.9852, 946.4489, 597.7480, -41.0999, -177.9002, 0.0000); //FishingRod
	CreateDynamicObject(18632, 454.0453, 948.0624, 598.5158, -41.0999, -177.9002, 0.0000); //FishingRod
	CreateDynamicObject(2713, 468.9542, 947.9116, 596.9551, 0.0000, 0.0000, 93.1999); //cj_bucket
	CreateDynamicObject(19468, 454.2020, 946.0944, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.2020, 945.2440, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.2320, 946.4945, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.1619, 947.1250, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.1619, 947.4953, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.4220, 947.8156, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.2920, 948.1459, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.1219, 948.5563, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(19468, 454.2319, 948.9367, 596.8821, 0.0000, 0.0000, 0.0000); //bucket01
	CreateDynamicObject(1574, 468.9237, 949.5179, 596.8231, 0.0000, 0.0000, 0.0000); //trashcan
	CreateDynamicObject(2713, 469.0746, 947.3673, 596.9551, 0.0000, 0.0000, 93.1999); //cj_bucket
	CreateDynamicObject(2713, 468.9911, 948.8646, 596.9551, 0.0000, 0.0000, 93.1999); //cj_bucket
	CreateDynamicObject(2713, 469.1040, 946.4871, 596.9551, 0.0000, 0.0000, 93.1999); //cj_bucket
	CreateDynamicObject(2713, 469.0665, 945.7680, 596.9551, 0.0000, 0.0000, 87.0000); //cj_bucket
	CreateDynamicObject(2712, 469.0679, 948.4533, 597.5242, 0.0000, -2.1999, 0.0000); //CJ_MOP
	CreateDynamicObject(2712, 469.0679, 946.0726, 597.5242, 5.0999, -2.1999, -1.4999); //CJ_MOP
	CreateDynamicObject(2463, 469.1747, 951.1034, 597.4585, 0.0000, 0.0000, -88.4999); //CJ_HOBBY_SHELF_2
	CreateDynamicObject(19573, 454.1305, 952.7324, 597.8125, 0.0000, 0.0000, 91.9000); //BriquettesBag1
	CreateDynamicObject(1885, 463.0814, 945.2133, 596.7423, 0.0000, 0.0000, 0.0000); //shop_baskets
	CreateDynamicObject(19921, 468.6855, 950.8076, 599.0689, 0.0000, 0.0000, -96.3999); //CutsceneToolBox1
	CreateDynamicObject(19921, 468.7034, 950.9666, 597.7085, 0.0000, 0.0000, -85.2999); //CutsceneToolBox1
	CreateDynamicObject(19900, 454.3235, 949.8677, 596.8050, 0.0000, 0.0000, 0.0000); //ToolCabinet2
	CreateDynamicObject(19900, 454.3528, 950.9586, 596.8050, 0.0000, 0.0000, 1.7000); //ToolCabinet2
	CreateDynamicObject(19899, 454.4676, 952.7254, 596.5586, 0.0000, 0.0000, 2.0999); //ToolCabinet1
	CreateDynamicObject(19622, 469.2208, 951.9838, 597.4925, 2.6999, 0.0000, 91.0999); //Broom1
	CreateDynamicObject(19918, 463.6369, 961.0394, 596.8090, 0.0000, 0.0000, 0.0000); //CutsceneBox1
	CreateDynamicObject(19573, 454.1112, 953.3118, 597.8125, 0.0000, 0.0000, 91.9000); //BriquettesBag1
	CreateDynamicObject(1438, 460.7879, 962.4686, 596.7989, 0.0000, 0.0000, 0.0000); //DYN_BOX_PILE_2
	CreateDynamicObject(1438, 462.5379, 961.1682, 596.7989, 0.0000, 0.0000, 0.0000); //DYN_BOX_PILE_2
	CreateDynamicObject(1438, 460.5664, 960.7693, 596.7989, 0.0000, 0.0000, 89.8000); //DYN_BOX_PILE_2
	CreateDynamicObject(1438, 461.6473, 961.5084, 597.3788, 0.0000, 0.0000, 10.5000); //DYN_BOX_PILE_2
	CreateDynamicObject(1438, 462.4906, 962.6111, 596.8087, 0.0000, 0.0000, 10.5000); //DYN_BOX_PILE_2
	CreateDynamicObject(2737, 469.1921, 956.8442, 597.8125, 0.0000, 0.0000, -87.1999); //POLICE_NB_car
	CreateDynamicObject(970, 455.0451, 958.8109, 597.8110, 0.0000, 0.0000, 0.0000); //fencesmallb
	CreateDynamicObject(2737, 469.1276, 958.1629, 599.2827, 0.0000, 0.0000, -87.1999); //POLICE_NB_car
	CreateDynamicObject(2737, 469.0671, 959.4015, 597.8027, 0.0000, 0.0000, -87.1999); //POLICE_NB_car
	CreateDynamicObject(2737, 468.9997, 960.7799, 599.2830, 0.0000, 0.0000, -87.1999); //POLICE_NB_car
	CreateDynamicObject(2737, 468.9504, 961.7888, 597.8228, 0.0000, 0.0000, -87.1999); //POLICE_NB_car
	CreateDynamicObject(1744, 453.8737, 945.8641, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(1744, 453.8693, 948.4042, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(1744, 453.8646, 951.1044, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(1744, 453.8593, 953.9750, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(1744, 453.8546, 956.6152, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(1744, 453.8497, 959.4157, 599.7106, 0.0000, 0.0000, 90.0999); //MED_SHELF
	CreateDynamicObject(2626, 469.6385, 954.8119, 597.5301, 0.0000, 0.0000, -89.3000); //CJ_URB_COUNTER
	CreateDynamicObject(970, 451.9451, 958.8109, 597.8110, 0.0000, 0.0000, 0.0000); //fencesmallb
	CreateDynamicObject(970, 459.1446, 961.0179, 597.8110, 0.0000, 0.0000, 89.4999); //fencesmallb
	CreateDynamicObject(19454, 474.0527, 952.5875, 598.1115, 0.0000, 0.0000, 0.0000); //wall094
	CreateDynamicObject(19454, 474.0527, 952.5875, 601.4613, 0.0000, 0.0000, 0.0000); //wall094
	//Academy
	CreateDynamicObject(14595, 569.4177, 561.8685, 900.7770, 0.0000, 0.0000, 0.0000); //paperchase02
	CreateDynamicObject(14596, 578.8480, 546.5731, 895.9168, 0.0000, 0.0000, 0.1999); //paperchase_stairs
	CreateDynamicObject(1649, 572.6840, 561.4046, 898.5446, 0.0000, 0.0000, -90.4000); //wglasssmash
	CreateDynamicObject(1649, 572.6533, 557.0653, 898.5446, 0.0000, 0.0000, -90.4000); //wglasssmash
	CreateDynamicObject(1649, 572.7266, 567.6765, 898.5446, 0.0000, 0.0000, -90.4000); //wglasssmash
	CreateDynamicObject(1538, 575.8135, 567.0628, 891.0281, 0.0000, 0.0000, 0.0000); //sl_dtdoor1
	CreateDynamicObject(14594, 551.2800, 562.2747, 891.0291, 0.0000, 0.0000, 179.0000); //paperchase03
	CreateDynamicObject(1491, 544.3029, 556.8139, 896.9462, 0.0000, 0.0000, 0.3000); //Gen_doorINT01
	CreateDynamicObject(19357, 583.7291, 549.2003, 894.5166, 0.0000, 0.0000, -89.4000); //wall005
	CreateDynamicObject(19357, 583.7291, 549.2003, 892.4863, 0.0000, 0.0000, -89.4000); //wall005
	CreateDynamicObject(1704, 549.3533, 549.7103, 890.9886, 0.0000, 0.0000, 89.6999); //kb_chair03
	CreateDynamicObject(1963, 578.0469, 558.3628, 891.4348, 0.0000, 0.0000, -91.1998); //est_desk
	CreateDynamicObject(2165, 568.8954, 585.5900, 891.0777, 0.0000, 0.0000, 86.4999); //MED_OFFICE_DESK_1
	CreateDynamicObject(2607, 575.2466, 559.4588, 891.4024, 0.0000, 0.0000, 179.2001); //POLCE_DESK2
	CreateDynamicObject(2605, 573.8209, 557.9366, 891.4075, 0.0000, 0.0000, 87.7999); //POLCE_DESK1
	CreateDynamicObject(1663, 574.6091, 557.4888, 891.4932, 0.0000, 0.0000, -67.9999); //swivelchair_B
	CreateDynamicObject(3077, 569.1820, 581.9503, 890.9786, 0.0000, 0.0000, 89.3000); //nf_blackboard
	CreateDynamicObject(1971, 554.4885, 555.0647, 891.3143, 0.3999, 0.0000, -0.4000); //kb_flykiller
	CreateDynamicObject(1516, 564.4935, 584.6773, 891.1358, 0.0000, 0.0000, 0.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 560.7332, 584.7774, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 557.3840, 584.8532, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 553.6759, 585.0069, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 550.5363, 585.0781, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 550.4864, 582.8580, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 550.4348, 580.5885, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 550.3809, 578.2085, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 553.5963, 582.7765, 891.1358, 0.0000, 0.0000, -1.3000); //DYN_TABLE_03
	CreateDynamicObject(1516, 557.2853, 582.6929, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 560.7229, 582.5729, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 564.4406, 582.4433, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 564.4406, 582.4433, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 553.4760, 580.4949, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 557.2133, 580.3647, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 560.5814, 580.2467, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 564.3289, 580.1163, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 553.3426, 578.1091, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 557.0905, 577.9779, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 557.0905, 577.9779, 891.1358, 0.0000, 0.0000, -2.0000); //DYN_TABLE_03
	CreateDynamicObject(1516, 560.3487, 577.8640, 891.1358, 0.0000, 0.0000, -1.5000); //DYN_TABLE_03
	CreateDynamicObject(1516, 564.1674, 577.7642, 891.1358, 0.0000, 0.0000, -1.5000); //DYN_TABLE_03
	ClassSeat1[0] = CreateDynamicObject(1720, 552.6179, 585.0954, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[1] = CreateDynamicObject(1720, 549.3902, 585.2137, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[2] = CreateDynamicObject(1720, 549.3045, 582.8756, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[3] = CreateDynamicObject(1720, 552.4923, 582.7587, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[4] = CreateDynamicObject(1720, 556.2297, 582.6218, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[5] = CreateDynamicObject(1720, 559.6577, 582.4962, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[6] = CreateDynamicObject(1720, 563.2650, 582.3640, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[7] = CreateDynamicObject(1720, 563.1823, 580.1056, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[8] = CreateDynamicObject(1720, 559.6061, 580.2667, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[9] = CreateDynamicObject(1720, 556.1884, 580.3920, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[10] = CreateDynamicObject(1720, 552.4807, 580.5278, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[11] = CreateDynamicObject(1720, 549.4428, 580.6391, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[12] = CreateDynamicObject(1720, 549.3549, 578.2406, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[13] = CreateDynamicObject(1720, 552.2927, 578.1329, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[14] = CreateDynamicObject(1720, 556.0498, 577.9953, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[15] = CreateDynamicObject(1720, 559.4075, 577.8722, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[16] = CreateDynamicObject(1720, 562.8851, 577.7448, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[17] = CreateDynamicObject(1720, 563.3601, 584.7017, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[18] = CreateDynamicObject(1720, 559.7127, 584.8354, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	ClassSeat1[19] = CreateDynamicObject(1720, 556.4351, 584.9555, 891.0313, 0.0000, 0.0000, 87.8999); //rest_chair
	CreateDynamicObject(1703, 549.4702, 551.9744, 890.9916, -0.5000, 0.0000, 88.0000); //kb_couch02
	CreateDynamicObject(1703, 551.4268, 554.5811, 890.9713, -0.5000, 0.0000, -0.6999); //kb_couch02
	CreateDynamicObject(2370, 552.0277, 551.8146, 890.8391, 0.0000, 0.5999, -0.7999); //Shop_set_1_Table
	CreateDynamicObject(1999, 536.9848, 575.4570, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1491, 568.8291, 575.4105, 891.0499, 0.0000, 0.0000, 0.0000); //Gen_doorINT01
	CreateDynamicObject(1742, 553.2291, 545.5930, 891.0339, 0.0000, 0.0000, 179.4999); //Med_BOOKSHELF
	CreateDynamicObject(1491, 549.4987, 545.3430, 891.0787, 0.0000, 0.0000, -0.8999); //Gen_doorINT01
	CreateDynamicObject(1999, 537.0460, 577.4370, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 537.1074, 579.3966, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 537.1678, 581.3363, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 532.5692, 581.4702, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 527.7103, 581.6220, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 527.6490, 579.6628, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 527.5872, 577.6824, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 527.5259, 575.7233, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 532.4970, 579.4791, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 532.4344, 577.4797, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 532.3720, 575.4902, 890.9655, 0.0000, 0.0000, -91.7999); //officedesk2
	CreateDynamicObject(1999, 533.3204, 574.4501, 890.9655, 0.0000, 0.0000, 88.7999); //officedesk2
	CreateDynamicObject(1999, 533.3622, 576.4394, 890.9655, 0.0000, 0.0000, 88.7999); //officedesk2
	CreateDynamicObject(1999, 533.4044, 578.4487, 890.9655, 0.0000, 0.0000, 88.7999); //officedesk2
	CreateDynamicObject(1999, 533.4456, 580.4183, 890.9655, 0.0000, 0.0000, 88.7999); //officedesk2
	CreateDynamicObject(1999, 528.6781, 580.5678, 890.9655, 0.0000, 0.0000, 88.2999); //officedesk2
	CreateDynamicObject(1999, 528.6190, 578.5976, 890.9655, 0.0000, 0.0000, 88.2999); //officedesk2
	CreateDynamicObject(1999, 528.5595, 576.6077, 890.9655, 0.0000, 0.0000, 88.2999); //officedesk2
	CreateDynamicObject(1999, 528.5024, 574.6785, 890.9655, 0.0000, 0.0000, 88.2999); //officedesk2
	CreateDynamicObject(2008, 524.3203, 571.3258, 891.0118, 0.0000, 0.0000, -1.4999); //officedesk1
	CreateDynamicObject(1671, 524.8890, 570.1405, 891.5163, 0.0000, 0.0000, 165.8000); //swivelchair_A
	ClassSeat2[0] = CreateDynamicObject(1721, 535.8358, 574.4238, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[1] = CreateDynamicObject(1721, 535.8537, 576.5039, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[2] = CreateDynamicObject(1721, 535.8709, 578.3935, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[3] = CreateDynamicObject(1721, 535.8892, 580.4835, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[4] = CreateDynamicObject(1721, 531.2396, 580.6138, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[5] = CreateDynamicObject(1721, 531.2218, 578.5437, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[6] = CreateDynamicObject(1721, 531.1340, 576.4839, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[7] = CreateDynamicObject(1721, 531.1182, 574.6838, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[8] = CreateDynamicObject(1721, 526.1697, 574.8969, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[9] = CreateDynamicObject(1721, 526.1875, 576.9370, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[10] = CreateDynamicObject(1721, 526.2036, 578.7769, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[11] = CreateDynamicObject(1721, 526.2210, 580.7767, 891.0159, 0.0000, 0.0000, -90.5001); //est_chair1
	ClassSeat2[12] = CreateDynamicObject(1721, 530.0067, 581.5233, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[13] = CreateDynamicObject(1721, 529.9655, 579.5536, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[14] = CreateDynamicObject(1721, 529.9232, 577.5344, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[15] = CreateDynamicObject(1721, 529.8831, 575.6250, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[16] = CreateDynamicObject(1721, 534.6680, 575.3155, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[17] = CreateDynamicObject(1721, 534.7103, 577.3352, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[18] = CreateDynamicObject(1721, 534.7510, 579.2848, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	ClassSeat2[19] = CreateDynamicObject(1721, 534.7930, 581.3047, 891.0159, 0.0000, 0.0000, 88.7998); //est_chair1
	CreateDynamicObject(1491, 537.8064, 572.0303, 891.0201, 0.0000, 0.0000, 87.5999); //Gen_doorINT01
	CreateDynamicObject(19799, 573.7700, 549.3126, 903.9702, 0.0000, 0.0000, -89.1001); //CaligulasVaultDoor
	CreateDynamicObject(19355, 573.4473, 550.2181, 903.6277, 0.0000, 0.0000, 0.0000);
	TextedObject[2] = CreateDynamicObject(2715, 571.1860, 575.1608, 892.0643, 0.0000, 0.0000, 0.0000); //CJ_DON_POSTER
	SetDynamicObjectMaterialText(TextedObject[2], 0, "101", OBJECT_MATERIAL_SIZE_128x128, "Arial", 35, 1, 0xFFFFFFFF, 0x00000000, 0);
	TextedObject[3] = CreateDynamicObject(2715, 538.2353, 574.4033, 892.0643, 0.0000, 0.0000, 85.3999); //CJ_DON_POSTER
	SetDynamicObjectMaterialText(TextedObject[3], 0, "102", OBJECT_MATERIAL_SIZE_128x128, "Arial", 35, 1, 0xFFFFFFFF, 0x00000000, 0);
	TextedObject[4] = CreateDynamicObject(2715, 574.0020, 550.4365, 904.9475, 0.0000, 0.0000, 90.4000); //CJ_DON_POSTER
	SetDynamicObjectMaterialText(TextedObject[4], 0, "屋顶不是拿来吃午饭的地方", OBJECT_MATERIAL_SIZE_256x128, "Segoe UI", 24, 1, 0xFFFFFFFF, 0x00000000, 0);
	TextedObject[5] = CreateDynamicObject(2667, -791.0457, 490.3069, 1367.3444, 0.0000, 0.0000, 0.0000); //CJ_PIZ_POSTER1
	SetDynamicObjectMaterialText(TextedObject[5], 0, "地下异世界空间\n========>", OBJECT_MATERIAL_SIZE_256x128, "Arial", 30, 1, 0xFFFFFFFF, 0x00000000, 0);

	//Ammunation
	TextedObject[0] = CreateDynamicObject(19381, 296.0770, -25.7240, 1001.5156, 0.0000, 0.0000, -89.8999); //wall029
	SetDynamicObjectMaterialText(TextedObject[0], 0, " ", OBJECT_MATERIAL_SIZE_256x128, "Arial", 24, 1, 0xFFFFFFFF, 0x00000000, 0);//透明墙
	TextedObject[1] = CreateDynamicObject(19381, 291.4369, -25.7321, 1001.5156, 0.0000, 0.0000, -89.8999); //wall029
	SetDynamicObjectMaterialText(TextedObject[1], 0, " ", OBJECT_MATERIAL_SIZE_256x128, "Arial", 24, 1, 0xFFFFFFFF, 0x00000000, 0);//透明墙

	//Gym
	LSBell = CreateDynamicObject(2913, 774.42907715, 1.88309872, 1000.68834229, 0.00000000, 270.00000000, 87.99966431);
	SFBell = CreateDynamicObject(2913, 765.85528564, -48.86857224, 1000.64093018, 0.00000000, 89.49993896, 0.00000000);
	LVBell1 = CreateDynamicObject(2913, 765.34039307, -59.18271637, 1000.63793945, 0.00000000, 89.49993896, 181.25012207);
	LVBell2 = CreateDynamicObject(2913, 768.1105, -58.9997, 1000.6553, -2.4999, 90.3000, 0.3999);
	BeachBell = CreateDynamicObject(2913, 654.3904, -1863.5407, 5.3082, 0.0000, -89.8000, 0.0000);

	//Map Fix
	CreateDynamicObject(1555, 940.8157, -19.5408, 999.6557, 0.0000, 0.0000, 0.0000); //Gen_doorEXT17
	CreateDynamicObject(19354, 968.5524, -53.2292, 1001.8174, 0.0000, 0.0000, 0.0000); //wall002
	CreateDynamicObject(1555, 939.3656, -19.5408, 999.6557, 0.0000, 0.0000, 0.0000); //Gen_doorEXT17
	CreateDynamicObject(1536, 968.4332, -52.4088, 1000.1448, -0.7999, 0.0000, -88.8999); //Gen_doorEXT15
	CreateDynamicObject(2358, 960.8586, -45.6518, 1000.2415, 0.0000, 0.0000, 0.0000); //AMMO_BOX_c2
	CreateDynamicObject(2885, 1309.9853, 3.9532, 1007.3339, 0.0000, 0.0000, -90.2999); //xref_garagedoor
	CreateDynamicObject(2358, 960.8586, -45.6518, 1000.4517, 0.0000, 0.0000, -8.2999); //AMMO_BOX_c2
	CreateDynamicObject(2358, 961.9862, -45.8163, 1000.2214, 0.0000, 0.0000, 27.7000); //AMMO_BOX_c2
	CreateDynamicObject(2358, 961.9359, -45.7301, 1000.4116, 0.0000, 0.0000, -6.4999); //AMMO_BOX_c2
    CreateDynamicObject(18756, 287.6725, -1609.6026, 33.9324, 0.0000, 0.0000, 79.7999);
    CreateDynamicObject(18756, 286.0872, -1609.3144, 33.9324, 0.0000, 0.0000, 79.7999);
    
    

	//Warehouse LV5
	CreateDynamicObject(14784, 982.2920, 1033.8353, 1983.5308, 0.0000, 0.0000, 0.0000); //genint_warehs
	CreateDynamicObject(19912, 1011.0918, 1076.1519, 1977.4671, 0.0000, 0.0000, 89.9999); //SAMPMetalGate1
	CreateDynamicObject(2567, 1003.5658, 1046.8311, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 1003.5765, 1053.3920, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 1003.5523, 1039.5921, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 1003.5415, 1033.6192, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 994.0515, 1033.6358, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 994.0617, 1039.4271, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 994.0746, 1046.8580, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 994.0853, 1053.1386, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 984.9044, 1053.1538, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 984.8933, 1046.8325, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 984.8802, 1039.2514, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 984.8701, 1033.4997, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 975.5893, 1033.5158, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 975.6003, 1039.6475, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 975.6124, 1046.6885, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 975.6233, 1053.0797, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 966.7428, 1053.0953, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 966.7323, 1046.7838, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 966.7205, 1039.5720, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(2567, 966.7100, 1033.6005, 1975.9886, 0.0000, 0.0000, 89.8998); //ab_warehouseShelf
	CreateDynamicObject(11292, 953.3597, 1009.6107, 1976.9919, 0.0000, 0.0000, 90.1999); //gasstatiohut
	CreateDynamicObject(2165, 954.3302, 1010.9974, 1975.7736, 0.0000, 0.0000, -89.2001); //MED_OFFICE_DESK_1
	CreateDynamicObject(1714, 953.0982, 1010.0574, 1975.7884, 0.0000, -2.1000, 103.5000); //kb_swivelchair1

	//Factory1
	CreateDynamicObject(14412, 107.6050, 148.6176, 1241.1778, 0.0000, 0.0000, 0.0000); //Carter_drugfloor
	CreateDynamicObject(3037, 131.9738, 151.8134, 1232.8502, 0.0000, 0.0000, 0.0000); //warehouse_door2b
	CreateDynamicObject(14416, 86.8558, 154.5268, 1232.7519, 0.0000, 0.0000, 0.0000); //carter-stairs07
	CreateDynamicObject(14438, 102.4586, 147.2526, 1239.7287, 0.0000, 0.0000, 0.0000); //Carter-light04
	CreateDynamicObject(14413, 114.5643, 153.9916, 1235.9289, 0.0000, 0.0000, 0.0000); //carter-column01
	CreateDynamicObject(14459, 102.8381, 148.5747, 1238.9094, 0.0000, 0.0000, 0.0000); //carter-cage
	CreateDynamicObject(1536, 75.8668, 139.0960, 1236.0053, 0.0000, 0.0000, 90.9999); //Gen_doorEXT15
	CreateDynamicObject(1536, 75.8023, 142.1143, 1236.0053, 0.0000, 0.0000, -89.6999); //Gen_doorEXT15
	CreateDynamicObject(934, 115.0001, 145.6828, 1232.9826, 0.0000, 0.0000, -90.0999); //GENERATOR_BIG
	CreateDynamicObject(934, 106.1436, 145.6848, 1232.9826, 0.0000, 0.0000, -90.2000); //GENERATOR_BIG
	CreateDynamicObject(943, 110.2537, 140.9203, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(943, 102.4142, 141.0295, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(943, 94.8349, 141.1352, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(943, 95.0057, 153.3641, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(943, 102.3663, 153.3416, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(943, 110.4057, 153.2295, 1232.8294, 0.0000, 0.0000, 89.1999); //GENERATOR_LOW
	CreateDynamicObject(922, 85.3455, 143.9711, 1232.8333, 0.0000, 0.0000, 90.1999); //Packing_carates1
	CreateDynamicObject(934, 98.7036, 145.7106, 1232.9826, 0.0000, 0.0000, -90.2000); //GENERATOR_BIG
	CreateDynamicObject(934, 98.7143, 148.7905, 1232.9826, 0.0000, 0.0000, -90.2000); //GENERATOR_BIG
	CreateDynamicObject(934, 106.1545, 148.7947, 1232.9826, 0.0000, 0.0000, -90.2000); //GENERATOR_BIG
	CreateDynamicObject(934, 115.0046, 148.7641, 1232.9826, 0.0000, 0.0000, -90.2000); //GENERATOR_BIG
	CreateDynamicObject(922, 85.3628, 139.0213, 1232.8333, 0.0000, 0.0000, 90.1999); //Packing_carates1
	CreateDynamicObject(920, 94.1558, 145.5432, 1232.2562, 0.0000, 0.0000, -90.0999); //Y_GENERATOR

	//Office2
	CreateDynamicObject(14597, -2294.7026, -2299.3747, 1999.9952, 0.0000, 0.0000, 0.0000); //paperchase07
	CreateDynamicObject(19176, -2281.6103, -2299.1591, 1999.3204, 0.0000, 0.0000, -89.9000); //LSOffice1Door1
	CreateDynamicObject(19167, -2305.7507, -2299.3610, 1998.7928, 0.0000, 0.0000, 0.0000); //GTASAMap4
	CreateDynamicObject(2163, -2291.2631, -2286.7875, 1997.8979, 0.0000, 0.0000, -90.4000); //MED_OFFICE_UNIT_2
	CreateDynamicObject(2309, -2291.5217, -2291.5314, 1998.0272, 0.0000, 0.0000, 96.5998); //MED_OFFICE_CHAIR2
	CreateDynamicObject(2163, -2291.2741, -2288.5593, 1997.8979, 0.0000, 0.0000, -90.4000); //MED_OFFICE_UNIT_2
	CreateDynamicObject(2165, -2293.2189, -2287.6591, 1997.9702, 0.0000, 0.0000, 179.3000); //MED_OFFICE_DESK_1
	CreateDynamicObject(2165, -2297.3271, -2289.8369, 1997.9702, 0.0000, 0.0000, -90.6999); //MED_OFFICE_DESK_1
	CreateDynamicObject(2191, -2298.1713, -2287.6184, 1998.0128, 0.0000, 0.0000, 90.4000); //MED_OFFICE2_CAB
	CreateDynamicObject(1806, -2293.6264, -2286.4860, 1997.9875, 0.0000, 0.0000, -173.2998); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -2298.4211, -2290.6032, 1997.9676, 0.0000, 0.0000, -89.2998); //MED_OFFICE_CHAIR
	CreateDynamicObject(16378, -2293.5725, -2311.1718, 1998.7210, 0.0000, 0.0000, 0.0000); //des_byofficeint
	CreateDynamicObject(2200, -2297.0185, -2285.9484, 1997.9748, 0.0000, 0.0000, 0.0000); //MED_OFFICE5_UNIT_1
	CreateDynamicObject(19922, -2302.4194, -2299.3730, 1997.9991, 0.0000, 0.0000, 0.0000); //MKTable1
	CreateDynamicObject(1827, -2294.4533, -2290.5944, 1997.9804, 0.0000, 0.0000, 0.0000); //man_sdr_tables
	CreateDynamicObject(1971, -2290.0737, -2285.7824, 1998.3443, 0.0000, 0.0000, 0.0000); //kb_flykiller
	CreateDynamicObject(19922, -2304.8410, -2299.3730, 1997.9991, 0.0000, 0.0000, 0.0000); //MKTable1
	CreateDynamicObject(2206, -2288.0166, -2287.7189, 1998.0720, 0.0000, 0.0000, 0.0000); //MED_OFFICE8_DESK_02
	CreateDynamicObject(1714, -2303.8500, -2301.1916, 1998.1047, 0.0000, 0.0000, -151.1999); //kb_swivelchair1
	CreateDynamicObject(1714, -2305.4882, -2301.1049, 1998.1047, 0.0000, 0.0000, -165.8999); //kb_swivelchair1
	CreateDynamicObject(1714, -2307.5761, -2299.4321, 1998.1047, 0.0000, 0.0000, 92.2998); //kb_swivelchair1
	CreateDynamicObject(1714, -2305.3701, -2297.3769, 1998.1047, 0.0000, 0.0000, -24.7000); //kb_swivelchair1
	CreateDynamicObject(1714, -2302.1999, -2297.5507, 1998.1047, 0.0000, 0.0000, -33.4000); //kb_swivelchair1
	CreateDynamicObject(1714, -2303.7465, -2297.5495, 1998.1047, 0.0000, 0.0000, -33.4000); //kb_swivelchair1
	CreateDynamicObject(2162, -2300.5070, -2296.4946, 1997.9908, 0.0000, 0.0000, 0.0000); //MED_OFFICE_UNIT_1
	CreateDynamicObject(2167, -2298.6940, -2311.6494, 1997.9552, 0.0000, 0.0000, 89.6999); //MED_OFFICE_UNIT_7
	CreateDynamicObject(2167, -2298.6921, -2310.7885, 1997.9552, 0.0000, 0.0000, 89.6999); //MED_OFFICE_UNIT_7
	CreateDynamicObject(2163, -2291.2416, -2307.2170, 1997.9566, 0.0000, 0.0000, -89.7998); //MED_OFFICE_UNIT_2
	CreateDynamicObject(2164, -2291.2377, -2305.4824, 1997.9561, 0.0000, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2173, -2296.9672, -2307.8630, 1998.0240, 0.0000, 0.0000, -89.4999); //MED_OFFICE_DESK_3
	CreateDynamicObject(2173, -2296.9916, -2304.7199, 1998.0240, 0.0000, 0.0000, -89.4999); //MED_OFFICE_DESK_3
	CreateDynamicObject(1806, -2298.1269, -2305.2600, 1998.0687, 0.0000, 0.0000, -91.3999); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -2298.0822, -2308.6940, 1998.0687, 0.0000, 0.0000, -83.5000); //MED_OFFICE_CHAIR
	CreateDynamicObject(14632, -2276.0727, -2314.6489, 1999.5980, 0.0000, 0.0000, 0.0000); //paperchase_bits2b
	CreateDynamicObject(2199, -2290.7263, -2294.0559, 1998.3203, 0.0000, 0.0000, 89.7998); //MED_OFFICE6_MC_1
	CreateDynamicObject(2308, -2289.3103, -2289.4208, 1998.0091, -0.1999, 0.1999, 179.8999); //MED_OFFICE4_DESK_4
	CreateDynamicObject(2309, -2290.5434, -2289.1630, 1997.9681, 0.0000, 0.0000, -138.8000); //MED_OFFICE_CHAIR2
	CreateDynamicObject(2163, -2284.7919, -2285.8041, 1997.9538, 0.0000, 0.0000, 0.0000); //MED_OFFICE_UNIT_2
	CreateDynamicObject(1714, -2302.2429, -2301.1491, 1998.1047, 0.0000, 0.0000, -142.0000); //kb_swivelchair1
	CreateDynamicObject(1704, -2283.9760, -2290.2092, 1997.9493, 0.0000, 0.0000, -89.2998); //kb_chair03
	CreateDynamicObject(1703, -2284.0144, -2291.9475, 1997.9990, -0.5999, 0.0000, -90.1999); //kb_couch02
	CreateDynamicObject(1714, -2287.0910, -2286.0529, 1998.1047, 0.0000, 0.0000, 0.0000); //kb_swivelchair1
	CreateDynamicObject(2191, -2283.9904, -2288.2329, 1997.9404, 0.0000, 0.0000, -89.1998); //MED_OFFICE2_CAB
	CreateDynamicObject(1670, -2288.1359, -2287.6718, 1999.0207, 0.0000, 0.0000, -30.7999); //propcollecttable
	CreateDynamicObject(19922, -2286.0859, -2291.6936, 1998.0083, 0.0000, 0.0000, -90.0000); //MKTable1

	//Office3
	CreateDynamicObject(14593, -6.8860, 9.8091, 1499.9996, 0.0000, 0.0000, 0.0000);
	CreateDynamicObject(14598, -2.0343, -20.0387, 1513.1943, 0.0000, 0.0000, 0.0000); //paperchase_glass
	CreateDynamicObject(977, -1.0542, -4.2101, 1499.0367, 0.0000, 0.0000, 11.1998); //newtowerdoor1
	CreateDynamicObject(2199, -2.0685, 10.9033, 1497.3354, 0.0000, 0.0000, -90.0998); //MED_OFFICE6_MC_1
	CreateDynamicObject(2164, 2.0569, 4.3175, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0645, 8.6477, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0676, 10.5277, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0745, 14.4677, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0889, 22.7276, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0857, 20.8477, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2164, 2.0824, 18.9675, 1497.6212, 0.0997, 0.0000, -90.0998); //MED_OFFICE_UNIT_5
	CreateDynamicObject(2167, 2.1219, 6.5594, 1497.6307, 0.0000, 0.0000, -90.4999); //MED_OFFICE_UNIT_7
	CreateDynamicObject(2167, 2.2135, 17.0489, 1497.6307, 0.0000, 0.0000, -90.4999); //MED_OFFICE_UNIT_7
	CreateDynamicObject(2161, 2.1284, 12.1091, 1497.6700, 0.0000, 0.0000, -90.5998); //MED_OFFICE_UNIT_4
	CreateDynamicObject(19170, -16.2730, 12.3041, 1498.8380, 90.0998, 89.8999, 0.2000); //GTASAMap7
	CreateDynamicObject(19171, -16.2705, 13.8045, 1498.8387, 90.0998, 89.8998, -0.3998); //GTASAMap8
	CreateDynamicObject(19169, -16.2640, 13.7993, 1500.3354, 90.1997, 89.8999, 0.0000); //GTASAMap6
	CreateDynamicObject(19168, -16.2618, 12.3043, 1500.3308, 90.0998, 90.3998, -0.4997); //GTASAMap5
	CreateDynamicObject(2207, -10.9264, 17.1375, 1497.8310, 0.0000, 0.0000, 0.0000); //MED_OFFICE7_DESK_1
	CreateDynamicObject(2308, -12.8031, 18.9741, 1497.8475, 0.0000, 0.0000, 0.0000); //MED_OFFICE4_DESK_4
	CreateDynamicObject(2193, -10.0980, 5.5303, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(2193, -7.0980, 5.5303, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(2193, -4.2680, 5.6203, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(2193, -4.1680, 8.4202, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(2193, -7.0781, 8.4202, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(2193, -10.0782, 8.4202, 1497.7501, 0.0000, 0.0000, 0.0000); //MED_OFFICE2_DESK_2
	CreateDynamicObject(1806, -6.3159, 19.2720, 1497.6877, 0.0000, 0.0000, -87.0998); //MED_OFFICE_CHAIR
	CreateDynamicObject(2198, -4.8305, 19.8943, 1497.7176, 0.0000, 0.0000, -89.5998); //MED_OFFICE2_DESK_3
	CreateDynamicObject(2198, -4.8171, 17.9743, 1497.7176, 0.0000, 0.0000, -89.5998); //MED_OFFICE2_DESK_3
	CreateDynamicObject(2198, -4.8038, 16.0844, 1497.7176, 0.0000, 0.0000, -89.5998); //MED_OFFICE2_DESK_3
	CreateDynamicObject(1702, -6.6996, 14.4667, 1497.6362, 0.0000, 0.7997, -90.1997); //kb_couch06
	CreateDynamicObject(1702, -8.1520, 12.1295, 1497.6562, 0.0000, 0.7997, 179.6997); //kb_couch06
	CreateDynamicObject(1705, -10.4167, 13.4631, 1497.6733, -0.5000, 0.0000, 89.4999); //kb_chair04
	CreateDynamicObject(1516, -8.5684, 13.8478, 1497.8385, 0.0000, 0.0000, 0.0000); //DYN_TABLE_03
	CreateDynamicObject(1714, -10.0973, 19.4923, 1497.7639, 0.0000, 0.0000, 0.0000); //kb_swivelchair1
	CreateDynamicObject(1663, -9.8797, 15.6993, 1498.1140, 0.0000, 0.0000, -173.2001); //swivelchair_B
	CreateDynamicObject(1806, -6.2387, 17.4004, 1497.6877, 0.0000, 0.0000, -88.6997); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -6.2055, 15.4917, 1497.6877, 0.0000, 0.0000, -88.9999); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -3.3449, 8.1873, 1497.6877, 0.0000, 0.0000, 2.5000); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -6.4953, 8.3220, 1497.6877, 0.0000, 0.0000, 1.2000); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -9.4484, 8.3302, 1497.6877, 0.0000, 0.0000, 0.2000); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -9.3580, 5.3905, 1497.6877, 0.0000, 0.0000, 0.2000); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -6.3707, 5.3790, 1497.6877, 0.0000, 0.0000, 1.6000); //MED_OFFICE_CHAIR
	CreateDynamicObject(1806, -3.2804, 5.3156, 1497.6877, 0.0000, 0.0000, 0.8999); //MED_OFFICE_CHAIR

	//Trailer Interior by CrucixTM
	CreateDynamicObject(14385,2511.64404297,-1725.43725586,779.20867920,0.00000000,0.00000000,0.00000000); //object(kb_tr_main) (1)
	CreateDynamicObject(14386,2511.68481445,-1726.33496094,779.07116699,0.00000000,0.00000000,0.00000000); //object(kb_tr_bits) (1)
	CreateDynamicObject(6959,2509.99047852,-1725.06567383,777.64141846,0.00000000,0.00000000,0.00000000); //object(vegasnbball1) (1)
	CreateDynamicObject(5856,2509.53320312,-1731.39013672,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (1)
	CreateDynamicObject(5856,2509.32836914,-1728.60351562,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (2)
	CreateDynamicObject(5856,2509.53295898,-1726.11254883,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (4)
	CreateDynamicObject(5856,2509.51269531,-1722.17846680,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (5)
	CreateDynamicObject(5856,2508.47363281,-1723.26416016,779.61633301,0.00000000,0.00000000,90.00000000); //object(lawnspraydoor1) (6)
	CreateDynamicObject(5856,2511.74902344,-1732.35571289,779.64135742,0.00000000,0.00000000,90.00000000); //object(lawnspraydoor1) (7)
	CreateDynamicObject(5856,2512.50463867,-1718.44873047,779.61633301,0.00000000,0.00000000,90.00000000); //object(lawnspraydoor1) (8)
	CreateDynamicObject(5856,2508.47216797,-1720.57666016,779.61633301,0.00000000,0.00000000,90.00000000); //object(lawnspraydoor1) (9)
	CreateDynamicObject(5856,2510.49926758,-1718.53540039,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (10)
	CreateDynamicObject(5856,2513.87133789,-1722.26379395,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (11)
	CreateDynamicObject(5856,2513.82446289,-1718.46496582,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (12)
	CreateDynamicObject(5856,2513.87915039,-1726.26562500,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (13)
	CreateDynamicObject(5856,2513.85913086,-1732.00610352,779.61633301,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (14)
	CreateDynamicObject(1506,2513.85717773,-1728.38867188,777.63519287,0.00000000,0.00000000,270.27026367); //object(gen_doorext08) (1)
	CreateDynamicObject(1506,2513.91235352,-1728.40820312,777.47076416,0.00000000,0.00000000,270.26916504); //object(gen_doorext08) (3)
	CreateDynamicObject(970,2511.74829102,-1732.07653809,778.16162109,90.00000000,180.00000000,0.00000000); //object(fencesmallb) (1)
	CreateDynamicObject(970,2509.78393555,-1732.34350586,778.18853760,90.00000000,168.46301270,281.53701782); //object(fencesmallb) (2)
	CreateDynamicObject(970,2513.58300781,-1732.32409668,778.08843994,90.00000000,165.52246094,104.47750854); //object(fencesmallb) (3)
	CreateDynamicObject(970,2513.57885742,-1725.89221191,778.06341553,90.00000000,191.09693909,78.89749146); //object(fencesmallb) (4)
	CreateDynamicObject(970,2513.87695312,-1726.11376953,778.08276367,90.00000000,179.99450684,0.00000000); //object(fencesmallb) (5)
	CreateDynamicObject(970,2509.60205078,-1728.10534668,778.76397705,90.00000000,173.27777100,276.71679688); //object(fencesmallb) (6)
	CreateDynamicObject(1271,2510.17895508,-1723.83093262,778.13720703,0.00000000,0.00000000,0.00000000); //object(gunbox) (2)
	CreateDynamicObject(1271,2510.17724609,-1725.78588867,778.33740234,0.00000000,0.00000000,0.00000000); //object(gunbox) (3)
	CreateDynamicObject(1271,2510.12817383,-1724.27319336,777.98706055,0.00000000,0.00000000,0.00000000); //object(gunbox) (4)
	CreateDynamicObject(970,2508.42675781,-1724.93640137,778.63781738,90.00000000,179.99450684,0.00000000); //object(fencesmallb) (8)
	CreateDynamicObject(970,2508.71679688,-1726.80578613,778.18853760,0.00000000,0.00000000,0.00000000); //object(fencesmallb) (9)
	CreateDynamicObject(970,2508.71166992,-1726.37329102,778.18853760,0.00000000,0.00000000,0.00000000); //object(fencesmallb) (10)
	CreateDynamicObject(970,2513.85937500,-1725.26684570,778.61395264,90.00000000,179.99450684,0.00000000); //object(fencesmallb) (11)
	CreateDynamicObject(970,2513.40307617,-1723.74865723,778.63897705,90.00000000,180.00000000,90.00000000); //object(fencesmallb) (12)
	CreateDynamicObject(970,2513.82714844,-1725.81848145,778.18853760,0.00000000,0.00000000,0.00000000); //object(fencesmallb) (13)
	CreateDynamicObject(1271,2509.66943359,-1727.24377441,779.76306152,0.00000000,0.00000000,0.00000000); //object(gunbox) (7)
	CreateDynamicObject(2238,2509.91040039,-1729.96411133,779.80548096,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (1)
	CreateDynamicObject(2238,2510.36132812,-1726.61914062,778.60479736,90.00000000,0.00000000,90.00000000); //object(cj_lava_lamp) (2)
	CreateDynamicObject(970,2511.14306641,-1720.63073730,778.78912354,0.00000000,90.00000000,0.00000000); //object(fencesmallb) (15)
	CreateDynamicObject(970,2513.45117188,-1720.59960938,778.73907471,0.00000000,90.00000000,0.00000000); //object(fencesmallb) (16)
	CreateDynamicObject(970,2512.92065430,-1720.62817383,780.88885498,0.00000000,0.00000000,0.00000000); //object(fencesmallb) (17)
	CreateDynamicObject(970,2510.53930664,-1721.07861328,778.18853760,0.00000000,90.00000000,269.99996948); //object(fencesmallb) (18)
	CreateDynamicObject(970,2510.78442383,-1719.45983887,777.96331787,90.00000000,180.00549316,180.00000000); //object(fencesmallb) (19)
	CreateDynamicObject(970,2510.71191406,-1718.86914062,778.06152344,90.00000000,179.99450684,0.00000000); //object(fencesmallb) (20)
	CreateDynamicObject(2238,2513.51245117,-1724.43383789,779.59893799,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (3)
	CreateDynamicObject(2238,2513.54003906,-1723.88220215,779.57098389,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (4)
	CreateDynamicObject(2238,2513.49609375,-1722.42236328,779.68225098,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (5)
	CreateDynamicObject(2238,2513.49609375,-1721.91296387,779.62988281,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (6)
	CreateDynamicObject(2238,2513.51782227,-1723.09289551,779.81280518,0.00000000,90.00000000,89.99993896); //object(cj_lava_lamp) (7)
	CreateDynamicObject(2238,2512.33911133,-1725.89257812,779.84576416,0.00000000,90.00000000,0.00000000); //object(cj_lava_lamp) (8)
	CreateDynamicObject(2238,2513.22021484,-1725.83862305,779.86608887,0.00000000,90.00000000,0.00000000); //object(cj_lava_lamp) (9)
	CreateDynamicObject(2238,2510.31909180,-1726.63354492,778.82574463,0.00000000,0.00000000,0.00000000); //object(cj_lava_lamp) (10)
	CreateDynamicObject(5856,2509.52270508,-1728.52905273,782.33337402,0.00000000,0.00000000,0.00000000); //object(lawnspraydoor1) (15)
	CreateDynamicObject(5856,2511.66455078,-1731.28613281,780.86901855,0.00000000,90.00000000,89.99993896); //object(lawnspraydoor1) (16)
	CreateDynamicObject(1749,2509.79565430,-1725.85131836,778.65332031,0.00000000,0.00000000,89.73004150); //object(med_tv_3) (1)
	CreateDynamicObject(5856,2511.68237305,-1727.16394043,780.86901855,0.00000000,90.00000000,89.99993896); //object(lawnspraydoor1) (17)
	CreateDynamicObject(5856,2511.66943359,-1723.12780762,780.86901855,0.00000000,90.00000000,89.99987793); //object(lawnspraydoor1) (18)
	CreateDynamicObject(5856,2511.67895508,-1719.76562500,780.86901855,0.00000000,90.00000000,90.00000000); //object(lawnspraydoor1) (19)
	CreateDynamicObject(970,2510.54785156,-1721.16503906,780.80316162,0.00000000,0.00000000,90.00000000); //object(fencesmallb) (22)
	CreateDynamicObject(3461,2510.54174805,-1722.73986816,779.88775635,0.00000000,0.00000000,0.00000000); //object(tikitorch01_lvs) (1)
	CreateDynamicObject(3461,2510.53662109,-1723.15808105,779.91278076,0.00000000,0.00000000,0.00000000); //object(tikitorch01_lvs) (2)

	//Hangar1
	CreateDynamicObject(8240, 3941.7448, 3996.4541, 3000.4941, 0.0000, 0.0000, 0.0000); //vgssbighanger1
	CreateDynamicObject(8378, 3941.7023, 4029.4846, 2996.7036, 0.0000, 0.0000, 0.0000); //vgsbighngrdoor
	CreateDynamicObject(8000, 4008.3398, 4027.1647, 2984.8659, 0.0000, 0.0000, 0.0000); //vgsSairportland05
	CreateDynamicObject(3626, 3973.2312, 4015.8459, 2988.2514, 0.0000, 0.0000, -90.0000); //dckwrkhut
	CreateDynamicObject(3287, 3965.6147, 3990.4045, 2990.4890, 0.0000, 0.0000, -90.5999); //cxrf_oiltank
	CreateDynamicObject(1999, 3972.6499, 4013.9191, 2987.0043, 0.0000, 0.0000, 0.0000); //officedesk2
	CreateDynamicObject(1806, 3973.6374, 4012.6889, 2987.0310, 0.0000, 0.0000, 0.0000); //MED_OFFICE_CHAIR
	CreateDynamicObject(2608, 3973.8679, 4019.8181, 2987.6669, 0.0000, 0.0000, 0.0000); //POLCE_SHELF
	CreateDynamicObject(1348, 3972.4602, 4010.7736, 2987.5571, 0.0000, 0.0000, 0.0000); //CJ_O2Tanks
	CreateDynamicObject(11290, 3911.5278, 3979.4541, 2992.3007, 0.0000, 0.0000, 0.0000); //facttanks_SFSe04
	CreateDynamicObject(19121, 3968.0861, 3987.8085, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(3361, 3960.2802, 3964.0708, 2992.4609, 0.0000, 0.0000, 0.0000); //cxref_woodstair
	CreateDynamicObject(19121, 3957.9702, 3987.8085, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3957.9702, 3981.6542, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3952.1787, 3981.6542, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3945.6560, 3981.6542, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3945.6560, 3973.8129, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3952.1501, 3973.7602, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(19121, 3962.1555, 3973.7727, 2990.8430, 0.0000, 0.0000, 0.0000); //BollardLight1
	CreateDynamicObject(3406, 3933.9304, 3964.0810, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3942.7133, 3964.0810, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3951.4907, 3964.0793, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3925.1547, 3964.0810, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3916.3942, 3964.0810, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3907.6040, 3964.0810, 2992.4553, 0.0000, 0.0000, 0.0000); //cxref_woodjetty
	CreateDynamicObject(3406, 3908.2617, 3968.9426, 2992.4553, 0.0000, 0.0000, -90.3999); //cxref_woodjetty
	CreateDynamicObject(3406, 3908.3225, 3977.7329, 2992.4553, 0.0000, 0.0000, -90.3999); //cxref_woodjetty
	CreateDynamicObject(3406, 3908.3830, 3986.5246, 2992.4553, 0.0000, 0.0000, -90.3999); //cxref_woodjetty
	CreateDynamicObject(3406, 3908.4497, 3995.2443, 2992.4553, 0.0000, 0.0000, -90.3999); //cxref_woodjetty
	
	//tklv


	//ATM
	ATM[0] = CreateDynamicObject(2942, 2078.8266, 2226.0148, 10.6753, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[1] = CreateDynamicObject(2942, 2078.8239, 2226.9057, 10.6753, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[2] = CreateDynamicObject(2942, -20.5624, -91.7765, 1003.2118, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[3] = CreateDynamicObject(2942, 2173.8737, 1402.9836, 10.6953, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[4] = CreateDynamicObject(2942, 2638.6892, 1876.7917, 10.6884, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[5] = CreateDynamicObject(2942, 2638.6892, 1875.7106, 10.6884, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[6] = CreateDynamicObject(2942, 2408.9897, 2065.1364, 10.4775, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[7] = CreateDynamicObject(2942, 2410.2409, 2065.1364, 10.4775, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[8] = CreateDynamicObject(2942, 2791.2561, 2442.2031, 10.4853, 0.0000, 0.0000, -45.0000); //kmb_atm1
	ATM[9] = CreateDynamicObject(2942, 1478.7968, 2682.8264, 10.4853, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[10] = CreateDynamicObject(2942, 1480.3974, 2682.8264, 10.4853, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[11] = CreateDynamicObject(2942, 1421.3784, 2616.7368, 11.0576, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[12] = CreateDynamicObject(2942, 1424.5792, 2616.7368, 11.0576, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[13] = CreateDynamicObject(2942, 1627.4521, 1814.4609, 10.4853, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[14] = CreateDynamicObject(2942, 1626.2113, 1814.4609, 10.4853, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[15] = CreateDynamicObject(2942, 1712.5129, 1529.4492, 10.3867, 0.0000, 0.0000, 2.4999); //kmb_atm1
	ATM[16] = CreateDynamicObject(2942, 1713.8923, 1529.5106, 10.3867, 0.0000, 0.0000, 2.4999); //kmb_atm1
	ATM[17] = CreateDynamicObject(2942, 1166.6416, 1353.9550, 10.5568, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[18] = CreateDynamicObject(2942, -1975.4344, 162.7716, 27.2890, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[19] = CreateDynamicObject(2942, -1973.3931, 162.7716, 27.2890, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[20] = CreateDynamicObject(2942, -1971.3530, 162.7716, 27.2890, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[21] = CreateDynamicObject(2942, -2035.3137, -102.0002, 34.7790, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[22] = CreateDynamicObject(2942, -2303.8627, -116.3245, 34.9553, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[23] = CreateDynamicObject(2942, -2302.4714, -116.3245, 34.9553, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[24] = CreateDynamicObject(2942, -2759.1525, -358.9601, 6.8446, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[25] = CreateDynamicObject(2942, -2760.6931, -358.9601, 6.8446, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[26] = CreateDynamicObject(2942, -2762.1945, -358.9601, 6.8446, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[27] = CreateDynamicObject(2942, -2692.8496, 297.9193, 3.9497, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[28] = CreateDynamicObject(2942, -2626.1455, 553.6857, 14.2443, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[29] = CreateDynamicObject(2942, -2627.4968, 553.6857, 14.2443, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[30] = CreateDynamicObject(2942, -2628.8881, 553.6857, 14.2443, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[31] = CreateDynamicObject(2942, -2414.9782, 996.9690, 44.9118, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[31] = CreateDynamicObject(2942, -2413.3769, 996.9690, 44.9118, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[33] = CreateDynamicObject(2942, -1770.4127, 814.9275, 24.5156, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[34] = CreateDynamicObject(2942, -1771.6136, 814.9275, 24.5156, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[35] = CreateDynamicObject(2942, -1772.7736, 814.9275, 24.5156, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[36] = CreateDynamicObject(2942, -1692.2259, 1329.0122, 6.8427, 0.0000, 0.0000, -45.0000); //kmb_atm1
	ATM[37] = CreateDynamicObject(2942, -1691.0096, 1327.7958, 6.8427, 0.0000, 0.0000, -45.0000); //kmb_atm1
	ATM[38] = CreateDynamicObject(2942, -1379.0153, -355.1739, 13.7434, 0.0000, 0.0000, -168.7001); //kmb_atm1
	ATM[39] = CreateDynamicObject(2942, -1380.7597, -355.5223, 13.7434, 0.0000, 0.0000, -168.7001); //kmb_atm1
	ATM[40] = CreateDynamicObject(2942, -1470.6867, -265.7026, 13.7834, 0.0000, 0.0000, 81.3000); //kmb_atm1
	ATM[41] = CreateDynamicObject(2942, -1470.4163, -263.9330, 13.7834, 0.0000, 0.0000, 81.3000); //kmb_atm1
	ATM[42] = CreateDynamicObject(2942, 366.4691, -1341.4913, 14.1430, 0.0000, 0.0000, 117.0000); //kmb_atm1
	ATM[43] = CreateDynamicObject(2942, 365.6700, -1339.9229, 14.1430, 0.0000, 0.0000, 117.0000); //kmb_atm1
	ATM[44] = CreateDynamicObject(2942, 589.0908, -1254.2047, 17.8438, 0.0000, 0.0000, -158.6000); //kmb_atm1
	ATM[45] = CreateDynamicObject(2942, 587.8240, -1254.7019, 17.8438, 0.0000, 0.0000, -158.6000); //kmb_atm1
	ATM[46] = CreateDynamicObject(2942, 586.5665, -1255.1954, 17.8438, 0.0000, 0.0000, -158.6000); //kmb_atm1
	ATM[47] = CreateDynamicObject(2942, 1186.1735, -1369.5579, 13.0302, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[48] = CreateDynamicObject(2942, 1186.1735, -1371.1280, 13.0302, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[49] = CreateDynamicObject(2942, 1186.1735, -1372.6888, 13.0302, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[50] = CreateDynamicObject(2942, 1102.4248, -1430.0666, 15.4618, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[51] = CreateDynamicObject(2942, 1102.4248, -1425.9552, 15.4618, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[52] = CreateDynamicObject(2942, 1526.5415, -1191.5531, 23.5061, 0.0000, 0.0000, 270.0000); //kmb_atm1
	ATM[53] = CreateDynamicObject(2942, 1526.5415, -1195.5228, 23.3961, 0.0000, 0.0000, 270.0000); //kmb_atm1
	ATM[54] = CreateDynamicObject(2942, 2139.3784, -1166.7968, 23.5971, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[55] = CreateDynamicObject(2942, 2139.3784, -1164.4163, 23.5971, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[56] = CreateDynamicObject(2942, 2425.5632, -1219.5728, 25.1348, 0.0000, 0.0000, 0.0000); //kmb_atm1
	ATM[57] = CreateDynamicObject(2942, 2383.4362, -1449.1649, 23.5928, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[58] = CreateDynamicObject(2942, 2383.4362, -1451.7049, 23.5928, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[59] = CreateDynamicObject(2942, 2763.3288, -2009.8563, 13.2269, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[60] = CreateDynamicObject(2942, 2302.9006, -1988.3048, 13.2251, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[61] = CreateDynamicObject(2942, 2302.9006, -1986.0446, 13.2251, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[62] = CreateDynamicObject(2942, 1928.5987, -1768.3211, 13.1678, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[63] = CreateDynamicObject(2942, 1728.9901, -1875.9593, 13.2293, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[64] = CreateDynamicObject(2942, 1728.9901, -1879.0189, 13.2293, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[65] = CreateDynamicObject(2942, 1728.9901, -1881.1683, 13.2293, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[66] = CreateDynamicObject(2942, 1728.9901, -1884.0087, 13.2293, 0.0000, 0.0000, -90.0000); //kmb_atm1
	ATM[67] = CreateDynamicObject(2942, 1467.9322, -1770.7309, 18.4607, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[68] = CreateDynamicObject(2942, 1467.9322, -1768.2205, 18.4607, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[69] = CreateDynamicObject(2942, 1467.9322, -1765.7382, 18.4607, 0.0000, 0.0000, 90.0000); //kmb_atm1
	ATM[70] = CreateDynamicObject(2942, 1108.9150, -1807.5731, 16.2587, 0.0000, 0.0000, 180.0000); //kmb_atm1
	ATM[71] = CreateDynamicObject(2942, 378.5349, -2063.3083, 7.5009, 0.0000, 0.0000, 90.0000); //kmb_atm1

	//Hospital
	//All the map credits go to  CoachCarter
	//All the Texture credits go to JKGeo
	new tmpobjid;
	tmpobjid = CreateDynamicObject(14595,-30.670,153.639,1002.010,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14665, "genintint711_1", "mp_gun_mat", 0);
	SetDynamicObjectMaterial(tmpobjid, 3, 4828, "airport3_las", "gnhotelwall02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 5, 4828, "airport3_las", "gnhotelwall02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 6, 14563, "triad_main", "sign_maintenance", 0);
	SetDynamicObjectMaterial(tmpobjid, 7, 14577, "casinovault01", "ab_mottleSteps", 0);
	SetDynamicObjectMaterial(tmpobjid, 8, 18031, "cj_exp", "mp_cloth_wall", 0);
	SetDynamicObjectMaterial(tmpobjid, 9, 8488, "flamingo1", "flmngo06_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 10, 4828, "airport3_las", "gnhotelwall02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 11, 9524, "blokmodb", "lombard_build5_3", 0);
	SetDynamicObjectMaterial(tmpobjid, 12, 14488, "dogsgym", "AH_stolewindow", 0);
	SetDynamicObjectMaterial(tmpobjid, 13, 14674, "civic02cj", "hotcarp01_LA", 0);
	SetDynamicObjectMaterial(tmpobjid, 14, 14577, "casinovault01", "ab_mottleSteps", 0);
	SetDynamicObjectMaterial(tmpobjid, 15, 14581, "ab_mafiasuitea", "barbersmir1", 0);
	tmpobjid = CreateDynamicObject(14593,-13.630,148.850,1000.380,0.000,0.000,-90.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 9903, "pier69", "rooftop_gz4", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14865, "gf2", "mp_bobbie_carpwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 3, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 4, 4568, "skyscrap2_lan2", "sl_marblewall2", 0);
	tmpobjid = CreateDynamicObject(11455,-21.370,155.339,1000.809,0.000,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "ind_hospital1_128", 0);
	tmpobjid = CreateDynamicObject(19325,-27.459,160.660,999.440,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "shelf_glas", 0);
	tmpobjid = CreateDynamicObject(19325,-27.399,152.100,1001.650,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "shelf_glas", 0);
	tmpobjid = CreateDynamicObject(19325,-27.399,158.740,1003.450,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "shelf_glas", 0);
	tmpobjid = CreateDynamicObject(2146,-33.020,138.779,998.549,0.000,0.000,15.119);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(19379,-27.379,150.479,994.049,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18029, "genintintsmallrest", "GB_restaursmll15", 0);
	tmpobjid = CreateDynamicObject(1789,-36.560,149.259,998.609,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(19379,-27.579,139.750,1006.400,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 16640, "a51", "airvent_gz", 0);
	tmpobjid = CreateDynamicObject(2146,-45.830,142.130,998.549,0.000,0.000,-89.580);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-45.840,144.070,998.549,0.000,0.000,-89.580);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-43.549,147.619,998.549,0.000,0.000,-89.580);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-39.540,140.360,998.549,0.000,0.000,-91.199);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(16444,-37.330,143.440,999.229,0.000,0.000,264.119);
	SetDynamicObjectMaterial(tmpobjid, 0, 14526, "sweetsmain", "gb_binbag01", 0);
	tmpobjid = CreateDynamicObject(14532,-17.940,150.619,999.039,0.000,0.000,-90.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(14532,-17.909,148.520,999.039,0.000,0.000,-90.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(14532,-17.969,146.490,999.039,0.000,0.000,-90.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(14532,-17.989,144.429,999.039,0.000,0.000,-90.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(11455,-21.369,151.246,1000.807,0.000,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "ind_hospital2_128", 0);
	tmpobjid = CreateDynamicObject(11455,-28.379,152.083,997.857,89.899,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14525, "imy_motel2", "mp_motel_reception", 0);
	tmpobjid = CreateDynamicObject(11455,-57.074,158.723,999.757,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14599, "paperchasebits", "sign_firstaid", 0);
	tmpobjid = CreateDynamicObject(11455,-43.736,139.632,999.877,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 2670, "proc_rub", "CJ_CERT_3", 0);
	tmpobjid = CreateDynamicObject(14532,-7.050,151.389,999.039,0.000,0.000,-33.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(2146,-22.579,144.259,998.549,0.000,0.000,87.599);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-3.650,149.270,998.549,0.000,0.000,177.360);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-4.860,148.559,998.549,0.000,0.000,188.759);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(14532,-13.859,154.889,999.039,0.000,0.000,-180.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(14532,-12.020,154.889,999.039,0.000,0.000,-180.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14392, "dr_gsstudio", "monitors_128", 0);
	tmpobjid = CreateDynamicObject(2207,-43.580,172.429,998.039,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(2208,-43.740,173.589,997.950,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(2207,-41.709,174.880,998.039,0.000,0.000,-180.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(2208,-42.060,172.610,997.929,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(2208,-42.090,174.490,997.929,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(2207,-38.360,172.660,998.010,0.000,0.000,-270.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18065, "ab_sfammumain", "gun_floor1", 0);
	tmpobjid = CreateDynamicObject(1789,-48.630,153.649,998.609,0.000,0.000,89.279);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(1789,-60.130,158.449,998.609,0.000,0.000,1.559);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-47.000,149.350,998.549,0.000,0.000,88.260);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-61.330,149.250,998.549,0.000,0.000,89.220);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(2146,-62.389,158.250,998.549,0.000,0.000,89.220);
	SetDynamicObjectMaterial(tmpobjid, 0, 14600, "paperchase_bits2", "ab_medbag", 0);
	tmpobjid = CreateDynamicObject(3578,-39.950,151.830,997.280,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-45.259,156.720,997.280,0.000,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-34.930,151.820,997.290,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-30.020,146.910,997.280,0.000,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-24.639,142.020,997.280,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-15.140,142.009,997.280,0.000,0.000,0.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);
	tmpobjid = CreateDynamicObject(3578,-10.239,147.410,997.280,0.000,0.000,90.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14853, "gen_pol_vegas", "blue_carpet_256", 0);

	tmpobjid = CreateDynamicObject(1523,-42.049,148.570,998.049,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2611,-27.750,146.080,999.500,0.000,0.000,-89.940);
	tmpobjid = CreateDynamicObject(2000,-22.069,149.029,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(18074,-27.409,150.410,999.200,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18001,-27.000,7680.000,151.000,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2007,-22.069,149.779,998.049,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(19325,-27.000,2976.000,158.000,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2373,-27.290,150.039,996.909,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2373,-27.280,151.559,996.909,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2373,-27.270,153.080,996.909,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2373,-27.290,154.610,996.909,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(1999,-26.770,149.470,998.059,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1999,-26.780,151.470,998.059,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1999,-26.770,153.449,998.059,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2002,-22.999,158.160,998.059,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2894,-26.750,151.500,998.869,0.000,0.000,99.180);
	tmpobjid = CreateDynamicObject(2894,-26.670,149.570,998.869,0.000,0.000,86.819);
	tmpobjid = CreateDynamicObject(2001,-21.969,150.589,998.059,0.000,0.000,-41.159);
	tmpobjid = CreateDynamicObject(1811,-25.920,150.440,998.650,0.000,0.000,3.299);
	tmpobjid = CreateDynamicObject(1811,-26.040,152.380,998.650,0.000,0.000,-1.500);
	tmpobjid = CreateDynamicObject(1811,-26.049,154.330,998.650,0.000,0.000,-1.500);
	tmpobjid = CreateDynamicObject(937,-38.889,144.710,998.530,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(937,-38.880,142.820,998.530,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18074,-27.409,150.410,999.450,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(1778,-37.310,149.399,998.280,0.000,0.000,89.819);
	tmpobjid = CreateDynamicObject(19379,-27.579,139.750,992.809,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2001,-27.989,166.229,998.059,0.000,0.000,-42.180);
	tmpobjid = CreateDynamicObject(2002,-28.000,8249.000,137.000,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2002,-27.950,137.199,998.049,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(1997,-17.430,145.479,998.039,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.200,146.429,998.869,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.180,144.570,998.869,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.180,142.679,998.869,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.220,140.770,998.869,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.180,144.570,999.929,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.200,146.429,999.909,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.180,142.679,999.929,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2004,-47.220,140.770,999.950,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1997,-17.350,147.520,998.039,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1997,-17.409,149.529,998.039,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1997,-17.420,151.649,998.039,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(14693,-16.260,151.690,998.479,0.000,0.000,17.760);
	tmpobjid = CreateDynamicObject(14693,-16.250,149.500,998.479,0.000,0.000,17.760);
	tmpobjid = CreateDynamicObject(14693,-16.190,147.509,998.479,0.000,0.000,17.760);
	tmpobjid = CreateDynamicObject(14693,-16.250,145.440,998.479,0.000,0.000,17.760);
	tmpobjid = CreateDynamicObject(18084,-17.090,142.850,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-17.090,142.850,997.309,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-14.479,142.850,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-14.479,142.850,997.299,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-12.770,142.860,997.299,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-12.770,142.850,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-7.690,142.860,997.299,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-7.690,142.880,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-5.079,142.860,997.299,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-5.079,142.869,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-4.190,142.869,997.299,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-4.110,142.880,999.739,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(18084,-1.950,147.649,999.739,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.960,147.639,997.299,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.950,150.229,999.739,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.960,150.229,997.299,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.960,152.839,999.739,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.960,152.839,997.299,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.970,154.110,997.299,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-1.960,154.130,999.739,0.000,0.000,270.000);
	tmpobjid = CreateDynamicObject(18084,-4.280,156.309,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-4.289,156.320,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-6.880,156.309,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-7.800,156.309,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-6.880,156.320,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-7.739,156.320,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-13.020,156.320,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-13.000,156.320,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-15.600,156.309,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-15.600,156.330,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-17.129,156.320,999.739,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-17.209,156.309,997.299,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(18084,-19.420,151.250,999.739,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.420,148.669,999.739,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.420,146.089,999.739,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.409,145.009,999.739,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.430,151.330,997.299,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.440,148.740,997.299,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.430,146.160,997.299,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(18084,-19.430,145.059,997.299,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(3383,-5.960,153.479,997.869,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(3394,-3.589,153.419,998.049,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2690,-10.300,139.940,999.409,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(2690,-38.560,158.669,999.409,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2792,-44.970,158.809,1001.320,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2986,-39.840,139.779,1000.760,90.000,90.000,90.000);
	tmpobjid = CreateDynamicObject(2994,-42.790,140.250,998.549,0.000,0.000,-90.120);
	tmpobjid = CreateDynamicObject(14834,-43.169,158.350,998.349,0.000,0.000,-34.319);
	tmpobjid = CreateDynamicObject(14834,-52.945,158.367,998.349,0.000,0.000,-71.519);
	tmpobjid = CreateDynamicObject(14782,-23.980,158.429,999.030,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(1997,-12.890,154.320,998.039,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(1997,-14.729,154.339,998.039,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(14455,-41.970,167.389,999.659,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(14779,-39.020,182.009,1000.260,0.000,0.000,90.059);
	tmpobjid = CreateDynamicObject(1714,-44.750,173.940,998.049,0.000,0.000,64.080);
	tmpobjid = CreateDynamicObject(1715,-41.409,175.669,998.059,0.000,0.000,-13.560);
	tmpobjid = CreateDynamicObject(1715,-40.049,175.750,998.059,0.000,0.000,-13.560);
	tmpobjid = CreateDynamicObject(1715,-39.849,171.649,998.059,0.000,0.000,-153.119);
	tmpobjid = CreateDynamicObject(1715,-41.099,171.520,998.059,0.000,0.000,-161.399);
	tmpobjid = CreateDynamicObject(1723,-31.969,178.610,998.049,0.000,0.000,-48.299);
	tmpobjid = CreateDynamicObject(1724,-30.469,175.550,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(1724,-34.439,178.759,998.059,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(1737,-32.900,177.059,997.820,0.000,0.000,-48.479);
	tmpobjid = CreateDynamicObject(1808,-28.540,173.619,998.049,0.000,0.000,-89.220);
	tmpobjid = CreateDynamicObject(1846,-30.979,176.690,999.960,90.000,90.000,0.000);
	tmpobjid = CreateDynamicObject(2001,-21.729,140.179,998.049,0.000,0.000,-31.920);
	tmpobjid = CreateDynamicObject(2010,-30.389,176.089,998.049,0.000,0.000,-61.619);
	tmpobjid = CreateDynamicObject(2010,-32.939,178.949,998.049,0.000,0.000,-136.679);
	tmpobjid = CreateDynamicObject(2162,-44.270,167.279,999.140,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(2162,-33.860,167.240,999.179,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(2164,-46.779,176.789,998.049,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2167,-46.810,169.979,998.049,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2167,-46.830,169.080,998.049,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(2186,-37.330,178.720,998.059,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2191,-28.889,171.770,998.049,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2191,-28.879,170.300,998.049,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2191,-28.879,168.830,998.049,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2190,-43.680,173.160,998.650,0.000,0.000,-127.080);
	tmpobjid = CreateDynamicObject(2194,-43.430,173.020,999.109,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2197,-23.020,152.300,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2197,-23.010,155.009,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2197,-23.010,154.350,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2197,-23.000,153.669,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(2197,-23.020,152.979,998.059,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(1778,-48.459,153.320,998.280,0.000,0.000,-6.900);
	tmpobjid = CreateDynamicObject(1778,-60.479,158.270,998.280,0.000,0.000,-91.080);
	tmpobjid = CreateDynamicObject(1569,-54.259,148.619,998.049,0.000,0.000,180.000);
	tmpobjid = CreateDynamicObject(1502,-21.219,142.910,998.049,0.000,0.000,-90.000);
	tmpobjid = CreateDynamicObject(1502,-31.469,166.899,998.049,0.000,0.000,0.000);
	tmpobjid = CreateDynamicObject(2001,-33.520,166.220,998.059,0.000,0.000,-42.180);
	tmpobjid = CreateDynamicObject(956,-33.380,144.539,998.460,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(955,-33.330,143.330,998.469,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1209,-33.529,142.259,998.059,0.000,0.000,90.000);
	tmpobjid = CreateDynamicObject(1428,-46.709,145.960,999.539,0.000,0.000,90.419);


	//Prison by KyleSta123
	staticObj[staticID++] = CreateDynamicObject(18802, -35.31000, 199.12000, 2.76000,   0.00000, 0.00000, 61.88000);
	staticObj[staticID++] = CreateDynamicObject(18450, -13.40000, 238.82001, 4.96000,   0.00000, 0.00000, 61.08000);
	CreateDynamicObject(9623, 1.53000, 264.82999, 8.12000,   0.00000, 0.00000, 331.25000);
	CreateDynamicObject(4570, 22.42000, 281.56000, -46.12000,   0.00000, 0.00000, 331.84000);
	staticObj[staticID++] = CreateDynamicObject(4570, 37.78204, 274.87454, -46.12000,   0.00000, 0.00000, 151.96001);
	staticObj[staticID++] = CreateDynamicObject(4570, -8.04683, 297.91895, -46.12000,   0.00000, 0.00000, 331.73001);
	CreateDynamicObject(10829, -32.17495, 298.92844, 5.24000,   0.00000, 0.00000, 62.40533);
	staticObj[staticID++] = CreateDynamicObject(4570, 0.34000, 327.59000, -46.12000,   0.00000, 0.00000, 242.36000);
	staticObj[staticID++] = CreateDynamicObject(4570, 29.68370, 312.71185, -46.12000,   0.00000, 0.00000, 242.50999);
	staticObj[staticID++] = CreateDynamicObject(4570, 54.07000, 345.48999, -46.12000,   0.00000, 0.00000, 332.07999);
	staticObj[staticID++] = CreateDynamicObject(4570, 20.11939, 363.94299, -46.12000,   0.00000, 0.00000, 331.84000);
	staticObj[staticID++] = CreateDynamicObject(4570, 47.13000, 323.92999, -46.12000,   0.00000, 0.00000, 242.28000);
	CreateDynamicObject(5403, 27.13000, 331.70999, 15.47000,   0.00000, 0.00000, 62.30000);
	staticObj[staticID++] = CreateDynamicObject(4570, -12.14000, 324.26001, -46.12000,   0.00000, 0.00000, 62.19000);
	staticObj[staticID++] = CreateDynamicObject(4570, 10.69440, 280.67871, -46.19196,   0.00000, 0.00000, 63.08180);
	CreateDynamicObject(1251, -24.40203, 303.73129, 5.30109,   0.00000, 0.00000, 332.08954);
	CreateDynamicObject(2412, 26.42970, 318.89011, 5.27307,   0.00000, 0.00000, 332.41794);
	CreateDynamicObject(1566, 28.52159, 319.64801, 6.76721,   0.00000, 0.00000, 61.80721);
	CreateDynamicObject(1566, 30.00750, 322.45221, 6.76720,   0.00000, 0.00000, 241.58881);
	CreateDynamicObject(1566, 23.29780, 320.67810, 6.76721,   0.00000, 0.00000, 332.29871);
	CreateDynamicObject(1566, 26.07936, 319.24054, 6.76720,   0.00000, 0.00000, 152.84348);
	CreateDynamicObject(2412, 23.42085, 320.47925, 5.27310,   0.00000, 0.00000, 332.01294);
	CreateDynamicObject(2412, 28.76291, 318.96011, 5.27310,   0.00000, 0.00000, 241.57137);
	CreateDynamicObject(2412, 30.35813, 321.92218, 5.27310,   0.00000, 0.00000, 242.18657);
	CreateDynamicObject(3851, 25.80374, 323.49210, 9.11410,   0.00000, 90.00000, 61.65190);
	CreateDynamicObject(3851, 25.48090, 324.23148, 9.11410,   0.00000, 90.00000, 332.79544);
	CreateDynamicObject(3851, 27.94271, 322.97598, 9.11410,   0.00000, 90.00000, 332.79544);
	CreateDynamicObject(3851, 25.01476, 322.02609, 9.11410,   0.00000, 90.00000, 61.23434);
	staticObj[staticID++] = CreateDynamicObject(5812, 40.85930, 362.98920, 5.53000,   0.00000, 0.00000, 62.00000);
	staticObj[staticID++] = CreateDynamicObject(4570, 25.25000, 360.89001, -46.12000,   0.00000, 0.00000, 331.84000);
	staticObj[staticID++] = CreateDynamicObject(5812, 33.12902, 348.58310, 5.53000,   0.00000, 0.00000, 62.32275);
	staticObj[staticID++] = CreateDynamicObject(4570, 19.60094, 363.05890, -46.12000,   0.00000, 0.00000, 331.84000);
	CreateDynamicObject(987, -9.58314, 368.19354, 5.37900,   0.00000, 0.00000, 241.94446);
	CreateDynamicObject(987, -3.96391, 378.75296, 5.37900,   0.00000, 0.00000, 241.94446);
	CreateDynamicObject(987, 1.66381, 389.27536, 5.37900,   0.00000, 0.00000, 241.94446);
	CreateDynamicObject(987, 6.51638, 398.02173, 5.37900,   0.00000, 0.00000, 241.23541);
	CreateDynamicObject(987, 16.89404, 392.22992, 5.37900,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(987, 27.41389, 386.52542, 5.37900,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(987, 37.88617, 380.85532, 5.37900,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(987, 48.37477, 375.18164, 5.37900,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(987, 42.58730, 364.80692, 5.36955,   0.00000, 0.00000, 61.59423);
	CreateDynamicObject(987, -15.21305, 357.74017, 5.37900,   0.00000, 0.00000, 332.20248);
	CreateDynamicObject(6066, 11.18526, 391.61337, 7.66163,   0.00000, 0.00000, 60.72176);
	CreateDynamicObject(18764, 2.53101, 384.26917, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 4.87631, 388.60260, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 7.25992, 393.00247, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 7.74145, 393.91327, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 12.42854, 392.06833, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 10.06169, 387.71564, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 7.68256, 383.29770, 3.09040,   0.00000, 0.00000, 331.54361);
	CreateDynamicObject(18764, 6.88245, 381.86981, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 11.25931, 379.56546, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 13.54220, 383.72656, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 15.91530, 388.03702, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 16.71198, 389.53247, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 15.71233, 377.27206, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 18.02293, 381.53094, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 20.39660, 385.82086, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(18764, 21.01354, 386.99051, 3.09040,   0.00000, 0.00000, 331.24057);
	CreateDynamicObject(14791, 0.48665, 375.59302, 6.60956,   0.00000, 0.00000, 331.53540);
	CreateDynamicObject(2628, 15.61048, 386.37393, 5.58063,   0.00000, 0.00000, 60.33295);
	CreateDynamicObject(2628, 16.54099, 387.93921, 5.58063,   0.00000, 0.00000, 60.33295);
	CreateDynamicObject(2629, 19.07813, 380.81473, 5.58503,   0.00000, 0.00000, 330.49252);
	CreateDynamicObject(2629, 17.51554, 381.68130, 5.58500,   0.00000, 0.00000, 330.49249);
	CreateDynamicObject(2627, 22.85804, 387.26120, 5.58704,   0.00000, 0.00000, 241.45891);
	CreateDynamicObject(2627, 22.14310, 385.95981, 5.58704,   0.00000, 0.00000, 241.45891);
	CreateDynamicObject(2630, 20.62696, 383.61572, 5.58626,   0.00000, 0.00000, 61.24562);
	CreateDynamicObject(14401, 13.80850, 392.43839, 5.57598,   0.00000, 0.00000, 151.05692);
	CreateDynamicObject(14401, 9.43332, 394.86493, 5.57598,   0.00000, 0.00000, 151.05692);
	staticObj[staticID++] = CreateDynamicObject(9254, 50.12725, 273.42160, 5.89990,   0.00000, 0.00000, 61.99040);
	CreateDynamicObject(4641, 31.24368, 270.47638, 7.19456,   0.00000, 0.00000, 152.65704);
	CreateDynamicObject(3279, 18.40818, 265.55817, 5.27402,   0.00000, 0.00000, 61.60336);
	CreateDynamicObject(3279, -7.71747, 279.77908, 5.27402,   0.00000, 0.00000, 61.60336);
	CreateDynamicObject(8155, 46.65844, 275.26144, 7.68760,   0.00000, 0.00000, 151.92465);
	CreateDynamicObject(987, 77.40470, 290.63361, 5.03613,   0.00000, 0.00000, 152.75568);
	CreateDynamicObject(987, 66.79546, 296.07315, 5.03613,   0.00000, 0.00000, 152.75568);
	CreateDynamicObject(987, -20.43206, 271.52444, 5.03610,   0.00000, 0.00000, 333.00812);
	CreateDynamicObject(987, -27.77532, 284.47650, 5.03610,   0.00000, 0.00000, 331.11136);
	CreateDynamicObject(987, -38.24248, 290.25970, 5.03610,   0.00000, 0.00000, 331.11136);
	CreateDynamicObject(987, -42.62354, 292.58743, 5.03610,   0.00000, 0.00000, 331.11136);
	CreateDynamicObject(987, -15.01556, 282.08319, 5.03610,   0.00000, 0.00000, 243.00835);
	CreateDynamicObject(987, -10.40343, 291.13528, 5.03610,   0.00000, 0.00000, 243.00835);
	CreateDynamicObject(987, -37.02166, 303.02448, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -46.10504, 310.62643, 5.34620,   0.00000, 0.00000, 332.13724);
	CreateDynamicObject(987, -40.50845, 321.14993, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -34.94093, 331.69110, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -29.36147, 342.26202, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -23.82458, 352.80399, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -20.18933, 359.66336, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, -9.75591, 353.95547, 5.37900,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(11326, -18.73897, 320.27713, 7.72619,   0.00000, 0.00000, 62.07024);
	CreateDynamicObject(3819, 5.76470, 362.35083, 6.33230,   0.00000, 0.00000, 62.87981);
	CreateDynamicObject(3819, 8.16381, 367.25064, 6.33230,   0.00000, 0.00000, 242.57716);
	CreateDynamicObject(1508, 28.48740, 339.98773, 6.90518,   0.00000, 0.00000, 332.17389);
	CreateDynamicObject(987, -35.92707, 305.10950, 5.34620,   0.00000, 0.00000, 242.10031);
	CreateDynamicObject(987, 59.03642, 300.00189, 5.03613,   0.00000, 0.00000, 152.75568);
	CreateDynamicObject(987, 48.47588, 305.40433, 5.03613,   0.00000, 0.00000, 242.38358);
	CreateDynamicObject(987, 42.94727, 294.85492, 5.03613,   0.00000, 0.00000, 242.38358);
	CreateDynamicObject(987, 53.97606, 315.96463, 5.03613,   0.00000, 0.00000, 242.38358);
	CreateDynamicObject(987, 29.51185, 270.22961, 5.03613,   0.00000, 0.00000, 242.38358);
	CreateDynamicObject(987, 28.01832, 267.39288, 5.03613,   0.00000, 0.00000, 242.38358);
	CreateDynamicObject(640, 21.00523, 319.07666, 5.89333,   0.00000, 0.00000, 332.39371);
	CreateDynamicObject(640, 18.51832, 314.30896, 5.89333,   0.00000, 0.00000, 332.39371);
	CreateDynamicObject(640, 16.04245, 309.57443, 5.89333,   0.00000, 0.00000, 332.39371);
	CreateDynamicObject(640, 13.61834, 304.91907, 5.89333,   0.00000, 0.00000, 332.39371);
	CreateDynamicObject(640, 32.75921, 321.69388, 5.89333,   0.00000, 0.00000, 242.03404);
	CreateDynamicObject(640, 37.47603, 319.18997, 5.89333,   0.00000, 0.00000, 242.03404);
	CreateDynamicObject(640, 42.18190, 316.70651, 5.89333,   0.00000, 0.00000, 242.03404);
	CreateDynamicObject(640, 46.90119, 314.20743, 5.89333,   0.00000, 0.00000, 242.03404);
	CreateDynamicObject(640, 51.62954, 311.72449, 5.89333,   0.00000, 0.00000, 242.03404);
	CreateDynamicObject(4003, 40.56762, 317.30280, 18.37416,   0.00000, 0.00000, 152.34096);
	CreateDynamicObject(4003, 20.77765, 315.53516, 18.66889,   0.00000, 0.00000, 238.81410);
	CreateDynamicObject(5836, -19.66985, 287.50821, 16.63802,   0.00000, 0.00000, 331.36411);
	CreateDynamicObject(8843, 4.22100, 263.02139, 5.30600,   0.00000, 0.00000, 331.70831);
	CreateDynamicObject(8843, -2.20450, 266.54721, 5.30600,   0.00000, 0.00000, 150.55209);
	CreateDynamicObject(987, 21.11397, 257.48746, 5.03613,   0.00000, 0.00000, 152.75568);
	CreateDynamicObject(987, 16.89404, 392.22992, 9.21888,   0.00000, 0.00000, 151.54385);
	CreateDynamicObject(987, 27.41390, 386.52539, 9.21890,   0.00000, 0.00000, 151.54390);
	CreateDynamicObject(987, 6.51640, 398.02170, 9.21890,   0.00000, 0.00000, 241.23540);
	staticObj[staticID++] = CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	/*CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4330, -191.36719, 432.67969, -40.87500,   0.00000, 0.00000, 0.00000);*/
	CreateDynamicObject(987, 1.66380, 389.27539, 9.21890,   0.00000, 0.00000, 241.94450);

	//prison int by Wennicke
	CreateDynamicObject(7191, 1759.3388671875, -1602.4755859375, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(14856, 1757.1634521484, -1588.1893310547, 1735.8120117188, 0, 0, 182);
	CreateDynamicObject(8661, 1775.4768066406, -1555.7030029297, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(8661, 1775.5107421875, -1575.599609375, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(8661, 1773.916015625, -1585.5395507813, 1743.4429931641, 271.99951171875, 179.99450683594, 179.99450683594);
	CreateDynamicObject(8661, 1769.3701171875, -1560.263671875, 1743.8931884766, 90, 179.99450683594, 179.99450683594);
	CreateDynamicObject(8661, 1755.54296875, -1565.8349609375, 1743.8681640625, 90, 164.49871826172, 285.49029541016);
	CreateDynamicObject(8661, 1780.4873046875, -1566.796875, 1743.9184570313, 271.99401855469, 179.99450683594, 270.74157714844);
	CreateDynamicObject(7191, 1763.6158447266, -1602.3254394531, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1767.837890625, -1602.2255859375, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(14856, 1779.0579833984, -1587.5596923828, 1735.8120117188, 0, 0, 1.24951171875);
	CreateDynamicObject(7191, 1772.0864257813, -1602.0699462891, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1776.3354492188, -1601.9881591797, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1780.6092529297, -1601.9577636719, 1734.9488525391, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1780.6083984375, -1601.95703125, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1776.3553466797, -1601.9653320313, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1772.1040039063, -1602.0228271484, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1767.8559570313, -1602.2055664063, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1763.6304931641, -1602.2875976563, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(7191, 1759.3823242188, -1602.4952392578, 1738.8985595703, 0, 359.24743652344, 179.99450683594);
	CreateDynamicObject(8661, 1774.9119873047, -1585.8381347656, 1737.7172851563, 0, 0, 0);
	CreateDynamicObject(8661, 1774.90625, -1586.212890625, 1737.7172851563, 0, 179.99993896484, 0);
	CreateDynamicObject(14856, 1757.1630859375, -1588.1884765625, 1739.5620117188, 0, 0, 181.99951171875);
	CreateDynamicObject(14856, 1779.0576171875, -1587.5595703125, 1739.5625, 0, 0, 1.2469482421875);
	CreateDynamicObject(14856, 1756.6878662109, -1558.7972412109, 1735.8120117188, 0, 0, 181.49700927734);
	CreateDynamicObject(7191, 1759.470703125, -1544.4438476563, 1734.9488525391, 0, 359.24743652344, 359.99450683594);
	CreateDynamicObject(7191, 1763.7202148438, -1544.3764648438, 1734.9488525391, 0, 359.24194335938, 359.98901367188);
	CreateDynamicObject(7191, 1767.9682617188, -1544.2838134766, 1734.9488525391, 0, 359.24194335938, 359.98901367188);
	CreateDynamicObject(14856, 1778.7756347656, -1558.3518066406, 1735.8120117188, 0, 0, 1.2469482421875);
	CreateDynamicObject(7191, 1772.2685546875, -1544.3099365234, 1734.9488525391, 0, 359.24194335938, 359.98901367188);
	CreateDynamicObject(7191, 1776.5231933594, -1544.2121582031, 1734.9488525391, 0, 359.24194335938, 359.98901367188);
	CreateDynamicObject(7191, 1780.5192871094, -1544.1015625, 1734.9488525391, 0, 359.24194335938, 0.489013671875);
	CreateDynamicObject(8661, 1775.4921875, -1559.5787353516, 1737.6934814453, 0, 0, 0);
	CreateDynamicObject(7191, 1780.4685058594, -1544.1010742188, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(7191, 1776.2663574219, -1544.2237548828, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(7191, 1772.0139160156, -1544.3225097656, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(7191, 1767.7136230469, -1544.3187255859, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(7191, 1763.4619140625, -1544.3909912109, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(7191, 1759.2349853516, -1544.4659423828, 1738.875, 0, 359.24194335938, 0.4888916015625);
	CreateDynamicObject(14856, 1756.6875, -1558.796875, 1739.5617675781, 0, 0, 181.494140625);
	CreateDynamicObject(14856, 1778.775390625, -1558.3515625, 1739.5620117188, 0, 0, 1.2469482421875);
	CreateDynamicObject(8661, 1775.4921875, -1559.578125, 1737.6934814453, 0, 179.99450683594, 0);
	CreateDynamicObject(8661, 1758.60546875, -1576.8515625, 1741.3966064453, 0, 180.24719238281, 0);
	CreateDynamicObject(8661, 1796.8046875, -1573.798828125, 1737.6929931641, 0, 0, 0);
	CreateDynamicObject(8661, 1796.8046875, -1573.798828125, 1737.6929931641, 0, 180, 0);
	CreateDynamicObject(8614, 1759.4495849609, -1570.4389648438, 1736.4675292969, 0, 0, 0);
	CreateDynamicObject(970, 1774.7596435547, -1569.5825195313, 1738.2449951172, 0, 0, 0);
	CreateDynamicObject(970, 1770.6550292969, -1569.5819091797, 1738.2449951172, 0, 0, 0);
	CreateDynamicObject(970, 1766.5239257813, -1569.5954589844, 1738.2449951172, 0, 0, 0);
	CreateDynamicObject(970, 1764.4404296875, -1569.5966796875, 1738.2449951172, 0, 0, 0);
	CreateDynamicObject(970, 1760.3516845703, -1569.6000976563, 1738.2449951172, 0, 0, 0);
	CreateDynamicObject(970, 1776.8194580078, -1571.7288818359, 1738.26953125, 0, 0, 90.5);
	CreateDynamicObject(970, 1776.8634033203, -1573.791015625, 1738.2449951172, 0, 0, 90.499877929688);
	CreateDynamicObject(970, 1774.8477783203, -1575.8577880859, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1770.7470703125, -1575.8815917969, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1766.6242675781, -1575.9301757813, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1762.4991455078, -1575.9755859375, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1758.3935546875, -1576.0017089844, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1754.2669677734, -1576.0084228516, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(970, 1753.4927978516, -1576.0433349609, 1738.2449951172, 0, 0, 180.49987792969);
	CreateDynamicObject(8661, 1757.4633789063, -1557.0551757813, 1741.3966064453, 0, 180.24719238281, 0);
	CreateDynamicObject(8661, 1761.17578125, -1557.2333984375, 1741.4466552734, 0, 359.74182128906, 0);
	CreateDynamicObject(8661, 1760.8068847656, -1557.2219238281, 1741.3715820313, 0, 180.24169921875, 0);
	CreateDynamicObject(8661, 1758.5277099609, -1574.4494628906, 1741.5217285156, 0, 0.2471923828125, 0);
	CreateDynamicObject(8661, 1763.0654296875, -1589.0302734375, 1741.5217285156, 0, 0.2471923828125, 0);
	CreateDynamicObject(8661, 1761.8243408203, -1589.0578613281, 1741.3966064453, 0, 180.24719238281, 0);
	CreateDynamicObject(14387, 1780.9128417969, -1577.6300048828, 1740.5070800781, 0, 0, 92);
	CreateDynamicObject(14387, 1780.7963867188, -1574.7548828125, 1738.7320556641, 0, 0, 91.99951171875);
	CreateDynamicObject(14387, 1780.697265625, -1574.7872314453, 1738.7320556641, 0, 113.99996948242, 269.99963378906);
	CreateDynamicObject(14387, 1780.6909179688, -1577.2197265625, 1740.2563476563, 0, 113.99963378906, 269.99450683594);
	CreateDynamicObject(970, 1778.5164794922, -1577.0081787109, 1742.0205078125, 0, 0, 90.494384765625);
	CreateDynamicObject(8661, 1775.048828125, -1576.234375, 1744.9672851563, 0, 179.99450683594, 0);
	CreateDynamicObject(8661, 1775.404296875, -1562.490234375, 1746.9672851563, 0, 179.99450683594, 0);
	CreateDynamicObject(8614, 1754.3951416016, -1570.4387207031, 1732.7175292969, 0, 179.25, 0);
	CreateDynamicObject(2205, 1778.9362792969, -1571.5363769531, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(2205, 1778.0222167969, -1572.8785400391, 1733.9429931641, 0, 0, 89.5);
	CreateDynamicObject(2205, 1779.3442382813, -1573.8327636719, 1733.9429931641, 0, 0, 178.99462890625);
	CreateDynamicObject(2190, 1779.5219726563, -1571.4400634766, 1734.8795166016, 0, 0, 0);
	CreateDynamicObject(2190, 1777.921875, -1572.6606445313, 1734.8795166016, 0, 0, 89.25);
	CreateDynamicObject(2776, 1779.9310302734, -1572.2644042969, 1734.4404296875, 0, 0, 232);
	CreateDynamicObject(14819, 1780.7757568359, -1575.8271484375, 1735.0928955078, 358.25003051758, 0.2501220703125, 91.257659912109);
	CreateDynamicObject(14401, 1767.8037109375, -1573.5908203125, 1734.2686767578, 0, 0, 91.994018554688);
	CreateDynamicObject(3858, 1760.9343261719, -1571.0079345703, 1744.4094238281, 0, 0, 260);
	CreateDynamicObject(8661, 1778.7847900391, -1553.5157470703, 1751.2926025391, 90, 180.00549316406, 269.23352050781);
	CreateDynamicObject(8661, 1778.3208007813, -1567.1134033203, 1751.2425537109, 89.249816894531, 269.99981689453, 89.236633300781);
	CreateDynamicObject(970, 1778.4766845703, -1572.8826904297, 1742.0205078125, 0, 0, 90.994384765625);
	CreateDynamicObject(3858, 1760.93359375, -1571.0078125, 1744.4094238281, 0, 0, 79.996948242188);
	CreateDynamicObject(3089, 1764.1071777344, -1568.7672119141, 1742.8266601563, 0, 0, 34);
	CreateDynamicObject(2173, 1758.0897216797, -1572.2486572266, 1741.5235595703, 0, 0, 216);
	CreateDynamicObject(2173, 1760.3353271484, -1570.6602783203, 1741.5235595703, 0, 0, 215.99670410156);
	CreateDynamicObject(2173, 1762.6174316406, -1569.1575927734, 1741.5235595703, 0, 0, 215.24670410156);
	CreateDynamicObject(2173, 1762.4538574219, -1570.6696777344, 1741.5235595703, 0, 0, 35.494140625);
	CreateDynamicObject(2173, 1760.2321777344, -1572.2497558594, 1741.5235595703, 0, 0, 35.491333007813);
	CreateDynamicObject(2173, 1757.98828125, -1573.8432617188, 1741.5235595703, 0, 0, 35.491333007813);
	CreateDynamicObject(1671, 1763.5197753906, -1571.3277587891, 1741.9614257813, 0, 0, 218);
	CreateDynamicObject(1671, 1761.2962646484, -1572.9020996094, 1741.9614257813, 0, 0, 215.4962310791);
	CreateDynamicObject(1671, 1759.0114746094, -1574.51953125, 1741.9614257813, 0, 0, 215.49133300781);
	CreateDynamicObject(1671, 1757.0166015625, -1571.6016845703, 1741.9614257813, 0, 0, 31.491333007813);
	CreateDynamicObject(1671, 1759.2440185547, -1569.9787597656, 1741.9614257813, 0, 0, 35.48681640625);
	CreateDynamicObject(1671, 1761.5261230469, -1568.5364990234, 1741.9614257813, 0, 0, 35.48583984375);
	CreateDynamicObject(2187, 1760.5855712891, -1570.3542480469, 1741.5122070313, 0, 0, 214);
	CreateDynamicObject(2187, 1760.5849609375, -1570.353515625, 1742.2379150391, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1760.8128662109, -1569.0754394531, 1742.2379150391, 0, 0, 36.497161865234);
	CreateDynamicObject(2187, 1760.8125, -1569.0751953125, 1741.4381103516, 0, 0, 36.49658203125);
	CreateDynamicObject(2187, 1758.2767333984, -1571.8021240234, 1742.2379150391, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1758.2763671875, -1571.8017578125, 1741.412109375, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1758.5090332031, -1570.4970703125, 1741.412109375, 0, 0, 34.247161865234);
	CreateDynamicObject(2187, 1758.5087890625, -1570.4970703125, 1742.2366943359, 0, 0, 34.244384765625);
	CreateDynamicObject(2187, 1762.1694335938, -1571.0229492188, 1741.5061035156, 0, 0, 34);
	CreateDynamicObject(2187, 1762.1689453125, -1571.0224609375, 1742.2318115234, 0, 0, 33.997192382813);
	CreateDynamicObject(2187, 1759.9272460938, -1572.5755615234, 1742.2318115234, 0, 0, 33.997192382813);
	CreateDynamicObject(2187, 1759.9267578125, -1572.5751953125, 1741.4060058594, 0, 0, 33.997192382813);
	CreateDynamicObject(2187, 1759.6702880859, -1573.84765625, 1742.2379150391, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1759.669921875, -1573.84765625, 1741.4621582031, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1761.9296875, -1572.3258056641, 1742.2379150391, 0, 0, 213.99719238281);
	CreateDynamicObject(2187, 1761.9296875, -1572.3251953125, 1741.412109375, 0, 0, 213.99719238281);
	CreateDynamicObject(8661, 1766.4588623047, -1559.2015380859, 1751.267578125, 271.26885986328, 168.62805175781, 259.37780761719);
	CreateDynamicObject(8661, 1766.9233398438, -1559.1123046875, 1751.267578125, 271.26345825195, 168.62365722656, 78.876129150391);
	CreateDynamicObject(2136, 1767.3325195313, -1569.9263916016, 1741.4822998047, 0, 0, 90);
	CreateDynamicObject(2135, 1767.3481445313, -1570.8608398438, 1741.4837646484, 0, 0, 90);
	CreateDynamicObject(2828, 1778.9792480469, -1573.7318115234, 1734.8795166016, 0, 0, 326);
	CreateDynamicObject(2139, 1767.3896484375, -1571.8475341797, 1741.4835205078, 0, 0, 90);
	CreateDynamicObject(2139, 1767.3603515625, -1567.9683837891, 1741.4835205078, 0, 0, 90);
	CreateDynamicObject(2140, 1767.4088134766, -1572.8157958984, 1741.4838867188, 0, 0, 87);
	CreateDynamicObject(2164, 1776.0461425781, -1567.0831298828, 1741.4696044922, 0, 0, 359.25);
	CreateDynamicObject(2163, 1774.255859375, -1567.1708984375, 1741.5002441406, 0, 0, 0);
	CreateDynamicObject(2208, 1767.0778808594, -1585.1064453125, 1741.5029296875, 0, 0, 91.5);
	CreateDynamicObject(2208, 1767.0032958984, -1582.4022216797, 1741.5029296875, 0, 0, 153.49963378906);
	CreateDynamicObject(2208, 1764.4655761719, -1581.1422119141, 1741.5029296875, 0, 0, 153.49548339844);
	CreateDynamicObject(2208, 1762.1202392578, -1579.9860839844, 1741.5029296875, 0, 0, 183.49548339844);
	CreateDynamicObject(2208, 1759.5886230469, -1580.1437988281, 1741.5029296875, 0, 0, 183.49365234375);
	CreateDynamicObject(2637, 1770.8051757813, -1570.4884033203, 1741.8735351563, 0, 0, 90);
	CreateDynamicObject(2637, 1770.8111572266, -1572.3884277344, 1741.8735351563, 0, 0, 90);
	CreateDynamicObject(2776, 1771.9637451172, -1572.65625, 1741.9592285156, 0, 0, 272);
	CreateDynamicObject(2776, 1771.9259033203, -1571.4854736328, 1741.9592285156, 0, 0, 271.99951171875);
	CreateDynamicObject(2776, 1771.9973144531, -1570.2535400391, 1741.9592285156, 0, 0, 271.99951171875);
	CreateDynamicObject(2776, 1770.2476806641, -1572.9060058594, 1741.9592285156, 0, 0, 91.99951171875);
	CreateDynamicObject(2776, 1769.6883544922, -1571.5091552734, 1741.9592285156, 0, 0, 91.994018554688);
	CreateDynamicObject(2776, 1769.7230224609, -1570.2498779297, 1741.9592285156, 0, 0, 91.994018554688);
	CreateDynamicObject(2776, 1770.0451660156, -1567.3060302734, 1741.9592285156, 0, 0, 1.7440185546875);
	CreateDynamicObject(2776, 1770.044921875, -1567.3056640625, 1742.109375, 0, 0, 1.7413330078125);
	CreateDynamicObject(2776, 1770.044921875, -1567.3056640625, 1742.2845458984, 0, 0, 1.7413330078125);
	CreateDynamicObject(1713, 1777.7474365234, -1571.4503173828, 1741.4388427734, 0, 0, 272);
	CreateDynamicObject(1713, 1776.7827148438, -1574.2749023438, 1741.4388427734, 0, 0, 178.99951171875);
	CreateDynamicObject(3962, 1775.3117675781, -1571.7060546875, 1741.5023193359, 0.03924560546875, 90.49853515625, 359.7497253418);
	CreateDynamicObject(8661, 1778.1085205078, -1554.0021972656, 1751.2926025391, 90, 179.99450683594, 90.991943359375);
	CreateDynamicObject(1429, 1774.6732177734, -1567.4151611328, 1742.6916503906, 0, 0, 0);
	CreateDynamicObject(2964, 1773.1020507813, -1578.4581298828, 1741.46484375, 0, 0, 180);
	CreateDynamicObject(2008, 1756.0985107422, -1583.4029541016, 1741.5482177734, 0, 0, 0);
	CreateDynamicObject(2008, 1759.1009521484, -1583.3901367188, 1741.5482177734, 0, 0, 0);
	CreateDynamicObject(2008, 1762.0266113281, -1583.3752441406, 1741.5482177734, 0, 0, 0);
	CreateDynamicObject(2190, 1760.8291015625, -1580.0938720703, 1742.3681640625, 0, 0, 342);
	CreateDynamicObject(2190, 1767.2740478516, -1584.0732421875, 1742.3681640625, 0, 0, 259.99890136719);
	CreateDynamicObject(2776, 1762.8975830078, -1584.4860839844, 1742.0198974609, 0, 0, 184);
	CreateDynamicObject(2776, 1759.9997558594, -1584.62109375, 1742.0198974609, 0, 0, 183.9990234375);
	CreateDynamicObject(2776, 1756.9647216797, -1584.6823730469, 1742.0198974609, 0, 0, 183.9990234375);
	CreateDynamicObject(2776, 1760.1267089844, -1581.2440185547, 1742.0198974609, 0, 0, 135.9990234375);
	CreateDynamicObject(2776, 1765.6030273438, -1584.4368896484, 1742.0198974609, 0, 0, 147.99426269531);
	CreateDynamicObject(2602, 1758.9934082031, -1561.9260253906, 1734.4664306641, 0, 0, 268);
	CreateDynamicObject(2602, 1763.2186279297, -1561.8996582031, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1767.5178222656, -1561.8721923828, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1771.8062744141, -1561.8575439453, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1776.0793457031, -1561.9962158203, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1780.0523681641, -1561.7204589844, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1780.1115722656, -1582.5888671875, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1775.8510742188, -1583.1767578125, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1771.5657958984, -1583.7680664063, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1767.330078125, -1584.3520507813, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1762.9997558594, -1584.0653076172, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(2602, 1758.8037109375, -1584.3908691406, 1734.4664306641, 0, 0, 267.99499511719);
	CreateDynamicObject(1800, 1756.0372314453, -1585.6010742188, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1759.9868164063, -1585.6198730469, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1764.2355957031, -1585.6398925781, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1768.4360351563, -1585.66015625, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1772.6612548828, -1585.6807861328, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1776.9354248047, -1585.7015380859, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1777.1528320313, -1565.1075439453, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1772.9020996094, -1565.1015625, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1768.6270751953, -1565.1192626953, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1764.3767089844, -1565.11328125, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1760.1014404297, -1565.1063232422, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(1800, 1756.1010742188, -1565.0988769531, 1733.9429931641, 0, 0, 0);
	CreateDynamicObject(11714, 1755.5915, -1574.7523, 1734.9430, 0, 0, 0);

	//Office by RayLicker
	tmpobjid = CreateDynamicObject(18981,986.526,-1527.090,2199.269,0.000,90.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19595, "lsappartments1", "ceilingtiles3-128x128", -1);
	tmpobjid = CreateDynamicObject(19446,978.322,-1523.263,2201.519,0.000,0.000,180.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19462,988.879,-1521.435,2201.519,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19446,986.140,-1528.447,2201.519,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(18981,986.525,-1527.090,2203.770,0.000,90.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2599,982.697,-1527.284,2200.232,0.000,0.000,340.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14859, "gf1", "mp_apt1_pos1", 0);
	tmpobjid = CreateDynamicObject(2707,981.706,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2073,979.296,-1520.463,2203.099,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19517, "noncolored", "bowlerwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2140,985.560,-1527.595,2199.769,0.000,0.000,180.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2608,983.122,-1518.142,2201.056,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(1500,988.258,-1523.426,2199.769,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14789, "ab_sfgymmain", "gun_ceiling2_128", 0);
	tmpobjid = CreateDynamicObject(2612,985.994,-1526.397,2201.531,0.000,0.000,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	SetDynamicObjectMaterial(tmpobjid, 2, 4887, "downtown_las", "nwdwntwn5_LAS", 0);
	SetDynamicObjectMaterial(tmpobjid, 3, 14713, "lahss2aint2", "HS3_Light3", 0);
	tmpobjid = CreateDynamicObject(19462,984.156,-1516.689,2201.519,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19446,979.468,-1517.875,2201.519,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(18980,981.697,-1517.928,2209.968,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(18980,978.801,-1517.972,2209.968,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2920,977.286,-1518.455,2203.169,90.000,180.000,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2608,980.268,-1518.135,2201.056,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2920,977.278,-1518.402,2199.914,90.000,180.005,269.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2166,983.567,-1520.865,2199.769,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2920,977.276,-1518.401,2200.143,90.000,180.005,269.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2920,977.276,-1518.401,2200.392,90.000,179.994,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,977.275,-1518.400,2201.562,90.000,179.994,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,977.273,-1518.399,2201.787,90.000,179.994,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2608,980.268,-1518.135,2202.476,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2920,977.286,-1518.404,2202.990,90.000,179.994,270.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2608,983.122,-1518.142,2202.476,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2165,979.994,-1524.475,2199.719,0.000,0.000,180.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 3, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2165,978.958,-1525.441,2199.719,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 3, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2165,984.604,-1525.137,2199.745,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 3, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(19446,983.078,-1528.136,2201.519,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2140,984.583,-1527.590,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2140,983.606,-1527.584,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2707,982.429,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2707,983.104,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2707,980.979,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2707,980.255,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2707,979.478,-1519.567,2203.229,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2920,985.013,-1518.564,2203.280,0.000,90.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,985.059,-1519.540,2203.280,0.000,90.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,985.072,-1518.809,2203.280,0.000,90.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(19476,988.233,-1522.624,2202.561,0.000,0.000,179.999,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "出口", 70, "Ariel", 30, 1, -1, -16777216, 1);
	tmpobjid = CreateDynamicObject(2165,979.869,-1520.431,2199.719,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 3, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2073,982.890,-1520.691,2203.049,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19517, "noncolored", "bowlerwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19446,990.966,-1523.728,2201.519,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19446,988.333,-1525.979,2201.519,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(2920,986.010,-1521.504,2197.037,0.000,0.000,269.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,988.179,-1521.500,2197.037,0.000,0.000,269.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,991.106,-1521.508,2199.913,90.000,180.005,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(19477,984.063,-1519.806,2201.750,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "B", 130, "Webdings", 199, 1, -16777216, 0, 1);
	tmpobjid = CreateDynamicObject(2073,979.371,-1525.065,2202.556,0.000,0.000,4.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19517, "noncolored", "bowlerwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2073,984.987,-1524.972,2202.539,0.000,0.000,3.999,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19517, "noncolored", "bowlerwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2920,988.250,-1524.694,2203.160,90.000,179.994,0.010,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,988.250,-1524.692,2199.870,90.000,179.994,0.004,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,993.116,-1523.635,2203.160,90.000,180.005,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,993.114,-1523.635,2199.855,90.000,180.005,89.995,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,986.059,-1530.692,2199.916,90.000,180.005,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,986.059,-1530.692,2203.187,90.000,179.994,0.010,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,985.317,-1528.068,2199.913,90.000,179.994,90.011,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,986.693,-1528.067,2203.185,90.000,180.005,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,972.565,-1528.061,2203.185,90.000,179.994,270.010,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,978.403,-1528.744,2203.185,90.000,179.994,0.010,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,978.398,-1517.589,2203.185,90.000,180.005,179.988,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,978.401,-1528.743,2199.917,90.000,179.994,0.004,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,978.406,-1514.711,2199.919,90.000,180.005,179.983,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,986.184,-1523.651,2197.037,0.000,0.000,269.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,991.098,-1521.503,2203.156,90.000,179.994,90.011,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,984.049,-1514.461,2199.919,90.000,180.005,179.983,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,984.049,-1514.461,2203.166,90.000,180.005,179.983,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2140,978.947,-1527.525,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2140,979.922,-1527.526,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2140,980.898,-1527.529,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2140,981.849,-1527.531,2199.769,0.000,0.000,179.994,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 2423, "cj_ff_counters", "CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(19174,978.408,-1522.227,2201.876,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14420, "dr_gsbits", "mp_apt1_pic6", 0);
	tmpobjid = CreateDynamicObject(18075,979.835,-1526.325,2203.304,0.000,0.000,90.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(2920,986.072,-1523.748,2197.037,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2393,984.758,-1524.714,2204.739,0.000,180.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2393,979.138,-1524.805,2204.739,0.000,180.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2393,979.068,-1520.211,2204.739,0.000,179.994,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2393,982.660,-1520.436,2204.739,0.000,179.994,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2920,981.219,-1518.322,2194.609,180.000,180.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,979.298,-1518.322,2194.589,180.000,180.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,982.229,-1518.322,2194.609,180.000,180.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,984.070,-1518.322,2194.609,180.000,180.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,984.070,-1518.322,2208.958,180.000,360.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,982.199,-1518.322,2208.958,180.000,360.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,981.168,-1518.322,2208.958,180.000,360.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,979.298,-1518.322,2208.958,180.000,360.005,359.989,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(2920,977.524,-1518.289,2201.913,540.000,269.994,540.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -1);
	tmpobjid = CreateDynamicObject(18762,984.032,-1523.699,2205.767,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,984.032,-1523.549,2205.767,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,984.153,-1523.549,2205.767,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,984.153,-1523.699,2205.767,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,979.922,-1523.699,2205.747,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,979.922,-1523.549,2205.747,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,979.842,-1523.549,2205.747,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(18762,979.842,-1523.699,2205.747,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(3017,983.190,-1521.062,2200.583,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(2986,987.338,-1521.541,2201.876,0.000,90.000,90.000,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(1714,985.182,-1526.536,2199.769,0.000,0.000,178.000,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(1714,979.534,-1526.745,2199.769,0.000,0.000,177.994,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(1714,979.471,-1523.259,2199.769,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(1714,979.280,-1518.963,2199.769,0.000,0.000,0.000,-1,-1,-1,100.000,100.000);
	tmpobjid = CreateDynamicObject(1714,983.598,-1519.640,2199.769,0.000,0.000,350.000,-1,-1,-1,100.000,100.000);

	//Office by ZONDED
	tmpobjid = CreateDynamicObject(19450, 1559.37610, -1355.40076, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1560.92407, -1338.02551, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1551.30591, -1338.01794, 1227.21710,   0.00000, 0.00000, -90.06000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1541.68628, -1338.00427, 1227.21710,   0.00000, 0.00000, -90.06000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1551.28882, -1369.88196, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1546.67456, -1368.20020, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1556.00781, -1355.40076, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1545.44141, -1339.73621, 1225.13400,   0.00000, 0.00000, -90.06000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1546.90320, -1339.51196, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1545.54883, -1342.96326, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1546.59058, -1347.77515, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1538.60400, -1354.55237, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1545.08789, -1344.49548, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1551.44666, -1355.40076, 1229.04510,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1562.58777, -1355.40076, 1229.03709,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19450, 1562.59106, -1346.08105, 1229.04510,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(2270, 1563.80823, -1370.77502, 1227.02119,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(2270, 1562.62756, -1370.77185, 1227.02119,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(2270, 1561.46643, -1370.78918, 1227.02119,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1565.81726, -1372.03406, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1558.48657, -1341.18750, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1558.67456, -1346.34644, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1559.38940, -1347.06238, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1557.90649, -1347.06238, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1558.67456, -1347.77734, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1552.44873, -1343.47815, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1555.49976, -1343.47815, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19431, 1558.63306, -1344.22192, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19388, 1557.66980, -1350.67322, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19388, 1557.69250, -1360.13049, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19388, 1557.75049, -1368.18445, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19388, 1553.00854, -1347.77820, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19388, 1558.67126, -1345.22852, 1227.20110,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19429, 1559.39209, -1347.06323, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 4891, "wiresetc_las", "bevflower1", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19358, 1564.31042, -1363.52722, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1559.37976, -1339.69788, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1559.43518, -1369.69629, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1556.21667, -1347.77527, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1553.97131, -1344.34485, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1553.97131, -1342.74475, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1557.74817, -1342.70703, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19358, 1546.65820, -1364.89917, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(1499, 1558.72534, -1345.96948, 1225.49190,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 8412, "wddngchpl", "vgsn_chplwall", 0xFF262626);
    SetDynamicObjectMaterial(tmpobjid, 0, 9239, "stuff2_sfn", "sl_whitewood01", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(1499, 1549.99829, -1345.35864, 1225.49190,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 8412, "wddngchpl", "vgsn_chplwall", 0xFF262626);
    SetDynamicObjectMaterial(tmpobjid, 0, 9239, "stuff2_sfn", "sl_whitewood01", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(1499, 1550.36597, -1342.05566, 1225.49190,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 8412, "wddngchpl", "vgsn_chplwall", 0xFF262626);
    SetDynamicObjectMaterial(tmpobjid, 0, 9239, "stuff2_sfn", "sl_whitewood01", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(1499, 1552.22852, -1347.76880, 1225.49190,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 8412, "wddngchpl", "vgsn_chplwall", 0xFF262626);
    SetDynamicObjectMaterial(tmpobjid, 0, 9239, "stuff2_sfn", "sl_whitewood01", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(2257, 1562.80164, -1338.16150, 1227.20740,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19362, 1559.47339, -1355.18445, 1227.23260,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1565.80432, -1342.22852, 1223.93610,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1565.80176, -1352.72961, 1223.93610,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1565.84924, -1362.35144, 1223.93610,   0.00000, 0.00000, 0.54000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1565.93726, -1371.97583, 1223.93610,   0.00000, 0.00000, 0.54000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1560.67676, -1342.85144, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1560.65601, -1352.46655, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1560.66113, -1362.08813, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1560.62378, -1371.71326, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1550.15662, -1362.08923, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1550.11694, -1371.71753, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1550.17261, -1352.47388, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1550.17590, -1342.84229, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1539.70947, -1342.86255, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1539.71289, -1352.48950, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1539.69617, -1362.10291, 1225.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1539.69617, -1362.10291, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19376, 1539.69617, -1371.71753, 1229.04559,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1546.68921, -1352.49084, 1227.21710,   0.00000, 0.00000, 0.18000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1546.67017, -1358.88574, 1227.21710,   0.00000, 0.00000, 0.18000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1546.68311, -1362.04688, 1227.21710,   0.00000, 0.00000, 0.18000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(18758, 1542.61926, -1352.02954, 1227.33890,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    SetDynamicObjectMaterial(tmpobjid, 2, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(18758, 1542.61768, -1359.35168, 1227.33890,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    SetDynamicObjectMaterial(tmpobjid, 2, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFF404040);
    tmpobjid = CreateDynamicObject(19430, 1552.74158, -1366.55176, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1552.73645, -1363.47681, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1547.46826, -1363.46204, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1548.19556, -1364.17883, 1227.21710,   0.00000, 0.00000, -179.10001);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1562.76611, -1338.05859, 1227.21710,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19387, 1549.99670, -1346.09387, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19387, 1550.32605, -1341.30273, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1558.75049, -1364.96838, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1558.02820, -1364.25085, 1227.21710,   0.00000, 0.00000, -180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(18757, 1542.34497, -1359.29456, 1227.44130,   0.00000, 0.00000, 270.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1546.67871, -1349.38171, 1227.21710,   0.00000, 0.00000, 0.18000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1552.46423, -1370.79089, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1560.91833, -1371.38196, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19465, 1546.60718, -1355.67273, 1227.93724,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1553.45935, -1365.00037, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1565.79834, -1347.12744, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1565.80420, -1338.81958, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1565.84778, -1363.56860, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1558.73535, -1363.52722, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1550.32788, -1343.70044, 1227.21710,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19430, 1559.45642, -1364.25110, 1227.21710,   0.00000, 0.00000, -180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1550.32251, -1338.09033, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1558.67993, -1342.02771, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1556.07104, -1369.69629, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1558.67834, -1338.84497, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19357, 1552.02417, -1364.99719, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1545.48145, -1339.61926, 1227.21710,   0.00000, 0.00000, -90.06000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1545.54883, -1344.41821, 1227.21710,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19387, 1558.68726, -1345.22046, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "GEwhite1_64", 0xFFF2F2F2);
    tmpobjid = CreateDynamicObject(19449, 1548.33594, -1342.91064, 1227.21710,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 18399, "vgs_shops", "vgsclubwall05_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(19377, 1560.67676, -1342.85144, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1560.65601, -1352.46655, 1225.39937,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1560.66113, -1362.08813, 1225.39937,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1550.17627, -1362.09326, 1225.39937,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1550.17261, -1352.47388, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1550.17590, -1342.84229, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1539.69617, -1362.10291, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1539.71289, -1352.48950, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1539.70947, -1342.86255, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1560.62781, -1371.71753, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1550.13293, -1371.71753, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(19377, 1539.69617, -1371.71753, 1225.39940,   0.00000, 90.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 10941, "silicon2_sfse", "ws_stationfloor", 0xFFE8E5E3);
    tmpobjid = CreateDynamicObject(2119, 1550.06372, -1366.77173, 1225.48729,   0.00000, 0.00000, -90.36001);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2205, 1563.35791, -1340.61230, 1225.48399,   0.00000, 0.00000, -180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2205, 1558.08374, -1339.23254, 1225.48430,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2205, 1556.09436, -1364.07043, 1225.48399,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2205, 1553.75867, -1364.06262, 1225.48399,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2117, 1562.90808, -1367.61829, 1225.48441,   0.00000, 0.00000, 0.60000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2117, 1560.91809, -1367.63965, 1225.48441,   0.00000, 0.00000, 0.60000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2311, 1562.22180, -1355.82727, 1225.48550,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1416, 1559.12549, -1342.03210, 1225.99480,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1416, 1559.12109, -1343.44519, 1225.99480,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1416, 1556.06189, -1369.57080, 1225.99480,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1416, 1554.64185, -1369.56470, 1225.99480,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1416, 1553.24023, -1369.55969, 1225.99480,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2200, 1554.53015, -1342.49756, 1225.48599,   0.00000, 0.00000, -180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2576, 1556.82544, -1347.21997, 1225.47189,   0.00000, 0.00000, -180.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2562, 1552.44104, -1344.94299, 1225.48640,   0.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 2, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 3, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1560.45093, -1353.00098, 1225.48579,   0.00000, 0.00000, 73.02000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1560.71741, -1358.08044, 1225.48579,   0.00000, 0.00000, 117.29990);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1550.65845, -1369.26379, 1225.48579,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1551.86560, -1369.24792, 1225.48579,   0.00000, 0.00000, 180.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1547.50476, -1361.23840, 1225.48579,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1547.43042, -1359.58081, 1225.48579,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1547.51172, -1352.30347, 1225.48579,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1724, 1547.39001, -1350.58240, 1225.48579,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1723, 1563.90356, -1354.10559, 1225.48680,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1723, 1547.76001, -1369.14050, 1225.48680,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 1, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(1797, 1551.98730, -1338.66003, 1225.48650,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 2, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2568, 1560.05933, -1356.72095, 1225.07159,   0.00000, 0.00000, 90.00000);
    SetDynamicObjectMaterial(tmpobjid, 2, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(2207, 1553.57644, -1354.67371, 1225.48441,   0.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "ufo_bar", "sa_wood08_128", 0xFF404040);
    tmpobjid = CreateDynamicObject(19893, 1562.58398, -1340.63525, 1226.41800,   0.00000, 0.00000, -172.56000);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(19893, 1554.19849, -1364.12988, 1226.41960,   0.00000, 0.00000, 4.74000);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(19893, 1556.70618, -1364.03528, 1226.41960,   0.00000, 0.00000, -4.44000);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(19893, 1555.74719, -1364.10718, 1226.41960,   0.00000, 0.00000, 4.80000);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(19893, 1555.10461, -1364.13538, 1226.41960,   0.00000, 0.00000, 2.64000);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(1547, 1554.10107, -1355.17090, 1226.26041,   0.00000, 0.00000, 49.62000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "rc_warhoose", "white", 0xFF404040);
    tmpobjid = CreateDynamicObject(1547, 1554.08264, -1355.11475, 1226.35820,   0.00000, 76.00000, -222.17990);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "rc_warhoose", "white", 0xFF404040);
    tmpobjid = CreateDynamicObject(1547, 1554.07495, -1355.10620, 1226.32420,   180.00000, 76.00000, 318.24011);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "rc_warhoose", "white", 0xFF404040);
    tmpobjid = CreateDynamicObject(2268, 1554.26807, -1355.74231, 1226.68990,   0.00000, 90.00000, 48.26000);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "rc_warhoose", "white", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF141414);
    tmpobjid = CreateDynamicObject(2268, 1553.97925, -1354.59778, 1226.68790,   0.00000, 90.00000, 228.59990);
    SetDynamicObjectMaterial(tmpobjid, 1, 3924, "rc_warhoose", "white", 0xFF404040);
    SetDynamicObjectMaterial(tmpobjid, 0, 16150, "rc_warhoose", "white", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.95886, -1369.55127, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.96777, -1366.03992, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.93091, -1361.02905, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.94861, -1357.72644, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.95972, -1354.44604, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1566.01648, -1351.12573, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1566.05713, -1347.83374, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.96692, -1344.49731, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1565.96826, -1341.21497, 1227.21710,   90.00000, 0.00000, 0.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1553.92700, -1363.52271, 1227.21710,   90.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    tmpobjid = CreateDynamicObject(19451, 1557.22803, -1363.54468, 1227.21710,   90.00000, 0.00000, -90.00000);
    SetDynamicObjectMaterial(tmpobjid, 0, 11490, "des_ranch", "des_woodrails", 0xFF404040);
    CreateDynamicObject(3859, 1565.79895, -1365.40210, 1226.12550,   0.00000, 0.00000, 17.64000);
    CreateDynamicObject(3859, 1565.85205, -1370.63806, 1226.12550,   0.00000, 0.00000, 17.64000);
    CreateDynamicObject(3857, 1565.72449, -1342.98425, 1226.10201,   0.00000, 0.00000, -45.00000);
    CreateDynamicObject(3857, 1565.80383, -1359.11096, 1226.61670,   0.00000, 0.00000, -45.12000);
    CreateDynamicObject(3857, 1565.79846, -1351.65405, 1226.61668,   0.00000, 0.00000, -44.82000);
    CreateDynamicObject(3859, 1555.51526, -1363.42407, 1226.12550,   0.00000, 0.00000, 106.62000);
    CreateDynamicObject(19859, 1556.96155, -1360.20068, 1226.73711,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19859, 1556.93933, -1350.60657, 1226.73711,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19786, 1559.50891, -1355.15955, 1227.52380,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(19807, 1562.02087, -1340.62610, 1226.48080,   0.00000, 0.00000, 160.00000);
    CreateDynamicObject(2069, 1559.96924, -1338.56750, 1225.54190,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(2069, 1565.21240, -1338.66870, 1225.54190,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(1714, 1562.7023, -1338.9490, 1225.48630,   0.00000, 0.00000, -8.10000);
    CreateDynamicObject(19859, 1557.01746, -1368.09265, 1226.73711,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(1714, 1560.86987, -1365.89011, 1225.48689,   0.00000, 0.00000, 9.84000);
    CreateDynamicObject(1714, 1561.76501, -1365.90732, 1225.48689,   0.00000, 0.00000, -4.62000);
    CreateDynamicObject(1714, 1562.49939, -1365.86362, 1225.48689,   0.00000, 0.00000, 17.88000);
    CreateDynamicObject(1714, 1563.45715, -1365.84639, 1225.48689,   0.00000, 0.00000, 4.32000);
    CreateDynamicObject(1714, 1565.53604, -1367.54980, 1225.48689,   0.00000, 0.00000, -94.02000);
    CreateDynamicObject(1714, 1562.76990, -1369.24913, 1225.48689,   0.00000, 0.00000, 143.82001);
    CreateDynamicObject(1714, 1563.84143, -1369.24601, 1225.48689,   0.00000, 0.00000, -173.64000);
    CreateDynamicObject(1714, 1561.78711, -1369.26162, 1225.48689,   0.00000, 0.00000, -188.39999);
    CreateDynamicObject(1714, 1560.72754, -1369.24282, 1225.48689,   0.00000, 0.00000, 130.98000);
    CreateDynamicObject(19814, 1550.42810, -1339.97852, 1226.05360,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(19829, 1550.42810, -1339.97852, 1227.37360,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(2528, 1549.52319, -1340.31848, 1225.48610,   0.00000, 0.00000, -0.06000);
    CreateDynamicObject(2524, 1549.00208, -1342.01990, 1225.48740,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(2517, 1549.14648, -1346.35913, 1225.46730,   0.00000, 0.00000, 180.00000);
    CreateDynamicObject(11707, 1548.50403, -1345.98645, 1226.64740,   0.00000, 0.00000, 91.08000);
    CreateDynamicObject(19829, 1550.09619, -1347.26282, 1227.37360,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(2518, 1552.96692, -1344.94885, 1225.61740,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(2518, 1554.17090, -1344.94885, 1225.61740,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(2202, 1547.60901, -1366.42468, 1225.48637,   0.00000, 0.00000, 89.58009);
    CreateDynamicObject(11743, 1555.54504, -1369.45825, 1226.57257,   0.00000, 0.00000, -150.23999);
    CreateDynamicObject(2524, 1554.86365, -1369.30249, 1225.75349,   0.00000, 0.00000, 180.00000);
    CreateDynamicObject(2421, 1553.45178, -1369.56665, 1226.57272,   0.00000, 0.00000, -183.83998);
    CreateDynamicObject(1714, 1556.83618, -1365.62976, 1225.48689,   0.00000, 0.00000, -178.19998);
    CreateDynamicObject(1714, 1555.89709, -1365.60361, 1225.48689,   0.00000, 0.00000, -178.19998);
    CreateDynamicObject(1714, 1555.12854, -1365.66711, 1225.48689,   0.00000, 0.00000, -183.71997);
    CreateDynamicObject(1714, 1554.35181, -1365.68362, 1225.48689,   0.00000, 0.00000, -178.74002);
    CreateDynamicObject(19824, 1558.87720, -1344.01306, 1226.57286,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19824, 1558.88171, -1343.78491, 1226.57286,   0.00000, 0.00000, -59.52001);
    CreateDynamicObject(19822, 1558.88965, -1342.63489, 1226.57317,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19822, 1558.88733, -1342.43469, 1226.57317,   0.00000, 0.00000, -37.86000);
    CreateDynamicObject(19822, 1558.88538, -1342.25452, 1226.57317,   0.00000, 0.00000, -49.50001);
    CreateDynamicObject(19822, 1559.10999, -1342.65247, 1226.57317,   0.00000, 0.00000, -48.36001);
    CreateDynamicObject(19823, 1559.28210, -1343.83728, 1226.57336,   0.00000, 0.00000, -61.74001);
    CreateDynamicObject(19820, 1558.91516, -1341.99854, 1226.57294,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19820, 1559.06299, -1341.82483, 1226.57294,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19820, 1559.08618, -1342.20630, 1226.57294,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19824, 1558.95947, -1343.53674, 1226.57286,   0.00000, 0.00000, -45.30001);
    CreateDynamicObject(19824, 1559.11340, -1343.68311, 1226.57286,   0.00000, 0.00000, -45.30001);
    CreateDynamicObject(19822, 1559.05640, -1342.92065, 1226.57317,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19820, 1558.91858, -1342.78369, 1226.57294,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19818, 1559.05261, -1343.33044, 1226.65379,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19818, 1559.22595, -1343.14380, 1226.65379,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19818, 1558.98682, -1343.17273, 1226.65379,   0.00000, 0.00000, -5.88000);
    CreateDynamicObject(19818, 1558.92114, -1343.01489, 1226.65379,   0.00000, 0.00000, -5.88000);
    CreateDynamicObject(19818, 1559.27246, -1343.32227, 1226.65379,   0.00000, 0.00000, -10.62000);
    CreateDynamicObject(19818, 1559.15820, -1343.48682, 1226.65379,   0.00000, 0.00000, -10.62000);
    CreateDynamicObject(19818, 1559.10889, -1343.22327, 1226.65379,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19819, 1559.27393, -1342.42786, 1226.65331,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19819, 1559.08569, -1342.45288, 1226.65331,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(19819, 1559.31506, -1342.63953, 1226.65331,   0.00000, 0.00000, -14.58000);
    CreateDynamicObject(19819, 1559.27844, -1342.93811, 1226.65331,   0.00000, 0.00000, -14.58000);
    CreateDynamicObject(19819, 1559.24731, -1342.03699, 1226.65331,   0.00000, 0.00000, -14.58000);
    CreateDynamicObject(19819, 1559.24915, -1342.24109, 1226.65331,   0.00000, 0.00000, -14.58000);
    CreateDynamicObject(19819, 1559.15381, -1341.67285, 1226.65331,   0.00000, 0.00000, -50.58000);
    CreateDynamicObject(18755, 1542.63330, -1352.08191, 1227.44128,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(18755, 1542.55542, -1359.34045, 1227.44130,   0.00000, 0.00000, -90.00000);
    CreateDynamicObject(18757, 1542.84412, -1352.10730, 1227.44130,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(18756, 1542.67688, -1352.10840, 1227.44130,   0.00000, 0.00000, 90.12005);
    CreateDynamicObject(18756, 1542.37903, -1359.30408, 1227.44130,   0.00000, 0.00000, 269.75998);
    CreateDynamicObject(19805, 1555.83728, -1355.70825, 1227.35370,   0.00000, 0.00000, 90.00000);
    CreateDynamicObject(2244, 1559.91101, -1353.79724, 1226.19113,   0.00000, 0.00000, 359.89999);
    CreateDynamicObject(2244, 1559.97815, -1356.41919, 1226.19113,   0.00000, 0.00000, 345.44003);
    CreateDynamicObject(2245, 1558.05298, -1339.23267, 1226.72195,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(2252, 1563.26440, -1340.69519, 1226.72105,   0.00000, 0.00000, 0.00000);
    CreateDynamicObject(1714, 1555.66191, -1355.69421, 1225.48689,   0.00000, 0.00000, -90.29994);
    CreateDynamicObject(2239, 1554.95325, -1357.69800, 1225.48524,   0.00000, 0.00000, -97.49999);
    CreateDynamicObject(2239, 1554.70264, -1353.82544, 1225.48524,   0.00000, 0.00000, -225.72011);
    CreateDynamicObject(1714, 1563.49182, -1342.28064, 1225.48630,   0.00000, 0.00000, -134.93993);
    CreateDynamicObject(1808, 1548.97241, -1369.59766, 1225.48688,   0.00000, 0.00000, -180.71988);
	CreateDynamicObject(18766, 1568.6281, -1341.795, 1224.015,   -90.3, 91.00000, 0.00000);
	CreateDynamicObject(18766, 1568.454, -1351.7531, 1224.067,   -90.3, 91.00000, 0.00000);
	CreateDynamicObject(18766, 1568.28, -1361.733, 1224.119,   -90.3, 91.00000, 0.00000);
	CreateDynamicObject(18766, 1568.105, -1371.691, 1224.171,   -90.3, 91.00000, 0.00000);

	//Furniture Store by Zimovskiy
	tmpobjid = CreateDynamicObject(18981,1252.858,-1547.322,2061.148,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 5708, "hospital_lawn", "hosp03b_law", -1);
	tmpobjid = CreateDynamicObject(18880,1240.641,-1547.176,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(18880,1240.641,-1544.376,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(19446,1240.524,-1542.693,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19089,1240.654,-1545.702,2061.138,180.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	tmpobjid = CreateDynamicObject(18880,1240.631,-1542.875,2061.548,0.000,90.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(18880,1240.631,-1543.836,2064.998,0.000,90.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(19446,1238.523,-1542.693,2063.358,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1238.523,-1547.394,2063.358,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(18880,1243.252,-1547.196,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(18880,1243.224,-1544.186,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(18880,1243.222,-1543.356,2061.548,0.000,90.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(18880,1243.222,-1543.686,2064.998,0.000,90.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 18646, "matcolours", "grey-60-percent", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", -1);
	tmpobjid = CreateDynamicObject(19089,1243.226,-1545.702,2061.138,180.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	tmpobjid = CreateDynamicObject(3858,1243.229,-1542.408,2064.428,0.000,0.000,315.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19446,1243.273,-1539.252,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.283,-1552.141,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.082,-1548.151,2063.358,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.091,-1543.289,2063.358,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.275,-1545.399,2061.008,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1263.824,-1543.928,2060.548,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19430,1264.557,-1544.284,2062.288,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19430,1264.557,-1547.783,2062.288,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19430,1264.557,-1551.284,2062.288,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.275,-1545.729,2066.978,0.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.285,-1540.099,2064.228,90.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.285,-1551.500,2063.348,90.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19940,1260.247,-1547.656,2061.518,0.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1549.858,2062.768,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1548.737,2062.768,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1548.737,2065.218,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1549.938,2065.218,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1549.727,2062.268,180.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1265.275,-1541.865,2062.268,180.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19446,1265.245,-1545.479,2060.788,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.245,-1545.729,2067.208,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.225,-1539.869,2064.228,90.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.225,-1551.740,2063.348,90.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.215,-1543.678,2060.678,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1261.087,-1545.758,2063.828,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1261.087,-1545.758,2060.328,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.853,-1535.090,2060.138,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19912,1265.291,-1540.579,2063.898,540.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14581, "ab_mafiasuitea", "barbersmir1", -1426063361);
	tmpobjid = CreateDynamicObject(11685,1255.598,-1554.990,2061.648,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	tmpobjid = CreateDynamicObject(19922,1260.919,-1542.677,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8591, "olympic01", "vgscityhwal1", -1);
	tmpobjid = CreateDynamicObject(2120,1261.648,-1543.482,2062.208,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(2120,1262.198,-1542.130,2062.208,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(2120,1260.926,-1541.120,2062.208,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(2120,1260.887,-1544.221,2062.208,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(2120,1260.024,-1543.482,2062.208,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(2120,1260.007,-1542.130,2062.208,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 1373, "traincross", "rednwhite", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 14526, "sweetsmain", "ah_whitpanelceil", 0);
	tmpobjid = CreateDynamicObject(1762,1262.642,-1551.443,2061.648,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 19598, "sfbuilding1", "darkwood1", 0);
	tmpobjid = CreateDynamicObject(2133,1253.292,-1538.327,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(1745,1260.566,-1549.607,2061.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 14650, "ab_trukstpc", "mp_CJ_WOOD5", 0);
	tmpobjid = CreateDynamicObject(19361,1263.588,-1552.119,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1260.405,-1552.119,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.873,-1556.369,2060.138,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1263.588,-1539.477,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1260.388,-1539.477,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(11684,1256.641,-1554.933,2061.648,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	tmpobjid = CreateDynamicObject(19446,1246.405,-1534.841,2063.358,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(1563,1254.942,-1555.204,2062.318,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(1563,1256.242,-1555.204,2062.318,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19446,1254.342,-1555.959,2060.138,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.222,-1556.949,2060.138,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(1563,1255.592,-1555.204,2062.318,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19446,1254.342,-1555.959,2060.508,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19174,1255.403,-1555.858,2063.768,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 2813, "gb_books01", "GB_novels05", 0);
	tmpobjid = CreateDynamicObject(19446,1258.883,-1556.379,2060.508,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1554.160,2062.688,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1554.170,2063.128,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2161,1259.279,-1554.001,2062.188,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 4510, "barrierblk", "yellow_64", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 4510, "barrierblk", "yellow_64", 0);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1554.160,2063.558,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2161,1259.279,-1554.011,2063.088,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 4510, "barrierblk", "yellow_64", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 4510, "barrierblk", "yellow_64", 0);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1554.150,2064.028,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19446,1258.871,-1535.069,2064.678,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1554.179,2063.488,90.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1553.179,2063.488,90.000,360.000,900.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19431,1258.888,-1552.365,2064.008,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.893,-1557.971,2060.928,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19940,1259.034,-1555.158,2063.488,90.000,360.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19431,1258.888,-1555.986,2064.418,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.893,-1557.980,2065.788,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.883,-1556.379,2066.728,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1259.323,-1557.831,2064.258,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(11685,1254.106,-1554.792,2061.638,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	tmpobjid = CreateDynamicObject(19940,1260.237,-1547.115,2061.508,0.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(2350,1256.601,-1554.008,2061.848,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2350,1256.612,-1554.008,2061.848,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 4510, "barrierblk", "yellow_64", 0);
	tmpobjid = CreateDynamicObject(2247,1256.545,-1553.922,2062.688,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14581, "ab_mafiasuitea", "barbersmir1", -1426063361);
	tmpobjid = CreateDynamicObject(19361,1260.777,-1545.568,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1260.777,-1545.928,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19940,1261.078,-1546.135,2061.778,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19361,1260.777,-1545.387,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1260.777,-1545.748,2060.128,0.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(2240,1258.711,-1545.754,2062.148,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	SetDynamicObjectMaterial(tmpobjid, 1, -1, "none", "none", -1);
	SetDynamicObjectMaterial(tmpobjid, 2, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(630,1258.833,-1545.772,2062.898,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.334,-1544.750,2060.128,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.690,-1535.039,2060.138,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19939,1260.458,-1545.905,2062.958,360.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19939,1261.508,-1545.905,2063.168,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19939,1260.958,-1545.905,2063.698,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19446,1257.013,-1534.780,2060.138,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(2132,1255.262,-1535.344,2061.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2341,1258.253,-1535.335,2061.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2141,1258.269,-1538.293,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(2133,1254.262,-1535.347,2061.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2341,1253.283,-1535.345,2061.648,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2134,1253.288,-1536.334,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2133,1253.292,-1537.337,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2133,1258.252,-1536.306,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2133,1257.252,-1535.347,2061.648,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19921,1258.570,-1537.215,2062.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "black64", 0);
	tmpobjid = CreateDynamicObject(2134,1258.259,-1537.305,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19921,1258.570,-1537.406,2062.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "black64", 0);
	tmpobjid = CreateDynamicObject(19921,1258.660,-1537.406,2062.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "black64", 0);
	tmpobjid = CreateDynamicObject(19921,1258.660,-1537.215,2062.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "black64", 0);
	tmpobjid = CreateDynamicObject(19993,1258.288,-1537.115,2062.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", 0);
	tmpobjid = CreateDynamicObject(19993,1258.288,-1537.475,2062.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", 0);
	tmpobjid = CreateDynamicObject(19993,1258.488,-1537.115,2062.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", 0);
	tmpobjid = CreateDynamicObject(19993,1258.488,-1537.475,2062.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", 0);
	tmpobjid = CreateDynamicObject(19446,1253.212,-1556.969,2060.508,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.344,-1546.700,2060.128,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.372,-1544.760,2060.508,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.352,-1546.691,2060.508,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.372,-1546.681,2064.008,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.392,-1544.760,2064.008,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19935,1251.140,-1545.640,2061.508,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.140,-1544.660,2061.508,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.140,-1546.620,2061.508,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.130,-1547.131,2061.628,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.140,-1546.620,2061.508,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19446,1263.824,-1553.558,2060.548,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19430,1264.557,-1540.784,2062.288,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1265.215,-1553.307,2060.678,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(2120,1264.469,-1542.130,2062.928,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19431,1264.379,-1539.486,2063.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1262.333,-1539.469,2060.308,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1262.333,-1539.469,2063.808,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1264.109,-1539.496,2064.298,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1264.379,-1552.127,2063.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1262.333,-1552.129,2060.308,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19361,1262.333,-1552.130,2063.808,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1264.109,-1552.126,2064.298,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1260.307,-1552.136,2063.638,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19431,1259.786,-1552.126,2063.638,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1260.307,-1539.477,2063.638,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19431,1259.786,-1539.496,2063.638,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1259.686,-1539.476,2063.638,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.863,-1535.080,2061.178,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1256.392,-1534.791,2061.178,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.660,-1535.059,2061.188,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.670,-1535.019,2060.978,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.861,-1535.079,2060.978,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1256.439,-1534.768,2060.978,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1256.439,-1534.768,2064.348,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 4570, "stolenbuild03", "sl_dtbuild2wall1", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.861,-1534.629,2064.348,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 4570, "stolenbuild03", "sl_dtbuild2wall1", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.641,-1534.638,2064.348,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 4570, "stolenbuild03", "sl_dtbuild2wall1", -983041);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19446,1247.901,-1539.790,2061.218,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.481,-1552.270,2061.218,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.825,-1552.911,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1257.013,-1534.780,2066.458,0.000,180.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19379,1256.043,-1534.613,2065.038,0.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19853, "mihouse1", "brownwall1", 0);
	tmpobjid = CreateDynamicObject(19446,1252.690,-1534.628,2066.458,0.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.860,-1534.648,2066.458,0.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1256.060,-1539.379,2066.458,0.000,180.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1254.021,-1538.108,2065.408,180.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19437,1255.815,-1537.553,2065.028,360.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19477,1255.614,-1539.493,2065.008,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	SetDynamicObjectMaterialText(tmpobjid, 0, "厨房", 130, "Ariel", 55, 1, -1, 0, 1);
	tmpobjid = CreateDynamicObject(11685,1254.308,-1554.990,2061.648,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	tmpobjid = CreateDynamicObject(1563,1253.891,-1554.184,2062.318,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(11685,1254.106,-1553.932,2061.648,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	tmpobjid = CreateDynamicObject(19431,1255.068,-1555.946,2063.768,90.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(1758,1245.566,-1541.235,2061.898,0.000,0.000,40.800,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 18901, "matclothes", "bandanadots1", 0);
	tmpobjid = CreateDynamicObject(19939,1253.764,-1555.869,2064.018,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1253.764,-1555.869,2063.518,90.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(1769,1247.663,-1540.903,2061.648,0.000,0.000,2.599,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	tmpobjid = CreateDynamicObject(18075,1254.343,-1545.312,2065.448,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1254.343,-1546.232,2065.448,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19446,1254.342,-1555.959,2064.008,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.212,-1560.451,2063.998,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19477,1253.310,-1554.701,2064.348,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", 0);
	SetDynamicObjectMaterialText(tmpobjid, 0, "起居室", 130, "Ariel", 50, 1, -983041, 0, 1);
	tmpobjid = CreateDynamicObject(19939,1260.447,-1542.791,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19446,1257.882,-1555.858,2066.728,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.219,-1556.960,2066.728,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19617,1257.450,-1555.910,2063.868,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3119, "cs_ry_props", "GB_magazine01", 0);
	tmpobjid = CreateDynamicObject(19446,1258.893,-1556.359,2060.138,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.893,-1556.359,2066.728,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19939,1260.458,-1545.835,2063.178,360.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19939,1261.509,-1545.835,2063.388,360.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(2801,1260.922,-1543.273,2062.098,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 11, 19297, "matlights", "invisible", -1);
	tmpobjid = CreateDynamicObject(19939,1260.959,-1545.835,2063.928,360.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(2801,1260.922,-1541.873,2062.098,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 11, 19297, "matlights", "invisible", -1);
	tmpobjid = CreateDynamicObject(19939,1260.447,-1541.830,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1260.447,-1541.620,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1260.447,-1543.741,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1261.397,-1541.620,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1261.397,-1542.560,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19814,1258.774,-1537.559,2063.088,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(19814,1252.764,-1536.879,2063.088,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(19814,1253.344,-1534.859,2063.088,0.000,0.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(19939,1253.134,-1536.311,2062.698,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	tmpobjid = CreateDynamicObject(2161,1254.478,-1547.029,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19361,1254.384,-1546.700,2060.128,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.394,-1544.759,2060.128,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(2164,1254.524,-1545.285,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(2161,1254.478,-1547.029,2062.998,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.130,-1544.361,2061.628,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19940,1251.575,-1546.584,2062.528,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19940,1251.575,-1544.884,2062.528,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19935,1251.410,-1544.081,2061.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(19935,1251.410,-1547.411,2061.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	tmpobjid = CreateDynamicObject(18981,1246.368,-1527.381,2061.158,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 17049, "cuntwf", "sw_walltile", -1);
	tmpobjid = CreateDynamicObject(19446,1238.503,-1544.143,2063.358,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.825,-1538.524,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19939,1260.732,-1548.660,2061.518,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19939,1261.413,-1548.670,2061.518,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19940,1261.908,-1547.676,2061.518,0.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19940,1261.918,-1547.136,2061.518,0.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19940,1261.078,-1546.135,2062.628,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(19940,1261.078,-1546.135,2062.188,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14650, "ab_trukstpc", "mp_CJ_WOOD5", -983041);
	tmpobjid = CreateDynamicObject(2133,1253.292,-1538.928,2061.648,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19939,1253.134,-1538.602,2062.698,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 14479, "skuzzy_motelmain", "mp_CJ_Laminate1", 0);
	tmpobjid = CreateDynamicObject(19786,1244.799,-1549.381,2063.888,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 2813, "gb_books01", "GB_novels09", 0);
	tmpobjid = CreateDynamicObject(19939,1261.397,-1543.491,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1261.397,-1543.741,2062.428,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19431,1253.207,-1552.966,2063.908,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(18075,1252.055,-1533.300,2065.008,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1253.086,-1533.300,2065.008,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1254.125,-1533.300,2065.008,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19446,1252.631,-1535.069,2064.678,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.850,-1534.578,2066.698,0.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19446,1258.691,-1534.578,2066.698,0.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19446,1254.701,-1534.948,2066.698,0.000,180.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19446,1254.701,-1539.208,2066.698,0.000,180.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19940,1256.393,-1537.900,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19940,1255.183,-1537.900,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19940,1255.183,-1537.470,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19940,1255.183,-1537.239,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19940,1256.393,-1537.460,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19940,1256.393,-1537.239,2064.948,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19446,1253.210,-1556.970,2060.928,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.210,-1556.970,2065.798,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1252.782,-1557.451,2064.258,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19940,1253.063,-1554.760,2062.688,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1253.063,-1554.760,2064.028,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1253.063,-1555.640,2063.318,90.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1253.063,-1553.780,2063.318,90.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19940,1253.053,-1554.690,2063.128,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2161,1252.817,-1554.629,2062.218,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 19297, "matlights", "invisible", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 19297, "matlights", "invisible", 0);
	tmpobjid = CreateDynamicObject(2161,1252.817,-1555.069,2062.218,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 19297, "matlights", "invisible", 0);
	SetDynamicObjectMaterial(tmpobjid, 2, 19297, "matlights", "invisible", 0);
	tmpobjid = CreateDynamicObject(19786,1256.440,-1534.821,2063.828,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 2645, "cj_piz_sign", "CJ_PIZZA_MEN3", 0);
	tmpobjid = CreateDynamicObject(19940,1253.053,-1554.690,2063.578,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18981,1252.858,-1547.322,2065.908,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19939,1253.284,-1555.179,2064.358,540.000,270.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1253.284,-1554.278,2064.358,540.000,270.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1253.284,-1555.179,2064.358,540.000,270.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18646, "matcolours", "red", -983041);
	tmpobjid = CreateDynamicObject(19939,1255.104,-1539.467,2065.028,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19939,1256.095,-1539.467,2065.028,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", -983041);
	tmpobjid = CreateDynamicObject(19939,1256.055,-1539.457,2064.998,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19939,1255.084,-1539.457,2064.998,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19939,1256.125,-1539.457,2064.998,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19939,1255.084,-1539.457,2065.058,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19939,1255.734,-1539.457,2065.058,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19939,1256.125,-1539.457,2065.058,540.000,270.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.324,-1544.699,2066.908,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.444,-1544.689,2066.918,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.404,-1544.750,2066.408,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.364,-1544.739,2066.418,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.334,-1546.730,2066.418,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.414,-1546.740,2066.418,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.454,-1546.740,2066.898,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1254.314,-1546.750,2066.898,0.000,360.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.399,-1552.229,2066.728,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1247.728,-1539.810,2066.728,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19431,1262.357,-1539.497,2065.978,90.000,180.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19431,1264.637,-1539.507,2065.978,90.000,180.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19431,1262.337,-1552.106,2065.978,90.000,180.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19431,1263.427,-1552.116,2065.978,90.000,180.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.435,-1552.291,2063.358,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1247.835,-1539.770,2063.358,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.838,-1538.570,2066.728,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.838,-1552.929,2066.728,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.118,-1548.139,2066.728,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.118,-1543.328,2066.728,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.319,-1543.328,2066.728,0.000,0.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.678,-1543.328,2066.828,0.000,0.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.841,-1538.560,2061.218,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.841,-1552.871,2061.218,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.099,-1548.140,2061.218,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.099,-1543.300,2061.218,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.309,-1539.269,2061.218,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.309,-1552.129,2061.218,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.424,-1552.227,2060.128,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.874,-1552.828,2060.128,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.174,-1548.067,2060.128,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.174,-1543.347,2060.128,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1247.974,-1539.827,2060.128,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.894,-1538.467,2060.128,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.324,-1539.287,2060.128,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.344,-1552.116,2060.128,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.481,-1552.240,2066.458,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1247.730,-1539.790,2066.458,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.830,-1538.570,2066.458,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1244.830,-1552.881,2066.458,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.089,-1548.141,2066.458,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1240.089,-1543.310,2066.458,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.280,-1539.260,2066.458,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.290,-1552.131,2066.458,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(1708,1251.002,-1551.465,2062.278,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 2, 19598, "sfbuilding1", "darkwood1", 0);
	tmpobjid = CreateDynamicObject(19361,1261.074,-1545.810,2066.918,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1261.114,-1545.790,2066.918,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1261.104,-1545.740,2066.918,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19361,1261.044,-1545.730,2066.918,0.000,360.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19431,1259.016,-1538.796,2063.638,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.494,-1550.735,2060.128,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.214,-1555.526,2060.118,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.471,-1550.750,2060.528,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1253.191,-1555.600,2060.528,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1248.461,-1552.470,2062.188,0.000,90.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(18075,1243.643,-1545.312,2065.448,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1243.641,-1546.233,2065.448,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19446,1242.513,-1542.084,2060.128,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1247.264,-1537.333,2060.138,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1245.553,-1537.323,2061.828,0.000,90.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18031, "cj_exp", "mp_cloth_wall", -983041);
	tmpobjid = CreateDynamicObject(18981,1230.776,-1547.322,2065.828,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19174,1254.240,-1545.776,2063.478,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 8396, "sphinx01", "luxorceiling02_128", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19174,1254.260,-1545.736,2063.528,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19174,1254.260,-1545.816,2063.528,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19174,1254.260,-1545.816,2063.428,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19174,1254.260,-1545.736,2063.428,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19477,1254.222,-1545.782,2063.468,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "a", 90, "Webdings", 170, 0, -16777216, 0, 1);
	tmpobjid = CreateDynamicObject(19808,1251.160,-1545.762,2062.558,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19610,1251.151,-1545.774,2062.608,270.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(2263,1251.672,-1545.793,2062.709,-10.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(2263,1250.685,-1545.753,2062.534,10.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(5749,1249.636,-1508.936,2062.024,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(5749,1249.636,-1619.736,2061.974,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(18981,1252.858,-1547.322,2020.400,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 5708, "hospital_lawn", "hosp03b_law", -1);
	tmpobjid = CreateDynamicObject(19446,1242.082,-1548.811,2020.036,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(18981,1254.487,-1547.322,2024.890,180.000,90.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10765, "airportgnd_sfse", "white", -1);
	tmpobjid = CreateDynamicObject(19446,1246.734,-1543.971,2022.637,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.734,-1553.652,2022.637,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.904,-1553.586,2019.608,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.904,-1544.036,2019.608,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.103,-1548.836,2019.608,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.082,-1548.811,2025.736,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.803,-1544.026,2025.878,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.733,-1553.597,2025.878,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.133,-1548.727,2025.878,0.000,0.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.744,-1553.626,2019.678,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1246.744,-1544.007,2019.678,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.094,-1548.876,2019.677,0.000,0.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.055,-1556.971,2022.637,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(18075,1246.689,-1545.610,2024.400,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1246.689,-1546.570,2024.400,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(18075,1246.690,-1547.480,2024.400,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19446,1263.924,-1544.902,2063.358,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 19480, "signsurf", "sign", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.055,-1541.062,2022.637,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 18835, "mickytextures", "whiteforletters", -983041);
	tmpobjid = CreateDynamicObject(5749,1253.418,-1571.676,2018.375,0.000,0.000,990.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, -1, "none", "none", -1);
	tmpobjid = CreateDynamicObject(19446,1244.794,-1548.877,2019.608,0.000,0.000,540.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1243.093,-1548.796,2021.228,0.000,90.000,720.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 10101, "2notherbuildsfe", "ferry_build14", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.054,-1548.709,2020.248,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.054,-1548.709,2025.529,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.034,-1553.660,2025.409,90.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19446,1242.034,-1544.329,2025.409,90.000,180.000,180.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 12944, "ce_bankalley2", "sw_brick04", -983041);
	tmpobjid = CreateDynamicObject(19912,1241.991,-1545.990,2021.068,540.000,360.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 14581, "ab_mafiasuitea", "barbersmir1", -1426063361);
	tmpobjid = CreateDynamicObject(19089,1242.009,-1551.906,2024.289,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1242.009,-1546.096,2024.289,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1242.009,-1546.096,2022.009,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19089,1242.009,-1546.096,2023.769,0.000,90.000,90.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 0, 3899, "hospital2", "black", 0);
	tmpobjid = CreateDynamicObject(19476,1242.243,-1549.414,2024.011,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "国际认证协会", 120, "Ariel", 65, 1, 0, -16777216, 1);
	tmpobjid = CreateDynamicObject(19476,1242.243,-1548.783,2024.011,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "国际认证协会", 120, "Ariel", 65, 1, 0, -16777216, 1);
	tmpobjid = CreateDynamicObject(19476,1242.243,-1548.783,2024.151,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "国际认证协会", 120, "Ariel", 65, 1, 0, -16777216, 1);
	tmpobjid = CreateDynamicObject(19476,1242.243,-1549.414,2024.151,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "国际认证协会", 120, "Ariel", 65, 1, 0, -16777216, 1);
	tmpobjid = CreateDynamicObject(19476,1242.263,-1549.114,2024.081,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterialText(tmpobjid, 0, "国际认证协会", 120, "Ariel", 70, 1, -1, 0, 1);
	tmpobjid = CreateDynamicObject(19279,1243.892,-1552.567,2021.520,0.000,0.000,24.099,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	tmpobjid = CreateDynamicObject(19279,1243.463,-1552.759,2021.520,0.000,0.000,24.099,-1,-1,-1,300.000,300.000);
	SetDynamicObjectMaterial(tmpobjid, 1, 10765, "airportgnd_sfse", "white", 0);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	tmpobjid = CreateDynamicObject(2069,1259.762,-1551.492,2061.698,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11716,1253.123,-1536.694,2062.728,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2257,1262.184,-1552.020,2064.018,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2069,1257.742,-1554.874,2061.698,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2270,1261.600,-1545.180,2063.248,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2266,1260.653,-1545.182,2062.908,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2266,1260.653,-1545.182,2063.648,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2149,1253.968,-1535.250,2062.848,0.000,0.000,1080.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19830,1258.401,-1535.764,2062.698,0.000,0.000,-87.099,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2636,1264.347,-1540.951,2063.018,0.000,0.000,18.599,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2125,1264.470,-1543.495,2062.678,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11734,1264.417,-1544.831,2062.398,0.000,0.000,-96.599,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1704,1264.298,-1546.630,2062.288,0.000,0.000,-77.300,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1727,1264.436,-1548.583,2062.328,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1765,1264.597,-1550.439,2062.268,0.000,0.000,-105.900,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2986,1258.758,-1537.104,2063.618,360.000,90.000,360.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19835,1258.484,-1536.549,2062.788,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11722,1254.455,-1535.184,2062.838,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11716,1253.123,-1536.624,2062.728,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11716,1253.123,-1536.564,2062.728,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11718,1254.789,-1535.177,2062.718,0.000,0.000,-14.400,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11743,1258.403,-1536.200,2062.698,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2863,1255.313,-1535.245,2062.678,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19583,1253.292,-1535.730,2062.718,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19581,1253.373,-1536.930,2062.698,0.000,0.000,-27.600,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19585,1257.078,-1535.039,2062.868,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19579,1253.156,-1536.038,2062.698,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11705,1253.063,-1554.907,2063.138,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11707,1252.816,-1537.953,2063.318,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2230,1258.184,-1534.380,2063.078,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19999,1253.066,-1545.771,2061.648,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19807,1251.580,-1546.651,2062.618,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19835,1251.535,-1546.294,2062.638,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11711,1243.412,-1545.732,2065.158,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(11717,1248.098,-1551.552,2062.298,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(19808,1251.611,-1545.762,2062.558,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1735,1252.315,-1551.509,2062.278,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1727,1246.576,-1551.425,2062.288,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1252.755,-1536.216,2063.428,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1249.615,-1552.175,2063.758,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1251.686,-1552.175,2063.758,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1755,1249.528,-1540.768,2061.648,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1247.236,-1552.175,2063.758,0.000,0.000,180.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2855,1251.562,-1545.143,2062.538,0.000,0.000,90.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1249.615,-1539.895,2063.758,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(2684,1247.684,-1539.895,2063.758,0.000,0.000,360.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5767,1309.879,-1541.461,2107.103,0.000,0.000,450.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5771,1316.885,-1466.809,2065.552,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5857,1312.112,-1612.675,2064.047,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5882,1381.293,-1559.397,2086.429,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5882,1381.293,-1618.117,2108.889,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(4585,1362.178,-1680.017,2092.842,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1391,1296.258,-1588.495,2091.666,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(1260,1289.036,-1459.511,2071.028,0.000,0.000,1.399,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5709,1302.386,-1655.041,2068.155,0.000,0.000,270.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5882,1119.813,-1599.701,2047.088,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5767,1193.959,-1534.521,2063.222,0.000,0.000,630.000,-1,-1,-1,300.000,300.000);
	tmpobjid = CreateDynamicObject(5882,1119.813,-1479.751,2047.088,0.000,0.000,0.000,-1,-1,-1,300.000,300.000);

	//Static Object
	new i, j;
	for(j = sizeof(staticObj); i < j; i++){
		if(staticObj[i] != 0){
			Streamer_ToggleItemStatic(STREAMER_TYPE_OBJECT, staticObj[i], 1);
		}
	}

	//Map Fix by OstGot
	MapFixObjects[0] = CreateDynamicObject(2904, 1277.5, 2529.6, 16.9, 0.0, 90.0, 90.0, _, _, _, 2.0);
    MapFixObjects[1] = CreateDynamicObject(2634, 1276.4, 2532.7, 16.8, 0.0, 0.0, 128.0, _, _, _, 2.0);
    MapFixObjects[2] = CreateDynamicObject(2634, 1276.4, 2526.5, 16.8, 0.0, 0.0, 52.0, _, _, _, 2.0);

    MapFixObjects[3] = CreateDynamicObject(3037, 2005.9, -1592.1, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[4] = CreateDynamicObject(3037, 2016.7, -1592.2, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[5] = CreateDynamicObject(3037, 1996.6, -1592.0, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[6] = CreateDynamicObject(3037, 1993.3, -1588.7, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[7] = CreateDynamicObject(3037, 1953.0, -1558.2, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[8] = CreateDynamicObject(3037, 1939.5, -1558.8, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[9] = CreateDynamicObject(5066, 1935.0, -1555.1, 16.16, 0.0, 270.0, 45.0, _, _, _, 4.0);
    MapFixObjects[10] = CreateDynamicObject(3037, 1957.7, -1590.1, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[11] = CreateDynamicObject(3037, 1950.2, -1582.6, 16.13, 0.0, 270.0, 45.0, _, _, _, 6.0);
    MapFixObjects[12] = CreateDynamicObject(3117, 1967.85, -1590.1, 16.2, 0.0, 0.0, 315.0, _, _, _, 3.0);
    MapFixObjects[13] = CreateDynamicObject(3037, 1977.4, -1616.7, 19.4, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[14] = CreateDynamicObject(3037, 1967.2, -1616.7, 19.4, 0.0, 270.0, 90.0, _, _, _, 6.0);

    MapFixObjects[15] = CreateDynamicObject(1555, -1377.2998, 492.5, 5.6, 0.0, 0.0, 90.0, _, _, _, 2.0);

    MapFixObjects[16] = CreateDynamicObject(3037, -653.3, -1693.5, 40.0, 345.0, 340.0, 86.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[16], 0, 0, "none", "none", 0);
    MapFixObjects[17] = CreateDynamicObject(3037, -643.8, -1694.2, 43.0, 345.0, 345.0, 87.0, _, _, _, 6.0);
    MapFixObjects[18] = CreateDynamicObject(3037, -662.7, -1693.0, 38.0, 345.0, 337.0, 85.0, _, _, _, 6.0);

    MapFixObjects[19] = CreateDynamicObject(1566, -1406.7, 1.4, 6.5, 0.0, 0.0, 0.0, _, _, _, 2.0);
    MapFixObjects[20] = CreateDynamicObject(1566, -1406.7, 1.4, 9.4, 0.0, 0.0, 0.0, _, _, _, 2.0);

    MapFixObjects[21] = CreateDynamicObject(3037, 1908.5, 2222.8, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[22] = CreateDynamicObject(3037, 1908.5, 2211.9, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[23] = CreateDynamicObject(3037, 1908.5, 2201.1, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[24] = CreateDynamicObject(3037, 1843.6, 2201.1, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[25] = CreateDynamicObject(3037, 1843.6, 2211.9, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[26] = CreateDynamicObject(3037, 1843.6, 2222.8, 14.1, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[27] = CreateDynamicObject(3037, 1855.3, 2234.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[28] = CreateDynamicObject(3037, 1865.7, 2235.1, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[29] = CreateDynamicObject(3037, 1876.1, 2235.1, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[30] = CreateDynamicObject(3037, 1886.5, 2235.1, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[31] = CreateDynamicObject(3037, 1896.9, 2234.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[32] = CreateDynamicObject(3037, 1855.3, 2189.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[33] = CreateDynamicObject(3037, 1865.7, 2189.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[34] = CreateDynamicObject(3037, 1876.1, 2189.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[35] = CreateDynamicObject(3037, 1886.5, 2189.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);
    MapFixObjects[36] = CreateDynamicObject(3037, 1896.9, 2189.5, 14.1, 0.0, 270.0, 90.0, _, _, _, 6.0);

    MapFixObjects[37] = CreateDynamicObject(3117, 2104.2, 2367.6, 11.9, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[38] = CreateDynamicObject(1566, 2115.2, 2368.8, 12.0, 0.0, 0.0, 0.0, _, _, _, 2.0);
    MapFixObjects[39] = CreateDynamicObject(1566, 2115.2, 2367.3, 12.0, 0.0, 0.0, 90.0, _, _, _, 2.0);

    MapFixObjects[40] = CreateDynamicObject(3084, -1613.0, 621.7, 37.0, 0.0, 2.0, 226.6, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[40], 0, 0, "none", "none", 0);
    MapFixObjects[41] = CreateDynamicObject(3084, -1604.5, 630.7, 37.3, 0.0, 2.0, 226.6, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[41], 0, 0, "none", "none", 0);
    MapFixObjects[42] = CreateDynamicObject(3084, -1596.0, 639.7, 37.7, 0.0, 2.0, 226.6, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[42], 0, 0, "none", "none", 0);
    MapFixObjects[43] = CreateDynamicObject(3084, -1587.5, 648.7, 38.1, 0.0, 2.0, 226.6, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[43], 0, 0, "none", "none", 0);
    MapFixObjects[44] = CreateDynamicObject(3084, -1579.7, 656.9, 38.5, 0.0, 2.0, 226.6, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[44], 0, 0, "none", "none", 0);

    MapFixObjects[45] = CreateDynamicObject(10558, -1955.0, 745.9, 49.0, 90.0, 90.0, 90.0, _, _, _, 5.0);

    MapFixObjects[46] = CreateDynamicObject(8957, -2060.3, 474.3, 36.0, 0.0, 0.0, 270.0, _, _, _, 5.0);

    MapFixObjects[47] = CreateDynamicObject(2957, 396.7, -2058.6, 9.9, 270.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[48] = CreateDynamicObject(3055, 391.4, -2054.5, 9.8, 270.0, 180.0, 180.0, _, _, _, 5.0);
    MapFixObjects[49] = CreateDynamicObject(3055, 391.4, -2052.7, 9.8, 270.0, 180.0, 180.0, _, _, _, 5.0);

    MapFixObjects[50] = CreateDynamicObject(2904, 2181.7, -2218.2, 15.5, 0.0, 0.0, 45.0, _, _, _, 2.0);
    MapFixObjects[51] = CreateDynamicObject(2904, 2188.9, -2210.9, 15.5, 0.0, 0.0, 45.0, _, _, _, 2.0);
    MapFixObjects[52] = CreateDynamicObject(2904, 2196.5, -2203.7, 15.5, 0.0, 0.0, 45.0, _, _, _, 2.0);
    MapFixObjects[53] = CreateDynamicObject(2904, 2203.8, -2197.2, 15.5, 0.0, 0.0, 45.0, _, _, _, 2.0);

    MapFixObjects[54] = CreateDynamicObject(10558, 1038.2, -1383.0, 17.07, 0.0, 90.0, 90.0, _, _, _, 5.0);
    MapFixObjects[55] = CreateDynamicObject(3117, 1041.95, -1383.0, 17.2, 0.0, 0.0, 315.0, _, _, _, 3.0);
    MapFixObjects[56] = CreateDynamicObject(3117, 1042.9, -1381.9, 17.2, 0.0, 0.0, 90.0, _, _, _, 3.0);

    MapFixObjects[57] = CreateDynamicObject(3084, 501.0, -1364.9, 20.3, 270.0, 0.0, 107.0, _, _, _, 7.0);
    MapFixObjects[58] = CreateDynamicObject(3037, 503.5, -1375.0, 20.3, 0.0, 270.0, 17.0, _, _, _, 6.0);
    MapFixObjects[59] = CreateDynamicObject(3037, 496.4, -1362.4, 20.3, 0.0, 270.0, 115.0, _, _, _, 6.0);
    MapFixObjects[60] = CreateDynamicObject(3084, 507.4, -1386.0, 19.3, 270.0, 180.0, 285.0, _, _, _, 7.0);
    MapFixObjects[61] = CreateDynamicObject(3084, 510.6, -1397.9, 19.3, 270.0, 180.0, 285.0, _, _, _, 7.0);
    MapFixObjects[62] = CreateDynamicObject(3084, 507.6, -1404.7, 19.3, 270.0, 0.0, 194.5, _, _, _, 7.0);
    MapFixObjects[63] = CreateDynamicObject(3055, 498.9, -1406.3, 19.3, 270.0, 0.0, 14.5, _, _, _, 5.0);
    MapFixObjects[64] = CreateDynamicObject(3055, 481.4, -1412.1, 20.5, 270.0, 0.0, 20.5, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[64], 0, 0, "none", "none", 0);
    MapFixObjects[65] = CreateDynamicObject(3109, 484.8, -1413.2, 19.3, 0.0, 90.0, 20.5, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[65], 0, 0, "none", "none", 0);
    MapFixObjects[66] = CreateDynamicObject(3109, 479.6, -1415.2, 19.3, 0.0, 90.0, 20.5, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[66], 0, 0, "none", "none", 0);
    MapFixObjects[67] = CreateDynamicObject(3037, 471.0, -1417.1, 24.6, 0.0, 90.0, 300.5, _, _, _, 6.0);

    MapFixObjects[68] = CreateDynamicObject(5066, -1540.2, -444.9, 6.7, 0.0, 0.0, 315.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[68], 0, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[68], 1, 0, "none", "none", 0);
    MapFixObjects[69] = CreateDynamicObject(10150, -1539.4, -440.9, 6.5, 0.0, 0.0, 45.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[69], 0, 0, "none", "none", 0);
    MapFixObjects[70] = CreateDynamicObject(10150, -1544.4, -445.8, 6.5, 0.0, 0.0, 45.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[70], 0, 0, "none", "none", 0);

    MapFixObjects[71] = CreateDynamicObject(5066, -1230.8, 51.1, 14.7, 0.0, 0.0, 45.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[71], 0, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[71], 1, 0, "none", "none", 0);
    MapFixObjects[72] = CreateDynamicObject(10150, -1226.8, 50.3, 14.5, 0.0, 0.0, 315.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[72], 0, 0, "none", "none", 0);
    MapFixObjects[73] = CreateDynamicObject(10150, -1231.7, 55.1, 14.5, 0.0, 0.0, 315.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[73], 0, 0, "none", "none", 0);

    MapFixObjects[74] = CreateDynamicObject(8957, 2781.0, -1358.6, 27.5, 0.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[74], 0, 0, "none", "none", 0);
    MapFixObjects[75] = CreateDynamicObject(8957, 2781.0, -1333.3, 33.0, 0.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[75], 0, 0, "none", "none", 0);
    MapFixObjects[76] = CreateDynamicObject(8957, 2781.2, -1306.4, 39.5, 0.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[76], 0, 0, "none", "none", 0);
    MapFixObjects[77] = CreateDynamicObject(8957, 2781.2, -1281.3, 45.5, 0.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[77], 0, 0, "none", "none", 0);

    MapFixObjects[78] = CreateDynamicObject(3117, -2240.7, 80.5, 37.0, 0.0, 270.0, 45.0, _, _, _, 3.0);

    MapFixObjects[79] = CreateDynamicObject(1566, -180.7, 1129.48, 20.8, 0.0, 0.0, 0.0, _, _, _, 2.0);
    MapFixObjects[80] = CreateDynamicObject(3061, -180.7, 1128.4, 20.5, 0.0, 0.0, 0.0, _, _, _, 2.0);

    MapFixObjects[81] = CreateDynamicObject(5846, 1547.4, 885.1, 7.88, 7.5, 90.0, 70.0, _, _, _, 12.0);

    MapFixObjects[82] = CreateDynamicObject(5846, -1883.4, 1436.6, -33.7, 357.5, 90.0, 60.0, _, _, _, 22.0);
    SetDynamicObjectMaterial(MapFixObjects[82], 0, 0, "none", "none", 0);

    MapFixObjects[83] = CreateDynamicObject(8957, 1771.9, 2166.1, 6.0, 0.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[84] = CreateDynamicObject(7930, 839.69, -1062.65, 32.57, 0.0, 90.0, 35.0, _, _, _, 5.0);
    MapFixObjects[85] = CreateDynamicObject(1965, 835.25, -1058.65, 32.66, 0.0, 90.0, 298.25, _, _, _, 2.0);
    MapFixObjects[86] = CreateDynamicObject(3109, 834.67, -1056.3, 32.63, 0.0, 90.0, 264.0, _, _, _, 2.0);
    MapFixObjects[87] = CreateDynamicObject(3109, 835.1, -1054.7, 32.63, 0.0, 90.0, 247.0, _, _, _, 2.0);
    MapFixObjects[88] = CreateDynamicObject(1965, 836.8, -1052.6, 32.66, 0.0, 90.0, 219.5, _, _, _, 2.0);
    MapFixObjects[89] = CreateDynamicObject(8957, 850.9, -1057.5, 29.2, 0.0, 90.0, 305.0, _, _, _, 5.0);
    MapFixObjects[90] = CreateDynamicObject(10184, 847.4, -1048.1, 29.0, 0.0, 90.0, 305.0, _, _, _, 9.0);
    MapFixObjects[91] = CreateDynamicObject(10184, 857.0, -1041.4, 29.0, 0.0, 90.0, 305.0, _, _, _, 9.0);
    MapFixObjects[92] = CreateDynamicObject(2957, 854.8, -1039.7, 29.4, 90.0, 90.0, 35.5, _, _, _, 3.0);
    MapFixObjects[93] = CreateDynamicObject(1966, 861.0, -1036.9, 35.9, 90.0, 0.0, 35.0, _, _, _, 5.0);
    MapFixObjects[94] = CreateDynamicObject(1966, 864.1, -1038.4, 35.9, 90.0, 90.0, 35.0, _, _, _, 5.0);
    MapFixObjects[95] = CreateDynamicObject(1965, 862.7, -1034.4, 35.9, 0.0, 90.0, 305.0, _, _, _, 2.0);

    MapFixObjects[96] = CreateDynamicObject(3117, 689.6, -1424.4, 19.8, 0.0, 90.0, 0.0, _, _, _, 3.0);

    MapFixObjects[97] = CreateObject(8957, 681.4, -447.4, -26.7, 0.0, 270.0, 0.0, 5.0);
    MapFixObjects[98] = CreateDynamicObject(8957, 680.35, -447.1, -25.0, 0.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[99] = CreateDynamicObject(8957, 682.7, -447.1, -25.0, 0.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[100] = CreateDynamicObject(2904, 2344.1, 377.5, 25.568, 84.0, 0.0, 354.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[100], 0, 0, "none", "none", 0);

    MapFixObjects[101] = CreateDynamicObject(3084, 1077.8, 1394.7, 6.4, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[102] = CreateDynamicObject(3084, 1078.6, 1404.4, 3.2, 0.0, 38.0, 90.0, _, _, _, 7.0);

    MapFixObjects[103] = CreateDynamicObject(8957, 2399.1, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);
    MapFixObjects[104] = CreateDynamicObject(8957, 2416.0, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);
    MapFixObjects[105] = CreateDynamicObject(8957, 2441.2, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);
    MapFixObjects[106] = CreateDynamicObject(8957, 2449.6, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);
    MapFixObjects[107] = CreateDynamicObject(8957, 2474.9, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);
    MapFixObjects[108] = CreateDynamicObject(8957, 2491.7, 2166.2, 13.4, 0.0, 270.0, 90.0, _, _, _, 5.0);

    MapFixObjects[109] = CreateDynamicObject(3117, 2275.1, 2351.4, 18.67, 0.0, 0.0, 45.0, _, _, _, 3.0);

    MapFixObjects[110] = CreateDynamicObject(2954, 539.85, 50.05, 21.6, 0.0, 0.0, 100.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[110], 0, 0, "none", "none", 0);

    MapFixObjects[111] = CreateDynamicObject(5846, -2438.7, -1398.1, 338.95, 356.0, 252.0, 304.0, _, _, _, 12.0);
    MapFixObjects[112] = CreateDynamicObject(5846, -2455.8, -1405.6, 342.2, 353.0, 249.0, 304.0, _, _, _, 12.0);
    MapFixObjects[113] = CreateDynamicObject(8957, -2470.0, -1406.9, 345.5, 15.0, 115.0, 118.0, _, _, _, 5.0);

    MapFixObjects[114] = CreateDynamicObject(3117, 1076.9, 1362.25, 12.3, 0.0, 90.0, 95.0, _, _, _, 3.0);

    MapFixObjects[115] = CreateDynamicObject(3084, 2356.5, 1881.5, 14.1, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[116] = CreateDynamicObject(3084, 2344.0, 1881.5, 14.1, 90.0, 0.0, 0.0, _, _, _, 7.0);

    MapFixObjects[117] = CreateDynamicObject(10558, -2187.4, 715.9, 78.6, 0.0, 90.0, 0.0, _, _, _, 5.0);

    MapFixObjects[118] = CreateDynamicObject(8957, 2862.1, -1406.1, 16.2, 0.0, 88.0, 0.0, _, _, _, 5.0);

    MapFixObjects[119] = CreateDynamicObject(3117, 2823.5, -1597.4, 12.7, 0.0, 0.0, 68.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[119], 0, 0, "none", "none", 0);

    MapFixObjects[120] = CreateDynamicObject(2938, 2863.7, -1439.5, 15.0, 0.0, 90.0, 0.0, _, _, _, 7.0);
    MapFixObjects[121] = CreateDynamicObject(3117, 2864.2, -1446.2, 15.1, 0.0, 0.0, 50.0, _, _, _, 3.0);
    MapFixObjects[122] = CreateDynamicObject(3117, 2864.1, -1432.6, 15.1, 0.0, 0.0, 132.0, _, _, _, 3.0);

    MapFixObjects[123] = CreateDynamicObject(8957, 1003.8, -919.5, 45.5, 0.0, 90.0, 8.0, _, _, _, 5.0);

    MapFixObjects[124] = CreateDynamicObject(3084, -2904.4, 1247.8, 5.75, 0.0, 0.0, 45.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[124], 0, 0, "none", "none", 0);
    MapFixObjects[125] = CreateDynamicObject(3084, -2860.1, 1256.8, 5.7, 0.0, 0.0, 45.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[125], 0, 0, "none", "none", 0);
    MapFixObjects[126] = CreateDynamicObject(3084, -2852.3, 1264.6, 5.7, 0.0, 0.0, 45.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[126], 0, 0, "none", "none", 0);

    MapFixObjects[127] = CreateDynamicObject(3084, 966.3, -1038.8, 28.9, 270.0, 0.0, 90.0, _, _, _, 7.0);

    MapFixObjects[128] = CreateDynamicObject(3084, 2403.5, 2661.2, 9.0, 296.0, 0.0, 354.0, _, _, _, 7.0);

    MapFixObjects[129] = CreateDynamicObject(3117, 1198.5, -916.78, 45.0, 0.0, 0.0, 7.0, _, _, _, 3.0);

    MapFixObjects[130] = CreateDynamicObject(3037, 428.1, -1641.33, 43.5, 90.0, 0.0, 311.0, _, _, _, 6.0);

    MapFixObjects[131] = CreateDynamicObject(8957, 1301.9, -966.1, 36.2, 0.0, 0.0, 90.0, _, _, _, 5.0);
    MapFixObjects[132] = CreateDynamicObject(3037, 1298.3, -1001.0, 35.1, 0.0, 0.0, 0.0, _, _, _, 6.0);

    MapFixObjects[133] = CreateDynamicObject(3117, 2504.6, 1144.86, 18.5, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[134] = CreateDynamicObject(3117, 2508.9, 1144.86, 18.5, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[135] = CreateDynamicObject(3117, 2513.1, 1144.86, 18.5, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[136] = CreateDynamicObject(3117, 2515.73, 1146.4, 18.5, 0.0, 90.0, 0.0, _, _, _, 3.0);
    MapFixObjects[137] = CreateDynamicObject(3117, 2515.73, 1152.5, 18.5, 0.0, 90.0, 0.0, _, _, _, 3.0);

    MapFixObjects[138] = CreateDynamicObject(3084, -1869.2, -162.8, 16.6, 90.0, 0.0, 86.0, _, _, _, 7.0);

    MapFixObjects[139] = CreateDynamicObject(3117, 1623.63, -1714.5, 25.1, 0.0, 0.0, 96.0, _, _, _, 3.0);
    MapFixObjects[140] = CreateDynamicObject(3117, 1584.8, -1717.85, 25.1, 0.0, 0.0, 96.0, _, _, _, 3.0);
    MapFixObjects[141] = CreateDynamicObject(3117, 1587.0, -1743.67, 25.1, 0.0, 0.0, 95.0, _, _, _, 3.0);
    MapFixObjects[142] = CreateDynamicObject(3117, 1625.6, -1740.3, 25.1, 0.0, 0.0, 95.0, _, _, _, 3.0);

    MapFixObjects[143] = CreateDynamicObject(3084, -1919.1, 699.6, 74.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[144] = CreateDynamicObject(3117, -1913.3, 699.1, 74.3, 0.0, 180.0, 99.0, _, _, _, 3.0);
    MapFixObjects[145] = CreateDynamicObject(3084, -1931.7, 699.6, 74.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[146] = CreateDynamicObject(3117, -1939.2, 699.6, 74.3, 0.0, 180.0, 90.0, _, _, _, 3.0);
    MapFixObjects[147] = CreateDynamicObject(3084, -1951.7, 699.5, 74.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[148] = CreateDynamicObject(8957, -1940.7, 697.5, 71.8, 68.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[149] = CreateDynamicObject(8957, -1946.7, 697.5, 71.8, 68.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[150] = CreateDynamicObject(8957, -1943.8, 700.0, 70.3, 68.0, 90.0, 0.0, _, _, _, 5.0);
    MapFixObjects[151] = CreateDynamicObject(8957, -1956.6, 697.5, 71.8, 68.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[152] = CreateDynamicObject(8957, -1962.6, 697.5, 71.8, 68.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[153] = CreateDynamicObject(8957, -1959.6, 700.0, 70.3, 68.0, 90.0, 0.0, _, _, _, 5.0);
    MapFixObjects[154] = CreateDynamicObject(3084, -1984.3, 699.6, 74.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[155] = CreateDynamicObject(3084, -1971.6, 699.6, 74.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[156] = CreateDynamicObject(3117, -1964.1, 699.6, 74.3, 0.0, 180.0, 90.0, _, _, _, 3.0);
    MapFixObjects[157] = CreateDynamicObject(3117, -1990.1, 699.1, 74.3, 0.0, 180.0, 82.0, _, _, _, 3.0);

    MapFixObjects[158] = CreateDynamicObject(8957, -2456.6, 763.4, 43.0, 29.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[159] = CreateDynamicObject(8957, -2456.6, 772.0, 42.8, 44.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[160] = CreateDynamicObject(8957, -2399.3, 764.1, 38.6, 42.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[161] = CreateDynamicObject(8957, -2399.3, 768.6, 38.4, 56.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[162] = CreateDynamicObject(8957, -2486.0, 764.0, 38.6, 41.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[163] = CreateDynamicObject(8957, -2486.0, 768.6, 38.6, 56.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[164] = CreateDynamicObject(8957, -2413.5, 761.7, 38.5, 0.0, 90.0, 90.0, _, _, _, 5.0);
    MapFixObjects[165] = CreateDynamicObject(3117, -2470.7, 759.0, 41.2, 298.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[166] = CreateDynamicObject(3117, -2472.8, 759.0, 41.2, 298.0, 90.0, 270.0, _, _, _, 3.0);
    MapFixObjects[167] = CreateDynamicObject(3117, -2410.8, 759.0, 40.2, 298.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[168] = CreateDynamicObject(3117, -2416.5, 759.0, 40.2, 298.0, 90.0, 270.0, _, _, _, 3.0);
    MapFixObjects[169] = CreateDynamicObject(3117, -2412.5, 759.0, 41.2, 298.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[170] = CreateDynamicObject(3117, -2414.7, 759.0, 41.2, 298.0, 90.0, 270.0, _, _, _, 3.0);
    MapFixObjects[171] = CreateDynamicObject(3117, -2413.7, 759.0, 39.5, 90.0, 90.0, 270.0, _, _, _, 3.0);

    MapFixObjects[172] = CreateDynamicObject(3109, -1650.4, 537.3, 37.9, 0.0, 0.0, 46.0, _, _, _, 2.0);
    MapFixObjects[173] = CreateDynamicObject(3109, -1674.3, 560.0, 37.9, 0.0, 0.0, 46.0, _, _, _, 2.0);
    MapFixObjects[174] = CreateDynamicObject(9583, -1651.2, 537.6, 38.6, 0.0, 82.0, 46.5, _, _, _, 22.0);
    SetDynamicObjectMaterial(MapFixObjects[174], 0, 0, "none", "none", 0);
    MapFixObjects[175] = CreateDynamicObject(9583, -1674.7, 560.65, 38.6, 0.0, 82.0, 46.5, _, _, _, 22.0);
    SetDynamicObjectMaterial(MapFixObjects[175], 0, 0, "none", "none", 0);

    MapFixObjects[176] = CreateDynamicObject(17540, 2735.7, -1267.8, 62.9, 0.0, 0.0, 90.0, _, _, _, 24.0);
    SetDynamicObjectMaterial(MapFixObjects[176], 0, 0, "none", "none", 0);

    MapFixObjects[177] = CreateDynamicObject(8957, -755.95, -1848.4, 14.3, 5.0, 335.0, 349.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[177], 0, 0, "none", "none", 0);

    MapFixObjects[178] = CreateDynamicObject(906, -609.8, -1899.4, 3.5, 0.0, 10.0, 156.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[178], 0, 0, "none", "none", 0);

    MapFixObjects[179] = CreateDynamicObject(2957, -405.0, 2242.8, 44.0, 0.0, 34.0, 285.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[179], 0, 0, "none", "none", 0);
    MapFixObjects[180] = CreateDynamicObject(2957, -405.4, 2244.5, 44.0, 0.0, 326.0, 285.0, _, _, _, 3.0);

    MapFixObjects[181] = CreateDynamicObject(1965, -1119.3, 852.2, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[181], 0, 0, "none", "none", 0);
    MapFixObjects[182] = CreateDynamicObject(1965, -1121.03, 854.6, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[182], 0, 0, "none", "none", 0);
    MapFixObjects[183] = CreateDynamicObject(1965, -1121.95, 855.9, 31.1, 0.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[183], 0, 0, "none", "none", 0);
    MapFixObjects[184] = CreateDynamicObject(1965, -1131.0, 868.3, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[184], 0, 0, "none", "none", 0);
    MapFixObjects[185] = CreateDynamicObject(1965, -1129.24, 865.87, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[185], 0, 0, "none", "none", 0);
    MapFixObjects[186] = CreateDynamicObject(1965, -1128.3, 864.58, 31.1, 0.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[186], 0, 0, "none", "none", 0);
    MapFixObjects[187] = CreateDynamicObject(1965, -1134.4, 841.1, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[187], 0, 0, "none", "none", 0);
    MapFixObjects[188] = CreateDynamicObject(1965, -1136.17, 843.53, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[188], 0, 0, "none", "none", 0);
    MapFixObjects[189] = CreateDynamicObject(1965, -1136.5, 845.2, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[189], 0, 0, "none", "none", 0);
    MapFixObjects[190] = CreateDynamicObject(1965, -1146.15, 857.3, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[190], 0, 0, "none", "none", 0);
    MapFixObjects[191] = CreateDynamicObject(1965, -1144.38, 854.87, 30.5, 0.0, 90.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[191], 0, 0, "none", "none", 0);
    MapFixObjects[192] = CreateDynamicObject(1965, -1142.8, 854.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[192], 0, 0, "none", "none", 0);
    MapFixObjects[193] = CreateDynamicObject(1965, -1075.0, 889.9, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[193], 0, 0, "none", "none", 0);
    MapFixObjects[194] = CreateDynamicObject(1965, -1081.3, 898.7, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[194], 0, 0, "none", "none", 0);
    MapFixObjects[195] = CreateDynamicObject(1965, -1102.2, 870.1, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[195], 0, 0, "none", "none", 0);
    MapFixObjects[196] = CreateDynamicObject(1965, -1108.6, 878.8, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[196], 0, 0, "none", "none", 0);
    MapFixObjects[197] = CreateDynamicObject(1965, -1155.6, 831.3, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[197], 0, 0, "none", "none", 0);
    MapFixObjects[198] = CreateDynamicObject(1965, -1162.0, 840.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[198], 0, 0, "none", "none", 0);
    MapFixObjects[199] = CreateDynamicObject(1965, -1183.0, 811.4, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[199], 0, 0, "none", "none", 0);
    MapFixObjects[200] = CreateDynamicObject(1965, -1189.3, 820.2, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[200], 0, 0, "none", "none", 0);
    MapFixObjects[201] = CreateDynamicObject(1965, -1328.3, 705.8, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[201], 0, 0, "none", "none", 0);
    MapFixObjects[202] = CreateDynamicObject(1965, -1334.6, 714.6, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[202], 0, 0, "none", "none", 0);
    MapFixObjects[203] = CreateDynamicObject(1965, -1355.6, 686.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[203], 0, 0, "none", "none", 0);
    MapFixObjects[204] = CreateDynamicObject(1965, -1362.0, 694.7, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[204], 0, 0, "none", "none", 0);
    MapFixObjects[205] = CreateDynamicObject(1965, -1374.9, 672.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[205], 0, 0, "none", "none", 0);
    MapFixObjects[206] = CreateDynamicObject(1965, -1381.3, 680.7, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[206], 0, 0, "none", "none", 0);
    MapFixObjects[207] = CreateDynamicObject(1965, -1390.1, 660.9, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[207], 0, 0, "none", "none", 0);
    MapFixObjects[208] = CreateDynamicObject(1965, -1396.4, 669.7, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[208], 0, 0, "none", "none", 0);
    MapFixObjects[209] = CreateDynamicObject(1965, -1409.3, 647.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[209], 0, 0, "none", "none", 0);
    MapFixObjects[210] = CreateDynamicObject(1965, -1415.8, 655.7, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[210], 0, 0, "none", "none", 0);
    MapFixObjects[211] = CreateDynamicObject(1965, -1436.8, 627.0, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[211], 0, 0, "none", "none", 0);
    MapFixObjects[212] = CreateDynamicObject(1965, -1443.1, 635.8, 31.1, 90.0, 0.0, 306.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[212], 0, 0, "none", "none", 0);
    MapFixObjects[213] = CreateDynamicObject(3037, -1440.6, 630.9, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[213], 0, 0, "none", "none", 0);
    MapFixObjects[214] = CreateDynamicObject(3037, -1413.1, 650.9, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[214], 0, 0, "none", "none", 0);
    MapFixObjects[215] = CreateDynamicObject(3037, -1358.3, 690.7, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[215], 0, 0, "none", "none", 0);
    MapFixObjects[216] = CreateDynamicObject(3037, -1330.8, 710.7, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[216], 0, 0, "none", "none", 0);
    MapFixObjects[217] = CreateDynamicObject(3037, -1186.9, 815.3, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[217], 0, 0, "none", "none", 0);
    MapFixObjects[218] = CreateDynamicObject(3037, -1159.4, 835.2, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[218], 0, 0, "none", "none", 0);
    MapFixObjects[219] = CreateDynamicObject(3037, -1104.7, 875.0, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[219], 0, 0, "none", "none", 0);
    MapFixObjects[220] = CreateDynamicObject(3037, -1077.2, 895.0, 30.73, 0.0, 90.0, 36.0, _, _, _, 16.0);
    SetDynamicObjectMaterial(MapFixObjects[220], 0, 0, "none", "none", 0);

    MapFixObjects[221] = CreateDynamicObject(8957, 1725.6, 2122.3, 13.1, 0.0, 0.0, 90.0, _, _, _, 5.0);

    MapFixObjects[222] = CreateDynamicObject(3084, 1682.3, 1379.8, 16.1, 0.0, 0.0, 299.0, _, _, _, 7.0);
    MapFixObjects[223] = CreateDynamicObject(3084, 1672.8, 1396.5, 16.1, 0.0, 0.0, 300.5, _, _, _, 7.0);
    MapFixObjects[224] = CreateDynamicObject(8957, 1677.5, 1388.2, 14.8, 0.0, 0.0, 30.0, _, _, _, 5.0);

    MapFixObjects[225] = CreateDynamicObject(2904, 2143.0, 1621.3, 1001.9, 0.0, 0.0, 0.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[225], 0, 0, "none", "none", 0);

    MapFixObjects[226] = CreateDynamicObject(3117, 1175.7, 1224.0, 13.5, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[227] = CreateDynamicObject(2954, 1174.8, 1224.18, 13.2, 0.0, 0.0, 0.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[227], 0, 0, "none", "none", 0);
    MapFixObjects[228] = CreateDynamicObject(2954, 1174.7, 1224.18, 15.2, 0.0, 90.0, 0.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[228], 0, 0, "none", "none", 0);

    MapFixObjects[229] = CreateDynamicObject(8957, -208.3, 1055.7, 22.8, 0.0, 90.0, 0.0, _, _, _, 5.0);

    MapFixObjects[230] = CreateDynamicObject(5846, 2319.5, 1733.2, 7.5, 7.5, 270.0, 0.0, _, _, _, 12.0);

    MapFixObjects[231] = CreateDynamicObject(8957, 2393.8, 1483.7, 9.7, 0.0, 90.0, 90.0, _, _, _, 5.0);

    MapFixObjects[232] = CreateDynamicObject(8957, -2690.7, 518.5, 17.1, 0.0, 0.0, 90.0, _, _, _, 5.0);
    MapFixObjects[233] = CreateDynamicObject(3084, -2688.8, 512.1, 20.2, 90.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[234] = CreateDynamicObject(3084, -2688.8, 499.6, 20.2, 90.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[235] = CreateDynamicObject(3084, -2688.8, 487.1, 20.2, 90.0, 0.0, 90.0, _, _, _, 7.0);

    MapFixObjects[236] = CreateDynamicObject(3084, 1003.8, -1161.3, 27.0, 90.0, 0.0, 0.0, _, _, _, 7.0);

    MapFixObjects[237] = CreateDynamicObject(3093, 807.0, -1032.6, 26.4, 0.0, 90.0, 26.0, _, _, _, 2.0);
    MapFixObjects[238] = CreateDynamicObject(3093, 812.5, -1030.2, 26.4, 0.0, 90.0, 26.0, _, _, _, 2.0);
    MapFixObjects[239] = CreateDynamicObject(3093, 818.1, -1027.4, 26.4, 0.0, 90.0, 26.3, _, _, _, 2.0);
    MapFixObjects[240] = CreateDynamicObject(3093, 823.8, -1024.6, 26.4, 0.0, 90.0, 26.3, _, _, _, 2.0);

    MapFixObjects[241] = CreateDynamicObject(3084, 1653.1, -1333.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[241], 0, 0, "none", "none", 0);
    MapFixObjects[242] = CreateDynamicObject(3084, 1653.1, -1353.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[242], 0, 0, "none", "none", 0);
    MapFixObjects[243] = CreateDynamicObject(3055, 1653.7, -1343.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[243], 0, 0, "none", "none", 0);
    MapFixObjects[244] = CreateDynamicObject(3084, 1681.5, -1324.9, 108.7, 90.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[244], 0, 0, "none", "none", 0);
    MapFixObjects[245] = CreateDynamicObject(3084, 1661.5, -1324.9, 108.7, 90.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[245], 0, 0, "none", "none", 0);
    MapFixObjects[246] = CreateDynamicObject(3055, 1671.5, -1325.5, 108.7, 90.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[246], 0, 0, "none", "none", 0);
    MapFixObjects[247] = CreateDynamicObject(3084, 1689.9, -1333.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[247], 0, 0, "none", "none", 0);
    MapFixObjects[248] = CreateDynamicObject(3084, 1689.9, -1353.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[248], 0, 0, "none", "none", 0);
    MapFixObjects[249] = CreateDynamicObject(3055, 1688.7, -1343.3, 108.7, 90.0, 0.0, 90.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[249], 0, 0, "none", "none", 0);
    MapFixObjects[250] = CreateDynamicObject(3084, 1661.5, -1361.7, 108.7, 90.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[250], 0, 0, "none", "none", 0);
    MapFixObjects[251] = CreateDynamicObject(3084, 1681.5, -1361.7, 108.7, 90.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[251], 0, 0, "none", "none", 0);
    MapFixObjects[252] = CreateDynamicObject(3055, 1671.5, -1360.5, 108.7, 90.0, 0.0, 0.0, _, _, _, 15.0);
    SetDynamicObjectMaterial(MapFixObjects[252], 0, 0, "none", "none", 0);

    MapFixObjects[253] = CreateDynamicObject(8957, 2194.0, -1099.1, 27.9, 0.0, 90.0, 66.0, _, _, _, 5.0);

    MapFixObjects[254] = CreateDynamicObject(8957, 2617.6, 1078.2, 9.5, 0.0, 90.0, 0.0, _, _, _, 5.0);

    MapFixObjects[255] = CreateDynamicObject(5020, 1838.5, 1285.5, 9.7, 0.0, 88.0, 0.0, _, _, _, 4.0);

    MapFixObjects[256] = CreateDynamicObject(4100, 1902.1, -1055.2, 24.11, 1.5, 0.0, 319.7, _, _, _, 18.0);
    SetDynamicObjectMaterial(MapFixObjects[256], 0, 0, "none", "none", 0);

    MapFixObjects[257] = CreateDynamicObject(3168, -640.5, 2717.2, 71.4, 0.0, 0.0, 42.0, _, _, _, 7.0);

    MapFixObjects[258] = CreateDynamicObject(19866, 2417.3059, 2387.3217, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[259] = CreateDynamicObject(19866, 2417.0258, 2387.3217, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[260] = CreateDynamicObject(19866, 2417.3059, 2382.3217, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[261] = CreateDynamicObject(19866, 2417.0258, 2382.3217, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[262] = CreateDynamicObject(19866, 2417.3051, 2377.301, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[263] = CreateDynamicObject(19866, 2417.031, 2377.3283, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[264] = CreateDynamicObject(19866, 2417.3059, 2372.321, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[265] = CreateDynamicObject(19866, 2417.031, 2372.3283, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[266] = CreateDynamicObject(19866, 2417.3059, 2367.321, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[267] = CreateDynamicObject(19866, 2417.031, 2367.3283, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[268] = CreateDynamicObject(19866, 2417.3059, 2363.1809, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[269] = CreateDynamicObject(19866, 2417.0258, 2363.1809, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[270] = CreateDynamicObject(19866, 2417.0258, 2359.301, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[271] = CreateDynamicObject(19866, 2417.3059, 2359.3007, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[272] = CreateDynamicObject(19866, 2417.3059, 2397.062, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[273] = CreateDynamicObject(19866, 2417.3059, 2400.7619, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[274] = CreateDynamicObject(19866, 2417.0258, 2397.0617, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);
    MapFixObjects[275] = CreateDynamicObject(19866, 2417.0258, 2400.7817, 9.8151, 0.0, 0.0, 0.0, _, _, _, 3.0);

    MapFixObjects[276] = CreateDynamicObject(1498, 2523.6, -1680.1, 1014.5, 0.0, 0.0, 90.0, _, _, _, 2.0);
    MapFixObjects[277] = CreateObject(2938, 2527.4, -1683.4, 1014.4, 0.0, 270.0, 90.0, 7.0);
    MapFixObjects[278] = CreateDynamicObject(5020, 2525.9, -1681.1, 1016.2, 0.0, 0.0, 90.0, _, _, _, 4.0);
    MapFixObjects[279] = CreateDynamicObject(5020, 2527.8, -1684.2, 1016.2, 0.0, 0.0, 180.0, _, _, _, 4.0);
    MapFixObjects[280] = CreateDynamicObject(5020, 2533.3, -1684.1, 1016.2, 0.0, 0.0, 180.0, _, _, _, 4.0);
    MapFixObjects[281] = CreateDynamicObject(5020, 2530.5, -1685.9, 1016.2, 0.0, 0.0, 270.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[281], 0, 0, "none", "none", 0);
    MapFixObjects[282] = CreateDynamicObject(3117, 2532.0, -1681.1, 1016.2, 0.0, 89.0, 90.0, _, _, _, 3.0);
    MapFixObjects[283] = CreateDynamicObject(3117, 2532.0, -1681.1, 1016.2, 0.0, 89.0, 270.0, _, _, _, 3.0);

    MapFixObjects[284] = CreateDynamicObject(19464, 293.1319, -1616.1232, 34.7051, 0.0, 0.0, 80.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[284], 0, 0, "none", "none", 0);
    MapFixObjects[285] = CreateDynamicObject(19464, 287.3273, -1615.127, 34.7051, 0.0, 0.0, 80.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[285], 0, 0, "none", "none", 0);
    MapFixObjects[286] = CreateDynamicObject(19464, 281.4706, -1614.0808, 34.7051, 0.0, 0.0, 80.0, _, _, _, 14.0);
    SetDynamicObjectMaterial(MapFixObjects[286], 0, 0, "none", "none", 0);

    MapFixObjects[287] = CreateDynamicObject(5020, 1861.7, 1363.3, 55.8, 0.0, 0.0, 90.0, _, _, _, 4.0);
    MapFixObjects[288] = CreateDynamicObject(5020, 1907.2, 1298.8, 55.8, 0.0, 0.0, 180.0, _, _, _, 4.0);

    MapFixObjects[289] = CreateDynamicObject(3037, 1714.5, 896.8, 14.3, 0.0, 270.0, 0.0, _, _, _, 6.0);
    MapFixObjects[290] = CreateDynamicObject(3037, 1714.5, 906.3, 14.3, 0.0, 270.0, 0.0, _, _, _, 6.0);

    MapFixObjects[291] = CreateDynamicObject(3084, -880.8, 1640.2, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[291], 0, 0, "none", "none", 0);
    MapFixObjects[292] = CreateDynamicObject(3084, -887.22, 1650.9, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[292], 0, 0, "none", "none", 0);
    MapFixObjects[293] = CreateDynamicObject(3084, -893.65, 1661.6, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[293], 0, 0, "none", "none", 0);
    MapFixObjects[294] = CreateDynamicObject(3084, -900.07, 1672.3, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[294], 0, 0, "none", "none", 0);
    MapFixObjects[295] = CreateDynamicObject(3084, -906.5, 1683.0, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[295], 0, 0, "none", "none", 0);
    MapFixObjects[296] = CreateDynamicObject(3084, -870.1, 1646.8, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[296], 0, 0, "none", "none", 0);
    MapFixObjects[297] = CreateDynamicObject(3084, -876.53, 1657.5, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[297], 0, 0, "none", "none", 0);
    MapFixObjects[298] = CreateDynamicObject(3084, -882.95, 1668.2, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[298], 0, 0, "none", "none", 0);
    MapFixObjects[299] = CreateDynamicObject(3084, -889.37, 1678.9, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[299], 0, 0, "none", "none", 0);
    MapFixObjects[300] = CreateDynamicObject(3084, -895.8, 1689.6, 25.3, 0.0, 0.0, 301.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[300], 0, 0, "none", "none", 0);

    MapFixObjects[301] = CreateDynamicObject(1566, -2105.4, -498.5, 49.5, 0.0, 0.0, 90.0, _, _, _, 2.0);

    MapFixObjects[302] = CreateDynamicObject(10149, -2557.25, 991.2, 80.6, 90.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[302], 0, 0, "none", "none", 0);
    MapFixObjects[303] = CreateDynamicObject(10149, -2557.25, 986.4, 80.6, 90.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[303], 0, 0, "none", "none", 0);
    MapFixObjects[304] = CreateDynamicObject(10149, -2557.25, 984.9, 82.3, 0.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[304], 0, 0, "none", "none", 0);
    MapFixObjects[305] = CreateDynamicObject(10149, -2557.25, 992.6, 82.3, 0.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[305], 0, 0, "none", "none", 0);
    MapFixObjects[306] = CreateDynamicObject(10149, -2555.3, 986.8, 82.3, 0.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[306], 0, 0, "none", "none", 0);

    MapFixObjects[307] = CreateDynamicObject(10184, -2283.1, 916.7, 85.5, 270.0, 0.0, 0.0, _, _, _, 9.0);
    MapFixObjects[308] = CreateDynamicObject(2957, -2281.1, 916.6, 94.4, 90.0, 0.0, 90.0, _, _, _, 3.0);
    MapFixObjects[309] = CreateDynamicObject(2957, -2283.0, 916.5, 75.2, 0.0, 0.0, 90.0, _, _, _, 3.0);

    MapFixObjects[310] = CreateDynamicObject(1498, 2401.755, -1714.5, 13.1243, 0.0, 0.0, 0.0, _, _, _, 150.0);

    MapFixObjects[311] = CreateDynamicObject(3084, 2235.9, 2233.2, 14.1, 270.0, 0.0, 90.0, _, _, _, 7.0);

    MapFixObjects[312] = CreateDynamicObject(3037, -2313.0, 771.7, 57.0, 0.0, 0.0, 358.5, _, _, _, 6.0);
    MapFixObjects[313] = CreateDynamicObject(3037, -2313.3, 761.5, 57.0, 0.0, 0.0, 358.5, _, _, _, 6.0);

    MapFixObjects[314] = CreateDynamicObject(3037, 1082.5, -1191.5, 19.1, 0.0, 0.0, 0.0, _, _, _, 6.0);

    MapFixObjects[315] = CreateDynamicObject(3037, 1227.2, 312.9, 21.1, 0.0, 270.0, 66.0, _, _, _, 6.0);

    MapFixObjects[316] = CreateDynamicObject(1966, -2730.6, 834.9, 59.8, 0.0, 0.0, 90.0, _, _, _, 5.0);
    MapFixObjects[317] = CreateDynamicObject(1966, -2734.0, 831.4, 59.8, 0.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[318] = CreateDynamicObject(1966, -2734.0, 838.4, 59.8, 0.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[319] = CreateDynamicObject(5340, -2737.7, 835.0, 60.6, 0.0, 0.0, 0.0, _, _, _, 4.0);
    MapFixObjects[320] = CreateDynamicObject(3117, -2737.7, 833.3, 59.2, 0.0, 0.0, 90.0, _, _, _, 3.0);
    MapFixObjects[321] = CreateDynamicObject(1966, -2735.38, 835.0, 58.8, 270.0, 0.0, 90.0, _, _, _, 5.0);
    MapFixObjects[322] = CreateDynamicObject(1966, -2734.0, 831.4, 56.0, 0.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[323] = CreateDynamicObject(3084, 1328.7, -997.1, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[324] = CreateDynamicObject(3084, 1328.7, -984.8, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[325] = CreateDynamicObject(3084, 1328.7, -972.4, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[326] = CreateDynamicObject(3084, 1322.5, -1003.2, 47.1, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[327] = CreateDynamicObject(3084, 1310.6, -1003.2, 47.1, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[328] = CreateDynamicObject(3084, 1304.4, -997.1, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[329] = CreateDynamicObject(3084, 1304.4, -984.7, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[330] = CreateDynamicObject(3084, 1304.4, -972.4, 47.1, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[331] = CreateDynamicObject(3084, 1310.6, -966.2, 47.1, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[332] = CreateDynamicObject(3084, 1322.5, -966.2, 47.1, 0.0, 0.0, 0.0, _, _, _, 7.0);

    MapFixObjects[333] = CreateDynamicObject(3084, -1800.3, 1516.5, -32.9, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[334] = CreateDynamicObject(3084, -1800.3, 1504.1, -32.9, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[335] = CreateDynamicObject(3084, -1800.3, 1491.7, -32.9, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[336] = CreateDynamicObject(3084, -1820.2, 1447.4, -32.7, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[337] = CreateDynamicObject(3084, -1820.2, 1459.8, -32.7, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[338] = CreateDynamicObject(3084, -1820.2, 1472.2, -32.7, 0.0, 0.0, 90.0, _, _, _, 7.0);

    MapFixObjects[339] = CreateDynamicObject(3037, -2340.1, 796.8, 51.8, 90.0, 0.0, 90.0, _, _, _, 6.0);

    MapFixObjects[340] = CreateDynamicObject(3117, 2091.1, -2079.3, 25.1, 90.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[340], 0, 0, "none", "none", 0);
    MapFixObjects[341] = CreateDynamicObject(3117, 2009.6, -2079.3, 25.1, 90.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[341], 0, 0, "none", "none", 0);

    MapFixObjects[342] = CreateDynamicObject(1501, -383.46, -1439.64, 25.33, 0.0, 0.0, 90.0, _, _, _, 150.0);

    MapFixObjects[343] = CreateDynamicObject(1505, -2574.495, 1153.023, 54.669, 0.0, 0.0, -19.444, _, _, _, 150.0);

    MapFixObjects[344] = CreateDynamicObject(1496, -1800.7048, 1201.0538, 24.1293, 0.0, 0.0, 0.0, _, _, _, 150.0);

    MapFixObjects[345] = CreateDynamicObject(1522, -1390.7784, 2639.247, 54.9744, 0.0, 0.0, 0.0, _, _, _, 150.0);

    MapFixObjects[346] = CreateDynamicObject(1498, 2038.036, 2721.37, 10.53, 0.0, 0.0, -180.0, _, _, _, 150.0);

    MapFixObjects[347] = CreateDynamicObject(2957, -2550.5, 193.9, 6.5, 0.0, 0.0, 285.5, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[347], 0, 0, "none", "none", 0);

    MapFixObjects[348] = CreateDynamicObject(3037, 875.6, -1565.0, 16.7, 0.0, 270.0, 293.0, _, _, _, 6.0);
    MapFixObjects[349] = CreateDynamicObject(2957, 869.3, -1567.8, 16.7, 90.0, 0.0, 12.0, _, _, _, 3.0);
    MapFixObjects[350] = CreateDynamicObject(2957, 882.3, -1562.4, 16.7, 90.0, 0.0, 31.997, _, _, _, 3.0);

    MapFixObjects[351] = CreateDynamicObject(3037, 770.2, -3.6, 1004.2, 0.0, 90.0, 90.0, _, _, _, 6.0);
    MapFixObjects[352] = CreateDynamicObject(3037, 760.0, -3.6, 1004.2, 0.0, 90.0, 90.0, _, _, _, 6.0);

    MapFixObjects[353] = CreateDynamicObject(3117, 145.2, -199.6, 3.95, 0.0, 0.0, 315.25, _, _, _, 3.0);

    MapFixObjects[354] = CreateDynamicObject(10184, 353.2, -1603.6, 36.1, 0.0, 90.0, 88.25, _, _, _, 9.0);
    MapFixObjects[355] = CreateDynamicObject(10184, 370.2, -1604.1, 36.1, 0.0, 90.0, 88.25, _, _, _, 9.0);
    MapFixObjects[356] = CreateDynamicObject(10184, 387.2, -1604.6, 36.1, 0.0, 90.0, 88.25, _, _, _, 9.0);
    MapFixObjects[357] = CreateDynamicObject(10184, 355.1, -1633.0, 36.1, 0.0, 90.0, 263.0, _, _, _, 9.0);
    MapFixObjects[358] = CreateDynamicObject(10184, 372.3, -1635.1, 36.1, 0.0, 90.0, 263.25, _, _, _, 9.0);
    MapFixObjects[359] = CreateDynamicObject(10184, 389.5, -1637.4, 36.1, 0.0, 90.0, 261.0, _, _, _, 9.0);

    MapFixObjects[360] = CreateDynamicObject(19454, 242.593, -178.5028, 4.17, 0.0, 90.0, 0.0, _, _, _, 6.0);

    MapFixObjects[361] = CreateDynamicObject(1685, -2397.2, 2407.9, 13.2, 0.0, 46.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[361], 0, 0, "none", "none", 0);
    MapFixObjects[362] = CreateDynamicObject(1685, -2395.7, 2407.2, 13.2, 0.0, 46.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[362], 0, 0, "none", "none", 0);
    MapFixObjects[363] = CreateDynamicObject(1685, -2397.7, 2407.0, 12.2, 0.0, 46.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[363], 0, 0, "none", "none", 0);
    MapFixObjects[364] = CreateDynamicObject(1685, -2396.2, 2406.3, 12.2, 0.0, 46.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[364], 0, 0, "none", "none", 0);
    MapFixObjects[365] = CreateDynamicObject(1685, -2396.0, 2407.6, 13.22, 0.0, 316.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[365], 0, 0, "none", "none", 0);
    MapFixObjects[366] = CreateDynamicObject(1685, -2397.1, 2408.2, 13.3, 0.0, 316.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[366], 0, 0, "none", "none", 0);
    MapFixObjects[367] = CreateDynamicObject(1685, -2395.5, 2408.7, 12.0, 0.0, 316.0, 243.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[367], 0, 0, "none", "none", 0);
    MapFixObjects[368] = CreateDynamicObject(1685, -2396.6, 2409.1, 12.32, 0.0, 138.0, 245.75, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[368], 0, 0, "none", "none", 0);

    MapFixObjects[369] = CreateDynamicObject(3037, 376.4, 194.8, 1013.0, 0.0, 270.0, 90.0, _, _, _, 6.0);

    MapFixObjects[370] = CreateDynamicObject(3055, 260.6, 1823.2, 9.7, 90.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[371] = CreateDynamicObject(3055, 260.6, 1826.8, 9.7, 90.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[372] = CreateDynamicObject(2957, -207.2, 1171.8, 21.6, 90.0, 0.0, 270.0, _, _, _, 3.0);
    MapFixObjects[373] = CreateDynamicObject(2957, -207.2, 1164.9, 22.3, 90.0, 0.0, 270.0, _, _, _, 3.0);

    MapFixObjects[374] = CreateDynamicObject(2957, -207.8, 1073.6, 20.4, 0.0, 0.0, 0.0, _, _, _, 3.0);

    MapFixObjects[375] = CreateDynamicObject(3084, 1682.7, -2003.9, 18.8, 270.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[376] = CreateDynamicObject(3084, 1682.7, -1991.5, 18.8, 270.0, 180.0, 90.0, _, _, _, 7.0);
    MapFixObjects[377] = CreateDynamicObject(3084, 1682.7, -1979.1, 18.8, 270.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[378] = CreateDynamicObject(3084, 1682.7, -1966.7, 18.8, 270.0, 0.0, 270.0, _, _, _, 7.0);

    MapFixObjects[379] = CreateDynamicObject(3084, 374.1, -1765.8, 9.3, 272.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[379], 0, 0, "none", "none", 0);
    MapFixObjects[380] = CreateDynamicObject(3084, 366.6, -1765.8, 9.3, 280.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[380], 0, 0, "none", "none", 0);

    MapFixObjects[381] = CreateDynamicObject(2954, 406.6, -1287.3, 49.0, 0.0, 0.0, 296.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[381], 0, 0, "none", "none", 0);
    MapFixObjects[382] = CreateDynamicObject(2954, 406.6, -1287.3, 51.0, 0.0, 0.0, 296.0, _, _, _, 12.0);
    SetDynamicObjectMaterial(MapFixObjects[382], 0, 0, "none", "none", 0);

    MapFixObjects[383] = CreateDynamicObject(2957, 1101.1, -1291.1, 17.5, 0.0, 0.0, 0.0, _, _, _, 3.0);

    MapFixObjects[384] = CreateDynamicObject(2904, 430.8, -1250.5, 49.1, 0.0, 90.0, 21.5, _, _, _, 2.0);

    MapFixObjects[385] = CreateDynamicObject(3084, 997.6, -1209.3, 22.0, 90.0, 0.0, 0.0, _, _, _, 7.0);

    MapFixObjects[386] = CreateDynamicObject(2938, -1556.4, 355.5, 25.3, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[387] = CreateDynamicObject(2938, -1556.4, 355.5, 37.3, 90.0, 0.0, 0.0, _, _, _, 7.0);

    MapFixObjects[388] = CreateDynamicObject(2938, -1611.4, 871.6, 26.6, 0.0, 270.0, 90.0, _, _, _, 7.0);
    MapFixObjects[389] = CreateDynamicObject(2938, -1599.8, 871.6, 26.6, 0.0, 270.0, 90.0, _, _, _, 7.0);
    MapFixObjects[390] = CreateDynamicObject(2938, -1588.8, 871.6, 26.6, 0.0, 270.0, 90.0, _, _, _, 7.0);
    MapFixObjects[391] = CreateDynamicObject(3084, -1611.5, 868.9, 26.6, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[392] = CreateDynamicObject(3084, -1600.0, 868.9, 26.6, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[393] = CreateDynamicObject(3084, -1588.9, 868.9, 26.6, 90.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[394] = CreateDynamicObject(2938, -1611.6, 867.3, 29.2, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[395] = CreateDynamicObject(2938, -1611.6, 867.3, 34.6, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[396] = CreateDynamicObject(2938, -1599.8, 867.3, 29.2, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[397] = CreateDynamicObject(2938, -1588.7, 867.3, 29.2, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[398] = CreateDynamicObject(2938, -1599.8, 867.3, 34.6, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[399] = CreateDynamicObject(2938, -1588.7, 867.3, 34.6, 0.0, 0.0, 270.0, _, _, _, 7.0);

    MapFixObjects[400] = CreateDynamicObject(2938, 2482.9, 2358.7, 15.1, 0.0, 90.0, 90.0, _, _, _, 7.0);
    MapFixObjects[401] = CreateDynamicObject(2938, 2482.9, 2353.3, 15.1, 0.0, 90.0, 90.0, _, _, _, 7.0);
    MapFixObjects[402] = CreateDynamicObject(2938, 2494.8, 2358.7, 15.1, 0.0, 90.0, 90.0, _, _, _, 7.0);
    MapFixObjects[403] = CreateDynamicObject(2938, 2494.8, 2353.3, 15.1, 0.0, 90.0, 90.0, _, _, _, 7.0);

    MapFixObjects[404] = CreateDynamicObject(3117, -2553.4, 1181.4, 43.9, 86.0, 60.0, 10.0, _, _, _, 3.0);

    MapFixObjects[405] = CreateDynamicObject(19362, 1209.8636, -16.1376, 1001.9523, 0.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[405], 0, 0, "none", "none", 0);
    MapFixObjects[406] = CreateDynamicObject(19362, 1211.3809, -17.6581, 1001.9523, 0.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[406], 0, 0, "none", "none", 0);

    MapFixObjects[407] = CreateDynamicObject(3055, 2317.9, -1026.0, 1053.3, 270.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[408] = CreateDynamicObject(3117, 161.3, -22.3, 7.3, 90.0, 90.0, 0.0, _, _, _, 3.0);

    MapFixObjects[409] = CreateDynamicObject(3037, 958.7, -1550.1, 20.3, 0.0, 0.0, 0.0, _, _, _, 6.0);
    MapFixObjects[410] = CreateDynamicObject(3037, 958.7, -1557.2, 20.3, 0.0, 0.0, 0.0, _, _, _, 6.0);

    MapFixObjects[411] = CreateDynamicObject(3117, -2008.9, -1038.0, 56.5, 0.0, 0.0, 10.0, _, _, _, 3.0);

    MapFixObjects[412] = CreateDynamicObject(3037, 858.2, -614.0, 27.2, 0.0, 0.0, 90.0, _, _, _, 6.0);
    MapFixObjects[413] = CreateDynamicObject(3037, 864.6, -614.0, 27.2, 0.0, 0.0, 90.0, _, _, _, 6.0);

    MapFixObjects[414] = CreateDynamicObject(2957, 953.0, -994.4, 40.9, 90.0, 0.0, 270.6, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[414], 0, 0, "none", "none", 0);
    MapFixObjects[415] = CreateDynamicObject(2957, 952.96, -990.5, 40.9, 90.0, 0.0, 270.6, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[415], 0, 0, "none", "none", 0);

    MapFixObjects[416] = CreateDynamicObject(3084, -1911.9, 750.1, 102.0, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[417] = CreateDynamicObject(3084, -1911.9, 762.5, 102.0, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[418] = CreateDynamicObject(3084, -1911.9, 774.9, 102.0, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[419] = CreateDynamicObject(3084, -1911.9, 783.4, 102.0, 0.0, 0.0, 90.0, _, _, _, 7.0);
    MapFixObjects[420] = CreateDynamicObject(3084, -1918.0, 789.6, 102.0, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[421] = CreateDynamicObject(3084, -1930.4, 789.6, 102.0, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[422] = CreateDynamicObject(3084, -1942.8, 789.6, 102.0, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[423] = CreateDynamicObject(3084, -1948.4, 789.6, 102.0, 0.0, 0.0, 0.0, _, _, _, 7.0);
    MapFixObjects[424] = CreateDynamicObject(3084, -1918.0, 743.8, 102.0, 0.0, 0.0, 180.0, _, _, _, 7.0);
    MapFixObjects[425] = CreateDynamicObject(3084, -1930.4, 743.8, 102.0, 0.0, 0.0, 180.0, _, _, _, 7.0);
    MapFixObjects[426] = CreateDynamicObject(3084, -1942.8, 743.8, 102.0, 0.0, 0.0, 180.0, _, _, _, 7.0);
    MapFixObjects[427] = CreateDynamicObject(3084, -1948.4, 743.8, 102.0, 0.0, 0.0, 180.0, _, _, _, 7.0);
    MapFixObjects[428] = CreateDynamicObject(3084, -1954.5, 750.1, 102.0, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[429] = CreateDynamicObject(3084, -1954.5, 762.5, 102.0, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[430] = CreateDynamicObject(3084, -1954.5, 774.9, 102.0, 0.0, 0.0, 270.0, _, _, _, 7.0);
    MapFixObjects[431] = CreateDynamicObject(3084, -1954.5, 783.4, 102.0, 0.0, 0.0, 270.0, _, _, _, 7.0);

    MapFixObjects[432] = CreateDynamicObject(3037, 1054.3, -940.3, 44.3, 0.0, 270.0, 77.5, _, _, _, 6.0);
    MapFixObjects[433] = CreateDynamicObject(3037, 1062.2, -939.1, 44.3, 0.0, 270.0, 300.0, _, _, _, 6.0);
    MapFixObjects[434] = CreateDynamicObject(3084, 1036.4, -942.6, 44.0, 90.0, 0.0, 8.5, _, _, _, 7.0);
    MapFixObjects[435] = CreateDynamicObject(2957, 1046.6, -941.1, 44.3, 90.0, 0.0, 8.5, _, _, _, 3.0);

    MapFixObjects[436] = CreateDynamicObject(2938, -1479.5, 696.9, -33.0, 0.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[436], 0, 0, "none", "none", 0);
    MapFixObjects[437] = CreateDynamicObject(2938, -1479.5, 708.2, -33.0, 0.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[437], 0, 0, "none", "none", 0);
    MapFixObjects[438] = CreateDynamicObject(2938, -1479.5, 690.2, -33.0, 0.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[438], 0, 0, "none", "none", 0);
    MapFixObjects[439] = CreateDynamicObject(2938, -1485.4, 684.3, -33.0, 0.0, 0.0, 270.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[439], 0, 0, "none", "none", 0);

    MapFixObjects[440] = CreateDynamicObject(3117, 1519.1, 1911.6, 14.0, 14.5, 90.0, 0.0, _, _, _, 3.0);
    MapFixObjects[441] = CreateDynamicObject(3117, 1652.1, 1911.6, 14.0, 14.5, 90.0, 0.0, _, _, _, 3.0);

    MapFixObjects[442] = CreateDynamicObject(19426, 617.2022, -1124.6236, 47.2562, 0.0, 0.0, 31.6442, _, _, _, 150.0);
    SetDynamicObjectMaterial(MapFixObjects[442], 0, 13699, "cunte2_lahills", "hedge2", 0);

    MapFixObjects[443] = CreateDynamicObject(2938, 1318.5, 353.9, 18.4, 0.0, 270.0, 66.0, _, _, _, 7.0);
    MapFixObjects[444] = CreateDynamicObject(2938, 1307.6, 358.7, 18.4, 0.0, 270.0, 66.0, _, _, _, 7.0);
    MapFixObjects[445] = CreateDynamicObject(2938, 1301.6, 361.4, 18.4, 0.0, 270.0, 66.0, _, _, _, 7.0);

    MapFixObjects[446] = CreateDynamicObject(2938, 445.4595, 511.5701, 1003.7977, 0.0, 90.0, 0.0, _, _, _, 9.0);
    SetDynamicObjectMaterial(MapFixObjects[446], 0, 0, "none", "none", 0);
    MapFixObjects[447] = CreateDynamicObject(2938, 450.7594, 511.5701, 1003.7977, 0.0, 90.0, 0.0, _, _, _, 9.0);
    SetDynamicObjectMaterial(MapFixObjects[447], 0, 0, "none", "none", 0);
    MapFixObjects[448] = CreateDynamicObject(2957, 456.1647, 513.8776, 1003.7949, 90.0, 0.0, 90.0, _, _, _, 3.0);
    MapFixObjects[449] = CreateDynamicObject(2957, 454.3006, 513.8814, 1003.8049, 90.0, 0.0, 90.0, _, _, _, 3.0);
    MapFixObjects[450] = CreateDynamicObject(2904, 453.1383, 513.4265, 1004.3114, 0.0, 90.0, 90.0, _, _, _, 3.0);
    MapFixObjects[451] = CreateDynamicObject(2957, 455.4764, 511.4462, 1002.1149, 0.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[452] = CreateDynamicObject(3117, 453.0726, 515.1799, 1001.9401, 0.0, 90.0, 0.0, _, _, _, 4.0);
    MapFixObjects[453] = CreateDynamicObject(3117, 453.1283, 511.2336, 1001.9401, 0.0, 90.0, 0.0, _, _, _, 4.0);
    MapFixObjects[454] = CreateDynamicObject(3037, 452.8891, 507.164, 1001.6256, 0.0, 0.0, 0.0, _, _, _, 8.0);
    SetDynamicObjectMaterial(MapFixObjects[454], 0, 0, "none", "none", 0);
    MapFixObjects[455] = CreateDynamicObject(3117, 442.3696, 509.1084, 1001.9041, 0.0, 90.0, 0.0, _, _, _, 4.0);

    MapFixObjects[456] = CreateDynamicObject(19374, -563.356, -181.631, 79.983, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[457] = CreateDynamicObject(19374, -572.3, -176.617, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[458] = CreateDynamicObject(19374, -572.3, -177.9, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[459] = CreateDynamicObject(19374, -568.8, -176.617, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[460] = CreateDynamicObject(19374, -568.8, -177.9, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[461] = CreateDynamicObject(19374, -565.3, -176.617, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[462] = CreateDynamicObject(19374, -565.3, -177.9, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[463] = CreateDynamicObject(19374, -562.915, -176.617, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[464] = CreateDynamicObject(19374, -562.915, -177.9, 80.23, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[465] = CreateDynamicObject(19374, -537.33, -98.473, 64.867, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[466] = CreateDynamicObject(19374, -528.4, -101.95, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[467] = CreateDynamicObject(19374, -528.4, -103.7, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[468] = CreateDynamicObject(19374, -531.9, -103.6, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[469] = CreateDynamicObject(19374, -531.9, -101.95, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[470] = CreateDynamicObject(19374, -535.4, -103.6, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[471] = CreateDynamicObject(19374, -537.75, -103.6, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[472] = CreateDynamicObject(19374, -537.75, -101.95, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[473] = CreateDynamicObject(19374, -535.4, -101.95, 65.0, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[474] = CreateDynamicObject(19374, 2355.8, -648.51, 129.636, 0.0, 90.0, 0.0, _, _, _, 13.0);
    MapFixObjects[475] = CreateDynamicObject(19374, 2352.2, -657.6, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[476] = CreateDynamicObject(19374, 2350.94, -657.6, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[477] = CreateDynamicObject(19374, 2350.94, -654.2, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[478] = CreateDynamicObject(19374, 2350.94, -650.7, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[479] = CreateDynamicObject(19374, 2350.94, -648.0, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[480] = CreateDynamicObject(19374, 2352.2, -648.0, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[481] = CreateDynamicObject(19374, 2352.2, -650.7, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);
    MapFixObjects[482] = CreateDynamicObject(19374, 2352.2, -654.2, 129.763, 0.0, 90.0, 270.0, _, _, _, 13.0);

    MapFixObjects[483] = CreateDynamicObject(19368, 2159.43, 2821.227, 11.2046, 0.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[483], 0, 0, "none", "none", 0);
    MapFixObjects[484] = CreateDynamicObject(19368, 2159.43, 2820.4243, 11.2046, 0.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[484], 0, 0, "none", "none", 0);

    MapFixObjects[485] = CreateDynamicObject(3055, 960.7, 2103.3, 1015.9, 0.0, 0.0, 0.0, _, _, _, 5.0);

    MapFixObjects[486] = CreateDynamicObject(3117, 2329.7, 3.0, 30.4, 35.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[486], 0, 0, "none", "none", 0);
    MapFixObjects[487] = CreateDynamicObject(3117, 2329.7, 4.5, 30.4, 35.0, 0.0, 180.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[487], 0, 0, "none", "none", 0);
    MapFixObjects[488] = CreateDynamicObject(3117, 2329.7, -0.4, 30.4, 35.0, 0.0, 180.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[488], 0, 0, "none", "none", 0);
    MapFixObjects[489] = CreateDynamicObject(3117, 2329.7, -1.9, 30.4, 35.0, 0.0, 0.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[489], 0, 0, "none", "none", 0);

    MapFixObjects[490] = CreateDynamicObject(3117, 2333.8, 51.8, 30.0, 0.0, 90.0, 0.0, _, _, _, 3.0);
    MapFixObjects[491] = CreateDynamicObject(3117, 2332.1, 51.8, 28.3, 0.0, 0.0, 0.0, _, _, _, 3.0);

    MapFixObjects[492] = CreateDynamicObject(3084, 2498.1, -2018.8, 12.4, 270.0, 0.0, 0.0, _, _, _, 17.0);

    MapFixObjects[493] = CreateDynamicObject(3055, 189.5, 175.1, 1002.0, 90.0, 0.0, 0.0, _, _, _, 5.0);
    MapFixObjects[494] = CreateDynamicObject(3055, 187.8, 175.4, 1003.0, 0.0, 0.0, 270.0, _, _, _, 5.0);
    MapFixObjects[495] = CreateDynamicObject(3055, 191.5, 173.2, 1003.0, 0.0, 0.0, 270.0, _, _, _, 5.0);

    MapFixObjects[496] = CreateDynamicObject(3117, 2235.5, -1105.18, 1052.9, 270.0, 0.0, 90.0, _, _, _, 13.0);
    SetDynamicObjectMaterial(MapFixObjects[496], 0, 0, "none", "none", 0);

    MapFixObjects[497] = CreateDynamicObject(2938, 608.9, -76.5, 998.7, 0.0, 0.0, 0.0, _, _, _, 17.0);
    SetDynamicObjectMaterial(MapFixObjects[497], 0, 0, "none", "none", 0);

    MapFixObjects[498] = CreateDynamicObject(696, -2362.8, -1963.3, 295.7, 0.0, 0.0, 0.0, _, _, _, 40.0);
    SetDynamicObjectMaterial(MapFixObjects[498], 0, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[498], 1, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[498], 2, 0, "none", "none", 0);
    MapFixObjects[499] = CreateDynamicObject(696, -2398.6, -1928.2, 300.9, 0.0, 0.0, 0.0, _, _, _, 40.0);
    SetDynamicObjectMaterial(MapFixObjects[499], 0, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[499], 1, 0, "none", "none", 0);
    SetDynamicObjectMaterial(MapFixObjects[499], 2, 0, "none", "none", 0);
    
	//Pickups
	AddTP(1318,19,1480.8917,-1771.2828,18.7958,0.0000,390.6025,173.8701,1008.3828,89.8317,0,0,3,1,"政府大楼", GPS_FUNCTION, 0, TP_GOV);
    AddTP(1318,30,-1605.4716,710.9096,13.8672,359.0112,246.3270,107.8555,1003.2188,2.2409,0,0,10,1,"圣费耶洛警局(SFPD)", GPS_FUNCTION, 0, TP_POLICE);//SF
    AddTP(1318,30,1555.1855,-1675.1406,16.1953,89.0878,246.7192,62.6289,1003.6406,3.8901,0,0,6,1,"洛圣都警局(LSPD)", GPS_FUNCTION, 0, TP_POLICE);//LS
    AddTP(1318,30,2337.1094,2459.0713,14.9742,180.2159,288.8250,167.5320,1007.1719,357.8542,0,0,3,1,"拉斯维托拉斯警局(LVPD)", GPS_FUNCTION, 0, TP_POLICE);//LV
    AddTP(1318,-1,2287.1873,2432.1628,10.8203,181.0095,238.7582,138.8579,1003.0234,0.6508,0,0,3,1,"拉斯维托拉斯警局(LVPD)", GPS_FUNCTION, 0, TP_POLICE);//LV
    AddTP(1318,22,1172.3267,-1325.3698,15.4070,270.8699,-45.3522,158.0721,999.0613,181.4110,0,0,1,1,"洛圣都医院(LSHP)", GPS_FUNCTION, 0, TP_MEDIC);
    AddTP(1318,22,-2655.1699,639.5565,14.4545,180.6229,-45.3522,158.0721,999.0613,181.4110,0,0,1,2,"圣费耶洛医院(SFHP)", GPS_FUNCTION, 0, TP_MEDIC);
    AddTP(1318,22,1607.3528,1815.9912,10.8203,2.3378,-45.3522,158.0721,999.0613,181.4110,0,0,1,3,"拉斯维托拉斯医院(LVHP)", GPS_FUNCTION, 0, TP_MEDIC);
	AddTP(1318,36,-2026.6594,-101.9126,35.1641,3.1298,-2026.8043,-103.8442,1035.1719,185.5413,0,0,3,1,"辅导站", GPS_FUNCTION, 0, TP_COUNSELOR);
    AddTP(1318,-1,-2029.6686,-120.7592,35.1719,181.4907,-2029.7649,-119.2578,1035.1719,3.6613,0,0,3,1,"辅导站", GPS_NONE, 0, TP_COUNSELOR);
    AddTP(1318,36,1111.6846,-1800.9757,16.5938,89.1905,1494.5767,1303.7783,1093.2891,358.3721,0,0,3,1,"辅导站", GPS_FUNCTION, 0, TP_COUNSELOR);
 	AddTP(1318,55,1947.3882,2068.7542,10.8203,90.4735, 1292.6144,5.9638,1001.0078,183.0530, 0,0, 18,1, "卖车场(LV第一车场)", GPS_VEH);//LV
	AddTP(1318,52,-2510.9656,-49.8715,25.6838,273.9170,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,2,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1833.5836,-1841.9702,13.5781,92.3636,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,1,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1133.7178,-1270.8750,13.5469,183.4556,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,3,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1352.3739,-1758.9038,13.5078,359.5304,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,4,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,752.3647,-1791.5502,13.0234,353.6882,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,5,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1000.5945,-919.9540,42.3281,103.4370,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,6,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1315.4473,-897.7256,39.5781,174.9445,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,7,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-2571.2976,246.7991,10.4479,223.0801,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,8,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-2518.6299,2318.7415,4.9844,359.1181,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,9,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-314.1392,1774.8164,43.6406,119.9741,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,10,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-180.3513,1163.3782,19.7422,85.8729,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,11,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,171.9489,-200.7634,1.5703,225.2501,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,12,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-2231.4036,-2558.1750,31.9219,52.2546,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,13,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-2103.9929,-2431.6987,30.6250,146.8135,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,14,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2194.6575,1991.1431,12.2969,89.5121,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,15,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2452.5132,2064.9470,10.8203,178.3988,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,16,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2097.5969,2224.4807,11.0234,178.7352,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,17,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2247.7515,2396.3765,10.8203,358.7942,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,18,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2546.4224,1972.3763,10.8203,169.9281,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,19,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,2884.7288,2453.9285,11.0690,224.8109,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,20,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,1937.5632,2307.3523,10.8203,89.1827,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,21,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,662.6285,1716.7411,7.1875,44.3001,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,22,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-1968.5435,110.1996,27.6875,356.5348,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,23,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-1562.3582,-2733.3965,48.7435,234.8995,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,24,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-746.5781,1589.8896,26.9680,136.8362,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,25,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,937.7104,1733.2980,8.8516,274.3247,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,26,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,52,-553.6217,2593.8789,53.9348,269.5740,-30.9906,-91.7395,1003.5469,1.7293,0,0,18,27,"便利商店(247)", GPS_SHOP, 0, TP_247);
	AddTP(1318,6,-2625.8433,208.6076,4.6164,358.7844,286.1724,-41.7994,1001.5156,2.2544,0,0,1,1,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,1368.2446,-1279.1144,13.5469,95.3666,286.1724,-41.7994,1001.5156,2.2544,0,0,1,2,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,-1508.9449,2610.6919,55.8359,175.3266,286.1724,-41.7994,1001.5156,2.2544,0,0,1,3,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,-316.1464,829.7401,14.2422,261.1095,286.1724,-41.7994,1001.5156,2.2544,0,0,1,4,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,243.2915,-178.2815,1.5822,91.8287,286.1724,-41.7994,1001.5156,2.2544,0,0,1,5,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,-2093.6846,-2464.8816,30.6250,319.4619,286.1724,-41.7994,1001.5156,2.2544,0,0,1,6,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,2539.5403,2083.9434,10.8203,91.4607,286.1724,-41.7994,1001.5156,2.2544,0,0,1,7,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,2159.3225,943.2789,10.8203,92.1698,286.1724,-41.7994,1001.5156,2.2544,0,0,1,8,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,2400.5837,-1981.8534,13.5469,356.3159,286.1724,-41.7994,1001.5156,2.2544,0,0,1,9,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,2333.4114,61.5090,26.7058,268.4716,286.1724,-41.7994,1001.5156,2.2544,0,0,1,10,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,6,777.0411,1871.2499,4.9056,270.2720,286.1724,-41.7994,1001.5156,2.2544,0,0,1,11,"武装国度", GPS_SHOP, 0, TP_AMMU);
	AddTP(1318,14,-1817.4921,618.6890,35.1719,183.6858,365.7983,-11.8379,1001.8516,354.4442,0,0,9,1,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,172.2408,1177.4281,14.7578,144.3656,365.7983,-11.8379,1001.8516,354.4442,0,0,9,2,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2398.4563,-1899.1969,13.5469,3.6240,365.7983,-11.8379,1001.8516,354.4442,0,0,9,3,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,928.9138,-1352.7637,13.3438,88.8082,365.7983,-11.8379,1001.8516,354.4442,0,0,9,4,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,-1213.7134,1830.2717,41.9297,317.5383,365.7983,-11.8379,1001.8516,354.4442,0,0,9,5,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,-2155.3738,-2460.2651,30.8516,225.0035,365.7983,-11.8379,1001.8516,354.4442,0,0,9,6,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2393.2114,2041.7307,10.8203,1.3872,365.7983,-11.8379,1001.8516,354.4442,0,0,9,7,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2102.1077,2228.8960,11.0234,263.3360,365.7983,-11.8379,1001.8516,354.4442,0,0,9,8,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2838.2593,2407.4604,11.0690,227.3176,365.7983,-11.8379,1001.8516,354.4442,0,0,9,9,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2638.1616,1671.9794,11.0234,88.6489,365.7983,-11.8379,1001.8516,354.4442,0,0,9,10,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,-2671.3718,257.9290,4.6328,2.8577,365.7983,-11.8379,1001.8516,354.4442,0,0,9,11,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,14,2419.9773,-1509.5184,24.0000,270.3405,365.7983,-11.8379,1001.8516,354.4442,0,0,9,12,"炸鸡店", GPS_SHOP, 0, TP_CLUCKIN);
	AddTP(1318,10,-1912.2981,827.8093,35.2174,327.1114,362.9043,-75.1984,1001.5078,313.3738,0,0,10,1,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,-2355.8325,1008.0322,50.8984,94.5754,362.9043,-75.1984,1001.5078,313.3738,0,0,10,2,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,1199.2303,-918.1500,43.1233,186.3854,362.9043,-75.1984,1001.5078,313.3738,0,0,10,3,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,810.4875,-1616.1212,13.5469,269.2929,362.9043,-75.1984,1001.5078,313.3738,0,0,10,4,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,1872.4841,2071.9924,11.0625,268.3319,362.9043,-75.1984,1001.5078,313.3738,0,0,10,5,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,2472.8484,2034.3344,11.0625,84.8795,362.9043,-75.1984,1001.5078,313.3738,0,0,10,6,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,2366.8079,2071.1763,10.8203,85.9096,362.9043,-75.1984,1001.5078,313.3738,0,0,10,7,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,1158.1573,2072.0693,11.0625,273.6539,362.9043,-75.1984,1001.5078,313.3738,0,0,10,8,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,2169.9473,2795.7891,10.8203,263.2741,362.9043,-75.1984,1001.5078,313.3738,0,0,10,9,"汉堡店", GPS_SHOP, 0, TP_BURGER);
	AddTP(1318,10,-2336.8650,-166.8540,35.5547,271.5497,362.9043,-75.1984,1001.5078,313.3738,0,0,10,10,"汉堡店", GPS_SHOP, 0, TP_BURGER);
    AddTP(1318,29,2105.1387,-1806.5140,13.5547,94.2242,372.2971,-133.5202,1001.4922,2.3597,0,0,5,1,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,-1720.9622,1359.7781,7.1853,101.5740,372.2971,-133.5202,1001.4922,2.3597,0,0,5,2,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,203.2798,-201.9697,1.5781,182.5361,372.2971,-133.5202,1001.4922,2.3597,0,0,5,3,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,2083.3806,2224.4963,11.0234,179.0487,372.2971,-133.5202,1001.4922,2.3597,0,0,5,4,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,2756.6667,2477.1775,11.0625,130.8099,372.2971,-133.5202,1001.4922,2.3597,0,0,5,5,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,2638.5598,1849.8649,11.0234,89.2859,372.2971,-133.5202,1001.4922,2.3597,0,0,5,6,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,1367.2539,248.4668,19.5669,66.3176,372.2971,-133.5202,1001.4922,2.3597,0,0,5,7,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,-1808.7297,945.8973,24.8906,226.6851,372.2971,-133.5202,1001.4922,2.3597,0,0,5,8,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,29,2332.0852,74.9478,26.6210,270.0658,372.2971,-133.5202,1001.4922,2.3597,0,0,5,9,"披萨店", GPS_SHOP, 0, TP_PIZZA);
    AddTP(1318,16,1038.1388,-1340.4019,13.7411,1.8130,377.1740,-193.0454,1000.6401,356.8960,0,0,17,1,"甜甜圈店", GPS_SHOP, 0, TP_DONUT);
    AddTP(1318,16,-143.9931,1225.0195,19.8992,179.0229,377.1740,-193.0454,1000.6401,356.8960,0,0,17,2,"甜甜圈店", GPS_SHOP, 0, TP_DONUT);
    AddTP(1318,16,-2767.0618,788.6141,52.7813,267.5249,377.1740,-193.0454,1000.6401,356.8960,0,0,17,3,"甜甜圈店", GPS_SHOP, 0, TP_DONUT);
    AddTP(1318,45,2090.4631,2224.3403,11.0234,182.4953,161.5384,-97.0825,1001.8047,2.5281,0,0,18,1,"ZIP服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,2572.0481,1904.7588,11.0234,179.5877,161.5384,-97.0825,1001.8047,2.5281,0,0,18,2,"ZIP服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,1456.7340,-1137.6560,23.9546,216.2086,161.5384,-97.0825,1001.8047,2.5281,0,0,18,3,"ZIP服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,-1882.2795,866.5010,35.1719,145.3996,161.5384,-97.0825,1001.8047,2.5281,0,0,18,4,"ZIP服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,-2374.1040,910.0994,45.4348,90.9924,207.7455,-111.2474,1005.1328,358.2368,0,0,15,1,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,-2522.4587,2340.7925,4.9844,184.9571,207.7455,-111.2474,1005.1328,358.2368,0,0,15,2,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,-2192.0361,-2348.8840,30.6250,224.3430,207.7455,-111.2474,1005.1328,358.2368,0,0,15,3,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,2102.0977,2257.4832,11.0234,268.6627,207.7455,-111.2474,1005.1328,358.2368,0,0,15,4,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,1656.8333,1733.3491,10.8281,89.8298,207.7455,-111.2474,1005.1328,358.2368,0,0,15,5,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,2244.4280,-1665.5531,15.4766,343.7053,207.7455,-111.2474,1005.1328,358.2368,0,0,15,6,"Binco服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,461.6011,-1500.2827,31.0517,107.8859,227.3924,-8.2459,1002.2109,92.1629,0,0,5,1,"VICTIM服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,2802.6851,2430.6086,11.0625,130.1831,227.3924,-8.2459,1002.2109,92.1629,0,0,5,2,"VICTIM服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,-1694.5903,951.9187,24.8906,145.2617,227.3924,-8.2459,1002.2109,92.1629,0,0,5,3,"VICTIM服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,45,454.1837,-1477.9352,30.8124,109.9343,204.5768,-168.8513,1000.5234,355.5516,0,0,14,1,"Didier Sach服饰店", GPS_SHOP, 0, TP_SKIN);
    AddTP(1318,59,1087.7891,-922.9240,43.3906,185.7147,-100.4956,-24.8661,1000.7188,358.9516,0,0,3,1,"情趣用品店", GPS_SHOP);
    AddTP(1318,59,2085.3669,2074.0549,11.0547,270.2903,-100.4956,-24.8661,1000.7188,358.9516,0,0,3,2,"情趣用品店", GPS_SHOP);
    AddTP(1318,59,2420.2817,2064.9333,10.8203,176.8555,-100.4956,-24.8661,1000.7188,358.9516,0,0,3,3,"情趣用品店", GPS_SHOP);
    AddTP(1318,59,-2201.7539,198.7180,35.3203,2.2760,-100.4956,-24.8661,1000.7188,358.9516,0,0,3,4,"情趣用品店", GPS_SHOP);
    AddTP(1318,-1,1572.6353,-1336.9648,16.4844,316.5366,1548.6143,-1363.9111,326.2183,183.5136,0,0,0,1,"花园银行顶楼", GPS_SPOT);
    AddTP(1318,52,1086.4407,-1270.9691,13.5469,181.2978,1214.9785,1220.6090,510.0352,1.3385,0,0,3,1,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,1158.0959,-1473.9276,15.7969,109.8186,1214.9785,1220.6090,510.0352,1.3385,0,0,3,2,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,797.5347,-1578.6559,13.5469,172.2727,1214.9785,1220.6090,510.0352,1.3385,0,0,3,3,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,2411.7000,-1454.7531,24.0037,2.2606,1214.9785,1220.6090,510.0352,1.3385,0,0,3,4,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,1681.1530,1722.6295,10.8203,179.9618,1214.9785,1220.6090,510.0352,1.3385,0,0,3,5,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,2436.7800,1172.7080,10.8203,93.4088,1214.9785,1220.6090,510.0352,1.3385,0,0,3,6,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,1936.3783,2319.1421,10.8203,88.6498,1214.9785,1220.6090,510.0352,1.3385,0,0,3,7,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,-2016.5640,-29.0985,35.2287,272.6969,1214.9785,1220.6090,510.0352,1.3385,0,0,3,8,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,52,-1880.9331,822.6065,35.1775,46.8558,1214.9785,1220.6090,510.0352,1.3385,0,0,3,9,"电子用品商店", GPS_SHOP, 0, TP_3C);
    AddTP(1318,36,1411.9146,-1700.0775,13.5395,235.8235,576.5410,566.3914,892.0369,180.6259,0,0,3,1,"理工学院", GPS_COLLEGE, 0, TP_COLLEGE);//LS
    AddTP(1318,36,2474.6289,1024.0081,10.8203,179.3387,576.5410,566.3914,892.0369,180.6259,0,0,3,2,"理工学院", GPS_COLLEGE, 0, TP_COLLEGE);//LV
    AddTP(1318,36,1310.1494,-1367.4855,13.5357,184.0946,576.5410,566.3914,892.0369,180.6259,0,0,3,3,"文学院", GPS_COLLEGE, 0, TP_COLLEGE);//LS
    AddTP(1318,36,-2351.2493,492.8686,30.8128,59.6841,576.5410,566.3914,892.0369,180.6259,0,0,3,4,"文学院", GPS_COLLEGE, 0, TP_COLLEGE);//SF
    AddTP(1318,36,-2665.2085,552.4033,14.6094,1.5783,576.5410,566.3914,892.0369,180.6259,0,0,3,5,"医学院", GPS_COLLEGE, 0, TP_COLLEGE);//SF
    AddTP(1318,36,1583.6019,1769.0289,10.8203,93.6854,576.5410,566.3914,892.0369,180.6259,0,0,3,6,"医学院", GPS_COLLEGE, 0, TP_COLLEGE);//LV
    AddTP(1318,52,2424.1069,-1742.6525,13.5443,44.3834,461.6896,945.4170,597.8126,358.8311,0,0,4,1,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,1152.7515,-1513.2970,15.7969,43.3423,461.6896,945.4170,597.8126,358.8311,0,0,4,2,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,371.3129,-1637.4276,32.8906,174.5596,461.6896,945.4170,597.8126,358.8311,0,0,4,3,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,-2431.0691,-93.6724,35.3203,271.4566,461.6896,945.4170,597.8126,358.8311,0,0,4,4,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,-1620.5225,1162.6561,7.1875,311.1132,461.6896,945.4170,597.8126,358.8311,0,0,4,5,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,1941.9318,2184.7983,10.8203,86.7804,461.6896,945.4170,597.8126,358.8311,0,0,4,6,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,52,2537.7527,1135.7847,10.8203,93.8744,461.6896,945.4170,597.8126,358.8311,0,0,4,7,"工具行", GPS_SHOP, 0, TP_TOOL);
    AddTP(1318,54,2229.6814,-1721.4465,13.5630,131.4141,772.3093,-5.2935,1000.7286,357.5031,0,0,5,1,"健身房", GPS_SHOP);//LS
    AddTP(1318,54,-2270.6458,-156.1351,35.3203,269.2731,774.2214,-50.2731,1000.5859,2.2031,0,0,6,1,"健身房", GPS_SHOP);//SF
    AddTP(1318,54,1968.6261,2295.2759,16.4559,182.1939,773.8481,-78.6076,1000.6625,0.9498,0,0,7,1,"健身房", GPS_SHOP);//LV
    AddTP(1318,49,2309.9209,-1643.6471,14.8270,132.9776,501.9662,-67.8162,998.7578,180.6047,0,0,11,1,"酒吧", GPS_SHOP);
    AddTP(1318,49,-2242.4375,-88.0367,35.3203,89.4640,501.9662,-67.8162,998.7578,180.6047,0,0,11,2,"酒吧", GPS_SHOP);
    AddTP(1318,49,2441.1506,2065.2483,10.8203,178.6902,501.9662,-67.8162,998.7578,180.6047,0,0,11,3,"酒吧", GPS_SHOP);
    AddTP(1318,49,273.1946,-158.1724,1.7405,270.1377,501.9662,-67.8162,998.7578,180.6047,0,0,11,4,"酒吧", GPS_SHOP);
    AddTP(1318,49,2421.4990,-1219.5168,25.5441,182.4827,1204.7175,-13.6485,1000.9219,1.3978,0,0,2,1,"脱衣舞厅", GPS_SHOP);
    AddTP(1318,49,2506.9214,2120.4988,10.8399,358.6519,1204.7175,-13.6485,1000.9219,1.3978,0,0,2,2,"脱衣舞厅", GPS_SHOP);
    AddTP(1318,49,693.6063,1967.2260,5.5391,193.0104,1204.7175,-13.6485,1000.9219,1.3978,0,0,2,3,"脱衣舞厅", GPS_SHOP);
    AddTP(1318,48,1835.7241,-1682.2313,13.3778,90.6510,493.5075,-23.9331,1000.6797,358.8268,0,0,17,1,"夜店", GPS_SHOP);
    AddTP(1318,48,-2551.9688,193.4716,6.1591,110.1486,493.5075,-23.9331,1000.6797,358.8268,0,0,17,2,"夜店", GPS_SHOP);
    AddTP(1318,48,2507.5605,1242.6807,10.8203,359.0165,493.5075,-23.9331,1000.6797,358.8268,0,0,17,3,"夜店", GPS_SHOP);
    AddTP(1318,52,-2241.9563,128.7070,35.3203,88.6531,-2240.7012,128.4077,1035.4141,268.3593,0,0,6,1,"Zero的遥控玩具商店", GPS_SHOP);
    AddTP(1318,-1,24.3266,319.3146,6.3080,152.1386,1780.2755,-1576.5698,1734.9430,90.4221,0,0,1,1,"州立监狱", GPS_FUNCTION, 0, TP_POLICE_ONLY);
    AddTP(1318,-1,27.7793,340.3039,6.4753,64.1269,1756.2550,-1574.7767,1734.9430,272.7831,0,0,1,1,"州立监狱", GPS_NONE, 0, TP_PRISON_ONLY);
    AddTP(1318,-1,1568.6407,-1690.4286,5.8906,179.4315,246.3531,87.7044,1003.6406,181.4461,0,0,6,1," ", GPS_NONE, 0, TP_POLICE_ONLY);
    AddTP(1318,-1,-1593.7949,716.1245,-5.2422,267.0157,214.1902,120.5168,999.0156,270.9275,0,0,10,1," ", GPS_NONE, 0, TP_POLICE_ONLY);
    AddTP(1318,-1,2296.8467,2468.7112,10.8203,88.1761,207.7341,142.0354,1003.0234,271.6227,0,0,3,1," ", GPS_NONE, 0, TP_POLICE_ONLY);
    AddTP(1318,33,-2110.3401,-442.5839,38.7344,90.2437,-1423.7568,928.7619,1036.3965,0.6085,0,0,15,1,"载具竞技场", GPS_NONE, 0, TP_ARENA_VEHICLE);
    AddTP(1318,33,2729.3657,-1828.1724,11.8438,167.4693,-1464.8048,1556.2618,1052.5313,358.0786,0,0,14,1,"玩家竞技场(禁用道具、技能)", GPS_NONE, 0, TP_ARENA_PLAYER1);
    AddTP(1318,33,1093.8772,1598.0930,12.5469,12.5362,-1464.8048,1556.2618,1052.5313,358.0786,0,0,14,2,"玩家竞技场(无限制)", GPS_NONE, 0, TP_ARENA_PLAYER2);
	AddTP(1318,52,1099.8063,-1507.0885,15.7969,291.9302,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,1,"家具行", GPS_SHOP);
	AddTP(1318,52,561.8191,-1506.6458,14.5486,91.2589,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,2,"家具行", GPS_SHOP);
	AddTP(1318,52,419.4261,-1428.5233,32.5009,123.6478,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,3,"家具行", GPS_SHOP);
	AddTP(1318,52,1679.8379,1762.4697,10.8290,178.3337,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,4,"家具行", GPS_SHOP);
	AddTP(1318,52,2303.7739,56.4259,26.4844,90.0560,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,5,"家具行", GPS_SHOP);
	AddTP(1318,52,801.8267,-573.9376,16.3359,94.0717,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,6,"家具行", GPS_SHOP);
	AddTP(1318,52,-145.7148,1172.6478,19.7422,359.4125,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,7,"家具行", GPS_SHOP);
	AddTP(1318,52,-2079.5547,-2448.1284,30.6250,141.9851,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,8,"家具行", GPS_SHOP);
	AddTP(1318,52,-2490.7178,29.4524,25.6172,43.8033,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,9,"家具行", GPS_SHOP);
	AddTP(1318,52,-2040.7375,554.0118,35.1719,358.9084,1243.8646,-1545.7371,2062.6479,273.1244,0,0,3,10,"家具行", GPS_SHOP);

    for(i = 0; i < sizeof(RepairGarage); i++)
	{
	    CreateDynamicMapIcon(RepairGarage[i][0], RepairGarage[i][1], RepairGarage[i][2], 27, -1, 0, 0, -1, 500);
	    CreateGPS("改装厂", RepairGarage[i][0], RepairGarage[i][1], RepairGarage[i][2], GPS_VEH);
	    CreateDynamic3DTextLabel(""#TEXT_FADEBLUE"【改装厂】"#TEXT_WHITE"\n在载具上按"#TEXT_YELLOW"Y键"#TEXT_WHITE"查看信息", COLOR_WHITE, RepairGarage[i][0], RepairGarage[i][1], RepairGarage[i][2], 30.0);
	}
    CreateDynamicMapIcon(1173.1499,1346.7777,10.9219, 36, -1, 0, 0, -1, 500);//LV辅导站
    CreateGPS("辅导站", 1173.1499,1346.7777,10.9219, GPS_VEH);

    CreateDynamicMapIcon(541.1967,-1292.4238,17.2422, 55, -1, 0, 0, -1, 500);//Grotti
    CreateDynamicMapIcon(-1949.3920,274.0265,35.4739, 55, -1, 0, 0, -1, 500);//WangCar
    CreateDynamicMapIcon(1949.9825,-2077.6687,13.5469, 55, -1, 0, 0, -1, 500);//LSMuscle
    CreateDynamicMapIcon(2130.5017,-1150.4733,24.1386, 55, -1, 0, 0, -1, 500);//Simeon
    CreateDynamicMapIcon(2187.5620,-1983.0994,13.5513, 51, -1, 0, 0, -1, 500);//LS垃圾
    CreateDynamicMapIcon(-1727.4344,-111.5905,3.5489, 51, -1, 0, 0, -1, 500);//SF垃圾
    CreateDynamicMapIcon(1064.4855,2341.8870,10.8203, 51, -1, 0, 0, -1, 500);//LV垃圾
    CreateDynamicMapIcon(1221.9841,-1812.0070,16.5938, 55, -1, 0, 0, -1, 500);//营业用车
    CreateDynamicMapIcon(-2718.6755,50.7528,4.3359, 55, -1, 0, 0, -1, 500);
    CreateDynamicMapIcon(2182.0183,1394.1066,11.0692, 55, -1, 0, 0, -1, 500);

	CreateGPS("洛圣都机场入口",1961.0814,-2184.0371,13.5469, GPS_FUNCTION);
	CreateGPS("圣费耶洛机场入口",-1548.8744,-433.8087,5.6760, GPS_FUNCTION);
	CreateGPS("拉斯维托拉斯机场入口",-1641.4653,-333.0077,14.6099, GPS_FUNCTION);
	CreateGPS("彩虹市集",-2521.4822,-21.9609,26.0703, GPS_SPOT);
	
	// -1710.1624,88.4026,3.5547 2307.4146,-2354.1321,13.4025

	CreateDynamic3DTextLabel(""#TEXT_YELLOW"SF货柜区"#TEXT_WHITE"\n挂载货柜后到此按"#TEXT_YELLOW"左Ctrl键"#TEXT_WHITE"载入货物", COLOR_WHITE, -1710.1624,88.4026,3.5547, 60.0);
	CreateGPS("SF货柜区",-1710.1624,88.4026,3.5547, GPS_JOB);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"LS货柜区"#TEXT_WHITE"\n挂载货柜后到此按"#TEXT_YELLOW"左Ctrl键"#TEXT_WHITE"载入货物", COLOR_WHITE, 2307.4146,-2354.1321,13.4025, 60.0);
	CreateGPS("LS货柜区",2307.4146,-2354.1321,13.4025, GPS_JOB);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"炼油厂"#TEXT_WHITE"\n挂载油罐后到此按"#TEXT_YELLOW"左Ctrl键"#TEXT_WHITE"补充油罐", COLOR_WHITE, -1015.9789,-685.3097,32.0078, 60.0);
	CreateGPS("炼油厂",-1015.9789,-685.3097,32.0078, GPS_JOB);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"炼油厂"#TEXT_WHITE"\n挂载油罐后到此按"#TEXT_YELLOW"左Ctrl键"#TEXT_WHITE"补充油罐", COLOR_WHITE, 253.3087,1396.6035,10.5859, 60.0);
	CreateGPS("炼油厂",253.3087,1396.6035,10.5859, GPS_JOB);
	CreateDynamic3DTextLabel(""#TEXT_LIGHTRED"彩"#TEXT_YELLOW"虹"#TEXT_FADEGREEN"市"#TEXT_LIGHTBLUE"集"#TEXT_WHITE"", COLOR_WHITE, -2521.4822,-21.9609,26.0703, 40.0);
	CreateGPS("彩虹市集",-2521.4822,-21.9609,26.0703, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_FADEGREEN"【伐木林场】\n"#TEXT_YELLOW"**当心野生动物**", COLOR_WHITE, -2208.5813,-2218.6904,34.7920, 150.0);
	CreateGPS("伐木林场",-2208.5813,-2218.6904,34.7920, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_FADEGREEN"【伐木林场】\n"#TEXT_YELLOW"**当心野生动物**", COLOR_WHITE, -382.0172,-1379.2792,22.9732, 150.0);
	CreateGPS("伐木林场",-382.0172,-1379.2792,22.9732, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_FADEGREEN"【伐木林场】\n"#TEXT_YELLOW"**当心野生动物**", COLOR_WHITE, 1446.8733,-5.2484,27.7717, 150.0);
	CreateGPS("伐木林场",1446.8733,-5.2484,27.7717, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_FADEGREEN"【伐木林场】\n"#TEXT_YELLOW"**当心野生动物**", COLOR_WHITE, 1039.0759,320.3729,25.5238, 180.0);
	CreateGPS("伐木林场",1039.0759,320.3729,25.5238, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_FADEGREEN"【伐木林场】\n"#TEXT_YELLOW"**当心野生动物**", COLOR_WHITE, -1578.5658,2282.0403,54.6851, 180.0);
	CreateGPS("伐木林场",-1578.5658,2282.0403,54.6851, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_WHITE"【矿场】", COLOR_WHITE, 622.0218,864.9608,-43.2434, 90.0);
	CreateGPS("矿场",622.0218,864.9608,-43.2434, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_WHITE"【矿场】", COLOR_WHITE, 2098.2295,-1999.2432,13.2624, 90.0);
	CreateGPS("矿场",2098.2295,-1999.2432,13.2624, GPS_SPOT);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"撞球桌"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"回车键"#TEXT_WHITE"可以开始玩撞球", COLOR_WHITE, 510.2131,-81.4776,998.9609, 10.0);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"酒吧"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"Y键"#TEXT_WHITE"可以点饮品", COLOR_WHITE, 941.2548,4.1725,1000.9297, 10.0);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"酒吧"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"Y键"#TEXT_WHITE"可以点饮品", COLOR_WHITE, 968.1794,-46.3423,1001.1172, 10.0);
	CreateDynamic3DTextLabel(""#TEXT_YELLOW"酒吧"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"Y键"#TEXT_WHITE"可以点饮品", COLOR_WHITE, -784.9268,500.3991,1371.7422, 10.0);
	CreateDynamic3DTextLabel(""#TEXT_FADEBLUE"【监狱关押点】"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"Y键"#TEXT_WHITE"将车上的通缉犯移送入狱", COLOR_WHITE, -23.5938,340.2398,6.2882, 90.0);
	CreateDynamic3DTextLabel(""#TEXT_FADEBLUE"【监狱关押点】"#TEXT_WHITE"\n按"#TEXT_SKYBLUE"Y键"#TEXT_WHITE"将车上的通缉犯移送入狱", COLOR_WHITE, 1565.3040,-1618.5231,13.3653, 90.0);
	lakeinfo = CreateDynamic3DTextLabel("【梦月潭】", 0x87CEFAFF, -71.1711, -564.9479, 3.1326, 50.0);
	CreateGPS("梦月潭", -71.1711, -564.9479, 3.1326, GPS_SPOT);
	//Pickup
	curepick = CreateDynamicPickup(1240, 2, -21.8421,142.2023,999.0613, -1);
	for(i = 0; i < sizeof(TVPos); i++)
	{
		TVPick[i] = CreateDynamicPickup(19300, 2, TVPos[i][0], TVPos[i][1], TVPos[i][2], -1);
		SetGVarInt("TVPick", 1, TVPick[i]);
	}
	for(i = 0; i < sizeof(BedPos); i++)
	{
		BedPick[i] = CreateDynamicPickup(19300, 2, BedPos[i][0], BedPos[i][1], BedPos[i][2], -1);
		SetGVarInt("BedPick", 1, BedPick[i]);
	}
	for(i = 0; i < sizeof(StovePos); i++)
	{
		StovePick[i] = CreateDynamicPickup(19300, 2, StovePos[i][0], StovePos[i][1], StovePos[i][2], -1);
		SetGVarInt("StovePick", 1, StovePick[i]);
	}
	for(i = 0; i < sizeof(RadioPos); i++)
	{
		RadioPick[i] = CreateDynamicPickup(19300, 2, RadioPos[i][0], RadioPos[i][1], RadioPos[i][2], -1);
		SetGVarInt("RadioPick", 1, RadioPick[i]);
	}
	for(i = 0; i < sizeof(ChairPos); i++)
	{
		ChairPick[i] = CreateDynamicPickup(19300, 2, ChairPos[i][0], ChairPos[i][1], ChairPos[i][2], -1);
		SetGVarInt("ChairPick", 1, ChairPick[i]);
	}

	//Actors
	_CreateDynamicActor(0, 9999.0, 9999.0, 9999.0, 0.0);
	LVCarSellMan1 = _CreateDynamicActor(186,1291.4614,-50.5716,1001.0264,0.2039, true, 100.0, 1);
    LVMVClerk = _CreateDynamicActor(119,1173.1499,1346.7777,10.9219,1.2533, true, 100.0, 0);
    LSMVClerk = _CreateDynamicActor(141,1489.0398,1305.2799,1093.2964,268.5871, true, 100.0, 1);
	SFMVClerk = _CreateDynamicActor(192,-2034.6791,-117.9245,1035.1719,272.3731, true, 100.0, 1);

	GrottiClerk = _CreateDynamicActor(91,541.1967,-1292.4238,17.2422,359.8361, true, 100.0, 0);
	CreateGPS("卖车场(古罗帝)",541.1967,-1292.4238,17.2422, GPS_VEH);

	WangCarClerk = _CreateDynamicActor(268,-1949.3920,274.0265,35.4739,89.3656, true, 100.0, 0);
	CreateGPS("卖车场(王氏汽车)",-1949.3920,274.0265,35.4739, GPS_VEH);

	SFBikeClerk = _CreateDynamicActor(59,-2457.6655,776.0107,35.1719,89.1322, true, 100.0, 0);
	CreateGPS("卖车场(SF机车售场)",-2457.6655,776.0107,35.1719, GPS_VEH);

	BisVehClerk[0] = _CreateDynamicActor(98,1221.9841,-1812.0070,16.5938,178.9219, true, 100.0, 0);
	CreateGPS("卖车场(营业用车)",1221.9841,-1812.0070,16.5938, GPS_VEH);

	BisVehClerk[1] = _CreateDynamicActor(98,-1550.4579,1171.9889,7.1875,87.0322, true, 100.0, 0);
	CreateGPS("卖车场(营业用车)",-1550.4579,1171.9889,7.1875, GPS_VEH);

	BisVehClerk[2] = _CreateDynamicActor(98,2182.0183,1394.1066,11.0692,181.2785, true, 100.0, 0);
	CreateGPS("卖车场(营业用车)",2182.0183,1394.1066,11.0692, GPS_VEH);

	LSMuscleClerk = _CreateDynamicActor(30,1949.9825,-2077.6687,13.5469,178.9542, true, 100.0, 0);
	CreateGPS("卖车场(洛圣肌肉车)",1949.9825,-2077.6687,13.5469, GPS_VEH);

    SFCarSellMan1 = _CreateDynamicActor(186,-2242.5317,179.6074,35.3203,90.7002, true, 100.0, 0);
    CreateGPS("卖车场(SF第一车场)",-2242.5317,179.6074,35.3203, GPS_VEH);

	LSTrashClerk = _CreateDynamicActor(16,2191.3438,-1970.5718,13.5600,182.3559, true, 100.0, 0);
	CreateGPS("工作(垃圾处理员)(LS)",2191.3438,-1970.5718,13.5600, GPS_JOB);

	SFTrashClerk = _CreateDynamicActor(16,-1727.4344,-111.5905,4.0489,137.4958, true, 100.0, 0);
	CreateGPS("工作(垃圾处理员)(SF)",-1727.4344,-111.5905,3.5489, GPS_VEH);

	LVTrashClerk = _CreateDynamicActor(16,1068.7795,2346.5398,10.8203,179.0541, true, 100.0, 0);
	CreateGPS("工作(垃圾处理员)(LV)",1068.7795,2346.5398,10.8203, GPS_VEH);

    LVPotClerk = _CreateDynamicActor(35,2551.5090,1845.9646,11.0234,181.7272, true, 100.0, 0);
	CreateGPS("花市",2551.5090,1845.9646,11.0234, GPS_SHOP);
	SetGVarInt("Clerk", 1, LVPotClerk);

	SFPotClerk = _CreateDynamicActor(35,-2536.3787,-26.3858,25.6172,270.1576, true, 100.0, 0);
	CreateGPS("花市",-2536.3787,-26.3858,25.6172, GPS_SHOP);
	SetGVarInt("Clerk", 1, SFPotClerk);

	LSPotClerk = _CreateDynamicActor(35,1150.6942,-1419.9264,16.0686,179.2665, true, 100.0, 0);
	CreateGPS("花市",1150.6942,-1419.9264,16.0686, GPS_SHOP);
    SetGVarInt("Clerk", 1, LSPotClerk);

    LSPetClerk = _CreateDynamicActor(261,1106.2935,-1418.2471,15.7978,180.7871, true, 100.0, 0);
	CreateGPS("宠物店",1106.2935,-1418.2471,15.7978, GPS_SHOP);
	SetGVarInt("Clerk", 1, LSPetClerk);

	SFPetClerk = _CreateDynamicActor(261,-2536.2258,-11.7400,25.6172,266.3775, true, 100.0, 0);
	CreateGPS("宠物店",-2536.2258,-11.7400,25.6172, GPS_SHOP);
	SetGVarInt("Clerk", 1, SFPetClerk);

	LVPetClerk = _CreateDynamicActor(261,2543.4412,1846.1749,11.0234,180.7872, true, 100.0, 0);
	CreateGPS("宠物店",2543.4412,1846.1749,11.0234, GPS_SHOP);
	SetGVarInt("Clerk", 1, LVPetClerk);

	SimeonNPC = _CreateDynamicActor(25026,2130.5017,-1150.4733,24.1386,334.1944, true, 100.0, 0);
	CreateGPS("卖车场(西门顶级车)",2130.5017,-1150.4733,24.1386, GPS_VEH);

	//TrevorNPC = _CreateDynamicActor(25025,9.6004,1112.5248,20.9399,178.2683, true, 100.0, 0);
	LSMGun = _CreateDynamicActor(6,2443.0642,-1973.6193,13.5469,270.7216);
	CreateGPS("枪黑市(LS)",2443.0642,-1973.6193,13.5469, GPS_SHOP);

	LVMGun = _CreateDynamicActor(30,2497.0820,2321.1155,10.8203,86.9082);
	CreateGPS("枪黑市(LV)",2497.0820,2321.1155,10.8203, GPS_SHOP);

	SFMMat = _CreateDynamicActor(17,-2119.8223,-194.8078,35.3203,177.2024, true, 100.0, 0);
	CreateGPS("材料市场(SF)",-2119.8223,-194.8078,35.3203, GPS_SHOP);

	LVMMat = _CreateDynamicActor(17,1606.8322,732.3200,10.8203,175.9447, true, 100.0, 0);
	CreateGPS("材料市场(LV)",1606.8322,732.3200,10.8203, GPS_SHOP);

	LSMFish = _CreateDynamicActor(182,742.4526,-1429.8929,13.5234,177.3130, true, 100.0, 0);
	CreateGPS("鱼市场(渔夫工作)(LS)",742.4526,-1429.8929,13.5234, GPS_JOB);

	SFMFish = _CreateDynamicActor(182,-1608.4847,1288.7898,7.1755,89.2654, true, 100.0, 0);
	CreateGPS("鱼市场(渔夫工作)(SF)",-1608.4847,1288.7898,7.1755, GPS_JOB);

	LVMFish = _CreateDynamicActor(182,1595.3390,707.5986,10.8203,4.3513, true, 100.0, 0);
	CreateGPS("鱼市场(渔夫工作)(LV)",1595.3390,707.5986,10.8203, GPS_JOB);

	MHunt[0] = _CreateDynamicActor(133,-36.1911,2350.2085,24.3026,182.1694, true, 100.0, 0);
	CreateGPS("狩猎市场",-36.1911,2350.2085,24.3026, GPS_SHOP);

	MHunt[1] = _CreateDynamicActor(161,-2058.4663,-2463.9678,31.1797,142.8146, true, 100.0, 0);
	CreateGPS("狩猎市场",-2058.4663,-2463.9678,31.1797, GPS_SHOP);

	MHunt[2] = _CreateDynamicActor(159,1223.7963,246.5996,19.5469,248.4058, true, 100.0, 0);
	CreateGPS("狩猎市场",1223.7963,246.5996,19.5469, GPS_SHOP);

	LumberClerk[0] = _CreateDynamicActor(160,1544.9099,-31.1456,21.2891,90.7910, true, 100.0, 0);
	CreateGPS("工作(伐木工)",1544.9099,-31.1456,21.2891, GPS_JOB);

	LumberClerk[1] = _CreateDynamicActor(160,-372.2342,-1425.9075,25.7266,86.5720, true, 100.0, 0);
	CreateGPS("工作(伐木工)",-372.2342,-1425.9075,25.7266, GPS_JOB);

	LumberClerk[2] = _CreateDynamicActor(160,-2219.5293,-2289.4170,30.6250,234.2945, true, 100.0, 0);
	CreateGPS("工作(伐木工)",-2219.5293,-2289.4170,30.6250, GPS_JOB);

	LumberClerk[3] = _CreateDynamicActor(160,-1474.6937,2545.2817,55.8359,149.7243, true, 100.0, 0);
	CreateGPS("工作(伐木工)",-1474.6937,2545.2817,55.8359, GPS_JOB);

	MinerClerk[0] = _CreateDynamicActor(27,585.9420,869.2789,-42.4973,272.0025, true, 100.0, 0);
	CreateGPS("工作(矿工)",585.9420,869.2789,-42.4973, GPS_JOB);

	MinerClerk[1] = _CreateDynamicActor(27,2091.8621,-1993.1952,13.5469,181.0253, true, 100.0, 0);
	CreateGPS("工作(矿工)",2091.8621,-1993.1952,13.5469, GPS_JOB);

	FVendorClerk = _CreateDynamicActor(186,-19.2263,-269.6934,5.4297,180.4445, true, 100.0, 0);
	CreateGPS("工作(餐车)",-19.2263,-269.6934,5.4297, GPS_JOB);

	LSTowClerk = _CreateDynamicActor(50,615.4348,-1523.0906,15.1097,359.8988, true, 100.0, 0);
	CreateGPS("工作(拖吊车)(LS)",615.4348,-1523.0906,15.1097, GPS_JOB);

	SFTowClerk = _CreateDynamicActor(50,-1925.5208,276.9134,41.0469,178.6842, true, 100.0, 0);
	CreateGPS("工作(拖吊车)(SF)",-1925.5208,276.9134,41.0469, GPS_JOB);

	LVTowClerk = _CreateDynamicActor(50,2565.8833,1040.2594,10.8125,175.1074, true, 100.0, 0);
	CreateGPS("工作(拖吊车)(LV)",2565.8833,1040.2594,10.8125, GPS_JOB);

	LSMCar = _CreateDynamicActor(3,2695.2246,-2220.0225,13.5501,175.2577, true, 100.0, 0);
	CreateGPS("车黑市(LS)",2695.2246,-2220.0225,13.5501, GPS_SHOP);

	SFMCar = _CreateDynamicActor(3,-1553.7744,123.8907,3.5547,228.2731, true, 100.0, 0);
	CreateGPS("车黑市(SF)",-1553.7744,123.8907,3.5547, GPS_SHOP);

	LSCSJobClerk = _CreateDynamicActor(20,857.4470,-1037.9644,25.7539,42.3383, true, 100.0, 0);
	CreateGPS("工作(汽车销售员)(LS)",857.4470,-1037.9644,25.7539, GPS_JOB);

	SFCSJobClerk = _CreateDynamicActor(20,-1657.6221,1208.2205,7.2500,358.0964, true, 100.0, 0);
	CreateGPS("工作(汽车销售员)(SF)",-1657.6221,1208.2205,7.2500, GPS_JOB);

	LVCSJobClerk = _CreateDynamicActor(20,1671.2927,1808.8495,10.8203,92.4971, true, 100.0, 0);
	CreateGPS("工作(汽车销售员)(LV)",1671.2927,1808.8495,10.8203, GPS_JOB);

	TrailerClerk[0] = _CreateDynamicActor(16,2209.3301,-2506.3191,13.5469,1.4202, true, 100.0, 0);
	CreateGPS("工作(联结车司机)(LS)",2209.3301,-2506.3191,13.5469, GPS_JOB);

	TrailerClerk[1] = _CreateDynamicActor(16,-77.7319,-1136.2767,1.0781,68.5169, true, 100.0, 0);
	CreateGPS("工作(联结车司机)(LS)",-77.7319,-1136.2767,1.0781, GPS_JOB);

	TrailerClerk[2] = _CreateDynamicActor(16,-1738.9380,31.7419,3.5547,169.9633, true, 100.0, 0);
	CreateGPS("工作(联结车司机)(SF)",-1738.9380,31.7419,3.5547, GPS_JOB);

	TrailerClerk[3] = _CreateDynamicActor(16,1676.6704,2322.5430,10.8203,266.8918, true, 100.0, 0);
	CreateGPS("工作(联结车司机)(LV)",1676.6704,2322.5430,10.8203, GPS_JOB);

	//炼油厂
	TrailerClerk[4] = _CreateDynamicActor(16,257.6397,1401.7219,10.5386,268.8530, true, 100.0, 0);
	TrailerClerk[5] = _CreateDynamicActor(16,-1022.4927,-689.3959,32.0078,274.8294, true, 100.0, 0);

	HunterClerk = _CreateDynamicActor(161,248.0927,-28.3037,1.5781,91.8901, true, 100.0, 0);
	CreateGPS("工作(猎人)",248.0927,-28.3037,1.5781, GPS_JOB);

	LSDockClerk = _CreateDynamicActor(16,2067.3716,-2209.3491,13.5469,270.1061, true, 100.0, 0);
	CreateGPS("洛圣都出货口",2067.3716,-2209.3491,13.5469, GPS_GOODS);

	SFDockClerk = _CreateDynamicActor(16,-1705.3439,64.8994,3.5495,225.5031, true, 100.0, 0);
	CreateGPS("圣费耶洛出货口",-1705.3439,64.8994,3.5495, GPS_GOODS);

	LVDockClerk = _CreateDynamicActor(16,2840.6001,1381.8423,10.8922,178.1033, true, 100.0, 0);
	CreateGPS("拉斯维托拉斯出货口",2840.6001,1381.8423,10.8922, GPS_GOODS);

	AcademyStaff[0] = _CreateDynamicActor(227,575.3591,558.6699,892.0447,0.7709, true, 100.0, 1);
	AcademyStaff[1] = _CreateDynamicActor(227,575.3591,558.6699,892.0447,0.7709, true, 100.0, 2);
	AcademyStaff[2] = _CreateDynamicActor(148,575.3591,558.6699,892.0447,0.7709, true, 100.0, 3);
	AcademyStaff[3] = _CreateDynamicActor(150,575.3591,558.6699,892.0447,0.7709, true, 100.0, 4);
	AcademyStaff[4] = _CreateDynamicActor(70,575.3591,558.6699,892.0447,0.7709, true, 100.0, 5);
	AcademyStaff[5] = _CreateDynamicActor(70,575.3591,558.6699,892.0447,0.7709, true, 100.0, 6);

	GymTrainer[0] = _CreateDynamicActor(80,766.0603,15.0099,1000.6995,180.6598, true, 100.0, 1);
	GymTrainer[1] = _CreateDynamicActor(49,764.9673,-41.2379,1000.6865,267.9123, true, 100.0, 1);
	GymTrainer[2] = _CreateDynamicActor(81,767.6604,-77.2101,1000.6563,359.7666, true, 100.0, 1);
	GymTrainer[3] = _CreateDynamicActor(154,669.4772,-1867.0244,5.4537,92.790, true, 100.0, 0);//beach
	GymTrainer[4] = _CreateDynamicActor(282,20.2834,389.6443,6.5904,153.0683, true, 100.0, 0);//prison

	LSPDStaff = _CreateDynamicActor(280,251.2629,66.4154,1003.6406,90.6844, true, 100.0, 1);
	SFPDStaff = _CreateDynamicActor(281,246.4205,120.3932,1003.2667,179.2759, true, 100.0, 1);
	LVPDStaff1 = _CreateDynamicActor(282,293.8517,182.0333,1007.1719,144.7621, true, 100.0, 1);
	LVPDStaff2 = _CreateDynamicActor(282,232.3342,160.5909,1003.0234,236.2328, true, 100.0, 1);

	HPStaff[0] = _CreateDynamicActor(274,-26.2658,151.2466,999.0569,90.3126, true, 100.0, 1);
	HPStaff[1] = _CreateDynamicActor(274,-26.2658,151.2466,999.0569,90.3126, true, 100.0, 2);
	HPStaff[2] = _CreateDynamicActor(274,-26.2658,151.2466,999.0569,90.3126, true, 100.0, 3);

	RCClerk = _CreateDynamicActor(217,-2235.7017,128.5864,1035.4141,0.1866, true, 100.0, 1);
	SetGVarInt("Clerk", 1, RCClerk);

	PrisonStaff = _CreateDynamicActor(282,1762.7491,-1581.6813,1742.5231,332.1977, true, 100.0, 1);
	CityHallClerk1 = _CreateDynamicActor(150,356.2962,167.6682,1008.3762,268.2457, true, 100.0, 1);
	CityHallClerk2 = _CreateDynamicActor(240,356.2948,180.4748,1008.3762,271.6530, true, 100.0, 1);
	GovStaff = _CreateDynamicActor(227,359.7139,173.6289,1008.3893,270.1725, true, 100.0, 1);

	for(new w = 0; w < MAX_SHOP_WORLD; w++)
	{
		CluckinClerk[w] = _CreateDynamicActor(167,368.7744,-4.4841,1001.8516,180.3393, true, 100.0, w);
		SetGVarInt("Clerk", 1, CluckinClerk[w]);

		PizzaClerk[w] = _CreateDynamicActor(155,373.7782,-116.9793,1001.4995,177.5691, true, 100.0, w);
		SetGVarInt("Clerk", 1, PizzaClerk[w]);

		BurgerClerk[w] = _CreateDynamicActor(205,375.9114,-65.8176,1001.5078,182.1234, true, 100.0, w);
		SetGVarInt("Clerk", 1, BurgerClerk[w]);

		DonutClerk[w] = _CreateDynamicActor(168,380.6583,-188.7071,1000.6328,87.2682, true, 100.0, w);
		SetGVarInt("Clerk", 1, DonutClerk[w]);

		ShopClerk[w] = _CreateDynamicActor(180,-28.1156,-91.6397,1003.5469,359.3910, true, 100.0, w);
		SetGVarInt("Clerk", 1, ShopClerk[w]);

		FDManager1[w] = _CreateDynamicActor(76,380.4295,-62.5706,1001.5078,358.3492, true, 100.0, w);//汉堡店经理

		FDManager2[w] = _CreateDynamicActor(3,370.4090,-115.1621,1001.4922,178.2864, true, 100.0, w);//披萨店经理

		MobileClerk[w] = _CreateDynamicActor(93,1215.1396,1232.9720,510.1601,181.3855, true, 100.0, w);
		SetGVarInt("Clerk", 1, MobileClerk[w]);

		ToolClerk[w] = _CreateDynamicActor(44,470.4659,954.4092,598.0313,89.5536, true, 100.0, w);
		SetGVarInt("Clerk", 1, ToolClerk[w]);

		AmmuClerk[w] = _CreateDynamicActor(179,296.1306,-40.3317,1001.5156,356.2574, true, 100.0, w);

		BarClerk[w] = _CreateDynamicActor(11,496.4592,-77.4696,998.7651,358.8697, true, 100.0, w);
		SetGVarInt("Clerk", 1, BarClerk[w]);

		StripClerk[w] = _CreateDynamicActor(257,1214.1385,-15.2713,1000.9219,1.5842, true, 100.0, w);
		SetGVarInt("Clerk", 1, StripClerk[w]);

		ClubClerk[w] = _CreateDynamicActor(172,501.8337,-19.3469,1000.6797,91.0926, true, 100.0, w);
		SetGVarInt("Clerk", 1, ClubClerk[w]);

		BincoClerk[w] = _CreateDynamicActor(211,207.5274,-98.7041,1005.2578,180.0345, true, 100.0, w);
		SetGVarInt("Clerk", 1, BincoClerk[w]);

		ZIPClerk[w] = _CreateDynamicActor(211,161.3901,-81.1898,1001.8047,180.1899, true, 100.0, w);
		SetGVarInt("Clerk", 1, ZIPClerk[w]);

		VictimClerk[w] = _CreateDynamicActor(217,204.8506,-7.5538,1001.2109,269.4487, true, 100.0, w);
		SetGVarInt("Clerk", 1, VictimClerk[w]);

		DDSClerk[w] = _CreateDynamicActor(217,204.6053,-157.8302,1000.5234,178.2892, true, 100.0, w);
		SetGVarInt("Clerk", 1, DDSClerk[w]);

		SexClerk[w] = _CreateDynamicActor(178,-105.8079,-8.9146,1000.7188,178.1173, true, 100.0, w);
		SetGVarInt("Clerk", 1, SexClerk[w]);

		FNTClerk[w] = _CreateDynamicActor(233,1252.1378,-1545.7906,2062.6479,89.5798, true, 100.0, w);
		SetGVarInt("Clerk", 1, FNTClerk[w]);

		Striper1[w] = _CreateDynamicActor(87,1221.0569,8.3781,1001.3356,135.4823, true, 100.0, w);
		Striper2[w] = _CreateDynamicActor(246,1216.8734,-6.4756,1001.3281,90.0486, true, 100.0, w);
	}

	SetTimer("FuelChecker",80000,1);
	SetTimer("SaveData",180000,1);//3分钟保存一次

	// Init Team
	for(new t = 0, m = MAX_TEAMS; t < m; t++) {
		Team[t][tLeader] = INVALID_PLAYER_ID;
	}

	//FerrisWheel
	FerrisWheelObjects[10] = CreateObject(18877, 389.7734, -2028.4688, 22.0, 0.0, 0.0, 90.0);
    FerrisWheelObjects[11] = CreateObject(18878, 389.7734, -2028.4688, 22.0, 0.0, 0.0, 90.0);
    for(new x = 0; x < sizeof(FerrisWheelObjects)-2; x++)
	{
	    FerrisWheelObjects[x] = CreateObject(18879, 389.7734, -2028.4688, 22.0, 0.0, 0.0, 90.0);
	    AttachObjectToObject(FerrisWheelObjects[x], FerrisWheelObjects[10], gFerrisCageOffsets[x][0], gFerrisCageOffsets[x][1], gFerrisCageOffsets[x][2], 0.0, 0.0, 90.0, 0);
	}
    SetTimer("RotateFerrisWheel", FERRIS_WHEEL_WAIT_TIME, false);

    //log
    mainlog = CreateLog("main/main");
    chatlog = CreateLog("main/chat");
    connectlog = CreateLog("main/player/connect");
    deathlog = CreateLog("main/player/death");
    moneylog = CreateLog("main/player/money");
    itemlog = CreateLog("main/player/item");
    petlog = CreateLog("main/player/pet");
    vehlog = CreateLog("main/vehicle");
    estatelog = CreateLog("main/estate");
    companylog = CreateLog("main/company");
    ganglog = CreateLog("main/gang");
    deptlog = CreateLog("main/department");
    reportlog = CreateLog("main/report");

    Log(mainlog, INFO, "已建立所有纪录");
	return 1;
}

stock CheckDatabaseConnecting(MySQL:Session)
{
	if(!IsDatabaseConnected(Session))
	{
		print("MySQL连接失败,将关闭服务器.");
		SendRconCommand("exit");
	}
}
stock LoadPlayerLimit(playerid, pMySQLid)
{
    LimitData[playerid] = EMPTY_LIMITDATA;
	new ORM:ormid = LimitData[playerid][ORM_ID] = orm_create("limitdata", MYSQL_SESSION_A);
  	orm_addvar_int(ormid, LimitData[playerid][plID], "id");
	orm_addvar_int(ormid, LimitData[playerid][plPlayerID], "PlayerID");
	orm_addvar_int(ormid, LimitData[playerid][plEat], "eat");
	orm_addvar_int(ormid, LimitData[playerid][plEatTime], "eattime");
	orm_addvar_int(ormid, LimitData[playerid][plContract], "contract");
	orm_addvar_int(ormid, LimitData[playerid][plCDSneak], "cd_sneak");
	orm_addvar_int(ormid, LimitData[playerid][plCDTimeStop], "cd_timestop");
	orm_addvar_int(ormid, LimitData[playerid][plPayCheck], "paycheck");
	orm_addvar_int(ormid, LimitData[playerid][plCarSellCount], "car_sell_count");
	orm_addvar_int(ormid, LimitData[playerid][plCarSellModel], "car_sell_model");
	orm_addvar_int(ormid, LimitData[playerid][plCarSellPrice], "car_sell_price");
	orm_addvar_int(ormid, LimitData[playerid][plEstateDebt], "estate_debt");
	orm_addvar_int(ormid, LimitData[playerid][plJobFD], "fd");
	orm_addvar_int(ormid, LimitData[playerid][plCDCaptain], "cd_captain");
	orm_addvar_int(ormid, LimitData[playerid][plCDGF], "cd_gf");
	orm_addvar_int(ormid, LimitData[playerid][plCDOG], "cd_og");
	orm_addvar_int(ormid, LimitData[playerid][plCDBless], "cd_bless");
	orm_addvar_int(ormid, LimitData[playerid][plCDTazz], "cd_tazz");
	orm_addvar_int(ormid, LimitData[playerid][plGunLic], "license_gun");
	orm_addvar_int(ormid, LimitData[playerid][plMSweet], "ms_sweet");
	orm_addvar_int(ormid, LimitData[playerid][plMSimeon], "ms_simeon");
	orm_addvar_int(ormid, LimitData[playerid][plMTrevor], "ms_trevor");
	orm_addvar_int(ormid, LimitData[playerid][plMCesar], "ms_cesar");
	orm_addvar_int(ormid, LimitData[playerid][plMEmmet], "ms_emmet");
	orm_addvar_int(ormid, LimitData[playerid][plMToreno], "ms_toreno");
	orm_addvar_int(ormid, LimitData[playerid][plMWoozie], "ms_woozie");
	orm_addvar_int(ormid, LimitData[playerid][plHSweet], "help_sweet");
	orm_addvar_int(ormid, LimitData[playerid][plHEmmet], "help_emmet");
	orm_addvar_int(ormid, LimitData[playerid][plHToreno], "help_toreno");
	orm_addvar_int(ormid, LimitData[playerid][plHWoozie], "help_woozie");
	orm_addvar_int(ormid, LimitData[playerid][plCDBounty], "cd_bounty");

    LimitData[playerid][plPlayerID] = pMySQLid;
	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerLimit", "d", playerid);
}

PUBLIC:CheckPlayerLimit(playerid)
{
    static Year, Month, Day, Hour, Minute, Second, TimeStamp, cdrecover;
    TimeStamp = gettime(Hour, Minute, Second);
	getdate(Year, Month, Day);
    switch(orm_errno(LimitData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    orm_setkey(LimitData[playerid][ORM_ID], "id");//避免使用玩家数据库ID来INSERT
            orm_insert(LimitData[playerid][ORM_ID]);
        }
	}
	if(PlayerData[playerid][pLogSec] > 0)
	{
	    cdrecover = TimeStamp - PlayerData[playerid][pLogSec];
		if(LimitData[playerid][plCDSneak] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDSneak]) LimitData[playerid][plCDSneak] = 0;
			else LimitData[playerid][plCDSneak] -= cdrecover;
		}
		if(LimitData[playerid][plCDTimeStop] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDTimeStop]) LimitData[playerid][plCDTimeStop] = 0;
			else LimitData[playerid][plCDTimeStop] -= cdrecover;
		}
		if(LimitData[playerid][plCDCaptain] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDCaptain]) LimitData[playerid][plCDCaptain] = 0;
			else LimitData[playerid][plCDCaptain] -= cdrecover;
		}
		if(LimitData[playerid][plCDGF] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDGF]) LimitData[playerid][plCDGF] = 0;
			else LimitData[playerid][plCDGF] -= cdrecover;
		}
		if(LimitData[playerid][plCDOG] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDOG]) LimitData[playerid][plCDOG] = 0;
			else LimitData[playerid][plCDOG] -= cdrecover;
		}
		if(LimitData[playerid][plCDBless] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDBless]) LimitData[playerid][plCDBless] = 0;
			else LimitData[playerid][plCDBless] -= cdrecover;
		}
		if(LimitData[playerid][plCDTazz] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDTazz]) LimitData[playerid][plCDTazz] = 0;
			else LimitData[playerid][plCDTazz] -= cdrecover;
		}
		if(LimitData[playerid][plMSweet] > 0)
		{
			if(cdrecover > LimitData[playerid][plMSweet]) LimitData[playerid][plMSweet] = 0;
			else LimitData[playerid][plMSweet] -= cdrecover;
		}
		if(LimitData[playerid][plMSimeon] > 0)
		{
			if(cdrecover > LimitData[playerid][plMSimeon]) LimitData[playerid][plMSimeon] = 0;
			else LimitData[playerid][plMSimeon] -= cdrecover;
		}
		if(LimitData[playerid][plMTrevor] > 0)
		{
			if(cdrecover > LimitData[playerid][plMTrevor]) LimitData[playerid][plMTrevor] = 0;
			else LimitData[playerid][plMTrevor] -= cdrecover;
		}
		if(LimitData[playerid][plMCesar] > 0)
		{
			if(cdrecover > LimitData[playerid][plMSweet]) LimitData[playerid][plMCesar] = 0;
			else LimitData[playerid][plMCesar] -= cdrecover;
		}
		if(LimitData[playerid][plMEmmet] > 0)
		{
			if(cdrecover > LimitData[playerid][plMEmmet]) LimitData[playerid][plMEmmet] = 0;
			else LimitData[playerid][plMEmmet] -= cdrecover;
		}
		if(LimitData[playerid][plHEmmet] > 0)
		{
			if(cdrecover > LimitData[playerid][plHEmmet]) LimitData[playerid][plHEmmet] = 0;
			else LimitData[playerid][plHEmmet] -= cdrecover;
		}
		if(LimitData[playerid][plMToreno] > 0)
		{
			if(cdrecover > LimitData[playerid][plMToreno]) LimitData[playerid][plMToreno] = 0;
			else LimitData[playerid][plMToreno] -= cdrecover;
		}
		if(LimitData[playerid][plMWoozie] > 0)
		{
			if(cdrecover > LimitData[playerid][plMWoozie]) LimitData[playerid][plMWoozie] = 0;
			else LimitData[playerid][plMWoozie] -= cdrecover;
		}
		if(LimitData[playerid][plCDBounty] > 0)
		{
			if(cdrecover > LimitData[playerid][plCDBounty]) LimitData[playerid][plCDBounty] = 0;
			else LimitData[playerid][plCDBounty] -= cdrecover;
		}
	}
	if(PlayerData[playerid][pLastDate] != Day || PlayerData[playerid][pLastMonth] != Month || PlayerData[playerid][pLastYear] != Year)
	{
		LimitData[playerid][plCarSellCount] =
		LimitData[playerid][plCarSellPrice] =
		LimitData[playerid][plCarSellModel] = 0;
	}
	return 1;
}

stock LoadPlayerSkill(playerid, pMySQLid)
{
    SkillData[playerid] = EMPTY_SKILLDATA;
	new ORM:ormid = SkillData[playerid][ORM_ID] = orm_create("skilldata", MYSQL_SESSION_A);
  	orm_addvar_int(ormid, SkillData[playerid][psID], "id");
	orm_addvar_int(ormid, SkillData[playerid][psPlayerID], "PlayerID");
	orm_addvar_int(ormid, SkillData[playerid][psFixVeh], "FixVehicle");
	orm_addvar_int(ormid, SkillData[playerid][psUnlock], "StealVehicle");
	orm_addvar_int(ormid, SkillData[playerid][psHack], "Hack");
	orm_addvar_int(ormid, SkillData[playerid][psArm], "Arm");
	orm_addvar_int(ormid, SkillData[playerid][psCHit], "CriticalHit");
	orm_addvar_int(ormid, SkillData[playerid][psSneak], "Sneak");
	orm_addvar_int(ormid, SkillData[playerid][psDef], "Defense");
	orm_addvar_int(ormid, SkillData[playerid][psHeal], "Heal");
	orm_addvar_int(ormid, SkillData[playerid][psDrug], "Drug");
	orm_addvar_int(ormid, SkillData[playerid][psLeech], "Leech");
	orm_addvar_int(ormid, SkillData[playerid][psRecover], "Recover");
	orm_addvar_int(ormid, SkillData[playerid][psTimeStop], "TimeStop");
	orm_addvar_int(ormid, SkillData[playerid][psSearch], "Search");
	orm_addvar_int(ormid, SkillData[playerid][psObserve], "Observe");
	orm_addvar_int(ormid, SkillData[playerid][psStamina], "Stamina");
	orm_addvar_int(ormid, SkillData[playerid][psPistol], "Pistol");
	orm_addvar_int(ormid, SkillData[playerid][psDEA], "DEA");
	orm_addvar_int(ormid, SkillData[playerid][psShotgun], "Shotgun");
	orm_addvar_int(ormid, SkillData[playerid][psSawn], "Sawn");
	orm_addvar_int(ormid, SkillData[playerid][psSpas], "Spas");
	orm_addvar_int(ormid, SkillData[playerid][psUZI], "UZI");
	orm_addvar_int(ormid, SkillData[playerid][psMP5], "MP5");
	orm_addvar_int(ormid, SkillData[playerid][psAK], "AK47");
	orm_addvar_int(ormid, SkillData[playerid][psM4], "M4");
	orm_addvar_int(ormid, SkillData[playerid][psSniper], "Sniper");
	orm_addvar_int(ormid, SkillData[playerid][psBoxing], "Boxing");
	orm_addvar_int(ormid, SkillData[playerid][psKungFu], "KungFu");
	orm_addvar_int(ormid, SkillData[playerid][psMuayThai], "MuayThai");
    SkillData[playerid][psPlayerID] = pMySQLid;
	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerSkill", "d", playerid);
}

PUBLIC:CheckPlayerSkill(playerid)
{
    switch(orm_errno(SkillData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    orm_setkey(SkillData[playerid][ORM_ID], "id");
            orm_insert(SkillData[playerid][ORM_ID]);
        }
	}
	return 1;
}

PUBLIC:LoadSkillsList()
{
	for(new r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = SkillsList[r][ORM_ID] = orm_create("skillslist", MYSQL_SESSION_A);
		orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skID], "id");
		orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skName], 16, "name");
		orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skType], "type");
		orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skMaxLV], "maxlv");
		orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skInfo], 256, "main_info");
		orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV1Info], 256, "lv1_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV2Info], 256, "lv2_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV3Info], 256, "lv3_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV4Info], 256, "lv4_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV5Info], 256, "lv5_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV6Info], 256, "lv6_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV7Info], 256, "lv7_info");
        orm_addvar_string(SkillsList[r][ORM_ID], SkillsList[r][skLV8Info], 256, "lv8_info");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV1Pt1], "lv1_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV2Pt1], "lv2_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV3Pt1], "lv3_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV4Pt1], "lv4_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV5Pt1], "lv5_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV6Pt1], "lv6_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV7Pt1], "lv7_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV8Pt1], "lv8_pt1");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV1Pt2], "lv1_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV2Pt2], "lv2_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV3Pt2], "lv3_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV4Pt2], "lv4_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV5Pt2], "lv5_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV6Pt2], "lv6_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV7Pt2], "lv7_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV8Pt2], "lv8_pt2");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV1Pt1A], "lv1_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV2Pt1A], "lv2_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV3Pt1A], "lv3_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV4Pt1A], "lv4_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV5Pt1A], "lv5_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV6Pt1A], "lv6_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV7Pt1A], "lv7_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV8Pt1A], "lv8_pt1_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV1Pt2A], "lv1_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV2Pt2A], "lv2_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV3Pt2A], "lv3_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV4Pt2A], "lv4_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV5Pt2A], "lv5_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV6Pt2A], "lv6_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV7Pt2A], "lv7_pt2_amount");
        orm_addvar_int(SkillsList[r][ORM_ID], SkillsList[r][skLV8Pt2A], "lv8_pt2_amount");
        orm_apply_cache(ormid, r);
        orm_setkey(ormid, "id");
		orm_load(ormid, "InsertSkillsList", "d", r);
	}
}

PUBLIC:InsertSkillsList(id)
{
    SetGVarString("skName", SkillsList[id][skName], id);
	SetGVarInt("skType", SkillsList[id][skType], id);
	SetGVarInt("skMaxLV", SkillsList[id][skMaxLV], id);
	SetGVarString("skInfo", SkillsList[id][skInfo], id);

	SetGVarString("skLV1Info", SkillsList[id][skLV1Info], id);
	SetGVarString("skLV2Info", SkillsList[id][skLV2Info], id);
	SetGVarString("skLV3Info", SkillsList[id][skLV3Info], id);
	SetGVarString("skLV4Info", SkillsList[id][skLV4Info], id);
	SetGVarString("skLV5Info", SkillsList[id][skLV5Info], id);
	SetGVarString("skLV6Info", SkillsList[id][skLV6Info], id);
	SetGVarString("skLV7Info", SkillsList[id][skLV7Info], id);
	SetGVarString("skLV8Info", SkillsList[id][skLV8Info], id);

	SetGVarInt("skLV1Pt1", SkillsList[id][skLV1Pt1], id);
    SetGVarInt("skLV2Pt1", SkillsList[id][skLV2Pt1], id);
    SetGVarInt("skLV3Pt1", SkillsList[id][skLV3Pt1], id);
    SetGVarInt("skLV4Pt1", SkillsList[id][skLV4Pt1], id);
    SetGVarInt("skLV5Pt1", SkillsList[id][skLV5Pt1], id);
    SetGVarInt("skLV6Pt1", SkillsList[id][skLV6Pt1], id);
    SetGVarInt("skLV7Pt1", SkillsList[id][skLV7Pt1], id);
    SetGVarInt("skLV8Pt1", SkillsList[id][skLV8Pt1], id);

    SetGVarInt("skLV1Pt2", SkillsList[id][skLV1Pt2], id);
    SetGVarInt("skLV2Pt2", SkillsList[id][skLV2Pt2], id);
    SetGVarInt("skLV3Pt2", SkillsList[id][skLV3Pt2], id);
    SetGVarInt("skLV4Pt2", SkillsList[id][skLV4Pt2], id);
    SetGVarInt("skLV5Pt2", SkillsList[id][skLV5Pt2], id);
    SetGVarInt("skLV6Pt2", SkillsList[id][skLV6Pt2], id);
    SetGVarInt("skLV7Pt2", SkillsList[id][skLV7Pt2], id);
    SetGVarInt("skLV8Pt2", SkillsList[id][skLV8Pt2], id);

    SetGVarInt("skLV1Pt1A", SkillsList[id][skLV1Pt1A], id);
    SetGVarInt("skLV2Pt1A", SkillsList[id][skLV2Pt1A], id);
    SetGVarInt("skLV3Pt1A", SkillsList[id][skLV3Pt1A], id);
    SetGVarInt("skLV4Pt1A", SkillsList[id][skLV4Pt1A], id);
    SetGVarInt("skLV5Pt1A", SkillsList[id][skLV5Pt1A], id);
    SetGVarInt("skLV6Pt1A", SkillsList[id][skLV6Pt1A], id);
    SetGVarInt("skLV7Pt1A", SkillsList[id][skLV7Pt1A], id);
    SetGVarInt("skLV8Pt1A", SkillsList[id][skLV8Pt1A], id);

    SetGVarInt("skLV1Pt2A", SkillsList[id][skLV1Pt2A], id);
    SetGVarInt("skLV2Pt2A", SkillsList[id][skLV2Pt2A], id);
    SetGVarInt("skLV3Pt2A", SkillsList[id][skLV3Pt2A], id);
    SetGVarInt("skLV4Pt2A", SkillsList[id][skLV4Pt2A], id);
    SetGVarInt("skLV5Pt2A", SkillsList[id][skLV5Pt2A], id);
    SetGVarInt("skLV6Pt2A", SkillsList[id][skLV6Pt2A], id);
    SetGVarInt("skLV7Pt2A", SkillsList[id][skLV7Pt2A], id);
    SetGVarInt("skLV8Pt2A", SkillsList[id][skLV8Pt2A], id);
}

stock LoadPlayerRecord(playerid, pMySQLid)
{
    RecordData[playerid] = EMPTY_RECORDDATA;
	new ORM:ormid = RecordData[playerid][ORM_ID] = orm_create("recorddata", MYSQL_SESSION_A);
  	orm_addvar_int(ormid, RecordData[playerid][prID], "id");
	orm_addvar_int(ormid, RecordData[playerid][prPlayerID], "PlayerID");
    orm_addvar_int(ormid, RecordData[playerid][prLogDays], "Days");
    orm_addvar_int(ormid, RecordData[playerid][prJTrash], "JobTrash");
    orm_addvar_int(ormid, RecordData[playerid][prJGas], "JobGas");
    orm_addvar_int(ormid, RecordData[playerid][prJAds], "JobAds");
    orm_addvar_int(ormid, RecordData[playerid][prStealVehs], "StealVehs");
    orm_addvar_int(ormid, RecordData[playerid][prRefuels], "Refuels");
    orm_addvar_int(ormid, RecordData[playerid][prJRoadDeliver], "JobRoadDeliver");
    orm_addvar_int(ormid, RecordData[playerid][prJFacProd], "JobFacProd");
    orm_addvar_int(ormid, RecordData[playerid][prTaxi], "Taxi");
    orm_addvar_int(ormid, RecordData[playerid][prEarned], "Earned");
    orm_addvar_int(ormid, RecordData[playerid][prSpent], "Spent");
    orm_addvar_int(ormid, RecordData[playerid][prBuyVeh], "BuyVeh");
    orm_addvar_int(ormid, RecordData[playerid][prDeath], "Death");
    orm_addvar_int(ormid, RecordData[playerid][prKill], "Kill");
    orm_addvar_int(ormid, RecordData[playerid][prJail], "Jail");
    orm_addvar_int(ormid, RecordData[playerid][prAllWanted], "MostWanted");
    orm_addvar_int(ormid, RecordData[playerid][prQuestClear], "QuestClear");
    orm_addvar_int(ormid, RecordData[playerid][prEat], "Eat");
    orm_addvar_int(ormid, RecordData[playerid][prPlant], "Plant");
    orm_addvar_int(ormid, RecordData[playerid][prWater], "Water");
    orm_addvar_int(ormid, RecordData[playerid][prFishes], "Fishes");
    orm_addvar_int(ormid, RecordData[playerid][prJobClear], "JobClear");
    orm_addvar_int(ormid, RecordData[playerid][prMCar], "MarketCar");
    orm_addvar_int(ormid, RecordData[playerid][prHunt], "Hunt");
    orm_addvar_int(ormid, RecordData[playerid][prMFish], "MarketFish");
    orm_addvar_int(ormid, RecordData[playerid][prMMat], "MarketMat");
    orm_addvar_int(ormid, RecordData[playerid][prMGun], "MarketGun");
    orm_addvar_int(ormid, RecordData[playerid][prGym], "Gym");
    orm_addvar_int(ormid, RecordData[playerid][prRange], "Range");
    orm_addvar_int(ormid, RecordData[playerid][prZen], "Zen");
    orm_addvar_int(ormid, RecordData[playerid][prClass1], "Class1");
    orm_addvar_int(ormid, RecordData[playerid][prClass2], "Class2");
    orm_addvar_int(ormid, RecordData[playerid][prClass3], "Class3");
    orm_addvar_int(ormid, RecordData[playerid][prClass4], "Class4");
    orm_addvar_int(ormid, RecordData[playerid][prClass5], "Class5");
    orm_addvar_int(ormid, RecordData[playerid][prClass6], "Class6");
    orm_addvar_int(ormid, RecordData[playerid][prClass7], "Class7");
    orm_addvar_int(ormid, RecordData[playerid][prClass8], "Class8");
    orm_addvar_int(ormid, RecordData[playerid][prClass9], "Class9");
    orm_addvar_int(ormid, RecordData[playerid][prMPlant], "MarketPlant");
    orm_addvar_int(ormid, RecordData[playerid][prRace], "Race");
    orm_addvar_int(ormid, RecordData[playerid][prFisher], "Fisher");
    orm_addvar_int(ormid, RecordData[playerid][prRobStore], "RobStore");
    orm_addvar_int(ormid, RecordData[playerid][prCarSellJob], "CarSellJob");
    orm_addvar_int(ormid, RecordData[playerid][prJFD], "JobFoodDeliver");
    orm_addvar_int(ormid, RecordData[playerid][prMHunt], "MarketHunt");
    orm_addvar_int(ormid, RecordData[playerid][prLumber], "Lumber");
    orm_addvar_int(ormid, RecordData[playerid][prMatWar], "MatWar");
    orm_addvar_int(ormid, RecordData[playerid][prMSweet], "Sweet");
    orm_addvar_int(ormid, RecordData[playerid][prMSimeon], "Simeon");
    orm_addvar_int(ormid, RecordData[playerid][prMTrevor], "Trevor");
    orm_addvar_int(ormid, RecordData[playerid][prMCesar], "Cesar");
    orm_addvar_int(ormid, RecordData[playerid][prMEmmet], "Emmet");
    orm_addvar_int(ormid, RecordData[playerid][prMToreno], "Toreno");
    orm_addvar_int(ormid, RecordData[playerid][prMWoozie], "Woozie");

    RecordData[playerid][prPlayerID] = pMySQLid;
 	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerRecord", "d", playerid);
}

PUBLIC:CheckPlayerRecord(playerid)
{
	static Year, Month, Day;
	getdate(Year, Month, Day);
    switch(orm_errno(RecordData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    RecordData[playerid][prMSweet] =
		    RecordData[playerid][prMSimeon] =
		    RecordData[playerid][prMTrevor] =
		    RecordData[playerid][prMCesar] =
		    RecordData[playerid][prMEmmet] =
		    RecordData[playerid][prMToreno] =
		    RecordData[playerid][prMWoozie] = -1;

		    orm_setkey(RecordData[playerid][ORM_ID], "id");
            orm_insert(RecordData[playerid][ORM_ID]);
        }
	}
	if(PlayerData[playerid][pLastDate] != Day || PlayerData[playerid][pLastMonth] != Month || PlayerData[playerid][pLastYear] != Year)
	{
		RecordData[playerid][prLogDays] ++;
	}
	return 1;
}

stock LoadPlayerConfig(playerid, pMySQLid)
{
    ConfigData[playerid] = EMPTY_CONFIGDATA;
	new ORM:ormid = ConfigData[playerid][ORM_ID] = orm_create("configdata", MYSQL_SESSION_A);
  	orm_addvar_int(ormid, ConfigData[playerid][cfID], "id");
	orm_addvar_int(ormid, ConfigData[playerid][cfPlayerID], "PlayerID");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud1], "Hud1");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud2], "Hud2");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud3], "Hud3");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud4], "Hud4");
	orm_addvar_int(ormid, ConfigData[playerid][cfWalk], "Walk");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud5], "Hud5");
	orm_addvar_int(ormid, ConfigData[playerid][cfFight], "Fight");
	orm_addvar_int(ormid, ConfigData[playerid][cfNameTag], "NameTag");
	orm_addvar_int(ormid, ConfigData[playerid][cfHud6], "Hud6");
	orm_addvar_int(ormid, ConfigData[playerid][cfPhoneOff], "PhoneOff");
	orm_addvar_int(ormid, ConfigData[playerid][cfPhoneMute], "PhoneMute");
	orm_addvar_int(ormid, ConfigData[playerid][cfHitSound], "HitSound");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN1T], "Num1Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN2T], "Num2Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN3T], "Num3Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN4T], "Num4Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN5T], "Num5Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN6T], "Num6Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN7T], "Num7Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN8T], "Num8Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN9T], "Num9Type");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN1], "Num1");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN2], "Num2");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN3], "Num3");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN4], "Num4");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN5], "Num5");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN6], "Num6");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN7], "Num7");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN8], "Num8");
	orm_addvar_int(ormid, ConfigData[playerid][cfQuickN9], "Num9");
    ConfigData[playerid][cfPlayerID] = pMySQLid;
 	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerConfig", "d", playerid);
}

PUBLIC:CheckPlayerConfig(playerid)
{
    switch(orm_errno(ConfigData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    orm_setkey(ConfigData[playerid][ORM_ID], "id");
            orm_insert(ConfigData[playerid][ORM_ID]);
        }
	}
	return 1;
}

stock LoadPlayerSick(playerid, pMySQLid)
{
    SickData[playerid] = EMPTY_SICKDATA;
	new ORM:ormid = SickData[playerid][ORM_ID] = orm_create("sickdata", MYSQL_SESSION_A);
  	orm_addvar_int(ormid, SickData[playerid][scID], "id");
	orm_addvar_int(ormid, SickData[playerid][scPlayerID], "PlayerID");
	orm_addvar_int(ormid, SickData[playerid][scHealth], "HealthSick");
	orm_addvar_int(ormid, SickData[playerid][scHunger], "HungerSick");
	orm_addvar_int(ormid, SickData[playerid][scStamina], "StaminaSick");
	orm_addvar_int(ormid, SickData[playerid][scHigh], "High");
	orm_addvar_int(ormid, SickData[playerid][scSickBuff], "SickBuff");
	orm_addvar_int(ormid, SickData[playerid][scStamBuff], "StamBuff");
    SickData[playerid][scPlayerID] = pMySQLid;
 	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerSick", "d", playerid);
}

PUBLIC:CheckPlayerSick(playerid)
{
    switch(orm_errno(SickData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    orm_setkey(SickData[playerid][ORM_ID], "id");
            orm_insert(SickData[playerid][ORM_ID]);
        }
	}
	return 1;
}

stock LoadPlayerWeapon(playerid, pMySQLid)
{
    WeaponData[playerid] = EMPTY_WPDATA;
	new ORM:ormid = WeaponData[playerid][ORM_ID] = orm_create("weapondata", MYSQL_SESSION_A);
	orm_addvar_int(ormid, WeaponData[playerid][pwID], "id");
	orm_addvar_int(ormid, WeaponData[playerid][pwPlayerID], "PlayerID");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon0], "weapon_0");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo0], "ammo_0");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon1], "weapon_1");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo1], "ammo_1");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon2], "weapon_2");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo2], "ammo_2");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon3], "weapon_3");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo3], "ammo_3");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon4], "weapon_4");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo4], "ammo_4");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon5], "weapon_5");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo5], "ammo_5");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon6], "weapon_6");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo6], "ammo_6");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon7], "weapon_7");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo7], "ammo_7");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon8], "weapon_8");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo8], "ammo_8");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon9], "weapon_9");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo9], "ammo_9");
	orm_addvar_int(ormid, WeaponData[playerid][pwWeapon10], "weapon_10");
	orm_addvar_int(ormid, WeaponData[playerid][pwAmmo10], "ammo_10");
	orm_addvar_int(ormid, WeaponData[playerid][pw9mmCol], "9mm_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwDEACol], "dea_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwShotgunCol], "shotgun_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwSawnCol], "sawn_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwSpasCol], "spas_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwUZICol], "uzi_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwTec9Col], "tec9_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwMP5Col], "mp5_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwAK47Col], "ak47_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwM4Col], "m4_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwSniperCol], "sniper_color");
	orm_addvar_int(ormid, WeaponData[playerid][pwRifleCol], "rifle_color");
	WeaponData[playerid][pwPlayerID] = pMySQLid;
	orm_setkey(ormid, "PlayerID");
	orm_load(ormid, "CheckPlayerWeapon", "d", playerid);
}

PUBLIC:CheckPlayerWeapon(playerid)
{
    switch(orm_errno(WeaponData[playerid][ORM_ID]))
	{
        case ERROR_NO_DATA:
		{
		    orm_setkey(WeaponData[playerid][ORM_ID], "id");
            orm_insert(WeaponData[playerid][ORM_ID]);
        }
	}
	return 1;
}

stock LoadPlayerPoints(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
    for(new i = 0, y = MAX_PT; i < y; i++)
	{
		PlayerPt[playerid][i] = EMPTY_PTDATA;
	}

	CheckDatabaseConnecting(Session);

	static query[128], field, rows;

	mysql_format(Session, query, sizeof(query), "SELECT * FROM `pointdata` WHERE `PlayerID`='%d'", pMySQLid);

	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = PlayerPt[playerid][field][ORM_ID] = orm_create("pointdata");

		orm_addvar_int(ormid, PlayerPt[playerid][field][spID], "id");
		orm_addvar_int(ormid, PlayerPt[playerid][field][spPtID], "PtID");
		orm_addvar_int(ormid, PlayerPt[playerid][field][spPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerPt[playerid][field][spCount], "Count");

		PlayerPt[playerid][field][spPlayerID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "PlayerID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SavePlayerPoints(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_PT; l < j; l++)
	{
		if(PlayerPt[playerid][l][spCount] > 0)
		{
			PlayerPt[playerid][l][spPlayerID] = PlayerData[playerid][pID];
			orm_save(PlayerPt[playerid][l][ORM_ID]);
			if(disconnect)
			{
				orm_destroy(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(PlayerPt[playerid][l][ORM_ID] != ORM:0)
			{
				orm_delete(PlayerPt[playerid][l][ORM_ID]);

				PlayerPt[playerid][l][spID] = 0;
				PlayerPt[playerid][l][spPtID] = 0;
				PlayerPt[playerid][l][spCount] = 0;
				orm_destroy(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][ORM_ID] = ORM:0;
			}
		}
	}
}

stock bool:GivePlayerPoint(playerid, ptid, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, j = MAX_PT, k = -1; l < j; l++)
	{
		if(PlayerPt[playerid][l][spPtID] == ptid)
		{
			PlayerPt[playerid][l][spCount] += count;
			if(PlayerPt[playerid][l][spCount] < 1)
			{
				orm_delete(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][spID] = 0;
				PlayerPt[playerid][l][spPtID] = 0;
				PlayerPt[playerid][l][spPlayerID] = 0;
				PlayerPt[playerid][l][spCount] = 0;
				orm_destroy(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][ORM_ID] = ORM:0;
			}
			k = -1;
			break;
		}
		else if(PlayerPt[playerid][l][spPtID] == 0)
		{
			if(k == -1){k = l;}
		}
	}
	if(k != -1)
	{
		if(count < 1)
		{
			PlayerPt[playerid][k][spID] = 0;
			PlayerPt[playerid][k][spPtID] = 0;
			PlayerPt[playerid][k][spPlayerID] = 0;
			PlayerPt[playerid][k][spCount] = 0;
			return false;
		}
		new ORM:ormid = PlayerPt[playerid][k][ORM_ID] = orm_create("pointdata");

		orm_addvar_int(ormid, PlayerPt[playerid][k][spID], "id");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spPtID], "PtID");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spCount], "Count");

		orm_setkey(ormid, "id");

		PlayerPt[playerid][k][spPlayerID] = PlayerData[playerid][pID];
		PlayerPt[playerid][k][spPtID] = ptid,
		PlayerPt[playerid][k][spCount] = count;

		orm_insert(PlayerPt[playerid][k][ORM_ID]);
	}
	return true;
}

stock bool:SetPlayerPoint(playerid, ptid, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, j = MAX_PT, k = -1; l < j; l++)
	{
		if(PlayerPt[playerid][l][spPtID] == ptid)
		{
			PlayerPt[playerid][l][spCount] = count;
			if(PlayerPt[playerid][l][spCount] < 1 )
			{
				orm_delete(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][spID] =
				PlayerPt[playerid][l][spPtID] =
				PlayerPt[playerid][l][spPlayerID] =
				PlayerPt[playerid][l][spCount] = 0;
				orm_destroy(PlayerPt[playerid][l][ORM_ID]);
				PlayerPt[playerid][l][ORM_ID] = ORM:0;
			}
			k = -1;
			break;
		}
		else if(PlayerPt[playerid][l][spPtID] == 0)
		{
			if(k == -1){k = l;}
		}
	}
	if(k != -1)
	{
		if(count < 1)
		{
			PlayerPt[playerid][k][spID] =
			PlayerPt[playerid][k][spPtID] =
			PlayerPt[playerid][k][spPlayerID] =
			PlayerPt[playerid][k][spCount] = 0;
			return false;
		}
		new ORM:ormid = PlayerPt[playerid][k][ORM_ID] = orm_create("pointdata");

		orm_addvar_int(ormid, PlayerPt[playerid][k][spID], "id");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spPtID], "PtID");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerPt[playerid][k][spCount], "Count");

		orm_setkey(ormid, "id");

		PlayerPt[playerid][k][spPlayerID] = PlayerData[playerid][pID];
		PlayerPt[playerid][k][spPtID] = ptid,
		PlayerPt[playerid][k][spCount] = count;

		orm_insert(PlayerPt[playerid][k][ORM_ID]);
	}
	return true;
}

stock ClearPlayerSkill(playerid)
{
    SkillData[playerid][psFixVeh] =
    SkillData[playerid][psUnlock] =
    SkillData[playerid][psHack] =
    SkillData[playerid][psArm] =
    SkillData[playerid][psCHit] =
    SkillData[playerid][psSneak] =
    SkillData[playerid][psDef] =
    SkillData[playerid][psHeal] =
    SkillData[playerid][psDrug] =
    SkillData[playerid][psLeech] =
    SkillData[playerid][psSearch] =
    SkillData[playerid][psRecover] =
    SkillData[playerid][psObserve] =
    SkillData[playerid][psTimeStop] =
    SkillData[playerid][psStamina] =
    SkillData[playerid][psPistol] =
    SkillData[playerid][psDEA] =
    SkillData[playerid][psShotgun] =
    SkillData[playerid][psSawn] =
    SkillData[playerid][psSpas] =
    SkillData[playerid][psUZI] =
    SkillData[playerid][psMP5] =
    SkillData[playerid][psM4] =
    SkillData[playerid][psSniper] =
    SkillData[playerid][psBoxing] =
    SkillData[playerid][psKungFu] =
    SkillData[playerid][psMuayThai] = 0;
    SaveSkillData(playerid);

    for(new i = 1; i < 11; i++)
	{
		SetPlayerPoint(playerid, i, 0);
	}
	SavePlayerPoints(playerid);
}

PUBLIC:LoadRaceData()
{
	static r, c;
	for(r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = RaceData[r][ORM_ID] = orm_create("racedata", MYSQL_SESSION_A);

        orm_addvar_int(ormid, RaceData[r][rtID], "id");
		orm_addvar_int(ormid, RaceData[r][rtType], "type");
		orm_addvar_int(ormid, RaceData[r][rtMaxRacers], "max_racers");
		orm_addvar_int(ormid, RaceData[r][rtVeh1], "veh_1");
		orm_addvar_int(ormid, RaceData[r][rtVeh2], "veh_2");
		orm_addvar_int(ormid, RaceData[r][rtVeh3], "veh_3");
		orm_addvar_int(ormid, RaceData[r][rtVeh4], "veh_4");
		orm_addvar_int(ormid, RaceData[r][rtVeh5], "veh_5");
		orm_addvar_float(ormid, RaceData[r][rtStartPos1X], "start_1_x");
		orm_addvar_float(ormid, RaceData[r][rtStartPos1Y], "start_1_y");
		orm_addvar_float(ormid, RaceData[r][rtStartPos1Z], "start_1_z");
		orm_addvar_float(ormid, RaceData[r][rtStartPos1A], "start_1_a");
		orm_addvar_float(ormid, RaceData[r][rtStartPos2X], "start_2_x");
		orm_addvar_float(ormid, RaceData[r][rtStartPos2Y], "start_2_y");
		orm_addvar_float(ormid, RaceData[r][rtStartPos2Z], "start_2_z");
		orm_addvar_float(ormid, RaceData[r][rtStartPos2A], "start_2_a");
		orm_addvar_int(ormid, RaceData[r][rtCreator], "creator");
		orm_addvar_int(ormid, RaceData[r][rtFastestRacer], "fastest_racer");
		orm_addvar_int(ormid, RaceData[r][rtFastestTime], "fastest_time");
		orm_addvar_int(ormid, RaceData[r][rtMaxCP], "max_cp");
		orm_addvar_string(ormid, RaceData[r][rtName], 24, "name");
        orm_addvar_string(ormid, RaceData[r][rtDes], 144, "description");
		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
		orm_load(ormid, "CheckRaceData", "d", r);
	}
	printf("已读取赛道资料, 共 %d 条", r);
}

PUBLIC:CheckRaceData(raceid)
{
    if(orm_errno(RaceData[raceid][ORM_ID]) == ERROR_OK)
	{
     	static string[144];
        RaceData[raceid][rtMapIcon] = CreateDynamicMapIcon(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 53, -1, 0, 0, -1, 200.0, MAPICON_LOCAL_CHECKPOINT);
        format(string, sizeof(string), ""#TEXT_PINK"<<"#TEXT_WHITE"%s"#TEXT_PINK">>\n"#TEXT_WHITE"人数: 1-%d\n"#TEXT_YELLOW"按Y键加入竞速", RaceData[raceid][rtName], RaceData[raceid][rtMaxRacers]);
		RaceData[raceid][rt3DText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 60.0);
		RaceData[raceid][rtGPS] = CreateGPS(RaceData[raceid][rtName], RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], GPS_RACE);
	}
	return 1;
}

PUBLIC:SaveRaceData(raceid)
{
    SaveRaceCheckPoints(raceid, true);
	UpdateRaceInfo(raceid);
    orm_save(RaceData[raceid][ORM_ID]);
}

static CreateRace(const name[], const text[], type, maxracers, veh1, veh2, veh3, veh4, veh5)
{
	static i, j, k;
	k = -1;
    for(i = 0, j = MAX_RACES; i < j; i++)
	{
		if(RaceData[i][rtType] == RACE_NONE)
		{
		    new ORM:ormid = RaceData[i][ORM_ID] = orm_create("racedata", MYSQL_SESSION_A);

	        orm_addvar_int(ormid, RaceData[i][rtID], "id");
			orm_addvar_int(ormid, RaceData[i][rtType], "type");
			orm_addvar_int(ormid, RaceData[i][rtMaxRacers], "max_racers");
			orm_addvar_int(ormid, RaceData[i][rtVeh1], "veh_1");
			orm_addvar_int(ormid, RaceData[i][rtVeh2], "veh_2");
			orm_addvar_int(ormid, RaceData[i][rtVeh3], "veh_3");
			orm_addvar_int(ormid, RaceData[i][rtVeh4], "veh_4");
			orm_addvar_int(ormid, RaceData[i][rtVeh5], "veh_5");
			orm_addvar_float(ormid, RaceData[i][rtStartPos1X], "start_1_x");
			orm_addvar_float(ormid, RaceData[i][rtStartPos1Y], "start_1_y");
			orm_addvar_float(ormid, RaceData[i][rtStartPos1Z], "start_1_z");
			orm_addvar_float(ormid, RaceData[i][rtStartPos1A], "start_1_a");
			orm_addvar_float(ormid, RaceData[i][rtStartPos2X], "start_2_x");
			orm_addvar_float(ormid, RaceData[i][rtStartPos2Y], "start_2_y");
			orm_addvar_float(ormid, RaceData[i][rtStartPos2Z], "start_2_z");
			orm_addvar_float(ormid, RaceData[i][rtStartPos2A], "start_2_a");
			orm_addvar_int(ormid, RaceData[i][rtCreator], "creator");
			orm_addvar_int(ormid, RaceData[i][rtFastestRacer], "fastest_racer");
			orm_addvar_int(ormid, RaceData[i][rtFastestTime], "fastest_time");
			orm_addvar_int(ormid, RaceData[i][rtMaxCP], "max_cp");
            orm_addvar_string(ormid, RaceData[i][rtName], 24, "name");
            orm_addvar_string(ormid, RaceData[i][rtDes], 144, "description");

			orm_setkey(ormid, "id");

			RaceData[i][rtType] = type;
			RaceData[i][rtMaxRacers] = maxracers;
			RaceData[i][rtVeh1] = veh1;
			RaceData[i][rtVeh2] = veh2;
			RaceData[i][rtVeh3] = veh3;
			RaceData[i][rtVeh4] = veh4;
			RaceData[i][rtVeh5] = veh5;
			RaceData[i][rtFastestTime] = 86400000;
			mysql_format(DEFAULT_SESSION, RaceData[i][rtName], 24, name);
			mysql_format(DEFAULT_SESSION, RaceData[i][rtDes], 144, text);
			orm_insert(ormid);
			k = i;
			break;
		}
	}
	return k;
}

static DeleteRace(raceid)
{
	if(RaceData[raceid][rtType] > RACE_NONE)
	{
		printf("赛道编号 %d 已被删除", RaceData[raceid][rtID]);
	    DeleteAllRaceCheckPoint(RaceData[raceid][rtID]);
		DestroyDynamicMapIcon(RaceData[raceid][rtMapIcon]);
		DestroyDynamic3DTextLabel(RaceData[raceid][rt3DText]);
		DeleteGPS(RaceData[raceid][rtGPS]);
	}
	orm_delete(RaceData[raceid][ORM_ID]);
	orm_destroy(RaceData[raceid][ORM_ID]);
	RaceData[raceid] = EMPTY_RACEDATA;
}

stock LoadRaceCheckPoints(raceid, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_RCP; i < y; i++)
	{
		RCPData[raceid][i] = EMPTY_RCPDATA;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `rcpdata` WHERE `raceid`='%d'", RaceData[raceid][rtID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = RCPData[raceid][field][ORM_ID] = orm_create("rcpdata");

		orm_addvar_int(ormid, RCPData[raceid][field][rcpID], "id");
		orm_addvar_int(ormid, RCPData[raceid][field][rcpCreated], "created");
		orm_addvar_int(ormid, RCPData[raceid][field][rcpRaceID], "raceid");
		orm_addvar_int(ormid, RCPData[raceid][field][rcpOrder], "order");
		orm_addvar_float(ormid, RCPData[raceid][field][rcpX], "x");
        orm_addvar_float(ormid, RCPData[raceid][field][rcpY], "y");
        orm_addvar_float(ormid, RCPData[raceid][field][rcpZ], "z");

		RCPData[raceid][field][rcpRaceID] = RaceData[raceid][rtID];
		RCPData[raceid][field][rcpOrder] = field+1;
		orm_setkey(ormid, "raceid");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveRaceCheckPoints(raceid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_RCP; l < j; l++)
	{
		if(RCPData[raceid][l][rcpCreated] > 0)
		{
			RCPData[raceid][l][rcpRaceID] = RaceData[raceid][rtID];
			RCPData[raceid][l][rcpOrder] = l+1;
			orm_save(RCPData[raceid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(RCPData[raceid][l][ORM_ID]);
				RCPData[raceid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(RCPData[raceid][l][ORM_ID] != ORM:0)
			{
				orm_delete(RCPData[raceid][l][ORM_ID]);

				RCPData[raceid][l][rcpID] =
				RCPData[raceid][l][rcpCreated] =
				RCPData[raceid][l][rcpRaceID] =
				RCPData[raceid][l][rcpOrder] = 0;
				RCPData[raceid][l][rcpX] =
				RCPData[raceid][l][rcpY] =
				RCPData[raceid][l][rcpZ] = 0.0;
				orm_destroy(RCPData[raceid][l][ORM_ID]);
				RCPData[raceid][l][ORM_ID] = ORM:0;
			}
		}
	}
}

stock bool:AddRaceCheckPoint(raceid, Float:x, Float:y, Float:z, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_RCP; l < j; l++)
	{
		if(!RCPData[raceid][l][rcpCreated])
		{
			new ORM:ormid = RCPData[raceid][l][ORM_ID] = orm_create("rcpdata");

            orm_addvar_int(ormid, RCPData[raceid][l][rcpID], "id");
			orm_addvar_int(ormid, RCPData[raceid][l][rcpCreated], "created");
			orm_addvar_int(ormid, RCPData[raceid][l][rcpRaceID], "raceid");
			orm_addvar_int(ormid, RCPData[raceid][l][rcpOrder], "order");
			orm_addvar_float(ormid, RCPData[raceid][l][rcpX], "x");
	        orm_addvar_float(ormid, RCPData[raceid][l][rcpY], "y");
	        orm_addvar_float(ormid, RCPData[raceid][l][rcpZ], "z");
			orm_setkey(ormid, "id");

            RCPData[raceid][l][rcpCreated] = 1;
			RCPData[raceid][l][rcpRaceID] = RaceData[raceid][rtID];
			RCPData[raceid][l][rcpOrder] = l+1;
			RCPData[raceid][l][rcpX] = x;
			RCPData[raceid][l][rcpY] = y;
			RCPData[raceid][l][rcpZ] = z;

			orm_insert(RCPData[raceid][l][ORM_ID]);
			return true;
		}
	}
	return false;
}

stock bool:DeleteRaceCheckPoint(raceid, rcpid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	if(RCPData[raceid][rcpid][rcpRaceID] == RaceData[raceid][rtID])
	{
		orm_delete(RCPData[raceid][rcpid][ORM_ID]);
		orm_destroy(RCPData[raceid][rcpid][ORM_ID]);
		RCPData[raceid][rcpid][ORM_ID] = ORM:0;
		RCPData[raceid][rcpid] = EMPTY_RCPDATA;
		return true;
	}
	return false;
}

stock DeleteAllRaceCheckPoint(raceid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_RCP; l < j; l++)
	{
		if(RCPData[raceid][l][rcpRaceID] == RaceData[raceid][rtID])
		{
			orm_delete(RCPData[raceid][l][ORM_ID]);
			orm_destroy(RCPData[raceid][l][ORM_ID]);
			RCPData[raceid][l][ORM_ID] = ORM:0;
			RCPData[raceid][l] = EMPTY_RCPDATA;
		}
	}
}

PUBLIC:LoadGiftData()
{
	static r, c;
	for(r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = GiftData[r][ORM_ID] = orm_create("giftdata", MYSQL_SESSION_A);

        orm_addvar_int(ormid, GiftData[r][gfID], "id");
        orm_addvar_string(ormid, GiftData[r][gfTitle], 64, "Title");
		orm_addvar_int(ormid, GiftData[r][gfType], "Type");
		orm_addvar_int(ormid, GiftData[r][gfItemType], "ItemType");
		orm_addvar_int(ormid, GiftData[r][gfItemID], "ItemID");
		orm_addvar_int(ormid, GiftData[r][gfAmount], "Amount");
		orm_addvar_int(ormid, GiftData[r][gfLevel], "Level");
		orm_addvar_int(ormid, GiftData[r][gfYear], "Year");
		orm_addvar_int(ormid, GiftData[r][gfMonth], "Month");
		orm_addvar_int(ormid, GiftData[r][gfDate], "Date");
		orm_addvar_int(ormid, GiftData[r][gfStreak], "Streak");

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
		orm_load(ormid);
	}
	printf("已读取礼物资料, 共 %d 条", r);
}

PUBLIC:SaveGiftData()
{
	new Year, Month, Day;
	getdate(Year, Month, Day);
	for(new i, j = cache_num_rows(); i < j; i++)
	{
	    if(GiftData[i][gfType] == GIFT_DATE)
	    {
			if(GiftData[i][gfYear] < Year || (GiftData[i][gfYear] == Year && GiftData[i][gfMonth] < Month)
			||(GiftData[i][gfYear] == Year && GiftData[i][gfMonth] == Month && GiftData[i][gfDate] < Day))
			{//过期的礼物就删除
			    DeleteGiftData(i);
			    continue;
			}
		}
	    orm_save(GiftData[i][ORM_ID]);
	}
}

stock AddGiftData(title[], type, itemtype, itemid, amount, level=0, year=0, month=0, date=0, streak=0)
{
	static i, j, k;
	k = -1;
    for(i = 0, j = MAX_GIFTS; i < j; i++)
	{
		if(GiftData[i][gfType] == GIFT_NONE)
		{
		    new ORM:ormid = GiftData[i][ORM_ID] = orm_create("giftdata", MYSQL_SESSION_A);

	        orm_addvar_int(ormid, GiftData[i][gfID], "id");
	        orm_addvar_string(ormid, GiftData[i][gfTitle], 64, "Title");
			orm_addvar_int(ormid, GiftData[i][gfType], "Type");
			orm_addvar_int(ormid, GiftData[i][gfItemType], "ItemType");
			orm_addvar_int(ormid, GiftData[i][gfItemID], "ItemID");
			orm_addvar_int(ormid, GiftData[i][gfAmount], "Amount");
			orm_addvar_int(ormid, GiftData[i][gfLevel], "Level");
			orm_addvar_int(ormid, GiftData[i][gfYear], "Year");
			orm_addvar_int(ormid, GiftData[i][gfMonth], "Month");
			orm_addvar_int(ormid, GiftData[i][gfDate], "Date");
			orm_addvar_int(ormid, GiftData[i][gfStreak], "Streak");

			orm_setkey(ormid, "id");

			mysql_format(DEFAULT_SESSION, GiftData[i][gfTitle], 64, "%s", title);
			GiftData[i][gfType] = type,
			GiftData[i][gfItemType] = itemtype,
			GiftData[i][gfItemID] = itemid,
			GiftData[i][gfAmount] = amount,
			GiftData[i][gfLevel] = level,
			GiftData[i][gfYear] = year,
			GiftData[i][gfMonth] = month,
			GiftData[i][gfDate] = date,
			GiftData[i][gfStreak] = streak;

			orm_insert(ormid);
			k = i;
			break;
		}
	}
	return k;
}

stock DeleteGiftData(id)
{
	orm_delete(GiftData[id][ORM_ID]);
	orm_destroy(GiftData[id][ORM_ID]);
	GiftData[id] = EMPTY_GIFTDATA;
}

stock LoadPlayerGift(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
    for(new i = 0, y = MAX_PLAYER_GIFTS; i < y; i++)
	{
    	PlayerGift[playerid][i] = EMPTY_PLAYERGIFT;
    }

	CheckDatabaseConnecting(Session);
	static query[128], field, rows;

	mysql_format(Session, query, sizeof(query), "SELECT * FROM `playergift` WHERE `PlayerID`='%d'", pMySQLid);
	new Cache:c_query = mysql_query(Session, query);
	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = PlayerGift[playerid][field][ORM_ID] = orm_create("playergift");

		orm_addvar_int(ormid, PlayerGift[playerid][field][pgID], "id");
		orm_addvar_int(ormid, PlayerGift[playerid][field][pgPlayerID], "PlayerID");
		orm_addvar_string(ormid, PlayerGift[playerid][field][pgTitle], 64, "Title");
		orm_addvar_int(ormid, PlayerGift[playerid][field][pgItemType], "ItemType");
		orm_addvar_int(ormid, PlayerGift[playerid][field][pgItemID], "ItemID");
		orm_addvar_int(ormid, PlayerGift[playerid][field][pgAmount], "Amount");
		orm_addvar_int(ormid, PlayerGift[playerid][field][pgExpire], "Expire");

		PlayerGift[playerid][field][pgPlayerID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "PlayerID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SavePlayerGift(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION )
{
	CheckDatabaseConnecting(Session);
	static l, j;
	for(l = 0, j = MAX_PLAYER_GIFTS; l < j; l++)
	{
		if(PlayerGift[playerid][l][pgItemType] > ITEM_NONE)
		{
		    if(gettime() > PlayerGift[playerid][l][pgExpire])
		    {//过期未领取的奖励就删除
		        DeletePlayerGift(playerid, l);
		    }
		    else
		    {
				PlayerGift[playerid][l][pgPlayerID] = PlayerData[playerid][pID];
				orm_save(PlayerGift[playerid][l][ORM_ID]);
				if(disconnect)
				{
					//清除物件内容
					orm_destroy(PlayerGift[playerid][l][ORM_ID]);
					PlayerGift[playerid][l][ORM_ID] = ORM:0;
				}
			}
		}
		else
		{
			if(PlayerGift[playerid][l][ORM_ID] != ORM:0)
			{
				DeletePlayerGift(playerid, l);
			}
		}
	}
}

stock bool:GivePlayerGift(playerid, const title[], itemtype, itemid, amount, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);
	static l, j, k;

	for(l = 0, j = MAX_PLAYER_GIFTS, k = -1; l < j; l++)
	{
		if(PlayerGift[playerid][l][pgItemID] == 0)
		{
			if(k == -1)
			{
				k = l;
				break;
			}
		}
	}
	if(k != -1)
	{
		new ORM:ormid = PlayerGift[playerid][k][ORM_ID] = orm_create("playergift");

		orm_addvar_int(ormid, PlayerGift[playerid][k][pgID], "id");
		orm_addvar_int(ormid, PlayerGift[playerid][k][pgPlayerID], "PlayerID");
		orm_addvar_string(ormid, PlayerGift[playerid][k][pgTitle], 64, "Title");
		orm_addvar_int(ormid, PlayerGift[playerid][k][pgItemType], "ItemType");
		orm_addvar_int(ormid, PlayerGift[playerid][k][pgItemID], "ItemID");
		orm_addvar_int(ormid, PlayerGift[playerid][k][pgAmount], "Amount");
		orm_addvar_int(ormid, PlayerGift[playerid][k][pgExpire], "Expire");

		orm_setkey(ormid, "id");
		PlayerGift[playerid][k][pgPlayerID] = PlayerData[playerid][pID];

        PlayerGift[playerid][k][pgItemType] = itemtype,
		PlayerGift[playerid][k][pgItemID] = itemid,
		PlayerGift[playerid][k][pgAmount] = amount;
		PlayerGift[playerid][k][pgExpire] = gettime()+1209600;//14天后过期
		mysql_format(DEFAULT_SESSION, PlayerGift[playerid][k][pgTitle], 64, "%s", title);

		orm_insert(PlayerGift[playerid][k][ORM_ID]);
	}
	return true;
}

stock DeletePlayerGift(playerid, id)
{
    orm_delete(PlayerGift[playerid][id][ORM_ID]);
	orm_destroy(PlayerGift[playerid][id][ORM_ID]);
	PlayerGift[playerid][id] = EMPTY_PLAYERGIFT;
}

stock PlayerHaveGift(playerid)
{
	new i, k;
	for(new j = MAX_PLAYER_GIFTS; i < j; i++)
	{
		if(PlayerGift[playerid][i][pgPlayerID] == PlayerData[playerid][pID] && PlayerGift[playerid][i][pgItemType] > ITEM_NONE)
		{
			k++;
		}
	}
	return k;
}

PUBLIC:LoadGangZone()
{
	new i;
	for(new c = cache_num_rows(); i < c; i++)
	{
		new ORM:ormid = GangZone[i][ORM_ID] = orm_create("gangzone", MYSQL_SESSION_A);

        CreateGangZoneData(ormid, i);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, i);

  		orm_load(ormid, "CheckGangZone", "d", i);
	}
	printf("已读取地盘资料, 共 %d 条", i);
}

PUBLIC:CheckGangZone(id)
{
    if(orm_errno(GangZone[id][ORM_ID]) == ERROR_OK)
	{
	    GangZone[id][gzZone] = GangZoneCreate(GangZone[id][gzMinX], GangZone[id][gzMinY], GangZone[id][gzMaxX], GangZone[id][gzMaxY]);
		UpdateGangZone(id);
	}
	return 1;
}

PUBLIC:CreateGangZoneData(ORM:ormid, id)
{
    orm_addvar_int(ormid, GangZone[id][gzID], "id");
    orm_addvar_int(ormid, GangZone[id][gzCreated], "Created");
	orm_addvar_string(ormid, GangZone[id][gzName], 32, "Name");
    orm_addvar_int(ormid, GangZone[id][gzType], "Type");
    orm_addvar_int(ormid, GangZone[id][gzOwner], "Owner");
    orm_addvar_int(ormid, GangZone[id][gzLevel], "Level");
	orm_addvar_int(ormid, GangZone[id][gzDefense], "Defense");
    orm_addvar_int(ormid, GangZone[id][gzGain], "Gain");
    orm_addvar_int(ormid, GangZone[id][gzGainTimer], "GainTimer");
    orm_addvar_int(ormid, GangZone[id][gzStatus], "Status");
    orm_addvar_int(ormid, GangZone[id][gzTimer], "Timer");
    orm_addvar_int(ormid, GangZone[id][gzAttacker], "Attacker");
    orm_addvar_float(ormid, GangZone[id][gzMinX], "MinX");
	orm_addvar_float(ormid, GangZone[id][gzMinY], "MinY");
	orm_addvar_float(ormid, GangZone[id][gzMaxX], "MaxX");
	orm_addvar_float(ormid, GangZone[id][gzMaxY], "MaxY");
	orm_addvar_int(ormid, GangZone[id][gzSafezone], "Safezone");
}

PUBLIC:SaveGangZone()
{
    static Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
		orm_save(GangZone[r][ORM_ID]);
	}
	printf("已储存地盘资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

static CreateGangZone(type, name[], Float:minx, Float:miny, Float:maxx, Float:maxy, level=1, owner=GANG_ID_NONE)
{
	static i, j, k;
	k = -1;
    for(i = 0, j = MAX_GANGZONES; i < j; i++)
	{
		if(GangZone[i][gzCreated] == 0)
		{
		    new ORM:ormid = GangZone[i][ORM_ID] = orm_create("gangzone", MYSQL_SESSION_A);

	        CreateGangZoneData(ormid, i);

			orm_setkey(ormid, "id");

			GangZone[i][gzCreated] = 1,
			GangZone[i][gzOwner] = owner,
			GangZone[i][gzType] = type,
			GangZone[i][gzLevel] = 1,
			GangZone[i][gzStatus] = GZ_NORMAL,
			GangZone[i][gzDefense] = GetDefaultGangZoneDefense(level),
			GangZone[i][gzAttacker] = GANG_ID_NONE,
			GangZone[i][gzTimer] =
			GangZone[i][gzTimer2] = 0;
			GangZone[i][gzMinX] = minx,
			GangZone[i][gzMinY] = miny,
			GangZone[i][gzMaxX] = maxx,
			GangZone[i][gzMaxY] = maxy,
			GangZone[i][gzSafezone] = 0,
			mysql_format(DEFAULT_SESSION, GangZone[i][gzName], 32, "%s", name);
			orm_insert(ormid);

            GangZone[i][gzZone] = GangZoneCreate(minx, miny, maxx, maxy);
			k = i;
			UpdateGangZone(k);
			break;
		}
	}
	return k;
}

static DeleteGangZone(id)
{
	printf("地盘编号 %d 已被删除", GangZone[id][gzID]);
	GangZoneDestroy(GangZone[id][gzZone]);
    orm_delete(GangZone[id][ORM_ID]);
	orm_destroy(GangZone[id][ORM_ID]);
	GangZone[id] = EMPTY_GANGZONE;
}

stock IsPlayerInGangZone(playerid, id)
{
    static Float:px, Float:py, Float:pz;
    GetPlayerPos(playerid, px, py, pz);
    return (px > GangZone[id][gzMinX] && px < GangZone[id][gzMaxX] && py > GangZone[id][gzMinY] && py < GangZone[id][gzMaxY]);
}

stock GetPlayerGangZone(playerid)
{
    static i, j, k, Float:px, Float:py, Float:pz;
    if(GetPlayerVirtualWorld(playerid) != 0) return -1;
    GetPlayerPos(playerid, px, py, pz);
    for(i = 0, j = MAX_GANGZONES, k = -1; i < j; i++)
    {
        if(GangZone[i][gzCreated] == 0) continue;
        if(px > GangZone[i][gzMinX] && px < GangZone[i][gzMaxX] && py > GangZone[i][gzMinY] && py < GangZone[i][gzMaxY])
        {
			k = i;
		}
	}
    return k;
}

stock GetPlayerAlliesInGangZone(playerid, id)
{
    new count;
    ForEachPlayer(i)
    {
        if(PlayerData[i][pGang] == GANG_ID_NONE) continue;
        if(i != playerid)
        {
        	if(GetPlayerGangZone(i) == id && PlayerData[i][pGang] == PlayerData[playerid][pGang])
        	{
        		if(PlayerData[i][pCantJoin] == 0)
    		    {
       				count++;
         		}
       		}
		}
 	}
    return count;
}

stock GetAlliesInGangZone(id)
{
    static count;
    ForEachPlayer(i)
    {
        if(PlayerData[i][pGang] == GANG_ID_NONE) continue;
        if(GetPlayerGangZone(i) == id && PlayerData[i][pGang] == GangZone[id][gzOwner])
        {
            count++;
        }
    }
    return count;
}

stock GetAttackerInGangZone(id)
{
    new count;
    ForEachPlayer(i)
    {
        if(PlayerData[i][pGang] == GANG_ID_NONE) continue;
        if(GetPlayerGangZone(i) == id && PlayerData[i][pGang] != GangZone[id][gzOwner])
        {
            if(PlayerData[i][pGang] == GangZone[id][gzAttacker])
            {
            	if(GetGVarInt("AtkTurfID", i) == id && GetGVarInt("AttackingTurf", i) != 0)
            	{
            		count++;
           		}
			}
        }
    }
    return count;
}

stock ShowGangZoneForPlayer(id, playerid)
{
    static zone, gangid;
    if(GangZone[id][gzCreated] == 1)
	{
	    zone = GangZone[id][gzZone];
	    switch(GangZone[id][gzStatus])
	    {
	        case GZ_NORMAL:
			{
			    if(GangZone[id][gzOwner] == GANG_ID_NONE)
			    {
			    	GangZoneShowForPlayer(playerid, zone, 0xD8D8D888);
			    }
			    else
			    {
					gangid = GangSqlIDToID(GangZone[id][gzOwner]);
					GangZoneShowForPlayer(playerid, zone, (GangData[gangid][gColor] | 0x00000088));
				}
			}
			default:
			{
			    if(GangZone[id][gzOwner] == GANG_ID_NONE)
			    {
			    	GangZoneShowForPlayer(playerid, zone, 0xD8D8D855);
			    }
			    else
			    {
					gangid = GangSqlIDToID(GangZone[id][gzOwner]);
					GangZoneShowForPlayer(playerid, zone, (GangData[gangid][gColor] | 0x00000055));
				}
			}
		}
		if(GangZone[id][gzStatus] == GZ_UNDERATK) GangZoneFlashForPlayer(playerid, zone, 0xFC0000AA);
		if(GangZone[id][gzSafezone]) GangZoneShowForPlayer(playerid, zone, 0x7FFF00FF);
	}
}

stock HideGangZoneForPlayer(id, playerid)
{
    static zone;
    if(GangZone[id][gzCreated] == 1)
	{
	    zone = GangZone[id][gzZone];
	    GangZoneHideForPlayer(playerid, zone);
	    GangZoneStopFlashForPlayer(playerid, zone);
	}
}

stock UpdateGangZoneForPlayer(playerid)
{
	static i, j;
    if(PlayerData[playerid][pGang] == GANG_ID_NONE || GetPlayerVirtualWorld(playerid) > 0)
    {
        for(i = 0, j = MAX_GANGZONES; i < j; i++)
        {
            if(GangZone[i][gzCreated] == 0) continue;
            HideGangZoneForPlayer(i, playerid);
        }
    }
    else
    {
        for(i = 0, j = MAX_GANGZONES; i < j; i++)
        {
            if(GangZone[i][gzCreated] == 0) continue;
            ShowGangZoneForPlayer(i, playerid);
        }
    }
}

PUBLIC:UpdateGangZone(id)
{
	if(GangSqlIDToID(GangZone[id][gzOwner]) == -1)
	{
	    GangZone[id][gzOwner] = GANG_ID_NONE;
	}
	ForEachPlayer(i)
	{
	    if(PlayerData[i][pGang] == GANG_ID_NONE)
	    {
	        HideGangZoneForPlayer(id, i);
	    }
	    else
	    {
	        ShowGangZoneForPlayer(id, i);
	    }
	}
}

stock GetDefaultGangZoneDefense(zonelv)
{
	switch(zonelv)
	{
	    case 1: return 600;
	    case 2: return 900;
	    case 3: return 1200;
	    case 4: return 1500;
	    case 5: return 1800;
	    case 6: return 2400;
	    case 7: return 3000;
	    case 8: return 3600;
	}
	return 0;
}


stock GangWarEnd(id)
{
    GangZone[id][gzStatus] = GZ_CD;
	GangZone[id][gzTimer] = 600;
	GangZone[id][gzTimer2] = 0;
	GangZone[id][gzAttacker] = GANG_ID_NONE;
	ForEachPlayer(p)
	{
		if(GetGVarInt("CheckingTurf", p) == 0 && GetGVarInt("AttackingTurf", p) == 0) continue;
		if(GetGVarInt("ChkTurfID", p) == id)
		{
			DeleteGVar("AttackingTurf", p);
			DeleteGVar("AtkTurfID", p);
			HidePlayerTurfInfo(p);
		}
	}
	UpdateGangZone(id);
}

stock PlayerAttackTurf(playerid)
{
    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会成员");
    if(GetGVarInt("AttackingTurf", playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经在地盘战中");

	new gzid = GetPlayerGangZone(playerid);
	if(gzid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何地盘内");
	if(GangZone[gzid][gzSafezone]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法抢夺安全区");
    if(GetPlayerAlliesInGangZone(playerid, gzid) < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 地盘内成员不足2人");
    if(PlayerData[playerid][pCantJoin] > 0) return  SendClientMessage(playerid, COLOR_WHITE, "错误: 你因为挂机导致冷却10分钟");
    
	new
	string[144],
	defender = GangSqlIDToID(GangZone[gzid][gzOwner]),
	attacker = GangSqlIDToID(PlayerData[playerid][pGang]);

	if(GangZone[gzid][gzOwner] == PlayerData[playerid][pGang]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法攻击自己的地盘");
	if(GangZone[gzid][gzStatus] == GZ_CD) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地盘刚遭受过攻击,目前处于冷却状态");

	if(GangZone[gzid][gzOwner] == GANG_ID_NONE)
	{
		format(string, sizeof(string), "** 你为你的帮会占领了中立地盘 %s", GangZone[gzid][gzName]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		format(string, sizeof(string), "<<帮会>> %s 为帮会占领了新的地盘 %s", PlayerData[playerid][pName], GangZone[gzid][gzName]);
		SendGangMessage(GangData[attacker][gID], COLOR_FADERED, string);
		GangZone[gzid][gzOwner] = GangData[attacker][gID];
		Log(ganglog, INFO, "帮会%s(%d)占领了中立地盘%s(%d)", GangData[attacker][gName], GangData[attacker][gID], GangZone[gzid][gzName], GangZone[gzid][gzID]);
	}
	else
	{
		if(GangZone[gzid][gzStatus] == GZ_UNDERATK)
		{
		  	if(GangZone[gzid][gzAttacker] != PlayerData[playerid][pGang]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地盘正在遭受其他帮会的攻击");
		  	SetGVarInt("AttackingTurf", 30, playerid);
			SetGVarInt("AtkTurfID", gzid, playerid);
			ShowPlayerTurfInfo(playerid, gzid);
			format(string, sizeof(string), "<<帮会>> %s 加入了对敌对帮会{%06x}%s[%s]"#TEXT_FADERED"地盘%s的攻击", PlayerData[playerid][pName], GangData[defender][gColor] >>> 8, GangData[defender][gName], GangData[defender][gShort], GangZone[gzid][gzName]);
			SendGangMessage(GangData[attacker][gID], COLOR_FADERED, string);
		}
		else
		{
			SetGVarInt("AttackingTurf", 30, playerid);
			SetGVarInt("AtkTurfID", gzid, playerid);
			ShowPlayerTurfInfo(playerid, gzid);
			format(string, sizeof(string), "<<帮会>> %s 对敌对帮会{%06x}%s[%s]"#TEXT_FADERED"的地盘%s发起进攻", PlayerData[playerid][pName], GangData[defender][gColor] >>> 8, GangData[defender][gName], GangData[defender][gShort], GangZone[gzid][gzName]);
			SendGangMessage(GangData[attacker][gID], COLOR_FADERED, string);

			format(string, sizeof(string), "<<帮会>> 敌对帮会{%06x}%s[%s]"#TEXT_YELLOW"的%s对我们的地盘%s发起了进攻", GangData[attacker][gColor] >>> 8, GangData[attacker][gName], GangData[attacker][gShort], PlayerData[playerid][pName], GangZone[gzid][gzName]);
			SendGangMessage(GangData[defender][gID], COLOR_YELLOW, string);
			SendGangMessage(GangData[defender][gID], COLOR_LIGHTBLUE, "** 打开帮会介面的"#TEXT_YELLOW"帮会地盘"#TEXT_LIGHTBLUE"可以查看该地盘目前的状态");
			GangZone[gzid][gzStatus] = GZ_UNDERATK;
			GangZone[gzid][gzAttacker] = GangData[attacker][gID];
			GangZone[gzid][gzTimer] = 900;
			GangZone[gzid][gzTimer2] = 0;
			Log(ganglog, INFO, "帮会%s(%d)对帮会%s(%d)的地盘%s(%d)发动了攻击", GangData[attacker][gName], GangData[attacker][gID], GangData[defender][gName], GangData[defender][gID], GangZone[gzid][gzName], GangZone[gzid][gzID]);
		}
		format(string, sizeof(string), "** 你对属于帮会 {%06x}%s[%s] "#TEXT_YELLOW"的地盘%s发起了攻击", GangData[defender][gColor] >>> 8, GangData[defender][gName], GangData[defender][gShort], GangZone[gzid][gzName]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
   		SendClientMessage(playerid, COLOR_LIGHTBLUE, "** 在地盘战的时间内,当你待在这个地盘时将会持续耗减这个地盘的"#TEXT_YELLOW"防御度");
		SendClientMessage(playerid, COLOR_LIGHTBLUE, "** 当你击杀"#TEXT_LIGHTRED"守方成员"#TEXT_LIGHTBLUE"时将会额外破坏这个地盘的防御度"#TEXT_FADEGREEN"30点");
		SendClientMessage(playerid, COLOR_LIGHTBLUE, "** 反之当你或你的成员被击杀的话将会恢复这个地盘的防御度"#TEXT_YELLOW"60点");
		SendClientMessage(playerid, COLOR_FADEGREEN, "** 如果在时间结束以前你与你的成员顺利将这里的防御度归零,这个地盘的拥有权将变为你的帮会");
	}
	UpdatePlayerColor(playerid);
	UpdateGangZone(gzid);
	return 1;
}
stock ShowPlayerTurfInfo(playerid, id)
{
	SetGVarInt("CheckingTurf", 1, playerid);
	SetGVarInt("ChkTurfID", id, playerid);
	UpdatePlayerColor(playerid);
	ShowPlayerRightTD(playerid, RTD_GZDEF);
	ShowPlayerRightTD(playerid, RTD_GZTIMER);
}

stock HidePlayerTurfInfo(playerid)
{
    DeleteGVar("CheckingTurf", playerid);
    UpdatePlayerColor(playerid);
	HidePlayerRightTD(playerid, RTD_GZDEF);
	HidePlayerRightTD(playerid, RTD_GZTIMER);
}

PUBLIC:LoadEstateData()
{
	static i, c;
	for(i = 0, c = cache_num_rows(); i < c; i++)
	{
		new ORM:ormid = EstateData[i][ORM_ID] = orm_create("estatedata", MYSQL_SESSION_A);

        CreateEstateData(ormid, i);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, i);

  		orm_load(ormid, "CheckEstateData", "d", i);
	}
	printf("已读取地产资料, 共 %d 条", i);
}

PUBLIC:CheckEstateData(eid)
{
    if(orm_errno(EstateData[eid][ORM_ID]) == ERROR_OK)
	{
     	EstateData[eid][eTPID] = -1;
     	LoadEstateItem(eid);
		UpdateEstate(eid);
		SetGVarInt("EstateData", 1, EstateData[eid][eID]);
		SetGVarInt("EstateDataID", eid, EstateData[eid][eID]);
	}
	return 1;
}

PUBLIC:CreateEstateData(ORM:ormid, id)
{
    orm_addvar_int(ormid, EstateData[id][eID], "id");
    orm_addvar_int(ormid, EstateData[id][eCreated], "Created");
	orm_addvar_string(ormid, EstateData[id][eName], 32, "Name");
    orm_addvar_int(ormid, EstateData[id][eType], "Type");
    orm_addvar_int(ormid, EstateData[id][eStyle], "Style");
    orm_addvar_int(ormid, EstateData[id][ePrice], "Price");
	orm_addvar_float(ormid, EstateData[id][eX], "X");
	orm_addvar_float(ormid, EstateData[id][eY], "Y");
	orm_addvar_float(ormid, EstateData[id][eZ], "Z");
	orm_addvar_float(ormid, EstateData[id][eA], "Angle");
	orm_addvar_int(ormid, EstateData[id][eOwnerType], "OwnerType");
    orm_addvar_int(ormid, EstateData[id][eOwnerID], "OwnerID");
    orm_addvar_int(ormid, EstateData[id][eLocked], "Locked");
    orm_addvar_int(ormid, EstateData[id][eType2], "Type2");
    orm_addvar_int(ormid, EstateData[id][eProdTime], "Produce_Time");
    orm_addvar_int(ormid, EstateData[id][eSwitch], "Switch");
    orm_addvar_int(ormid, EstateData[id][eUpgrade1], "Upgrade1");
    orm_addvar_int(ormid, EstateData[id][eUpgrade2], "Upgrade2");
    orm_addvar_int(ormid, EstateData[id][eUpgrade3], "Upgrade3");
    orm_addvar_int(ormid, EstateData[id][eMoney], "Money");
    orm_addvar_int(ormid, EstateData[id][eDate], "Date");
    orm_addvar_int(ormid, EstateData[id][eRentable], "Rentable");
    orm_addvar_int(ormid, EstateData[id][eRent], "Rent");
    orm_addvar_int(ormid, EstateData[id][ePassOn], "PassOn");
    orm_addvar_string(ormid, EstateData[id][ePass], 32, "Pass");
}

PUBLIC:SaveEstateData()
{
    static Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
	    SaveEstateItem(r);
		orm_save(EstateData[r][ORM_ID]);
	}
	printf("已储存地产资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

static CreateEstate(type, name[], style, price, Float:posx, Float:posy, Float:posz, Float:posangle)
{
	static i, j, k;
	k = -1;
    for(i = 0, j = MAX_ESTATES; i < j; i++)
	{
		if(EstateData[i][eType] == 0)
		{
		    new ORM:ormid = EstateData[i][ORM_ID] = orm_create("estatedata", MYSQL_SESSION_A);

	        CreateEstateData(ormid, i);

			orm_setkey(ormid, "id");
            orm_insert(ormid, "CheckEstateData", "d", i);

			EstateData[i][eCreated] = 1,
			EstateData[i][eType] = type,
			EstateData[i][eStyle] = style,
			EstateData[i][ePrice] = price,
			EstateData[i][eUpgrade1] = 0,
			EstateData[i][eUpgrade2] = 0,
			EstateData[i][eUpgrade3] = 0,
			EstateData[i][eMoney] = 0;
			EstateData[i][eX] = posx,
			EstateData[i][eY] = posy,
			EstateData[i][eZ] = posz,
			EstateData[i][eA] = posangle;
			EstateData[i][ePass] = 0;
			mysql_format(DEFAULT_SESSION, EstateData[i][eName], 32, "%s", name);
			mysql_format(DEFAULT_SESSION, EstateData[i][ePass], 32, " ");

			EstateData[i][eTPID] = -1;
			k = i;
			Log(estatelog, INFO, "地产%s(游戏内ID:%d|资料库ID:%d)已新增完成", name, k, EstateData[i][eID]);
			break;
		}
	}
	return k;
}

static DeleteEstate(id)
{
	if(EstateData[id][eTPID] != -1)
	{
    	if(IsValidTP(EstateData[id][eTPID])) DeleteTP(EstateData[id][eTPID]);
    }
    if(RemoveAllEstateVehicles(id) && RemoveAllPlayersFromEstate(id) && DeleteAllEstateItems(id))
    {
		orm_delete(EstateData[id][ORM_ID]);
		orm_destroy(EstateData[id][ORM_ID]);
		EstateData[id] = EMPTY_ESTATEDATA;
		printf("地产编号 %d 已被删除", EstateData[id][eID]);
		Log(estatelog, INFO, "地产%s(游戏内ID:%d|资料库ID:%d)已被删除", EstateData[id][eID], id, EstateData[id][eID]);
	}
}

stock LoadEstateItem(eid, MySQL:Session = DEFAULT_SESSION)
{
	new i, y, query[128], field, rows;
    for(i = 0, y = MAX_ITEMS; i < y; i++)
	{
		EstateItem[eid][i] = EMPTY_ESTITEM;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `estateitem` WHERE `EstateID`='%d'", EstateData[eid][eID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = EstateItem[eid][field][ORM_ID] = orm_create("estateitem");

		orm_addvar_int(ormid, EstateItem[eid][field][eiID], "id");
		orm_addvar_int(ormid, EstateItem[eid][field][eiOwnerID], "OwnerID");
		orm_addvar_int(ormid, EstateItem[eid][field][eiType], "ItemType");
		orm_addvar_int(ormid, EstateItem[eid][field][eiItemID], "ItemID");
		orm_addvar_int(ormid, EstateItem[eid][field][eiEstateID], "EstateID");
		orm_addvar_int(ormid, EstateItem[eid][field][eiCount], "Count");

		EstateItem[eid][field][eiEstateID] = EstateData[eid][eID];
		orm_setkey(ormid, "EstateID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveEstateItem(eid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	for(new l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(EstateItem[eid][l][eiCount] > 0)
		{
			EstateItem[eid][l][eiEstateID] = EstateData[eid][eID];
			orm_save(EstateItem[eid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(EstateItem[eid][l][ORM_ID]);
				EstateItem[eid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(EstateItem[eid][l][ORM_ID] != ORM:0)
			{
				orm_delete(EstateItem[eid][l][ORM_ID]);
				orm_destroy(EstateItem[eid][l][ORM_ID]);
				EstateItem[eid][l] = EMPTY_ESTITEM;
			}
		}
	}
}

stock GiveEstateItem(eid, ownerid, type, id, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, k = -1, j = MAX_ITEMS; l < j; l++)
	{
		if(EstateItem[eid][l][eiType] == type && EstateItem[eid][l][eiItemID] == id)
		{
		    EstateItem[eid][l][eiCount] += count;
		    if(EstateItem[eid][l][eiCount] < 1)
		    {
		        orm_delete(EstateItem[eid][l][ORM_ID]);
				orm_destroy(EstateItem[eid][l][ORM_ID]);
				EstateItem[eid][l] = EMPTY_ESTITEM;
			}
			k = -1;//如果前面发现有空栏位,但是后续发现有相同道具的时候,取消空栏位的确认
			break;
		}
		else if(EstateItem[eid][l][eiType] == ITEM_NONE)
		{
		    if(k == -1) k = l;//有空栏位,纪录空栏位顺位
		}
	}//整个回圈确认是否有空栏位检查完之后
	if(k != -1)//道具栏位确认为空,将空栏位k带入新值
	{
		if(count < 0) return 0;
		new ORM:ormid = EstateItem[eid][k][ORM_ID] = orm_create("estateitem");

	    orm_addvar_int(ormid, EstateItem[eid][k][eiID], "id");
	    orm_addvar_int(ormid, EstateItem[eid][k][eiOwnerID], "OwnerID");
		orm_addvar_int(ormid, EstateItem[eid][k][eiType], "ItemType");
		orm_addvar_int(ormid, EstateItem[eid][k][eiItemID], "ItemID");
		orm_addvar_int(ormid, EstateItem[eid][k][eiEstateID], "EstateID");
		orm_addvar_int(ormid, EstateItem[eid][k][eiCount], "Count");
		orm_setkey(ormid, "id");

        EstateItem[eid][k][eiEstateID] = EstateData[eid][eID];
        EstateItem[eid][k][eiOwnerID] = ownerid;
		EstateItem[eid][k][eiType] = type;
		EstateItem[eid][k][eiItemID] = id;
		EstateItem[eid][k][eiCount] = count;

		orm_insert(EstateItem[eid][k][ORM_ID]);
	}
	return 1;
}

stock DeleteAllEstateItems(eid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(EstateItem[eid][l][eiEstateID] == EstateData[eid][eID] && EstateItem[eid][l][eiType] != ITEM_NONE)
		{
         	orm_delete(EstateItem[eid][l][ORM_ID]);
			orm_destroy(EstateItem[eid][l][ORM_ID]);
			EstateItem[eid][l] = EMPTY_ESTITEM;
		}
	}
  	return 1;
}

stock EstateHaveItem(eid, itemtype, itemid)
{
	static i, j;
	for(i = 0, j = MAX_ITEMS; i < j; i++)
	{
		if(EstateItem[eid][i][eiType] != itemtype) continue;
		if(EstateItem[eid][i][eiItemID] == itemid)
		{
			return EstateItem[eid][i][eiCount];
		}
	}
	return 0;
}

stock GetEstateSpace(eid)
{
	new style = EstateData[eid][eStyle];
	switch(EstateData[eid][eType])
	{
		case ESTATE_SUITE:
		{
		    switch(EstateStyle_Suite[style][esLevel])
		    {
		        case 1..5: return 250;
		    }
		}
		case ESTATE_HOUSE:
		{
		    switch(EstateStyle_House[style][esLevel])
		    {
		        case 1..5: return 400;
		    }
		}
		case ESTATE_OFFICE:
		{
		    switch(EstateStyle_Office[style][esLevel])
		    {
		        case 1,2: return 400;
		        case 3: return 800;
		    }
		}
		case ESTATE_CLUBHOUSE:
		{
		    switch(EstateStyle_Clubhouse[style][esLevel])
		    {
		        case 1..5: return 500;
		    }
		}
		case ESTATE_HANGAR:
		{
		    switch(EstateStyle_Hangar[style][esLevel])
		    {
		        case 1..5: return 200;
		    }
		}
		case ESTATE_FACTORY:
		{
		    switch(EstateStyle_Factory[style][esLevel])
		    {
		        case 1..5:
				{
					if(EstateData[eid][eUpgrade2] == 1) return 2000;
					else return 1000;
				}
		    }
		}
		case ESTATE_WAREHOUSE:
		{
		    switch(EstateStyle_Warehouse[style][esLevel])
		    {
		        case 1: return 1000;
		        case 2: return 2000;
		        case 3: return 4000;
		        case 4: return 10000;
		        case 5: return 20000;
		    }
		}
	}
	return 0;
}

stock GetEstateUsedSpace(eid)
{
	static i, j, m;
    for(i = m = 0, j = MAX_ITEMS; i < j; i++)
	{
	    switch(EstateItem[eid][i][eiType])
	    {
	        case ITEM_NONE: continue;
	        case ITEM_USE: m += ItemsList_USE[EstateItem[eid][i][eiItemID]][iuSpace]*EstateItem[eid][i][eiCount];
	        case ITEM_EQ: m += ItemsList_EQ[EstateItem[eid][i][eiItemID]][ieqSpace]*EstateItem[eid][i][eiCount];
	        case ITEM_WEAPON: m += WeaponsList[EstateItem[eid][i][eiItemID]][wSpace];
	    }
	}
	return m;
}

stock GetEstateRemainingSpace(eid)
{
	return GetEstateSpace(eid) - GetEstateUsedSpace(eid);
}

stock EstateSqlIDToID(esqlid)
{
    if(GetGVarInt("EstateData", esqlid) == 1 && esqlid != -1)
	{
		return GetGVarInt("EstateDataID", esqlid);
	}
	return -1;
}

stock AddEstateOwner(eid, ownertype, ownersqlid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	if(EstateData[eid][eOwnerType] == ESTATE_OWNER_NONE)
	{
	    EstateData[eid][eOwnerType] = ownertype;
	    EstateData[eid][eOwnerID] = ownersqlid;
	    EstateData[eid][eDate] = getdate();
		UpdateEstate(eid);
		return 1;
	}
	return 0;
}

stock DeleteEstateOwner(eid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    if(EstateData[eid][eOwnerType] != ESTATE_OWNER_NONE)
	{
	    EstateData[eid][eLocked] =
	    EstateData[eid][eOwnerType] =
	    EstateData[eid][eOwnerID] =
	    EstateData[eid][eRentable] =
	    EstateData[eid][eRent] =
		EstateData[eid][eDate] = 0;
		UpdateEstate(eid);
		RemoveAllEstateVehicles(eid);
		RemoveAllPlayersFromEstate(eid);
		return 1;
	}
	return 0;
}

stock RemoveAllPlayersFromEstate(eid)
{
    ForEachPlayer(i)
	{
		if(GetPlayerVirtualWorld(i) == EstateData[eid][eID])
		{
		    SetPlayerPos_Fix(i, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
		    SetPlayerInterior(i, 0);
		    SetPlayerVirtualWorld(i, 0);
		    SendClientMessage(i, COLOR_WHITE, "** 你所在的地产发生了变化,请先离开");
		}
	}
	return 1;
}

stock GetEstateStoredVehicles(eid)
{
	static i, j, k;
	for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
	{
	    if(VehData[i][vStatus] != VEH_STORED) continue;
	    if(VehData[i][vStoredEstate] == EstateData[eid][eID])
	    {
	        k++;
	    }
    }
	return k;
}

stock GetEstateVehicleSpace(eid)
{
	new style = EstateData[eid][eStyle];
	switch(EstateData[eid][eType])
	{
		case ESTATE_SUITE:
		{
		    switch(EstateStyle_Suite[style][esLevel])
		    {
		        case 4,5: return 1;
		    }
		}
		case ESTATE_HOUSE:
		{
		    switch(EstateStyle_House[style][esLevel])
		    {
		        case 1,2: return 1;
		        case 3: return 2;
		        case 4,5: return 3;
		    }
		}
		case ESTATE_OFFICE:
		{
		    switch(EstateStyle_Office[style][esLevel])
		    {
		        case 1: return 5;
		        case 2: return 10;
		        case 3: return 15;
		    }
		}
		case ESTATE_CLUBHOUSE:
		{
		    switch(EstateStyle_Clubhouse[style][esLevel])
		    {
		        case 1: return 5;
		        case 2: return 10;
		        case 3: return 15;
		    }
		}
		case ESTATE_HANGAR:
		{
		    switch(EstateStyle_Hangar[style][esLevel])
		    {
		        case 1: return 15;
		        case 2: return 25;
		        case 3: return 35;
		    }
		}
		case ESTATE_WAREHOUSE,ESTATE_FACTORY:
		{
		    return 2;
		}
	}
	return 0;
}

stock CanEstateStoreVehicle(eid)
{
	new stored = GetEstateStoredVehicles(eid), space = GetEstateVehicleSpace(eid);
	if(stored < space) return 1;
	return 0;
}

stock RemoveAllEstateVehicles(eid)
{
    for(new i = 1, j = GetVehiclePoolSize(); i <= j; i++)
	{
	    if(VehData[i][vStatus] != VEH_STORED) continue;
	    if(VehData[i][vStoredEstate] == EstateData[eid][eID])
	    {
	        VehData[i][vStatus] = VEH_NORMAL;
			SetVehicleToRespawn(i);
			SetVehicleVirtualWorld(i, 0);
	    }
    }
    return 1;
}

PUBLIC:UpdateEstate(id)
{
	if(EstateData[id][eCreated] == 1)
	{
	    static style, text[128], worldid;
	    style = EstateData[id][eStyle];
	    if(EstateData[id][eTPID] != -1)
	    {
	    	if(IsValidTP(EstateData[id][eTPID])) DeleteTP(EstateData[id][eTPID]);
	    }
		switch(EstateData[id][eType])
		{
		    case ESTATE_SUITE:
		    {
		        worldid = EstateData[id][eID];//内部worldid为地产ID
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"套房:"#TEXT_PINKRED"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"套房:"#TEXT_PINKRED"%s[%d]\n"#TEXT_WHITE"拥有者:"#TEXT_YELLOW"%s", EstateData[id][eName], id, GetPlayerSqlName(EstateData[id][eOwnerID]));
		        }

                EstateData[id][eTPID] = AddTP(1273, -1, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Suite[style][esX], EstateStyle_Suite[style][esY], EstateStyle_Suite[style][esZ], EstateStyle_Suite[style][esA],
				0, 0, EstateStyle_Suite[style][esInt], worldid, text, GPS_PROP_SUITE, ESTATE_SUITE, id);
			}
			case ESTATE_HOUSE:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"房屋:"#TEXT_FADEGREEN"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        	EstateData[id][eTPID] = AddTP(1273, 31, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
					EstateStyle_House[style][esX], EstateStyle_House[style][esY], EstateStyle_House[style][esZ], EstateStyle_House[style][esA],
					0, 0, EstateStyle_House[style][esInt], worldid, text, GPS_PROP_HOUSE, ESTATE_HOUSE, id);
		        }
		        else
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"房屋:"#TEXT_FADEGREEN"%s[%d]\n"#TEXT_WHITE"拥有者:"#TEXT_YELLOW"%s", EstateData[id][eName], id, GetPlayerSqlName(EstateData[id][eOwnerID]));
		        	EstateData[id][eTPID] = AddTP(1273, 32, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
					EstateStyle_House[style][esX], EstateStyle_House[style][esY], EstateStyle_House[style][esZ], EstateStyle_House[style][esA],
					0, 0, EstateStyle_House[style][esInt], worldid, text, GPS_PROP_HOUSE, ESTATE_HOUSE, id);
		        }
			}
			case ESTATE_CLUBHOUSE:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"会所:"#TEXT_FADERED"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else
		        {
		            new gangid = GangSqlIDToID(EstateData[id][eOwnerID]);
		            if(gangid == -1)//代表该帮会已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"会所:"#TEXT_FADERED"%s[%d]\n"#TEXT_WHITE"拥有帮会:{%06x}%s", EstateData[id][eName], id, GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
		        }
                EstateData[id][eTPID] = AddTP(19522, 44, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Clubhouse[style][esX], EstateStyle_Clubhouse[style][esY], EstateStyle_Clubhouse[style][esZ], EstateStyle_Clubhouse[style][esA],
				0, 0, EstateStyle_Clubhouse[style][esInt], worldid, text, GPS_PROP_CLUBHOUSE, ESTATE_CLUBHOUSE, id);
			}
			case ESTATE_OFFICE:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"办公室:"#TEXT_VIOLET"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else
		        {
		            new comid = CompanySqlIDToID(EstateData[id][eOwnerID]);
		            if(comid == -1)//代表该企业已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"办公室:"#TEXT_VIOLET"%s[%d]\n"#TEXT_WHITE"拥有企业:{%06x}%s", EstateData[id][eName], id, CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		        }
                EstateData[id][eTPID] = AddTP(1272, 35, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Office[style][esX], EstateStyle_Office[style][esY], EstateStyle_Office[style][esZ], EstateStyle_Office[style][esA],
				0, 0, EstateStyle_Office[style][esInt], worldid, text, GPS_PROP_OFFICE, ESTATE_OFFICE, id);
			}
			case ESTATE_WAREHOUSE:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"仓库:"#TEXT_ORANGE"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_COMPANY)
		        {
		            new comid = CompanySqlIDToID(EstateData[id][eOwnerID]);
		            if(comid == -1)//代表该企业已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"仓库:"#TEXT_ORANGE"%s[%d]\n"#TEXT_WHITE"拥有企业:{%06x}%s", EstateData[id][eName], id, CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_GANG)
		        {
		            new gangid = GangSqlIDToID(EstateData[id][eOwnerID]);
		            if(gangid == -1)//代表该帮会已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"仓库:"#TEXT_ORANGE"%s[%d]\n"#TEXT_WHITE"拥有帮会:{%06x}%s", EstateData[id][eName], id, GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
		        }
                EstateData[id][eTPID] = AddTP(19523, 51, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Warehouse[style][esX], EstateStyle_Warehouse[style][esY], EstateStyle_Warehouse[style][esZ], EstateStyle_Warehouse[style][esA],
				0, 0, EstateStyle_Warehouse[style][esInt], worldid, text, GPS_PROP_WAREHOUSE, ESTATE_WAREHOUSE, id);
			}
			case ESTATE_FACTORY:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"工厂:"#TEXT_YELLOW"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_COMPANY)
		        {
		            new comid = CompanySqlIDToID(EstateData[id][eOwnerID]);
		            if(comid == -1)//代表该企业已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"工厂:"#TEXT_YELLOW"%s[%d]\n"#TEXT_WHITE"拥有企业:{%06x}%s", EstateData[id][eName], id, CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_GANG)
		        {
		            new gangid = GangSqlIDToID(EstateData[id][eOwnerID]);
		            if(gangid == -1)//代表该帮会已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"工厂:"#TEXT_YELLOW"%s[%d]\n"#TEXT_WHITE"拥有帮会:{%06x}%s", EstateData[id][eName], id, GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
		        }
                EstateData[id][eTPID] = AddTP(19524, 11, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Factory[style][esX], EstateStyle_Factory[style][esY], EstateStyle_Factory[style][esZ], EstateStyle_Factory[style][esA],
				0, 0, EstateStyle_Factory[style][esInt], worldid, text, GPS_PROP_FACTORY, ESTATE_FACTORY, id);
			}
			case ESTATE_BOATYARD:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"船坞:"#TEXT_BLUEGREEN"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], EstateData[id][ePrice]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_COMPANY)
		        {
		            new comid = CompanySqlIDToID(EstateData[id][eOwnerID]);
		            if(comid == -1)//代表该企业已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"船坞:"#TEXT_BLUEGREEN"%s[%d]\n"#TEXT_WHITE"拥有企业:{%06x}%s", EstateData[id][eName], id, CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_GANG)
		        {
		            new gangid = GangSqlIDToID(EstateData[id][eOwnerID]);
		            if(gangid == -1)//代表该帮会已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"船坞:"#TEXT_BLUEGREEN"%s[%d]\n"#TEXT_WHITE"拥有帮会:{%06x}%s", EstateData[id][eName], id, GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
		        }
                EstateData[id][eTPID] = AddTP(19523, 9, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Boatyard[style][esX], EstateStyle_Boatyard[style][esY], EstateStyle_Boatyard[style][esZ], EstateStyle_Boatyard[style][esA],
				0, 0, EstateStyle_Boatyard[style][esInt], worldid, text, GPS_PROP_BOATYARD, ESTATE_BOATYARD, id);
			}
			case ESTATE_HANGAR:
		    {
		        worldid = EstateData[id][eID];
		        if(EstateData[id][eOwnerType] == ESTATE_OWNER_NONE)
		        {
		        	format(text, sizeof(text), ""#TEXT_WHITE"机库:"#TEXT_SKYBLUE"%s[%d]\n"#TEXT_WHITE"价钱:"#TEXT_FADEGREEN"$%d", EstateData[id][eName], id, EstateData[id][ePrice]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_COMPANY)
		        {
		            new comid = CompanySqlIDToID(EstateData[id][eOwnerID]);
		            if(comid == -1)//代表该企业已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"机库:"#TEXT_SKYBLUE"%s[%d]\n"#TEXT_WHITE"拥有企业:{%06x}%s", EstateData[id][eName], id, CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		        }
		        else if(EstateData[id][eOwnerType] == ESTATE_OWNER_GANG)
		        {
		            new gangid = GangSqlIDToID(EstateData[id][eOwnerID]);
		            if(gangid == -1)//代表该帮会已经不存在,删除地产拥有人
		            {
		                DeleteEstateOwner(id);
		                return;
		            }
		        	format(text, sizeof(text), ""#TEXT_WHITE"机库:"#TEXT_SKYBLUE"%s[%d]\n"#TEXT_WHITE"拥有帮会:{%06x}%s", EstateData[id][eName], id, GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
		        }
                EstateData[id][eTPID] = AddTP(19523, 5, EstateData[id][eX], EstateData[id][eY], EstateData[id][eZ], EstateData[id][eA],
				EstateStyle_Hangar[style][esX], EstateStyle_Hangar[style][esY], EstateStyle_Hangar[style][esZ], EstateStyle_Hangar[style][esA],
				0, 0, EstateStyle_Hangar[style][esInt], worldid, text, GPS_PROP_HANGAR, ESTATE_HANGAR, id);
			}
		}
	}
}

static PlayerCanSetEstate(playerid, eid)
{
    if(EstateData[eid][eOwnerType] == ESTATE_OWNER_PLAYER && EstateData[eid][eOwnerID] == PlayerData[playerid][pID])
	{
		return 1;
	}
	else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY && EstateData[eid][eOwnerID] == PlayerData[playerid][pCompany])
	{
	    new comid = CompanySqlIDToID(EstateData[eid][eOwnerID]);
	    if(GetPlayerCompanyRank(playerid) >= CompanyData[comid][comER])
	    {
			return 1;
		}
	}
	else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG && EstateData[eid][eOwnerID] == PlayerData[playerid][pGang])
	{
		new gangid = GangSqlIDToID(EstateData[eid][eOwnerID]);
	    if(GetPlayerGangRank(playerid) >= GangData[gangid][gER])
	    {
			return 1;
		}
	}
	return 0;
}

stock bool:IsPlayerEstate(playerid, eid)
{
	if(EstateData[eid][eOwnerType] == ESTATE_OWNER_PLAYER && EstateData[eid][eOwnerID] == PlayerData[playerid][pID])
	{
		return true;
	}
	return false;
}

stock bool:IsCompanyEstate(csqlid, eid)
{
	if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY && EstateData[eid][eOwnerID] == csqlid)
	{
		return true;
	}
	return false;
}

stock bool:IsGangEstate(gsqlid, eid)
{
	if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG && EstateData[eid][eOwnerID] == gsqlid)
	{
		return true;
	}
	return false;
}

stock bool:IsCompanyHaveOffice(csqlid)
{
    for(new i = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eType] != ESTATE_OFFICE) continue;
	    if(EstateData[i][eOwnerID] == csqlid)
		{
		    return true;
		}
	}
	return false;
}

stock bool:IsGangHaveClubhouse(gsqlid)
{

    for(new i, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eType] != ESTATE_CLUBHOUSE) continue;
	    if(EstateData[i][eOwnerID] == gsqlid)
		{
		    return true;
		}
	}
	return false;
}
//Company
PUBLIC:LoadCompanyData()
{
	new i, c;
	for(i = 0, c = cache_num_rows(); i < c; i++)
	{
		new ORM:ormid = CompanyData[i][ORM_ID] = orm_create("companydata", MYSQL_SESSION_A);

        CreateCompanyData(ormid, i);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, i);

		orm_load(ormid, "CheckCompanyData", "d", i);
	}
	printf("已读取企业资料, 共 %d 条", i);
}

PUBLIC:CheckCompanyData(comid)
{
    if(orm_errno(CompanyData[comid][ORM_ID]) == ERROR_OK)
	{
     	LoadCompanyMember(comid);
     	LoadRadioTrack(comid);
     	SetGVarInt("CompanyData", 1, CompanyData[comid][comID]);
     	SetGVarInt("CompanyDataID", comid, CompanyData[comid][comID]);
	}
	return 1;
}

PUBLIC:CreateCompanyData(ORM:ormid, id)
{
    orm_addvar_int(ormid, CompanyData[id][comID], "id");
    orm_addvar_int(ormid, CompanyData[id][comCreated], "Created");
	orm_addvar_string(ormid, CompanyData[id][comName], 16, "Name");
	orm_addvar_int(ormid, CompanyData[id][comCEO], "CEO");
	orm_addvar_int(ormid, CompanyData[id][comFund], "Fund");
	orm_addvar_int(ormid, CompanyData[id][comColor], "Color");
	orm_addvar_int(ormid, CompanyData[id][comOpen], "Open");
	orm_addvar_string(ormid, CompanyData[id][comR1], 16, "R1");
	orm_addvar_string(ormid, CompanyData[id][comR2], 16, "R2");
	orm_addvar_string(ormid, CompanyData[id][comR3], 16, "R3");
	orm_addvar_string(ormid, CompanyData[id][comR4], 16, "R4");
	orm_addvar_string(ormid, CompanyData[id][comR5], 16, "R5");
	orm_addvar_int(ormid, CompanyData[id][comPostR], "PostRank");
	orm_addvar_int(ormid, CompanyData[id][comFundR], "FundRank");
	orm_addvar_int(ormid, CompanyData[id][comRankR], "RankRank");
	orm_addvar_int(ormid, CompanyData[id][comER], "EstateRank");
	orm_addvar_int(ormid, CompanyData[id][comAoFR], "AoFRank");
	orm_addvar_int(ormid, CompanyData[id][comVehR], "VehicleRank");
	orm_addvar_int(ormid, CompanyData[id][comGoodsR], "GoodsRank");
	orm_addvar_int(ormid, CompanyData[id][comTaxi], "Taxi");
	orm_addvar_int(ormid, CompanyData[id][comBus], "Bus");
	orm_addvar_int(ormid, CompanyData[id][comHeli], "Helicopter");
	orm_addvar_int(ormid, CompanyData[id][comAirline], "Airline");
	orm_addvar_int(ormid, CompanyData[id][comBoat], "Boat");
	orm_addvar_int(ormid, CompanyData[id][comMedia], "Media");
	orm_addvar_int(ormid, CompanyData[id][comAnimal], "Animal");
	orm_addvar_int(ormid, CompanyData[id][comTrade], "Trade");
	orm_addvar_int(ormid, CompanyData[id][comTaxiFare1], "TaxiFare1");
	orm_addvar_int(ormid, CompanyData[id][comTaxiFare2], "TaxiFare2");
	orm_addvar_int(ormid, CompanyData[id][comBusFare], "BusFare");
	orm_addvar_int(ormid, CompanyData[id][comMediaFame], "MediaFame");
	orm_addvar_int(ormid, CompanyData[id][comMediaEarn], "MediaEarn");
	orm_addvar_string(ormid, CompanyData[id][comRadioName], 24, "RadioName");
	orm_addvar_int(ormid, CompanyData[id][comRadioAir], "RadioAir");
	orm_addvar_int(ormid, CompanyData[id][comRadioTrack], "RadioTrack");
	orm_addvar_int(ormid, CompanyData[id][comRadioLoop], "RadioLoop");
	orm_addvar_string(ormid, CompanyData[id][comTVName], 24, "TVName");
	orm_addvar_string(ormid, CompanyData[id][comCatalog], 128, "Catalog");
}

PUBLIC:SaveCompanyData()
{
    new Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
		orm_save(CompanyData[r][ORM_ID]);
		SaveCompanyMember(r);
		SaveRadioTrack(r);
	}
	printf("已储存企业资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

stock CreateCompany(ownerid, const name[], color)
{
    for(new i, j = MAX_COMPANIES; i < j; i++)
	{
		if(CompanyData[i][comCreated] == 0)
		{
		    new ORM:ormid = CompanyData[i][ORM_ID] = orm_create("companydata", MYSQL_SESSION_A);

	        CreateCompanyData(ormid, i);
            orm_setkey(ormid, "id");

			CompanyData[i][comCreated] = 1,
			CompanyData[i][comCEO] = ownerid,
			CompanyData[i][comColor] = color,
			CompanyData[i][comPostR] = 3,
			CompanyData[i][comFundR] = 4,
			CompanyData[i][comRankR] = 5,
			CompanyData[i][comER] = 5;
   			CompanyData[i][comAoFR] = 4;
   			CompanyData[i][comVehR] = 5;
   			CompanyData[i][comGoodsR] = 5;

			// 使用 mysql_format 对任何需要储存到MySQL的字串进行 安全格式化
			// 比如最后为特殊字符 将会引发相当于MySQL攻击的效果 (无法正常query)
			// 这里例子为 频道 电台   最后变为  \\?\\ \\n 等
			// 或是签到的到 由于字串长度不够 最后会变成\\n换行
			// 使用 mysql_format 安全转译后会变为 \\\n 变为正常的字串
			mysql_format(DEFAULT_SESSION, CompanyData[i][comName], 16, "%s", name);
			mysql_format(DEFAULT_SESSION, CompanyData[i][comR1], 16, "职员");
			mysql_format(DEFAULT_SESSION, CompanyData[i][comR2], 16, "组长");
			mysql_format(DEFAULT_SESSION, CompanyData[i][comR3], 16, "部长");
			mysql_format(DEFAULT_SESSION, CompanyData[i][comR4], 16, "副总");
			mysql_format(DEFAULT_SESSION, CompanyData[i][comR5], 16, "总裁");
			mysql_format(DEFAULT_SESSION, CompanyData[i][comCatalog], 128, " ");

			// company name + \xXX \xXX (8) = 16 + 8 = 24
			mysql_format(DEFAULT_SESSION, CompanyData[i][comRadioName], 24, "%s电台", name);
			mysql_format(DEFAULT_SESSION, CompanyData[i][comTVName], 24, "%s频道", name);

            orm_insert(ormid, "CheckCompanyData", "d", i);
			return i;
		}
	}
	return -1;
}

static DeleteCompany(id)
{
	printf("企业编号 %d 已被删除", CompanyData[id][comID]);

    if(DeleteAllCompanyProperty(id) && DeleteAllCompanyMember(id) && DeleteAllRadioTrack(id))
    {
		orm_delete(CompanyData[id][ORM_ID]);
		orm_destroy(CompanyData[id][ORM_ID]);
		CompanyData[id] = EMPTY_COMPANYDATA;
	}
}

stock CompanySqlIDToID(sqlid)
{
    if(GetGVarInt("CompanyData", sqlid) == 1 && sqlid != -1)
	{
		return GetGVarInt("CompanyDataID", sqlid);
	}
	return -1;
}

stock LoadCompanyMember(comid, MySQL:Session = DEFAULT_SESSION)
{
	new i, y, query[128], field, rows;
    for(i = 0, y = MAX_CMEMBERS; i < y; i++)
	{
		CompanyMember[comid][i] = EMPTY_CMEMBER;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `companymember` WHERE `CompanyID`='%d'", CompanyData[comid][comID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = CompanyMember[comid][field][ORM_ID] = orm_create("companymember");

		orm_addvar_int(ormid, CompanyMember[comid][field][cmID], "id");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmComID], "CompanyID");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmMemberID], "MemberID");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmRank], "Rank");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmPoint], "Point");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmJoined], "Joined");
		orm_addvar_string(ormid, CompanyMember[comid][field][cmInfo], 256, "Info");
		orm_addvar_int(ormid, CompanyMember[comid][field][cmBisBoss], "BisBoss");

		CompanyMember[comid][field][cmComID] = CompanyData[comid][comID];
		orm_setkey(ormid, "CompanyID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveCompanyMember(comid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_CMEMBERS; l < j; l++)
	{
		if(CompanyMember[comid][l][cmRank] > 0)
		{
			CompanyMember[comid][l][cmComID] = CompanyData[comid][comID];
			orm_save(CompanyMember[comid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(CompanyMember[comid][l][ORM_ID]);
				CompanyMember[comid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(CompanyMember[comid][l][ORM_ID] != ORM:0)
			{
				orm_delete(CompanyMember[comid][l][ORM_ID]);

				CompanyMember[comid][l][cmID] =
				CompanyMember[comid][l][cmComID] =
				CompanyMember[comid][l][cmMemberID] =
				CompanyMember[comid][l][cmRank] =
				CompanyMember[comid][l][cmPoint] = 0;
				orm_destroy(CompanyMember[comid][l][ORM_ID]);
				CompanyMember[comid][l][ORM_ID] = ORM:0;
			}
		}
	}
}

stock AddCompanyMember(comid, psqlid, const info[], joined=MEMBER_JOINED, rank=1, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_CMEMBERS; l < j; l++)
	{
	    if(CompanyMember[comid][l][cmMemberID] == psqlid)//如果已经是成员了
	    {
	        CompanyMember[comid][l][cmComID] = CompanyData[comid][comID];
			CompanyMember[comid][l][cmRank] = rank;
            CompanyMember[comid][l][cmJoined] = joined;
			mysql_format(DEFAULT_SESSION, CompanyMember[comid][l][cmInfo], 256, "%s", info);

			orm_update(CompanyMember[comid][l][ORM_ID]);
			break;
		}
		else if(CompanyMember[comid][l][cmRank] == 0)
		{
			new ORM:ormid = CompanyMember[comid][l][ORM_ID] = orm_create("companymember");

	        orm_addvar_int(ormid, CompanyMember[comid][l][cmID], "id");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmComID], "CompanyID");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmMemberID], "MemberID");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmRank], "Rank");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmPoint], "Point");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmJoined], "Joined");
			orm_addvar_string(ormid, CompanyMember[comid][l][cmInfo], 256, "Info");
			orm_addvar_int(ormid, CompanyMember[comid][l][cmBisBoss], "BisBoss");
			orm_setkey(ormid, "id");

            CompanyMember[comid][l][cmComID] = CompanyData[comid][comID];
			CompanyMember[comid][l][cmMemberID] = psqlid;
			CompanyMember[comid][l][cmRank] = rank;
			CompanyMember[comid][l][cmPoint] = 0;
            CompanyMember[comid][l][cmJoined] = joined;
            CompanyMember[comid][l][cmBisBoss] = BIS_NONE;
            mysql_format(DEFAULT_SESSION, CompanyMember[comid][l][cmInfo], 256, "%s", info);

			orm_insert(CompanyMember[comid][l][ORM_ID]);
			break;
		}
	}
	return l;
}

stock DeleteCompanyMember(comid, psqlid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_CMEMBERS; l < j; l++)
	{
		if(CompanyMember[comid][l][cmComID] == CompanyData[comid][comID] && CompanyMember[comid][l][cmMemberID] == psqlid)
		{
		    if(CompanyMember[comid][l][cmJoined] == MEMBER_JOINED)
		    {
			    ForEachPlayer(p)
			 	{
			  		if(PlayerData[p][pID] == psqlid)
			  		{
						PlayerData[p][pCompany] = COMPANY_ID_NONE;
						if(PlayerData[p][pTitle] == TITLE_COMPANY) PlayerData[p][pTitle] = TITLE_NONE;
						break;
					}
			  	}
			}
	        orm_delete(CompanyMember[comid][l][ORM_ID]);
			orm_destroy(CompanyMember[comid][l][ORM_ID]);
			CompanyMember[comid][l] = EMPTY_CMEMBER;
			return 1;
		}
	}
	return 0;
}

stock DeleteAllCompanyMember(comid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    new l, j;
	for(l = 0, j = MAX_CMEMBERS; l < j; l++)
	{
		if(CompanyMember[comid][l][cmComID] == CompanyData[comid][comID] && CompanyMember[comid][l][cmRank] != 0)
		{
	        orm_delete(CompanyMember[comid][l][ORM_ID]);
			orm_destroy(CompanyMember[comid][l][ORM_ID]);
			CompanyMember[comid][l] = EMPTY_CMEMBER;
		}
	}
	ForEachPlayer(i)
 	{
  		if(PlayerData[i][pCompany] == CompanyData[comid][comID])
  		{
			PlayerData[i][pCompany] = COMPANY_ID_NONE;
			if(PlayerData[i][pTitle] == TITLE_COMPANY) PlayerData[i][pTitle] = TITLE_NONE;
		}
  	}
  	return 1;
}

stock GetCompanyMembers(comid)
{
	new i, j, m;
    for(i = m = 0, j = MAX_CMEMBERS; i < j; i++)
	{
		if(CompanyMember[comid][i][cmComID] == CompanyData[comid][comID] && CompanyMember[comid][i][cmJoined] == MEMBER_JOINED) m++;
	}
	return m;
}

stock GetCompanyOnlineMembers(comid)
{
	new m;
	ForEachPlayer(i)
	{
		if(PlayerData[i][pCompany] == CompanyData[comid][comID]) m++;
	}
	return m;
}

stock GetCompanyApplyMembers(comid)
{
	new i, j, m;
    for(i = m = 0, j = MAX_CMEMBERS; i < j; i++)
	{
		if(CompanyMember[comid][i][cmComID] == CompanyData[comid][comID] && CompanyMember[comid][i][cmJoined] == MEMBER_APPLYING) m++;
	}
	return m;
}

stock GetPlayerCompanyRank(playerid)
{
	new i, j,
	comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
    for(i = 0, j = MAX_CMEMBERS; i < j; i++)
	{
	    if(CompanyData[comid][comCreated] == 0) continue;
		if(CompanyMember[comid][i][cmMemberID] == PlayerData[playerid][pID] && CompanyMember[comid][i][cmJoined] == MEMBER_JOINED)
		{
			return CompanyMember[comid][i][cmRank];
		}
	}
	return 0;
}

stock GetCompanyEstates(comid)
{
	new i, j, k;
    for(i = k = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_COMPANY) continue;
		if(EstateData[i][eOwnerID] == CompanyData[comid][comID])
		{
			k++;
		}
	}
	return k;
}

stock GetCompanyEstatesBill(comid)
{
	new i, j, bill;
    for(i = bill = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_COMPANY) continue;
		if(EstateData[i][eOwnerID] == CompanyData[comid][comID])
		{
			switch(EstateData[i][eType])
			{
			    case ESTATE_OFFICE: bill += 60*PriceData[prcElec];
			    case ESTATE_HANGAR: bill += 60*PriceData[prcElec]*2;
			    case ESTATE_WAREHOUSE: bill += 60*PriceData[prcElec]*2;
			    case ESTATE_FACTORY:
				{
					if(EstateData[i][eSwitch] == 1) bill += 60*PriceData[prcElec]*4;
				}
			}
		}
	}
	return bill;
}

stock PlayerIDToCompanyMember(playerid, comid)
{
	new i, j;
    for(i = 0, j = MAX_CMEMBERS; i < j; i++)
	{
		if(CompanyMember[comid][i][cmComID] == PlayerData[playerid][pCompany] && CompanyMember[comid][i][cmMemberID] == PlayerData[playerid][pID]) return i;
	}
	return -1;
}

stock CompanyMemberToPlayerID(cmid, comid)
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pID] == CompanyMember[comid][cmid][cmMemberID]) return i;
	}
	return -1;
}

stock DeleteAllCompanyProperty(comid)
{
	new i, j;
	for(i = 1, j = GetVehiclePoolSize(); i <= j; i++)
	{
	    if(VehData[i][vType] != VTYPE_COMPANY) continue;
	    if(VehData[i][vOwner] == CompanyData[comid][comID])
	    {
	        DeleteVehicle(i);
	    }
	}
	for(i = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_COMPANY) continue;
	    if(EstateData[i][eOwnerID] == CompanyData[comid][comID])
	    {
	        DeleteEstateOwner(i);
	    }
	}
	return 1;
}

stock LoadRadioTrack(comid, MySQL:Session = DEFAULT_SESSION)
{
	new i, y, query[128], field, rows;
    for(i = 0, y = MAX_PLAYLISTS; i < y; i++)
	{
		RadioTrack[comid][i] = EMPTY_RADIOTRACK;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `radiotrack` WHERE `CompanyID`='%d'", CompanyData[comid][comID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = RadioTrack[comid][field][ORM_ID] = orm_create("radiotrack");

		orm_addvar_int(ormid, RadioTrack[comid][field][rdID], "id");
		orm_addvar_int(ormid, RadioTrack[comid][field][rdComID], "CompanyID");
		orm_addvar_int(ormid, RadioTrack[comid][field][rdType], "Type");
		orm_addvar_int(ormid, RadioTrack[comid][field][rdLength], "Length");
		orm_addvar_string(ormid, RadioTrack[comid][field][rdTitle], 64, "Title");
		orm_addvar_string(ormid, RadioTrack[comid][field][rdText], 144, "Text");
		orm_addvar_string(ormid, RadioTrack[comid][field][rdURL], 1024, "URL");

		RadioTrack[comid][field][rdComID] = CompanyData[comid][comID];
		orm_setkey(ormid, "CompanyID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveRadioTrack(comid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	new l, j;
	for(l = 0, j = MAX_PLAYLISTS; l < j; l++)
	{
		if(RadioTrack[comid][l][rdType] != RADIO_NONE)
		{
			RadioTrack[comid][l][rdComID] = CompanyData[comid][comID];
			orm_save(RadioTrack[comid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(RadioTrack[comid][l][ORM_ID]);
				RadioTrack[comid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(RadioTrack[comid][l][ORM_ID] != ORM:0)
			{
				orm_delete(RadioTrack[comid][l][ORM_ID]);
				orm_destroy(RadioTrack[comid][l][ORM_ID]);
				RadioTrack[comid][l] = EMPTY_RADIOTRACK;
			}
		}
	}
}

stock AddRadioTrack(comid, type, length, const title[], const url[], const text[], MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	new l, j;
	for(l = 0, j = MAX_PLAYLISTS; l < j; l++)
	{
	    if(RadioTrack[comid][l][rdType] == RADIO_NONE)
		{
			new ORM:ormid = RadioTrack[comid][l][ORM_ID] = orm_create("radiotrack");

	        orm_addvar_int(ormid, RadioTrack[comid][l][rdID], "id");
			orm_addvar_int(ormid, RadioTrack[comid][l][rdComID], "CompanyID");
			orm_addvar_int(ormid, RadioTrack[comid][l][rdType], "Type");
			orm_addvar_int(ormid, RadioTrack[comid][l][rdLength], "Length");
			orm_addvar_string(ormid, RadioTrack[comid][l][rdTitle], 64, "Title");
			orm_addvar_string(ormid, RadioTrack[comid][l][rdText], 144, "Text");
			orm_addvar_string(ormid, RadioTrack[comid][l][rdURL], 1024, "URL");
			orm_setkey(ormid, "id");

            RadioTrack[comid][l][rdID] = CompanyData[comid][comID];
			RadioTrack[comid][l][rdType] = type;
			RadioTrack[comid][l][rdLength] = length;
			mysql_format(DEFAULT_SESSION, RadioTrack[comid][l][rdTitle], 64, "%s", title);
            mysql_format(DEFAULT_SESSION, RadioTrack[comid][l][rdURL], 1024, "%s", url);
            mysql_format(DEFAULT_SESSION, RadioTrack[comid][l][rdText], 144, "%s", text);

			orm_insert(RadioTrack[comid][l][ORM_ID]);
			break;
		}
	}
	return l;
}

stock DeleteRadioTrack(comid, id, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	if(RadioTrack[comid][id][rdType] != RADIO_NONE)
	{
		orm_delete(RadioTrack[comid][id][ORM_ID]);
		orm_destroy(RadioTrack[comid][id][ORM_ID]);
		RadioTrack[comid][id] = EMPTY_RADIOTRACK;
		return 1;
	}
	return 0;
}

stock DeleteAllRadioTrack(comid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    new i, j;
	for(i = 0, j = MAX_PLAYLISTS; i < j; i++)
	{
		if(RadioTrack[comid][i][rdType] != RADIO_NONE)
		{
			orm_delete(RadioTrack[comid][i][ORM_ID]);
			orm_destroy(RadioTrack[comid][i][ORM_ID]);
			RadioTrack[comid][i] = EMPTY_RADIOTRACK;
		}
	}
  	return 1;
}

stock GetTotalRadioTrack(comid)
{
	new i, j, k;
	for(i = k = 0, j = MAX_PLAYLISTS; i < j; i++)
	{
		if(RadioTrack[comid][i][rdType] != RADIO_NONE)
		{
			k ++;
		}
	}
	return k;
}

stock GetRadioNextTrack(comid)
{
	new i, j, k,
	curtrack = CompanyData[comid][comRadioTrack];
	for(i = 0, k = -1, j = MAX_PLAYLISTS; i < j; i++)
	{
	    if(i <= curtrack) continue;
		if(RadioTrack[comid][i][rdType] == RADIO_NONE) continue;
		k = i;
		break;
	}
	return k;
}

stock PlayRadioTrack(comid, id)
{
    new string[144];
    switch(RadioTrack[comid][id][rdType])
	{
		case RADIO_MUSIC:
		{
			PlayRadioMusic(comid, RadioTrack[comid][id][rdURL]);
			format(string, sizeof(string), "<<%s>> %s", CompanyData[comid][comRadioName], RadioTrack[comid][id][rdText]);
			SendRadioMessage(comid, COLOR_BROWN, string);
		}
		case RADIO_TEXT:
		{
			format(string, sizeof(string), "<<%s>> %s", CompanyData[comid][comRadioName], RadioTrack[comid][id][rdText]);
			SendRadioMessage(comid, COLOR_BROWN, string);
		}
	}
	CompanyData[comid][comRadioTrack] = id,
	CompanyData[comid][comRadioAir] = RadioTrack[comid][id][rdLength]+1;
}

stock PlayRadioNextTrack(comid)
{
	new nxttrack;
    nxttrack = GetRadioNextTrack(comid);//抓下一首
	if(nxttrack == -1)//当后面都无曲目时
	{
	    if(CompanyData[comid][comRadioLoop] == 1)//循环播放开启时
		{
			CompanyData[comid][comRadioTrack] = -1;
			nxttrack = GetRadioNextTrack(comid);//重新抓下一首曲目
			if(nxttrack == -1)//若还是-1,代表伫列没有任何曲目,停止播放
			{
		        StopRadioAir(comid);
		        return 0;
			}
		}
		else
		{
			StopRadioAir(comid);
			return 0;
		}
	}
	PlayRadioTrack(comid, nxttrack);
	return 1;
}
//Gang
PUBLIC:LoadGangData()
{
	new i, c;
	for(i = 0, c = cache_num_rows(); i < c; i++)
	{
		new ORM:ormid = GangData[i][ORM_ID] = orm_create("gangdata", MYSQL_SESSION_A);

        CreateGangData(ormid, i);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, i);
		orm_load(ormid, "CheckGangData", "d", i);

	}
	printf("已读取帮会资料, 共 %d 条", i);
}

PUBLIC:CheckGangData(gangid)
{
    if(orm_errno(GangData[gangid][ORM_ID]) == ERROR_OK)
	{
     	LoadGangMember(gangid);
     	SetGVarInt("GangData", 1, GangData[gangid][gID]);
     	SetGVarInt("GangDataID", gangid, GangData[gangid][gID]);
	}
	return 1;
}

PUBLIC:CreateGangData(ORM:ormid, id)
{
    orm_addvar_int(ormid, GangData[id][gID], "id");
    orm_addvar_int(ormid, GangData[id][gCreated], "Created");
	orm_addvar_string(ormid, GangData[id][gName], 16, "Name");
	orm_addvar_string(ormid, GangData[id][gShort], 8, "Short");
	orm_addvar_int(ormid, GangData[id][gBoss], "Boss");
	orm_addvar_int(ormid, GangData[id][gFund], "Fund");
	orm_addvar_int(ormid, GangData[id][gColor], "Color");
	orm_addvar_int(ormid, GangData[id][gOpen], "Open");
	orm_addvar_string(ormid, GangData[id][gR1], 16, "R1");
	orm_addvar_string(ormid, GangData[id][gR2], 16, "R2");
	orm_addvar_string(ormid, GangData[id][gR3], 16, "R3");
	orm_addvar_string(ormid, GangData[id][gR4], 16, "R4");
	orm_addvar_string(ormid, GangData[id][gR5], 16, "R5");
	orm_addvar_int(ormid, GangData[id][gPostR], "PostRank");
	orm_addvar_int(ormid, GangData[id][gFundR], "FundRank");
	orm_addvar_int(ormid, GangData[id][gRankR], "RankRank");
	orm_addvar_int(ormid, GangData[id][gER], "EstateRank");
	orm_addvar_int(ormid, GangData[id][gAoFR], "AoFRank");
	orm_addvar_int(ormid, GangData[id][gVehR], "VehicleRank");
	orm_addvar_int(ormid, GangData[id][gGoodsR], "GoodsRank");
	orm_addvar_int(ormid, GangData[id][gTurfR], "TurfRank");
	orm_addvar_int(ormid, GangData[id][gType], "Type");
	orm_addvar_string(ormid, GangData[id][gCatalog], 128, "Catalog");
}

PUBLIC:SaveGangData()
{
    new Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
		orm_save(GangData[r][ORM_ID]);
		SaveGangMember(r);
	}
	printf("已储存帮会资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

static CreateGang(ownerid, type, name[], sname[], color)
{
	new i, j;
    for(i = 0, j = MAX_GANGS; i < j; i++)
	{
		if(GangData[i][gCreated] == 0)
		{
		    new ORM:ormid = GangData[i][ORM_ID] = orm_create("gangdata", MYSQL_SESSION_A);

	        CreateGangData(ormid, i);

			orm_setkey(ormid, "id");

			GangData[i][gCreated] = 1,
			GangData[i][gBoss] = ownerid,
			GangData[i][gType] = type,
			GangData[i][gColor] = color,
			GangData[i][gPostR] = 3,
			GangData[i][gFundR] = 5,
			GangData[i][gRankR] = 5,
			GangData[i][gER] = 5;
			GangData[i][gAoFR] = 5;
			GangData[i][gVehR] = 5;
			GangData[i][gGoodsR] = 5;
			GangData[i][gTurfR] = 5;
			mysql_format(DEFAULT_SESSION, GangData[i][gName], 16, "%s", name);
			mysql_format(DEFAULT_SESSION, GangData[i][gShort], 8, "%s", sname);
			mysql_format(DEFAULT_SESSION, GangData[i][gR1], 16, "副手");
			mysql_format(DEFAULT_SESSION, GangData[i][gR2], 16, "干部");
			mysql_format(DEFAULT_SESSION, GangData[i][gR3], 16, "干部长");
			mysql_format(DEFAULT_SESSION, GangData[i][gR4], 16, "副首领");
			mysql_format(DEFAULT_SESSION, GangData[i][gR5], 16, "首领");
			mysql_format(DEFAULT_SESSION, GangData[i][gCatalog], 128, " ");
			orm_insert(ormid, "CheckGangData", "d", i);
			return i;
		}
	}
	return -1;
}

static DeleteGang(id)
{
	printf("帮会编号 %d 已被删除", GangData[id][gID]);

    if(DeleteAllGangProperty(id) && DeleteAllGangMember(id))
    {
		orm_delete(GangData[id][ORM_ID]);
		orm_destroy(GangData[id][ORM_ID]);
		GangData[id] = EMPTY_GANGDATA;
	}
}

stock GangSqlIDToID(sqlid)
{
    if(GetGVarInt("GangData", sqlid) == 1 && sqlid != -1)
	{
		return GetGVarInt("GangDataID", sqlid);
	}
	return -1;
}

stock LoadGangMember(gangid, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_GMEMBERS; i < y; i++)
	{
		GangMember[gangid][i] = EMPTY_GMEMBER;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `gangmember` WHERE `GangID`='%d'", GangData[gangid][gID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = GangMember[gangid][field][ORM_ID] = orm_create("gangmember");

		orm_addvar_int(ormid, GangMember[gangid][field][gmID], "id");
		orm_addvar_int(ormid, GangMember[gangid][field][gmGangID], "GangID");
		orm_addvar_int(ormid, GangMember[gangid][field][gmMemberID], "MemberID");
		orm_addvar_int(ormid, GangMember[gangid][field][gmRank], "Rank");
		orm_addvar_int(ormid, GangMember[gangid][field][gmPoint], "Point");
		orm_addvar_int(ormid, GangMember[gangid][field][gmJoined], "Joined");
		orm_addvar_string(ormid, GangMember[gangid][field][gmInfo], 256, "Info");

		GangMember[gangid][field][gmGangID] = GangData[gangid][gID];
		orm_setkey(ormid, "GangID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveGangMember(gangid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_GMEMBERS; l < j; l++)
	{
		if(GangMember[gangid][l][gmRank] > 0)
		{
			GangMember[gangid][l][gmGangID] = GangData[gangid][gID];
			orm_save(GangMember[gangid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(GangMember[gangid][l][ORM_ID]);
				GangMember[gangid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(GangMember[gangid][l][ORM_ID] != ORM:0)
			{
				orm_delete(GangMember[gangid][l][ORM_ID]);

				GangMember[gangid][l][gmID] =
				GangMember[gangid][l][gmGangID] =
				GangMember[gangid][l][gmMemberID] =
				GangMember[gangid][l][gmRank] =
				GangMember[gangid][l][gmPoint] = 0;
				orm_destroy(GangMember[gangid][l][ORM_ID]);
				GangMember[gangid][l][ORM_ID] = ORM:0;
			}
		}
	}
}

stock AddGangMember(gangid, psqlid, const info[], joined=MEMBER_JOINED, rank=1, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_GMEMBERS; l < j; l++)
	{
	    if(GangMember[gangid][l][gmMemberID] == psqlid)//如果已经是成员了
	    {
	        GangMember[gangid][l][gmGangID] = GangData[gangid][gID];
			GangMember[gangid][l][gmRank] = rank;
            GangMember[gangid][l][gmJoined] = joined;
            mysql_format(DEFAULT_SESSION, GangMember[gangid][l][gmInfo], 256, "%s", info);

			orm_update(GangMember[gangid][l][ORM_ID]);
			break;
		}
		else if(GangMember[gangid][l][gmRank] == 0)
		{
			new ORM:ormid = GangMember[gangid][l][ORM_ID] = orm_create("gangmember");

	        orm_addvar_int(ormid, GangMember[gangid][l][gmID], "id");
			orm_addvar_int(ormid, GangMember[gangid][l][gmGangID], "GangID");
			orm_addvar_int(ormid, GangMember[gangid][l][gmMemberID], "MemberID");
			orm_addvar_int(ormid, GangMember[gangid][l][gmRank], "Rank");
			orm_addvar_int(ormid, GangMember[gangid][l][gmPoint], "Point");
			orm_addvar_int(ormid, GangMember[gangid][l][gmJoined], "Joined");
			orm_addvar_string(ormid, GangMember[gangid][l][gmInfo], 256, "Info");
			orm_setkey(ormid, "id");

            GangMember[gangid][l][gmGangID] = GangData[gangid][gID];
			GangMember[gangid][l][gmMemberID] = psqlid;
			GangMember[gangid][l][gmRank] = rank;
			GangMember[gangid][l][gmPoint] = 0;
            GangMember[gangid][l][gmJoined] = joined;
            mysql_format(DEFAULT_SESSION, GangMember[gangid][l][gmInfo], 256, "%s", info);

			orm_insert(GangMember[gangid][l][ORM_ID]);
			break;
		}
	}
	return l;
}

stock DeleteGangMember(gangid, psqlid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_GMEMBERS; l < j; l++)
	{
		if(GangMember[gangid][l][gmGangID] == GangData[gangid][gID] && GangMember[gangid][l][gmMemberID] == psqlid)
		{
		    if(GangMember[gangid][l][gmJoined] == MEMBER_JOINED)
		    {
			    ForEachPlayer(p)
			 	{
			  		if(PlayerData[p][pID] == psqlid)
			  		{
						PlayerData[p][pGang] = GANG_ID_NONE;
						if(PlayerData[p][pTitle] == TITLE_GANG || PlayerData[p][pTitle] == TITLE_GANG_FULL) PlayerData[p][pTitle] = TITLE_NONE;
						SetGVarInt("GangID", -1, p);
						break;
					}
			  	}
			}
	        orm_delete(GangMember[gangid][l][ORM_ID]);
			orm_destroy(GangMember[gangid][l][ORM_ID]);
			GangMember[gangid][l] = EMPTY_GMEMBER;
			return 1;
		}
	}
	return 0;
}

stock DeleteAllGangMember(gangid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    new l, j;
	for(l = 0, j = MAX_GMEMBERS; l < j; l++)
	{
		if(GangMember[gangid][l][gmGangID] == GangData[gangid][gID] && GangMember[gangid][l][gmRank] != 0)
		{
	        orm_delete(GangMember[gangid][l][ORM_ID]);
			orm_destroy(GangMember[gangid][l][ORM_ID]);
			GangMember[gangid][l] = EMPTY_GMEMBER;
		}
	}
	ForEachPlayer(i)
 	{
  		if(PlayerData[i][pGang] == GangData[gangid][gID])
		{
			PlayerData[i][pGang] = GANG_ID_NONE;
			if(PlayerData[i][pTitle] == TITLE_GANG || PlayerData[i][pTitle] == TITLE_GANG_FULL) PlayerData[i][pTitle] = TITLE_NONE;
		}
  	}
  	return 1;
}

stock GetGangMembers(gangid)
{
	new i, j, m;
    for(i = m = 0, j = MAX_GMEMBERS; i < j; i++)
	{
		if(GangMember[gangid][i][gmGangID] == GangData[gangid][gID] && GangMember[gangid][i][gmJoined] == MEMBER_JOINED) m++;
	}
	return m;
}

stock GetGangOnlineMembers(gangid)
{
	new m;
	ForEachPlayer(i)
	{
		if(PlayerData[i][pGang] == GangData[gangid][gID]) m++;
	}
	return m;
}

stock GetGangApplyMembers(gangid)
{
	new i, j, m;
    for(i = m = 0, j = MAX_GMEMBERS; i < j; i++)
	{
		if(GangMember[gangid][i][gmGangID] == GangData[gangid][gID] && GangMember[gangid][i][gmJoined] == MEMBER_APPLYING) m++;
	}
	return m;
}

stock GetPlayerGangRank(playerid)
{
	new i, j, gangid;
	gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
    for(i = 0, j = MAX_GMEMBERS; i < j; i++)
	{
	    if(GangData[gangid][gCreated] == 0) continue;
		if(GangMember[gangid][i][gmMemberID] == PlayerData[playerid][pID] && GangMember[gangid][i][gmJoined] == MEMBER_JOINED)
		{
			return GangMember[gangid][i][gmRank];
		}
	}
	return 0;
}

stock GetGangEstates(gangid)
{
	new i, j, k;
    for(i = k = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_GANG) continue;
		if(EstateData[i][eOwnerID] == GangData[gangid][gID])
		{
			k++;
		}
	}
	return k;
}

stock GetGangEstatesBill(gangid)
{
	new i, j, bill;
    for(i = bill = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_GANG) continue;
		if(EstateData[i][eOwnerID] == GangData[gangid][gID])
		{
			switch(EstateData[i][eType])
			{
			    case ESTATE_CLUBHOUSE: bill += 60*PriceData[prcElec];
			    case ESTATE_HANGAR: bill += 60*PriceData[prcElec]*2;
			    case ESTATE_WAREHOUSE: bill += 60*PriceData[prcElec]*2;
			    case ESTATE_FACTORY:
				{
					if(EstateData[i][eSwitch] == 1) bill += 60*PriceData[prcElec]*4;
				}
			}
		}
	}
	return bill;
}

stock PlayerIDToGangMember(playerid, gangid)
{
	new i, j;
    for(i = 0, j = MAX_GMEMBERS; i < j; i++)
	{
		if(GangMember[gangid][i][gmGangID] == PlayerData[playerid][pGang] && GangMember[gangid][i][gmMemberID] == PlayerData[playerid][pID]) return i;
	}
	return -1;
}

stock GangMemberToPlayerID(gmid, gangid)
{
    ForEachPlayer(i)
	{
		if(GangMember[gangid][gmid][gmMemberID] == PlayerData[i][pID]) return i;
	}
	return -1;
}

stock DeleteAllGangProperty(gangid)
{
	new i, j;
	for(i = 1, j = GetVehiclePoolSize(); i <= j; i++)
	{
	    if(VehData[i][vType] != VTYPE_GANG) continue;
	    if(VehData[i][vOwner] == GangData[gangid][gID])
	    {
	        DeleteVehicle(i);
	    }
	}
	for(i = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_GANG) continue;
	    if(EstateData[i][eOwnerID] == GangData[gangid][gID])
	    {
	        DeleteEstateOwner(i);
	    }
	}
	for(i = 0, j = MAX_GANGZONES; i < j; i++)
    {
        if(GangZone[i][gzCreated] == 0) continue;
        if(GangZone[i][gzOwner] == GangData[gangid][gID])
	    {
	        GangZone[i][gzOwner] = GANG_ID_NONE;
	    }
	}
	return 1;
}

//Department
PUBLIC:LoadDepartment()
{
	static i, c;
	for(i = 0, c = cache_num_rows(); i < c; i++)
	{
		new ORM:ormid = Department[i][ORM_ID] = orm_create("department", MYSQL_SESSION_A);

        CreateDeptData(ormid, i);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, i);
		orm_load(ormid, "CheckDeptData", "d", i);
	}
	printf("已读取公部门资料, 共 %d 条", i);
}

PUBLIC:CheckDeptData(id)
{
    if(orm_errno(Department[id][ORM_ID]) == ERROR_OK)
	{
     	LoadDeptItem(id);
	}
	return 1;
}

PUBLIC:CreateDeptData(ORM:ormid, id)
{
    orm_addvar_int(ormid, Department[id][dpID], "id");
	orm_addvar_string(ormid, Department[id][dpName], 16, "Name");
	orm_addvar_int(ormid, Department[id][dpCreated], "Created");
	orm_addvar_int(ormid, Department[id][dpLeader], "Leader");
	orm_addvar_int(ormid, Department[id][dpFund], "Fund");
	orm_addvar_string(ormid, Department[id][dpR1], 16, "R1");
	orm_addvar_string(ormid, Department[id][dpR2], 16, "R2");
	orm_addvar_string(ormid, Department[id][dpR3], 16, "R3");
	orm_addvar_string(ormid, Department[id][dpR4], 16, "R4");
	orm_addvar_string(ormid, Department[id][dpR5], 16, "R5");
	orm_addvar_string(ormid, Department[id][dpCatalog], 128, "Catalog");
}

PUBLIC:SaveDepartment()
{
    static Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
		orm_save(Department[r][ORM_ID]);
		SaveDeptItem(r);
	}
	printf("已储存公部门资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

stock LoadDeptItem(id, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_ITEMS; i < y; i++)
	{
		DeptItem[id][i] = EMPTY_DPTITEM;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `deptitem` WHERE `DeptID`='%d'", id);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = DeptItem[id][field][ORM_ID] = orm_create("deptitem");

		orm_addvar_int(ormid, DeptItem[id][field][diID], "id");
		orm_addvar_int(ormid, DeptItem[id][field][diType], "ItemType");
		orm_addvar_int(ormid, DeptItem[id][field][diItemID], "ItemID");
		orm_addvar_int(ormid, DeptItem[id][field][diDeptID], "DeptID");
		orm_addvar_int(ormid, DeptItem[id][field][diCount], "Count");

		DeptItem[id][field][diDeptID] = id;
		orm_setkey(ormid, "DeptID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveDeptItem(id, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(DeptItem[id][l][diCount] > 0)
		{
			DeptItem[id][l][diDeptID] = id;
			orm_save(DeptItem[id][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(DeptItem[id][l][ORM_ID]);
				DeptItem[id][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(DeptItem[id][l][ORM_ID] != ORM:0)
			{
				orm_delete(DeptItem[id][l][ORM_ID]);
				orm_destroy(DeptItem[id][l][ORM_ID]);
				DeptItem[id][l] = EMPTY_DPTITEM;
			}
		}
	}
}

stock GiveDeptItem(id, type, itemid, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, k = -1, j = MAX_ITEMS; l < j; l++)
	{
		if(DeptItem[id][l][diType] == type && DeptItem[id][l][diItemID] == itemid)
		{
		    DeptItem[id][l][diCount] += count;
		    if(DeptItem[id][l][diCount] < 1)
		    {
		        orm_delete(DeptItem[id][l][ORM_ID]);
				orm_destroy(DeptItem[id][l][ORM_ID]);
				DeptItem[id][l] = EMPTY_DPTITEM;
			}
			k = -1;
			break;
		}
		else if(DeptItem[id][l][diType] == ITEM_NONE)
		{
		    if(k == -1) k = l;
		}
	}
	if(k != -1)
	{
		if(count < 0) return 0;
		new ORM:ormid = DeptItem[id][k][ORM_ID] = orm_create("deptitem");

	    orm_addvar_int(ormid, DeptItem[id][k][diID], "id");
		orm_addvar_int(ormid, DeptItem[id][k][diType], "ItemType");
		orm_addvar_int(ormid, DeptItem[id][k][diItemID], "ItemID");
		orm_addvar_int(ormid, DeptItem[id][k][diDeptID], "DeptID");
		orm_addvar_int(ormid, DeptItem[id][k][diCount], "Count");
		orm_setkey(ormid, "id");

        DeptItem[id][k][diDeptID] = id;
		DeptItem[id][k][diType] = type;
		DeptItem[id][k][diItemID] = itemid;
		DeptItem[id][k][diCount] = count;

		orm_insert(DeptItem[id][k][ORM_ID]);
	}
	return 1;
}

stock DeleteAllDeptItems(id, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(DeptItem[id][l][diDeptID] == id && DeptItem[id][l][diType] != ITEM_NONE)
		{
         	orm_delete(DeptItem[id][l][ORM_ID]);
			orm_destroy(DeptItem[id][l][ORM_ID]);
			DeptItem[id][l] = EMPTY_DPTITEM;
		}
	}
  	return 1;
}

stock DeptHaveItem(id, itemtype, itemid)
{
	static i, j;
	for(i = 0, j = MAX_ITEMS; i < j; i++)
	{
		if(DeptItem[id][i][diType] != itemtype) continue;
		if(DeptItem[id][i][diItemID] == itemid)
		{
			return DeptItem[id][i][diCount];
		}
	}
	return 0;
}

stock GetDeptSpace(id)
{
	switch(id)
	{
		case DEPT_POLICE: return 10000;
		case DEPT_MEDIC: return 10000;
		case DEPT_GOVERNMENT: return 5000;
		case DEPT_ARMY: return 5000;
		case DEPT_COUNSELOR: return 5000;
	}
	return 0;
}

stock GetDeptUsedSpace(id)
{
	static i, j, m;
    for(i = m = 0, j = MAX_ITEMS; i < j; i++)
	{
	    switch(DeptItem[id][i][diType])
	    {
	        case ITEM_NONE: continue;
	        case ITEM_USE: m += ItemsList_USE[DeptItem[id][i][diItemID]][iuSpace]*DeptItem[id][i][diCount];
	        case ITEM_EQ: m += ItemsList_EQ[DeptItem[id][i][diItemID]][ieqSpace]*DeptItem[id][i][diCount];
	        case ITEM_WEAPON: m += WeaponsList[DeptItem[id][i][diItemID]][wSpace];
	    }
	}
	return m;
}

stock GetDeptRemainingSpace(id)
{
	return GetDeptSpace(id) - GetDeptUsedSpace(id);
}

stock GetDeptApplyMembers(id)
{
	static count;
	count = 0;
    ForEachPlayer(i)
    {
        if(PlayerData[i][pDeptApply] == id) count++;
    }
	return count;
}

//Bus Route
PUBLIC:LoadBusRoute()
{
	static r, c;
	for(r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = BusRoute[r][ORM_ID] = orm_create("busroute", MYSQL_SESSION_A);

		CreateBusRouteData(ormid, r);

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
		orm_load(ormid, "CheckBusRoute", "d", r);
	}
	printf("已读取赛道资料, 共 %d 条", r);
}

stock CreateBusRouteData(ORM:ormid, id)
{
    orm_addvar_int(ormid, BusRoute[id][brID], "id");
    orm_addvar_int(ormid, BusRoute[id][brCreated], "Created");
	orm_addvar_int(ormid, BusRoute[id][brComID], "CompanyID");
	orm_addvar_int(ormid, BusRoute[id][brMaxStop], "Max_Stop");
	orm_addvar_string(ormid, BusRoute[id][brName], 24, "Name");
}

PUBLIC:CheckBusRoute(rid)
{
    if(orm_errno(BusRoute[rid][ORM_ID]) == ERROR_OK)
	{
	    new comid = CompanySqlIDToID(BusRoute[rid][brComID]);
     	if(CompanyData[comid][comCreated] == 0)
     	{
     	    DeleteBusRoute(rid);
     	}
     	else
     	{
     	    LoadBusStop(rid);
     	}
	}
	return 1;
}

PUBLIC:SaveBusRoute(rid)
{
    SaveBusStop(rid, true);
    orm_save(BusRoute[rid][ORM_ID]);
}

static CreateBusRoute(const name[], csqlid)
{
	static i, j, k;
	k = -1;
    for(i = 0, j = MAX_BUS_ROUTES; i < j; i++)
	{
		if(BusRoute[i][brCreated] == 0)
		{
		    new ORM:ormid = BusRoute[i][ORM_ID] = orm_create("busroute", MYSQL_SESSION_A);

	        CreateBusRouteData(ormid, i);

			orm_setkey(ormid, "id");

			BusRoute[i][brComID] = csqlid;
			BusRoute[i][brCreated] = 1;
			mysql_format(DEFAULT_SESSION, BusRoute[i][brName], 24, "%s", name);
			orm_insert(ormid);
			k = i;
			break;
		}
	}
	return k;
}

static DeleteBusRoute(rid)
{
	printf("客运路线 %d 已被删除", BusRoute[rid][brID]);
    DeleteAllBusStop(BusRoute[rid][brID]);
	orm_delete(BusRoute[rid][ORM_ID]);
	orm_destroy(BusRoute[rid][ORM_ID]);
	BusRoute[rid] = EMPTY_BUSROUTE;
}

stock LoadBusStop(rid, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_BUS_STOPS; i < y; i++)
	{
		BusStop[rid][i] = EMPTY_BUSSTOP;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `busstop` WHERE `RouteID`='%d'", BusRoute[rid][brID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = BusStop[rid][field][ORM_ID] = orm_create("busstop");

		CreateBusStopData(ormid, rid, field);

		BusStop[rid][field][bsRouteID] = BusRoute[rid][brID];
		BusStop[rid][field][bsOrder] = field+1;
		orm_setkey(ormid, "RouteID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock CreateBusStopData(ORM:ormid, rid, rsid)
{
    orm_addvar_int(ormid, BusStop[rid][rsid][bsID], "id");
	orm_addvar_int(ormid, BusStop[rid][rsid][bsCreated], "Created");
	orm_addvar_int(ormid, BusStop[rid][rsid][bsRouteID], "RouteID");
	orm_addvar_int(ormid, BusStop[rid][rsid][bsOrder], "Order");
	orm_addvar_float(ormid, BusStop[rid][rsid][bsX], "X");
	orm_addvar_float(ormid, BusStop[rid][rsid][bsY], "Y");
	orm_addvar_float(ormid, BusStop[rid][rsid][bsZ], "Z");
	orm_addvar_string(ormid, BusStop[rid][rsid][bsName], 24, "Name");
}

stock SaveBusStop(rid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_BUS_STOPS; l < j; l++)
	{
		if(BusStop[rid][l][bsCreated] > 0)
		{
			BusStop[rid][l][bsRouteID] = BusRoute[rid][brID];
			BusStop[rid][l][bsOrder] = l+1;
			orm_save(BusStop[rid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(BusStop[rid][l][ORM_ID]);
				BusStop[rid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(BusStop[rid][l][ORM_ID] != ORM:0)
			{
				orm_delete(BusStop[rid][l][ORM_ID]);

				BusStop[rid][l][bsID] =
				BusStop[rid][l][bsCreated] =
				BusStop[rid][l][bsRouteID] =
				BusStop[rid][l][bsOrder] = 0;
				BusStop[rid][l][bsX] =
				BusStop[rid][l][bsY] =
				BusStop[rid][l][bsZ] = 0.0;
				orm_destroy(BusStop[rid][l][ORM_ID]);
				BusStop[rid][l][ORM_ID] = ORM:0;
			}
		}
	}
}

stock bool:AddBusStop(rid, name[], Float:x, Float:y, Float:z, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	new l, j;
	for(l = 0, j = MAX_BUS_STOPS; l < j; l++)
	{
		if(!BusStop[rid][l][bsCreated])
		{
			new ORM:ormid = BusStop[rid][l][ORM_ID] = orm_create("busstop");

            CreateBusStopData(ormid, rid, l);
			orm_setkey(ormid, "id");

            BusStop[rid][l][bsCreated] = 1;
			BusStop[rid][l][bsRouteID] = BusRoute[rid][brID];
			BusStop[rid][l][bsOrder] = l+1;
			BusStop[rid][l][bsX] = x;
			BusStop[rid][l][bsY] = y;
			BusStop[rid][l][bsZ] = z;
			mysql_format(DEFAULT_SESSION, BusStop[rid][l][bsName], 24, "%s", name);

			orm_insert(BusStop[rid][l][ORM_ID]);
			return true;
		}
	}
	return false;
}

stock bool:DeleteBusStop(rid, rsid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	if(BusStop[rid][rsid][bsRouteID] == BusRoute[rid][brID])
	{
		orm_delete(BusStop[rid][rsid][ORM_ID]);
		orm_destroy(BusStop[rid][rsid][ORM_ID]);
		BusStop[rid][rsid] = EMPTY_BUSSTOP;
		return true;
	}
	return false;
}

stock DeleteAllBusStop(rid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_BUS_STOPS; l < j; l++)
	{
		DeleteBusStop(rid, l);
	}
}

stock GetCompanyBusRoutes(comid)
{
	new i, j, k;
    for(i = k = 0, j = MAX_BUS_ROUTES; i < j; i++)
	{
		if(BusRoute[i][brComID] == CompanyData[comid][comID]) k++;
	}
	return k;
}
//Pet
stock LoadPlayerPet(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
	new i, y, query[128], field, rows;
    for(i = 0, y = MAX_PETS; i < y; i++)
	{
		PetData[playerid][i] = EMPTY_PETDATA;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `petdata` WHERE `owner`='%d'", pMySQLid);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = PetData[playerid][field][ORM_ID] = orm_create("petdata", MYSQL_SESSION_A);

        orm_addvar_int(ormid, PetData[playerid][field][petID], "id");
        orm_addvar_string(ormid, PetData[playerid][field][petName], 24, "name");
		orm_addvar_int(ormid, PetData[playerid][field][petOwner], "owner");
		orm_addvar_int(ormid, PetData[playerid][field][petAnimal], "animal");
		orm_addvar_float(ormid, PetData[playerid][field][petLove], "love");
		orm_addvar_float(ormid, PetData[playerid][field][petHealth], "health");
		orm_addvar_float(ormid, PetData[playerid][field][petHunger], "hunger");
		orm_addvar_string(ormid, PetData[playerid][field][petComeCMD], 64, "comeCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petFollowCMD], 64, "followCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petStayCMD], 64, "stayCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petEatCMD], 64, "eatCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petAttackCMD], 64, "attackCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petTDropCMD], 64, "tdropCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petTAnimalCMD], 64, "tanimalCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petTPlayaCMD], 64, "tplayerCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petSwitchCMD], 64, "switchCMD");
		orm_addvar_string(ormid, PetData[playerid][field][petEggCMD], 64, "eggCMD");
		orm_addvar_int(ormid, PetData[playerid][field][petEggTime], "eggtime");
    	orm_addvar_int(ormid, PetData[playerid][field][petDying], "dying");

		PetData[playerid][field][petID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "owner");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SavePlayerPet(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION)
{
    CheckDatabaseConnecting(Session);

	for(new l = 0, j = MAX_PETS; l < j; l++)
	{
		if(PetData[playerid][l][petAnimal] != ANIMAL_NONE)
		{
			PetData[playerid][l][petOwner] = PlayerData[playerid][pID];
			orm_save(PetData[playerid][l][ORM_ID]);
			if(disconnect)
			{
				orm_destroy(PetData[playerid][l][ORM_ID]);
				PetData[playerid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(PetData[playerid][l][ORM_ID] != ORM:0)
			{
				orm_delete(PetData[playerid][l][ORM_ID]);
				orm_destroy(PetData[playerid][l][ORM_ID]);
				PetData[playerid][l] = EMPTY_PETDATA;
			}
		}
	}
}

stock GivePlayerPet(animalid, playerid, Float:love=0.0)
{
	new i, j,
	k = -1;
    for(i = 0, j = MAX_PETS; i < j; i++)
	{
		if(PetData[playerid][i][petAnimal] == 0)
		{
		    new ORM:ormid = PetData[playerid][i][ORM_ID] = orm_create("petdata", MYSQL_SESSION_A);

	        orm_addvar_int(ormid, PetData[playerid][i][petID], "id");
	        orm_addvar_string(ormid, PetData[playerid][i][petName], 24, "name");
			orm_addvar_int(ormid, PetData[playerid][i][petOwner], "owner");
			orm_addvar_int(ormid, PetData[playerid][i][petAnimal], "animal");
			orm_addvar_float(ormid, PetData[playerid][i][petLove], "love");
			orm_addvar_float(ormid, PetData[playerid][i][petHealth], "health");
			orm_addvar_float(ormid, PetData[playerid][i][petHunger], "hunger");
			orm_addvar_string(ormid, PetData[playerid][i][petComeCMD], 64, "comeCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petFollowCMD], 64, "followCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petStayCMD], 64, "stayCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petEatCMD], 64, "eatCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petAttackCMD], 64, "attackCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petTDropCMD], 64, "tdropCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petTAnimalCMD], 64, "tanimalCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petTPlayaCMD], 64, "tplayerCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petSwitchCMD], 64, "switchCMD");
			orm_addvar_string(ormid, PetData[playerid][i][petEggCMD], 64, "eggCMD");
			orm_addvar_int(ormid, PetData[playerid][i][petEggTime], "eggtime");
	    	orm_addvar_int(ormid, PetData[playerid][i][petDying], "dying");

			orm_setkey(ormid, "id");

			PetData[playerid][i][petOwner] = PlayerData[playerid][pID];
			PetData[playerid][i][petAnimal] = animalid;
			PetData[playerid][i][petLove] = love;
			PetData[playerid][i][petHealth] = 100.0;
			PetData[playerid][i][petHunger] = 100.0;
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petName], 24, "%s", AnimalsList[animalid][amlName]);
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petComeCMD], 64, "come");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petFollowCMD], 64, "follow");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petStayCMD], 64, "stay");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petEatCMD], 64, "eat");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petAttackCMD], 64, "attack");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petTDropCMD], 64, "find drop");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petTAnimalCMD], 64, "find animal");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petTPlayaCMD], 64, "find player");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petSwitchCMD], 64, "switch");
			mysql_format(DEFAULT_SESSION, PetData[playerid][i][petEggCMD], 64, "egg");
			PetData[playerid][i][petEggTime] = 0;
			PetData[playerid][i][petDying] = 0;
			orm_insert(ormid);
			k = i;
			break;
		}
	}
	return k;
}

stock DeletePlayerPet(playerid, petid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	orm_delete(PetData[playerid][petid][ORM_ID]);
	orm_destroy(PetData[playerid][petid][ORM_ID]);
	PetData[playerid][petid] = EMPTY_PETDATA;
}

stock PlayerHavePet(playerid)
{
	static i, j, k;
	for(i = 0, k = 0, j = MAX_PETS; i < j; i++)
	{
		if(PetData[playerid][i][petOwner] == PlayerData[playerid][pID] && PetData[playerid][i][petAnimal] != 0)
		{
			k++;
		}
	}
	return k;
}

stock bool:CanPetUseSkill(playerid, petid, skillid)
{
	static Float:love, animalid, type;
	love = PetData[playerid][petid][petLove];
	animalid = PetData[playerid][petid][petAnimal];
	type = AnimalsList[animalid][amlType];
	switch(skillid)
	{
	    case PET_SKILL_COME,PET_SKILL_EAT:
	    {
	        if(love >= 0.0) return true;
	    }
	    case PET_SKILL_FOLLOW,PET_SKILL_STAY:
	    {
	        switch(type)
	        {
	            case ANIMAL_DOG_S,ANIMAL_DOG_M,ANIMAL_DOG_L,ANIMAL_WOLF: if(love > 10.0) return true;
	            case ANIMAL_CAT,ANIMAL_BEAR,ANIMAL_FOX: if(love > 15.0) return true;
	            default: if(love > 20.0) return true;
	        }
	    }
	    case PET_SKILL_TDROP:
	    {
	        switch(type)
	        {
	            case ANIMAL_DOG_S,ANIMAL_DOG_M,ANIMAL_DOG_L,ANIMAL_WOLF,ANIMAL_FOX: if(love > 40.0) return true;
	            default: return false;
	        }
	    }
	    case PET_SKILL_TANIMAL:
	    {
	        switch(type)
	        {
	            case ANIMAL_DOG_S,ANIMAL_DOG_M,ANIMAL_DOG_L,ANIMAL_WOLF,ANIMAL_FOX: if(love > 50.0) return true;
	            default: return false;
	        }
	    }
	    case PET_SKILL_TPLAYER:
	    {
	        switch(type)
	        {
	            case ANIMAL_DOG_S,ANIMAL_DOG_M,ANIMAL_DOG_L,ANIMAL_WOLF,ANIMAL_FOX: if(love > 60.0) return true;
	            default: return false;
	        }
	    }
	    case PET_SKILL_ATK:
	    {
	        switch(type)
	        {
	            case ANIMAL_DOG_S,ANIMAL_DOG_M,ANIMAL_DOG_L,ANIMAL_WOLF: if(love > 60.0) return true;
	            case ANIMAL_CAT,ANIMAL_BEAR,ANIMAL_FOX,ANIMAL_CHICKEN,ANIMAL_GATOR: if(love > 80.0) return true;
	            default: return false;
	        }
	    }
	    case PET_SKILL_SWITCH:
	    {
	        if(love > 99.0) return true;
	    }
	    case PET_SKILL_EGG:
	    {
	        switch(type)
	        {
	            case ANIMAL_CHICKEN: if(love > 50.0) return true;
	            default: return false;
	        }
	    }
	}
	return false;
}

stock LoadPlayerLotto(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
	static i, j, query[128], field, rows;
    for(i = 0, j = 6; i < j; i++)
	{
		PlayerLotto[playerid][i] = EMPTY_PLAYERLOTTO;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `playerlotto` WHERE `PlayerID`='%d'", pMySQLid);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = PlayerLotto[playerid][field][ORM_ID] = orm_create("playerlotto", MYSQL_SESSION_A);

        orm_addvar_int(ormid, PlayerLotto[playerid][field][lotID], "id");
        orm_addvar_int(ormid, PlayerLotto[playerid][field][lotPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerLotto[playerid][field][lotNum], "Number");

		PlayerLotto[playerid][field][lotPlayerID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "PlayerID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SavePlayerLotto(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION)
{
    CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = 6; l < j; l++)
	{
		if(PlayerLotto[playerid][l][lotNum] > 0)
		{
			PlayerLotto[playerid][l][lotPlayerID] = PlayerData[playerid][pID];
			orm_save(PlayerLotto[playerid][l][ORM_ID]);
			if(disconnect)
			{
				orm_destroy(PlayerLotto[playerid][l][ORM_ID]);
				PlayerLotto[playerid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(PlayerLotto[playerid][l][ORM_ID] != ORM:0)
			{
				orm_delete(PlayerLotto[playerid][l][ORM_ID]);
				orm_destroy(PlayerLotto[playerid][l][ORM_ID]);
				PlayerLotto[playerid][l] = EMPTY_PLAYERLOTTO;
			}
		}
	}
}

stock SetPlayerLotto(playerid, slot, num)
{
	if(PlayerLotto[playerid][slot][lotNum] > 0)
	{
		orm_delete(PlayerLotto[playerid][slot][ORM_ID]);
		orm_destroy(PlayerLotto[playerid][slot][ORM_ID]);
		PlayerLotto[playerid][slot][ORM_ID] = ORM:0;
	}

    new ORM:ormid = PlayerLotto[playerid][slot][ORM_ID] = orm_create("playerlotto", MYSQL_SESSION_A);

    orm_addvar_int(ormid, PlayerLotto[playerid][slot][lotID], "id");
    orm_addvar_int(ormid, PlayerLotto[playerid][slot][lotPlayerID], "PlayerID");
	orm_addvar_int(ormid, PlayerLotto[playerid][slot][lotNum], "Number");

	orm_setkey(ormid, "id");
	PlayerLotto[playerid][slot][lotPlayerID] = PlayerData[playerid][pID];
	PlayerLotto[playerid][slot][lotNum] = num;
	orm_insert(ormid);
}

stock ClearPlayerLotto(playerid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);
	for(new i = 0; i < 6; i++)
	{
		orm_delete(PlayerLotto[playerid][i][ORM_ID]);
		orm_destroy(PlayerLotto[playerid][i][ORM_ID]);
		PlayerLotto[playerid][i] = EMPTY_PLAYERLOTTO;
	}
}

stock SendPlayerTextMsg(playerid, senderid, const text[])
{
	new i, j, Hour, Minute, Second, string[144],
    TimeStamp = gettime(Hour, Minute, Second);
    for(i = 0, j = MAX_TEXTS; i < j; i++)
	{
		if(TextMsg[playerid][i][tmCreated] == 0)
		{
			TextMsg[playerid][i][tmCreated] = 1,
			TextMsg[playerid][i][tmPlayerID] = PlayerData[playerid][pID],
			TextMsg[playerid][i][tmSenderType] = 1,
			TextMsg[playerid][i][tmSenderID] = PlayerData[senderid][pID],
			TextMsg[playerid][i][tmTime] = TimeStamp;
			format(TextMsg[playerid][i][tmText], 144, "%s", text);

			PlayerPlaySound(playerid, 20600, 0.0, 0.0, 0.0);
			strmid(string, text, 0, 64);
			format(string, sizeof(string), "短信:%s... 寄件人:%s", string, PlayerData[senderid][pName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return i;
		}
	}
	return -1;
}

stock SendPlayerTextMsg_NPC(playerid, mnpcid, const text[])
{
	new i, j, Hour, Minute, Second, TimeStamp, string[144];
    TimeStamp = gettime(Hour, Minute, Second);
    for(i = 0, j = MAX_TEXTS; i < j; i++)
	{
		if(TextMsg[playerid][i][tmSenderID] == mnpcid || TextMsg[playerid][i][tmCreated] == 0)
		{
			TextMsg[playerid][i][tmCreated] = 1,
			TextMsg[playerid][i][tmPlayerID] = PlayerData[playerid][pID],
			TextMsg[playerid][i][tmSenderType] = 2,
			TextMsg[playerid][i][tmSenderID] = mnpcid,
			TextMsg[playerid][i][tmTime] = TimeStamp;
			format(TextMsg[playerid][i][tmText], 144, "%s", text);

			PlayerPlaySound(playerid, 20600, 0.0, 0.0, 0.0);
			strmid(string, text, 0, 64);
			format(string, sizeof(string), "短信:%s... 寄件人:%s", string, MissionNPC[mnpcid][mpcName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return i;
		}
	}
	return -1;
}

stock GetTextSenderName(playerid, id)
{
	new string[32];
    switch(TextMsg[playerid][id][tmSenderType])
	{
		case 1:
		{
			format(string, sizeof(string), "%s", GetPlayerSqlName(TextMsg[playerid][id][tmSenderID]));
		}
		case 2:
		{
		    new senderid = TextMsg[playerid][id][tmSenderID];
		    format(string, sizeof(string), "%s", MissionNPC[senderid][mpcName]);
		}
	}
	return string;
}

stock GetPlayerTextMsgAmount(playerid)
{
    new i, j, k;
    for(j = MAX_TEXTS; i < j; i++)
	{
		if(TextMsg[playerid][i][tmCreated] == 1)
		{
			k++;
		}
	}
	return k;
}

stock DeletePlayerText(playerid, id)
{
    TextMsg[playerid][id] = EMPTY_TEXTMSG;
}

stock DeleteAllPlayerText(playerid)
{
    new i, j;
	for(j = MAX_TEXTS; i < j; i++)
	{
		if(TextMsg[playerid][i][tmCreated] == 1)
		{
			TextMsg[playerid][i] = EMPTY_TEXTMSG;
		}
	}
}

//再来写一个读取道具的函数
stock LoadPlayerItems(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
    for(new i = 0, y = MAX_ITEMS; i < y; i++)//清空上个登入玩家的暂存资料
	{
		PlayerItems_USE[playerid][i] = EMPTY_IUDATA;
		PlayerItems_EQ[playerid][i] = EMPTY_IEQDATA;
	}

	CheckDatabaseConnecting(Session);

	new query[128], field, rows, loads;//使用固定变数 因为会重新定义 就不多使用资源了

	//安全的format 因为是要给MySQL查询用的 所以使用该mysql用的format
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `items_use` WHERE `PlayerID`='%d'", pMySQLid);
	//选择所有Items表内的内容 且玩家数据库ID为 pMySQLid
	//也就是得到所有Items表内为玩家的物品

	//先来读取消耗品数据 现在改用ORM物件方式
	new Cache:c_query = mysql_query(Session, query);//开始查询 使用刚才已经定义完的query 并且存在缓存里面

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{//开始取数 查询的得到几行就运行几次 cache_num_rows则为缓存的获取到的行数
		new ORM:ormid = PlayerItems_USE[playerid][field][ORM_ID] = orm_create("items_use");

		orm_addvar_int(ormid, PlayerItems_USE[playerid][field][iuID], "id");//把所有要读存的数做连结
		orm_addvar_int(ormid, PlayerItems_USE[playerid][field][iuCount], "Count");
		orm_addvar_int(ormid, PlayerItems_USE[playerid][field][iuPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerItems_USE[playerid][field][iuItemID], "ItemID");

		PlayerItems_USE[playerid][field][iuPlayerID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "PlayerID");//要记得设置一个key值 我们定为ID
		orm_apply_cache(ormid, field);//将查询的缓存代入orm物件内
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);//将查询的缓存代入orm物件内
	}
	loads = field;
	cache_delete(c_query);//记得清空Cache节省资源


	//这次读取有耐久的装备道具表
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `items_eq` WHERE `PlayerID`='%d'", pMySQLid);

	c_query = mysql_query(Session, query);//进行第二次查询 查询可以有耐久度的道具装备
	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{//开始取数 查询的得到几行就运行几次 cache_num_rows则为缓存的获取到的行数
		new ORM:ormid = PlayerItems_EQ[playerid][field][ORM_ID] = orm_create("items_eq");

		orm_addvar_int(ormid, PlayerItems_EQ[playerid][field][ieqID], "id");//把所有要读存的数做连结
		orm_addvar_int(ormid, PlayerItems_EQ[playerid][field][ieqItemID], "ItemID");
		orm_addvar_int(ormid, PlayerItems_EQ[playerid][field][ieqPlayerID], "PlayerID");
		orm_addvar_int(ormid, PlayerItems_EQ[playerid][field][ieqBroke], "Broke");

		PlayerItems_EQ[playerid][field][ieqPlayerID] = PlayerData[playerid][pID];
		orm_setkey(ormid, "PlayerID");//要记得设置一个key值 我们定为玩家数据库ID
		orm_apply_cache(ormid, field);//将查询的缓存代入orm物件内
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);//将查询的缓存代入orm物件内
	}
	loads += field;

	//format(query, 128, "道具读取完成, 一共 %d 个道具", loads);
	//SendClientMessage(playerid, 0x00ffffff, query);
}

//那么来写储存道具的函数吧
stock SavePlayerItems(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION )
{
	if(GetGVarInt("Eventing", playerid) == 0)//若在活动中就不保存道具
	{
		CheckDatabaseConnecting(Session);

		static l, j;//使用固定变数 因为会重新定义 就不多使用资源了

		for(l = 0, j = sizeof(PlayerItems_USE[]); l < j; l++)
		{//根据PlayerItems_USE[] 目前这里是最大道具数 MAX_ITEMS
			if(PlayerItems_USE[playerid][l][iuCount] > 0)
			{//如果道具数大于0进行保存
				PlayerItems_USE[playerid][l][iuPlayerID] = PlayerData[playerid][pID];
				orm_save(PlayerItems_USE[playerid][l][ORM_ID]);
				if(disconnect)
				{
					//清除物件内容
					orm_destroy(PlayerItems_USE[playerid][l][ORM_ID]);
					PlayerItems_USE[playerid][l][ORM_ID] = ORM:0;
				}
			}
			else
			{
				if(PlayerItems_USE[playerid][l][ORM_ID] != ORM:0)
				{//移除前检查ORM物件是否存在
					orm_delete(PlayerItems_USE[playerid][l][ORM_ID]);

					PlayerItems_USE[playerid][l][iuID] =
					PlayerItems_USE[playerid][l][iuItemID] =
					PlayerItems_USE[playerid][l][iuCount] = 0;
					orm_destroy(PlayerItems_USE[playerid][l][ORM_ID]);
					PlayerItems_USE[playerid][l][ORM_ID] = ORM:0;
				}
			}
		}
		for(l = 0, j = sizeof(PlayerItems_EQ[]); l < j; l++)
		{//根据PlayerItems_EQ[] 目前这里是最大道具数 MAX_ITEMS
			if(PlayerItems_EQ[playerid][l][ieqItemID] > 0)
			{//如果道具的ID大于0进行保存
				PlayerItems_EQ[playerid][l][ieqPlayerID] = PlayerData[playerid][pID];
				orm_save(PlayerItems_EQ[playerid][l][ORM_ID]);
				if(disconnect)
				{
					//清除物件内容
					orm_destroy(PlayerItems_EQ[playerid][l][ORM_ID]);
					PlayerItems_EQ[playerid][l][ORM_ID] = ORM:0;
				}
			}
			else
			{
				if(PlayerItems_EQ[playerid][l][ORM_ID] != ORM:0)
				{//移除前检查ORM物件是否存在
					orm_delete(PlayerItems_EQ[playerid][l][ORM_ID]);

					PlayerItems_EQ[playerid][l][ieqID] =
					PlayerItems_EQ[playerid][l][ieqItemID] =
					PlayerItems_EQ[playerid][l][ieqBroke] = 0;
					orm_destroy(PlayerItems_EQ[playerid][l][ORM_ID]);
					PlayerItems_EQ[playerid][l][ORM_ID] = ORM:0;
				}
			}
		}
	}
}

//活动用给予道具(不会保存于资料库的)
stock bool:GivePlayerItem_Event(playerid, itemtype, itemid, count = 1)
{
	static l, j, k;
	switch(itemtype)
	{
		case ITEM_USE:
		{
			for(l = 0, j = sizeof(PlayerItems_USE[]), k = -1; l < j; l++)
			{
				if(PlayerItems_USE[playerid][l][iuItemID] == itemid)
				{
					PlayerItems_USE[playerid][l][iuCount] += count;
					if(PlayerItems_USE[playerid][l][iuCount] < 1 )
					{
						PlayerItems_USE[playerid][l][iuID] =
						PlayerItems_USE[playerid][l][iuItemID] =
						PlayerItems_USE[playerid][l][iuPlayerID] =
						PlayerItems_USE[playerid][l][iuCount] = 0;
					}
					k = -1;
					break;
				}
				else if(PlayerItems_USE[playerid][l][iuItemID] == 0)
				{
					if(k == -1)
					{
						k = l;
					}
				}
			}
			if(k != -1)
			{

				if(count < 1)
				{
					PlayerItems_USE[playerid][k][iuID] =
					PlayerItems_USE[playerid][k][iuItemID] =
					PlayerItems_USE[playerid][k][iuPlayerID] =
					PlayerItems_USE[playerid][k][iuCount] = 0;
					return false;
				}

				PlayerItems_USE[playerid][k][iuPlayerID] = PlayerData[playerid][pID];
				PlayerItems_USE[playerid][k][iuItemID] = itemid,
				PlayerItems_USE[playerid][k][iuCount] = count;
			}
		}
		case ITEM_EQ:
		{
			for(l = 0, j = sizeof(PlayerItems_EQ[]); l < j; l++)
			{
				if(itemid > 0 && PlayerItems_EQ[playerid][l][ieqItemID] == itemid)
				{

					if(count > -1)
					{
						return false;
					}
					PlayerItems_EQ[playerid][l][ieqID] =
					PlayerItems_EQ[playerid][l][ieqItemID] =
					PlayerItems_EQ[playerid][l][ieqPlayerID] =
					PlayerItems_EQ[playerid][l][ieqBroke] = 0;
					break;
				}
				else if(PlayerItems_EQ[playerid][l][ieqItemID] == 0)
				{

					if(count < 1)
					{
						continue;
					}
					PlayerItems_EQ[playerid][l][ieqPlayerID] = PlayerData[playerid][pID];
					PlayerItems_EQ[playerid][l][ieqBroke] = 0;
					PlayerItems_EQ[playerid][l][ieqItemID] = itemid;
					break;
				}
			}
		}
	}
	return true;
}

stock bool:GivePlayerItem(playerid, itemtype, itemid, count = 1/*, MySQLid = 0*/, MySQL:Session = DEFAULT_SESSION)
{
	if(GetGVarInt("Eventing", playerid) == 1)
	{
	    GivePlayerItem_Event(playerid, itemtype, itemid, count);
	}
	else
	{
		CheckDatabaseConnecting(Session);

		static l, j, k;

		switch(itemtype)
		{
			case ITEM_USE:
			{
				for(l = 0, j = sizeof(PlayerItems_USE[]), k = -1; l < j; l++)
				{
					if(PlayerItems_USE[playerid][l][iuItemID] == itemid)
					{
						PlayerItems_USE[playerid][l][iuCount] += count;
						if(PlayerItems_USE[playerid][l][iuCount] < 1 )
						{
							orm_delete(PlayerItems_USE[playerid][l][ORM_ID]);

							PlayerItems_USE[playerid][l][iuID] =
							PlayerItems_USE[playerid][l][iuItemID] =
							PlayerItems_USE[playerid][l][iuPlayerID] =
							PlayerItems_USE[playerid][l][iuCount] = 0;
							orm_destroy(PlayerItems_USE[playerid][l][ORM_ID]);
							PlayerItems_USE[playerid][l][ORM_ID] = ORM:0;
							Log(itemlog, INFO, "已给予%s(%d)道具(ITEM_USE)%s(%d)*%d(数量小于1,已删除)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[itemid][iuName], itemid, count);
						}
						else Log(itemlog, INFO, "已给予%s(%d)道具(ITEM_USE)%s(%d)*%d(已有栏位,新数量为%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[itemid][iuName], itemid, count, PlayerItems_USE[playerid][l][iuCount]);
						k = -1;

						break;
					}
					else if(PlayerItems_USE[playerid][l][iuItemID] == 0)
					{
						if(k == -1)
						{
							k = l;
						}
					}
				}
				if(k != -1)
				{

					if(count < 1)
					{
						PlayerItems_USE[playerid][k][iuID] =
						PlayerItems_USE[playerid][k][iuItemID] =
						PlayerItems_USE[playerid][k][iuPlayerID] =
						PlayerItems_USE[playerid][k][iuCount] = 0;
						printf("给予%s道具失败", PlayerData[playerid][pName]);
						Log(itemlog, INFO, "给予%s(%d)道具(ITEM_USE)%s(%d)*%d 失败(数量小于1)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[itemid][iuName], itemid, count);
						return false;
					}
					new ORM:ormid = PlayerItems_USE[playerid][k][ORM_ID] = orm_create("items_use");

					orm_addvar_int(ormid, PlayerItems_USE[playerid][k][iuID], "id");
					orm_addvar_int(ormid, PlayerItems_USE[playerid][k][iuItemID], "ItemID");
					orm_addvar_int(ormid, PlayerItems_USE[playerid][k][iuPlayerID], "PlayerID");
					orm_addvar_int(ormid, PlayerItems_USE[playerid][k][iuCount], "Count");

					orm_setkey(ormid, "id");

					PlayerItems_USE[playerid][k][iuPlayerID] = PlayerData[playerid][pID];

					PlayerItems_USE[playerid][k][iuItemID] = itemid,
					PlayerItems_USE[playerid][k][iuCount] = count;

					orm_insert(PlayerItems_USE[playerid][k][ORM_ID]);
					Log(itemlog, INFO, "已给予%s(%d)道具(ITEM_USE)%s(%d)*%d(新栏位)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[itemid][iuName], itemid, count);
				}
			}
			case ITEM_EQ:
			{
				for(l = 0, j = sizeof(PlayerItems_EQ[]); l < j; l++)
				{
					if(itemid > 0 && PlayerItems_EQ[playerid][l][ieqItemID] == itemid)
					{
						if(count > -1)
						{
							print("给予装备出错");
							Log(itemlog, INFO, "给予%s(%d)道具(ITEM_EQ)%s(%d)*%d失败(已有,无法再给予)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[itemid][ieqName], itemid, count);
							return false;
						}
						orm_delete(PlayerItems_EQ[playerid][l][ORM_ID]);

						PlayerItems_EQ[playerid][l][ieqID] =
						PlayerItems_EQ[playerid][l][ieqItemID] =
						PlayerItems_EQ[playerid][l][ieqPlayerID] =
						PlayerItems_EQ[playerid][l][ieqBroke] = 0;
						orm_destroy(PlayerItems_EQ[playerid][l][ORM_ID]);
						PlayerItems_EQ[playerid][l][ORM_ID] = ORM:0;
                        Log(itemlog, INFO, "已给予%s(%d)道具(ITEM_EQ)%s(%d)*%d(数量小于1,已删除)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[itemid][ieqName], itemid, count);
						break;
					}
					else if(PlayerItems_EQ[playerid][l][ieqItemID] == 0)
					{

						if(count < 1)
						{
							continue;
						}
						new ORM:ormid = PlayerItems_EQ[playerid][l][ORM_ID] = orm_create("items_eq");

						orm_addvar_int(ormid, PlayerItems_EQ[playerid][l][ieqID], "id");//把所有要读存的数做连结
						orm_addvar_int(ormid, PlayerItems_EQ[playerid][l][ieqItemID], "ItemID");
						orm_addvar_int(ormid, PlayerItems_EQ[playerid][l][ieqPlayerID], "PlayerID");
						orm_addvar_int(ormid, PlayerItems_EQ[playerid][l][ieqBroke], "Broke");

						orm_setkey(ormid, "id");

						PlayerItems_EQ[playerid][l][ieqPlayerID] = PlayerData[playerid][pID];
						PlayerItems_EQ[playerid][l][ieqBroke] = 0;
						PlayerItems_EQ[playerid][l][ieqItemID] = itemid;

						orm_insert(PlayerItems_EQ[playerid][l][ORM_ID]);
                        Log(itemlog, INFO, "已给予%s(%d)道具(ITEM_EQ)%s(%d)*%d(新栏位)", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[itemid][ieqName], itemid, count);
						break;
					}
				}
			}
		}
	}
	return true;
}

stock ClearPlayerItems(playerid)
{
    for(new i = 0, y = MAX_ITEMS; i < y; i++)
	{
		PlayerItems_USE[playerid][i] = EMPTY_IUDATA;
		PlayerItems_EQ[playerid][i] = EMPTY_IEQDATA;
	}
}

stock LoadMissionData(playerid, pMySQLid, MySQL:Session = DEFAULT_SESSION)
{
    for(new i = 0, y = MAX_MISSIONS; i < y; i++)
	{
		MissionData[playerid][i] = EMPTY_MISSIONDATA;
	}
	CheckDatabaseConnecting(Session);
	static query[128], field, rows;
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `missiondata` WHERE `PlayerID`='%d'", pMySQLid);

	new Cache:c_query = mysql_query(Session, query);
	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = MissionData[playerid][field][ORM_ID] = orm_create("missiondata");

		orm_addvar_int(ormid, MissionData[playerid][field][msID], "id");
		orm_addvar_int(ormid, MissionData[playerid][field][msMissionID], "MissionID");
		orm_addvar_int(ormid, MissionData[playerid][field][msPlayerID], "PlayerID");
		orm_addvar_int(ormid, MissionData[playerid][field][msPassed], "Passed");

		MissionData[playerid][field][msPlayerID] = PlayerData[playerid][pID];
		MissionData[playerid][field][msStage] = 0;
		orm_setkey(ormid, "PlayerID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
		orm_load(ormid, "CheckMissionDara", "dd", playerid, field);
	}
	cache_delete(c_query);
}

PUBLIC:CheckMissionDara(playerid, id)
{
    switch(orm_errno(MissionData[playerid][id][ORM_ID]))
	{
        case ERROR_OK:
		{
		    if(MissionsList[MissionData[playerid][id][msMissionID]][msType] == MISSION_GLOBAL)
		    {//不能让玩家保留Global Mission
		        orm_delete(MissionData[playerid][id][ORM_ID]);
				orm_destroy(MissionData[playerid][id][ORM_ID]);
				MissionData[playerid][id] = EMPTY_MISSIONDATA;
		    }
        }
	}
	return 1;
}

stock SaveMissionData(playerid, bool:disconnect = false, MySQL:Session = DEFAULT_SESSION )
{
	CheckDatabaseConnecting(Session);
	for(new l = 0, j = MAX_MISSIONS; l < j; l++)
	{
		if(MissionData[playerid][l][msMissionID] > 0)
		{
			MissionData[playerid][l][msPlayerID] = PlayerData[playerid][pID];
			orm_save(MissionData[playerid][l][ORM_ID]);
			if(disconnect)
			{
				orm_destroy(MissionData[playerid][l][ORM_ID]);
				MissionData[playerid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(MissionData[playerid][l][ORM_ID] != ORM:0)
			{
				orm_delete(MissionData[playerid][l][ORM_ID]);
				orm_destroy(MissionData[playerid][l][ORM_ID]);
				MissionData[playerid][l] = EMPTY_MISSIONDATA;
			}
		}
	}
}

stock bool:GivePlayerMission(playerid, mission, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);
	static l, j, k;
	for(l = 0, k = -1, j = MAX_MISSIONS; l < j; l++)
	{
		if(mission > 0 && MissionData[playerid][l][msMissionID] == mission)
		{
		    return false;//已有相同任务
		}
		else if(MissionData[playerid][l][msMissionID] == 0)
		{
			k = l;
		}
	}
	if(k > -1)
	{
	    new ORM:ormid = MissionData[playerid][k][ORM_ID] = orm_create("missiondata");

		orm_addvar_int(ormid, MissionData[playerid][k][msID], "id");
		orm_addvar_int(ormid, MissionData[playerid][k][msMissionID], "MissionID");
		orm_addvar_int(ormid, MissionData[playerid][k][msPlayerID], "PlayerID");
		orm_addvar_int(ormid, MissionData[playerid][k][msPassed], "Passed");

		orm_setkey(ormid, "id");
		MissionData[playerid][k][msPlayerID] = PlayerData[playerid][pID];
		MissionData[playerid][k][msMissionID] = mission;
		MissionData[playerid][k][msStage] = 0;
		MissionData[playerid][k][msPassed] = 0;
		orm_insert(MissionData[playerid][k][ORM_ID]);
	}
	return true;
}

stock bool:DeletePlayerMission(playerid, mission)
{
	for(new l = 0, j = MAX_MISSIONS; l < j; l++)
	{
		if(mission > 0 && MissionData[playerid][l][msMissionID] == mission)
		{
		    orm_delete(MissionData[playerid][l][ORM_ID]);
			orm_destroy(MissionData[playerid][l][ORM_ID]);
			MissionData[playerid][l] = EMPTY_MISSIONDATA;
			return true;
		}
	}
	return false;
}

stock GetPlayerMissionInfo(playerid, mission, &have, &passed, &stage)
{
    have = passed = stage = 0;
	for(new l = 0, j = MAX_MISSIONS; l < j; l++)
	{
	    if(mission > 0 && MissionData[playerid][l][msMissionID] == mission)
		{
		    have = 1;
		    passed = MissionData[playerid][l][msPassed];
		    stage = MissionData[playerid][l][msStage];
		    break;
		}
	}
}

stock bool:PlayerHaveMission(playerid, mission)
{
    static l, j;
	for(l = 0, j = MAX_MISSIONS; l < j; l++)
	{
	    if(mission > 0 && MissionData[playerid][l][msMissionID] == mission)
		{
		    return true;
		}
	}
	return false;
}

stock GetPlayerUnpassedMission(playerid)
{
    static i, j, count;
	for(i = count = 0, j = MAX_MISSIONS; i < j; i++)
	{
	    if(MissionData[playerid][i][msMissionID] == 0) continue;
	    if(MissionData[playerid][i][msPassed] == 0)
		{
		    count ++;
		}
	}
	return count;
}

stock CheckPlayerMission(playerid)
{
    if(PlayerData[playerid][pReg] == 1)
    {
        static i, have, passed, stage;
        for(i = 1; i < 6; i++)
        {//如果玩家没有完成新手任务就强制开始(mission 1~5)
	        GetPlayerMissionInfo(playerid, i, have, passed, stage);
	        if(have == 0)
			{//如果未拥有该任务就给予并开始第1阶段
				GivePlayerMission(playerid, i);
				PlayerStartMission(playerid, i);
				break;
			}
	        else if(passed == 0)
			{//如果拥有就直接开始任务
				PlayerStartMission(playerid, i);
				break;
			}
	    }
    }
}

stock PlayerStartMission(playerid, mission)
{//玩家开始任务
	for(new i = 0, j = MAX_MISSIONS; i < j; i++)
	{
	    if(MissionData[playerid][i][msMissionID] == mission)
	    {//确认玩家持有该任务
	        SetGVarInt("Mission", mission, playerid);
			SetGVarInt("MissionSlot", i, playerid);
			SetGVarInt("PlayerMSDrop", 0, playerid);
			DisablePlayerCheckpoint(playerid);
	        switch(MissionsList[mission][msType])
	        {
				case MISSION_GLOBAL: PlayerJoinGlobalMission(playerid, mission);
				default:
				{
				    MissionData[playerid][i][msStage] = 0;//设定玩家的任务完成阶段至初始阶段0
					UpdatePlayerMission(playerid, mission, 1);//显示玩家任务的第一阶段内容1
				}
			}
			return 1;
	    }
	}
	return 0;
}

stock PlayerStopMission(playerid, fail=0)
{
	new string[144];
	if(GetGVarInt("Mission", playerid) > 0)
	{
	    new mission = GetGVarInt("Mission", playerid);
	    DisablePlayerMissionGPS(playerid);
	    DeleteGVar("Mission", playerid);
	    DeleteGVar("MissionSlot", playerid);
	    HidePlayerRightTD(playerid, RTD_MSTIME);
	    DisablePlayerCheckpoint(playerid);
	    DisablePlayerRaceCheckpoint(playerid);
	    if(MissionsList[mission][msType] == MISSION_GLOBAL)
	    {
	        SetGVarInt("MissionPlayers", GetGVarInt("MissionPlayers", mission)-1, mission);
	        DeletePlayerMission(playerid, mission);
	        format(string, sizeof(string), "%s已经退出了这个任务", PlayerData[playerid][pName]);
			SendMissionMessage(mission, COLOR_WHITE, string);
			UpdateGlobalMission(mission);
			UpdatePlayerColor(playerid);
	    }
	    if(fail == 1) ShowPTD(playerid, 0, 0);
	}
}

stock PlayerPassMission(playerid, mission)
{
	if(mission == GetGVarInt("Mission", playerid))
	{
	    new id = GetGVarInt("MissionSlot", playerid);
	    switch(MissionsList[mission][msType])
	    {
	        case MISSION_TUTORIAL:
	        {
			    MissionData[playerid][id][msStage] = 0;
			    MissionData[playerid][id][msPassed] = 1;
			}
			case MISSION_GLOBAL:
			{
			    switch(MissionsList[mission][msBoss])
			    {//任务进入冷却,并增加完成次数记录
			        case MNPC_SWEET:
			        {
			            RecordData[playerid][prMSweet] ++;
			            LimitData[playerid][plMSweet] = MissionNPC[MNPC_SWEET][mpcCD];
			            switch(RecordData[playerid][prMSweet])
			            {
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Sweet、Big Smoke以及Ryder造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 291, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 292, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 293, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 17:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "干得漂亮!你好好教训了那些巴拉斯王八蛋!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "就是这样!让那些巴拉斯知道葛洛夫一直都会是王者!");
			                        	}
			                        }
			                        case 18:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "紫色破坏市容,还好有你为社区美观做了努力");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "让那些巴拉斯王八蛋知道这里一直都是葛洛夫的地盘!");
			                        	}
			                        }
			                        case 19:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "你让毒品远离我们的地盘了,感恩");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SWEET, "就是这样!让那些巴拉斯知道葛洛夫一直都会是王者!");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_SIMEON:
			        {
			            RecordData[playerid][prMSimeon] ++;
			            LimitData[playerid][plMSimeon] = MissionNPC[MNPC_SIMEON][mpcCD];
			            switch(RecordData[playerid][prMSweet])
			            {
			                case 10:
			                {
			                    SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "你为我做事也一段时间了我的朋友,我向车黑市的朋友介绍了你,有时间就过去看看吧");
			                }
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Simeon造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 294, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 20:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "辛苦了朋友,让那些可怜虫改搭大众交通吧");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "有借有还,再借不难,干得好朋友");
			                        	}
			                        }
			                        case 21:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "让他们知道惹到我西门的下场");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "我知道这是苦力活,所以我很感激你们这些劳工的努力");
			                        	}
			                        }
			                        case 22:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "希望你可以通过这次实习对我们的业界有更进一步的了解");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_SIMEON, "希望你有好好把那宝贝的性能发挥到极致");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_TREVOR:
			        {
			            RecordData[playerid][prMTrevor] ++;
			            LimitData[playerid][plMTrevor] = MissionNPC[MNPC_TREVOR][mpcCD];
			            switch(RecordData[playerid][prMSweet])
			            {
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Trevor造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 295, 1);
			                }
			                case 100:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Terry、Clay与Johnny造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 288, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 289, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 290, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 23:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "喔喔太好了,有了这么多安毒我就能...");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "干得好啊,待会再来找我吧,我这边还有更多工作");
			                        	}
			                        }
			                        case 24:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "禁行机车!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "失落摩托帮就跟蟑螂一样,杀不完啊");
			                        	}
			                        }
			                        case 25:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "人民有知的权利!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TREVOR, "希望这能让我们的政府知道,窃听是不对的行为");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_CESAR:
			        {
			            RecordData[playerid][prMCesar] ++;
			            LimitData[playerid][plMCesar] = MissionNPC[MNPC_CESAR][mpcCD];
			            switch(RecordData[playerid][prMSweet])
			            {
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Cesar造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 296, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 26:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "这些宝贝太漂亮了兄弟,干得好!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "这些车就跟艺术品一样,谢啦兄弟");
			                        	}
			                        }
			                        case 27:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "让那些维戈帮混蛋知道阿兹提克帮的厉害!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "哈哈,这些维戈帮混蛋亏大了");
			                        	}
			                        }
			                        case 28:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "把这些维戈帮通通杀掉!Hasta la muerte!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_CESAR, "维戈帮就像过街老鼠一样应该赶尽杀绝!干得好兄弟!");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_EMMET:
			        {
			            RecordData[playerid][prMEmmet] ++;
			            LimitData[playerid][plMEmmet] = MissionNPC[MNPC_EMMET][mpcCD];
			            switch(RecordData[playerid][prMEmmet])
			            {
			                case 1:
			                {
			                    SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "谢谢你的帮忙呀孩子,以后如果想要在枪械市场发起交易都可以来我这里");
			                }
			                case 15:
			                {
			                    SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "孩子,你帮了我这么多忙是时候该回报了,以后如果想要取得低价的枪械都可以打电话给我");
			                }
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Emmet以及Big Bear造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 297, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 298, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 299, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 29:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "有这些货物,我这里又能重新开张啦");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "孩子谢谢你让我这老家伙笑得跟个宝一样");
			                        	}
			                        }
			                        case 30:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "这些可是上等货物,谢谢你啊孩子");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "不算太好也不算太差,但这货的利益绝对高于成本");
			                        	}
			                        }
			                        case 31:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "谢谢你啊小夥子,我今晚终于可以好好睡一觉了");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "让外面那些王八蛋知道,这一带只有我可以做这生意!");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_TORENO:
			        {
			            RecordData[playerid][prMToreno] ++;
			            LimitData[playerid][plMToreno] = MissionNPC[MNPC_TORENO][mpcCD];
			            LimitData[playerid][plHToreno] ++;
			            if(LimitData[playerid][plHToreno] == 20)
			            {
			                SendPlayerTextMsg_NPC(playerid, MNPC_EMMET, "你为国家的血可不是白流的,如果哪天你意外惹事入狱了,不用担心我们会通过管道放你出来的,但记住这个机会是争取的而不是理所当然的");
			            }
			            switch(RecordData[playerid][prMToreno])
			            {
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Toreno、T-Bone以及Jizzy造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 300, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 301, 1);
			                    GivePlayerItem(playerid, ITEM_EQ, 302, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 32:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "你让我们的国家更安全了,干得好孩子");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "这些家伙早该被踢出美国了,干得好孩子");
			                        	}
			                        }
			                        case 33:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "还好补给来得及时,国家的英雄又得以继续奋战了");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "干得好啊孩子,真的,干得漂亮");
			                        	}
			                        }
			                        case 34:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "你清理这些害虫的方式就跟专业的一样,让我刮目相看了");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_TORENO, "为了国家的安全,有时候我们不得不染红双手,但你要知道你做的是对的事情");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			        case MNPC_WOOZIE:
			        {
			            RecordData[playerid][prMWoozie] ++;
			            LimitData[playerid][plMWoozie] = MissionNPC[MNPC_WOOZIE][mpcCD];
			            switch(RecordData[playerid][prMWoozie])
			            {
			                case 50:
			                {
			                    SendClientMessage(playerid, COLOR_YELLOW, "<<额外任务奖励>> 获得了Woozie造型!");
			                    GivePlayerItem(playerid, ITEM_EQ, 303, 1);
			                }
			                default:
			                {
			                    switch(mission)
			                    {
									case 35:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "谢谢你,让我们珍贵的货物能安全回家");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "干得好,我们总有一天会让那些越南帮付出代价的");
			                        	}
			                        }
			                        case 36:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "让那些越南帮付出血的代价!");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "多亏有你,让我们又一次的在战争中赢得胜利");
			                        	}
			                        }
			                        case 37:
									{
									    switch(random(5))
									    {
			                        		case 0: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "干得好,是时候该看看这义大利进口货葫芦里卖什么膏药了");
			                        		case 1: SendPlayerTextMsg_NPC(playerid, MNPC_WOOZIE, "我就知道你不会让我们失望,干得好!");
			                        	}
			                        }
			                    }
			                }
			            }
			        }
			    }
			}
		}
     	GiveMoney(playerid, MissionsList[mission][msMoney] + GetGVarInt("MSBonus", mission));
     	Log(moneylog, INFO, "%s(%d)获得了任务%d的奖金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], mission, MissionsList[mission][msMoney] + GetGVarInt("MSBonus", mission));
	    GivePlayerExp(playerid, MissionsList[mission][msExp], EXP_MISSION);
	    ShowPTD(playerid, 0, 1);
	    PlayerStopMission(playerid);
	    //CheckPlayerMission(playerid);
	}
}

stock PlayerJoinGlobalMission(playerid, mission)
{
	new string[144], dialog[512];
    if(mission > 0)
    {
		SetGVarInt("MissionPlayers", GetGVarInt("MissionPlayers", mission)+1, mission);
		format(string, sizeof(string), ""#TEXT_FADEBLUE"%s"#TEXT_WHITE"已经加入了这个任务", PlayerData[playerid][pName]);
		SendMissionMessage(mission, COLOR_WHITE, string);
		SendClientMessage(playerid, COLOR_WHITE, "已加入任务,请等待倒数结束开始任务");
		UpdatePlayerColor(playerid);
		UpdateGlobalMission(mission);
		format(dialog, sizeof(dialog), "%s\n%s\n\n"#TEXT_WHITE"奖励: 现金$%d 经验值:%d", MissionsList[mission][msTitle], MissionsList[mission][msDes], MissionsList[mission][msMoney], MissionsList[mission][msExp]);
		ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务信息", dialog, "确认", "");
		if(GetPlayerTeam(playerid) != NO_TEAM)
		{
		    new teamid = GetPlayerTeam(playerid);
		    if(Team[teamid][tLeader] == playerid)
		    {
		        format(string, sizeof(string), "** 小队队长开始了任务:%s,你也一同加入了这个任务");
	            ForEachPlayer(i)
				{
				    if(i == playerid || GetGVarInt("Eventing", i) == 1 || GetGVarInt("Mission", i) > 0 || IsPlayerBusy(i)) continue;
					if(GetPlayerTeam(i) == teamid)
					{
					    GivePlayerMission(i, mission);
					    PlayerStartMission(i, mission);
						SendClientMessage(i, COLOR_LIGHTBLUE, string);
					}
				}
			}
		}
	}
}

stock SendMissionMessage(mission, color, const string[])
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Mission", i) == mission)
	    {
	        SendClientMessage(i, color, string);
	    }
	}
}

stock StartNewNPCMission(mnpcid)
{
	new mission = 0;
    switch(mnpcid)
	{
		case MNPC_SWEET:
		{
		    switch(random(3))
		    {
		        case 0: mission = 17;
		        case 1: mission = 18;
		        case 2: mission = 19;
		    }
		}
		case MNPC_SIMEON:
		{
			switch(random(3))
		    {
		        case 0: mission = 20;
		        case 1: mission = 21;
		        case 2: mission = 22;
		    }
		}
		case MNPC_TREVOR:
		{
			switch(random(3))
		    {
		        case 0: mission = 23;
		        case 1: mission = 24;
		        case 2: mission = 25;
		    }
		}
		case MNPC_CESAR:
		{
			switch(random(3))
		    {
		        case 0: mission = 26;
		        case 1: mission = 27;
		        case 2: mission = 28;
		    }
		}
		case MNPC_EMMET:
		{
			switch(random(3))
		    {
		        case 0: mission = 29;
		        case 1: mission = 30;
		        case 2: mission = 31;
		    }
		}
		case MNPC_TORENO:
		{
			switch(random(3))
		    {
		        case 0: mission = 32;
		        case 1: mission = 33;
		        case 2: mission = 34;
		    }
		}
		case MNPC_WOOZIE:
		{
			switch(random(3))
		    {
		        case 0: mission = 35;
		        case 1: mission = 36;
		        case 2: mission = 37;
		    }
		}
	}
	SetGVarInt("MNPCStatus", STATUS_WAITING, mnpcid);
	SetGVarInt("MNPCMission", mission, mnpcid);
	SetGVarInt("MissionStage", 0, mission);
	SetGVarInt("MissionPlayers", 0, mission);
	SetGVarInt("MissionCount", 60, mission);
	//清空所有未清除的该任务载具与物件
	for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
		if(VehData[i][vType] == VTYPE_MISSION)
		{
			if(GetGVarInt("VehMission", i) == mission || GetGVarInt("VehMission", i) == 0)
			{
       			DeleteVehicle(i);
			}
		}
	}
	ForEachNPC(n)
	{
		if(GetGVarInt("DeadNPC", n) == 1) continue;
		if(GetGVarInt("MSTargetNPC", n) == mission || GetGVarInt("MSAlliesNPC", n) == mission)
		{
		    DestroyNPC(n);
		}
	}
	DestroyMissionObjects(mission);
	return mission;
}

stock StopGlobalMission(mission, fail=0)
{
	new i, j;
    ForEachPlayer(p)
	{
		if(GetGVarInt("Mission", p) == mission)
		{
	    	PlayerStopMission(p, fail);
	    }
	}
	ForEachNPC(n)
	{
		if(GetGVarInt("DeadNPC", n) == 1) continue;
		if(GetGVarInt("MSTargetNPC", n) == mission)
		{
		    DestroyNPC(n);
		}
		else if(GetGVarInt("MSAlliesNPC", n) == mission)
		{
		    SetGVarInt("NUnStreamDel", 1, n);
		}
	}
	for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
		if(VehData[i][vType] == VTYPE_MISSION)
		{
			if(GetGVarInt("VehMission", i) == mission)
			{
       			VehData[i][vLock] = 1;
				SetGVarInt("VUnStreamDel", 1, i);
			}
		}
	}
	for(i = 0, j = MAX_DROPS; i < j ; i++)
    {
        if(DropItem[i][idCreated] == 0) continue;
        if(DropItem[i][idType] == ITEM_MS && DropItem[i][idItemID] == mission)
        {
	        DeleteDropItem(i);
	    }
    }
	if(GetGVarInt("MSZone", mission) > 0)
	{
		GangZoneDestroy(GetGVarInt("MSZone", mission));
		DeleteGVar("MSZone", mission);
	}
    DeleteGVar("MNPCStatus", MissionsList[mission][msBoss]);
	DeleteGVar("MNPCMission", MissionsList[mission][msBoss]);
	DeleteGVar("MissionStage", mission);
	DeleteGVar("MissionPlayers", mission);
	DeleteGVar("MissionCount", mission);
	DeleteGVar("MSBonus", mission);
	DeleteGVar("MissionTrailer", mission);
	SetGVarInt("MissionTeam", NO_TEAM, mission);
}

PUBLIC:DestroyMissionObjects(mission)
{
	for(new i = 0, j = CountDynamicObjects(); i < j; i++)
	{
		if(GetGVarInt("MSObject", i) == mission)
		{
		    DestroyDynamicObject(i);
		    DeleteGVar("MSObject", i);
		}
	}
}

stock GetMissionTargetNPCAmount(mission)
{
	new count = 0;
	ForEachNPC(n)
	{
		if(GetGVarInt("DeadNPC", n) == 1) continue;
		if(GetGVarInt("MSTargetNPC", n) == mission)
		{
			count ++;
		}
	}
	return count;
}

stock UpdateGlobalMission(mission, stage=0)
{
	new string[144];
	if(MissionsList[mission][msType] == MISSION_GLOBAL && GetGVarInt("MNPCStatus", MissionsList[mission][msBoss]) != STATUS_FINISHED)
	{
		if(GetGVarInt("MissionPlayers", mission) < 1)
		{
		    StopGlobalMission(mission);
		    return;
		}
		else if(GetGVarInt("MissionPlayers", mission) > MAX_GMISSION_PLAYERS-1 && GetGVarInt("MNPCStatus", MissionsList[mission][msBoss]) == STATUS_WAITING)
		{
		    DeleteGVar("MissionCount", mission);
		    UpdateGlobalMission(mission, 1);//人数足够就无视倒数开始任务
		    return;
		}
		if(mission > 0 && stage > 0)
		{
		    SetGVarInt("MissionStage", stage, mission);
		    switch(mission)
			{
			    //Sweet
			    case 17:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 3, mission);
							SetGVarInt("MissionCount", 900, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), "任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(17, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
					        	    SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(17, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(17, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid;
							amount = 3 + random(3);
							if(GetGVarInt("MSTargetPos", mission) == -1) spawn = random(sizeof(SweetM1TargetPos));
							else
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{//确保上下次目标地不重复
								    spawn = random(sizeof(SweetM1TargetPos));
								}
							}
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 22;
						            case 1: weapon = 28;
							        case 2: weapon = 5;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 102;
							        case 1: skin = 103;
							        case 2: skin = 104;
							    }
							    npcid = CreateNPC(skin, weapon, 30.0, 0.0, SweetM1TargetPos[spawn][0]+float(random(4))-float(random(4)), SweetM1TargetPos[spawn][1]+float(random(4))-float(random(4)), SweetM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_BALLAS);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
                            format(string, sizeof(string), "前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"巴拉斯成员"#TEXT_WHITE"(%d/3)", 3-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, SweetM1TargetPos[spawn][0], SweetM1TargetPos[spawn][1], SweetM1TargetPos[spawn][2]);
									SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
								    SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"巴拉斯成员"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 18:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 3, mission);
							SetGVarInt("MissionCount", 480, mission);
							SetGVarInt("MTagTarget", -1, mission);
							SetGVarInt("MTagID", 0, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!需要喷漆罐的话可以至超市购买", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(18, 2);
					    }
					    case 2:
					    {
					    	if(GetGVarInt("MissionWave", mission) > 0)
					        {
					            SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	UpdateGlobalMission(18, 3);
					        }
					        else
					        {
					        	UpdateGlobalMission(18, 4);
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid, tagid, tagobj;
							amount = random(2);
							if(GetGVarInt("MSTargetPos", mission) == -1) spawn = random(sizeof(SweetM2TargetPos));
							else
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{//确保上下次目标地不重复
								    spawn = random(sizeof(SweetM2TargetPos));
								}
							}
							if(amount > 0)
							{
								for(i = 0; i < amount; i++)
				    			{
								    switch(random(3))
								    {
								        case 0: weapon = 0;
							            case 1: weapon = 22;
								        case 2: weapon = 5;
								    }
								    switch(random(2))
								    {
								        case 0: level = NPC_NOOB;
								        case 1: level = NPC_NORMAL;
								    }
								    switch(random(3))
								    {
								        case 0: skin = 102;
								        case 1: skin = 103;
								        case 2: skin = 104;
								    }
								    npcid = CreateNPC(skin, weapon, 45.0, 0.0, SweetM2TargetPos[spawn][6]+float(random(3))-float(random(3)), SweetM2TargetPos[spawn][7]+float(random(3))-float(random(3)), SweetM2TargetPos[spawn][8]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_BALLAS);
						            SetGVarInt("MSTargetNPC", mission, npcid);
						        }
							}

							switch(random(3))
							{
								case 0: tagid = 18662;
								case 1: tagid = 18666;
								case 2: tagid = 18667;
							}
							tagobj = CreateDynamicObject(tagid, SweetM2TargetPos[spawn][0], SweetM2TargetPos[spawn][1], SweetM2TargetPos[spawn][2], SweetM2TargetPos[spawn][3], SweetM2TargetPos[spawn][4], SweetM2TargetPos[spawn][5]);
							SetGVarInt("MTagTarget", spawn, mission);
							SetGVarInt("MTagID", tagid, mission);
							SetGVarInt("MTagProgress", 0, mission);
							SetGVarInt("MSObject", mission, tagobj);

							format(string, sizeof(string), ""#TEXT_WHITE"前往使用喷漆覆盖"#TEXT_YELLOW"巴拉斯涂鸦"#TEXT_WHITE"(%d/3)", 3-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, SweetM2TargetPos[spawn][0], SweetM2TargetPos[spawn][1], SweetM2TargetPos[spawn][2]);

        							SendClientMessage(p, COLOR_WHITE, string);
        							Streamer_Update(p);
        							if(PlayerHaveWeapon(p, 41) == 0) SendClientMessage(p, COLOR_WHITE, "你可以前往便利商店购买"#TEXT_YELLOW"喷漆罐");
								}
							}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已覆盖所有"#TEXT_YELLOW"巴拉斯涂鸦"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 19:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 300, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"击杀"#TEXT_RED"巴拉斯成员"#TEXT_WHITE"以及"#TEXT_RED"毒贩");
							UpdateGlobalMission(19, 2);
					    }
					    case 2:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid;
							amount = 8 + random(7),
							spawn = random(sizeof(SweetM3TargetPos));
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 22;
						            case 1: weapon = 28;
							        case 2: weapon = 5;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(5))
							    {
							        case 0: skin = 102;
							        case 1: skin = 103;
							        case 2: skin = 104;
							        case 3: skin = 28;
							        case 4: skin = 29;
							    }
							    npcid = CreateNPC(skin, weapon, 40.0, 0.0, SweetM3TargetPos[spawn][0]+float(random(6))-float(random(6)), SweetM3TargetPos[spawn][1]+float(random(6))-float(random(6)), SweetM3TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_BALLAS);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, SweetM3TargetPos[spawn][0], SweetM3TargetPos[spawn][1], SweetM3TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
					    }
					    case 3:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    UpdateGlobalMission(19, 4);
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"巴拉斯成员"#TEXT_WHITE"与"#TEXT_RED"毒贩"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Simeon
			    case 20:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 480, mission);
					        SetGVarInt("MissionWave", 2, mission);
					        SetGVarInt("MSTargetPos", -1, mission);
					        SetGVarInt("MSBonus", 0, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(20, 2);
					    }
					    case 2:
					    {
					        if(GetGVarInt("MissionWave", mission) > 0)
					        {
					            SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	UpdateGlobalMission(20, 3);
					        }
					        else
					        {
					        	UpdateGlobalMission(20, 4);
					    	}
					    }
					    case 3:
					    {
					        new npcs, spawn, skin, weapon, level, npcid, targetveh, rand;
							while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
							{
								spawn = random(sizeof(SimeonM1TargetPos));
							}
							npcs = random(2);
							if(npcs > 0)
							{
								switch(random(6))
								{
								    case 0: weapon = 0;
							        case 1: weapon = 22;
								    case 2: weapon = 5;
								    case 3: weapon = 6;
								    case 4: weapon = 4;
								    case 5: weapon = 7;
								}
								switch(random(2))
								{
								    case 0: level = NPC_NOOB;
								    case 1: level = NPC_NORMAL;
								}
								switch(random(8))
								{
								    case 0: skin = 15;
								    case 1: skin = 23;
								    case 2: skin = 25;
								    case 3: skin = 72;
								    case 4: skin = 100;
								    case 5: skin = 101;
								    case 6: skin = 181;
								    case 7: skin = 202;
								}
								npcid = CreateNPC(skin, weapon, 30.0, 0.0, SimeonM1TargetPos[spawn][0]+float(random(3))-float(random(3)), SimeonM1TargetPos[spawn][1]+float(random(3))-float(random(3)), SimeonM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_SIMEON);
								SetGVarInt("MSTargetNPC", mission, npcid);
							}
							rand = random(sizeof(LSCARSELL1DATA));
							targetveh = CreateMissionVehicle(LSCARSELL1DATA[rand][csModel], SimeonM1TargetPos[spawn][0], SimeonM1TargetPos[spawn][1], SimeonM1TargetPos[spawn][2], SimeonM1TargetPos[spawn][3], -1, -1, VTYPE_MISSION, 0);
							SetGVarInt("VehMission", mission, targetveh);
							SetGVarInt("MSTargetPos", spawn, mission);
                            format(string, sizeof(string), ""#TEXT_WHITE"取得"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"(%d/2)", 2-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, SimeonM1TargetPos[spawn][0], SimeonM1TargetPos[spawn][1], SimeonM1TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
					    }
					    case 4:
					    {
					        new bonus = GetGVarInt("MSBonus", mission), vehicleid;
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
								    SendClientMessage(p, COLOR_WHITE, "已收回所有"#TEXT_YELLOW"目标车辆"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
									if(bonus > 0)
									{
									    format(string, sizeof(string), ""#TEXT_WHITE"因为车况保持良好,获得额外奖金"#TEXT_FADEGREEN"~$%d", bonus);
									    SendClientMessage(p, COLOR_WHITE, string);
									}
									if(IsPlayerInAnyVehicle(p))
								    {
								        vehicleid = GetPlayerVehicleID(p);
								        if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == mission)
								        {
								            RemovePlayerFromVehicle_Fix(p);
								        }
								    }
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
				}
				case 21:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 480, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始,需要使用枪枝才能破坏车辆,你可以前往武装国度购买需要的枪械", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"摧毁所有"#TEXT_YELLOW"目标车辆");
							UpdateGlobalMission(21, 2);
					    }
					    case 2:
					    {
					        new i, npcs, spawn, skin, weapon, level, npcid, target[4];
							npcs = 2 + random(4),
							spawn = random(sizeof(SimeonM2TargetPos));
							for(i = 0; i < npcs; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 22;
						            case 1: weapon = 28;
							        case 2: weapon = 0;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 66;
							        case 1: skin = 71;
							        case 2: skin = 24;
							        case 3: skin = 25;
							        case 4: skin = 163;
							        case 5: skin = 164;
							    }
							    npcid = CreateNPC(skin, weapon, 30.0, 0.0, SimeonM2TargetPos[spawn][0]+float(random(4))-float(random(4)), SimeonM2TargetPos[spawn][1]+float(random(4))-float(random(4)), SimeonM2TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_SIMEON);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
             				SetGVarInt("MSTargetPos", spawn, mission);

							target[0] = CreateMissionVehicle(CarSellJob_High[random(sizeof(CarSellJob_High))][csModel], SimeonM2TargetPos[spawn][3], SimeonM2TargetPos[spawn][4], SimeonM2TargetPos[spawn][5], SimeonM2TargetPos[spawn][6], random(256), random(256), VTYPE_MISSION, 0);
							target[1] = CreateMissionVehicle(CarSellJob_High[random(sizeof(CarSellJob_High))][csModel], SimeonM2TargetPos[spawn][7], SimeonM2TargetPos[spawn][8], SimeonM2TargetPos[spawn][9], SimeonM2TargetPos[spawn][10], random(256), random(256), VTYPE_MISSION, 0);
							target[2] = CreateMissionVehicle(CarSellJob_High[random(sizeof(CarSellJob_High))][csModel], SimeonM2TargetPos[spawn][11], SimeonM2TargetPos[spawn][12], SimeonM2TargetPos[spawn][13], SimeonM2TargetPos[spawn][14], random(256), random(256), VTYPE_MISSION, 0);
							target[3] = CreateMissionVehicle(CarSellJob_High[random(sizeof(CarSellJob_High))][csModel], SimeonM2TargetPos[spawn][15], SimeonM2TargetPos[spawn][16], SimeonM2TargetPos[spawn][17], SimeonM2TargetPos[spawn][18], random(256), random(256), VTYPE_MISSION, 0);
							for(i = 0; i < 4; i++)
							{
							    SetGVarInt("VehMission", mission, target[i]);
							    SetVehicleHealth(target[i], 1000.0);
							    SetVehicleRandomNumberPlate(target[i]);
							    VehData[target[i]][vLock] = 1;
							}

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
								    SetGVarInt("playermissioncar[0]", target[0], p);
								    SetGVarInt("playermissioncar[1]", target[1], p);
								    SetGVarInt("playermissioncar[2]", target[2], p);
								    SetGVarInt("playermissioncar[3]", target[3], p);
									SetPlayerMissionGPS(p, mission, SimeonM2TargetPos[spawn][0], SimeonM2TargetPos[spawn][1], SimeonM2TargetPos[spawn][2]);
								}
							}
					    }
					    case 3:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已摧毁所有"#TEXT_YELLOW"目标车辆"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 22:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 240, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"目标地点"#TEXT_WHITE"偷走"#TEXT_YELLOW"目标车辆");
							UpdateGlobalMission(22, 2);
					    }
					    case 2:
					    {
					        new i, npcs, spawn, skin, weapon, level, npcid, target;
							npcs = 2 + random(4),
							spawn = random(sizeof(SimeonM3TargetPos));
							for(i = 0; i < npcs; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 22;
						            case 1: weapon = 28;
							        case 2: weapon = 25;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(2))
							    {
							        case 0: skin = 163;
							        case 1: skin = 164;
							    }
							    npcid = CreateNPC(skin, weapon, 30.0, 0.0, SimeonM3TargetPos[spawn][0]+float(random(5))-float(random(5)), SimeonM3TargetPos[spawn][1]+float(random(5))-float(random(5)), SimeonM3TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_SIMEON);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
             				SetGVarInt("MSTargetPos", spawn, mission);
							target = CreateMissionVehicle(CarSellJob_Super[random(sizeof(CarSellJob_Super))][csModel], SimeonM3TargetPos[spawn][0], SimeonM3TargetPos[spawn][1], SimeonM3TargetPos[spawn][2], SimeonM3TargetPos[spawn][3], random(256), random(256), VTYPE_MISSION, 0);
                            SetVehicleRandomNumberPlate(target);
							SetGVarInt("VehMission", mission, target);
                            SetVehicleHealth(target, 1200.0);

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, SimeonM3TargetPos[spawn][0], SimeonM3TargetPos[spawn][1], SimeonM3TargetPos[spawn][2]);
								}
							}
					    }
					    case 3:
					    {
					        new bonus = GetGVarInt("MSBonus", mission), vehicleid;
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送"#TEXT_YELLOW"目标车辆"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
									if(bonus > 0)
									{
									    format(string, sizeof(string), ""#TEXT_WHITE"因为车况保持良好,获得额外奖金"#TEXT_FADEGREEN"$%d", bonus);
									    SendClientMessage(p, COLOR_WHITE, string);
									}
									if(IsPlayerInAnyVehicle(p))
								    {
								        vehicleid = GetPlayerVehicleID(p);
								        if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == mission)
								        {
								            RemovePlayerFromVehicle_Fix(p);
								        }
								    }
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Trevor
			    case 23:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 480, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"目标地点"#TEXT_WHITE"偷走装有安毒的"#TEXT_YELLOW"油罐");
							UpdateGlobalMission(23, 2);
					    }
					    case 2:
					    {
					        new i, npcs, spawn, skin, weapon, level, npcid, target[2];
							npcs = 10 + random(5),
							spawn = random(sizeof(TrevorM1TargetPos));
							SetGVarInt("MSTargetPos", spawn, mission);
							for(i = 0; i < npcs; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 22;
						            case 1: weapon = 28;
							        case 2: weapon = 25;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 143;
							        case 1: skin = 144;
							        case 2: skin = 254;
							        case 3: skin = 30;
							        case 4: skin = 47;
							        case 5: skin = 101;
							    }
							    switch(random(2))
							    {
							    	case 0: npcid = CreateNPC(skin, weapon, 50.0, 0.0, TrevorM1TargetPos[spawn][8]+float(random(5))-float(random(5)), TrevorM1TargetPos[spawn][9]+float(random(5))-float(random(5)), TrevorM1TargetPos[spawn][10]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_CRACK);
							    	case 1: npcid = CreateNPC(skin, weapon, 50.0, 0.0, TrevorM1TargetPos[spawn][11]+float(random(5))-float(random(5)), TrevorM1TargetPos[spawn][12]+float(random(5))-float(random(5)), TrevorM1TargetPos[spawn][13]+0.3, float(random(360)), 0, 0, level, 1, 1, NTEAM_CRACK);
							    }
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

             				target[0] = CreateMissionVehicle(514, TrevorM1TargetPos[spawn][0], TrevorM1TargetPos[spawn][1], TrevorM1TargetPos[spawn][2], TrevorM1TargetPos[spawn][3], random(256), random(256), VTYPE_MISSION, 0);//Tanker
                            SetGVarInt("VehMission", mission, target[0]);
                            target[1] = CreateMissionVehicle(584, TrevorM1TargetPos[spawn][4], TrevorM1TargetPos[spawn][5], TrevorM1TargetPos[spawn][6], TrevorM1TargetPos[spawn][7], random(256), random(256), VTYPE_MISSION, 0);//Gas Tank
                            SetGVarInt("VehMission", mission, target[1]);
                            SetGVarInt("MissionTrailer", target[1], mission);

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, TrevorM1TargetPos[spawn][0], TrevorM1TargetPos[spawn][1], TrevorM1TargetPos[spawn][2]);
								}
							}
					    }
					    case 3:
					    {
					        new vehicleid;
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送"#TEXT_YELLOW"目标油罐"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
								if(IsPlayerInAnyVehicle(p))
								{
								    vehicleid = GetPlayerVehicleID(p);
								    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == mission)
								    {
								        RemovePlayerFromVehicle_Fix(p);
								    }
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 24:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 3, mission);
							SetGVarInt("MissionCount", 600, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(24, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
					        	    SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(24, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(24, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid, mveh[3];
							amount = 5 + random(4);
							if(GetGVarInt("MSTargetPos", mission) != -1)
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{
								    spawn = random(sizeof(TrevorM2TargetPos));
								}
							}
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 24;
						            case 1: weapon = 32;
							        case 2: weapon = 26;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(4))
							    {
							        case 0: skin = 100;
							        case 1: skin = 247;
							        case 2: skin = 248;
							        case 3: skin = 25063;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, TrevorM2TargetPos[spawn][12]+float(random(4))-float(random(4)), TrevorM2TargetPos[spawn][13]+float(random(4))-float(random(4)), TrevorM2TargetPos[spawn][14]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_LOST);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
					        mveh[0] = CreateMissionVehicle(463, TrevorM2TargetPos[spawn][0], TrevorM2TargetPos[spawn][1], TrevorM2TargetPos[spawn][2], TrevorM2TargetPos[spawn][3], 0, 0, VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, mveh[0]);
                            mveh[1] = CreateMissionVehicle(463, TrevorM2TargetPos[spawn][4], TrevorM2TargetPos[spawn][5], TrevorM2TargetPos[spawn][6], TrevorM2TargetPos[spawn][7], 0, 0, VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, mveh[1]);
                            mveh[2] = CreateMissionVehicle(482, TrevorM2TargetPos[spawn][8], TrevorM2TargetPos[spawn][9], TrevorM2TargetPos[spawn][10], TrevorM2TargetPos[spawn][11], 0, 0, VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, mveh[2]);

                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"失落摩托车帮成员"#TEXT_WHITE"(%d/3)", 3-GetGVarInt("MissionWave", mission), 30);
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, TrevorM2TargetPos[spawn][12], TrevorM2TargetPos[spawn][13], TrevorM2TargetPos[spawn][14]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"失落摩托车帮成员"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 25:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionCount", 600, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(25, 2);
					    }
					    case 2:
						{
						    new i, spawn, amount, skin, npcid, Float:nx, Float:ny, Float:nz, nzone;
						    amount = 2 + random(2),
						    spawn = random(sizeof(TrevorM3TargetPos));
						    GetRandAgentPos(spawn, nx, ny, nz);
						    for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: skin = 165;
							        case 1: skin = 166;
							    }
							    npcid = CreateNPC(skin, 29, 60.0, 0.0, nx+float(random(8))-float(random(8)), ny+float(random(8))-float(random(8)), nz+1.0, float(random(360)), 0, 0, NPC_NORMAL, 1, 0, NTEAM_GOV);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
						    nzone = GangZoneCreate(TrevorM3TargetPos[spawn][1], TrevorM3TargetPos[spawn][3], TrevorM3TargetPos[spawn][0], TrevorM3TargetPos[spawn][2]);
						    SetGVarInt("MSZone", nzone, mission);

							format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"范围内"#TEXT_WHITE"寻找并击杀正在窃听的"#TEXT_RED"政府探员");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, (TrevorM3TargetPos[spawn][0]+TrevorM3TargetPos[spawn][1])/2, (TrevorM3TargetPos[spawn][2]+TrevorM3TargetPos[spawn][3])/2, 0.0);
        							SendClientMessage(p, COLOR_WHITE, string);
        							GangZoneShowForPlayer(p, nzone, 0xFF8000EC);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
						}
						case 3:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    UpdateGlobalMission(25, 4);
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"政府探员"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Cesar
			    case 26:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 600, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"偷取所有"#TEXT_YELLOW"目标车辆");
							UpdateGlobalMission(26, 2);
					    }
					    case 2:
					    {
					        new i, npcs, spawn, skin, weapon, level, npcid, target[4];
							npcs = 10 + random(6),
							spawn = random(sizeof(CesarM1TargetPos));
							for(i = 0; i < npcs; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 28;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(8))
							    {
							        case 0: skin = 13;
							        case 1: skin = 19;
							        case 2: skin = 21;
							        case 3: skin = 22;
							        case 4: skin = 23;
							        case 5: skin = 69;
							        case 6: skin = 181;
							        case 7: skin = 226;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, CesarM1TargetPos[spawn][0]+float(random(20))-float(random(20)), CesarM1TargetPos[spawn][1]+float(random(20))-float(random(20)), CesarM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_CRACK);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
             				SetGVarInt("MSTargetPos", spawn, mission);

							target[0] = CreateRandomModdedVehicle(CesarM1TargetPos[spawn][3], CesarM1TargetPos[spawn][4], CesarM1TargetPos[spawn][5], CesarM1TargetPos[spawn][6], VCLASS_ALL, -1, -1, VTYPE_MISSION, 0);
							target[1] = CreateRandomModdedVehicle(CesarM1TargetPos[spawn][7], CesarM1TargetPos[spawn][8], CesarM1TargetPos[spawn][9], CesarM1TargetPos[spawn][10], VCLASS_ALL, -1, -1, VTYPE_MISSION, 0);
							target[2] = CreateRandomModdedVehicle(CesarM1TargetPos[spawn][11], CesarM1TargetPos[spawn][12], CesarM1TargetPos[spawn][13], CesarM1TargetPos[spawn][14], VCLASS_ALL, -1, -1, VTYPE_MISSION, 0);
							target[3] = CreateRandomModdedVehicle(CesarM1TargetPos[spawn][15], CesarM1TargetPos[spawn][16], CesarM1TargetPos[spawn][17], CesarM1TargetPos[spawn][18], VCLASS_ALL, -1, -1, VTYPE_MISSION, 0);
							for(i = 0; i < 4; i++)
							{
							    SetGVarInt("VehMission", mission, target[i]);
							    SetVehicleHealth(target[i], 1500.0);
							    SetVehicleRandomNumberPlate(target[i]);
							}

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, CesarM1TargetPos[spawn][0], CesarM1TargetPos[spawn][1], CesarM1TargetPos[spawn][2]);
								}
							}
					    }
					    case 3:
					    {
					        new i, j, k;
					    	for(i = 1, j = GetVehiclePoolSize(), k = 0; i <= j ; i++)
							{
								if(VehData[i][vType] == VTYPE_MISSION)
								{
									if(GetGVarInt("VehMission", i) == mission && GetGVarInt("VUnStreamDel", i) == 0) k ++;
								}
							}
					    	if(k < 1)
					    	{
					    	    UpdateGlobalMission(26, 4);
					    	}
					    	else
					    	{
								new spawn = GetGVarInt("MSTargetPos", mission);
								format(string, sizeof(string), ""#TEXT_WHITE"目前还有%d台"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"需要运送", k);
								ForEachPlayer(p)
						        {
						            if(GetGVarInt("Mission", p) == mission)
									{
										SetPlayerMissionGPS(p, mission, CesarM1TargetPos[spawn][0], CesarM1TargetPos[spawn][1], CesarM1TargetPos[spawn][2]);
										SendClientMessage(p, COLOR_WHITE, string);
									}
								}
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送所有"#TEXT_YELLOW"目标车辆"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 27:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 300, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"击杀所有"#TEXT_RED"维戈帮成员"#TEXT_WHITE"并寻找目标包裹");
							UpdateGlobalMission(27, 2);
					    }
					    case 2:
					    {
					        new i, npcs, spawn, skin, weapon, level, npcid;
							npcs = 5 + random(4),
							spawn = random(sizeof(CesarM2TargetPos));
							for(i = 0; i < npcs; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 28;
						            case 2: weapon = 24;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 108;
							        case 1: skin = 109;
							        case 2: skin = 110;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, CesarM2TargetPos[spawn][0]+float(random(6))-float(random(6)), CesarM2TargetPos[spawn][1]+float(random(6))-float(random(6)), CesarM2TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_VAGOS);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					            if(i == 0) SetGVarInt("MSDropNPC", 1, npcid);//让第一个生成的NPC身上戴着目标包裹
					        }
             				SetGVarInt("MSTargetPos", spawn, mission);

                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, CesarM2TargetPos[spawn][0], CesarM2TargetPos[spawn][1], CesarM2TargetPos[spawn][2]);
								}
							}
					    }
					    case 3:
					    {
					        ForEachPlayer(p)
						    {
						        if(GetGVarInt("Mission", p) == mission)
								{
								    if(GetGVarInt("PlayerMSDrop", p) == 1) SendClientMessage(p, COLOR_WHITE, "将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"西萨的住处");
								    else SendClientMessage(p, COLOR_WHITE, "协助将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"西萨的住处");
									SetPlayerCheckpoint(p, 1794.6018, -2147.5149, 13.3466, 8.0);

								}
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已成功运送"#TEXT_YELLOW"目标包裹"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 28:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 4, mission);
							SetGVarInt("MissionCount", 600, mission);
							SetGVarInt("MSTargetPos", random(sizeof(CesarM3TargetPos)), mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(28, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
                  					SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(28, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(28, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid, wave, Float:nx, Float:ny, Float:nz;
					        wave = GetGVarInt("MissionWave", mission),
					        spawn = GetGVarInt("MSTargetPos", mission);
							amount = 4 + random(2);
							switch(wave)
							{
							    case 3: {nx = CesarM3TargetPos[spawn][0]; ny = CesarM3TargetPos[spawn][1]; nz = CesarM3TargetPos[spawn][2];}//wave 1
							    case 2: {nx = CesarM3TargetPos[spawn][3]; ny = CesarM3TargetPos[spawn][4]; nz = CesarM3TargetPos[spawn][5];}//wave 2
							    case 1: {nx = CesarM3TargetPos[spawn][6]; ny = CesarM3TargetPos[spawn][7]; nz = CesarM3TargetPos[spawn][8];}//wave 3
							    case 0: {nx = CesarM3TargetPos[spawn][9]; ny = CesarM3TargetPos[spawn][10]; nz = CesarM3TargetPos[spawn][11];}//wave 4
							}
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 28;
						            case 2: weapon = 24;
						            case 3: weapon = 25;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 108;
							        case 1: skin = 109;
							        case 2: skin = 110;
							    }

							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, nx+float(random(4))-float(random(4)), ny+float(random(4))-float(random(4)), nz+0.3, float(random(360)), 0, 0, level, 1, 1, NTEAM_VAGOS);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
							if(wave == 3) format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"维戈帮成员"#TEXT_WHITE"(%d/4)", 4-GetGVarInt("MissionWave", mission), 30);
							else format(string, sizeof(string), ""#TEXT_WHITE"前往下一个"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀更多"#TEXT_RED"维戈帮成员"#TEXT_WHITE"(%d/4)", 4-GetGVarInt("MissionWave", mission), 30);
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, nx, ny, nz);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"维戈帮成员"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Emmet
			    case 29:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionCount", 480, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(29, 2);
					    }
					    case 2:
					    {
					        new i, amount, spawn, weapon, level, npcid, targetveh;
					        spawn = random(sizeof(EmmetM1TargetPos));
							amount = 2 + random(2);

							for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 22;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    npcid = CreateNPC(287, weapon, 80.0, 50.0, EmmetM1TargetPos[spawn][0]+float(random(5))-float(random(5)), EmmetM1TargetPos[spawn][1]+float(random(5))-float(random(5)), EmmetM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 2, 1, NTEAM_GOV);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

					        targetveh = CreateMissionVehicle(414, EmmetM1TargetPos[spawn][0], EmmetM1TargetPos[spawn][1], EmmetM1TargetPos[spawn][2], EmmetM1TargetPos[spawn][3], 0, 0, VTYPE_MISSION, 0);
					        SetVehicleHealth(targetveh, 2000.0);
                            SetGVarInt("VehMission", mission, targetveh);
                            SetGVarInt("MissionTarget", targetveh, mission);

							format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"偷取装有军武的"#TEXT_YELLOW"货车");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, EmmetM1TargetPos[spawn][0], EmmetM1TargetPos[spawn][1], EmmetM1TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 3:
					    {
					        new i, j, amount, level, npcid, vmodel, targetveh[sizeof(EmmetM1BackupPos)];
                            for(i = 0; i < sizeof(EmmetM1BackupPos); i++)
			    			{
			    			    amount = 2 + random(2);
			    			    for(j = 0; j < amount; j++)
			    				{
				    			    switch(random(2))
								    {
								        case 0: level = NPC_NORMAL;
								        case 1: level = NPC_GANGSTER;
								    }
								    npcid = CreateNPC(287, 29, 80.0, 50.0, EmmetM1BackupPos[i][0]+float(random(5))-float(random(5)), EmmetM1BackupPos[i][1]+float(random(5))-float(random(5)), EmmetM1BackupPos[i][2]+0.3, float(random(360)), 0, 0, level, 2, 1, NTEAM_GOV);
						            SetGVarInt("MSTargetNPC", mission, npcid);
						        }

			    			    switch(random(2))
			    			    {
			    			        case 0: vmodel = 433;
			    			        case 1: vmodel = 470;
			    			    }
							    targetveh[i] = CreateMissionVehicle(vmodel, EmmetM1BackupPos[i][0], EmmetM1BackupPos[i][1], EmmetM1BackupPos[i][2], EmmetM1BackupPos[i][3], 0, 0, VTYPE_MISSION, 0);
                            	SetGVarInt("VehMission", mission, targetveh[i]);
					        }

							format(string, sizeof(string), ""#TEXT_WHITE"将"#TEXT_YELLOW"货车"#TEXT_WHITE"送回"#TEXT_RED"埃米特的藏身处");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerCheckpoint(p, 2453.5166, -1977.0822, 13.1765, 8.0);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送装有武装的"#TEXT_YELLOW"货车"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 30:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 480, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"破坏军火交易并劫走目标包裹");
							UpdateGlobalMission(30, 2);
					    }
					    case 2:
					    {
					        new i, npcs[2], spawn, skin, weapon, level, npcid, vmodel[3], veh[3], vcolor[3];
							npcs[0] = 4 + random(4),
							npcs[1] = 4 + random(4),
							spawn = random(sizeof(EmmetM2TargetPos));
							for(i = 0; i < npcs[0]; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 28;
						            case 1: weapon = 25;
						            case 2: weapon = 24;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 102;
							        case 1: skin = 103;
							        case 2: skin = 104;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, EmmetM2TargetPos[spawn][0]+float(random(5))-float(random(5)), EmmetM2TargetPos[spawn][1]+float(random(5))-float(random(5)), EmmetM2TargetPos[spawn][2]+0.3, EmmetM2TargetPos[spawn][3], 0, 0, level, 3, 1, NTEAM_BALLAS);
								SetGVarInt("MSTargetNPC", mission, npcid);
					        }

					        for(i = 0; i < npcs[1]; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 30;
						            case 1: weapon = 29;
						            case 2: weapon = 24;
									case 3: weapon = 33;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 111;
							        case 1: skin = 112;
							        case 2: skin = 113;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 0.0, EmmetM2TargetPos[spawn][4]+float(random(5))-float(random(5)), EmmetM2TargetPos[spawn][5]+float(random(5))-float(random(5)), EmmetM2TargetPos[spawn][6]+0.3, EmmetM2TargetPos[spawn][7], 0, 0, level, 3, 1, NTEAM_RUSSIAN);
					            SetGVarInt("MSTargetNPC", mission, npcid);
								if(i == 0) SetGVarInt("MSDropNPC", 1, npcid);//让第一个生成的NPC身上戴着目标包裹
					        }

             				for(i = 0; i < 3; i++)
							{
							    switch(random(6))
							    {
							        case 0: {vmodel[i] = 412; vcolor[i] = 167;}
						            case 1: {vmodel[i] = 566; vcolor[i] = 171;}
						            case 2: {vmodel[i] = 517; vcolor[i] = 136;}
						            case 3: {vmodel[i] = 540; vcolor[i] = 0;}
						            case 4: {vmodel[i] = 405; vcolor[i] = 0;}
						            case 5: {vmodel[i] = 445; vcolor[i] = 0;}
							    }
							}
                            veh[0] = CreateMissionVehicle(vmodel[0], EmmetM2TargetPos[spawn][8], EmmetM2TargetPos[spawn][9], EmmetM2TargetPos[spawn][10], EmmetM2TargetPos[spawn][11], vcolor[0], vcolor[0], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[0]);
							veh[1] = CreateMissionVehicle(vmodel[1], EmmetM2TargetPos[spawn][12], EmmetM2TargetPos[spawn][13], EmmetM2TargetPos[spawn][14], EmmetM2TargetPos[spawn][15], vcolor[1], vcolor[1], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[1]);
							veh[2] = CreateMissionVehicle(vmodel[2], EmmetM2TargetPos[spawn][16], EmmetM2TargetPos[spawn][17], EmmetM2TargetPos[spawn][18], EmmetM2TargetPos[spawn][19], vcolor[2], vcolor[2], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[2]);

							ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, EmmetM2TargetPos[spawn][4], EmmetM2TargetPos[spawn][5], EmmetM2TargetPos[spawn][6]);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 3:
					    {
					        ForEachPlayer(p)
						    {
						        if(GetGVarInt("Mission", p) == mission)
								{
								    if(GetGVarInt("PlayerMSDrop", p) == 1) SendClientMessage(p, COLOR_WHITE, "将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"埃米特的藏身处");
								    else SendClientMessage(p, COLOR_WHITE, "协助将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"埃米特的藏身处");
									SetPlayerCheckpoint(p, 2453.5166, -1977.0822, 13.1765, 8.0);
								}
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
								    SendClientMessage(p, COLOR_WHITE, "已成功运送"#TEXT_YELLOW"目标包裹"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 31:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 3, mission);
							SetGVarInt("MissionCount", 480, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(31, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
					        	    SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(31, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(31, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid;
							amount = 4 + random(2);
							if(GetGVarInt("MSTargetPos", mission) == -1) spawn = random(sizeof(EmmetM3TargetPos));
							else
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{//确保上下次目标地不重复
								    spawn = random(sizeof(EmmetM3TargetPos));
								}
							}
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(3))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 30;
									case 2: weapon = 33;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NOOB;
							        case 1: level = NPC_NORMAL;
							    }
							    switch(random(6))
							    {
               						case 0: skin = 3;
							        case 1: skin = 46;
							        case 2: skin = 98;
							        case 3: skin = 179;
							        case 4: skin = 186;
							        case 5: skin = 223;
							    }
							    npcid = CreateNPC(skin, weapon, 75.0, 0.0, EmmetM3TargetPos[spawn][0]+float(random(3))-float(random(3)), EmmetM3TargetPos[spawn][1]+float(random(3))-float(random(3)), EmmetM3TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_CRACK);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"敌对军火商"#TEXT_WHITE"(%d/3)", 3-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, EmmetM3TargetPos[spawn][0], EmmetM3TargetPos[spawn][1], EmmetM3TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"敌对军火商"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Toreno
       			case 32:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionCount", 480, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(32, 2);
					    }
					    case 2:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid, vmodel, veh;
							amount = 3,
							spawn = random(sizeof(TorenoM1TargetPos));
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 24;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_NORMAL;
							        case 1: level = NPC_GANGSTER;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 25067;
							        case 1: skin = 25068;
							        case 2: skin = 25069;
							        case 3: skin = 25070;
							        case 4: skin = 25071;
							        case 5: skin = 25072;
							    }
							    npcid = CreateNPC(skin, weapon, 75.0, 0.0, TorenoM1TargetPos[spawn][0]+float(random(6))-float(random(6)), TorenoM1TargetPos[spawn][1]+float(random(6))-float(random(6)), TorenoM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 3, 1, NTEAM_MWEATHER);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					            if(i == 0)
					            {
					                SetGVarInt("MSRunnerNPC", 1, npcid);
					                FCNPC_SetArmour(npcid, 150.0);
					            }
					        }
					        switch(spawn)
					        {
								case 0: vmodel = 603;//Phoenix
								case 1: vmodel = 487;//Maverick
								case 2: vmodel = 402;//Buffalo
								case 3: vmodel = 521;//FCR-900
					        }
					        veh = CreateMissionVehicle(vmodel, TorenoM1TargetPos[spawn][3], TorenoM1TargetPos[spawn][4], TorenoM1TargetPos[spawn][5], TorenoM1TargetPos[spawn][6], -1, -1, VTYPE_MISSION, 0);
					        SetGVarInt("VehMission", mission, veh);
					        SetGVarInt("MSRunnerVeh", veh, mission);
					        VehData[veh][vLock] = 1;

                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"恐怖分子"#TEXT_WHITE",并追踪所有试图逃跑的人员");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, TorenoM1TargetPos[spawn][0], TorenoM1TargetPos[spawn][1], TorenoM1TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, level, weapon, npcid;
							amount = 6 + random(4),
							spawn = GetGVarInt("MSTargetPos", mission);
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 24;
						            case 2: weapon = 30;
									case 3: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 25067;
							        case 1: skin = 25068;
							        case 2: skin = 25069;
							        case 3: skin = 25070;
							        case 4: skin = 25071;
							        case 5: skin = 25072;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 50.0, TorenoM1TargetPos[spawn][7]+float(random(8))-float(random(8)), TorenoM1TargetPos[spawn][8]+float(random(8))-float(random(8)), TorenoM1TargetPos[spawn][9]+0.3, float(random(360)), 0, 0, level, 3, 0, NTEAM_MWEATHER);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

                            format(string, sizeof(string), ""#TEXT_WHITE"有其中一人开始逃跑了!追踪他的"#TEXT_YELLOW"载具"#TEXT_WHITE"来找到他们的会合点,再将他们一网打尽");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
         							SetVehicleParamsForPlayer(GetGVarInt("MSRunnerVeh", mission), p, 1, 0);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    UpdateGlobalMission(32, 5);
					    	}
					    }
					    case 5:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"恐怖分子"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 33:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionCount", 600, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(33, 2);
					    }
					    case 2:
					    {
							new i, npcid, spawn, veh[4], obj[4], skin, weapon, amount, level;
							for(i = 0; i < 4; i++)
							{
							    spawn = random(sizeof(TorenoM2TargetPos));
							    veh[i] = CreateMissionVehicle(593, TorenoM2VehPos[i][0], TorenoM2VehPos[i][1], TorenoM2VehPos[i][2], TorenoM2VehPos[i][3], -1, -1, VTYPE_MISSION, 0);
							    SetGVarInt("MSVehTarget", spawn, veh[i]);
							    SetGVarInt("MSVehLoaded", 1, veh[i]);
							    SetGVarInt("VehMission", mission, veh[i]);

							    obj[i] = CreateDynamicObject(18728, TorenoM2TargetPos[spawn][0], TorenoM2TargetPos[spawn][1], TorenoM2TargetPos[spawn][2]-2.8, 0.0, 0.0, 0.0);
							    SetGVarInt("MSObject", mission, obj[i]);
							    SetGVarInt("MSTargetObject", obj[i], spawn);
							}

							amount = 2 + random(4);
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 30;
									case 2: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 25067;
							        case 1: skin = 25068;
							        case 2: skin = 25069;
							        case 3: skin = 25070;
							        case 4: skin = 25071;
							        case 5: skin = 25072;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 50.0, 411.4756+float(random(12))-float(random(12)), 2504.3569+float(random(12))-float(random(12)), 16.7844, float(random(360)), 0, 0, level, 3, 1, NTEAM_MWEATHER);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

							format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"废弃机场"#TEXT_WHITE"取得装有补给物资的"#TEXT_YELLOW"飞机"#TEXT_WHITE",并击杀任何干扰的"#TEXT_RED"敌人");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, 411.4756, 2504.3569, 16.4844);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
						}
						case 3:
						{
						    new count;
						    for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
							{
								if(VehData[i][vType] == VTYPE_MISSION)
								{
									if(GetGVarInt("VehMission", i) == mission && GetGVarInt("MSVehLoaded", i) == 1)
									{
						       			count ++;
									}
								}
							}
							if(count > 0)
							{
							    format(string, sizeof(string), ""#TEXT_WHITE"目前尚有%d架"#TEXT_YELLOW"飞机"#TEXT_WHITE"的补给品尚未运送,前往"#TEXT_YELLOW"废弃机场"#TEXT_WHITE"取得尚未运送的补给品", count);
							    ForEachPlayer(p)
						        {
						            if(GetGVarInt("Mission", p) == mission)
									{
										SetPlayerMissionGPS(p, mission, 411.4756, 2504.3569, 16.4844);
	        							SendClientMessage(p, COLOR_WHITE, string);
									}
								}
							}
							else UpdateGlobalMission(33, 4);
						}
						case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送所有"#TEXT_YELLOW"补给物资"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
				}
				case 34:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 5, mission);
							SetGVarInt("MissionCount", 600, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(34, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
					        	    SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(34, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(34, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, level, npcid, veh[2];
							amount = 4 + random(2);
							if(GetGVarInt("MSTargetPos", mission) == -1) spawn = random(sizeof(TorenoM3TargetPos));
							else
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{//确保上下次目标地不重复
								    spawn = random(sizeof(TorenoM3TargetPos));
								}
							}
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 30;
						            case 2: weapon = 24;
									case 3: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(6))
							    {
							        case 0: skin = 25067;
							        case 1: skin = 25068;
							        case 2: skin = 25069;
							        case 3: skin = 25070;
							        case 4: skin = 25071;
							        case 5: skin = 25072;
							    }
							    npcid = CreateNPC(skin, weapon, 50.0, 50.0, TorenoM3TargetPos[spawn][0]+float(random(6))-float(random(6)), TorenoM3TargetPos[spawn][1]+float(random(6))-float(random(6)), TorenoM3TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 0, NTEAM_MWEATHER);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }
					        veh[0] = CreateMissionVehicle(500, TorenoM3TargetPos[spawn][3], TorenoM3TargetPos[spawn][4], TorenoM3TargetPos[spawn][5], TorenoM3TargetPos[spawn][6], 0, 0, VTYPE_MISSION, 0);
							SetGVarInt("VehMission", mission, veh[0]);
							veh[1] = CreateMissionVehicle(500, TorenoM3TargetPos[spawn][7], TorenoM3TargetPos[spawn][8], TorenoM3TargetPos[spawn][9], TorenoM3TargetPos[spawn][10], 0, 0, VTYPE_MISSION, 0);
							SetGVarInt("VehMission", mission, veh[1]);

                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"击杀"#TEXT_RED"外来分子"#TEXT_WHITE"(%d/5)", 5-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, TorenoM3TargetPos[spawn][0], TorenoM3TargetPos[spawn][1], TorenoM3TargetPos[spawn][2]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"外来分子"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    //Woozie
			    case 35:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionCount", 480, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(35, 2);
					    }
					    case 2:
					    {
					        new i, amount, spawn, skin, weapon, npcid, vmodel[3], veh[3];
							amount = 8 + random(2),
							spawn = random(sizeof(WoozieM1TargetPos));
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 24;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 121;
							        case 1: skin = 122;
							        case 2: skin = 123;
							    }
							    npcid = CreateNPC(skin, weapon, 75.0, 0.0, WoozieM1TargetPos[spawn][0]+float(random(8))-float(random(8)), WoozieM1TargetPos[spawn][1]+float(random(8))-float(random(8)), WoozieM1TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, NPC_GANGSTER, 1, 0, NTEAM_DANANG);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

                            veh[0] = CreateMissionVehicle(505, WoozieM1TargetPos[spawn][3], WoozieM1TargetPos[spawn][4], WoozieM1TargetPos[spawn][5], WoozieM1TargetPos[spawn][6], -1, -1, VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[0]);
                            SetGVarInt("MissionTarget", veh[0], mission);
                            SetVehicleHealth(veh[0], 3000.0);

                            for(i = 1; i < 3; i++)
							{
							    switch(random(5))
							    {
							        case 0: vmodel[i] = 546;
						            case 1: vmodel[i] = 550;
						            case 2: vmodel[i] = 554;
						            case 3: vmodel[i] = 579;
						            case 4: vmodel[i] = 410;
							    }
							}
							veh[1] = CreateMissionVehicle(vmodel[1], WoozieM1TargetPos[spawn][7], WoozieM1TargetPos[spawn][8], WoozieM1TargetPos[spawn][9], WoozieM1TargetPos[spawn][10], random(256), random(256), VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[1]);
                            SetVehicleHealth(veh[1], 650.0);
							veh[2] = CreateMissionVehicle(vmodel[2], WoozieM1TargetPos[spawn][11], WoozieM1TargetPos[spawn][12], WoozieM1TargetPos[spawn][13], WoozieM1TargetPos[spawn][14], random(256), random(256), VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[2]);
                            SetVehicleHealth(veh[2], 650.0);

                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"从"#TEXT_RED"越南帮"#TEXT_WHITE"手中夺回"#TEXT_YELLOW"目标车辆");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, WoozieM1TargetPos[spawn][3], WoozieM1TargetPos[spawn][4], WoozieM1TargetPos[spawn][5]);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 3:
					    {
					        new i, amount, spawn, skin, weapon, npcid, veh;
							amount = 4,
							spawn = GetGVarInt("MSTargetPos", mission);
							for(i = 0; i < amount; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 30;
						            case 1: weapon = 29;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 121;
							        case 1: skin = 122;
							        case 2: skin = 123;
							    }
							    npcid = CreateNPC(skin, weapon, 75.0, 0.0, WoozieM1TargetPos[spawn][15]+float(random(5))-float(random(5)), WoozieM1TargetPos[spawn][16]+float(random(5))-float(random(5)), WoozieM1TargetPos[spawn][17]+0.3, float(random(360)), 0, 0, NPC_GANGSTER, 3, 1, NTEAM_CRACK);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

							veh = CreateMissionVehicle(482, WoozieM1TargetPos[spawn][18], WoozieM1TargetPos[spawn][19], WoozieM1TargetPos[spawn][20], WoozieM1TargetPos[spawn][21], -1, -1, VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh);

                           	format(string, sizeof(string), ""#TEXT_WHITE"将"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"送回"#TEXT_RED"吴梓穆的基地");
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerCheckpoint(p, -2157.1819, 654.5822, 52.3707, 6.0);
        							SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已运送"#TEXT_YELLOW"目标车辆"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 36:
			    {
			        switch(stage)
					{
					    case 1:
					    {
							SetGVarInt("MissionWave", 3, mission);
							SetGVarInt("MissionCount", 480, mission);
							SetGVarInt("MSTargetPos", -1, mission);
							format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							UpdateGlobalMission(36, 2);
					    }
					    case 2:
					    {
					    	new count = GetMissionTargetNPCAmount(mission);
					    	if(count < 1)
					    	{
					    	    if(GetGVarInt("MissionWave", mission) > 0)
					        	{
					        	    SetGVarInt("MissionWave", GetGVarInt("MissionWave", mission)-1, mission);
					        	    UpdateGlobalMission(36, 3);
					        	}
					        	else
					        	{
					        	    UpdateGlobalMission(36, 4);
					        	}
					    	}
					    }
					    case 3:
					    {
					        new i, enemies, allies, spawn, skin, weapon, level, npcid;
							enemies = 5 + random(3),
							allies = 2;

							if(GetGVarInt("MSTargetPos", mission) == -1) spawn = random(sizeof(WoozieM2TargetPos));
							else
							{
								while(spawn == 0 || spawn == GetGVarInt("MSTargetPos", mission))
								{//确保上下次目标地不重复
								    spawn = random(sizeof(WoozieM2TargetPos));
								}
							}

							for(i = 0; i < enemies; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 30;
						            case 2: weapon = 24;
									case 3: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 121;
							        case 1: skin = 122;
							        case 2: skin = 123;
							    }
							    npcid = CreateNPC(skin, weapon, 100.0, 0.0, WoozieM2TargetPos[spawn][0]+float(random(9))-float(random(9)), WoozieM2TargetPos[spawn][1]+float(random(12))-float(random(12)), WoozieM2TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, level, 1, 1, NTEAM_DANANG);
					            SetGVarInt("MSTargetNPC", mission, npcid);
					        }

							for(i = 0; i < allies; i++)
			    			{
							    switch(random(2))
							    {
							        case 0: weapon = 29;
						            case 1: weapon = 31;
							    }
							    switch(random(3))
							    {
							        case 0: skin = 117;
							        case 1: skin = 118;
							        case 2: skin = 120;
							    }
							    npcid = CreateNPC(skin, weapon, 2000.0, 0.0, WoozieM2TargetPos[spawn][0]+float(random(10))-float(random(10)), WoozieM2TargetPos[spawn][1]+float(random(15))-float(random(15)), WoozieM2TargetPos[spawn][2]+0.3, float(random(360)), 0, 0, NPC_NOOB, 3, 1, NTEAM_TRIAD);
					            SetGVarInt("MSAlliesNPC", mission, npcid);
					        }
                            format(string, sizeof(string), ""#TEXT_WHITE"前往指定"#TEXT_YELLOW"地点"#TEXT_WHITE"协助"#TEXT_BLUE"三合会"#TEXT_WHITE"消灭"#TEXT_RED"越南帮"#TEXT_WHITE"(%d/3)", 3-GetGVarInt("MissionWave", mission));
                            ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, WoozieM2TargetPos[spawn][0], WoozieM2TargetPos[spawn][1], WoozieM2TargetPos[spawn][2]);
									SendClientMessage(p, COLOR_WHITE, string);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已消灭所有"#TEXT_RED"越南帮成员"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			    case 37:
			    {
			        switch(stage)
					{
					    case 1:
					    {
					        SetGVarInt("MissionCount", 300, mission);
					        format(string, sizeof(string), ""#TEXT_WHITE"任务"#TEXT_BLUE"%s"#TEXT_WHITE"已经开始!", MissionsList[mission][msTitle]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SendMissionMessage(mission, COLOR_WHITE, ""#TEXT_WHITE"前往"#TEXT_YELLOW"指定地点"#TEXT_WHITE"破坏交易并劫走目标包裹");
							UpdateGlobalMission(37, 2);
					    }
					    case 2:
					    {
					        new i, npcs[2], spawn, skin, weapon, level, npcid, vmodel[3], veh[3], vcolor[3];
							npcs[0] = 4 + random(6),
							npcs[1] = 4 + random(6),
							spawn = random(sizeof(WoozieM3TargetPos));
							for(i = 0; i < npcs[0]; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 30;
						            case 1: weapon = 29;
						            case 2: weapon = 24;
									case 3: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(5))
							    {
							        case 0: skin = 25074;
							        case 1: skin = 25075;
							        case 2: skin = 25076;
							        case 3: skin = 25077;
							        case 4: skin = 25078;
							    }
							    npcid = CreateNPC(skin, weapon, 80.0, 50.0, WoozieM3TargetPos[spawn][0]+float(random(8))-float(random(8)), WoozieM3TargetPos[spawn][1]+float(random(8))-float(random(8)), WoozieM3TargetPos[spawn][2]+0.3, WoozieM3TargetPos[spawn][3], 0, 0, level, 1, 1, NTEAM_SINDACCO);
								SetGVarInt("MSTargetNPC", mission, npcid);
					        }

					        for(i = 0; i < npcs[1]; i++)
			    			{
							    switch(random(4))
							    {
							        case 0: weapon = 31;
						            case 1: weapon = 29;
						            case 2: weapon = 27;
									case 3: weapon = 34;
							    }
							    switch(random(2))
							    {
							        case 0: level = NPC_GANGSTER;
							        case 1: level = NPC_HITMAN;
							    }
							    switch(random(5))
							    {
							        case 0: skin = 25073;
							        case 1: skin = 124;
							        case 2: skin = 125;
							        case 3: skin = 126;
							        case 4: skin = 127;
							    }
							    npcid = CreateNPC(skin, weapon, 100.0, 0.0, WoozieM3TargetPos[spawn][4]+float(random(8))-float(random(8)), WoozieM3TargetPos[spawn][5]+float(random(8))-float(random(8)), WoozieM3TargetPos[spawn][6]+0.3, WoozieM3TargetPos[spawn][7], 0, 0, level, 1, 1, NTEAM_LEONE);
					            SetGVarInt("MSTargetNPC", mission, npcid);
								if(i == 0) SetGVarInt("MSDropNPC", 1, npcid);//让第一个生成的NPC身上戴着目标包裹
					        }

             				for(i = 0; i < 3; i++)
							{
							    switch(random(5))
							    {
							        case 0: {vmodel[i] = 405; vcolor[i] = 0;}
						            case 1: {vmodel[i] = 540; vcolor[i] = 0;}
						            case 2: {vmodel[i] = 507; vcolor[i] = 0;}
						            case 3: {vmodel[i] = 602; vcolor[i] = 87;}
						            case 4: {vmodel[i] = 561; vcolor[i] = 1;}
							    }
							}
                            veh[0] = CreateMissionVehicle(vmodel[0], WoozieM3TargetPos[spawn][8], WoozieM3TargetPos[spawn][9], WoozieM3TargetPos[spawn][10], WoozieM3TargetPos[spawn][11], vcolor[0], vcolor[0], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[0]);
							veh[1] = CreateMissionVehicle(vmodel[1], WoozieM3TargetPos[spawn][12], WoozieM3TargetPos[spawn][13], WoozieM3TargetPos[spawn][14], WoozieM3TargetPos[spawn][15], vcolor[1], vcolor[1], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[1]);
							veh[2] = CreateMissionVehicle(vmodel[2], WoozieM3TargetPos[spawn][16], WoozieM3TargetPos[spawn][17], WoozieM3TargetPos[spawn][18], WoozieM3TargetPos[spawn][19], vcolor[2], vcolor[2], VTYPE_MISSION, 0);
                            SetGVarInt("VehMission", mission, veh[2]);

							ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SetPlayerMissionGPS(p, mission, WoozieM3TargetPos[spawn][4], WoozieM3TargetPos[spawn][5], WoozieM3TargetPos[spawn][6]);
								}
							}
							SetGVarInt("MSTargetPos", spawn, mission);
					    }
					    case 3:
					    {
					        ForEachPlayer(p)
						    {
						        if(GetGVarInt("Mission", p) == mission)
								{
								    if(GetGVarInt("PlayerMSDrop", p) == 1) SendClientMessage(p, COLOR_WHITE, "将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"四龙赌场");
								    else SendClientMessage(p, COLOR_WHITE, "协助将"#TEXT_YELLOW"目标包裹"#TEXT_WHITE"送至"#TEXT_RED"四龙赌场");
									SetPlayerCheckpoint(p, 1904.3394, 961.8911, 10.4766, 8.0);
								}
					    	}
					    }
					    case 4:
					    {
					        ForEachPlayer(p)
					        {
					            if(GetGVarInt("Mission", p) == mission)
								{
									SendClientMessage(p, COLOR_WHITE, "已成功运送"#TEXT_YELLOW"目标包裹"#TEXT_WHITE",任务完成!");
									PlayerPassMission(p, mission);
								}
					        }
					        StopGlobalMission(mission);
					    }
					}
			    }
			}
		}
	}
}

stock UpdatePlayerMission(playerid, mission, stage)
{//刷新玩家的任务mission的阶段stage内容
	static string[144], nearest, id;
	id = GetGVarInt("MissionSlot", playerid);
	if(mission > 0 && GetGVarInt("Mission", playerid) == mission && stage == MissionData[playerid][id][msStage]+1)
	{//确认玩家正在进行任务且已进行的阶段为下一阶段
		DisablePlayerMissionGPS(playerid);
		MissionData[playerid][id][msStage] = stage;
		ClearChatbox(playerid, 1);
		switch(mission)
		{
		    case 1:
		    {
				switch(stage)
				{
				    case 1:
				    {
				        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"接下来将开始带领你熟悉身边的环境\n并让你购买基本的生活用品\n请依照左上角<<"#TEXT_PINKRED"导览"#TEXT_WHITE">>的引导完成踏入这里的准备", "开始", "");
				        SetGVarInt("DMission", mission, playerid);
				    }
				    case 2:
				    {
				        nearest = GetNearestGPS(playerid, "便利商店");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 请在附近寻找街车、租用车或是呼叫计程车前往"#TEXT_YELLOW"便利商店"#TEXT_WHITE"购买"#TEXT_FADEBLUE"食品"#TEXT_WHITE"与"#TEXT_FADEBLUE"背包空间");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你现在在超市内了,你可以按"#TEXT_YELLOW"鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_YELLOW"店员"#TEXT_WHITE"来与他对话买东西");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 建议购买能恢复"#TEXT_YELLOW"饥饿值"#TEXT_WHITE"的"#TEXT_FADEBLUE"食品"#TEXT_WHITE"或是能够增加背包容量的"#TEXT_FADEBLUE"背包空间");
				    }
				    case 4:
				    {
				        if(PlayerData[playerid][pBank] < 1)
				        {
				            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 1, 5);//如果玩家存款小于1就直接进行到下个阶段
				        }
				        else SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 钱不够可以到左侧的"#TEXT_FADEBLUE"ATM"#TEXT_WHITE"前按"#TEXT_YELLOW"Y键"#TEXT_WHITE"取出一些存款");
				    }
				    case 5:
				    {
				        nearest = GetNearestGPS(playerid, "汉堡店");
				        SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 注意到左下角的"#TEXT_YELLOW"黄色条"#TEXT_WHITE"了吗?其代表的是"#TEXT_YELLOW"饥饿值"#TEXT_WHITE",饥饿值会随时间减少,而靠进食可以恢复");
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 为了果腹,接下来前往"#TEXT_YELLOW"汉堡店"#TEXT_WHITE"买个餐点吧");
				    }
				    case 6:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 跟在超市一样,你可以按"#TEXT_YELLOW"鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_YELLOW"店员"#TEXT_WHITE"来购买餐点");
				    }
				    case 7:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 购买后的物品可以"#TEXT_YELLOW"按N键"#TEXT_WHITE"打开背包"#TEXT_WHITE"内找到并使用,打开看看吧!");

				    }
				    case 8:
				    {
				        format(string, sizeof(string), "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 完成导览任务,获得奖励经验值"#TEXT_FADEBLUE"%d", MissionsList[mission][msExp]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        PlayerPassMission(playerid, 1);//所有阶段完成,玩家完成任务
				        GivePlayerMission(playerid, 2);
				        SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"接受接下来的导览任务");
				    }
				}
		    }
		    case 2:
		    {
				switch(stage)
				{
				    case 1:
				    {
				        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"在探索的途中,如果遇到问题可以于"#TEXT_PINKRED"新手频道"#TEXT_WHITE"询问辅导员\n也可以在"#TEXT_SKYBLUE"世界频道"#TEXT_WHITE"与其他玩家交流", "开始", "");
				        SetGVarInt("DMission", mission, playerid);
				    }
				    case 2:
				    {
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 按"#TEXT_YELLOW"H键"#TEXT_WHITE"打开频道菜单");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 选择任何一个频道与大家打招呼吧,在视窗内输入的消息都会发送给该频道内的所有玩家!");
				    }
				    case 4:
				    {
				        format(string, sizeof(string), "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 完成导览任务,获得奖励经验值"#TEXT_FADEBLUE"%d", MissionsList[mission][msExp]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        PlayerPassMission(playerid, 2);//所有阶段完成,玩家完成任务
				        GivePlayerMission(playerid, 3);
				        SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"接受接下来的导览任务");
				    }
				}
		    }
		    case 3:
		    {
				switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHaveTypeItem(playerid, ITEM_EQ, IEQ_SKIN) > 1)
				        {
				            SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 因为你已经拥有造型了,达成任务条件");
				            MissionData[playerid][id][msStage] = 5;
				            UpdatePlayerMission(playerid, 3, 6);
				        }
				        else
				        {
					        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"想要改变身上的造型?\n你可以在州内找到"#TEXT_FADERED"衣服"#TEXT_WHITE"的图标\n代表的就是"#TEXT_FADERED"服饰店"#TEXT_WHITE",你可以在服饰店内购买新的造型", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
				    }
				    case 2:
				    {
						nearest = GetNearestGPS(playerid, "Binco服饰店");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"服饰店"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 与之前一样,你可以按"#TEXT_YELLOW"鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_YELLOW"店员"#TEXT_WHITE"来购买造型");
				    }
				    case 4:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 选择想要购买的造型种类吧,每个种类都有不同的价钱");
				    }
				    case 5:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着就可以选择想要购买的"#TEXT_FADEBLUE"造型"#TEXT_WHITE"了");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 使用"#TEXT_GRAD"箭头"#TEXT_WHITE"选择造型,按"#TEXT_FADEYELLOW"SELECT"#TEXT_WHITE"确认购买");
				    }
				    case 6:
				    {
				        format(string, sizeof(string), "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你现在有了新造型,跟物品一样,购买后的造型可以"#TEXT_YELLOW"按N键"#TEXT_WHITE"打开背包"#TEXT_WHITE"内找到并切换");
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        PlayerPassMission(playerid, 3);
				        GivePlayerMission(playerid, 4);
				        SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"接受接下来的导览任务");
				    }
				}
		    }
		    case 4:
		    {
				switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHaveItem(playerid, ITEM_EQ, 4))
				        {//玩家已经拥有手机
				            SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 因为你已经拥有手机了,达成任务条件");
				            MissionData[playerid][id][msStage] = 3;
				            UpdatePlayerMission(playerid, 4, 4);
				        }
				        else
				        {
					        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"除了食与衣之外,拥有实用的电子用品也很重要\n这次将带你前往"#TEXT_YELLOW"电子用品商店"#TEXT_WHITE"购买方便的手机与GPS导航", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
				    }
				    case 2:
				    {
						nearest = GetNearestGPS(playerid, "电子用品商店");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"电子用品商店"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 按"#TEXT_YELLOW"鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_YELLOW"店员"#TEXT_WHITE"来购买"#TEXT_FADEGREEN"手机"#TEXT_WHITE"以及"#TEXT_FADEGREEN"GPS定位装置"#TEXT_WHITE"吧");
				    }
				    case 4:
				    {
				        format(string, sizeof(string), "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你可以按"#TEXT_YELLOW"数字键6"#TEXT_WHITE"使用"#TEXT_FADEGREEN"手机"#TEXT_WHITE","#TEXT_FADEGREEN"GPS定位装置"#TEXT_WHITE"则可在背包使用");
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        ConfigData[playerid][cfQuickN6T] = KEY_TYPE_IEQ,
						ConfigData[playerid][cfQuickN6] = 4;
				        PlayerPassMission(playerid, 4);
				        GivePlayerMission(playerid, 5);
				        SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"接受接下来的导览任务");
				    }
				}
			}
			case 5:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerData[playerid][pJob] == 0)
				        {
				            ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"有了基本用品后,是时候该找找稳定的收入来源了\n州内有各种工作机会,而你可以去"#TEXT_YELLOW"州政府"#TEXT_WHITE"向服务人员询问工作信息", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
				        }
				        else
				        {//玩家已经有了工作
					        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 因为你已经有工作了,达成任务条件");
				            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 5, 5);
					    }
				    }
				    case 2:
				    {
						nearest = GetNearestGPS(playerid, "政府大楼");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"州政府"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 到前方柜台前按"#TEXT_YELLOW"鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_YELLOW"左边的服务人员"#TEXT_WHITE"来询问各地的工作机会吧");
				    }
				    case 4:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 就业位置已经用"#TEXT_VIOLET"紫色点"#TEXT_WHITE"为你标记在地图上了,前往看看工作内容吧");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 当你到达时,可以询问"#TEXT_VIOLET"就业NPC"#TEXT_WHITE"工作信息以及签署合约");
				    }
				    case 5:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 恭喜你找到第一份工作,工作的进行方式可以通过询问就业NPC得知,大部分工资都会在整点时汇入你的存款");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 另外注意到,大部分的工作都会消耗到左下角蓝绿色的"#TEXT_BLUEGREEN"体力值"#TEXT_WHITE",而体力每4分钟会恢复1点,记得不要太过疲劳喔");
				        PlayerPassMission(playerid, 5);
				        GivePlayerMission(playerid, 6);
				        GivePlayerMission(playerid, 9);
				        GivePlayerMission(playerid, 11);
				        GivePlayerMission(playerid, 14);
				        GivePlayerMission(playerid, 15);
				        SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"接受更多的教学任务");
				    }
				}
			}
			case 6:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if((PlayerHaveItem(playerid, ITEM_EQ, 25) || PlayerHaveItem(playerid, ITEM_EQ, 27)) && PlayerHaveItem(playerid, ITEM_EQ, 26))
				        {//玩家已经拥有泥铲与水桶
				            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 6, 5);
				        }
				        else
				        {
					        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"除了工作,你也可以靠种植来卖出盆栽赚点零用钱\n现在将带你前往"#TEXT_YELLOW"工具行"#TEXT_WHITE"购买必备的准备工具", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
				    }
				    case 2:
				    {
						nearest = GetNearestGPS(playerid, "工具行");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"工具行"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着向"#TEXT_YELLOW"店员"#TEXT_WHITE"购买"#TEXT_FADEGREEN"泥铲"#TEXT_WHITE"以及"#TEXT_FADEGREEN"水桶"#TEXT_WHITE"吧");
				    }
				    case 4:
				    {
                        if((PlayerHaveItem(playerid, ITEM_EQ, 25) || PlayerHaveItem(playerid, ITEM_EQ, 27)) && PlayerHaveItem(playerid, ITEM_EQ, 26))
                        {//如果玩家已经拥有泥铲与水桶,就继续下一阶段
                            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 6, 5);
                        }
                        else
                        {//否则保留在上阶段
                            MissionData[playerid][id][msStage] = 3;
                        }
				    }
				    case 5:
					{
					    nearest = GetNearestGPS(playerid, "花市");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 有了泥铲与浇水桶之后种植的工具就准备好了,接下来需要的就是种子了");
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 除了可以在森林或沙漠捡到各式各样的种子,也可以在"#TEXT_YELLOW"花市"#TEXT_WHITE"购买");
					}
				    case 6:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你有了"#TEXT_FADEGREEN"种子"#TEXT_WHITE",就可以准备开始种植了");
				        PlayerPassMission(playerid, 6);
				        GivePlayerMission(playerid, 7);
						SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"继续进行种植的教学");
				    }
				}
			}
			case 7:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHavePlant(playerid) > 0)
				        {//如果玩家已经有植物
				            MissionData[playerid][id][msStage] = 1;
				            UpdatePlayerMission(playerid, 7, 2);
				        }
				        else if(!PlayerHaveTypeItem(playerid, ITEM_USE, IU_SEED))
					    {//如果玩家身上没有种子就返回阶段0
					        PlayerStopMission(playerid);
					        SendClientMessage(playerid, COLOR_WHITE, "** 你身上没有种子,你可以到郊区采集或是到花市购买种子");
					    }
					    else
					    {
				        	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"按N键"#TEXT_WHITE"打开背包"#TEXT_WHITE"选择"#TEXT_YELLOW"种子与盆栽"#TEXT_WHITE"来使用种子吧");
				        	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 种子使用后会在你脚下产生一个"#TEXT_GREEN"盆栽"#TEXT_WHITE",它就是你种下去的植物");
					    }
				    }
				    case 2:
				    {
				        if(!PlayerHaveItem(playerid, 1, 70))
				        {//没有水
				            SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 当你有植物后就要准备开始浇水了,接下来请到任何"#TEXT_SKYBLUE"水域"#TEXT_WHITE"旁打开背包使用"#TEXT_YELLOW"水桶"#TEXT_WHITE"装水");
				        }
				        else
				        {
				            MissionData[playerid][id][msStage] = 2;
				            UpdatePlayerMission(playerid, 7, 3);
				        }
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着就可以使用"#TEXT_YELLOW"水桶"#TEXT_WHITE"为你刚种的"#TEXT_GREEN"植物"#TEXT_WHITE"浇水了");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你可以按"#TEXT_YELLOW"个人菜单->资产->植物"#TEXT_WHITE"找到你所有"#TEXT_GREEN"盆栽"#TEXT_WHITE"的位置");
				    }
				    case 4:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你为你的"#TEXT_GREEN"植物"#TEXT_WHITE"浇完水了,接着就可以等它成熟了");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 每种植物都有不同的浇水周期,要记得定浇水,缺水的植物是不会成长的喔");
                        PlayerPassMission(playerid, 7);
				        GivePlayerMission(playerid, 8);
						SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"继续进行种植的教学");
				    }
				}
			}
			case 8:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_POT))
					    {//如果玩家身上已经有盆栽
					        MissionData[playerid][id][msStage] = 1;
				            UpdatePlayerMission(playerid, 8, 2);
					    }
						else
						{
				        	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 如果你有已经"#TEXT_FADEGREEN"可收成"#TEXT_WHITE"的"#TEXT_GREEN"植物"#TEXT_WHITE",你可以到该植物旁从背包使用"#TEXT_YELLOW"泥铲"#TEXT_WHITE"进行收成");
				        }
				    }
				    case 2:
					{
					    nearest = GetNearestGPS(playerid, "花市");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 收成了植物之后,你就可以前往"#TEXT_YELLOW"花市"#TEXT_WHITE"将收成的植物卖出赚钱了");
					}
					case 3:
					{
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着选择要卖出的"#TEXT_GREEN"植物");
					}
					case 4:
					{
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 以后你可以靠种植来多一份被动收入来源了");
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 记住,如果你种的是"#TEXT_GREEN"药草"#TEXT_WHITE",则在收成后会变成药草材料,你可以将药草卖至"#TEXT_YELLOW"材料市场"#TEXT_WHITE"");
                        PlayerPassMission(playerid, 8);
					}
				}
			}
			case 9:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHaveItem(playerid, ITEM_EQ, 2) || PlayerHaveItem(playerid, ITEM_EQ, 36))
				        {//玩家已经拥有钓竿
				            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 9, 5);
				        }
				        else
				        {
					        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"如果工作到"#TEXT_BLUEGREEN"体力"#TEXT_WHITE"不足了\n休闲之余,你也可以靠钓鱼来卖出鱼只赚点零用钱\n现在将带你前往"#TEXT_YELLOW"工具行"#TEXT_WHITE"购买必备的准备工具", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
				    }
				    case 2:
				    {
						nearest = GetNearestGPS(playerid, "工具行");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"工具行"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着向"#TEXT_YELLOW"店员"#TEXT_WHITE"购买"#TEXT_FADEGREEN"钓竿"#TEXT_WHITE"吧");
				    }
				    case 4:
				    {
                        if(PlayerHaveItem(playerid, ITEM_EQ, 2) || PlayerHaveItem(playerid, ITEM_EQ, 36))
                        {//如果玩家已经拥有泥铲与钓竿,就继续下一阶段
                            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 9, 5);
                        }
                        else
                        {//否则保留在上阶段
                            MissionData[playerid][id][msStage] = 3;
                        }
				    }
				    case 5:
					{
					    if(PlayerHaveItem(playerid, ITEM_USE, 33) > 0)
                        {//如果玩家已经拥有鱼饵
                            MissionData[playerid][id][msStage] = 7;
				            UpdatePlayerMission(playerid, 9, 8);
                        }
                        else if(PlayerHaveItem(playerid, ITEM_USE, 45) > 0)
                        {//如果玩家只有鱼饵包
                            MissionData[playerid][id][msStage] = 6;
				            UpdatePlayerMission(playerid, 9, 7);
                        }
                        else
                        {
                            nearest = GetNearestGPS(playerid, "便利商店");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
					    	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 有了钓竿后,你还需要有鱼饵,而鱼饵可以在"#TEXT_YELLOW"便利商店"#TEXT_WHITE"买到");
					    	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"便利商店"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
					    }
					}
					case 6:
					{
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着向店员购买"#TEXT_YELLOW"鱼饵包"#TEXT_WHITE"吧!");
					}
					case 7:
					{
					    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 打开背包使用身上的"#TEXT_YELLOW"鱼饵包"#TEXT_WHITE",将里面的鱼饵拆开来");
					}
				    case 8:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 有了"#TEXT_YELLOW"鱼饵"#TEXT_WHITE"以及"#TEXT_YELLOW"钓竿"#TEXT_WHITE"后,就能开始准备钓鱼了");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着请找到任何"#TEXT_SKYBLUE"水域"#TEXT_WHITE"旁使用"#TEXT_YELLOW"钓竿"#TEXT_WHITE"开始钓鱼");
				    }
				    case 9:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这样就是钓鱼的基本步骤了,只要耐心等待一定会有鱼上钩的");
				        PlayerPassMission(playerid, 9);
						SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"继续进行钓鱼的教学");
				    }
				}
			}
			case 10:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(!PlayerHaveTypeItem(playerid, ITEM_USE, IU_FISH))
					    {//如果玩家身上没有鱼就返回阶段0
					        PlayerStopMission(playerid);
					        SendClientMessage(playerid, COLOR_WHITE, "** 你还没有钓到鱼,你可以到"#TEXT_SKYBLUE"水域"#TEXT_WHITE"旁使用"#TEXT_YELLOW"钓竿"#TEXT_WHITE"开始钓鱼");
					    }
					    else
					    {
					        nearest = GetNearestGPS(playerid, "鱼市场");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
				        	SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 钓到鱼之后,接下来将带你前往"#TEXT_YELLOW"鱼市场"#TEXT_WHITE"卖出钓到的鱼只赚钱");
					    }
				    }
				    case 2:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 选择"#TEXT_YELLOW"钓客鱼只交易"#TEXT_WHITE"来卖出你身上钓到的鱼");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着选择要卖出的"#TEXT_FADEBLUE"鱼只");
				    }
				    case 4:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 顺利将钓到的鱼卖出了,以后你都可以把钓到的鱼拿到这里卖钱");
				        PlayerPassMission(playerid, 10);
				    }
				}
			}
			case 11:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if((PlayerHaveItem(playerid, ITEM_EQ, 42) || PlayerHaveItem(playerid, ITEM_EQ, 43) || PlayerHaveItem(playerid, ITEM_EQ, 44)) && (PlayerHaveItem(playerid, ITEM_EQ, 45) || PlayerHaveItem(playerid, ITEM_EQ, 46)))
                        {//玩家已经拥有十字镐与斧头
                            MissionData[playerid][id][msStage] = 3;
				            UpdatePlayerMission(playerid, 11, 4);
                        }
                        else
                        {
				        	ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"大自然中有着各式各样的资源可供采集\n不过有些资源需要准备特定的工具才能采集\n现在就一起先去"#TEXT_YELLOW"工具行"#TEXT_WHITE"购买必备的准备工具吧", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
                	}
                	case 2:
                	{
                	    nearest = GetNearestGPS(playerid, "工具行");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"工具行"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
                	}
                	case 3:
                	{
                	    if((PlayerHaveItem(playerid, ITEM_EQ, 42) || PlayerHaveItem(playerid, ITEM_EQ, 43) || PlayerHaveItem(playerid, ITEM_EQ, 44)) && (PlayerHaveItem(playerid, ITEM_EQ, 45) || PlayerHaveItem(playerid, ITEM_EQ, 46)))
                        {//如果玩家已经拥有十字镐与斧头,就继续下一阶段
                            MissionData[playerid][id][msStage] = 3;
				            UpdatePlayerMission(playerid, 11, 4);
                        }
                        else
                        {//否则保留在上阶段
                            MissionData[playerid][id][msStage] = 2;
                        }
                	}
                	case 4:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 39) < 10)
                	    {//如果玩家拥有小于10个木头
                	        nearest = GetNearestGPS(playerid, "伐木林场");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 准备好了"#TEXT_FADEBLUE"斧头"#TEXT_WHITE"后一起出发去"#TEXT_YELLOW"伐木林场"#TEXT_WHITE"砍伐10个"#TEXT_FADEGREEN"木头"#TEXT_WHITE"吧");
                	    }
						else
						{
						    MissionData[playerid][id][msStage] = 5;
				            UpdatePlayerMission(playerid, 11, 6);
						}
                	}
                	case 5:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着就会开始消耗"#TEXT_BLUEGREEN"体力"#TEXT_WHITE"开始伐木了");
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 砍伐到的"#TEXT_FADEGREEN"木头"#TEXT_WHITE"将会掉落在你身旁,你可以按"#TEXT_YELLOW"Y键"#TEXT_WHITE"捡起任何掉落物");
                	}
                	case 6:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 39) < 10)
                	    {//如果玩家拥有小于10个木头,回到上个阶段
                	        MissionData[playerid][id][msStage] = 5;
                	        format(string, sizeof(string), "** 还需要收集 %d/10 个"#TEXT_FADEGREEN"木头", 10 - PlayerHaveItem(playerid, ITEM_USE, 39));
                	        SendClientMessage(playerid, COLOR_WHITE, string);
                	    }
                	    else
                	    {//如果有了足够数量就直接到下个阶段
                	        MissionData[playerid][id][msStage] = 6;
				            UpdatePlayerMission(playerid, 11, 7);
                	    }
                	}
                	case 7:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 87) < 3)
                	    {//如果玩家拥有小于3个铁矿
                	        nearest = GetNearestGPS(playerid, "矿场");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来一起前往"#TEXT_YELLOW"矿场"#TEXT_WHITE"使用"#TEXT_FADEBLUE"十字镐"#TEXT_WHITE"挖掘3个"#TEXT_GRAD"铁矿"#TEXT_WHITE"吧");
                	    }
						else
						{
						    MissionData[playerid][id][msStage] = 8;
				            UpdatePlayerMission(playerid, 11, 9);
						}
                	}
                	case 8:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着就会开始消耗"#TEXT_BLUEGREEN"体力"#TEXT_WHITE"开始挖掘了");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 挖掘到的"#TEXT_GRAD"矿产"#TEXT_WHITE"将会掉落在你身旁,你可以按"#TEXT_YELLOW"Y键"#TEXT_WHITE"捡起任何掉落物");
                	}
                	case 9:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 87) < 3)
                	    {//如果玩家拥有小于5个铁矿,回到上个阶段
                	        MissionData[playerid][id][msStage] = 8;
                	        format(string, sizeof(string), "** 还需要收集 %d/3 个"#TEXT_GRAD"铁矿", 3 - PlayerHaveItem(playerid, ITEM_USE, 87));
                	        SendClientMessage(playerid, COLOR_WHITE, string);
                	    }
                	    else
                	    {//如果有了足够数量就直接到下个阶段
                	        MissionData[playerid][id][msStage] = 9;
				            UpdatePlayerMission(playerid, 11, 10);
                	    }
                	}
                	case 10:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 86) < 1)
                	    {//如果玩家拥有小于3个纤维
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 最后前往收集"#TEXT_YELLOW"纤维"#TEXT_WHITE"吧");
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"纤维"#TEXT_WHITE"在森林或是沙漠都能找的到,外观为尖刺状草体");
							nearest = GetNearestDrop(playerid, 86);
							if(nearest > -1) SetPlayerMissionGPS(playerid, mission, DropItem[nearest][idX], DropItem[nearest][idY], DropItem[nearest][idZ]);
                	    }
						else
						{
						    MissionData[playerid][id][msStage] = 11;
				            UpdatePlayerMission(playerid, 11, 12);
						}
                	}
                	case 11:
                	{
                	    if(PlayerHaveItem(playerid, ITEM_USE, 86) < 1)
                	    {//如果玩家拥有小于3个纤维,回到上个阶段
                	        MissionData[playerid][id][msStage] = 10;
                	        format(string, sizeof(string), "** 还需要收集 %d/1 个"#TEXT_YELLOW"纤维", 1 - PlayerHaveItem(playerid, ITEM_USE, 86));
                	        SendClientMessage(playerid, COLOR_WHITE, string);
                	    }
                	    else
                	    {//如果有了足够数量就直接到下个阶段
                	        MissionData[playerid][id][msStage] = 11;
				            UpdatePlayerMission(playerid, 11, 12);
                	    }
                	}
                	case 12:
                	{
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你学会在大自然中采集各式各样的资材了,接下来将会引导你如何使用这些材料合成出有用的工具");
				        PlayerPassMission(playerid, 11);
				        GivePlayerMission(playerid, 12);
						SendClientMessage(playerid, COLOR_WHITE, "你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"继续进行合成的教学");
				    }
                }
			}
			case 12:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHaveItem(playerid, ITEM_USE, 39) < 5 || PlayerHaveItem(playerid, ITEM_USE, 86) < 1)
				        {//如果玩家没有足够木材与纤维
				            PlayerStopMission(playerid);
					        SendClientMessage(playerid, COLOR_WHITE, "** 你必须先准备5个"#TEXT_FADEGREEN"木头"#TEXT_WHITE"以及1个"#TEXT_YELLOW"纤维"#TEXT_WHITE"才能开始进行接下来的合成");
				        }
				        else
				        {
					        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"接下来将会引导你使用之前采集到的材料进行"TEXT_YELLOW"合成"#TEXT_WHITE"\n通过各种不同的材料组合,你可以合成出各式各样的工具", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
				    }
				    case 2:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在身上有足够的材料了,接下来请打开"#TEXT_YELLOW"个人菜单->合成");
				    }
				    case 3:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着请在("#TEXT_FADERED"A"#TEXT_WHITE")栏位放入1个"#TEXT_YELLOW"纤维"#TEXT_WHITE",并在("#TEXT_FADERED"B"#TEXT_WHITE")栏位放入2个"#TEXT_FADEGREEN"木头");
				    }
				    case 4:
				    {
				        if((GetGVarInt("MixSlot1", playerid) == 86 && GetGVarInt("MixAmount1", playerid) == 1) && (GetGVarInt("MixSlot2", playerid) == 39 && GetGVarInt("MixAmount2", playerid) == 2))
				        {//当满足合成条件就进行下一阶段
				            MissionData[playerid][id][msStage] = 4;
				            UpdatePlayerMission(playerid, 12, 5);
				        }
				        else
				        {//否则保留在上一阶段
				            MissionData[playerid][id][msStage] = 3;
				        }
				    }
				    case 5:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 材料放置完成后就可以按下"#TEXT_YELLOW"开始合成"#TEXT_WHITE"开始进行合成了");
				    }
				    case 6:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来在("#TEXT_FADERED"A"#TEXT_WHITE")栏位放入3个"#TEXT_FADEGREEN"木头"#TEXT_WHITE",并在("#TEXT_FADERED"B"#TEXT_WHITE")栏位放入1个刚刚合成的"#TEXT_YELLOW"火种");
				    }
				    case 7:
				    {
				        if((GetGVarInt("MixSlot1", playerid) == 39 && GetGVarInt("MixAmount1", playerid) == 3) && (GetGVarInt("MixSlot2", playerid) == 92 && GetGVarInt("MixAmount2", playerid) == 1))
				        {//当满足合成条件就进行下一阶段
				            MissionData[playerid][id][msStage] = 7;
				            UpdatePlayerMission(playerid, 12, 8);
				        }
				        else
				        {//否则保留在上一阶段
				            MissionData[playerid][id][msStage] = 6;
				        }
				    }
				    case 8:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 材料放置完成后就可以按下"#TEXT_YELLOW"开始合成"#TEXT_WHITE"开始进行合成了");
				    }
				    case 9:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你成功合成了一个"#TEXT_YELLOW"火堆"#TEXT_WHITE",你可以从"#TEXT_YELLOW"背包"#TEXT_WHITE"拿出来使用");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你可以在"#TEXT_YELLOW"火堆"#TEXT_WHITE"旁"#TEXT_YELLOW"合成"#TEXT_WHITE"钓来的鱼或是狩猎来的生肉来将其"#TEXT_FADERED"烹煮"#TEXT_WHITE",也可以进行特殊的"#TEXT_BROWN"燃烧合成");
						SendClientMessage(playerid, COLOR_WHITE, "你可以再多尝试各种材料组合,看能不能组合出更多种的道具");
				        PlayerPassMission(playerid, 12);
				    }
				}
			}
			case 14:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        if(PlayerHavePet(playerid) > 0)
                        {//玩家已经拥有宠物
                            MissionData[playerid][id][msStage] = 3;
				            UpdatePlayerMission(playerid, 14, 4);
                        }
                        else
                        {
				        	ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"如果只有自己一个人觉得孤单\n何不找一只宠物陪你作伴?\n现在就一起去"#TEXT_YELLOW"宠物店"#TEXT_WHITE"看看吧", "开始", "");
					        SetGVarInt("DMission", mission, playerid);
					    }
                	}
                	case 2:
                	{
                	    nearest = GetNearestGPS(playerid, "宠物店");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"宠物店"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
                	}
                	case 3:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来选择一只喜欢的"#TEXT_YELLOW"宠物"#TEXT_WHITE"看看吧");
                	}
                	case 4:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你有了宠物,你可以打开"#TEXT_YELLOW"个人菜单->资产->宠物"#TEXT_WHITE"查看你所有的宠物");
                	}
                	case 5:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着选择一只"#TEXT_YELLOW"宠物"#TEXT_WHITE"将其呼叫出来吧!");
                	}
                	case 6:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 宠物呼叫出来后,你可以在空手时按鼠标右键"#TEXT_FADEGREEN"锁定"#TEXT_WHITE"你的"#TEXT_YELLOW"宠物"#TEXT_WHITE"来查看他的状态");
                	}
                	case 7:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在这个菜单,你可以为你的宠物改名,或是看看他健康如何或是他饿了没");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着选择"#TEXT_YELLOW"能力与指令"#TEXT_WHITE"来看看怎么对宠物下达指令吧");
                	}
                	case 8:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在这里你可以看到宠物的指令,而如果想更改下达指令的方式,只要点击想更改的项目就能让你照喜欢的方式指令你的宠物了");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你只要在宠物旁按T于"#TEXT_YELLOW"聊天条"#TEXT_WHITE"内输入这边列出的"#TEXT_FADEBLUE"指令"#TEXT_WHITE",宠物就会照你的指示行动了");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来我们何不试试看对宠物下达"#TEXT_YELLOW"呼叫指令"#TEXT_WHITE"看看?");
                	}
                	case 9:
                	{
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你学会了命令你的宠物的方式,只要多与宠物相处就会提升他的"#TEXT_PINK"好感度");
				        if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_FOOD))
				        {//如果玩家身上已经有食物
				            MissionData[playerid][id][msStage] = 9;
				            UpdatePlayerMission(playerid, 14, 10);
				        }
				        else
				        {
					        nearest = GetNearestGPS(playerid, "便利商店");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 如果宠物饿了怎么办?先让我们去"#TEXT_YELLOW"超市"#TEXT_WHITE"买个"#TEXT_YELLOW"微波汉堡"#TEXT_WHITE"吧");
						}
				    }
				    case 10:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你身上有了食物,接着到宠物旁按"#TEXT_YELLOW"背包->食品"#TEXT_WHITE"然后选择"#TEXT_RED"丢弃"#TEXT_WHITE"就可以将食物放在地上");
				    }
				    case 11:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着你只要对宠物下达"#TEXT_YELLOW"进食指令"#TEXT_WHITE",你的宠物就会吃你刚刚放在地上的食物了");
				    }
				    case 12:
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在你也会喂食你的宠物了,接下来多多和你的宠物相处培养感情吧");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 只要宠物的"#TEXT_PINK"好感度"#TEXT_WHITE"越高,他会的能力也会越来越多");
				        PlayerPassMission(playerid, 14);
				        GivePlayerMission(playerid, 13);
						SendClientMessage(playerid, COLOR_WHITE, "现在你对动物有基本的了解了,你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"进行狩猎的教学");
				    }
				}
			}
			case 13:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"大自然中有各式各样的资源,也有各种的野生动物\n接下来我们一起来体会于大自然中狩猎的乐趣吧", "开始", "");
					    SetGVarInt("DMission", mission, playerid);
                	}
                	case 2:
                	{
                	    if(PlayerHaveWeapon(playerid, 22) > 0)
                	    {//玩家身上有9mm手枪
                	        MissionData[playerid][id][msStage] = 5;
				            UpdatePlayerMission(playerid, 13, 6);
                	    }
                	    else
                	    {
	                	    nearest = GetNearestGPS(playerid, "武装国度");
							SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
							SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 我们首先去"#TEXT_YELLOW"武装国度"#TEXT_WHITE"购买打猎需要的武器吧");
						}
                	}
                	case 3:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 选择"#TEXT_YELLOW"购买枪枝"#TEXT_WHITE"来查看可以购买的武器有哪些吧");
                	}
                	case 4:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着选择"#TEXT_YELLOW"9mm手枪"#TEXT_WHITE"");
                	}
                	case 5:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 选择"#TEXT_YELLOW"购买9mm手枪枪枝"#TEXT_WHITE"购买武器,你也可以再多购买几发弹药以防万一");
                	}
                	case 6:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在有了狩猎的武器后,一起前往"#TEXT_FADEGREEN"森林"#TEXT_WHITE"或"#TEXT_YELLOW"沙漠"#TEXT_WHITE"地带寻找猎物吧");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 如果你的"#TEXT_FADEGREEN"宠物"#TEXT_PINK"好感度"#TEXT_WHITE"够高的话,你也可以命令他帮你寻找附近的野生动物喔");
                	}
                	case 7:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 干得漂亮!每种猎物都会带给你不同的经验值以及掉落物,可以多多尝试看看");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 你也可以将你狩猎得到的战利品卖至"#TEXT_YELLOW"狩猎市场"#TEXT_WHITE"换钱喔");
                	    PlayerPassMission(playerid, 13);
                	}
                }
            }
            case 15:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"每当你提升一定等级后,你会获得"#TEXT_YELLOW"技能点"#TEXT_WHITE"让你可以升级你的技能\
						\n但大部分技能都需要搭配一定的"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"才能搭配"#TEXT_YELLOW"技能点"#TEXT_WHITE"升级\
						\n接下来让我们一起去"#TEXT_YELLOW"文学院"#TEXT_WHITE"学习如何获得"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"吧", "开始", "");
					    SetGVarInt("DMission", mission, playerid);
                	}
                	case 2:
                	{
                	    nearest = GetNearestGPS(playerid, "文学院");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> "#TEXT_YELLOW"文学院"#TEXT_WHITE"的位置已为你标记在地图上了,一起过去那边看看吧");
                	}
                	case 3:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在知道了"#TEXT_FADEBLUE"开课时间"#TEXT_WHITE",接着在开课时前往指定教室内听课吧");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 当你到了"#TEXT_YELLOW"教室"#TEXT_WHITE"后,你可以到"#TEXT_YELLOW"课桌椅"#TEXT_WHITE"前按"#TEXT_FADEGREEN"Y键"#TEXT_WHITE"坐下听课");
                	}
                	case 4:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 上课时可以选择听课的"#TEXT_FADERED"专注度");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 专注度越高"#TEXT_BLUEGREEN"体力值"#TEXT_WHITE"会消耗得越快,但学习到的"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"也会比较多");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着让我们打开"#TEXT_YELLOW"个人菜单->技能");
                	}
                	case 5:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在这里你可以看到跟技能相关的各种选项,接着请选择"#TEXT_YELLOW"技能等级");
                	}
                	case 6:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这里就会列出所有技能,还有目前的技能等级");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来选择任何一个技能来看看"#TEXT_FADEBLUE"技能叙述"#TEXT_WHITE"还有"#TEXT_YELLOW"升级需求"#TEXT_WHITE"吧");
                	}
                	case 7:
                	{
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这就是知识点与技能的教学了,接下来就以想学的技能为目标开始到各大"#TEXT_YELLOW"学院"#TEXT_WHITE"获取"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"吧");
				        SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 除了通过听课外,当你习得技能后,通过"#TEXT_FADERED"实作"#TEXT_WHITE"该技能也有机率会获得相关的"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"喔");
				        PlayerPassMission(playerid, 15);
				        GivePlayerMission(playerid, 16);
						SendClientMessage(playerid, COLOR_WHITE, "知识的汲取很重要,不过体能的训练也不能马虎,你可以按N键打开个人菜单选择"#TEXT_YELLOW"任务"#TEXT_WHITE"进行锻练的教学");
				    }
                }
            }
            case 16:
			{
			    switch(stage)
				{
				    case 1:
				    {
				        ShowPlayerDialog(playerid, DIALOG_MISSION_TUT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"导览", ""#TEXT_WHITE"充实了知识之后就来锻练体能吧\n这次将带你认识"#TEXT_YELLOW"武装国度"#TEXT_WHITE"与"#TEXT_YELLOW"健身房"#TEXT_WHITE"的训练设施", "开始", "");
					    SetGVarInt("DMission", mission, playerid);
                	}
                	case 2:
                	{
                	    nearest = GetNearestGPS(playerid, "武装国度");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 首先让我们前往"#TEXT_YELLOW"武装国度"#TEXT_WHITE"吧");
                	}
                	case 3:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着请选择"#TEXT_YELLOW"射击练习");
                	}
                	case 4:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在"#TEXT_YELLOW"射击练习"#TEXT_WHITE",你可以通过打靶来提升你的"#TEXT_FADEBLUE"武器熟练度");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 现在选择任何一种武器来开始练习吧");
                	}
                	case 5:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在打靶时,击中靶的不同部位会获得不同的分数,在时间内获得越多分数,提升的"#TEXT_FADEBLUE"武器熟练度"#TEXT_WHITE"也会越高");
                	}
                	case 6:
                	{
                	    nearest = GetNearestGPS(playerid, "健身房");
						SetPlayerMissionGPS(playerid, mission, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ]);
						SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 打完靶之后让我们去"#TEXT_YELLOW"健身房"#TEXT_WHITE"锻练体能吧");
                	}
                	case 7:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在"#TEXT_YELLOW"健身房"#TEXT_WHITE"你可以学习新的战斗招式和使用健身器材提升"#TEXT_FADEBLUE"耐打能力"#TEXT_WHITE"与"#TEXT_FADEBLUE"耐久能力");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接下来租借任何一个"#TEXT_YELLOW"器材"#TEXT_WHITE"开始健身吧");
                	}
                	case 8:
                	{
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 在健身房获得的"#TEXT_FADEBLUE"健身练习度"#TEXT_WHITE"或"#TEXT_FADEBLUE"体力练习度"#TEXT_WHITE"一样可以让你升级技能");
                	    SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 当练习度达一定标准时你便可以在"#TEXT_YELLOW"个人菜单->技能"#TEXT_WHITE"菜单升级你的"#TEXT_FADEBLUE"耐打能力"#TEXT_WHITE"与"#TEXT_FADEBLUE"耐久能力");
                	    PlayerPassMission(playerid, 16);
                	}
                }
            }
		}
	}
}

stock SetPlayerMissionGPS(playerid, mission, Float:gx, Float:gy, Float:gz, color=COLOR_YELLOW)
{
	SetPlayerMapIcon(playerid, 94, gx, gy, gz, 0, color, MAPICON_GLOBAL_CHECKPOINT);
	SetGVarFloat("GPSMX", gx, playerid);
	SetGVarFloat("GPSMY", gy, playerid);
	SetGVarFloat("GPSMZ", gz, playerid);
	SetGVarInt("GPSMID", mission, playerid);
	SetGVarInt("GPS5", 1, playerid);
}

stock DisablePlayerMissionGPS(playerid)
{
    RemovePlayerMapIcon(playerid, 94);
	DeleteGVar("GPSMX", playerid);
	DeleteGVar("GPSMY", playerid);
	DeleteGVar("GPSMZ", playerid);
	DeleteGVar("GPSMID", playerid);
	DeleteGVar("GPS5", playerid);
}

stock OnPlayerReachMissionGPS(playerid)
{
	static mission, have, passed, stage;
	mission = GetGVarInt("GPSMID", playerid);
	if(mission > 0)
	{
		GetPlayerMissionInfo(playerid, mission, have, passed, stage);
		switch(mission)
		{
			case 1: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这个倒箭头代表着"#TEXT_FADEBLUE"出入口"#TEXT_WHITE",按"#TEXT_FADEGREEN"F键"#TEXT_WHITE"可以进入到室内");
			case 3: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这个倒箭头代表着"#TEXT_FADEBLUE"出入口"#TEXT_WHITE",按"#TEXT_FADEGREEN"F键"#TEXT_WHITE"可以进入到室内");
			case 6:
			{
				switch(stage)
				{
					case 5: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着与"#TEXT_YELLOW"花市NPC"#TEXT_WHITE"购买"#TEXT_FADEGREEN"种子"#TEXT_WHITE"吧");
				}
			}
			case 8: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着与"#TEXT_YELLOW"花市NPC"#TEXT_WHITE"谈话吧");
			case 10: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着与"#TEXT_YELLOW"鱼市场NPC"#TEXT_WHITE"谈话吧");
			case 11:
			{
				switch(stage)
				{
				    case 2: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着进去购买"#TEXT_FADEBLUE"十字镐"#TEXT_WHITE"以及"#TEXT_FADEBLUE"斧头"#TEXT_WHITE"吧");
					case 4: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着在这里到任何一棵"#TEXT_GREEN"树"#TEXT_WHITE"旁从"#TEXT_YELLOW"背包"#TEXT_WHITE"使用"#TEXT_FADEBLUE"斧头"#TEXT_WHITE"开始伐木吧");
					case 7: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着在这块矿区里从"#TEXT_YELLOW"背包"#TEXT_WHITE"使用"#TEXT_FADEBLUE"十字镐"#TEXT_WHITE"开始挖掘矿产吧");
					case 10: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 这个就是"#TEXT_YELLOW"纤维"#TEXT_WHITE"的样子");
				}
			}
			case 14:
			{
				switch(stage)
				{
					case 2: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着与"#TEXT_YELLOW"宠物店NPC"#TEXT_WHITE"谈话吧");
					case 9: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着进入超市买个"#TEXT_FADEBLUE"微波汉堡"#TEXT_WHITE"吧");
				}
			}
			case 15: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着进去与"#TEXT_YELLOW"柜台人员"#TEXT_WHITE"查询开课时间吧");
			case 16:
			{
				switch(stage)
				{
					case 2: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着进入与"#TEXT_YELLOW"老板"#TEXT_WHITE"谈话吧");
					case 6: SendClientMessage(playerid, COLOR_WHITE, "<<"#TEXT_PINKRED"导览"#TEXT_WHITE">> 接着进入与"#TEXT_YELLOW"教练"#TEXT_WHITE"谈话吧");
				}
			}
			case 20,22,26://Simeon M1, M3, Cesar M1
			{
				for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
				{
					if(VehData[i][vType] == VTYPE_MISSION)
					{
						if(GetGVarInt("VehMission", i) == mission) SetVehicleParamsForPlayer(i, playerid, 1, 0);
					}
				}
				SendClientMessage(playerid, COLOR_WHITE, "进入被标记的"#TEXT_YELLOW"车辆");
			}
			case 21://Simeon M2
			{
				for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
				{
					if(VehData[i][vType] == VTYPE_MISSION)
					{
						if(GetGVarInt("VehMission", i) == mission) SetVehicleParamsForPlayer(i, playerid, 1, 1);
					}
				}
				SendClientMessage(playerid, COLOR_WHITE, "破坏所有被标记的"#TEXT_YELLOW"车辆");
			}
			case 23://Trevor M1
			{
				SetVehicleParamsForPlayer(GetGVarInt("MissionTrailer", mission), playerid, 1, 1);
				SendClientMessage(playerid, COLOR_WHITE, "使用货车头将"#TEXT_YELLOW"油罐"#TEXT_WHITE"挂起并送至"#TEXT_RED"崔佛的基地");
				SetPlayerCheckpoint(playerid, -30.8779, 1181.5908, 19.3520, 8.0);
			}
			case 29,35://Emmet M1, Woozie M1
			{
			    SetVehicleParamsForPlayer(GetGVarInt("MissionTarget", mission), playerid, 1, 0);
				SendClientMessage(playerid, COLOR_WHITE, "进入被标记的"#TEXT_YELLOW"车辆");
			}
			case 33://Toreno M2
			{
			    for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
				{
					if(VehData[i][vType] == VTYPE_MISSION)
					{
						if(GetGVarInt("VehMission", i) == mission && GetGVarInt("MSVehLoaded", i) == 1) SetVehicleParamsForPlayer(i, playerid, 1, 0);
					}
				}
				SendClientMessage(playerid, COLOR_WHITE, "登上装有补给物资的"#TEXT_YELLOW"飞机");
			}
		}
	}
}

PUBLIC:OnPlayerDataLoad(playerid, datacheck)
{//由于要使用公共呼叫 所以不能使用stock等内置函数
	if(GetGVarInt("DataCheck", playerid) != datacheck){ return Kick(playerid);}//这个代表安全性有问题 呼叫这个函数的玩家 不等于当时进入服务器的玩家 踢除玩家 补安全性漏洞
    //ClearChatbox(playerid, 10);
    switch(orm_errno(PlayerData[playerid][ORM_ID]))
	{//当玩家的数据导向至物件ORM编号后 可以用这个函数判断ORM编号是否正确
        case ERROR_NO_DATA:
		{//这个ERROR_NO_DATA代表回传值为1 物件找不到key值数据 我们可以让玩家进行注册
		    if(PlayerData[playerid][pReg] == 1) return Kick(playerid);
            ShowPlayerDialog(playerid, DIALOG_REGISTER, DIALOG_STYLE_PASSWORD, ""#TEXT_YELLOW"注册", ""#TEXT_WHITE"请输入要注册的"#TEXT_YELLOW"密码", "注册", "离开");
        }
        case ERROR_OK:
		{//这个ERROR_OK代表回传值为0 物件key值没有任何问题的意思 也就是说能读取玩家key值数据(玩家数据存在) key值的说明会在下面
            ShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_PASSWORD, ""#TEXT_YELLOW"登录", ""#TEXT_WHITE"请输入"#TEXT_YELLOW"密码", "登录", "离开");
        }
	}
	orm_setkey(PlayerData[playerid][ORM_ID], "id"); //那么我们把主Key设置成ID 代表登入注埠筢?ORM物件将以玩家的数据库ID作为主键

	SetGVarInt("LogCount", 240, playerid);
	PlayerTextDrawShow(playerid, Background[0]);
	ShowPlayerCameraScene(playerid, SCENE_SKY);
	return 1;
}

stock LoadAllPlayerDatas(playerid)
{
    LoadPlayerItems(playerid, PlayerData[playerid][pID]);
    LoadPlayerPoints(playerid, PlayerData[playerid][pID]);
    LoadPlayerLimit(playerid, PlayerData[playerid][pID]);
	LoadPlayerSkill(playerid, PlayerData[playerid][pID]);
	LoadPlayerRecord(playerid, PlayerData[playerid][pID]);
	LoadPlayerWeapon(playerid, PlayerData[playerid][pID]);
	LoadPlayerConfig(playerid, PlayerData[playerid][pID]);
	LoadPlayerSick(playerid, PlayerData[playerid][pID]);
	LoadPlayerPet(playerid, PlayerData[playerid][pID]);
	LoadPlayerLotto(playerid, PlayerData[playerid][pID]);
	LoadMissionData(playerid, PlayerData[playerid][pID]);
	LoadPlayerGift(playerid, PlayerData[playerid][pID]);
	return 1;
}

PUBLIC:OnPlayerRegister(playerid)
{//由于要使用公共呼叫 所以不能使用stock等内置函数
    //设置玩家初始金钱 一并存入PlayerData
    
    PlayerData[playerid][pCash] = 1000;
    PlayerData[playerid][pBank] = 9000;
    PlayerData[playerid][pLevel] = 1;
    PlayerData[playerid][pExp] = 0;

    PlayerData[playerid][pBag] = 10;
    PlayerData[playerid][pSkin] = 250;
    PlayerData[playerid][pCompany] = COMPANY_ID_NONE;
    PlayerData[playerid][pGang] = GANG_ID_NONE;
    PlayerData[playerid][pAdmin] = 0;
    PlayerData[playerid][pHunger] = PlayerData[playerid][pStamina] = PlayerData[playerid][pHealth] = 100.0;
    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
    PlayerData[playerid][pSpawn] = 0;
    PlayerData[playerid][pReg] = 0;
    PlayerData[playerid][pHealth] = 100.0;
    PlayerData[playerid][pHunger] = 100.0;
    PlayerData[playerid][pStamina] = 100.0;
    PlayerData[playerid][pArmour] = 0.0;

	SetGVarInt("pTmpHUD3H", 0, playerid);
	SetGVarInt("pTmpHUDBackH", 0, playerid);
	SetGVarInt("pTmpBankH", 0, playerid);
	//SetGVarInt("pTmpHABH", 0, playerid);

    OnPlayerLogin(playerid);
}

PUBLIC:OnPlayerLogin(playerid)
{
    static string[144], Hour, Minute, Second, TimeStamp;
    if(LoadAllPlayerDatas(playerid))
    {
		SetPlayerSceneToSpawn(playerid);
		SetGVarInt("Logged", 1, playerid);
		DeleteGVar("LogCount", playerid);

		if(PlayerData[playerid][pReg] == 0)
		{
		    format(string, sizeof(string), "** 新玩家 %s(%d) 已经登入服务器", PlayerData[playerid][pName], playerid);
			SendClientMessageToAll(COLOR_GREEN, string);
		}
		else
		{
		    TimeStamp = gettime(Hour, Minute, Second);
			if(TimeStamp > PlayerData[playerid][pLogSec] && PlayerData[playerid][pLogSec] > 0)
			{
				new Float:revstam = (TimeStamp - PlayerData[playerid][pLogSec])/60;
				if(PlayerData[playerid][pStamina] + revstam > 100.0 + PlayerData[playerid][pMaxStamina])
				{
					revstam -= (PlayerData[playerid][pStamina]  + revstam - (100.0 + PlayerData[playerid][pMaxStamina]));
				}
				if(revstam > 0.0)
				{
					PlayerData[playerid][pStamina] += revstam;//依下线后纪录的时间计算经过的秒数来补给玩家体力,每分钟一点
					format(string, sizeof(string), "** 在不在线期间,你恢复了"#TEXT_BLUEGREEN"%d"TEXT_WHITE"点"#TEXT_BLUEGREEN"体力"TEXT_WHITE"", floatround(revstam));
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
			}
			for(new r = 0; r < MAX_DEALS; r++)
			{
				if(MarketData[r][mPoster] == PlayerData[playerid][pID] && MarketData[r][mSold] == 1)
				{
					if(MarketData[r][mType] == MARKET_MAT){SendClientMessage(playerid, COLOR_YELLOWGREEN, "** 有人已经完成了你在"#TEXT_BLUEGREEN"材料市场"#TEXT_YELLOWGREEN"发起的交易,请记得前往领取");}
					else if(MarketData[r][mType] == MARKET_GUN){SendClientMessage(playerid, COLOR_YELLOWGREEN, "** 有人已经完成了你在"#TEXT_BLUE"枪市场"#TEXT_YELLOWGREEN"发起的交易,请记得前往领取");}
				}
			}
			PlayerData[playerid][pLogSec] = TimeStamp;
			format(string, sizeof(string), "** 玩家 %s(%d) 已经登入服务器", PlayerData[playerid][pName], playerid);
			SendClientMessageToAll(COLOR_GREEN, string);
		}
	}
	PlayerTextDrawHideDestroy(playerid, Background[playerid]);
	Log(connectlog, INFO, "[登入] 玩家%s(%d)已经登入服务器", PlayerData[playerid][pName], PlayerData[playerid][pID]);
}

PUBLIC:KickDelay(playerid) Kick(playerid);

public OnPlayerRequestClass(playerid, classid)
{
	if(GetGVarInt("Dead", playerid) == 1)
	{
		TogglePlayerSpectating(playerid, true);
	    SetGVarInt("Dead", 2, playerid);
	}
	else
	{
	    SetSpawnInfo(playerid, GetGVarInt("pTeam", playerid), PlayerData[playerid][pSkin], PlayerData[playerid][pX], PlayerData[playerid][pY], PlayerData[playerid][pZ], PlayerData[playerid][pAngle], 0, 0, 0, 0, 0, 0);
		SpawnPlayer(playerid);
	}
	return 1;
}

public OnPlayerConnect(playerid)
{
	if(IsPlayerNPC(playerid)) return 1;
	if(GetGVarInt("Logged", playerid) == 1) return Kick(playerid);
	
    RemoveBuildingForPlayer(playerid, 2008, 372.8863,189.3928,1014.1875, 50.0);
    RemoveBuildingForPlayer(playerid, 1811, 372.8863,189.3928,1014.1875, 50.0);
    RemoveBuildingForPlayer(playerid, 6463, 389.7734, -2028.4688, 19.8047, 0.5);
    RemoveBuildingForPlayer(playerid, 3751, 389.8750, -2035.3828, 29.9531, 50);
    RemoveBuildingForPlayer(playerid, 6298, 389.7734, -2028.4688, 19.8047, 0.5);
    RemoveBuildingForPlayer(playerid, 6461, 389.7734, -2028.5000, 20.1094, 0.5);
    RemoveBuildingForPlayer(playerid, 3752, 389.8750, -2028.5000, 32.2266, 50);
    RemoveBuildingForPlayer(playerid, 3865, -2063.2422, 258.7500, 35.7422, 0.25);
    RemoveBuildingForPlayer(playerid, 3869, -2123.2891, 269.5313, 41.8516, 0.25);
    RemoveBuildingForPlayer(playerid, 3869, -2126.2109, 231.9766, 41.6875, 0.25);
    RemoveBuildingForPlayer(playerid, 3869, -2116.6797, 131.0078, 42.1484, 0.25);
    RemoveBuildingForPlayer(playerid, 3865, -2063.0156, 247.9453, 35.7422, 0.25);
    RemoveBuildingForPlayer(playerid, 3865, -2057.7500, 249.9531, 35.5938, 0.25);
    RemoveBuildingForPlayer(playerid, 3865, -2057.7031, 229.8047, 35.3516, 0.25);
    RemoveBuildingForPlayer(playerid, 3865, -2059.5313, 256.5234, 37.0078, 0.25);
    RemoveBuildingForPlayer(playerid, 3888, -2128.1797, 171.4609, 42.4297, 0.25);
    RemoveBuildingForPlayer(playerid, 3888, -2066.3594, 301.9141, 42.1719, 0.25);
    RemoveBuildingForPlayer(playerid, 3887, -2066.3594, 301.9141, 42.1719, 0.25);
    RemoveBuildingForPlayer(playerid, 3887, -2128.1797, 171.4609, 42.4297, 0.25);
    RemoveBuildingForPlayer(playerid, 3866, -2116.6797, 131.0078, 42.1484, 0.25);
    RemoveBuildingForPlayer(playerid, 3864, -2082.5391, 153.5469, 40.1016, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2079.8203, 159.6719, 40.8906, 0.25);
    RemoveBuildingForPlayer(playerid, 3864, -2111.8828, 172.4688, 40.1953, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2116.7500, 177.0781, 40.9844, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2064.2109, 210.1406, 41.2578, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2107.0313, 226.0391, 40.8438, 0.25);
    RemoveBuildingForPlayer(playerid, 10984, -2126.1563, 238.6172, 35.2656, 0.25);
	RemoveBuildingForPlayer(playerid, 3864, -2102.2109, 230.7031, 40.0547, 0.25);
    RemoveBuildingForPlayer(playerid, 3866, -2126.2109, 231.9766, 41.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 10986, -2130.0547, 275.5625, 35.3750, 0.25);
    RemoveBuildingForPlayer(playerid, 10987, -2137.8203, 264.2813, 35.7813, 0.25);
    RemoveBuildingForPlayer(playerid, 3866, -2123.2891, 269.5313, 41.8516, 0.25);
    RemoveBuildingForPlayer(playerid, 3864, -2113.3125, 268.5078, 40.5703, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2118.1328, 263.8438, 41.3594, 0.25);
    RemoveBuildingForPlayer(playerid, 10985, -2099.2734, 292.9141, 35.0703, 0.25);
    RemoveBuildingForPlayer(playerid, 3864, -2059.3438, 205.5313, 40.4688, 0.25);
    RemoveBuildingForPlayer(playerid, 3872, -2048.4531, 265.0938, 41.6563, 0.25);
    RemoveBuildingForPlayer(playerid, 1383, -2076.6394, 233.4760, 34.7686, 350.0);
    RemoveBuildingForPlayer(playerid, 1384, -2076.6394, 233.4760, 34.7686, 350.0);
    RemoveBuildingForPlayer(playerid, 1684, -2076.6394, 233.4760, 34.7686, 350.0);
    RemoveBuildingForPlayer(playerid, 1383, -2080.8096, 250.6403, 105.0677, 100.0);
    RemoveBuildingForPlayer(playerid, 1384, -2080.8096, 250.6403, 105.0677, 100.0);
    RemoveBuildingForPlayer(playerid, 1385, -2080.8096, 250.6403, 105.0677, 100.0);
    RemoveBuildingForPlayer(playerid, 1403, -2080.8096, 250.6403, 105.0677, 100.0);
    RemoveBuildingForPlayer(playerid, 1404, -2080.8096, 250.6403, 105.0677, 100.0);
    RemoveBuildingForPlayer(playerid, 3864, -2041.7500, 265.1016, 40.8672, 0.25);
    RemoveBuildingForPlayer(playerid, 1775, 2224.3235, -1153.0692, 1025.7969, 20.0); //Sprunk in Jefferson Motel
    RemoveBuildingForPlayer(playerid, 1525, 0.0, 0.0, 0.0, 6000.0);//Remove graffiti
    RemoveBuildingForPlayer(playerid, 1526, 0.0, 0.0, 0.0, 6000.0);
    RemoveBuildingForPlayer(playerid, 1527, 0.0, 0.0, 0.0, 6000.0);
    RemoveBuildingForPlayer(playerid, 1528, 0.0, 0.0, 0.0, 6000.0);
   	RemoveBuildingForPlayer(playerid, 1529, 0.0, 0.0, 0.0, 6000.0);
   	RemoveBuildingForPlayer(playerid, 1530, 0.0, 0.0, 0.0, 6000.0);
   	RemoveBuildingForPlayer(playerid, 1531, 0.0, 0.0, 0.0, 6000.0);
   	RemoveBuildingForPlayer(playerid, 1490, 0.0, 0.0, 0.0, 6000.0);

	//Remove Mod Shop
	RemoveBuildingForPlayer(playerid, 5340, 2643.966064, -2039.156005, 14.374130, 5.843682);
	RemoveBuildingForPlayer(playerid, 5779, 1041.196044, -1025.975952, 31.924230, 5.057569);
	RemoveBuildingForPlayer(playerid, 9093, 2388.426025, 1043.562988, 11.552020, 6.092648);
	RemoveBuildingForPlayer(playerid, 3294, -99.430442, 1111.265991, 22.820320, 6.645609);
	RemoveBuildingForPlayer(playerid, 7507, 1963.546997, 2159.733886, 12.132809, 55.413230);
	RemoveBuildingForPlayer(playerid, 7891, 1968.489013, 2163.300048, 11.999870, 6.277705);
	RemoveBuildingForPlayer(playerid, 1553, 1939.542968, 2199.803955, 11.078929, 3.858560);
	RemoveBuildingForPlayer(playerid, 1552, 1939.663940, 2198.608886, 11.117190, 6.730954);
	RemoveBuildingForPlayer(playerid, 1553, 1987.552001, 2130.847900, 10.664319, 3.858560);
	RemoveBuildingForPlayer(playerid, 1552, 1990.022949, 2130.968994, 11.117190, 6.730954);
	RemoveBuildingForPlayer(playerid, 1553, 1991.381958, 2130.847900, 11.268039, 3.858560);
	RemoveBuildingForPlayer(playerid, 3294, -1421.093017, 2591.303955, 57.706489, 6.645609);
	RemoveBuildingForPlayer(playerid, 9625, -2426.074951, 1028.078002, 51.746631, 6.726603);
	RemoveBuildingForPlayer(playerid, 10575, -2716.299072, 216.756393, 5.531970, 5.989109);
	RemoveBuildingForPlayer(playerid, 11319, -1904.628051, 277.849487, 42.901859, 6.643784);
	RemoveBuildingForPlayer(playerid, 11313, -1935.662963, 239.483993, 35.389560, 5.989067);
	RemoveBuildingForPlayer(playerid, 13028, 719.785400, -462.720794, 16.519800, 4.971903);
	RemoveBuildingForPlayer(playerid, 6400, 486.934387, -1734.508056, 13.618590, 5.242478);
	RemoveBuildingForPlayer(playerid, 5856, 1023.853027, -1029.406005, 33.054649, 4.915647);
	RemoveBuildingForPlayer(playerid, 5422, 2071.539062, -1831.818969, 14.337619, 4.915630);
	
	new string[144], playername[MAX_PLAYER_NAME], tmptimer;
	GetPlayerName(playerid, PlayerData[playerid][pName], MAX_PLAYER_NAME);
	
	//CheckSerialData(playerid);
	
    SetGVarInt("Spawned", 0, playerid);
    SetGVarInt("Logged", 0, playerid);
    SetGVarInt("LogCount", 0, playerid);
    SetGVarInt("PassWrong", 0, playerid);
    SetGVarInt("Partner", -1, playerid);
    SetGVarInt("PhoneCaller", -1, playerid);
	SetGVarInt("Calling", -1, playerid);
	SetGVarInt("pTeam", NO_TEAM, playerid);

	ResetPlayerHideTmp(playerid);

    TogglePlayerSpectating(playerid, true);

    //将玩家DataCheck代入值服务器运行时间(毫秒) 以作为确认使用
    SetGVarInt("DataCheck", GetTickCount(), playerid);
    //清空服务器用玩家变数数据 以免造成残留问题
    PlayerData[playerid] = EMPTY_PLAYERDATA;
    //取得玩家名 作为主Key 来确认MySQL数据库是否有玩家数据存在
    GetPlayerName(playerid, PlayerData[playerid][pName], MAX_PLAYER_NAME);
    //新增ORM对象 同时代入暂存变数ormid 以及玩家变数PlayerData 从表playerdata读取
    new ORM:ormid = PlayerData[playerid][ORM_ID] = orm_create("playerdata", MYSQL_SESSION_A);
    //新增orm对象后 可以在对象内连结表内项 也就是读取(连结)玩家数据
    orm_addvar_int(ormid, PlayerData[playerid][pID], "id");//玩家ID
    orm_addvar_string(ormid, PlayerData[playerid][pName], MAX_PLAYER_NAME, "name");//玩家帐号(名)
	orm_addvar_string(ormid, PlayerData[playerid][pPass], 25, "password");//玩家密码 长度要+1确保空头
    orm_addvar_int(ormid, PlayerData[playerid][pCash], "cash");//玩家金钱
    orm_addvar_int(ormid, PlayerData[playerid][pBank], "bank");
    orm_addvar_int(ormid, PlayerData[playerid][pLogSec], "logseconds");
    orm_addvar_int(ormid, PlayerData[playerid][pLastDate], "lastdate");
    orm_addvar_int(ormid, PlayerData[playerid][pLastMonth], "lastmonth");
    orm_addvar_int(ormid, PlayerData[playerid][pLastYear], "lastyear");
    orm_addvar_float(ormid, PlayerData[playerid][pX], "x");
    orm_addvar_float(ormid, PlayerData[playerid][pY], "y");
    orm_addvar_float(ormid, PlayerData[playerid][pZ], "z");
    orm_addvar_float(ormid, PlayerData[playerid][pAngle], "angle");
    orm_addvar_int(ormid, PlayerData[playerid][pExp], "exp");
    orm_addvar_int(ormid, PlayerData[playerid][pLevel], "level");
    orm_addvar_float(ormid, PlayerData[playerid][pHunger], "hunger");
    orm_addvar_float(ormid, PlayerData[playerid][pStamina], "stamina");
    orm_addvar_int(ormid, PlayerData[playerid][pWorld], "world");
    orm_addvar_int(ormid, PlayerData[playerid][pInterior], "interior");
    orm_addvar_int(ormid, PlayerData[playerid][pSkin], "skin");
    orm_addvar_int(ormid, PlayerData[playerid][pBag], "bag");
    orm_addvar_int(ormid, PlayerData[playerid][pJob], "job");
    orm_addvar_float(ormid, PlayerData[playerid][pHealth], "health");
    orm_addvar_float(ormid, PlayerData[playerid][pArmour], "armour");
    orm_addvar_float(ormid, PlayerData[playerid][pMaxStamina], "maxstamina");
    orm_addvar_int(ormid, PlayerData[playerid][pDepartment], "department");
    orm_addvar_int(ormid, PlayerData[playerid][pDeptRank], "deptrank");
    orm_addvar_int(ormid, PlayerData[playerid][pDeptApply], "deptapply");
    orm_addvar_int(ormid, PlayerData[playerid][pCompany], "company");
    orm_addvar_int(ormid, PlayerData[playerid][pGang], "gang");
    orm_addvar_int(ormid, PlayerData[playerid][pWanted], "wanted");
    orm_addvar_int(ormid, PlayerData[playerid][pWantedCount], "wantedcount");
    orm_addvar_string(ormid, PlayerData[playerid][pCrime], 144, "crime");
    orm_addvar_int(ormid, PlayerData[playerid][pRobbed], "robbed");
    orm_addvar_int(ormid, PlayerData[playerid][pSpawnType], "spawntype");
    orm_addvar_int(ormid, PlayerData[playerid][pSpawn], "spawn");
    orm_addvar_int(ormid, PlayerData[playerid][pJail], "jail");
    orm_addvar_int(ormid, PlayerData[playerid][pJailRoom], "jailroom");
    orm_addvar_int(ormid, PlayerData[playerid][pMaxJail], "maxjail");
    orm_addvar_int(ormid, PlayerData[playerid][pTitle], "title");
    orm_addvar_float(ormid, PlayerData[playerid][pMaxHealth], "maxhealth");
    orm_addvar_int(ormid, PlayerData[playerid][pAdmin], "admin");
    orm_addvar_int(ormid, PlayerData[playerid][pBounty], "bounty");
    orm_addvar_int(ormid, PlayerData[playerid][pBountyTime], "bountytime");
    orm_addvar_int(ormid, PlayerData[playerid][pBountySender], "bountysender");
    orm_addvar_int(ormid, PlayerData[playerid][pReg], "registered");
    orm_addvar_int(ormid, PlayerData[playerid][pRenting], "renting");
    orm_addvar_int(ormid, PlayerData[playerid][pRentID], "rentID");
    orm_addvar_int(ormid, PlayerData[playerid][pLogStreak], "logstreak");
    orm_addvar_int(ormid, PlayerData[playerid][pCantJoin], "cantjoin");
    //都读取完成后 设置主Key 就是上面说到的取得玩家名
    orm_setkey(ormid, "name");
    
    //主Key设置完成后 方能进行查询 MySQL查询的结果将返回函数 OnPlayerDataCheck 同时在此传入玩家ID 和检查DataCheck
    orm_load(ormid, "OnPlayerDataLoad", "dd", playerid, GetGVarInt("DataCheck", playerid));

    CreateAllPlayerTextDraw(playerid);
    
    phone_OnPlayerConnect(playerid); //phone

	tmptimer = SetPlayerTimerEx(playerid, "PlayerTimer", 1000, true, "i", playerid);
	SetGVarInt("playertimer[0]", tmptimer, playerid);
	
	//tmpactimer = SetPlayerTimerEx(playerid, "CheckSerialData_Timer", 120000, true, "i", playerid);
	//SetGVarInt("playeractimer", tmpactimer, playerid);

	PlayerStatus[playerid] = CreateDynamic3DTextLabel(" ", COLOR_WHITE, 0.0, 0.0, 0.3, 40.0, playerid, _, 0, 1);

	Fishery[playerid] = EMPTY_FISHERY;

	ClearAllCrime(playerid);
	SetPlayerTeam(playerid, NO_TEAM);
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	format(string, sizeof(string), "** 玩家"#TEXT_YELLOW" %s "#TEXT_WHITE"(ID:"#TEXT_YELLOW"%d"#TEXT_WHITE") 已进入服务器",playername,playerid);
	SendAdminMessage(COLOR_WHITE, string);

	GetPlayerIp(playerid, string, 16);
	Log(connectlog, INFO, "[连线] 玩家%s(IP:%s)已进入服务器", playername, string);
	return 1;
}

public OnPlayerDisconnect(playerid, reason)
{
	new string[144], playername[MAX_PLAYER_NAME];
	
	phone_OnPlayerDisconnect(playerid); // phone
	
	if(phone_opened[playerid]) Phone_Close(playerid); // phone
	
	if(GetGVarInt("Logged", playerid) == 1)
	{
		GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		DatePlayer(playerid);
		SavePlayerDatas(playerid, true);
/*		new query[256];
		mysql_format(MYSQL_SESSION_A, query, sizeof(query), "UPDATE `client` SET `confirmation` = '0' WHERE `client_name` = '%s' LIMIT 1", SerialData[playerid][sClient_name]);
		mysql_query(MYSQL_SESSION_A, query);*/
	    switch(reason)
	    {
	        case 0:
			{
				format(string, sizeof(string), "** 玩家"#TEXT_YELLOW" %s "#TEXT_WHITE"(ID:"#TEXT_YELLOW"%d"#TEXT_WHITE") 已离开服务器["#TEXT_FADERED"断线/Crash"#TEXT_WHITE"]",playername,playerid);
				Log(connectlog, INFO, "[离线] 玩家%s已经离线 (断线/Crash)", playername);
			}
	        case 1:
			{
				format(string, sizeof(string), "** 玩家"#TEXT_YELLOW" %s "#TEXT_WHITE"(ID:"#TEXT_YELLOW"%d"#TEXT_WHITE") 已离开服务器["#TEXT_SKYBLUE"自行离开"#TEXT_WHITE"]",playername,playerid);
				Log(connectlog, INFO, "[离线] 玩家%s已经离线 (自行离开)", playername);
			}
	        case 2:
			{
				format(string, sizeof(string), "** 玩家"#TEXT_YELLOW" %s "#TEXT_WHITE"(ID:"#TEXT_YELLOW"%d"#TEXT_WHITE") 已离开服务器["#TEXT_ORANGE"服务器踢除"#TEXT_WHITE"]",playername,playerid);
				Log(connectlog, INFO, "[离线] 玩家%s已经离线 (服务器踢除)", playername);
			}
	    }
	    SendClientMessageToAll(COLOR_WHITE, string);

		if(GetGVarInt("TaxiOn", playerid) != 0) {TaxiStop(playerid, GetPlayerVehicleID(playerid));}
		if(GetGVarInt("TaxiCount", playerid) > 0) {PayTaxi(playerid);}
  		if(GetGVarInt("BusOn", playerid) != 0) {StopBus(playerid, GetPlayerVehicleID(playerid));}

	    //gym
	    if(GetGVarInt("BenchLifting", playerid) != 0)
	    {
	        switch(GetGVarInt("BenchLifting", playerid))
	        {
            	case 1:{SetGVarInt("LSBench", 0); LSBell = CreateDynamicObject(2913, 774.42907715, 1.88309872, 1000.68834229, 0.00000000, 270.00000000, 87.99966431);}
            	case 2:{SetGVarInt("SFBench", 0); SFBell = CreateDynamicObject(2913, 765.85528564, -48.86857224, 1000.64093018, 0.00000000, 89.49993896, 0.00000000);}
            	case 3:{SetGVarInt("LVBench1", 0); LVBell1 = CreateDynamicObject(2913, 765.34039307, -59.18271637, 1000.63793945, 0.00000000, 89.49993896, 181.25012207);}
            	case 4:{SetGVarInt("LVBench2", 0); LVBell2 = CreateDynamicObject(2913, 768.1105, -58.9997, 1000.6553, -2.4999, 90.3000, 0.3999);}
            	case 5:{SetGVarInt("BeachBench", 0); BeachBell = CreateDynamicObject(2913, 654.3904, -1863.5407, 5.3082, 0.0000, -89.8000, 0.0000);}
            	case 6:{SetGVarInt("PrisonBench1", 0);}
            	case 7:{SetGVarInt("PrisonBench2", 0);}
            }
        }

		if(GetGVarInt("GymBiking", playerid) != 0)
	    {
	        switch(GetGVarInt("GymBiking", playerid))
	        {
            	case 1:{SetGVarInt("LSBike", 0);}
            	case 2:{SetGVarInt("SFBike", 0);}
            	case 3:{SetGVarInt("LVBike", 0);}
            	case 4:{SetGVarInt("BeachBike", 0);}
            	case 5:{SetGVarInt("PrisonBike", 0);}
            }
        }

        if(GetGVarInt("GymRunning", playerid) != 0)
	    {
	        switch(GetGVarInt("GymRunning", playerid))
	        {
            	case 1:{SetGVarInt("LSRun", 0);}
            	case 2:{SetGVarInt("SFRun", 0);}
            	case 3:{SetGVarInt("LVRun", 0);}
            	case 4:{SetGVarInt("PrisonRun1", 0);}
            	case 5:{SetGVarInt("PrisonRun2", 0);}
            }
        }

	    if(GetGVarInt("PetCalled", playerid) == 1)
		{
		    new oldpet = GetGVarInt("CurrentPetID", playerid);
		    DestroyNPC(PetData[playerid][oldpet][petNPC]);
		    new pettimer = GetGVarInt("PetTimer", playerid);
		    KillTimer(pettimer);
		    DeleteGVar("PetTimer", playerid);
		    DeleteGVar("PetCalled", playerid);
		    DeleteGVar("Animal", PetData[playerid][oldpet][petNPC]);
			DeleteGVar("PetOwner", PetData[playerid][oldpet][petNPC]);
			DeleteGVar("Pet", PetData[playerid][oldpet][petNPC]);
			DeleteGVar("PetID", PetData[playerid][oldpet][petNPC]);
			DeleteGVar("CurrentPetID", playerid);
		  	PetData[playerid][oldpet][petNPC] = -1;
		  	Log(petlog, INFO, "%s(%d)已离线并自动收回宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][oldpet][petName], PetData[playerid][oldpet][petID]);
		}
		if(GetGVarInt("UsingRC", playerid) > 0)
		{
			DeleteVehicle(GetGVarInt("RCVeh", playerid));
		}
	}
	if(GetPlayerTeam(playerid) != NO_TEAM)
	{
	    SetPlayerLeaveTeam(playerid);
	}
	//DeleteGVars
	new gvar[24];
	DeleteGVar("Logged", playerid);//使用DeleteGVar来移除GVar清除占用资源
	DeleteGVar("Spawned", playerid);//已出生状态
	DeleteGVar("DataCheck", playerid);
	//DeleteGVar("playeractimer", playerid);//玩家反作弊计时器
	DeleteGVar("playertimer[0]", playerid);//玩家的每秒计时器
	DeleteGVar("playertimer[1]", playerid);//玩家的时速表刷新计时器
	DeleteGVar("TPCD", playerid);//进出冷却
    DeleteGVar("Partner", playerid);//垃圾车工作伙伴
    DeleteGVar("TrashAmount", playerid);//垃圾车工作已拿垃圾数量
    DeleteGVar("WorkDistance", playerid);//工作累计距离(换算薪资用)
    DeleteGVar("Trashing", playerid);//是否正在进行垃圾车工作
    DeleteGVar("CarryTrash", playerid);//是否身上拿着垃圾
    DeleteGVar("TrashID", playerid);//垃圾车工作的目标垃圾箱ID
    DeleteGVar("Transporting", playerid);//是否正在进行联结车工作 1为油罐车工作 2为货柜车
    DeleteGVar("Fishing", playerid);//是否正在钓鱼
    DeleteGVar("Papering", playerid);//是否正在进行传单发送工作
    DeleteGVar("PaperPlace", playerid);//传单发送工作目的地ID
    DeleteGVar("PaperAmount", playerid);//已发送传单数量
    DeleteGVar("QuestSalary", playerid);//工作薪资
    DeleteGVar("QuestTime", playerid);//工作剩余倒数计时器
    DeleteGVar("GPSPlant", playerid);//定位的植物ID
    DeleteGVar("GPS1", playerid);//植物定位
    DeleteGVar("GPSX", playerid);//GPS定位坐标
    DeleteGVar("GPSY", playerid);
    DeleteGVar("GPSZ", playerid);
    DeleteGVar("GPS2", playerid);//GPS定位
    DeleteGVar("GPS3", playerid);//上次死亡位置定位
	DeleteGVar("Questing", playerid);//是否正在进行差事(NPC任务)
	DeleteGVar("SimeonProgress", playerid);//西门任务进度 1为正在前往目标车辆路上 2为已坐上车上
	DeleteGVar("MixSlot1", playerid);//合成栏位材料ItemID
	DeleteGVar("MixSlot2", playerid);
	DeleteGVar("MixSlot3", playerid);
	DeleteGVar("MixAmount1", playerid);//合成栏位材料数量
	DeleteGVar("MixAmount2", playerid);
	DeleteGVar("MixAmount3", playerid);
	DeleteGVar("Digging", playerid);//是否正在采集(挖矿)
	DeleteGVar("PickVeh", playerid);//是否正在解车锁
	DeleteGVar("WireVeh", playerid);//是否正在短路点火偷车
	DeleteGVar("WalkTime", playerid);//客制化走路动作计时器
	DeleteGVar("RangeShooting", playerid);//是否正在打靶
	DeleteGVar("RangePt", playerid);//打靶分数
	DeleteGVar("RangeTime", playerid);//打靶剩余时间
	DeleteGVar("FreeLifting", playerid);//是否正在使用小哑铃
	DeleteGVar("BenchLifting", playerid);//是否正在使用哑铃凳
	DeleteGVar("WeightLift", playerid);//举重量表
	DeleteGVar("LiftCount", playerid);//举重记数
	DeleteGVar("Concentration", playerid);//上课专注度
	DeleteGVar("ClassNap", playerid);//是否正在上课打瞌睡
	DeleteGVar("ClassMeter", playerid);//上课累积量表 累积到一定值会打瞌睡或获得知识点
	DeleteGVar("LockEx", playerid);//解车锁已解破高级锁的数量
	DeleteGVar("Animating", playerid);//是否正在进行Animation
	DeleteGVar("DListID", playerid);
	DeleteGVar("DMission", playerid);
	DeleteGVar("IEEing", playerid);//是否正在进出传送点,若是则在传送后进行走路动作
	DeleteGVar("LiftingUp", playerid);//举重Animation确认参数
	DeleteGVar("Using", playerid);//是否正在使用道具
	DeleteGVar("SickMeter1", playerid);//疾病计时器,累积到一定值会使疾病生效一次
	DeleteGVar("SickMeter2", playerid);
	DeleteGVar("SickMeter3", playerid);
	DeleteGVar("PlayerAnimal", playerid);//玩家是否变成动物
	DeleteGVar("PlayerAmlAttCD", playerid);//玩家变成动物后 使用动物撕咬攻击的冷却时间
	DeleteGVar("GymRunning", playerid);//是否正在使用跑步机
	DeleteGVar("GymBiking", playerid);//是否正在使用飞轮
	DeleteGVar("GymDistance", playerid);//已进行体力健身的距离
	DeleteGVar("Hiding", playerid);//是否正在使用隐身技能
	DeleteGVar("Dead", playerid);//是否已死亡,并用作死亡后重生的计时器
	DeleteGVar("Cured", playerid);//是否死亡后复活
	DeleteGVar("SelectMode", playerid);//OnPlayerSelectObject的选择项目
	DeleteGVar("QuitingJob", playerid);//正在辞职的工作
	DeleteGVar("RaceLeaveCount", playerid);//玩家在竞速时离开载具的弃权倒数
	DeleteGVar("SetVehPass", playerid);//正在设定的载具密码
	DeleteGVar("RaceCPTime", playerid);//竞速的检查点倒数
	DeleteGVar("PlayerBuyingSkin", playerid);//正在购买的造型
	DeleteGVar("PlayerBuyingCarPlace", playerid);//已选择的车行
	DeleteGVar("SellingFish", playerid);//鱼夫工作是否正在出售渔获
	DeleteGVar("FarSell", playerid);//渔夫工作是否是卖给远程买家
	DeleteGVar("RingEstate", playerid);//按门铃的地产ID
	DeleteGVar("RingCD", playerid);//门铃冷却时间
	DeleteGVar("PickedDrop", playerid);//已在OnPlayerPickUpPickup选取的掉落物Pickup
	DeleteGVar("EMonitoring", playerid);//是否正在使用地产监视器
	DeleteGVar("ViewEstate", playerid);//是否正在预览地产
	DeleteGVar("RobbedStore", playerid);//已抢劫的店家数
	DeleteGVar("ModdingShop", playerid);//是否正在改车行内
	DeleteGVar("InstantUse", playerid);//是否购买后立即使用道具 而不是存入背包内
	DeleteGVar("TaxiOn", playerid);//是否正在计程车营业
	DeleteGVar("TaxiEarned", playerid);//计程车已赚车费
	DeleteGVar("TaxiCost", playerid);//搭乘计程车累计车费
	DeleteGVar("TaxiClient", playerid);//计程车已载乘客数量
	DeleteGVar("RentCar", playerid);//租车ID
	DeleteGVar("LogMins", playerid);//累计登入分钟数
	DeleteGVar("EditBS", playerid);//是否正在编辑客运路线
	DeleteGVar("EBRID", playerid);//正在编辑的客运路线ID
	DeleteGVar("BusOn", playerid);//是否正在公车营业
	DeleteGVar("BusEarned", playerid);//公车已赚车费
	DeleteGVar("BusRoute", playerid);//公车正在行进路线
	DeleteGVar("BusClient", playerid);//公车已载乘客数量
	DeleteGVar("OrderedVehicle", playerid);//已订购的载具
	DeleteGVar("EditVCol", playerid);//是否正在改装厂或是地产喷漆设备更改载具颜色
	DeleteGVar("PutItem", playerid);//是否正在使用存放道具到载具/地产/公部门的功能
	DeleteGVar("Engining", playerid);//是否正在发动引擎
	DeleteGVar("FoodDelivering", playerid);//是否正在进行外送工作
	DeleteGVar("Hewing", playerid);//是否正在伐木
	DeleteGVar("FVendoring", playerid);//是否正在进行餐车工作
	DeleteGVar("RequestFD", playerid);//是否正在请求外送
	DeleteGVar("RequestTow", playerid);//是否正在请求拖吊
	DeleteGVar("RequestTaxi", playerid);//是否正在请求计程车
	DeleteGVar("PhoneRing", playerid);//是否手机正在响铃
	DeleteGVar("PhoneRung", playerid);//手机已响次数
	DeleteGVar("PhoneSpeaker", playerid);//是否正在使用手机扩音功能
	DeleteGVar("PhoneChat", playerid);//是否正在讲电话
	DeleteGVar("Cooking", playerid);//外送员工作是否正在烹煮速食
	DeleteGVar("Towing", playerid);//是否正在接受拖吊委托
	DeleteGVar("AirBombed", playerid);//轰炸机已投掷炸弹数量
	DeleteGVar("PlayerTraceMW", playerid);//玩家是否正在追踪货物战争
	DeleteGVar("PlayerTraceMWID", playerid);//正在追踪的货物战争ID
	DeleteGVar("AddingGZ", playerid);//是否正在新增地盘
	DeleteGVar("AttackingTurf", playerid);//是否正在攻击地盘
	DeleteGVar("CheckingTurf", playerid);//是否正在追踪地盘状况
	DeleteGVar("Tied", playerid);//是否被束缚技能束缚
	DeleteGVar("TiePrep", playerid);//是否束缚技能正在发动中
	DeleteGVar("GangStar", playerid);//帮会首领的偶像技能Buff等级
	DeleteGVar("GFBuff", playerid);//帮会首领的教父技能Buff是否开启中
	DeleteGVar("Revive", playerid);//是否获得了复活效果
	DeleteGVar("UsingRC", playerid);//是否正在使用遥控玩具
	DeleteGVar("PlayerX", playerid);//玩家进入Interor时的外部入口坐标(供其他玩家使用像是追踪功能时会获得此外部坐标而不是Interior的坐标)
    DeleteGVar("PlayerY", playerid);
    DeleteGVar("PlayerZ", playerid);
	DeleteGVar("UsingRadio", playerid);//是否正在使用收音机
	DeleteGVar("UsingSpeaker", playerid);//是否正在使用音响
	DeleteGVar("WatchTV", playerid);//是否正在看电视
	DeleteGVar("Arrested", playerid);//是否被逮捕(重生后如果此值为1将会被送入监狱并删除此值)
	DeleteGVar("JailQK", playerid);//监狱放风倒数
	DeleteGVar("JailQKing", playerid);//是否正在监狱放风
	DeleteGVar("ParoleReq", playerid);//是否请求假释
	DeleteGVar("ApplyGunLic", playerid);//是否正在申请枪械执照
	DeleteGVar("PoliceDuty", playerid);//警察是否正在值勤
	DeleteGVar("MedicDuty", playerid);//医疗人员是否正在值勤
	DeleteGVar("PTazzed", playerid);//是否被电击
	DeleteGVar("Tazzing", playerid);//是否正在使用电击枪
	DeleteGVar("Surr", playerid);//是否正在投降
	DeleteGVar("Arresting", playerid);//是否正在逮捕犯人
	DeleteGVar("Unlocking", playerid);//是否正在使用开锁技能 1为正在撬开车门 2为正在短路点火 3为正在入侵地产
	DeleteGVar("ArmourSuit", playerid);//是否正在使用护甲套装
	DeleteGVar("CalledMedic", playerid);//是否有呼叫救护车
	DeleteGVar("TraceBounty", playerid);//是否正在追踪悬赏目标
	DeleteGVar("KillNewbie", playerid);//杀害等级15以下新玩家的数量
	DeleteGVar("LogCount", playerid);//登入过久踢除倒数
	DeleteGVar("PassWrong", playerid);//密码输入错误次数
	DeleteGVar("Animal", playerid);//动物ID(NPC用)
	DeleteGVar("UsingVTicket", playerid);//是否正在使用载具兑换券
	DeleteGVar("UsingETicket", playerid);//是否正在使用地产兑换券
	DeleteGVar("GPS5", playerid);//任务用GPS
	DeleteGVar("Mission", playerid);//正在接受的任务ID
	DeleteGVar("MissionSlot", playerid);//正在接受的任务栏位
	DeleteGVar("Sitting", playerid);//是否正在坐下
	DeleteGVar("Laying", playerid);//是否正在坐下
	DeleteGVar("Recording", playerid);//是否正在纪录NPC用的PlayBack
	DeleteGVar("FixVeh", playerid);//是否正在修车
	DeleteGVar("HPDelayed", playerid);//延时恢复生命量
	DeleteGVar("CurV", playerid);//目前所在载具
	DeleteGVar("pInv", playerid);//玩家是否无敌
	DeleteGVar("pCausedDmg", playerid);//对他人造成的总伤害
	DeleteGVar("TType", playerid);//TextDraw选择
	DeleteGVar("TDecideID", playerid);
	DeleteGVar("Web", playerid);//是否正在浏览的网页
	DeleteGVar("AtkNZ", playerid);//是否正在讨伐NPC帮派
	DeleteGVar("PickedTP", playerid);//接触过的进出点ID

    for(new i; i < MAX_RTD; i++)
	{
		format(gvar, 24, "RTD%d", i);//右侧多条指示HUD
		DeleteGVar(gvar, playerid);
	}
	if(GetGVarInt("AtkNZ", playerid) > 0) {PlayerLeaveNPCGangZone(playerid);}
	ClearPlayerExplosiveShell(playerid);
	if(GetGVarInt("Hunting", playerid) == 1)
	{
		PlayerLeaveHuntQuest(playerid, GetGVarInt("HuntQ", playerid));
	}
	if(GetGVarInt("pCAnim", playerid) > 0)
	{
		StopPlayerCustomAnimation(playerid, INVALID_PLAYER_ID);
	}
	if(GetGVarInt("pTuning", playerid) == 1)
	{
        SetVehicleToRespawn(GetGVarInt("pTuneVeh", playerid));
		DeleteGVar("pTuning", playerid);
		DeleteGVar("pTuneVeh", playerid);
	}
	if(GetGVarInt("pArena", playerid) > 0)//是否正在参加竞技场
	{
	    PlayerLeaveArena(playerid);
	}
	if(GetGVarInt("Mission", playerid) > 0)//是否正在进行任务
	{
	    PlayerStopMission(playerid);
	}
	if(GetGVarInt("EditMode", playerid) > 0)//OnPlayerEditObject的选择项目
	{
	    new mode = GetGVarInt("EditMode", playerid);
	    if(mode == SELECT_BUILD)//删除暂用的编辑Object
	    {
	        DestroyObject(GetGVarInt("EditObjID", playerid));
	    }
	    else if(mode == SELECT_MOVE)//删除暂用的编辑Object以及将原本的dynamic物件归位
	    {
			new objdata = GetGVarInt("EditObjData", playerid);
	        SetDynamicObjectPos(GetGVarInt("EditDymObj", playerid), ObjectData[objdata][oX], ObjectData[objdata][oY], ObjectData[objdata][oZ]);
	        DestroyObject(GetGVarInt("EditObjID", playerid));
	    }
	    DeleteGVar("EditMode", playerid);
	}
	if(PlayerData[playerid][pWanted] > 0 && GetGVarInt("Cuffed", playerid) == 1)
	{
	    WantedToJail(playerid);
	}
	if(GetGVarInt("AppMedic", playerid) > 0)//是否正在挂号看病
	{
		DeleteGVar("AppMedic", playerid);
		DeleteGVar("MedicCost", playerid);
		if(GetGVarInt("HPUsed", 1) == 1 && GetGVarInt("HPPatient", 1) == playerid) DeleteGVar("HPUsed", 1);
		if(GetGVarInt("HPUsed", 2) == 1 && GetGVarInt("HPPatient", 2) == playerid) DeleteGVar("HPUsed", 1);
		if(GetGVarInt("HPUsed", 3) == 1 && GetGVarInt("HPPatient", 3) == playerid) DeleteGVar("HPUsed", 1);
	}
	if(GetGVarInt("PCRoom", playerid) > 0)//是否正在听课
	{
		LeaveClass(playerid);
	}
	if(GetGVarInt("MoveFighting", playerid) > 0)//是否正在学习格斗
    {
        SetPlayerLeaveGymFight(playerid);
    }
	if(GetGVarInt("UsingStinger", playerid) == 1)//是否正在使用钉刺技能
	{
		new stingerid = GetGVarInt("StingerID", playerid);
		DestroyStinger(stingerid);
		DeleteGVar("UsingStinger", playerid);
	}
	if(GetGVarInt("UsingBlock", playerid) == 1)//是否正在使用路障技能
	{
		new stingerid = GetGVarInt("BlockID", playerid);
		DestroyStinger(stingerid);
		DeleteGVar("UsingBlock", playerid);
	}
	if(GetGVarInt("PoliceTrace", playerid) == 1)//是否正在使用警方追踪系统
	{
	    PlayerUntracePlayer(playerid);
	}
	if(GetGVarInt("PlayerMW", playerid) == 1)//是否正持有货物战争货物
	{
		PlayerDropMatWar(playerid);
	}
	if(GetGVarInt("Eventing", playerid) == 1)//是否正在参与活动
	{
	    new eventid = GetGVarInt("EventID", playerid);
		SetPlayerLeaveEvent(playerid, eventid);
	}
	if(GetGVarInt("Calling", playerid) != -1)//是否正在通话中
	{
	    new caller = GetGVarInt("Calling", playerid);
	    if(GetGVarInt("Calling", caller) == playerid)
	    {
	        SendClientMessage(caller, COLOR_LIGHTRED, "<<通话>> 对方已离线,通话结束");
	    }
	    PhoneHangUp(playerid);
	}
	if(GetGVarInt("Fishering", playerid) != 0)//是否正在进行渔夫工作
	{
		DeleteGVar("Fishering", playerid);
		DeleteGVar("FisherBoat", playerid);
	}
	if(GetGVarInt("CarSelling", playerid) == 1)//是否正在进行汽车销售商工作
	{
     	DeletePlayerSellCar(playerid);
	    DeleteGVar("CarSelling", playerid);
	}
	if(GetGVarInt("Filming", playerid) > CAMERA_OFF)//是否正在使用摄影机
	{
	    PlayerStopFilming(playerid);
	    if(GetGVarInt("TakingAngle", playerid) == 1)
	    {
	        DeleteGVar("TakingAngle", playerid);
	        DestroyDynamicObject(GetGVarInt("FilmOBJ", playerid));
	    }
	}
	if(GetGVarInt("UsingClone", playerid) == 1)//是否正在使用替身Actor
	{
		new clone = GetGVarInt("Clone", playerid);
		DeleteGVar("UsingClone", playerid);
		DeleteGVar("Cloning", clone);
		DestroyDynamicActor(clone);
	}
	//race
    if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)//是否正在竞速
	{
	    new
	    raceid = GetGVarInt("RaceID", playerid);
	    PlayerLeaveRace(playerid, raceid);
	}

	if(GetGVarInt("EditRCP", playerid) != 0 || GetGVarInt("ERStart", playerid) != 0)//是否正在编辑竞速赛道
	{
	    DeleteGVar("ERaceID", playerid);
	    DeleteGVar("EditRCP", playerid);
	    DeleteGVar("ERStart", playerid);
	    DestroyVehicle(GetGVarInt("ERVeh", playerid));
		DeleteGVar("ERVeh", playerid);
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    if((VehData[vehicleid][vType] == VTYPE_NONE || VehData[vehicleid][vType] == VTYPE_MW || VehData[vehicleid][vType] == VTYPE_ARENA) && VehData[vehicleid][vLock] > 0)
		{
		    SetVehicleLock(playerid, vehicleid, 0);
		}
	}
	KillPlayerTimers(playerid);//清除玩家所有玩家计时器
	DeleteAllPlayerText(playerid);
	if(!IsPlayerNPC(playerid))
	{
	    DestroyDynamic3DTextLabel(PlayerStatus[playerid]);
	    //DestroyDynamic3DTextLabel(PlayerVehText[playerid]);
	    StopAudioStreamForPlayer(playerid);
	    TextDrawHideForPlayer(playerid, Black);
	    RemovePlayerAttachedObject(playerid, 9);
    	RemovePlayerAttachedObject(playerid, 8);
	}
	return 1;
}

public OnPlayerSpawn(playerid)
{
    if(IsPlayerNPC(playerid)) return 1;
	new string[144];
	DatePlayer(playerid);
    PreloadAnim(playerid);
    SetCameraBehindPlayer(playerid);
	SetGVarInt("PickedTP", -1, playerid);
	if(phone_opened[playerid]) Phone_Close(playerid); // phone
	
    if(PlayerData[playerid][pWanted] > 0)
    {
        SetPlayerWantedLevel(playerid, PlayerData[playerid][pWanted]);
        UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_YELLOW, "通缉犯");
    }
	if(GetGVarInt("PlayerAnimal", playerid) > 0)
	{
		DeleteGVar("PlayerAnimal", playerid);
	    SendClientMessage(playerid, COLOR_PINK, "** 你变回人类了!");
	    KillTimer(GetGVarInt("RTHTimer", playerid));
	}
	if(GetGVarInt("Tied", playerid) > 0)
	{
		DeleteGVar("Tied", playerid);
	    SetPlayerSpecialAction(playerid, 0);
	}
	if(GetGVarInt("PetCalled", playerid) == 1)
	{
		new oldpet = GetGVarInt("CurrentPetID", playerid);
		DestroyNPC(PetData[playerid][oldpet][petNPC]);
		new pettimer = GetGVarInt("PetTimer", playerid);
		KillTimer(pettimer);
		DeleteGVar("PetTimer", playerid);
		DeleteGVar("PetCalled", playerid);
		DeleteGVar("Animal", PetData[playerid][oldpet][petNPC]);
		DeleteGVar("PetOwner", PetData[playerid][oldpet][petNPC]);
		DeleteGVar("Pet", PetData[playerid][oldpet][petNPC]);
		DeleteGVar("PetID", PetData[playerid][oldpet][petNPC]);
		DeleteGVar("CurrentPetID", playerid);
		PetData[playerid][oldpet][petNPC] = -1;
		Log(petlog, INFO, "%s(%d)已重生并自动收回宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][oldpet][petName], PetData[playerid][oldpet][petID]);
	}

	if(GetGVarInt("Dead", playerid) == 1)
    {
		TogglePlayerSpectating(playerid, true);
		SetGVarInt("Dead", 2, playerid);
    }
    else
    {
        if(GetGVarInt("pArena", playerid) > 0)//参与竞技场
        {
            SetPlayerInArenaPos(playerid, GetGVarInt("pArena", playerid));
        }
        else if(GetGVarInt("Eventing", playerid) == 1)//参与活动
	    {
			new eventid = GetGVarInt("EventID", playerid);
			switch(Event[eventid][evType])
			{
				case EVENT_VS, EVENT_TVS, EVENT_SVS:
				{
				    SetPlayerInEventPos(playerid, eventid);
				}
				case EVENT_DM, EVENT_TDM, EVENT_SDM:
				{
					SetPlayerLeaveEvent(playerid, eventid);
					SendClientMessage(playerid, COLOR_YELLOW, "** 你因为在死斗活动中死亡,所以失去资格离开了活动");
				}
				case EVENT_SURVIVE:
				{
					SetPlayerLeaveEvent(playerid, eventid);
					SendClientMessage(playerid, COLOR_YELLOW, "** 你因为在生存活动中死亡,所以失去资格离开了活动");
				}
				case EVENT_SSUR:
				{
				    new teamid = GetGVarInt("EventTeam", playerid);
				    if(GetEventTeamMembers(eventid, teamid) > 1 && GetGVarInt("EvWounded", playerid) == 0)
				    {
				        format(string, sizeof(string), "<<活动小队>> 队员 %s 受了重伤了,赶紧前往他的位置按Y治疗他吧!", PlayerData[playerid][pName]);
				        SendEventTeamMessage(eventid, teamid, COLOR_YELLOW, string);
				        SendClientMessage(playerid, COLOR_YELLOW, "** 你受了重伤无法行动,赶紧按N使用小队频道向队友求救吧");
				        ApplyAnimationEx(playerid, "CRACK", "crckidle2", 4.1, 1, 0, 0, 1, 0, 1);
				        SetPlayerPos(playerid, GetGVarFloat("DeathX", playerid), GetGVarFloat("DeathY", playerid), GetGVarFloat("DeathZ", playerid));
				        SetGVarInt("EvWounded", 1, playerid);
				        SetPlayerHealth_Fix(playerid, 30.0);
				        SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
				        SetCameraBehindPlayer(playerid);
				    }
				    else
				    {
					    SendClientMessage(playerid, COLOR_YELLOW, "** 你因为在生存活动中死亡,所以失去资格离开了活动");
					    SetPlayerLeaveEvent(playerid, eventid);
					}
					new woundedcount = 0;
					ForEachPlayer(p) if(GetGVarInt("EventTeam", p) == teamid && GetGVarInt("EvWounded", p) == 1) woundedcount ++;//取得被击倒的队员数
					if(woundedcount == GetEventTeamMembers(eventid, teamid))//如果被所有队员都被击倒
					{
					    ForEachPlayer(p)
						{
						    if(GetGVarInt("EventTeam", p) == teamid)
						    {
							    SetPlayerLeaveEvent(p, eventid);
							    SendClientMessage(p, COLOR_YELLOW, "** 因为所有队员皆死亡或被击倒,所以整队失去资格");
							}
						}
					}
				}
			}
	    }
		else if(GetGVarInt("EMonitoring", playerid) > 0)//监视器(spectating)
		{
	   		new Float:tmpX = GetGVarFloat("EMX", playerid),
				Float:tmpY = GetGVarFloat("EMY", playerid),
				Float:tmpZ = GetGVarFloat("EMZ", playerid),
				tmpI = GetGVarInt("EMI", playerid),
				tmpW = GetGVarInt("EMW", playerid);
			SetPlayerVirtualWorld(playerid, tmpW);
			SetPlayerInterior(playerid, tmpI);
			SetPlayerPos(playerid, tmpX, tmpY, tmpZ);
			TogglePlayerControllableEx(playerid, 1);
			SetCameraBehindPlayer(playerid);
			DeleteGVar("EMonitoring", playerid);

			GivePlayerDataWeapons(playerid);
			SetPlayerWeaponColored(playerid);
			SetPlayerArmour_Fix(playerid, PlayerData[playerid][pArmour]);

			TogglePlayerControllableEx(playerid, 0, 1);
			GameTextForPlayer(playerid, "~w~加载...", 2000, 3);
			SetPlayerTimerEx(playerid, "UnFreeze", 3000, 0, "i", playerid);
		}
		else if(GetGVarInt("WatchTV", playerid) > 0)//看电视(spectating)
		{
	   		new Float:tmpX = GetGVarFloat("TVX", playerid),
				Float:tmpY = GetGVarFloat("TVY", playerid),
				Float:tmpZ = GetGVarFloat("TVZ", playerid),
				tmpI = GetGVarInt("TVI", playerid),
				tmpW = GetGVarInt("TVW", playerid);
			SetPlayerVirtualWorld(playerid, tmpW);
			SetPlayerInterior(playerid, tmpI);
			SetPlayerPos(playerid, tmpX, tmpY, tmpZ);
			TogglePlayerControllableEx(playerid, 1);
			SetCameraBehindPlayer(playerid);
			DeleteGVar("WatchTV", playerid);

			GivePlayerDataWeapons(playerid);
			SetPlayerWeaponColored(playerid);
			SetPlayerArmour_Fix(playerid, PlayerData[playerid][pArmour]);

			TogglePlayerControllableEx(playerid, 0, 1);
			GameTextForPlayer(playerid, "~w~加载...", 2000, 3);
			SetPlayerTimerEx(playerid, "UnFreeze", 3000, 0, "i", playerid);
		}
		else if(GetGVarInt("Revive", playerid) == 1)//复活出生
		{
		    DeleteGVar("Revive", playerid);
		    SetPlayerInLastPos(playerid);
		    SendClientMessage(playerid, COLOR_PINKRED, "** 你因为复活效果而在原地重生了");
		    SetPlayerHealth_Fix(playerid, 30.0);
		    SetPlayerArmour_Fix(playerid, 0.0);
		    GivePlayerDataWeapons(playerid);
		}
		else//正常出生
		{
		    if(PlayerData[playerid][pReg] == 0)
		    {
		        ShowPlayerRegMenu(playerid, 0);
		    }
		    else if(GetGVarInt("Arrested", playerid) == 1)
		    {
		        WantedToJail(playerid);
		    }
		    else if(PlayerData[playerid][pJail] > 0)
		    {//入狱中
				new id = PlayerData[playerid][pJailRoom];
				SetPlayerPos_Fix(playerid, PrisonSpawn[id][pssX], PrisonSpawn[id][pssY], PrisonSpawn[id][pssZ]);
				SetPlayerFacingAngle(playerid, PrisonSpawn[id][pssA]);
				SetPlayerVirtualWorld(playerid, 1);
				SetPlayerInterior(playerid, 1);
				ClearAllWeapon(playerid);
				SetGVarInt("JailQK", 300, playerid);
				UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_ORANGE, "服刑中");
		    }
		    else
		    {
		        GivePlayerDataWeapons(playerid);
			    SetPlayerWeaponColored(playerid);
			    ClearPlayerExplosiveShell(playerid);
			    SetPlayerArmour_Fix(playerid, PlayerData[playerid][pArmour]);
		        if(PlayerData[playerid][pWanted] > 0)
		        {
		            SetPlayerInLastPos(playerid);
		            format(string, sizeof(string), "** 你目前通缉等级为 %d 星,在被通缉期间你只能在上次离线位置重生", PlayerData[playerid][pWanted]);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        else
		        {
				    switch(PlayerData[playerid][pSpawnType])
				    {
						case SPAWN_ESTATE:
						{
						    static eid, style;
							eid = EstateSqlIDToID(PlayerData[playerid][pSpawn]);
							if(eid == -1)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的重生地点已经不存在了");
							}
							else if(EstateData[eid][eType] == ESTATE_SUITE)
							{
							    if(!IsPlayerEstate(playerid, eid))
							    {
							        SetPlayerInLastPos(playerid);
							        PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							        PlayerData[playerid][pSpawn] = 0;
							    	SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的重生地点已经不属于你了");
							    }
							    else
							    {
							        style = EstateData[eid][eStyle];
							        SetPlayerPos_Fix(playerid, EstateStyle_Suite[style][esX], EstateStyle_Suite[style][esY], EstateStyle_Suite[style][esZ]);
									SetPlayerFacingAngle(playerid, EstateStyle_Suite[style][esA]);
									SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
									SetPlayerInterior(playerid, EstateStyle_Suite[style][esInt]);
									SetGVarFloat("PlayerX", EstateData[eid][eX], playerid),
									SetGVarFloat("PlayerY", EstateData[eid][eY], playerid),
									SetGVarFloat("PlayerZ", EstateData[eid][eZ], playerid);
								}
							}
							else if(EstateData[eid][eType] == ESTATE_HOUSE)
							{
							    if(!IsPlayerEstate(playerid, eid))
							    {
							        SetPlayerInLastPos(playerid);
							        PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							        PlayerData[playerid][pSpawn] = 0;
							    	SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的重生地点已经不属于你了");
							    }
							    else
							    {
							        style = EstateData[eid][eStyle];
							        SetPlayerPos_Fix(playerid, EstateStyle_House[style][esX], EstateStyle_House[style][esY], EstateStyle_House[style][esZ]);
									SetPlayerFacingAngle(playerid, EstateStyle_House[style][esA]);
									SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
									SetPlayerInterior(playerid, EstateStyle_House[style][esInt]);
									SetGVarFloat("PlayerX", EstateData[eid][eX], playerid),
									SetGVarFloat("PlayerY", EstateData[eid][eY], playerid),
									SetGVarFloat("PlayerZ", EstateData[eid][eZ], playerid);
								}
							}
							else if(EstateData[eid][eType] == ESTATE_OFFICE)
							{
							    if(!IsCompanyEstate(PlayerData[playerid][pCompany], eid))
							    {
							        SetPlayerInLastPos(playerid);
							        PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							        PlayerData[playerid][pSpawn] = 0;
							    	SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的重生地点已经不属于你所属的企业了");
							    }
							    else
							    {
							        style = EstateData[eid][eStyle];
							        SetPlayerPos_Fix(playerid, EstateStyle_Office[style][esX], EstateStyle_Office[style][esY], EstateStyle_Office[style][esZ]);
									SetPlayerFacingAngle(playerid, EstateStyle_Office[style][esA]);
									SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
									SetPlayerInterior(playerid, EstateStyle_Office[style][esInt]);
									SetGVarFloat("PlayerX", EstateData[eid][eX], playerid),
									SetGVarFloat("PlayerY", EstateData[eid][eY], playerid),
									SetGVarFloat("PlayerZ", EstateData[eid][eZ], playerid);
								}
							}
							else if(EstateData[eid][eType] == ESTATE_CLUBHOUSE)
							{
							    if(!IsGangEstate(PlayerData[playerid][pGang], eid))
							    {
							        SetPlayerInLastPos(playerid);
							        PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							        PlayerData[playerid][pSpawn] = 0;
							    	SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的重生地点已经不属于你了");
							    }
							    else
							    {
							        style = EstateData[eid][eStyle];
							        SetPlayerPos_Fix(playerid, EstateStyle_Clubhouse[style][esX], EstateStyle_Clubhouse[style][esY], EstateStyle_Clubhouse[style][esZ]);
									SetPlayerFacingAngle(playerid, EstateStyle_Clubhouse[style][esA]);
									SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
									SetPlayerInterior(playerid, EstateStyle_Clubhouse[style][esInt]);
									SetGVarFloat("PlayerX", EstateData[eid][eX], playerid),
									SetGVarFloat("PlayerY", EstateData[eid][eY], playerid),
									SetGVarFloat("PlayerZ", EstateData[eid][eZ], playerid);
								}
							}
						}
						case SPAWN_RENT:
						{
						    static eid, style;
							eid = EstateSqlIDToID(PlayerData[playerid][pRentID]);
							if(PlayerData[playerid][pRenting] == 0 || eid == -1 || EstateData[eid][eOwnerType] == ESTATE_OWNER_NONE)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的租屋处已经不开放出租了");
							}
							else
							{
							    if(EstateData[eid][eRentable] == 0)
							    {
							        SetPlayerInLastPos(playerid);
							        PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							        PlayerData[playerid][pSpawn] = 0;
							    	SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你设定的租屋处已经不开放出租了");
							    }
							    else
							    {
							        style = EstateData[eid][eStyle];
							        SetPlayerPos_Fix(playerid, EstateStyle_House[style][esX], EstateStyle_House[style][esY], EstateStyle_House[style][esZ]);
									SetPlayerFacingAngle(playerid, EstateStyle_House[style][esA]);
									SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
									SetPlayerInterior(playerid, EstateStyle_House[style][esInt]);
									SetGVarFloat("PlayerX", EstateData[eid][eX], playerid),
									SetGVarFloat("PlayerY", EstateData[eid][eY], playerid),
									SetGVarFloat("PlayerZ", EstateData[eid][eZ], playerid);
								}
							}
						}
						case SPAWN_POLICE:
						{
						    if(PlayerData[playerid][pDepartment] != DEPT_POLICE)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经无法使用这个重生地点了");
							}
							else
							{
							    static id;
							    id = PlayerData[playerid][pSpawn];
								SetPlayerPos_Fix(playerid, PoliceSpawn[id][dpsinX], PoliceSpawn[id][dpsinY], PoliceSpawn[id][dpsinZ]);
								SetPlayerFacingAngle(playerid, PoliceSpawn[id][dpsinA]);
								SetPlayerVirtualWorld(playerid, PoliceSpawn[id][dpsWorld]);
								SetPlayerInterior(playerid, PoliceSpawn[id][dpsInt]);
								SetGVarFloat("PlayerX", PoliceSpawn[id][dpsoutX], playerid),
								SetGVarFloat("PlayerY", PoliceSpawn[id][dpsoutY], playerid),
								SetGVarFloat("PlayerZ", PoliceSpawn[id][dpsoutZ], playerid);
							}
						}
						case SPAWN_MEDIC:
						{
						    if(PlayerData[playerid][pDepartment] != DEPT_MEDIC)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经无法使用这个重生地点了");
							}
							else
							{
							    static id;
							    id = PlayerData[playerid][pSpawn];
								SetPlayerPos_Fix(playerid, MedicSpawn[id][dpsinX], MedicSpawn[id][dpsinY], MedicSpawn[id][dpsinZ]);
								SetPlayerFacingAngle(playerid, MedicSpawn[id][dpsinA]);
								SetPlayerVirtualWorld(playerid, MedicSpawn[id][dpsWorld]);
								SetPlayerInterior(playerid, MedicSpawn[id][dpsInt]);
								SetGVarFloat("PlayerX", MedicSpawn[id][dpsoutX], playerid),
								SetGVarFloat("PlayerY", MedicSpawn[id][dpsoutY], playerid),
								SetGVarFloat("PlayerZ", MedicSpawn[id][dpsoutZ], playerid);
							}
						}
						case SPAWN_GOVERNMENT:
						{
						    if(PlayerData[playerid][pDepartment] != DEPT_GOVERNMENT)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经无法使用这个重生地点了");
							}
							else
							{
							    static id;
							    id = PlayerData[playerid][pSpawn];
								SetPlayerPos_Fix(playerid, GovernmentSpawn[id][dpsinX], GovernmentSpawn[id][dpsinY], GovernmentSpawn[id][dpsinZ]);
								SetPlayerFacingAngle(playerid, GovernmentSpawn[id][dpsinA]);
								SetPlayerVirtualWorld(playerid, GovernmentSpawn[id][dpsWorld]);
								SetPlayerInterior(playerid, GovernmentSpawn[id][dpsInt]);
								SetGVarFloat("PlayerX", GovernmentSpawn[id][dpsoutX], playerid),
								SetGVarFloat("PlayerY", GovernmentSpawn[id][dpsoutY], playerid),
								SetGVarFloat("PlayerZ", GovernmentSpawn[id][dpsoutZ], playerid);
							}
						}
						case SPAWN_COUNSELOR:
						{
						    if(PlayerData[playerid][pDepartment] != DEPT_COUNSELOR)
							{
							    SetPlayerInLastPos(playerid);
							    PlayerData[playerid][pSpawnType] = SPAWN_LAST;
							    PlayerData[playerid][pSpawn] = 0;
							    SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经无法使用这个重生地点了");
							}
							else
							{
							    static id;
							    id = PlayerData[playerid][pSpawn];
								SetPlayerPos_Fix(playerid, CounselorSpawn[id][dpsinX], CounselorSpawn[id][dpsinY], CounselorSpawn[id][dpsinZ]);
								SetPlayerFacingAngle(playerid, CounselorSpawn[id][dpsinA]);
								SetPlayerVirtualWorld(playerid, CounselorSpawn[id][dpsWorld]);
								SetPlayerInterior(playerid, CounselorSpawn[id][dpsInt]);
								SetGVarFloat("PlayerX", CounselorSpawn[id][dpsoutX], playerid),
								SetGVarFloat("PlayerY", CounselorSpawn[id][dpsoutY], playerid),
								SetGVarFloat("PlayerZ", CounselorSpawn[id][dpsoutZ], playerid);
							}
						}
						default:
						{
						    if(PlayerData[playerid][pX] != 0.0 && PlayerData[playerid][pY] != 0.0 && PlayerData[playerid][pZ] != 0.0)
							{
							    SetPlayerInLastPos(playerid);
							}
							else
							{
							    SetPlayerPos_Fix(playerid, 1645.3590,-2246.8298,13.4898);
								SetPlayerFacingAngle(playerid, 177.4142);
								SetPlayerVirtualWorld(playerid, 0);
								SetPlayerInterior(playerid, 0);
							}
						}
					}
				}
			}
			if(PlayerData[playerid][pHealth] < 10.0) PlayerData[playerid][pHealth] = 10.0;
			SetPlayerHealth_Fix(playerid, PlayerData[playerid][pHealth]);
			SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
			if(PlayerData[playerid][pBounty] > 0)
		    {
		        format(string, sizeof(string), "** 注意: 你头上还有价值$%d的悬赏,剩余时间还有%d秒", PlayerData[playerid][pBounty], PlayerData[playerid][pBountyTime]);
		        SendClientMessage(playerid, COLOR_FADERED, string);
		    }

		    for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
		    {
		        if(IsPlayerVehicle(playerid, i))
		        {
					if(VehData[i][vStatus] == VEH_STOLEN)
					{
					    SendClientMessage(playerid, COLOR_FADERED, "** 你有载具被偷走了,请去警局柜台查看是否有被寻获");
					    break;
					}
		        }
	     	}
	     	CheckPlayerMission(playerid);

		}
		SetGVarInt("Spawned", 1, playerid);

        UnHide(playerid);
	    SetPlayerScore(playerid, PlayerData[playerid][pLevel]);
	    UpdatePlayerExpBar(playerid);
		UpdateGangZoneForPlayer(playerid);

		SetPlayerSkillLevel(playerid, 0, SkillData[playerid][psPistol]);
		SetPlayerSkillLevel(playerid, 2, SkillData[playerid][psDEA]);
		SetPlayerSkillLevel(playerid, 3, SkillData[playerid][psShotgun]);
		SetPlayerSkillLevel(playerid, 4, SkillData[playerid][psSawn]);
		SetPlayerSkillLevel(playerid, 5, SkillData[playerid][psSpas]);
		SetPlayerSkillLevel(playerid, 6, SkillData[playerid][psUZI]);
		SetPlayerSkillLevel(playerid, 7, SkillData[playerid][psMP5]);
		SetPlayerSkillLevel(playerid, 8, SkillData[playerid][psAK]);
		SetPlayerSkillLevel(playerid, 9, SkillData[playerid][psM4]);
		SetPlayerSkillLevel(playerid, 10, SkillData[playerid][psSniper]);

		switch(ConfigData[playerid][cfFight])
		{
			case 0: SetPlayerFightingStyle(playerid, FIGHT_STYLE_GRABKICK);
			case 1: SetPlayerFightingStyle(playerid, FIGHT_STYLE_BOXING);
			case 2: SetPlayerFightingStyle(playerid, FIGHT_STYLE_KUNGFU);
			case 3: SetPlayerFightingStyle(playerid, FIGHT_STYLE_KNEEHEAD);
		}

		/*if(ConfigData[playerid][cfNameTag] == 1)
		{
		    ShowNameTagForPlayer(playerid, false);
		}*/

	    if(PlayerData[playerid][pCompany] != COMPANY_ID_NONE)//检查是否已经不属于企业但是个人资料却未跟进
	    {
	        new comck = 0, ci, cj, comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
      		if(comid == -1) {comck = 0;}//企业已经被解散或不存在
      		else
      		{
				for(comck = ci = 0, cj = MAX_CMEMBERS; ci < cj; ci++)
				{
					if(CompanyMember[comid][ci][cmMemberID] == PlayerData[playerid][pID] && CompanyMember[comid][ci][cmJoined] == MEMBER_JOINED)
					{
				        comck = 1;
				        break;
					}
				}
			}
	        if(comck == 0)
			{
		 		PlayerData[playerid][pCompany] = COMPANY_ID_NONE;
		 		if(PlayerData[playerid][pTitle] == TITLE_COMPANY) PlayerData[playerid][pTitle] = TITLE_NONE;
		 		//SendClientMessage(playerid, COLOR_WHITE, "已修复一笔企业相关的错误");
		 	}
		}
		if(PlayerData[playerid][pGang] != GANG_ID_NONE)//检查是否已经不属于帮会但是个人资料却未跟进
	    {
	        new gck = 0, gi ,gj, gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
	        if(gangid == -1) {gck = 0;}//帮会已经被解散或不存在
	        else
	        {
				for(gck = gi = 0, gj = MAX_GMEMBERS; gi < gj; gi++)
				{
					if(GangMember[gangid][gi][gmMemberID] == PlayerData[playerid][pID] && GangMember[gangid][gi][gmJoined] == MEMBER_JOINED)
					{
				        gck = 1;
				        break;
					}
				}
			}
	        if(gck == 0)
			{
		 		PlayerData[playerid][pGang] = GANG_ID_NONE;
		 		if(PlayerData[playerid][pTitle] == TITLE_GANG || PlayerData[playerid][pTitle] == TITLE_GANG_FULL) PlayerData[playerid][pTitle] = TITLE_NONE;
		 		//SendClientMessage(playerid, COLOR_WHITE, "已修复一笔帮会相关的错误");
		 	}
		 	else
		 	{
		 	    if(PlayerData[playerid][pID] == GangData[gangid][gBoss] && GangData[gangid][gType] == GANG_STAR)//后援会被动
		 	    {
		 	        new members = GetGangMembers(gangid);
		 	        switch(members)
		 	        {
		 	            case 0..3:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之110的加成", members);
		 	                SetGVarFloat("GangStar", 1.1, playerid);
		 	            }
		 	            case 4..6:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之120的加成", members);
		 	                SetGVarFloat("GangStar", 1.2, playerid);
		 	            }
		 	            case 7..10:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之130的加成", members);
		 	                SetGVarFloat("GangStar", 1.3, playerid);
		 	            }
		 	            case 11..15:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之145的加成", members);
		 	                SetGVarFloat("GangStar", 1.45, playerid);
		 	            }
		 	            case 16..20:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之160的加成", members);
		 	                SetGVarFloat("GangStar", 1.6, playerid);
		 	            }
                        case 21..25:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之180的加成", members);
		 	                SetGVarFloat("GangStar", 1.8, playerid);
		 	            }
		 	            default:
		 	            {
		 	                format(string, sizeof(string), ""#TEXT_WHITE"后援会被动: 目前帮会人数为%d人,你的攻击力获得了百分之200的加成", members);
		 	                SetGVarFloat("GangStar", 2.0, playerid);
		 	            }
		 	        }
		 	        SendClientMessage(playerid, COLOR_WHITE, string);
		 	    }
		 	}
		}
		if(PlayerHaveGift(playerid) > 0)
		{
		    SendClientMessage(playerid, COLOR_WHITE, "你有未领取的"#TEXT_YELLOW"奖励"#TEXT_WHITE",按N键在个人菜单选择奖励来领取");
		}
    }
    TogglePlayerControllableEx(playerid, 0, 1);
	SetPlayerTimerEx(playerid, "UnFreeze", 10000, 0, "i", playerid);
    SetPlayerWorldBounds(playerid, 4000.0, -4000.0, 4000.0, -4000.0);
    UpdatePlayerColor(playerid);
	return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{
	if(IsPlayerNPC(playerid)) return 1;
    new Float:px, Float:py, Float:pz, Float:pangle, sWorld, pint, weapons[11][2], i, j, string[144], hpid, rand;
	/*if(IsPlayerNPC(killerid))
	{
	    if(GetGVarInt("Pet", killerid) == 1)
		{
		    ClearNPCTarget(killerid);
		    killerid = GetGVarInt("PetOwner", killerid);
		}
	}*/

    if(phone_opened[playerid]) Phone_Close(playerid); // phone

	SetGVarInt("Spawned", 0, playerid);
	SetGVarInt("pTmpSTDH", 0, playerid);
	DeleteGVar("HPDelayed", playerid);
	DeleteGVar("pCmdTick", playerid);
    if(GetGVarInt("PCRoom", playerid) > 0) {LeaveClass(playerid);}
    if(GetGVarInt("TaxiOn", playerid) > 0) {TaxiStop(playerid, GetPlayerVehicleID(playerid));}
    if(GetGVarInt("TaxiCount", playerid) > 0) {PayTaxi(playerid);}
	if(GetGVarInt("BusOn", playerid) > 0) {StopBus(playerid, GetPlayerVehicleID(playerid));}
	if(GetGVarInt("AtkNZ", playerid) > 0) {PlayerLeaveNPCGangZone(playerid);}
	if(GetGVarInt("RangeShooting", playerid) == 1) { StopRange(playerid); }
	
	if(GetGVarInt("UsingRC", playerid) > 0)
	{
		SendClientMessage(playerid, COLOR_WHITE, "** 你因为死亡了所以结束了操控模式");
		SetPlayerExitRCVehicle(playerid);
	}
	if(GetGVarInt("Filming", playerid) > CAMERA_OFF)
	{
	    PlayerStopFilming(playerid);
	    if(GetGVarInt("TakingAngle", playerid) == 1)
	    {
	        DeleteGVar("TakingAngle", playerid);
	        DestroyDynamicObject(GetGVarInt("FilmOBJ", playerid));
	    }
	}
	if(GetGVarInt("UsingClone", playerid) == 1)
	{
		new clone = GetGVarInt("Clone", playerid);
		DeleteGVar("UsingClone", playerid);
		DeleteGVar("Cloning", clone);
		DestroyDynamicActor(clone);
	}
	if(GetGVarInt("ArmourSuit", playerid) == 1)
	{
	    DeleteGVar("ArmourSuit", playerid);
	}
	if(GetGVarInt("pCAnim", playerid) > 0)
	{
		StopPlayerCustomAnimation(playerid, INVALID_PLAYER_ID);
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    if((VehData[vehicleid][vType] == VTYPE_NONE || VehData[vehicleid][vType] == VTYPE_MW || VehData[vehicleid][vType] == VTYPE_ARENA) && VehData[vehicleid][vLock] > 0)
		{
		    SetVehicleLock(playerid, vehicleid, 0);
		}
	}
	PlayerData[playerid][pHealth] = (100.0 + PlayerData[playerid][pMaxHealth])/2;
	PlayerData[playerid][pArmour] = 0.0;
	GetPlayerPos_Out(playerid, px, py, pz);
	GetPlayerFacingAngle(playerid, pangle);
	sWorld = GetPlayerVirtualWorld(playerid);
	pint = GetPlayerInterior(playerid);

    if(GetGVarInt("Eventing", playerid) == 1)
	{
		static streak, score, eventid;
		eventid = GetGVarInt("EventID", playerid);
		if(Event[eventid][evStatus] == STATUS_STARTED)
		{
			switch(Event[eventid][evType])
			{
				case EVENT_VS:
				{
				    if(killerid != INVALID_PLAYER_ID)
			    	{
			    	    score = GetGVarInt("EventScore", killerid), streak = GetGVarInt("EventStreak", killerid);
			    	    score = score+1, streak = streak+1;
			    	    format(string, sizeof(string), "** 你击杀了%s而获得1分,目前你的分数为%d", PlayerData[playerid][pName], score);
			    	    SendClientMessage(killerid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你被%s击杀了,目前你的分数为%d", PlayerData[killerid][pName], GetGVarInt("EventScore", playerid));
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	    SetGVarInt("EventScore", score, killerid);
			    	    SetGVarInt("EventStreak", streak, killerid);
			    	    if(streak > 2)
			    	    {
			    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
			    	        SendEventMessage(eventid, COLOR_ORANGE, string);
			    	    }
			    	    if(score > GetGVarInt("EventHScore", eventid))
			    	    {
			    	        SetGVarInt("EventHScore", score, eventid);
			    	        if(GetGVarInt("EventHPlayer", eventid) != killerid)
			    	        {
				    	        SetGVarInt("EventHPlayer", killerid, eventid);
				    	        format(string, sizeof(string), "<<PvP活动>> 目前%s以%d分领先所有人", PlayerData[killerid][pName], score);
				    	        SendEventMessage(eventid, COLOR_YELLOW, string);
				    	    }
			    	    }
				        GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
				        ShowXTarget(killerid);
			    	}
			    	DeleteGVar("EventStreak", playerid);
				}
				case EVENT_SVS:
				{
				    if(killerid != INVALID_PLAYER_ID)
			    	{
			    	    new teamid = GetGVarInt("EventTeam", playerid);
			    	    score = GetGVarInt("TeamScore", teamid), streak = GetGVarInt("EventStreak", killerid);
			    	    score = score+1, streak = streak+1;
			    	    format(string, sizeof(string), "** %s 击杀了%s而为小队获得1分,目前小队分数为%d", PlayerData[killerid][pName], PlayerData[playerid][pName], score);
			    	    SendEventTeamMessage(eventid, teamid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你被%s击杀了", PlayerData[killerid][pName]);
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	    SetGVarInt("TeamScore", score, teamid);
			    	    SetGVarInt("EventStreak", streak, killerid);
			    	    if(streak > 2)
			    	    {
			    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
			    	        SendEventMessage(eventid, COLOR_ORANGE, string);
			    	    }
			    	    if(score > GetGVarInt("EventHScore", eventid))
			    	    {
			    	        SetGVarInt("EventHScore", score, eventid);
			    	        if(GetGVarInt("EventHTeam", eventid) != teamid)
			    	        {
				    	        SetGVarInt("EventHTeam", teamid, eventid);
				    	        format(string, sizeof(string), "<<PvP活动>> 目前%s所属的小队以%d分领先所有人", PlayerData[killerid][pName], score);
				    	        SendEventMessage(eventid, COLOR_YELLOW, string);
				    	    }
			    	    }
				        GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
				        ShowXTarget(killerid);
			    	}
			    	DeleteGVar("EventStreak", playerid);
				}
				case EVENT_TVS:
				{
				    if(killerid != INVALID_PLAYER_ID)
			    	{
			    	    streak = GetGVarInt("EventStreak", killerid);
			    	    if(GetGVarInt("EventTeam", killerid) == EVENT_TEAM_BLUE) SetGVarInt("BlueScore", GetGVarInt("BlueScore", eventid)+1, eventid);
			    	    else SetGVarInt("RedScore", GetGVarInt("RedScore", eventid)+1, eventid);

			    	    format(string, sizeof(string), "** 你击杀了%s而获得1分,目前的比数为"#TEXT_SKYBLUE"%d"#TEXT_WHITE":"#TEXT_FADERED"%d", PlayerData[playerid][pName], GetGVarInt("BlueScore", eventid), GetGVarInt("RedScore", eventid));
			    	    SendClientMessage(killerid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你被%s击杀了,目前的比数为"#TEXT_SKYBLUE"%d"#TEXT_WHITE":"#TEXT_FADERED"%d", PlayerData[killerid][pName], GetGVarInt("BlueScore", eventid), GetGVarInt("RedScore", eventid));
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	    SetGVarInt("EventStreak", streak, killerid);
			    	    if(streak > 2)
			    	    {
			    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
			    	        SendEventMessage(eventid, COLOR_ORANGE, string);
						}
						GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
				        ShowXTarget(killerid);
			    	}
			    	DeleteGVar("EventStreak", playerid);
				}
				case EVENT_SURVIVE:
				{
					//死亡掉落道具以及武器
				    for(i = 1; i < 10; i++)
					{
					    GetPlayerWeaponData(playerid, i, weapons[i][0], weapons[i][1]);
						if(weapons[i][1] != 0)
						{
						    if(weapons[i][1] > 9999) weapons[i][1] = 9999;
				            CreateDropItem(ITEM_WEAPON, weapons[i][0], weapons[i][1], px, py, pz, sWorld);
						}
					}
					for(i = 0, j = MAX_ITEMS; i < j; i++)
					{
						if(PlayerItems_USE[playerid][i][iuCount] > 0)
						{
							CreateDropItem(ITEM_USE, PlayerItems_USE[playerid][i][iuItemID], PlayerItems_USE[playerid][i][iuCount], px, py, pz, sWorld);
							PlayerItems_USE[playerid][i][iuID] =
							PlayerItems_USE[playerid][i][iuItemID] =
							PlayerItems_USE[playerid][i][iuCount] = 0;
						}
					}
					if(killerid != INVALID_PLAYER_ID)
			    	{
			    	    streak = GetGVarInt("EventStreak", killerid);
			    	    format(string, sizeof(string), "<<PvP活动>> %s使用%s击杀了%s,目前还剩下"#TEXT_WHITE"%d"#TEXT_YELLOW"名玩家", PlayerData[killerid][pName], WeaponsList[reason][wName], PlayerData[playerid][pName], Event[eventid][evPlayers]-1);
			    	    SendEventMessage(eventid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你被%s击杀了,你最后的名次为第"#TEXT_WHITE"%d"#TEXT_LIGHTORANGE"名", PlayerData[killerid][pName], Event[eventid][evPlayers]);
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	    SetGVarInt("EventStreak", streak, killerid);
			    	    if(streak > 2)
			    	    {
			    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
			    	        SendEventMessage(eventid, COLOR_ORANGE, string);
			    	    }
			    	    GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
				        ShowXTarget(killerid);
			    	}
			    	else
			    	{
			    	    format(string, sizeof(string), "<<PvP活动>> %s死亡了,目前还剩下"#TEXT_WHITE"%d"#TEXT_YELLOW"名玩家", PlayerData[playerid][pName], Event[eventid][evPlayers]-1);
			    	    SendEventMessage(eventid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你死亡了,你最后的名次为第"#TEXT_WHITE"%d"#TEXT_LIGHTORANGE"名", Event[eventid][evPlayers]);
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	}
			    	DeleteGVar("EventStreak", playerid);
				}
				case EVENT_TDM, EVENT_DM:
				{
				    if(killerid != INVALID_PLAYER_ID)
			    	{
			    	    streak = GetGVarInt("EventStreak", killerid);
			    	    format(string, sizeof(string), "** 你击杀了%s", PlayerData[playerid][pName]);
			    	    SendClientMessage(killerid, COLOR_YELLOW, string);
			    	    format(string, sizeof(string), "** 你被%s击杀了", PlayerData[killerid][pName]);
			    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
			    	    SetGVarInt("EventStreak", streak, killerid);
			    	    if(streak > 2)
			    	    {
			    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
			    	        SendEventMessage(eventid, COLOR_ORANGE, string);
			    	    }
			    	    GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
				        ShowXTarget(killerid);
			    	}
			    	DeleteGVar("EventStreak", playerid);
				}
				case EVENT_SDM:
				{
				    new teamid = GetGVarInt("EventTeam", playerid);
				    if(killerid != INVALID_PLAYER_ID)
				    {
				    	streak = GetGVarInt("EventStreak", killerid);
				    	format(string, sizeof(string), "** 你击杀了%s", PlayerData[playerid][pName]);
				    	SendClientMessage(killerid, COLOR_YELLOW, string);
				    	format(string, sizeof(string), "** %s 被%s击杀了", PlayerData[playerid][pName], PlayerData[killerid][pName]);
				    	SendEventTeamMessage(eventid, teamid, COLOR_LIGHTORANGE, string);
				    	SetGVarInt("EventStreak", streak, killerid);
				    	if(streak > 2)
				    	{
				    	    format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
				    	    SendEventMessage(eventid, COLOR_ORANGE, string);
				    	}
				    	GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
					    ShowXTarget(killerid);
				    }
				    DeleteGVar("EventStreak", playerid);
				}
				case EVENT_SSUR:
				{
				    new teamid = GetGVarInt("EventTeam", playerid);
				    for(i = 1; i < 10; i++)
					{
						GetPlayerWeaponData(playerid, i, weapons[i][0], weapons[i][1]);
						if(weapons[i][1] != 0)
						{
						    if(weapons[i][1] > 9999) weapons[i][1] = 9999;
					        CreateDropItem(ITEM_WEAPON, weapons[i][0], weapons[i][1], px, py, pz, sWorld);
						}
					}
					for(i = 0, j = MAX_ITEMS; i < j; i++)
					{
						if(PlayerItems_USE[playerid][i][iuCount] > 0)
						{
							CreateDropItem(ITEM_USE, PlayerItems_USE[playerid][i][iuItemID], PlayerItems_USE[playerid][i][iuCount], px, py, pz, sWorld);
							PlayerItems_USE[playerid][i][iuID] =
							PlayerItems_USE[playerid][i][iuItemID] =
							PlayerItems_USE[playerid][i][iuCount] = 0;
						}
					}
				    if(GetGVarInt("EvWounded", playerid) == 0)
				    {
				        SetGVarFloat("DeathX", px, playerid);
					    SetGVarFloat("DeathY", py, playerid);
					    SetGVarFloat("DeathZ", pz, playerid);
					    if(killerid != INVALID_PLAYER_ID)
			    		{
			    		    format(string, sizeof(string), "** 你击倒了%s", PlayerData[playerid][pName]);
				    	    SendClientMessage(killerid, COLOR_WHITE, string);
				    	    format(string, sizeof(string), "** %s 被%s击倒了", PlayerData[playerid][pName], PlayerData[killerid][pName]);
				    	    SendEventTeamMessage(eventid, teamid, COLOR_YELLOW, string);
				    	}
				    }
				    else
				    {
						if(killerid != INVALID_PLAYER_ID)
				    	{
				    	    streak = GetGVarInt("EventStreak", killerid);
				    	    format(string, sizeof(string), "<<PvP活动>> %s使用%s击杀了%s,目前还剩下"#TEXT_WHITE"%d"#TEXT_YELLOW"名玩家", PlayerData[killerid][pName], WeaponsList[reason][wName], PlayerData[playerid][pName], Event[eventid][evPlayers]-1);
				    	    SendEventMessage(eventid, COLOR_YELLOW, string);
				    	    format(string, sizeof(string), "** 你被%s击杀了,你最后的名次为第"#TEXT_WHITE"%d"#TEXT_LIGHTORANGE"名", PlayerData[killerid][pName], Event[eventid][evPlayers]);
				    	    SendEventTeamMessage(eventid, teamid, COLOR_LIGHTORANGE, string);
				    	    SetGVarInt("EventStreak", streak, killerid);
				    	    if(streak > 2)
				    	    {
				    	        format(string, sizeof(string), "<<PvP活动>> %s已经达到了%d连杀!", PlayerData[killerid][pName], streak);
				    	        SendEventMessage(eventid, COLOR_ORANGE, string);
				    	    }
				    	    GivePlayerCurrentWeaponSkill(killerid, 1+random(2));
					        ShowXTarget(killerid);
				    	}
				    	else
				    	{
				    	    format(string, sizeof(string), "<<PvP活动>> %s死亡了,目前还剩下"#TEXT_WHITE"%d"#TEXT_YELLOW"名玩家", PlayerData[playerid][pName], Event[eventid][evPlayers]-1);
				    	    SendEventMessage(eventid, COLOR_YELLOW, string);
				    	    format(string, sizeof(string), "** 你死亡了,你最后的名次为第"#TEXT_WHITE"%d"#TEXT_LIGHTORANGE"名", Event[eventid][evPlayers]);
				    	    SendClientMessage(playerid, COLOR_LIGHTORANGE, string);
				    	}
				    	DeleteGVar("EventStreak", playerid);
				    }
				}
			}
			SendEventDeathMessage(eventid, killerid, playerid, reason);
		}
	}
	else if(GetGVarInt("pArena", playerid) > 0)
	{
	    new arena = GetGVarInt("pArena", playerid),
			winner = GetGVarInt("ArenaWinner", arena);
		if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
		{
		    switch(arena)
		    {
		        case ARENA_VEHICLE:
		        {
		            new lowest = GetGVarInt("ArenaLowest", arena),
						death = GetGVarInt("pArenaDeath", playerid);
					SetGVarInt("pArenaDeath", death+1, playerid);
		            ForEachPlayer(p)
					{
					    if(GetGVarInt("pArena", p) == arena)
					    {
					        if(GetGVarInt("pArenaDeath", p) < lowest)
					        {
					            lowest = GetGVarInt("pArenaDeath", p),
					            winner = p;
					        }
					    }
					}
					SetGVarInt("ArenaWinner", winner, arena);
					SetGVarInt("ArenaLowest", lowest, arena);
					format(string, sizeof(string), "<<竞技场>> %s死亡了,目前最低死亡次数的玩家为%s,次数为%d", PlayerData[playerid][pName], PlayerData[winner][pName], lowest);
					SendArenaMessage(arena, COLOR_SKYBLUE, string);
		        }
		        case ARENA_PLAYER1, ARENA_PLAYER2:
		        {
		            new highest = GetGVarInt("ArenaHighest", arena),
						score = GetGVarInt("pArenaScore", killerid);
		            if(killerid != INVALID_PLAYER_ID)
					{
						SetGVarInt("pArenaScore", score+1, killerid);
						if(GetGVarInt("pArenaScore", killerid) > highest)
						{
							highest = GetGVarInt("pArenaScore", killerid),
							winner = killerid;
						}
						SetGVarInt("ArenaWinner", winner, arena);
						SetGVarInt("ArenaHighest", highest, arena);
						if(winner != -1)
						{
							format(string, sizeof(string), "<<竞技场>> %s击杀了%s,目前分数最高的玩家为%s,分数为%d", PlayerData[killerid][pName], PlayerData[playerid][pName], PlayerData[winner][pName], highest);
							SendArenaMessage(arena, COLOR_SKYBLUE, string);
						}
						GivePlayerCurrentWeaponSkill(killerid, 2+random(4));
					}
					else
					{
					    if(winner != -1)
						{
						    format(string, sizeof(string), "<<竞技场>> %s死亡了,目前分数最高的玩家为%s,分数为%d", PlayerData[playerid][pName], PlayerData[winner][pName], highest);
							SendArenaMessage(arena, COLOR_SKYBLUE, string);
						}
					}
		        }
		    }
		    SendArenaDeathMessage(arena, killerid, playerid, reason);
		}
	}
	else
	{
	    if(GetGVarInt("BlessedGang", PlayerData[playerid][pGang]) == 1)//复活
	    {
	        //DeleteGVar("BlessedGang", PlayerData[playerid][pGang]);
	        SetGVarInt("Revive", 1, playerid);
	        format(string, sizeof(string), "** 帮会成员%s因为神而将在死后原地重生", PlayerData[playerid][pName]);
			SendGangMessage(PlayerData[playerid][pGang], COLOR_FADEYELLOW, string);
			PlayerData[playerid][pX] = px,
			PlayerData[playerid][pY] = py,
			PlayerData[playerid][pZ] = pz,
			PlayerData[playerid][pAngle] = pangle;
			PlayerData[playerid][pWorld] = sWorld,
			PlayerData[playerid][pInterior] = pint;
			SaveWeaponData(playerid);
	        return 1;
	    }

	    SetGVarInt("Dead", 1, playerid);
	    if(killerid != INVALID_PLAYER_ID)
	    {
	        RecordData[killerid][prKill] ++;
	        rand = 1+random(2);
	        GivePlayerCurrentWeaponSkill(killerid, rand);
	        ShowXTarget(killerid);

	        if(GetGVarInt("AttackingTurf", playerid) > 0)//进犯地盘的玩家被杀
		    {
		        new gzid = GetGVarInt("AtkTurfID", playerid),
		            gangid = GangSqlIDToID(PlayerData[killerid][pGang]),
					gmid = PlayerIDToGangMember(killerid, gangid);
		    	if(GangZone[gzid][gzOwner] == PlayerData[killerid][pGang])
		    	{
					GangZone[gzid][gzDefense] += 60;
					if(GangZone[gzid][gzDefense] > GetDefaultGangZoneDefense(GangZone[gzid][gzLevel]))
					{
					    GangZone[gzid][gzDefense] = GetDefaultGangZoneDefense(GangZone[gzid][gzLevel]);
					}
					format(string, sizeof(string), "<<帮会>> %s 于"#TEXT_FADEGREEN"%s的地盘防守战"#TEXT_FADERED"击杀了敌对成员 %s", PlayerData[killerid][pName], GangZone[gzid][gzName], PlayerData[playerid][pName]);
					SendGangMessage(PlayerData[killerid][pGang], COLOR_FADERED, string);
					SendClientMessage(playerid, COLOR_YELLOW, "** 因为死亡的关系,你已经脱离了地盘战");
					DeleteGVar("AttackingTurf", playerid);
					HidePlayerTurfInfo(playerid);

					GangMember[gangid][gmid][gmPoint] ++;
					format(string, sizeof(string), "** 你于地盘战击杀了敌对帮会成员%s,获得帮会点数1点", PlayerData[playerid][pName]);
					SendClientMessage(killerid, COLOR_YELLOW, string);
				}
			}
			else if(GetGVarInt("AttackingTurf", killerid) > 0)//防守地盘玩家的玩家被杀
		    {
		        new gzid = GetGVarInt("AtkTurfID", killerid),
		            gangid = GangSqlIDToID(PlayerData[killerid][pGang]),
					gmid = PlayerIDToGangMember(killerid, gangid);
		    	if(GangZone[gzid][gzOwner] == PlayerData[playerid][pGang])
		    	{
					GangZone[gzid][gzDefense] -= 30;
					if(GangZone[gzid][gzDefense] < 0)
					{
					    GangZone[gzid][gzDefense] = 0;
					}
					format(string, sizeof(string), "<<帮会>> %s 于"#TEXT_YELLOW"%s的地盘侵略战"#TEXT_FADERED"击杀了敌对成员 %s", PlayerData[killerid][pName], GangZone[gzid][gzName], PlayerData[playerid][pName]);
					SendGangMessage(PlayerData[killerid][pGang], COLOR_FADERED, string);
					HidePlayerTurfInfo(playerid);

					GangMember[gangid][gmid][gmPoint] ++;
					format(string, sizeof(string), "** 你于地盘战击杀了敌对帮会成员%s,获得帮会点数1点", PlayerData[playerid][pName]);
					SendClientMessage(killerid, COLOR_YELLOW, string);
				}
			}
			else if(PlayerData[playerid][pWanted] > 0 && GetGVarInt("PoliceDuty", killerid) == 1)
			{
			    if(PlayerData[playerid][pRobbed] > 0)
				{
					SendClientMessage(playerid, COLOR_LIGHTRED, "** 你因为在通缉时被击杀,你之前抢劫得手的所有金额都已被扣押了");
					GiveMoney(playerid, -PlayerData[playerid][pRobbed]);
					Log(moneylog, INFO, "%s(%d)因为被逮捕而损失之前抢劫的所得$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pRobbed]);
					PlayerData[playerid][pRobbed] = 0;
				}
				GiveMoney(killerid, PlayerData[playerid][pWanted]*2000);
				Log(moneylog, INFO, "%s(%d)因为击杀犯人%s(%d)而获得奖金$%d", PlayerData[killerid][pName], PlayerData[killerid][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pWanted]*2000);
     			GivePlayerExp(killerid, PlayerData[playerid][pWanted]*500, EXP_ARREST);
				format(string, sizeof(string), "<<部门>> %s 将%d星通缉犯 %s 击毙了", PlayerData[killerid][pName], PlayerData[playerid][pWanted], PlayerData[playerid][pName]);
				SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
				format(string, sizeof(string), "** 你被警官 %s 击杀了", PlayerData[killerid][pName]);
				SendClientMessage(playerid, COLOR_FADERED, string);
				format(string, sizeof(string), "** 你将通缉犯 %s 击毙了,获得了奖金$%d", PlayerData[playerid][pName], PlayerData[playerid][pWanted]*2000);
				SendClientMessage(killerid, COLOR_FADEBLUE, string);
				SendClientMessage(killerid, COLOR_WHITE, "** 请记得前往监狱内"#TEXT_FADEGREEN"锁定"#TEXT_WHITE"犯人来搜查其身上是否有违禁品");
				SetGVarInt("Arrested", 1, playerid);
			}
			else if(PlayerData[playerid][pBounty] > 0 && PlayerData[killerid][pLevel] > 14)
			{
			    if(PlayerData[killerid][pID] == PlayerData[playerid][pBountySender])
			    {
			        SendClientMessage(killerid, COLOR_WHITE, "** 你不能从自己发起的悬赏目标获得赏金");
			    }
			    else
			    {
	                format(string, sizeof(string), "<<悬赏>> 悬赏目标 %s 已经被击杀,赏金已被取走", PlayerData[playerid][pName]);
				    SendBountyMessage(COLOR_WHITE, string);
				    format(string, sizeof(string), "** 你击杀了悬赏目标 %s ,获得了赏金$%d", PlayerData[playerid][pName], PlayerData[playerid][pBounty]);
				    SendClientMessage(killerid, COLOR_YELLOW, string);
				    format(string, sizeof(string), "** 你于悬赏期间被击杀,损失了现金$%d", PlayerData[playerid][pBounty]);
				    SendClientMessage(playerid, COLOR_YELLOW, string);
				    GiveMoney(playerid, -PlayerData[playerid][pBounty]);
				    GiveMoney(killerid, PlayerData[playerid][pBounty]);
				    Log(moneylog, INFO, "%s(%d)于悬赏期间被击杀,损失了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pBounty]);
				    Log(moneylog, INFO, "%s(%d)击杀被悬赏的%s(%d),获得了赏金$%d", PlayerData[killerid][pName], PlayerData[killerid][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pBounty]);
					ClearPlayerBounty(playerid);
					LimitData[playerid][plCDBounty] = 3600;
				}
			}
			else
			{
				new Float:px2, Float:py2, Float:pz2;
				if(PlayerData[killerid][pJail] > 0)
				{
				    if(GetGVarInt("JailQKing", playerid) > 0)
				    {
					    SpawnPlayer(killerid);
					    SendClientMessage(killerid, COLOR_YELLOW, "** 你因为在入狱放风期间杀害其他玩家而被送回牢房,服刑时间增加了120秒,并重置放风时间");
					}
					else SendClientMessage(killerid, COLOR_YELLOW, "** 你因为在入狱期间杀害其他玩家,服刑时间增加了120秒,并重置放风时间");
					SetGVarInt("JailQK", 300, playerid);
					PlayerData[killerid][pJail] += 120;
				}
				if(PlayerData[playerid][pLevel] < 15 && PlayerData[killerid][pLevel] > 14)
				{
					new nkill = GetGVarInt("KillNewbie", killerid);
					if(nkill == 3)
					{
					    if(PlayerData[killerid][pBounty] < 10000) SetPlayerBounty(killerid, PlayerData[killerid][pBounty]+5000, 3600);
					    else SetPlayerBounty(killerid, 10000, PlayerData[killerid][pBountyTime]+1800);
					    SendClientMessage(killerid, COLOR_YELLOW, "** 因为你连续恶意杀害新手玩家,所以被发起悬赏作为惩罚");
					    DeleteGVar("KillNewbie", killerid);
					}
					else
					{
						SetGVarInt("KillNewbie", nkill+1, killerid);
						SendClientMessage(killerid, COLOR_YELLOW, "** 注意: 请勿恶意杀害等级15以下的新手玩家,否则将受到特定惩罚");
					}
					SendClientMessage(playerid, COLOR_NURSEPINK, "** 注意: 若遭到恶意杀害,请立即前往电话亭按Y键通话或是使用手机报警");
				}
				if(PlayerData[playerid][pJail] == 0)
				{
					GetPlayerPos(playerid, px2, py2, pz2);
					if(GetPlayerDistanceFromPointEx(killerid, px2, py2, pz2) < 50.0)
					{
		            	SetPlayerCrime(killerid, CRIME_KILL, VICTIM_PLAYER, playerid, reason, px2, py2, pz2);//杀害罪行
		            }
		        }
	        }
	    }

	    new mission = GetGVarInt("Mission", playerid);
	    if(mission > 0)
		{
		    if(MissionsList[mission][msType] == MISSION_GLOBAL) PlayerStopMission(playerid, 1);
		}

		hpid = GetNearestHospital(px, py, pz);
	    PlayerData[playerid][pX] = HospitalPos[hpid][0],
		PlayerData[playerid][pY] = HospitalPos[hpid][1],
		PlayerData[playerid][pZ] = HospitalPos[hpid][2],
		PlayerData[playerid][pAngle] = HospitalPos[hpid][3];
		PlayerData[playerid][pWorld] =
		PlayerData[playerid][pInterior] = 0;

	    RecordData[playerid][prDeath] ++;

	    SetGVarInt("GPS3", 1, playerid);
	    SetPlayerMapIcon(playerid, 97, px, py, pz, 23, COLOR_WHITE, MAPICON_GLOBAL);
	    SetGVarFloat("DeathX", px, playerid);
	    SetGVarFloat("DeathY", py, playerid);
	    SetGVarFloat("DeathZ", pz, playerid);
	    SetGVarInt("DeathGPSTimer", 300, playerid);

	    for(i = 1; i < 10; i++)
		{
		    GetPlayerWeaponData(playerid, i, weapons[i][0], weapons[i][1]);
			if(weapons[i][1] > 0)
			{
			    if(weapons[i][1] > 9999) weapons[i][1] = 9999;
	            CreateDropItem(ITEM_WEAPON, weapons[i][0], weapons[i][1], px, py, pz, sWorld);
			}
		}
		ClearAllWeapon(playerid);
		DeleteGVar("PoliceDuty", playerid);
		DeleteGVar("MedicDuty", playerid);
		DeleteGVar("KillNewbie", playerid);

		if(GetGVarInt("PlayerMW", playerid) == 1)
		{
		    new mwid = GetGVarInt("PlayerMWID", playerid);
		    ShowPTD(playerid, 4, 0);
		    PlayerDropMatWar(playerid);
			format(string, sizeof(string), "** "#TEXT_YELLOW"你身上的"#TEXT_FADERED"%s"#TEXT_YELLOW"掉出来了", ItemsList_USE[MatWar[mwid][mwMatID]][iuName]);
			SendClientMessage(playerid, COLOR_RED, string);
		}

	    //race
	    if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)
		{
		    static raceid;
		    raceid = GetGVarInt("RaceID", playerid);
		    PlayerLeaveRace(playerid, raceid);
			SendClientMessage(playerid, COLOR_FADERED, "** 你因为死亡了,所以失去比赛资格");
		}
	}
	if(killerid != INVALID_PLAYER_ID)
	{
		Log(deathlog, INFO, "%s(%d)杀了%s(%d),原因(Reason)为:%d", PlayerData[killerid][pName], PlayerData[killerid][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], reason);
	}
	else
	{
	    Log(deathlog, INFO, "%s(%d)死亡了,原因(Reason)为:%d", PlayerData[playerid][pName], PlayerData[playerid][pID], reason);
	}
	return 1;
}

public OnVehicleSpawn(vehicleid)
{
	if(VehData[vehicleid][vModel] != 0)
	{
		new engine, lights, alarm, doors, bonnet, boot, objective;
		SetVehiclePos(vehicleid, VehData[vehicleid][vX], VehData[vehicleid][vY], VehData[vehicleid][vZ]);
		SetVehicleZAngle(vehicleid, VehData[vehicleid][vA]);

		ChangeVehicleColor(vehicleid, VehData[vehicleid][vColor1], VehData[vehicleid][vColor2]);

		if(!IsABike(vehicleid)) {

			SetVehicleHealth(vehicleid, VehData[vehicleid][vHealth]);
			SetVehicleModifications(vehicleid);
			SetVehiclePlate(vehicleid, VehData[vehicleid][vPlate]);

			if(VehData[vehicleid][vPaintjob] != 3){
				ChangeVehiclePaintjob(vehicleid, VehData[vehicleid][vPaintjob]);
			}

			GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			if(VehData[vehicleid][vTrunk] == 1) boot = 1;
			if(VehData[vehicleid][vHood] == 1) bonnet = 1;
			SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			if(VehData[vehicleid][vType] != 0) {UpdateVehicleDamageStatus(vehicleid, VehData[vehicleid][vPanelStat], VehData[vehicleid][vDoorStat], VehData[vehicleid][vLightStat], VehData[vehicleid][vTireStat]);}
			if(VehData[vehicleid][vTaxi] != 0)
			{
				RemoveVehicleAttachment(vehicleid, ATTACH_TAXI);
				SetVehicleAttachment(vehicleid, ATTACH_TAXI);
			}
			if(VehData[vehicleid][vPolice] != 0)
			{
				RemoveVehicleAttachment(vehicleid, ATTACH_SIREN);
				SetVehicleAttachment(vehicleid, ATTACH_SIREN);
			}
		}

		if(VehData[vehicleid][vStatus] == VEH_STOLEN || VehData[vehicleid][vStatus] == VEH_STORED || VehData[vehicleid][vStatus] == VEH_DESTROYED)
		{
			SetVehicleVirtualWorld(vehicleid, 99);
			return 0;
		}
		else if(VehData[vehicleid][vStatus] == VEH_UNDELIVERED)
		{
			SetVehicleVirtualWorld(vehicleid, 0);
			VehData[vehicleid][vStatus] = VEH_NORMAL;
		}
	}
	return 1;
}

stock bool:IsVehicleOccupied(vehicleid, driveronly=0)
{
	ForEachPlayer(i)
	{
	    if(!IsPlayerInAnyVehicle(i)) continue;
	    if(GetPlayerVehicleID(i) == vehicleid)
	    {
	        switch(GetPlayerVehicleSeat(i))
	        {
	            case -1: continue;
	            case 0: return true;
	            default:
	            {
	                if(driveronly == 0) return true;
	            }
	        }
	    }
	}
	return false;
}

public OnVehicleStreamIn(vehicleid, forplayerid)
{
    new Float:distance = GetVehicleDistanceFromPoint(vehicleid, VehData[vehicleid][vX], VehData[vehicleid][vY], VehData[vehicleid][vZ]);
	if(distance < 3.0 && GetGVarInt("Occupied", vehicleid) == 0)
	{
		SetVehicleZAngle(vehicleid, VehData[vehicleid][vA]);
	}
    return 1;
}

public OnVehicleStreamOut(vehicleid, forplayerid)
{
	if(GetGVarInt("VUnStreamDel", vehicleid) == 1 && GetGVarInt("Occupied", vehicleid) == 0){
		DeleteVehicle(vehicleid);
		return 1;
	}
    if(vehicleid == GetGVarInt("VehXOnUns", forplayerid))
    {
        DestroyVehicle(vehicleid);
        DeleteGVar("VehXOnUns", forplayerid);
    }
    if(vehicleid == GetGVarInt("DelVehOnUns", forplayerid))
    {
        DeleteVehicle(vehicleid);
        DeleteGVar("DelVehOnUns", forplayerid);
    }
    return 1;
}

public OnVehicleDeath(vehicleid, killerid)
{
	new string[144], Float:vx, Float:vy, Float:vz;
	GetVehiclePos(vehicleid, vx, vy, vz);
	if(GetGVarInt("Logged", killerid) == 1)
	{
	    if(VehData[vehicleid][vType] == VTYPE_MISSION)
		{
			new mission = GetGVarInt("VehMission", vehicleid);
			DeleteVehicle(vehicleid);
			switch(mission)
			{
			    case 20,22,23,26://Simeon M1,M3, Trevor M1, Cesar M1
			    {
			        format(string, sizeof(string), ""#TEXT_RED"因为目标车辆被摧毁了,任务失败");
			        SendMissionMessage(mission, COLOR_WHITE, string);
	                StopGlobalMission(mission, 1);
			    }
			    case 21://Simeon M2
			    {
			        //format(string, sizeof(string), "%s 摧毁了一辆"#TEXT_YELLOW"目标车辆", PlayerData[killerid][pName]);
			        //SendMissionMessage(mission, COLOR_WHITE, string);
			        //UpdateGlobalMission(21, 3);
			    }
			    case 29, 35:
			    {
			        if(GetGVarInt("MissionTarget", mission) == vehicleid)
			        {
			            format(string, sizeof(string), ""#TEXT_RED"因为目标车辆被摧毁了,任务失败");
				        SendMissionMessage(mission, COLOR_WHITE, string);
		                StopGlobalMission(mission, 1);
			        }
			    }
			    case 32:
			    {
			        if(GetGVarInt("MSRunnerVeh", mission) == vehicleid)
			        {
			            format(string, sizeof(string), ""#TEXT_RED"因为目标的逃亡载具被摧毁了,现在无法得知目标的目的地了,任务失败");
				        SendMissionMessage(mission, COLOR_WHITE, string);
		                StopGlobalMission(mission, 1);
			        }
			    }
			    case 33:
			    {
			        if(GetGVarInt("MSVehLoaded", vehicleid) == 1)
			        {
			            format(string, sizeof(string), ""#TEXT_RED"装有补给品的飞机被摧毁了,任务失败");
				        SendMissionMessage(mission, COLOR_WHITE, string);
		                StopGlobalMission(mission, 1);
			        }
			    }
			}
		}
		else if(GetGVarInt("RaceVeh", killerid) == vehicleid && GetGVarInt("Racing", killerid) != STATUS_FINISHED)
		{
		    new raceid = GetGVarInt("RaceID", killerid);
		    PlayerLeaveRace(killerid, raceid);
			SendClientMessage(killerid, COLOR_WHITE, ""#TEXT_RED"你因为损毁了你的比赛载具,所以失去比赛资格");
		}
		else if(GetGVarInt("FisherBoat", killerid) == vehicleid && GetGVarInt("SellingFish", killerid) == 1)
		{
		    Fishery[killerid] = EMPTY_FISHERY;
		    DeleteGVar("FisherBoat", killerid);
		    DeleteGVar("SellingFish", killerid);
		    DisablePlayerCheckpoint(killerid);
		    ShowPTD(killerid, 1, 0);
			SendClientMessage(killerid, COLOR_WHITE, "你的渔船连同你的鱼货一起被摧毁了");
		}
		else
		{
		    if(VehData[vehicleid][vType] == VTYPE_MW)
		    {
		        new mwid = GetGVarInt("VehMW", vehicleid);
		        DeleteGVar("VehMW", vehicleid);
		        DeleteGVar("VehMWLoaded", vehicleid);
		        DeleteVehicle(vehicleid);
		        format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的载具被摧毁了,这个货物战争结束", MatWar[mwid][mwMatAmount], ItemsList_USE[MatWar[mwid][mwMatID]][iuName]);
				SendMatWarMessage(COLOR_WHITE, string);
				ShowPTD(killerid, 4, 0);
		        EndMatWar(mwid);
		    }
		    else if(VehData[vehicleid][vType] == VTYPE_ARENA)
			{
			}
		    else if(VehData[vehicleid][vType] == VTYPE_RC)
			{
				new ownerid = GetGVarInt("RCOwner", vehicleid);
				if(GetGVarInt("UsingRC", ownerid) > 0)
				{
				    SetPlayerExitRCVehicle(ownerid);
				    SendClientMessage(ownerid, COLOR_WHITE, "因为你的遥控玩具坏掉了所以不得不收回了");
				}
			}
		    else if(VehData[vehicleid][vType] != VTYPE_NONE && VehData[vehicleid][vType] != VTYPE_RENT)
		    {
		       	if(GetGVarInt("SellCar", killerid) == vehicleid)
		        {
		            DeletePlayerSellCar(killerid);
		    	    LimitData[killerid][plCarSellModel] =
					LimitData[killerid][plCarSellPrice] = 0;
		    	    SendClientMessage(killerid, COLOR_WHITE, "你摧毁了你要贩售的车辆,你得重新请求一辆新的车辆了");
		    	}
		    	else
		    	{
		    	    switch(VehData[vehicleid][vType])
		    	    {
		    	        case VTYPE_PLAYER:
		    	        {
		    	            if(IsPlayerVehicle(killerid, vehicleid))
							{
								SendClientMessage(killerid, COLOR_WHITE, "你摧毁了你的载具,你可以联络摩斯姆通保险来支付保险金取得替代载具");
								VehData[vehicleid][vDeductible] = VehData[vehicleid][vPrice]/100;
								Log(vehlog, INFO, "玩家载具%s(%d)已被%s(%d)损毁", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[killerid][pName], PlayerData[killerid][pID]);
							}
		    	        }
		    	        case VTYPE_COMPANY:
		    	        {
		    	            if(IsCompanyVehicle(PlayerData[killerid][pCompany], vehicleid))
					        {
								SendClientMessage(killerid, COLOR_WHITE, "你摧毁了企业的载具,你可以联络摩斯姆通保险来支付保险金取得替代载具");
								VehData[vehicleid][vDeductible] = VehData[vehicleid][vPrice]/100;
								Log(vehlog, INFO, "企业载具%s(%d)已被%s(%d)损毁", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[killerid][pName], PlayerData[killerid][pID]);
							}
		    	        }
		    	        case VTYPE_GANG:
		    	        {
		    	            if(IsGangVehicle(PlayerData[killerid][pGang], vehicleid))
							{
								SendClientMessage(killerid, COLOR_WHITE, "你摧毁了帮会的载具,你可以联络摩斯姆通保险来支付保险金取得替代载具");
								VehData[vehicleid][vDeductible] = 0;
								Log(vehlog, INFO, "帮会载具%s(%d)已被%s(%d)损毁", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[killerid][pName], PlayerData[killerid][pID]);
							}
		    	        }
		    	        case VTYPE_DEPARTMENT:
		    	        {
		    	            if(IsDepartmentVehicle(PlayerData[killerid][pDepartment], vehicleid))
					        {
								SendClientMessage(killerid, COLOR_WHITE, "你摧毁了所属部门的载具,你可以联络摩斯姆通保险来支付保险金取得替代载具");
								VehData[vehicleid][vDeductible] = 0;
								Log(vehlog, INFO, "公部门载具%s(%d)已被%s(%d)损毁", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[killerid][pName], PlayerData[killerid][pID]);
							}
		    	        }
		    	    }
		    	    if(VehData[vehicleid][vDeductible] > 10000) VehData[vehicleid][vDeductible] = 10000;
			        VehData[vehicleid][vStatus] = VEH_DESTROYED;
					SetVehicleToRespawn(vehicleid);
		    	}
		    	if(GetVehicleUsedSpace(vehicleid) > 0)
		        {
		            DeleteAllVehicleItems(vehicleid);
					SendClientMessage(killerid, COLOR_WHITE, "载具内的所有物品都被摧毁了");
		        }
		    }
		}
	}
	return 1;
}

public OnPlayerText(playerid, text[])
{
	new string[144], playername[MAX_PLAYER_NAME];
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    if(GetGVarInt("Eventing", playerid) == 1 && GetGVarInt("EventTeam", playerid) != NO_TEAM)
    {
        format(string, sizeof(string), "[活动小队] %s(%d):"#TEXT_WHITE" %s", playername, playerid, text);
        SendEventTeamMessage(GetGVarInt("EventID", playerid), GetGVarInt("EventTeam", playerid), COLOR_SKYBLUE, string);
        Log(chatlog, INFO, "[活动小队] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], text);
    }
    else
    {
	    if(GetGVarInt("PhoneChat", playerid) == 1)
	    {
	        new callto = GetGVarInt("Calling", playerid), callername[MAX_PLAYER_NAME];
	        GetPlayerName(callto, callername, MAX_PLAYER_NAME);
	        if(GetGVarInt("PhoneSpeaker", callto) == 1)
	        {
	            format(string, sizeof(string), "<<%s的手机>> %s 说: %s", playername, callername, text);
	            SendRangeMessage(20.0, callto, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
	        }
	        else
	        {
	            format(string, sizeof(string), "<<通话>> %s 说: %s", playername, text);
	            SendClientMessage(callto, COLOR_FADEYELLOW, string);
	        }
	        format(string, sizeof(string), "%s(%d) 对手机说: %s", playername, playerid, text);
	    }
	    else {format(string, sizeof(string), "%s(%d) 说: %s", playername, playerid, text);}
		SendRangeMessage(20.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		SetPlayerChatBubble(playerid, string, COLOR_GRAD2, 25.0, 10000);
		Log(chatlog, INFO, "%s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], text);
	}
 	if(GetGVarInt("PetCalled", playerid) == 1)
	{
	    new Float:ax, Float:ay, Float:az,
	    petid = GetGVarInt("CurrentPetID", playerid);
	    FCNPC_GetPosition(PetData[playerid][petid][petNPC], ax, ay, az);
	    if(GetPlayerDistanceFromPointEx(playerid, ax, ay, az) < 50.0 && FCNPC_GetHealth(PetData[playerid][petid][petNPC]) > 0.0)
	    {
	        new petname[25], petcmd[65], foundid;
	        sscanf(text, "s[24]s[64]", petname, petcmd);
	        if(strcmp(petname, PetData[playerid][petid][petName], true) == 0 && !isnull(petname) && !isnull(petcmd))
	        {
		        if(strcmp(petcmd, PetData[playerid][petid][petComeCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{//come CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_COME))
					{
						NPCToTarget(PetData[playerid][petid][petNPC], TARGET_PLAYER, playerid, 0);
						DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
					}
					UpdatePlayerMission(playerid, 14, 9);
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petFollowCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// follow CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_FOLLOW))
					{
                        NPCToTarget(PetData[playerid][petid][petNPC], TARGET_PLAYER, playerid, 0, 0, 1);
						DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petStayCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// stay CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_STAY))
					{
						ClearNPCTarget(PetData[playerid][petid][petNPC]);
						SetGVarInt("ActorNPC", 1, PetData[playerid][petid][petNPC]);
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petEatCMD], true) == 0)
				{// eat CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_EAT))
				    {
						if(PetData[playerid][petid][petHunger] > 99.0)
						{
						    ApplyAnimation(PetData[playerid][petid][petNPC], "playidles", "strleg", 4.1, 0, 0, 0, 0, 0);
							SendClientMessage(playerid, COLOR_WHITE, "你的宠物摇了摇头,表示他不饿");
						}
						else
						{
					        foundid = GetNearestFood_NPC(PetData[playerid][petid][petNPC], 30.0);
							if(foundid == -1)
							{
								ApplyAnimation(PetData[playerid][petid][petNPC], "playidles", "strleg", 4.1, 0, 0, 0, 0, 0);
								SendClientMessage(playerid, COLOR_WHITE, "你的宠物摇了摇头,好像找不到食物");
								ClearNPCTarget(PetData[playerid][petid][petNPC]);
							}
							else
							{
							    NPCToTarget(PetData[playerid][petid][petNPC], TARGET_DROP, foundid, 1);
							}
						}
						UpdatePlayerMission(playerid, 14, 12);
				    }
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petAttackCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// attack CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_ATK))
					{
					    DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
         				if(!FCNPC_IsMoving(PetData[playerid][petid][petNPC]))
						{
						    SendClientMessage(playerid, COLOR_WHITE, "** 你对宠物下达了攻击指令,你的宠物将会攻击你下一个"#TEXT_FADEGREEN"锁定"#TEXT_WHITE"的玩家或动物");
						    SetGVarInt("PetAttack", 1, playerid);
						}
						else
						{
						    SetGVarInt("NPCAttack", 1, PetData[playerid][petid][petNPC]);
						}
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petTDropCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// trace drop CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_TDROP))
				    {
				        DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
				        foundid = GetNearestDrop_NPC(PetData[playerid][petid][petNPC], 300.0);
						if(foundid == -1)
						{
							ApplyAnimation(PetData[playerid][petid][petNPC], "playidles", "strleg", 4.1, 0, 0, 0, 0, 0);
							SendClientMessage(playerid, COLOR_WHITE, "你的宠物摇了摇头,好像找不到掉落物");
							ClearNPCTarget(PetData[playerid][petid][petNPC]);
						}
						else
						{
						    NPCToTarget(PetData[playerid][petid][petNPC], TARGET_DROP, foundid, 0, 1);
						}
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petTAnimalCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// trace animal CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_TANIMAL))
				    {
				        DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
				        foundid = GetNearestAnimal_NPC(PetData[playerid][petid][petNPC], 300.0);
      					if(foundid == -1)
						{
							ApplyAnimation(PetData[playerid][petid][petNPC], "playidles", "strleg", 4.1, 0, 0, 0, 0, 0);
							SendClientMessage(playerid, COLOR_WHITE, "你的宠物摇了摇头,好像找不到动物");
							ClearNPCTarget(PetData[playerid][petid][petNPC]);
						}
						else
						{
						    NPCToTarget(PetData[playerid][petid][petNPC], TARGET_NPC, foundid, 0, 1);
						}
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petTPlayaCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// trace player CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_TPLAYER))
				    {
				        DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
					    foundid = GetNearestPlayer_NPC(PetData[playerid][petid][petNPC], 300.0, playerid);
						if(foundid == INVALID_PLAYER_ID)
						{
							ApplyAnimation(PetData[playerid][petid][petNPC], "playidles", "strleg", 4.1, 0, 0, 0, 0, 0);
							SendClientMessage(playerid, COLOR_WHITE, "你的宠物摇了摇头,好像找不到玩家");
							ClearNPCTarget(PetData[playerid][petid][petNPC]);
						}
						else
						{
          					NPCToTarget(PetData[playerid][petid][petNPC], TARGET_PLAYER, foundid, 0, 1);
						}
					}
				}
				else if(strcmp(petcmd, PetData[playerid][petid][petSwitchCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// switch CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_SWITCH))
				    {
				        static animalid, pettimer;
				        animalid = PetData[playerid][petid][petAnimal];
				        if(GetGVarInt("PlayerAnimal", playerid) == 0)
				        {
				            if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
							{
								SendClientMessage(playerid, COLOR_WHITE, "必须在步行状态才能切换");
								return 0;
							}
					        SetPlayerSkin_Fix(playerid, AnimalsList[animalid][amlModel]);
							SetGVarInt("PlayerAnimal", animalid, playerid);
							FCNPC_Destroy(PetData[playerid][petid][petNPC]);
							pettimer = GetGVarInt("PetTimer", playerid);
		        			KillTimer(pettimer);
							DeleteGVar("PetTimer", playerid);
					        DeleteGVar("PetCalled", playerid);
					        DeleteGVar("Animal", PetData[playerid][petid][petNPC]);
						    DeleteGVar("PetOwner", PetData[playerid][petid][petNPC]);
						    DeleteGVar("Pet", PetData[playerid][petid][petNPC]);
						    DeleteGVar("PetID", PetData[playerid][petid][petNPC]);
						    DeleteGVar("CurrentPetID", playerid);

							PetData[playerid][petid][petNPC] = CreateNPC(PlayerData[playerid][pSkin], 0, PetData[playerid][petid][petHealth], 0.0, ax, ay, az, 0.0, 0, 0);
					        SetGVarInt("PetOwner", playerid, PetData[playerid][petid][petNPC]);
					        SetGVarInt("Pet", 1, PetData[playerid][petid][petNPC]);
					        SetGVarInt("PetID", petid, PetData[playerid][petid][petNPC]);
					        pettimer = SetTimerEx("PetTimer", 60000, 1, "id", playerid, petid);
					        SetGVarInt("PetTimer", pettimer, playerid);
					        SetGVarInt("PetCalled", 1, playerid);
					        SetGVarInt("CurrentPetID", petid, playerid);
							SetGVarInt("Animal", 0, PetData[playerid][petid][petNPC]);

							SendClientMessage(playerid, COLOR_PINK, "** 你变成动物了,攻击变成动物撕咬,攻击到目标会恢复一半伤害的生命值");
							SendClientMessage(playerid, COLOR_PINK, "** 但无法上车,也无法持有武器");
						}
						else
				        {
					        SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
							DeleteGVar("PlayerAnimal", playerid);
							FCNPC_Destroy(PetData[playerid][petid][petNPC]);
							pettimer = GetGVarInt("PetTimer", playerid);
		        			KillTimer(pettimer);
							DeleteGVar("PetTimer", playerid);
					        DeleteGVar("PetCalled", playerid);
					        DeleteGVar("Animal", PetData[playerid][petid][petNPC]);
						    DeleteGVar("PetOwner", PetData[playerid][petid][petNPC]);
						    DeleteGVar("Pet", PetData[playerid][petid][petNPC]);
						    DeleteGVar("PetID", PetData[playerid][petid][petNPC]);
						    DeleteGVar("CurrentPetID", playerid);

							PetData[playerid][petid][petNPC] = CreateNPC(AnimalsList[animalid][amlModel], 0, PetData[playerid][petid][petHealth], 0.0, ax, ay, az, 0.0, 0, 0);

					        SetGVarInt("PetOwner", playerid, PetData[playerid][petid][petNPC]);
					        SetGVarInt("Pet", 1, PetData[playerid][petid][petNPC]);
					        SetGVarInt("PetID", petid, PetData[playerid][petid][petNPC]);
					        pettimer = SetTimerEx("PetTimer", 60000, 1, "id", playerid, petid);
					        SetGVarInt("PetTimer", pettimer, playerid);
					        SetGVarInt("PetCalled", 1, playerid);
					        SetGVarInt("CurrentPetID", petid, playerid);
							SetGVarInt("Animal", PetData[playerid][petid][petAnimal], PetData[playerid][petid][petNPC]);
							SendClientMessage(playerid, COLOR_WHITE, "你变回人类了");
						}
					}
				}

				else if(strcmp(petcmd, PetData[playerid][petid][petEggCMD], true) == 0 && PetData[playerid][petid][petHunger] > 0.0)
				{// egg CMD
				    if(CanPetUseSkill(playerid, petid, PET_SKILL_EGG))
					{
						if(PetData[playerid][petid][petEggTime] == 0)
						{
							CreateDropItem(ITEM_USE, 115, 1, ax, ay, az, 0);
							if(50 <= PetData[playerid][petid][petLove] < 70) PetData[playerid][petid][petEggTime] = 30;
							else if(70 <= PetData[playerid][petid][petLove] < 90) PetData[playerid][petid][petEggTime] = 20;
							if(90 < PetData[playerid][petid][petLove]) PetData[playerid][petid][petEggTime] = 10;
						}
						else
						{
							SendClientMessage(playerid, COLOR_WHITE, "你的宠物现在好像还生不出蛋");
							ClearNPCTarget(PetData[playerid][petid][petNPC]);
						}
					}
				}
			}
		}
	}
	return 0;
}

PUBLIC:OnAdminCreateVehicle(playerid, vehicleid)
{
	static str[144];
	format(str, 144, "顺利创建载具id: %d 数据库编号: %d", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_LIGHTRED, str);
}

//Commands

/*CMD:reserver(playerid, params[])
{
	#pragma unused params//传来的params没有用到 我们用#pragma unused 移除增加效率
    SetServerRestart();
    return 1;
}*/
/*CMD:testphone(playerid, params[])
{
    #pragma unused params
    Phone_Open(playerid);
    return 1;
}*/
CMD:moonlake(playerid, params[])
{
	#pragma unused params
    MoonLake();
    return 1;
}
CMD:rgrow(playerid, params[])
{
	#pragma unused params
    ResourceGrow();
    return 1;
}
CMD:myid(playerid, params[])
{
	#pragma unused params
    static string[144];
    format(string, sizeof(string), "**你的资料ID为 %d", PlayerData[playerid][pID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:myteam(playerid, params[])
{
	#pragma unused params
    static string[144];
    format(string, sizeof(string), "%d", GetPlayerTeam(playerid));
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:resetsystemdeal(playerid, params[])
{
	#pragma unused params
    static string[144];
    ResetSystemDeal();
    format(string, sizeof(string), "** 已刷新市场系统交易列表");
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:startmatwar(playerid, params[])
{
	#pragma unused params
    StartRandomMatWar();
    return 1;
}

CMD:testscene(playerid, params[])
{
    static scene;
	if(sscanf(params, "d", scene))
	{
		return 0;
	}
    ShowPlayerCameraScene(playerid, scene);
    return 1;
}

CMD:testpick(playerid, params[])
{
    new id, type, pickup, Float:px, Float:py, Float:pz;
	if(sscanf(params, "dd", id, type))
	{
		return 0;
	}
	pickup = GetGVarInt("TestPick");
    if(pickup > 0) DestroyDynamicPickup(pickup);
	GetPlayerPos(playerid, px, py, pz);
	pickup = CreateDynamicPickup(id, type, px, py, pz, GetPlayerVirtualWorld(playerid));
	SetGVarInt("TestPick", pickup);
    return 1;
}

CMD:isblocked(playerid, params[])
{
    static string[144], Float:cmd1, Float:cmd2;
	if(sscanf(params, "f", cmd1, cmd2))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「测试Blocked」 "#TEXT_GRAD"输入: /isblocked [dist] [height]");
	}
    format(string, sizeof(string), "%d", CA_IsPlayerBlocked(playerid, cmd1, cmd2));
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:mypetid(playerid, params[])
{
	#pragma unused params
    static string[144];
    format(string, sizeof(string), "**CurrentPetID = %d Called = %d", GetGVarInt("CurrentPetID", playerid), GetGVarInt("PetCalled", playerid));
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:actorpool(playerid, params[])
{
	#pragma unused params
	static string[144];
    format(string, sizeof(string), "%d", GetActorPoolSize());
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:3dtextpool(playerid, params[])
{
	#pragma unused params
	static string[144];
    format(string, sizeof(string), "%d", CountDynamic3DTextLabels());
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:testbigfoot(playerid, params[])
{
	#pragma unused params
	static bigfoot, string[144], rand;
    rand = random(sizeof(BigFootPos)),
	bigfoot = CreateNPC(25056, 0, 5000.0, 0.0, BigFootPos[rand][0], BigFootPos[rand][1], BigFootPos[rand][2], BigFootPos[rand][3], 0, 0);
	SetGVarInt("BigFootNPC", bigfoot);
	SetGVarInt("BigFootSpawned", 1);
	SetGVarInt("BigFootMoved", 1);
	SetGVarInt("Animal", 22, bigfoot);
	SetTimer("MoveBigFoot", 60000, 0);
	format(string, sizeof(string),  "%f %f %f", BigFootPos[rand][0], BigFootPos[rand][1], BigFootPos[rand][2]);
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:bt(playerid, params[])
{
	#pragma unused params
	BuryTreasure();
	return 1;
}

CMD:jpack(playerid, params[])
{
	#pragma unused params
	////SetCheatImmunity(playerid, 0, true);
	SetPlayerSpecialAction(playerid,SPECIAL_ACTION_USEJETPACK);
	return 1;
}

CMD:saveme(playerid, params[])
{
	#pragma unused params
    SavePlayerDatas(playerid);
    SendClientMessage(playerid, COLOR_GRAD1, "已储存资料");
    return 1;
}

CMD:savecar(playerid, params[])
{
	#pragma unused params
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `vehicledata`", "SaveVehicleData");
    return 1;
}

CMD:saveserver(playerid, params[])
{
	#pragma unused params
    SaveData();
    return 1;
}

CMD:amp3(playerid, params[])
{
	#pragma unused params
	ShowPlayerDialog(playerid, DIALOG_MP3, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"播放音乐", ""#TEXT_WHITE"请输入要播放的网址", "确认", "取消");
	return 1;
}

CMD:addpet(playerid, params[])
{
	static toplayer, animalid, love, string[144];
	if(sscanf(params, "ddd", toplayer, animalid, love))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「新增宠物」 "#TEXT_GRAD"输入: /addpet [主人玩家ID] [动物ID] [好感度]");
	}
	if(GetGVarInt("Logged", toplayer) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GivePlayerPet(animalid, toplayer, float(love));
	format(string, sizeof(string), "**确认: 已给予玩家(ID:%d)宠物%s", toplayer, AnimalsList[animalid][amlName]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:givexp(playerid, params[])
{
	static toplayer, exp, string[144];
	if(sscanf(params, "dd", toplayer, exp))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「修复技能」 "#TEXT_GRAD"输入: /fixskill [玩家ID] [经验值]");
	}
	if(GetGVarInt("Logged", toplayer) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GivePlayerExp(toplayer, exp, EXP_JOB);
	format(string, sizeof(string), "**确认: 已给予玩家(ID:%d)经验值%d", toplayer, exp);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:gangzone(playerid, params[])
{
	#pragma unused params
	new i, j, l, gzlist[1024], ownername[24];
	for(i = l = 0, j = MAX_GANGZONES; i < j; i++)
	{
		if(GangZone[i][gzCreated] == 0) { continue;}
		ownername[0] = EOS;
		if(GangZone[i][gzOwner] == GANG_ID_NONE) format(ownername, sizeof(ownername), "无");
		else format(ownername, sizeof(ownername), "%s", GangData[GangSqlIDToID(GangZone[i][gzOwner])][gName]);
		format(gzlist, sizeof(gzlist), "%s%s\t%s\t%d\t%d\n", gzlist, GangZone[i][gzName], ownername, GangZone[i][gzLevel], GangZone[i][gzDefense]);
		SetGVarInt("DListID", i, l*1000+playerid);
		l++;
	}
	if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "管理地盘", ""#TEXT_WHITE"目前没有任何地盘已被建立", "确定", "");}
	format(gzlist, sizeof(gzlist), "地盘名称\t所属帮会\t地盘等级\t防御度\n%s", gzlist);
	ShowPlayerDialog(playerid, DIALOG_GANGZONE, DIALOG_STYLE_TABLIST_HEADERS, "管理地盘", gzlist, "选择", "关闭");
	return 1;
}

CMD:addgangzone(playerid, params[])
{
	new type, name[25], level;
	if(sscanf(params, "ds[24]d", type, name, level))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「建立地盘」 "#TEXT_GRAD"输入: /addgangzone [收入种类] [名称] [等级]");
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"种类ID: 1 = 现金|2 = 木材|3 = 铁矿|4 = 硝石|5 = 石材");
	}
	if(GetGVarInt("AddingGZ", playerid) == 1)
	{
	    DeleteGVar("AddingGZ", playerid);
	    SendClientMessage(playerid, COLOR_WHITE, "** 你已取消增加帮会地盘的动作");
	}
	else
	{
		SetGVarInt("AddingGZ", 1, playerid);
		SetGVarString("GZName", name, playerid);
		SetGVarInt("GZType", type, playerid);
		SetGVarInt("GZLevel", level, playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你开始了新增帮会地盘的动作,请至暂停画面的地图到想要的坐标按右键标记地盘的西南边缘");
	}
	return 1;
}

CMD:setrace(playerid, params[])
{
	#pragma unused params
	ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
	return 1;
}

CMD:startrace(playerid, params[])
{
	new racelist[1024], i, j, l, hours, minutes, seconds, miliseconds, racername[MAX_PLAYER_NAME];
    for(i = l = 0, j = MAX_RACES; i < j; i++)
	{
		if(RaceData[i][rtType] == RACE_NONE) { continue;}
		racername[0] = EOS;
		MilisecondToHMS(RaceData[i][rtFastestTime], hours, minutes, seconds, miliseconds);
		if(RaceData[i][rtFastestRacer] == 0) format(racername, sizeof(racername), "无");
		else format(racername, sizeof(racername), "%s", GetPlayerSqlName(RaceData[i][rtFastestRacer]));
		format(racelist, sizeof(racelist), "%s%s\t%s\t%02d:%02d:%02d.%03d\n", racelist, RaceData[i][rtName], racername, hours, minutes, seconds, miliseconds);
		SetGVarInt("DListID", i, l*1000+playerid);
		l++;
	}
	if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"目前没有任何赛道已被建立", "确定", "");}
	format(racelist, sizeof(racelist), "赛道名称\t最快玩家\t最快时间\n%s", racelist);
	ShowPlayerDialog(playerid, DIALOG_STARTRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", racelist, "选择", "关闭");
	return 1;
}

CMD:event(playerid, params[])
{
	#pragma unused params
	ShowPlayerDialog(playerid, DIALOG_EVENT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"活动系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"开始新活动\n"#TEXT_YELLOW"目前进行中活动", "选择", "关闭");
	return 1;
}

CMD:setgift(playerid, params[])
{
	#pragma unused params
	ShowPlayerDialog(playerid, DIALOG_SETGIFT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_PINKRED"礼物系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增礼物\n管理等级奖励\n管理每日登入奖励\n管理指定日期奖励\n管理连续登入奖励", "选择", "关闭");
	return 1;
}

CMD:sound(playerid, params[])
{
	new cmdT;
	if(sscanf(params, "d", cmdT))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「播放音效」 "#TEXT_GRAD"输入: /sound [ID]");
	}
	PlayerPlaySound(playerid, cmdT, 0.0, 0.0, 0.0);
	return 1;
}

CMD:testanim(playerid, params[])
{
	new lib[16], file[16], loop;
	if(sscanf(params, "s[16]s[16]d", lib, file, loop))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「进行动作」 "#TEXT_GRAD"输入: /testanim [分类] [名称] [是否轮回]");
	}
	ApplyAnimation(playerid, lib, file, 4.1, loop, 0, 0, 0, 0, 0);
	return 1;
}

CMD:testcanim(playerid, params[])
{
	new id, toplayer;
	if(sscanf(params, "di", id, toplayer))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「进行动作」 "#TEXT_GRAD"输入: /testcanim [ID] [对象]");
	}
	OnPlayerStartCustomAnimation(playerid, id, toplayer);
	return 1;
}

CMD:mp3(playerid, params[])
{
	new cmdT[1025];
	if(sscanf(params, "s[1024]", cmdT))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「播放mp3」 "#TEXT_GRAD"输入: /mp3 [URL]");
	}
	PlayAudioStreamForPlayer(playerid, cmdT);
	return 1;
}

CMD:companyx(playerid, params[])
{
    new string[144], id;
    if(sscanf(params, "d", id))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「删除企业」 "#TEXT_GRAD"输入: /companyx [企业ID]");
	}
	if(CompanyData[id][comCreated] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该企业不存在");
	format(string, sizeof(string), "**确认: 已删除企业%s(%d)", CompanyData[id][comName], id);
	SendClientMessage(playerid, COLOR_WHITE, string);
	DeleteCompany(id);
	Log(companylog, INFO, "管理员%s(%d)将企业%s(%d)删除了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[id][comName], CompanyData[id][comID]);
	return 1;
}

CMD:gangx(playerid, params[])
{
    new string[144], id;
    if(sscanf(params, "d", id))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「删除帮会」 "#TEXT_GRAD"输入: /gangx [帮会ID]");
	}
	if(GangData[id][gCreated] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该帮会不存在");
	format(string, sizeof(string), "**确认: 已删除帮会%s(%d)", GangData[id][gName], id);
	SendClientMessage(playerid, COLOR_WHITE, string);
	DeleteGang(id);
	Log(ganglog, INFO, "管理员%s(%d)将帮会%s(%d)删除了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[id][gName], GangData[id][gID]);
	return 1;
}

CMD:setplayercompany(playerid, params[])
{
    new string[144], setid, comid;
	if(sscanf(params, "ud", setid, comid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「将玩家设为企业成员」 "#TEXT_GRAD"输入: /setplayercompany [玩家ID] [企业ID]");
	}
	if(GetGVarInt("Logged", setid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不在线");
	if(PlayerData[setid][pCompany] != COMPANY_ID_NONE)
	{
	    DeleteCompanyMember(CompanySqlIDToID(PlayerData[setid][pCompany]), PlayerData[setid][pID]);
	}
	if(comid == -1 || CompanyData[comid][comCreated] == 0)
	{
	    PlayerData[setid][pCompany] = COMPANY_ID_NONE;
	    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)企业设为无", PlayerData[setid][pName], setid);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else
	{
	    AddCompanyMember(comid, PlayerData[setid][pID], "指令加入", MEMBER_JOINED, 1);
	    PlayerData[setid][pCompany] = CompanyData[comid][comID];
	    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)设为企业%s成员", PlayerData[setid][pName], setid, CompanyData[comid][comName]);
		SendClientMessage(playerid, COLOR_WHITE, string);
		Log(companylog, INFO, "管理员%s(%d)将玩家%s(%d)设为企业%s(%d)的成员", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setid][pName], PlayerData[setid][pID], CompanyData[comid][comName], CompanyData[comid][comID]);
	}
    return 1;
}

CMD:setplayergang(playerid, params[])
{
    new string[144], setid, gangid;
	if(sscanf(params, "ud", setid, gangid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「将玩家设为帮会成员」 "#TEXT_GRAD"输入: /setplayergang [玩家ID] [帮会ID]");
	}
	if(GetGVarInt("Logged", setid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不在线");
	if(PlayerData[setid][pGang] != GANG_ID_NONE)
	{
	    DeleteGangMember(GangSqlIDToID(PlayerData[setid][pGang]), PlayerData[setid][pID]);
	}
	if(gangid == -1 || GangData[gangid][gCreated] == 0)
	{
	    PlayerData[setid][pGang] = GANG_ID_NONE;
	    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)帮会设为无", PlayerData[setid][pName], setid);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else
	{
	    AddGangMember(gangid, PlayerData[setid][pID], "指令加入", MEMBER_JOINED, 1);
	    PlayerData[setid][pGang] = GangData[gangid][gID];
	    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)设为帮会%s成员", PlayerData[setid][pName], setid, GangData[gangid][gName]);
		SendClientMessage(playerid, COLOR_WHITE, string);
		Log(ganglog, INFO, "管理员%s(%d)将玩家%s(%d)设为帮会%s(%d)的成员", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setid][pName], PlayerData[setid][pID], GangData[gangid][gName], GangData[gangid][gID]);
	}
    return 1;
}


CMD:setadmin(playerid, params[])
{
    new string[144], setid;
	if(sscanf(params, "u", setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「将玩家设为管理员」 "#TEXT_GRAD"输入: /setadmin [玩家ID]");
	}
	if(GetGVarInt("Logged", setid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不在线");
    PlayerData[setid][pAdmin] = 1;
    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)设为管理员", PlayerData[setid][pName], setid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 管理员%s将你设为管理员", PlayerData[playerid][pName]);
	SendClientMessage(setid, COLOR_WHITE, string);
    return 1;
}

CMD:setdept(playerid, params[])
{
	#pragma unused params
	new i, j, l, dplist[256], leader[24];
	dplist[0] = EOS;
	for(i = l = 0, j = MAX_DEPARTMENTS; i < j; i++)
	{
	    if(Department[i][dpCreated] == 0) continue;
	    if(Department[i][dpLeader] == -1) format(leader, sizeof(leader), "无");
	    else format(leader, sizeof(leader), "%s", GetPlayerSqlName(Department[i][dpLeader]));
		format(dplist, sizeof(dplist), "%s%s(%d)\t%s\t$%d\n", dplist, Department[i][dpName], i, leader, Department[i][dpFund]);
		SetGVarInt("DListID", i, l*1000+playerid);
		l++;
	}
	if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "公部门管理", ""#TEXT_WHITE"目前没有任何公部门", "确定", "");}
	format(dplist, sizeof(dplist), "部门(ID)\t领导\t资金\n%s", dplist);
	ShowPlayerDialog(playerid, DIALOG_DEPT, DIALOG_STYLE_TABLIST_HEADERS, "公部门管理", dplist, "选择", "关闭");
	return 1;
}

CMD:setplayerdept(playerid, params[])
{
    new string[144], setid, dpid;
	if(sscanf(params, "ud", setid, dpid))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「将玩家设为公部门成员」 "#TEXT_GRAD"输入: /setplayerdept [玩家ID] [部门ID]");
		return SendClientMessage(playerid, COLOR_GRAD1, "公部门ID: 0=无 1=警察 2=医生 3=政府 4=军人 5=辅导员");
	}
	if(dpid < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无效的公部门ID");
    PlayerData[setid][pDepartment] = dpid;
    PlayerData[setid][pDeptRank] = 1;
    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)设为部门%s成员", PlayerData[setid][pName], setid, Department[dpid][dpName]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 管理员%s将你设为部门%s成员", PlayerData[playerid][pName], Department[dpid][dpName]);
	SendClientMessage(setid, COLOR_WHITE, string);
	Log(deptlog, INFO, "管理员将%s(%d)设为部门%s(%d)的成员", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid);
    return 1;
}

CMD:setplayerdrank(playerid, params[])
{
    new string[144], setid, rank;
	if(sscanf(params, "ud", setid, rank))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家公部门阶级」 "#TEXT_GRAD"输入: /setplayerdrank [玩家ID] [阶级1~5]");
	}
	if(PlayerData[setid][pDeptRank] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不属于任何部门");
	if(rank < 1 || rank > 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 阶级只能设定在1~5之间");
    PlayerData[setid][pDeptRank] = rank;
    if(rank == 5) Department[PlayerData[setid][pDepartment]][dpLeader] = PlayerData[setid][pID];
    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)部门阶级设定为%d", PlayerData[setid][pName], setid, rank);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 管理员%s将你的部门阶级调整为R%d", PlayerData[playerid][pName], rank);
	SendClientMessage(setid, COLOR_WHITE, string);
	Log(deptlog, INFO, "管理员将%s(%d)的部门阶级设为%d", PlayerData[playerid][pName], PlayerData[playerid][pID], rank);
    return 1;
}

CMD:setplayercrank(playerid, params[])
{
    new string[144], setid, rank;
	if(sscanf(params, "ud", setid, rank))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家企业阶级」 "#TEXT_GRAD"输入: /setplayercrank [玩家ID] [阶级1~5]");
	}
	if(PlayerData[setid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不属于任何企业");
	if(rank < 1 || rank > 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 阶级只能设定在1~5之间");
	new comid = CompanySqlIDToID(PlayerData[setid][pCompany]),
	    cmid = PlayerIDToCompanyMember(setid, comid);
    CompanyMember[comid][cmid][cmRank] = rank;
    if(rank == 5) CompanyData[comid][comCEO] = PlayerData[setid][pID];
    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)企业阶级设定为%d", PlayerData[setid][pName], setid, rank);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 管理员%s将你的企业阶级调整为R%d", PlayerData[playerid][pName], rank);
	SendClientMessage(setid, COLOR_WHITE, string);
	Log(companylog, INFO, "管理员%s(%d)将玩家%s(%d)在企业%s(%d)的阶级调整为%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setid][pName], PlayerData[setid][pID], CompanyData[comid][comName], CompanyData[comid][comID], rank);
    return 1;
}

CMD:setplayergrank(playerid, params[])
{
    new string[144], setid, rank;
	if(sscanf(params, "ud", setid, rank))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家帮会阶级」 "#TEXT_GRAD"输入: /setplayergrank [玩家ID] [阶级1~5]");
	}
	if(PlayerData[setid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家不属于任何帮会");
	if(rank < 1 || rank > 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 阶级只能设定在1~5之间");
	new gangid = GangSqlIDToID(PlayerData[setid][pGang]),
	    gmid = PlayerIDToGangMember(setid, gangid);
    GangMember[gangid][gmid][gmRank] = rank;
    if(rank == 5) GangData[gangid][gBoss] = PlayerData[setid][pID];
    format(string, sizeof(string), "**确认: 已将玩家%s(ID%d)帮会阶级设定为%d", PlayerData[setid][pName], setid, rank);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 管理员%s将你的帮会阶级调整为R%d", PlayerData[playerid][pName], rank);
	SendClientMessage(setid, COLOR_WHITE, string);
	Log(ganglog, INFO, "管理员%s(%d)将玩家%s(%d)在帮会%s(%d)的阶级调整为%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setid][pName], PlayerData[setid][pID], GangData[gangid][gName], GangData[gangid][gID], rank);
    return 1;
}

CMD:setweather(playerid, params[])
{
	new cmdT, string[144];
	if(sscanf(params, "d", cmdT))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定天气」 "#TEXT_GRAD"输入: /setweather [天气ID]");
	}
	SetWeather(cmdT);
	SetGVarInt("Tiempo", cmdT);
	format(string, sizeof(string), "**确认: 已设定天气至ID%d", cmdT);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:settime(playerid, params[])
{
	new cmdT, string[144];
	if(sscanf(params, "d", cmdT))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定时间」 "#TEXT_GRAD"输入: /settime [小时]");
	}
	SetWorldTime(cmdT);
	format(string, sizeof(string), "**确认: 已设定世界时间至%d点", cmdT);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:testqte(playerid, params[])
{
	new qtenum, qtesec;
	if(sscanf(params, "dd", qtenum, qtesec))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「测试QTE」 "#TEXT_GRAD"输入: /testqte [QTE数] [QTE秒数]");
	}
	if(qtenum > 45 || qtenum < 1 || qtesec < 2) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: QTE数量范围只能在1~45个之间, 秒数不得小于2秒");
	CreateQTE(playerid, qtenum, qtesec);
	return 1;
}

CMD:npc(playerid, params[])
{
	new skin, weapon, level, Float:px, Float:py, Float:pz, string[144];
	if(sscanf(params, "ddd", skin, level, weapon))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「测试NPC」 "#TEXT_GRAD"输入: /npc [造型] [等级] [武器ID]");
		return SendClientMessage(playerid, COLOR_WHITE, "等级: 0=普通 1=菜鸟 2=混混 3=杀手 4=超级");
	}
	GetPlayerPos(playerid, px, py, pz);
	testnpc = CreateNPC(skin, weapon, 100.0, 0, px+1.0, py+1.0, pz, 0.0, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), level, 1, 0, 1);
	format(string, sizeof(string), "** NPC ID: %d", testnpc);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:testnpc(playerid, params[])
{
	new option, target;
	if(sscanf(params, "dd", option, target))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「测试NPC」 "#TEXT_GRAD"输入: /testnpc [动作] [目标]");
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"动作列表: "#TEXT_GRAD"0 = 清除NPC目标 1 = NPC攻击目标 2 = 给予NPC护甲套装 3 = NPC改为守势 4 = NPC进入目标载具");
	}
	switch(option)
	{
	    case 0:
	    {
	        ClearNPCTarget(testnpc);
	    }
	    case 1:
	    {
			NPCToTarget(testnpc, TARGET_PLAYER, target, 1);
	    }
	    case 2:
	    {
	        GivePlayerArmourSuit(testnpc, target);
	    }
	    case 3:
	    {
	        SetGVarInt("NPCStay", target, testnpc);
	    }
	    case 4:
	    {
	        if(FCNPC_GetVehicleID(testnpc) == INVALID_VEHICLE_ID) FCNPC_EnterVehicle(testnpc, target, 0, FCNPC_MOVE_TYPE_RUN);
	        else FCNPC_ExitVehicle(testnpc);
	    }
	}
	return 1;
}

CMD:record(playerid, params[])
{
	new file[65], string[144];
	if(GetGVarInt("Recording", playerid) == 1)
	{
	    DeleteGVar("Recording", playerid);
	    StopRecordingPlayerData(playerid);
	    SendClientMessage(playerid, COLOR_WHITE, "**确认: 已停止录制");
	}
	else
	{
	    if(sscanf(params, "s[64]", file))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「录制NPC动作」 "#TEXT_GRAD"输入: /record [档名]");
		}
		if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
		    StartRecordingPlayerData(playerid, PLAYER_RECORDING_TYPE_DRIVER, file);
		}
		else
		{
	    	StartRecordingPlayerData(playerid, PLAYER_RECORDING_TYPE_ONFOOT, file);
	    }
	    format(string, sizeof(string), "**确认: 已开始录制NPC动作 %s ,再次输入/record停止录制", file);
		SendClientMessage(playerid, COLOR_WHITE, string);
		SetGVarInt("Recording", 1, playerid);
	}
	return 1;
}

CMD:npcplay(playerid, params[])
{
	new file[65], string[144];
	if(GetGVarInt("PlayingBack", testnpc) == 1)
	{
	    FCNPC_StopPlayingPlayback(testnpc);
	    DeleteGVar("PlayingBack", testnpc);
	    SendClientMessage(playerid, COLOR_WHITE, "**确认: 已让NPC:%d停止运行动作");
	}
	else
	{
		if(sscanf(params, "s[64]", file))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「NPC进行已录制动作」 "#TEXT_GRAD"输入: /npcplay [档名]");
		}
		if(FCNPC_StartPlayingPlayback(testnpc, file))
		{
			format(string, sizeof(string), "**确认: 已开始让NPC:%d运行已录制动作 %s ,再次输入/npcplay停止运行", file);
			SetGVarInt("PlayingBack", testnpc);
		}
		else
		{
	    	format(string, sizeof(string), "**错误: 无法运行动作档案 %s", file);
	    }
	}
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:delaybomb(playerid, params[])
{
	new Float:px, Float:py, Float:pz, delay, type;
	if(sscanf(params, "dd", type, delay))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"测试延迟爆炸 "#TEXT_GRAD"输入: /delaybomb [种类] [延迟时间]");
	}
	GetPlayerPos(playerid, px, py, pz);
	CreateDelayedExplosion(type, delay*1000, px, py, pz, GetPlayerVirtualWorld(playerid));
	return 1;
}

CMD:vehx(playerid, params[])
{
	#pragma unused params
	new vehicleid, string[144];
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	DeleteVehicle(vehicleid);
	format(string, sizeof(string), "**确认: 已删除载具ID:%d", vehicleid);
	SendClientMessage(playerid, COLOR_WHITE, string);
    return 1;
}

CMD:gotogps(playerid, params[])
{
	#pragma unused params
    if(GetGVarInt("GPS2", playerid) == 1)
	{
		if(IsPlayerInAnyVehicle(playerid))
		{
			new vehicleid = GetPlayerVehicleID(playerid);
			SetVehiclePos(vehicleid, GetGVarFloat("GPSX", playerid), GetGVarFloat("GPSY", playerid), GetGVarFloat("GPSZ", playerid)+1.5);
		}
		else
		{
		    SetPlayerPos_Fix(playerid, GetGVarFloat("GPSX", playerid), GetGVarFloat("GPSY", playerid), GetGVarFloat("GPSZ", playerid)+1.5);
		}
		SetPlayerInterior(playerid, 0);
	}
	else return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你尚未标记任何地点");
    return 1;
}

CMD:gotoany(playerid, params[])
{
	new Float:cmdX, Float:cmdY, Float:cmdZ, cmdI, cmdW, string[144];
 	if(sscanf(params, "fffdd", cmdX, cmdY, cmdZ, cmdI, cmdW))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「前往坐标」 "#TEXT_GRAD"输入: /gotoany [X] [Y] [Z] [室内编号] [世界编号]");
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX, cmdY, cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX, cmdY, cmdZ);
	SetPlayerInterior(playerid, cmdI);
	SetPlayerVirtualWorld(playerid, cmdW);
	format(string, sizeof(string), "**确认: 你已传送至指定坐标");
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:setint(playerid, params[])
{
	new setplayer, cmdID, string[144];
 	if(sscanf(params, "ud", setplayer, cmdID))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定室内编号」 "#TEXT_GRAD"输入: /setint [设定玩家ID] [室内编号]");
	}
	SetPlayerInterior(setplayer, cmdID);
	format(string, sizeof(string), "**确认: 已将玩家ID:%d的室内编号设定为%d", setplayer, cmdID);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:setworld(playerid, params[])
{
	new setplayer, cmdID, string[144];
 	if(sscanf(params, "ud", setplayer, cmdID))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定世界编号」 "#TEXT_GRAD"输入: /setint [设定玩家ID] [世界编号]");
	}
	SetPlayerVirtualWorld(setplayer, cmdID);
	format(string, sizeof(string), "**确认: 已将玩家ID:%d的世界编号设定为%d", setplayer, cmdID);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:tv(playerid, params[])
{
	new targetid, string[144];
 	//SetCheatImmunity(playerid, 15, true);
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING)
	{
		TogglePlayerSpectating(playerid, false);
		//DeleteGVar("EMonitoring", playerid);
		//DeleteGVar("WatchTV", playerid);
		DeleteGVar("Dead", playerid);
	}
	else
	{
        if(sscanf(params, "u", targetid))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「监控玩家」 "#TEXT_GRAD"输入: /tv [监控玩家ID]");
		}
		if(GetGVarInt("Logged", targetid) == 0)	return SendClientMessage(playerid, COLOR_WHITE, "错误: 玩家未登入");
		format(string, sizeof(string), "**确认: 已开始监控玩家%s(ID:%d),生命:%d 护甲:%d", PlayerData[targetid][pName], targetid, floatround(GetPlayerHealth_Fix(targetid)), floatround(GetPlayerArmour_Fix(targetid)));
		SendClientMessage(playerid, COLOR_WHITE, string);
		SetPlayerWatchPlayer(playerid, targetid);
	}
	return 1;
}

CMD:objx(playerid, params[])
{
	new cmdID, string[144];
 	if(sscanf(params, "d", cmdID))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「删除物件」 "#TEXT_GRAD"输入: /objx [物件ID]");
	}
	if(ObjectData[cmdID][oObjectID] == 0) return SendClientMessage(playerid, COLOR_GRAD1, "**该物件不存在");
	DeleteObjectData(cmdID);
	format(string, sizeof(string), "**确认: 已删除物件%d", cmdID);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:objxx(playerid, params[])
{
	#pragma unused params
	SetGVarInt("SelectMode", SELECT_DELETE, playerid);
	SelectObject_Fix(playerid);
	SendClientMessage(playerid, COLOR_WHITE, "选择要删除的物件,按住空白键可以移动视角,按ESC键结束");
}

CMD:objinf(playerid, params[])
{
	new cmdID, cmdSet, string[144];
 	if(sscanf(params, "dd", cmdID, cmdSet))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定物件永恒」 "#TEXT_GRAD"输入: /objinf [物件ID] [1/0]");
	}
	if(ObjectData[cmdID][oObjectID] == 0) return SendClientMessage(playerid, COLOR_GRAD1, "**该物件不存在");
	ObjectData[cmdID][oInfinity] = cmdSet;
	format(string, sizeof(string), "**确认: 已将物件%d的永恒设为%d", cmdID, cmdSet);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:getmypos(playerid, params[])
{
    #pragma unused params
	new Float:cmdX, Float:cmdY, Float:cmdZ, cmdI, cmdW, string[144];
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	cmdI = GetPlayerInterior(playerid);
	cmdW = GetPlayerVirtualWorld(playerid);
	format(string, sizeof(string), "**确认: 坐标X:%f 坐标Y:%f 坐标Z:%f", cmdX, cmdY, cmdZ);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 世界编号:%d 室内编号:%d", cmdW, cmdI);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:ocontrol(playerid, params[])
{
    #pragma unused params
	switch(ooc_control)
	{
	    case 0:
	    {
	        ooc_control = 1;
	        SendClientMessage(playerid, COLOR_WHITE, "**确认：已将世界频道开启");
	        SendClientMessageToAll(COLOR_WHITE, "世界频道已经开启了");
	    }
	    case 1:
	    {
	        ooc_control = 0;
	        SendClientMessage(playerid, COLOR_WHITE, "**确认：已将世界频道关闭");
	    }
	}
	return 1;
}

CMD:newhour(playerid, params[])
{
    #pragma unused params
	NewHour();
	return 1;
}

CMD:startlotto(playerid, params[])
{
    #pragma unused params
	StartLotto();
	return 1;
}

CMD:startlottoex(playerid, params[])
{
    new string[144], count;
	if(sscanf(params, "d", count))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「乐透连发」 "#TEXT_GRAD"输入: /startlottoex [次数]");
	}
	if(count < 1) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 次数不得小于1");

	if(count == 1) format(string, sizeof(string), "<<乐透连发>> 管理员 %s 开启了乐透,开奖将在约60后开始", PlayerData[playerid][pName]);
	else format(string, sizeof(string), "<<乐透连发>> 管理员 %s 开启了乐透连发共%d次,下一次乐透开奖将在约60后开始", PlayerData[playerid][pName], count);
	SendClientMessageToAll(COLOR_WHITE, string);
	SetGVarInt("LottoLoop", count);
	SetTimer("LottoLoop", 60000, false);
	return 1;
}

CMD:gotocar(playerid, params[])
{
	new string[144], vehicleid;
	if(sscanf(params, "d", vehicleid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「前往载具」 "#TEXT_GRAD"输入: /gotocar [载具ID]");
	}
	if(GetVehicleModel(vehicleid) < 400) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该ID的载具不存在");
	new Float:vehX,Float:vehY,Float:vehZ,vehW;
	GetVehiclePos(vehicleid,vehX,vehY,vehZ);
	vehW = GetVehicleVirtualWorld(vehicleid);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new pvehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(pvehicleid,vehX,vehY,vehZ+2);
	}
	else SetPlayerPos_Fix(playerid,vehX,vehY,vehZ+1);
    SetPlayerVirtualWorld(playerid, vehW);
	format(string, sizeof(string), "**确认: 你已传送到载具(游戏ID:%d|资料库id:%d)的位置", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	TogglePlayerControllableEx(playerid, 1);
	SetCameraBehindPlayer(playerid);
	return 1;
}

CMD:getcar(playerid, params[])
{
	new string[144], vehicleid;
	if(sscanf(params, "d", vehicleid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送载具」 "#TEXT_GRAD"输入: /getcar [载具ID]");
	}
	if(GetVehicleModel(vehicleid) < 400) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该ID的载具不存在");
	new Float:vehX,Float:vehY,Float:vehZ,vehI,vehW;
 	GetPlayerPos(playerid,vehX,vehY,vehZ);
	GetXYInFrontOfPlayer(playerid,vehX,vehY,5.0);
	vehI = GetPlayerInterior(playerid);
	vehW = GetPlayerVirtualWorld(playerid);
	SetVehiclePos(vehicleid,vehX,vehY,vehZ+0.3);
	LinkVehicleToInterior(vehicleid, vehI);
    SetVehicleVirtualWorld(vehicleid, vehW);
	format(string, sizeof(string), "**确认: 载具(游戏ID:%d|资料库id:%d)已传送到你的位置", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:getcars(playerid, params[])
{
	new string[144], vehicleid;
	if(sscanf(params, "d", vehicleid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送载具至道路」 "#TEXT_GRAD"输入: /getcars [载具ID]");
	}
	if(GetVehicleModel(vehicleid) < 400) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该ID的载具不存在");
	new Float:vehX,Float:vehY,Float:vehZ,Float:vehA;
	if(GetPlayerRoad(playerid, vehX, vehY, vehZ, vehA, 30.0))
	{
		SetVehiclePos(vehicleid, vehX, vehY, vehZ+0.3);
		LinkVehicleToInterior(vehicleid, 0);
	    SetVehicleVirtualWorld(vehicleid, 0);
	    SetVehicleZAngle(vehicleid, vehA);
		format(string, sizeof(string), "**确认: 载具(游戏ID:%d|资料库id:%d)已传送到最近的道路(%f,%f,%f)", vehicleid, VehData[vehicleid][vID], vehX, vehY, vehZ);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的道路");
	return 1;
}

CMD:vrevive(playerid, params[])
{
	new string[144], vehicleid;
	if(sscanf(params, "d", vehicleid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「解除载具被摧毁状态」 "#TEXT_GRAD"输入: /vrevive [载具ID]");
	}
	if(GetVehicleModel(vehicleid) < 400) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该ID的载具不存在");
	if(VehData[vehicleid][vStatus] == VEH_NORMAL) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该载具状态正常");
	VehData[vehicleid][vStatus] = VEH_NORMAL;
	VehData[vehicleid][vHealth] = 1000.0+VehData[vehicleid][vArmour];
	SetVehicleToRespawn(vehicleid);
	SetVehicleVirtualWorld(vehicleid, 0);
	format(string, sizeof(string), "**确认: 载具(游戏ID:%d|资料库id:%d)已设定至正常状态", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	Log(vehlog, INFO, "载具%s(%d)已被管理员%s(%d)恢复至正常状态", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pName], PlayerData[playerid][pID]);
	return 1;
}

CMD:varm(playerid, params[])
{
	new setamount, ammo, string[144], vehicleid;
	if(sscanf(params, "dd", setamount, ammo))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定载具特别武装」 "#TEXT_GRAD"输入: /varm [值] [弹药数]");
		SendClientMessage(playerid, COLOR_GRAD1, "值: [0]无 [1]钉刺 [2]地雷 [3]空投轰炸");
		return 1;
	}
	if(setamount < 0 || ammo < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	SetVehicleSpecialArm(vehicleid, setamount, ammo);
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)特别武装完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:vtype(playerid, params[])
{
	new setamount, string[144], vehicleid;
	if(sscanf(params, "d", setamount))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定车种」 "#TEXT_GRAD"输入: /vtype [值]");
		SendClientMessage(playerid, COLOR_GRAD1, "值: [0]无属车 [1]私人车 [2]公部门车 [3]企业车 [4]帮会车 [5]租用车");
		return 1;
	}
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	VehData[vehicleid][vType] = setamount;
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)种类完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:vprice(playerid, params[])
{
	new setamount, string[144], vehicleid;
	if(sscanf(params, "d", setamount))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定车价」 "#TEXT_GRAD"输入: /vprice [值]");
		return 1;
	}
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	VehData[vehicleid][vPrice] = setamount;
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)价值完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:vowner(playerid, params[])
{
	new setamount, string[144], vehicleid;
	if(sscanf(params, "d", setamount))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定车主」 "#TEXT_GRAD"输入: /vowner [车主ID]");
		SendClientMessage(playerid, COLOR_GRAD1, "车主ID - 私人车:玩家资料库ID|公部门车:部门ID(警察1、医生2、政府3、军方4、辅导员5)");
		SendClientMessage(playerid, COLOR_GRAD1, "车主ID - 企业车:企业ID|帮会车:帮会ID|0:无车主");
		return 1;
	}
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	if(setamount == 0)
	{
	    VehData[vehicleid][vOwned] =
	    VehData[vehicleid][vOwner] = 0;
	}
	else
	{
	    VehData[vehicleid][vOwned] = 1,
		VehData[vehicleid][vOwner] = setamount,
		VehData[vehicleid][vDate] = getdate();
	}
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)车主完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:afuel(playerid, params[])
{
	new setamount, string[144], vehicleid;
	if(sscanf(params, "d", setamount))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定油量」 "#TEXT_GRAD"输入: /afuel [值]");
	}
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
 	VehData[vehicleid][vFuel] = setamount;
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)油量完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:fixveh(playerid, params[])
{
    #pragma unused params
	new vehicleid, Float:vhp;
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	RepairVehicle(vehicleid);
	GetVehicleHealth(vehicleid, vhp);
	SetVehicleHealth(vehicleid, vhp + VehData[vehicleid][vArmour]);
	return 1;
}

CMD:goincar(playerid, params[])
{
	new string[144], vehicleid, seatid, vehW;
	if(sscanf(params, "dd", vehicleid, seatid))
	{
		SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「进入载具」 "#TEXT_GRAD"输入: /goincar [载具ID] [座位ID]");
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"座位ID: 0 = 驾驶座,1~4 = 乘客座");
	}
	if(GetVehicleModel(vehicleid) < 400) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 该ID的载具不存在");
	ForEachPlayer(i)
	{
	    if(GetPlayerVehicleID(i) != vehicleid) continue;
	    if(GetPlayerVehicleSeat(i) == seatid)
	    {
	        return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 目前已经有其他玩家在该载具的该座位里了");
	    }
	}
	vehW = GetVehicleVirtualWorld(vehicleid);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    RemovePlayerFromVehicle_Fix(playerid);
	}
    SetPlayerVirtualWorld(playerid, vehW);
    PutPlayerInVehicle_Fix(playerid, vehicleid, seatid);
	format(string, sizeof(string), "**确认: 你已传送到载具(游戏ID:%d|资料库id:%d)里面", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	TogglePlayerControllableEx(playerid, 1);
	SetCameraBehindPlayer(playerid);
	return 1;
}

CMD:respawnveh(playerid, params[])
{
    #pragma unused params
    new vehicleid, string[144];
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	SetVehicleToRespawn(vehicleid);
	format(string, sizeof(string), "**确认: 重生载具(游戏ID:%d|资料库id:%d)完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:respawnallvehex(playerid, params[])
{
    #pragma unused params
    new i, v, j, string[144];
    for(i = 1, v = 0, j = GetVehiclePoolSize(); i <=j ; i++)//使用GetVehiclePoolSize获取最大车辆编号来增加效率
    {
        if(GetVehicleModel(i) < 400) continue;
		SetVehicleToRespawn(i);
		v++;
	}
	format(string, sizeof(string), "**公告: 重生所有载具完成,总计重生了共 %d 台",v);
	SendClientMessageToAll(COLOR_WHITE, string);
	return 1;
}

CMD:respawnallveh(playerid, params[])
{
    #pragma unused params
    new i, v, a, j, string[144];
    for(i = 1, v = a = 0, j = GetVehiclePoolSize(); i <=j ; i++)//使用GetVehiclePoolSize获取最大车辆编号来增加效率
    {
        if(GetVehicleModel(i) < 400) continue;
        a++;
        if(IsVehicleOccupied(i)) continue;
		SetVehicleToRespawn(i);
		v++;
	}
	format(string, sizeof(string), "**公告: 重生所有无人载具完成,总计重生了共 %d/%d 台",v,a);
	SendClientMessageToAll(COLOR_WHITE, string);
	return 1;
}

CMD:veh(playerid, params[])
{
	new model, color1, color2;
	if(sscanf(params, "ddd", model, color1, color2))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「新增载具」 "#TEXT_GRAD"输入: /veh [模组ID] [颜色1] [颜色2]");
	}
	if(model < 400 || model > 611) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 无效的模组ID");
	static Float:vehX,Float:vehY,Float:vehZ,Float:vehA,vehI,vehW;
	GetPlayerPos(playerid,vehX,vehY,vehZ);
	GetPlayerFacingAngle(playerid,vehA);
	vehI = GetPlayerInterior(playerid);
	vehW = GetPlayerVirtualWorld(playerid);
	new vehicleid = AddStaticVehicleEx(model,vehX,vehY,vehZ,vehA,color1,color2,60000);
    new ORM: ormid = VehData[vehicleid][ORM_ID] = orm_create("vehicledata", MYSQL_SESSION_A);//一样先create一个orm物件

	CreateVehicleData(ormid, vehicleid);

    VehData[vehicleid][vModel] = model,
    VehData[vehicleid][vX] = vehX,
    VehData[vehicleid][vY] = vehY,
    VehData[vehicleid][vZ] = vehZ,
    VehData[vehicleid][vA] = vehA,
    VehData[vehicleid][vColor1] = color1,
    VehData[vehicleid][vColor2] = color2,
    VehData[vehicleid][vFuel] = 100;
    VehData[vehicleid][vInt] = vehI;
    VehData[vehicleid][vWorld] = vehW;
    VehData[vehicleid][vArmour] = VehList[model-400][voArmor];
    LinkVehicleToInterior(vehicleid, vehI);
    SetVehicleVirtualWorld(vehicleid, vehW);
    VehData[vehicleid][vHealth] = 1000.0;
    VehData[vehicleid][vPaintjob] = 3;
    mysql_format(DEFAULT_SESSION, VehData[vehicleid][vPlate], 32, "%s%s%s-%d%d%d%d", Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], random(10), random(10), random(10), random(10));
    SetVehiclePlate(vehicleid, VehData[vehicleid][vPlate]);
    orm_setkey(ormid, "id");
    orm_insert(ormid, "OnAdminCreateVehicle", "dd", playerid, vehicleid);
    Log(vehlog, INFO, "已被管理员%s(%d)使用指令生成新载具%s(游戏内ID:%d|资料库ID:%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(model), vehicleid, VehData[vehicleid][vID]);
    return 1;
}

CMD:modveh(playerid, params[])
{
    #pragma unused params
	new string[144], Float:vehX, Float:vehY, Float:vehZ, Float:vehA, vehI, vehW, vehid;
	GetPlayerPos(playerid, vehX, vehY, vehZ);
	GetPlayerFacingAngle(playerid, vehA);
	vehI = GetPlayerInterior(playerid);
	vehW = GetPlayerVirtualWorld(playerid);
	vehid = CreateRandomModdedVehicle(vehX, vehY, vehZ, vehA, _, _, _, VTYPE_NONE);
	LinkVehicleToInterior(vehid, vehI);
    SetVehicleVirtualWorld(vehid, vehW);
	format(string, sizeof(string), "** 已新增改装车ID: %d", vehid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:vspecial(playerid, params[])
{
	new string[144], Float:vehX, Float:vehY, Float:vehZ, Float:vehA, vehI, vehW, model, color1, color2, vehid;
	if(sscanf(params, "ddd", model, color1, color2))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「新增特别载具」 "#TEXT_GRAD"输入: /veh [ID] [颜色1] [颜色2]");
		return SendClientMessage(playerid, COLOR_GRAD1, "ID: [1]装甲Sultan [2]装甲Banger [3]钉刺Tampa [4]地雷Bandito [5]地雷Wayfarer [6]轰炸RC直升机 [7]怪兽卡车");
	}
	GetPlayerPos(playerid, vehX, vehY, vehZ);
	GetPlayerFacingAngle(playerid, vehA);
	vehI = GetPlayerInterior(playerid);
	vehW = GetPlayerVirtualWorld(playerid);
	if(model < 1 || model > 6) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 无效的ID");
	vehid = CreateSpecialVehicle(model, vehX, vehY, vehZ, vehA, color1, color2, VTYPE_NONE);
	LinkVehicleToInterior(vehid, vehI);
    SetVehicleVirtualWorld(vehid, vehW);
	format(string, sizeof(string), "** 已新增特别载具ID: %d", vehid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:block(playerid, params[])
{
    #pragma unused params
	new Float:px, Float:py, Float:pz, Float:pangle, world, id, string[144];
	GetPlayerPos(playerid, px, py, pz);
	GetPlayerFacingAngle(playerid, pangle);
	world = GetPlayerVirtualWorld(playerid);
	id = CreateRoadBlock(px, py, pz-0.8, pangle+90.0, world);
	if(id > -1)
	{
	    format(string, sizeof(string), "**确认: 已新增路障(ID:%d)", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else SendClientMessage(playerid, COLOR_WHITE, "错误: 路障数量已达上限");
	return 1;
}

CMD:blockx(playerid, params[])
{
	new id, string[144];
    if(sscanf(params, "d", id))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「删除路障」 "#TEXT_GRAD"输入: /blockx [路障ID]");
	}
	if(RoadBlock[id][rbCreated] == 1)
	{
	    DestroyRoadBlock(id);
	    format(string, sizeof(string), "**确认: 已删除路障(ID:%d)", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else SendClientMessage(playerid, COLOR_WHITE, "错误: 该ID的路障不存在");
	return 1;
}

CMD:apark(playerid, params[])
{
	#pragma unused params
	new vehicleid, string[144];
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不在任何一台车上");
	ParkVehicle(vehicleid);
	format(string, sizeof(string), "**确认: 已更改载具(游戏ID:%d|资料库id:%d)重生地点", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:alock(playerid, params[])
{
    #pragma unused params
	new string[144], vehicleid;
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	if(VehData[vehicleid][vLock] == 0)VehData[vehicleid][vLock] = 1;
	else VehData[vehicleid][vLock] = 0;
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)车锁完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:acolor(playerid, params[])
{
	new color1, color2, string[144], vehicleid;
	if(sscanf(params, "dd", color1, color2))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定颜色」 "#TEXT_GRAD"输入: /acolor [颜色1] [颜色2]");
	}
	if(IsPlayerInAnyVehicle(playerid)) vehicleid = GetPlayerVehicleID(playerid);
	else vehicleid = GetNearestVehicle(playerid);
	VehData[vehicleid][vColor1] = color1;
	VehData[vehicleid][vColor2] = color2;
	ChangeVehicleColor(vehicleid, color1, color2);
	format(string, sizeof(string), "**确认: 设定载具(游戏ID:%d|资料库id:%d)颜色完成", vehicleid, VehData[vehicleid][vID]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:setplant(playerid, params[])
{
	new string[144], growth, plantid, i, j, found;
	if(sscanf(params, "d", growth))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定植物」 "#TEXT_GRAD"输入: /setplant [成长值]");
	}
	for(i = found = 0, j = MAX_PLANTS; i < j; i++)
	{
		if(IsPlayerInRangeOfPointEx(playerid, 4.0, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]))
		{
			plantid = PlantData[i][ptPlantID];
		    format(string, sizeof(string), "** 你将"#TEXT_LIGHTGREEN" %s "#TEXT_WHITE"的成长设为 %d", PlantList[plantid][ptName], growth);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    PlantData[i][ptGrowth] = growth;
		    UpdatePlantData(i);
		    found = 1;
			break;
		}
	}
	if(found == 0) 	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 找不到任何植物");
	return 1;
}

CMD:plantx(playerid, params[])
{
    #pragma unused params
	new i, j, found;
	for(i = found = 0, j = MAX_PLANTS; i < j; i++)
	{
		if(IsPlayerInRangeOfPointEx(playerid, 4.0, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]))
		{
			DeletePlant(i);
			found = 1;
			break;
		}
	}
	if(found == 0) 	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 找不到任何植物");
	return 1;
}

CMD:startclass(playerid, params[])
{
	new startid, string[144];
	if(sscanf(params, "i", startid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「开始课程」 输入: /startclass [课程ID]");
	}
	if(ClassList[startid][clsStarted] == 1)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 这堂课已经开始了");
	if(startid < 1)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 课程ID不存在");
	StartClass(startid);
	format(string, sizeof(string), "**确认: 开始课程ID:%d", startid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:endclass(playerid, params[])
{
	new endid, string[144];
	if(sscanf(params, "i", endid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「结束课程」 输入: /endclass [课程ID]");
	}
	if(ClassList[endid][clsStarted] == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 这堂课没有被开始");
	if(endid < 1)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 课程ID不存在");
	EndClass(endid);
	format(string, sizeof(string), "**确认: 已结束课程ID:%d", endid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:setskin(playerid, params[])
{
	new setto, setid, string[144];
	if(sscanf(params, "ud", setto, setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「设定造型」 输入: /setskin [玩家名/ID] [造型ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	SetPlayerSkin_Fix(setto, setid);
	PlayerData[setto][pSkin] = setid;
	format(string, sizeof(string), "**确认: 设定玩家(ID:%d)造型至"#TEXT_PINK"%d", setto, setid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:uncd(playerid, params[])
{
	new setto, string[144];
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「结束冷却」 输入: /uncd [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	LimitData[setto][plCDSneak] =
	LimitData[setto][plCDTimeStop] =
	LimitData[setto][plCDCaptain] =
	LimitData[setto][plCDGF] =
	LimitData[setto][plCDOG] =
	LimitData[setto][plCDBless] =
	LimitData[setto][plMSweet] =
	LimitData[setto][plMSimeon] =
	LimitData[setto][plMTrevor] =
	LimitData[setto][plMCesar] =
	LimitData[setto][plMEmmet] =
	LimitData[setto][plHEmmet] =
	LimitData[setto][plMToreno] =
	LimitData[setto][plMWoozie] = 0;
	format(string, sizeof(string), "**确认: 已解除玩家(ID:%d)技能冷却", setto);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:givegun(playerid, params[])
{
	new giveto, giveid, giveamount, string[144];
	if(sscanf(params, "udd", giveto, giveid, giveamount))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「给予武器」 输入: /givegun [玩家名/ID] [武器ID] [数量]");
	}
	if(!GetGVarInt("Logged", giveto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GivePlayerWeapon(giveto, giveid, giveamount);
	format(string, sizeof(string), "**确认: 给予玩家(ID:%d)武器完成", giveto);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:giveallskin(playerid, params[])
{
	new giveid;
	if(sscanf(params, "u", giveid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「给予所有造型」 输入: /giveallskin [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", giveid))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	for(new i = 0; i < sizeof(ItemsList_EQ); i++)
	{
	    if(ItemsList_EQ[i][ieqType] == IEQ_SKINX && !PlayerHaveItem(giveid, 2, i))
	    {
	        GivePlayerItem(giveid, 2, i, 1);
	    }
	}
	return 1;
}

CMD:respawnplayer(playerid, params[])
{
	new setid, string[144];
	if(sscanf(params, "u", setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「重生玩家」 输入: /setid [玩家名/ID]");
	}
    if(GetGVarInt("Logged", setid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家未登入");
	if(GetPlayerState(setid) == PLAYER_STATE_SPECTATING)
	{
		TogglePlayerSpectating(setid, false);
		//DeleteGVar("EMonitoring", setid);
		//DeleteGVar("WatchTV", setid);
		DeleteGVar("Dead", setid);
	}
	else
	{
	    SpawnPlayer(setid);
	}
	SetGVarInt("Spawned", 1, setid);
	format(string, sizeof(string), "**确认: 已重生玩家(ID:%d)", setid);
	SendClientMessage(setid, COLOR_WHITE, string);
	return 1;
}

CMD:freeze(playerid, params[])
{
	new setid, string[144];
	if(sscanf(params, "u", setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「限制玩家行动」 输入: /freeze [玩家名/ID]");
	}
    if(GetGVarInt("Logged", setid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家未登入");
	TogglePlayerControllableEx(setid, false);
	format(string, sizeof(string), "**确认: 已限制玩家(ID:%d)行动", setid);
	SendClientMessage(setid, COLOR_WHITE, string);
	return 1;
}

CMD:unfreeze(playerid, params[])
{
	new setid, string[144];
	if(sscanf(params, "u", setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「解除玩家行动限制」 输入: /unfreeze [玩家名/ID]");
	}
    if(GetGVarInt("Logged", setid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家未登入");
	TogglePlayerControllableEx(setid, true);
	format(string, sizeof(string), "**确认: 已解除玩家(ID:%d)行动限制", setid);
	SendClientMessage(setid, COLOR_WHITE, string);
	return 1;
}

CMD:gotop(playerid, params[])
{
	new gotoid, Float:cmdX, Float:cmdY, Float:cmdZ, cmdI, cmdW, string[144];
	if(sscanf(params, "u", gotoid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「前往玩家」 输入: /gotop [玩家名/ID]");
	}
	if(!IsPlayerConnected(gotoid))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GetPlayerPos(gotoid, cmdX, cmdY, cmdZ);
	cmdW = GetPlayerVirtualWorld(gotoid);
	cmdI = GetPlayerInterior(gotoid);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX, cmdY, cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX+0.2, cmdY+0.2, cmdZ);
	SetPlayerVirtualWorld(playerid, cmdW);
	SetPlayerInterior(playerid, cmdI);
	format(string, sizeof(string), "**确认: 你已传送至玩家(ID:%d)", gotoid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 玩家(ID:%d)已传送至你的位置", playerid);
	SendClientMessage(gotoid, COLOR_WHITE, string);
	return 1;
}

CMD:xplus(playerid, params[])
{
    #pragma unused params
	new Float:cmdX, Float:cmdY, Float:cmdZ;
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX+0.5, cmdY, cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX+0.5, cmdY, cmdZ);
	return 1;
}

CMD:xminus(playerid, params[])
{
    #pragma unused params
	new Float:cmdX, Float:cmdY, Float:cmdZ;
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX-0.5, cmdY, cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX-0.5, cmdY, cmdZ);
	return 1;
}

CMD:yplus(playerid, params[])
{
    #pragma unused params
	new Float:cmdX, Float:cmdY, Float:cmdZ;
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX, cmdY+0.5, cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX, cmdY+0.5, cmdZ);
	return 1;
}

CMD:yminus(playerid, params[])
{
    #pragma unused params
	new Float:cmdX, Float:cmdY, Float:cmdZ;
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, cmdX, cmdY-0.5 ,cmdZ);
	}
	else SetPlayerPos_Fix(playerid, cmdX, cmdY-0.5, cmdZ);
	return 1;
}


CMD:getp(playerid, params[])
{
	new getid, Float:cmdX, Float:cmdY, Float:cmdZ, cmdI, cmdW, string[144];
	if(sscanf(params, "u", getid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「传送玩家」 输入: /getp [玩家名/ID]");
	}
	if(!IsPlayerConnected(getid)) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GetPlayerPos(playerid, cmdX, cmdY, cmdZ);
	cmdW = GetPlayerVirtualWorld(playerid);
	cmdI = GetPlayerInterior(playerid);
    if(IsPlayerInAnyVehicle(getid))
	{
	    new vehicleid = GetPlayerVehicleID(getid);
	    SetVehiclePos(vehicleid, cmdX, cmdY, cmdZ);
	}
	else {SetPlayerPos_Fix(getid, cmdX+0.2, cmdY+0.2, cmdZ);}
	SetPlayerVirtualWorld(getid, cmdW);
	SetPlayerInterior(getid, cmdI);
	format(string, sizeof(string), "**确认: 玩家(ID:%d)已传送至你的位置", getid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "**确认: 你已被传送至玩家(ID:%d)", playerid);
	SendClientMessage(getid, COLOR_WHITE, string);
	return 1;
}

cmd:mute(playerid, params[])
{
	new string[144], setid, time, room;
	if(sscanf(params, "udd", setid, time, room))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「设定禁言」 输入: /jail [玩家名/ID] [服刑时间] [牢房编号]");
	}
	if(!GetGVarInt("Logged", setid)) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	if(time < 0 || room < 0 || room > 23)return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 输入的值错误");
	SetPlayerInJail(setid, time, room);
	format(string, sizeof(string), "**确认: 玩家(ID:%d)已入狱,时间为%d", setid, time);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:jail(playerid, params[])
{
	new string[144], setid, time, room;
	if(sscanf(params, "udd", setid, time, room))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「设定入狱」 输入: /jail [玩家名/ID] [服刑时间] [牢房编号]");
	}
	if(!GetGVarInt("Logged", setid)) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	if(time < 0 || room < 0 || room > 23)return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 输入的值错误");
	SetPlayerInJail(setid, time, room);
	format(string, sizeof(string), "**确认: 玩家(ID:%d)已入狱,时间为%d", setid, time);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:unjail(playerid, params[])
{
	new string[144], setid;
	if(sscanf(params, "u", setid))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "「设定出狱」 输入: /unjail [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setid)) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	if(PlayerData[setid][pJail] == 0)return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家并没有入狱");
	SetPlayerOutJail(setid);
	format(string, sizeof(string), "**确认: 玩家(ID:%d)已被释放出狱", setid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:giveitem(playerid, params[])
{
	new giveto, giveid, givetype, givecount;
	if(sscanf(params, "uddd", giveto, givetype, giveid, givecount))
	{
		SendClientMessage(playerid, 0xff0000ff, "注意: 如果给予装备 数量则只分负整数和正整数 正为给予一个装备 负为移除装备(负数需要输入MySQL表内ID)");
		SendClientMessage(playerid, 0xff660099, "提示: 道具类型 -- 1:消耗品　2:装备");
		return SendClientMessage(playerid, 0xff00ffaa, "「给予道具」 输入: /giveitem [玩家名/ID] [道具类型] [道具ID] [数量]");
	}
	if(!GetGVarInt("Logged", giveto))
	{
		return SendClientMessage(playerid, 0xff0000ff, "玩家错误");
	}
	if(!(-10001 < givecount < 10001))
	{//如果道具数量不是-10000~10000的范围
		return SendClientMessage(playerid, 0xff0000ff, "数量只能在-10000~10000");
	}
	if(GivePlayerItem(giveto, givetype, giveid, givecount))
	{
		SendClientMessage(playerid, 0xff0000ff, "顺利给予道具");
	}
	else
	{
		SendClientMessage(playerid, 0xff0000ff, "给予道具失败");
	}
	return 1;
}

cmd:tpeint(playerid, params[])
{
    new type, id;
	if(sscanf(params, "dd", type, id))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送至内装」 "#TEXT_GRAD"输入: /tpeint [种类] [内装ID]");
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"种类: 1:套房 2:房屋 3:办公室 4:会所 5:仓库 6:机库 7:船坞 8:工厂");
		return 1;
	}
	switch(type)
	{
	    case 1:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Suite[id][esX], EstateStyle_Suite[id][esY], EstateStyle_Suite[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Suite[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Suite[id][esInt]);
		}
		case 2:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_House[id][esX], EstateStyle_House[id][esY], EstateStyle_House[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_House[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_House[id][esInt]);
		}
		case 3:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Office[id][esX], EstateStyle_Office[id][esY], EstateStyle_Office[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Office[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Office[id][esInt]);
		}
		case 4:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Clubhouse[id][esX], EstateStyle_Clubhouse[id][esY], EstateStyle_Clubhouse[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Clubhouse[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Clubhouse[id][esInt]);
		}
		case 5:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Warehouse[id][esX], EstateStyle_Warehouse[id][esY], EstateStyle_Warehouse[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Warehouse[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Warehouse[id][esInt]);
		}
		case 6:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Hangar[id][esX], EstateStyle_Hangar[id][esY], EstateStyle_Hangar[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Hangar[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Hangar[id][esInt]);
		}
		case 7:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Boatyard[id][esX], EstateStyle_Boatyard[id][esY], EstateStyle_Boatyard[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Boatyard[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Boatyard[id][esInt]);
		}
		case 8:
	    {
			SetPlayerPos_Fix(playerid, EstateStyle_Factory[id][esX], EstateStyle_Factory[id][esY], EstateStyle_Factory[id][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Factory[id][esA]);
			SetPlayerInterior(playerid, EstateStyle_Factory[id][esInt]);
		}
	}
	return 1;
}

cmd:addestate(playerid, params[])
{
    new type, name[33], style, price, Float:px, Float:py, Float:pz, Float:pa, estateid, string[144];
	if(sscanf(params, "ds[32]dd", type, name, style, price))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「新增地产」 "#TEXT_GRAD"输入: /addestate [种类] [名称] [内装] [价钱]");
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"种类: 1:套房 2:房屋 3:办公室 4:会所 5:仓库 6:机库 7:船坞 8:工厂");
		return 1;
	}
	GetPlayerPos(playerid, px, py, pz);
	GetPlayerFacingAngle(playerid, pa);
	estateid = CreateEstate(type, name, style, price, px, py, pz, pa);
	format(string, sizeof(string), "** 地产 %d 新增完成,种类为 %d", estateid, type);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:estatex(playerid, params[])
{
    #pragma unused params
    new string[144], estateid;
	estateid = GetNearestEstate(playerid);
	if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	DeleteEstate(estateid);
	format(string, sizeof(string), "** 地产 %d 已删除", estateid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:elock(playerid, params[])
{
    #pragma unused params
    new string[144], estateid;
	estateid = GetNearestEstate(playerid);
	if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	if(EstateData[estateid][eLocked] == 0)
	{
	    EstateData[estateid][eLocked] = 1;
	    format(string, sizeof(string), "** 地产 %d 已上锁", estateid);
	}
	else
	{
	    EstateData[estateid][eLocked] = 0;
	    format(string, sizeof(string), "** 地产 %d 已解锁", estateid);
	}
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:etype(playerid, params[])
{
    new estateid, type, string[144];
	if(sscanf(params, "d", type))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「地产种类」 "#TEXT_GRAD"输入: /etype [种类id]");
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"种类: 1:套房 2:房屋 3:办公室 4:会所 5:仓库 6:机库 7:船坞 8:工厂");
		return 1;
	}
    estateid = GetNearestEstate(playerid);
    if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	EstateData[estateid][eType] = type;
	UpdateEstate(estateid);
	format(string, sizeof(string), "** 地产 %d 的种类已改为 %d", estateid, type);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:ename(playerid, params[])
{
    new estateid, name[33], string[144];
	if(sscanf(params, "s[32]", name))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「地产名称」 "#TEXT_GRAD"输入: /ename [名称]");
		return 1;
	}
    estateid = GetNearestEstate(playerid);
    if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	mysql_format(DEFAULT_SESSION, EstateData[estateid][eName], 16, "%s", name);

	UpdateEstate(estateid);
	format(string, sizeof(string), "** 地产 %d 的名称已改为 %s", estateid, name);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:estyle(playerid, params[])
{
    new estateid, style, string[144];
	if(sscanf(params, "d", style))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「地产内装」 "#TEXT_GRAD"输入: /estyle [内装id]");
		return 1;
	}
    estateid = GetNearestEstate(playerid);
    if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	EstateData[estateid][eStyle] = style;
	UpdateEstate(estateid);
	format(string, sizeof(string), "** 地产 %d 的内装已改为 %d", estateid, style);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:eprice(playerid, params[])
{
    new estateid, price, string[144];
	if(sscanf(params, "d", price))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「地产价钱」 "#TEXT_GRAD"输入: /eprice [价钱]");
		return 1;
	}
    estateid = GetNearestEstate(playerid);
    if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	EstateData[estateid][ePrice] = price;
	UpdateEstate(estateid);
	format(string, sizeof(string), "** 地产 %d 的价钱已改为 $%d", estateid, price);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:eownerx(playerid, params[])
{
    #pragma unused params
    new string[144], estateid;
	estateid = GetNearestEstate(playerid);
	if(estateid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 找不到最近的地产");
	DeleteEstateOwner(estateid);
	format(string, sizeof(string), "** 地产 %d 的拥有者已删除", estateid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

cmd:gotoestate(playerid, params[])
{
    new estateid, string[144];
	if(sscanf(params, "d", estateid))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送至地产」 "#TEXT_GRAD"输入: /gotoestate [地产ID]");
		return 1;
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, EstateData[estateid][eX], EstateData[estateid][eY], EstateData[estateid][eZ]);
	}
	else SetPlayerPos_Fix(playerid, EstateData[estateid][eX], EstateData[estateid][eY], EstateData[estateid][eZ]);
	SetPlayerVirtualWorld(playerid, 0);
	SetPlayerInterior(playerid, 0);
	format(string, sizeof(string), "** 已传送至地产ID%d", estateid);
	SendClientMessage(playerid, COLOR_GRAD1, string);
	return 1;
}

cmd:gotoplant(playerid, params[])
{
    new id, string[144];
	if(sscanf(params, "d", id))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送至植物」 "#TEXT_GRAD"输入: /gotoplant [植物ID]");
		return 1;
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, PlantData[id][ptX], PlantData[id][ptY]+3.0, PlantData[id][ptZ]);
	}
	else SetPlayerPos_Fix(playerid, PlantData[id][ptX], PlantData[id][ptY]+3.0, PlantData[id][ptZ]);
	SetPlayerVirtualWorld(playerid, PlantData[id][ptWorld]);
	SetPlayerInterior(playerid, 0);
	format(string, sizeof(string), "** 已传送至植物ID%d", id);
	SendClientMessage(playerid, COLOR_GRAD1, string);
	return 1;
}

cmd:gotoobj(playerid, params[])
{
    new id, string[144];
	if(sscanf(params, "d", id))
	{
	    SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「传送至物件」 "#TEXT_GRAD"输入: /gotoobj [物件ID]");
		return 1;
	}
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    SetVehiclePos(vehicleid, ObjectData[id][oX], ObjectData[id][oY], ObjectData[id][oZ]);
	}
	else SetPlayerPos_Fix(playerid, ObjectData[id][oX], ObjectData[id][oY], ObjectData[id][oZ]);
	SetPlayerVirtualWorld(playerid, ObjectData[id][oWorld]);
	SetPlayerInterior(playerid, ObjectData[id][oInterior]);
	format(string, sizeof(string), "** 已传送至物件ID%d", id);
	SendClientMessage(playerid, COLOR_GRAD1, string);
	return 1;
}

CMD:sethp(playerid, params[])
{
	new setto, setamount;
	if(sscanf(params, "ud", setto, setamount))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定生命」 "#TEXT_GRAD"输入: /sethp [玩家名/ID] [值]");
	}
	if(!IsPlayerConnected(setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	SendClientMessage(playerid, COLOR_WHITE, "**确认: 设定玩家生命完成");
	SetPlayerHealth_Fix(setto, setamount);
	return 1;
}

CMD:setar(playerid, params[])
{
	new setto, setamount;
	if(sscanf(params, "ud", setto, setamount))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定防弹衣」 "#TEXT_GRAD"输入: /setar [玩家名/ID] [值]");
	}
	if(!IsPlayerConnected(setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	if(setamount < 0) return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 设定值不得小于0");
	SendClientMessage(playerid, COLOR_WHITE, "**确认: 设定玩家防弹衣完成");
	SetPlayerArmour_Fix(setto, setamount);
	return 1;
}

CMD:givemoney(playerid, params[])
{
	new setto, setamount;
	if(sscanf(params, "ud", setto, setamount))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「给予金钱」 "#TEXT_GRAD"输入: /givemoney [玩家名/ID] [值]");
	}
	if(!IsPlayerConnected(setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	SendClientMessage(playerid, COLOR_WHITE, "**确认: 给予玩家金钱完成");
	GiveMoney(setto, setamount);
	Log(moneylog, INFO, "管理员%s(%d)使用指令给了玩家%s(%d)现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setto][pName], PlayerData[setto][pID], setamount);
	return 1;
}

CMD:setplayer(playerid, params[])
{
	new setto, string[512], setname[MAX_PLAYER_NAME];
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家资料」 "#TEXT_GRAD"输入: /setplayer [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GetPlayerName(setto, setname, sizeof(setname));
	format(string, sizeof(string), "玩家%s的项目\t值\n等级\t%d\n现金\t%d\n存款\t%d\n经验值\t%d\n饥饿值\t%d\n体力\t%d\n造型\t%d\n工作\t%s(%d)\n背包容量\t%d\n通缉值\t%d\n悬赏\t$%d(%d秒)\n公部门\t%d\n企业\t%d\n帮会\t%d",
	setname, PlayerData[setto][pLevel], PlayerData[setto][pCash], PlayerData[setto][pBank], PlayerData[setto][pExp], floatround(PlayerData[setto][pHunger]), floatround(PlayerData[setto][pStamina]),
	PlayerData[setto][pSkin], GetJobName(setto), PlayerData[setto][pJob], PlayerData[setto][pBag], PlayerData[setto][pWanted], PlayerData[setto][pBounty], PlayerData[setto][pBountyTime],
	PlayerData[setto][pDepartment], CompanySqlIDToID(PlayerData[setto][pCompany]), GangSqlIDToID(PlayerData[setto][pGang]));
	ShowPlayerDialog(playerid, DIALOG_SETPLAYER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"设定玩家", string, "选择", "关闭");
	SetGVarInt("DDecidePlayer", setto, playerid);
	return 1;
}

CMD:setpoint(playerid, params[])
{
	new setto, string[256], setname[MAX_PLAYER_NAME];
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家点数」 "#TEXT_GRAD"输入: /setpoint [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GetPlayerName(setto, setname, sizeof(setname));
	format(string, sizeof(string), "玩家%s的项目\t值\n技能点\t%d\n机械知识\t%d\n信息知识\t%d\n研发知识\t%d\n医学知识\t%d\n稀有知识\t%d\n洞察知识\t%d\n射击练习\t%d\n健身练习\t%d\n禅修练习\t%d\n体力练习\t%d",
	setname, GetPlayerPoint(setto, 1), GetPlayerPoint(setto, 2), GetPlayerPoint(setto, 3), GetPlayerPoint(setto, 4), GetPlayerPoint(setto, 5), GetPlayerPoint(setto, 6),
	GetPlayerPoint(setto, 7), GetPlayerPoint(setto, 8), GetPlayerPoint(setto, 9), GetPlayerPoint(setto, 10), GetPlayerPoint(setto, 11));
	ShowPlayerDialog(playerid, DIALOG_SETPOINT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"设定玩家", string, "选择", "关闭");
	SetGVarInt("DDecidePlayer", setto, playerid);
	return 1;
}

CMD:setskill(playerid, params[])
{
	new setto, string[256], setname[MAX_PLAYER_NAME];
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「设定玩家技能」 "#TEXT_GRAD"输入: /setskill [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	GetPlayerName(setto, setname, sizeof(setname));
	format(string, sizeof(string), "玩家%s的项目\t值\n修车能力\t%d\n开锁能力\t%d\n侵入能力\t%d\n制枪能力\t%d\n爆击能力\t%d\n潜行能力\t%d\n耐打能力\t%d\n治疗能力\t%d\n制药能力\t%d\n吸血能力\t%d\n休养\t%d\n搜索能力\t%d\n观察能力\t%d\nTHE WORLD!\t%d\n耐久能力!\t%d",
	setname, SkillData[setto][psFixVeh], SkillData[setto][psUnlock], SkillData[setto][psHack], SkillData[setto][psArm], SkillData[setto][psCHit], SkillData[setto][psSneak], SkillData[setto][psDef],
	SkillData[setto][psHeal], SkillData[setto][psDrug], SkillData[setto][psLeech], SkillData[setto][psRecover], SkillData[setto][psSearch], SkillData[setto][psObserve], SkillData[setto][psTimeStop], SkillData[setto][psStamina]);
	ShowPlayerDialog(playerid, DIALOG_SETSKILL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"设定玩家", string, "选择", "关闭");
	SetGVarInt("DDecidePlayer", setto, playerid);
	return 1;
}

CMD:checkprop(playerid, params[])
{
	new setto, string[256];
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「确认玩家资产」 "#TEXT_GRAD"输入: /checkprop [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	format(string, sizeof(string), ""#TEXT_WHITE"%s的项目\t"#TEXT_WHITE"数量\n载具\t%d\n地产\t%d\n宠物\t%d\n植物\t%d\n物件\t%d", PlayerData[setto][pName], PlayerHaveVehicle(setto), PlayerHaveEstate(setto), PlayerHavePet(setto), PlayerHavePlant(setto), PlayerHaveObject(setto));
	ShowPlayerDialog(playerid, DIALOG_CLICKME_PROPERTY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"资产", string, "选择", "关闭");
	SetGVarInt("DDecidePlayer", setto, playerid);
	SetGVarInt("CheckProp", 1, playerid);
	return 1;
}

CMD:checkweapon(playerid, params[])
{
	new setto, string[144], i, j, pgun, pammo;
	if(sscanf(params, "u", setto))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「确认玩家武器」 "#TEXT_GRAD"输入: /checkweapon [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	format(string, sizeof(string), "_____玩家 %s(%d) 的武器_____:", PlayerData[setto][pName], setto);
	SendClientMessage(playerid, COLOR_WHITE, string);
    for(i = 0, j = 10; i < j; i++)
	{
	    GetPlayerWeaponData(setto, i, pgun, pammo);
	    format(string, sizeof(string), "(%d)武器: %s 弹药: %d", i, WeaponsList[pgun][wName], pammo);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	return 1;
}

CMD:kick(playerid, params[])
{
	new setto, string[260], reason[144];
	if(sscanf(params, "us[144]", setto, reason))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「踢出玩家」 "#TEXT_GRAD"输入: /kick [玩家名/ID]");
	}
	if(!GetGVarInt("Logged", setto))	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 玩家不在线");
	format(string, sizeof(string), "[%s]被管理员踢出服务器,原因:%s", PlayerData[setto][pName], reason);
	SendClientMessageToAll(COLOR_RED, string);
	
    SetTimerEx("KickDelay", 300, false, "d", setto);
	return 1;
}

CMD:cmd(playerid, params[])
{
	#pragma unused params
	ShowPlayerDialog(playerid, DIALOG_CMD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"指令查询",
	""#TEXT_WHITE"指令种类\n服务器相关\n玩家相关\n载具相关\n传送相关\n地产相关\n储存相关\n其他", "选择", "关闭");
	return 1;
}

CMD:ao(playerid, params[])
{
	new string[145], inputtext[144];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「通知频道」 "#TEXT_GRAD"输入: /ao [内容]");
	}
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	format(string, sizeof(string),  " [管理员消息]: %s", inputtext);
	SendClientMessageToAll(COLOR_ORANGE, string);
	UpdatePlayerMission(playerid, 2, 4);
	Log(chatlog, INFO, "[管理员消息] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:t(playerid, params[])
{
	new string[145], inputtext[144];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「小队频道」 "#TEXT_GRAD"输入: /t [内容]");
	}
	if(GetPlayerTeam(playerid) == NO_TEAM)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不属于任何小队");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	new teamid = GetPlayerTeam(playerid);
	format(string, sizeof(string), " [%s] *%s(%d): %s", Team[teamid][tName], PlayerData[playerid][pName], playerid, inputtext);
	SendTeamMessage(teamid, COLOR_LIGHTBLUE, string);
 	Log(chatlog, INFO, "[%s] %s(%d): %s", Team[teamid][tName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:c(playerid, params[])
{
	new string[145], inputtext[144], rankstr[32], id;
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「企业频道」 "#TEXT_GRAD"输入: /c [内容]");
	}
	if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不属于任何企业");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	id = CompanySqlIDToID(PlayerData[playerid][pCompany]);
	switch(GetPlayerCompanyRank(playerid))
	{
	    case 1: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR1]);
	    case 2: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR2]);
	    case 3: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR3]);
	    case 4: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR4]);
		case 5: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR5]);
	}
	format(string, sizeof(string), " [%s] *%s%s(%d): %s", CompanyData[id][comName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
	SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
	Log(chatlog, INFO, "[%s] %s(%d): %s", CompanyData[id][comName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:g(playerid, params[])
{
	new string[145], inputtext[144], rankstr[32], id;
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「帮会频道」 "#TEXT_GRAD"输入: /g [内容]");
	}
	if(PlayerData[playerid][pGang] == GANG_ID_NONE)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不属于任何帮会");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	id = GangSqlIDToID(PlayerData[playerid][pGang]);
	switch(GetPlayerGangRank(playerid))
	{
		case 1: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR1]);
		case 2: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR2]);
		case 3: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR3]);
		case 4: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR4]);
		case 5: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR5]);
	}
	format(string, sizeof(string), " [%s] *%s%s(%d): %s", GangData[id][gName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
	SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
	Log(chatlog, INFO, "[%s] %s(%d): %s", GangData[id][gName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:d(playerid, params[])
{
	new string[145], inputtext[144], rankstr[32], id;
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「公部门频道」 "#TEXT_GRAD"输入: /d [内容]");
	}
	if(PlayerData[playerid][pDepartment] == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不属于任何公部门");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	id = PlayerData[playerid][pDepartment];
	switch(PlayerData[playerid][pDeptRank])
	{
		case 1: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR1]);
		case 2: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR2]);
		case 3: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR3]);
		case 4: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR4]);
		case 5: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR5]);
	}
	format(string, sizeof(string), " [%s] *%s%s(%d): %s", Department[id][dpName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
	SendDeptMessage(PlayerData[playerid][pDepartment], COLOR_FADEBLUE, string);
	Log(chatlog, INFO, "[%s] %s(%d): %s", Department[id][dpName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:gov(playerid, params[])
{
	new string[145], inputtext[144], dept[32];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「政府频道」 "#TEXT_GRAD"输入: /gov [内容]");
	}
	if(GetGVarInt("Spawned", playerid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你尚未出生");
	if(PlayerData[playerid][pDepartment] == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你不属于任何公部门");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	switch(PlayerData[playerid][pDepartment])
	{
		case DEPT_POLICE: format(dept, sizeof(dept), "治安部门");
		case DEPT_MEDIC: format(dept, sizeof(dept), "医疗部门");
		case DEPT_GOVERNMENT: format(dept, sizeof(dept), "政府部门");
		case DEPT_COUNSELOR: format(dept, sizeof(dept), "辅导部门");
		case DEPT_ARMY: format(dept, sizeof(dept), "军事部门");
	}
	format(string, sizeof(string), " [政府] *%s%s(%d): %s", dept, PlayerData[playerid][pName], playerid, inputtext);
	SendAllDeptMessage(COLOR_FADEYELLOW, string);
	Log(chatlog, INFO, "[政府] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:n(playerid, params[])
{
	new string[145], inputtext[144], tistr[32];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「新手频道」 "#TEXT_GRAD"输入: /n [内容]");
	}
	if(GetGVarInt("Spawned", playerid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你尚未出生");
	if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR || PlayerData[playerid][pLevel] < 15)
	{
		if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
		}
		if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR) format(tistr, sizeof(tistr), ""#TEXT_YELLOW"辅导员");
		else format(tistr, sizeof(tistr), ""#TEXT_WHITE"新手");
		format(string, sizeof(string), " [新手] *%s%s(%d): %s", tistr, PlayerData[playerid][pName], playerid, inputtext);
		SendNewbieMessage(COLOR_PINKRED, string);
		UpdatePlayerMission(playerid, 2, 4);
		Log(chatlog, INFO, "[新手] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		print(string);
	}
	else return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你无法使用新手频道");
	return 1;
}

CMD:me(playerid, params[])
{
	new string[145], inputtext[144];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「动作消息」 "#TEXT_GRAD"输入: /me [内容]");
	}
	if(GetGVarInt("Spawned", playerid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你尚未出生");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	format(string, sizeof(string), "** %s %s **", PlayerData[playerid][pName], inputtext);
	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	print(string);
	return 1;
}

CMD:s(playerid, params[])
{
	new string[145], inputtext[144];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「周围呼喊」 "#TEXT_GRAD"输入: /s [内容]");
	}
	if(GetGVarInt("Spawned", playerid) == 0)	return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你尚未出生");
	if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
	}
	format(string, sizeof(string), "** %s(%d) 大叫: %s!", PlayerData[playerid][pName], playerid, inputtext);
	SendRangeMessage(40.0, playerid, string, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_GRAD1);
	Log(chatlog, INFO, "%s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
	print(string);
	return 1;
}

CMD:a(playerid, params[])
{
	new string[145], inputtext[144];
	if(sscanf(params, "s[144]", inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「管理员频道」 "#TEXT_GRAD"输入: /a [内容]");
	}
	if(PlayerData[playerid][pAdmin] > 0)
	{
		if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
		}
		format(string, sizeof(string), " [管理员] *%s(%d) 说: %s", PlayerData[playerid][pName], playerid, inputtext);
		SendAdminMessage(COLOR_YELLOW, string);
		Log(chatlog, INFO, "[管理员] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		print(string);
	}
	else return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你无法使用管理员频道");
	return 1;
}

CMD:pm(playerid, params[])
{
	new setto, string[145], inputtext[144];
	if(sscanf(params, "us[144]", setto, inputtext))
	{
		return SendClientMessage(playerid, COLOR_GRAD1, ""#TEXT_WHITE"「私信」 "#TEXT_GRAD"输入: /pm [私信玩家ID] [内容]");
	}
	if(PlayerData[playerid][pAdmin] > 0)
	{
		if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
		{
			return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你的消息有无法发送的字元");
		}
		format(string, sizeof(string), "(( 来自管理员 %s 的私信: %s ))", PlayerData[playerid][pName], inputtext);
		SendClientMessage(setto, COLOR_YELLOW, string);
		format(string, sizeof(string), "(( 已发送给 %s 私信: %s ))", PlayerData[setto][pName], inputtext);
		SendClientMessage(playerid, COLOR_WHITE, string);
		Log(chatlog, INFO, "[私信] %s(%d)给%s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setto][pName], PlayerData[setto][pID], inputtext);
		print(string);
	}
	else return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 你无法私信玩家");
	return 1;
}

public OnPlayerCommandReceived(playerid, cmd[], params[], flags)
{
	if(GetTickCount() - GetGVarInt("pCmdTick", playerid) < 500)
	{
		SendClientMessage(playerid, COLOR_WHITE, "错误: 请不要刷屏!");
		return 0;
 	}
 	
	SetGVarInt("pCmdTick", GetTickCount(), playerid);
	
    if(PlayerData[playerid][pAdmin] == 0)
	{
	    if(!strcmp(cmd,"o") || !strcmp(cmd,"t") || !strcmp(cmd,"c") || !strcmp(cmd,"d") || !strcmp(cmd,"n")
	    || !strcmp(cmd,"g") || !strcmp(cmd,"me") || !strcmp(cmd,"s") || !strcmp(cmd,"gov")) {}
	    else
	    {
			SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限使用指令");
			return 0;
		}
	}
	return 1;
}

public OnPlayerCommandPerformed(playerid, cmd[], params[], result, flags)
{
    new string[144];
    if(result == -1)
	{
		format(string, sizeof(string), "**提示: "#TEXT_WHITE"没有"#TEXT_GRAD"[/%s]"#TEXT_WHITE"这个指令,请输入"#TEXT_YELLOW"/cmd"#TEXT_WHITE"查看", cmd);
		SendClientMessage(playerid, COLOR_YELLOW, string);
	}
    return 1;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
    new Float:cx, Float:cy, Float:cz;
	GetPlayerPos(playerid, cx, cy, cz);
	if(GetGVarInt("Fishing", playerid) > 0 || GetGVarInt("Hewing", playerid) > 0 || GetGVarInt("Digging", playerid) > 0)
	{
	    return SetPlayerPos_Fix(playerid, cx, cy, cz);
	}
	if(!PlayerCanUseHands(playerid) || GetGVarInt("FixVeh", playerid) == 1)
	{
		SendClientMessage(playerid, COLOR_WHITE, "没有手开门");
		SetPlayerPos_Fix(playerid, cx, cy, cz);
		return 1;
	}
	if(VehData[vehicleid][vLock] == 1)
	{
	    if((IsPlayerVehicle(playerid, vehicleid) || IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid) || IsGangVehicle(PlayerData[playerid][pGang], vehicleid) ||
		IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid)) || (GetGVarInt("Racing", playerid) != STATUS_FINISHED && vehicleid == GetGVarInt("RaceVeh", playerid)) ||
		(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid) && PlayerData[playerid][pJob] == JOB_CARSELL)
	    {
	        SetVehicleLock(playerid, vehicleid, 0);
		}
		else
		{
			SetPlayerPos_Fix(playerid, cx, cy, cz);
			return 1;
		}
	}
	else if(VehData[vehicleid][vLock] == 2 && ispassenger == 0)
	{
	    if((IsPlayerVehicle(playerid, vehicleid) || IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid) || IsGangVehicle(PlayerData[playerid][pGang], vehicleid) ||
		IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid)) || (GetGVarInt("Racing", playerid) != STATUS_FINISHED && vehicleid == GetGVarInt("RaceVeh", playerid)))
	    {
	        SetVehicleLock(playerid, vehicleid, 0);
		}
		else
		{
			SetPlayerPos_Fix(playerid, cx, cy, cz);
			return 1;
		}
	}
	if(ispassenger == 0)
	{
		switch(VehData[vehicleid][vType])
		{
		    case VTYPE_NONE:
			{
				if(GetVehicleModel(vehicleid) == 408 && PlayerData[playerid][pJob] != JOB_TRASH)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是工作车,非员工无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
				else if(IsATrailerTruck(vehicleid) && PlayerData[playerid][pJob] != JOB_TRUCK)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是工作车,非员工无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
				else if(GetVehicleModel(vehicleid) == 448 && PlayerData[playerid][pJob] != JOB_PAPER && PlayerData[playerid][pJob] != JOB_FD)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是工作车,非员工无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
				else if(GetVehicleModel(vehicleid) == 453 && PlayerData[playerid][pJob] != JOB_FISHER)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是渔船,非渔夫无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
				else if(GetVehicleModel(vehicleid) == 525 && PlayerData[playerid][pJob] != JOB_TOW)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是工作车,非道路救援工人无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
				else if(IsAVendor(vehicleid) && PlayerData[playerid][pJob] != JOB_FVENDOR)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 这是工作车,非餐车员工无法使用");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
			}
			case VTYPE_MW:
			{
			    if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE && PlayerData[playerid][pGang] == GANG_ID_NONE && PlayerData[playerid][pDepartment] == 0)
				{
				    SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何组织,无法驾驶这个载具");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
			}
			case VTYPE_MISSION:
			{
			    if(GetGVarInt("VehMission", vehicleid) != GetGVarInt("Mission", playerid))
				{
				    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这台车的钥匙,无法驾驶这个载具");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
			}
			case VTYPE_ARENA:
			{
			    if(GetGVarInt("pArena", playerid) != ARENA_VEHICLE)
				{
				    SendClientMessage(playerid, COLOR_WHITE, "错误: 你尚未参加载具竞技场,无法驾驶这个载具");
					SetPlayerPos_Fix(playerid, cx, cy, cz);
					return 1;
				}
			}
		}

	}
	return 1;
}

public OnPlayerJackVehicle(playerid, victimid, vehicleid, bool:ninjajack)
{
	new Float:px, Float:py, Float:pz;
	GetPlayerPos(victimid, px, py, pz);

    /*if(ninjajack) SetPlayerCrime(playerid, CRIME_KILL, VICTIM_PLAYER, victimid, 0, px, py, pz);//利用抢车bug杀人
	else SetPlayerCrime(playerid, CRIME_HIJACK, VICTIM_PLAYER, victimid, 0, px, py, pz);//劫车罪行*/
	SetPlayerCrime(playerid, CRIME_HIJACK, VICTIM_PLAYER, victimid, 0, px, py, pz);//劫车罪行
    return 1;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
	new string[144];
	SetGVarInt("ExitingVehicle", vehicleid, playerid);
	if((VehData[vehicleid][vType] == VTYPE_NONE || VehData[vehicleid][vType] == VTYPE_MW || VehData[vehicleid][vType] == VTYPE_ARENA) && VehData[vehicleid][vLock] > 0)
	{
	    SetVehicleLock(playerid, vehicleid, 0);
	}
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
        SetGVarInt("Occupied", 0, vehicleid);
        if(vehicleid == GetGVarInt("ERVeh", playerid))
		{
		    new raceid = GetGVarInt("ERaceID", playerid);
		    if(GetGVarInt("EditRCP", playerid) != 0)
		    {
                format(string, sizeof(string), "** 你结束了赛道 %s 的编辑,资料已储存", RaceData[raceid][rtName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
				SaveRaceData(raceid);
				DisablePlayerCheckpoint(playerid);
			}
			else if(GetGVarInt("ERStart", playerid) != 0)
			{
			    format(string, sizeof(string), "** 你结束了赛道 %s 的编辑,资料已储存", RaceData[raceid][rtName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
				RaceData[raceid][rtMapIcon] = CreateDynamicMapIcon(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 53, -1, 0, 0, -1, 200.0, MAPICON_LOCAL_CHECKPOINT);
		        format(string, sizeof(string), ""#TEXT_PINK"<<"#TEXT_WHITE"%s"#TEXT_PINK">>\n"#TEXT_WHITE"人数: 1-%d\n"#TEXT_YELLOW"按Y键加入竞速", RaceData[raceid][rtName], RaceData[raceid][rtMaxRacers]);
		    	RaceData[raceid][rt3DText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 60.0);
		        SaveRaceData(raceid);
			}
		    DeleteGVar("EditRCP", playerid);
		    DeleteGVar("ERStart", playerid);
		    DestroyVehicle(GetGVarInt("ERVeh", playerid));
			DeleteGVar("ERVeh", playerid);
			DeleteGVar("ERaceID", playerid);
		}
		if(GetGVarInt("TaxiOn", playerid) != 0) {TaxiStop(playerid, vehicleid);}
		//if(GetGVarInt("BusOn", playerid) != 0) {StopBus(playerid, vehicleid);}

		if(GetGVarInt("EditBS", playerid) == 1)
		{
		    new rid = GetGVarInt("EBRID", playerid);
            format(string, sizeof(string), "** 你结束了客运路线 %s 的编辑,资料已储存", BusRoute[rid][brName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SaveBusRoute(rid);
			DisablePlayerCheckpoint(playerid);
		    DeleteGVar("EditBS", playerid);
			DeleteGVar("EBRID", playerid);
		}
    }
	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
    new vehicleid, string[144];
    ForEachPlayer(i)
    {
        if(GetGVarInt("WatchTV", i) == 4 && GetGVarInt("TVPlayer", i) == playerid)
        {
            PlayerWatchingPlayer(i, playerid);
        }
    	if(newstate == PLAYER_STATE_DRIVER || newstate == PLAYER_STATE_PASSENGER)
    	{
            if(GetPlayerVehicleID(playerid) == GetPlayerVehicleID(i))
            {
	            if(PlayerData[i][pWanted] < PlayerData[playerid][pWanted] && PlayerData[i][pDepartment] != DEPT_POLICE)
	            {
	                if(PlayerData[playerid][pWanted] > 0)
	                {
	                    format(string, sizeof(string), "与 %s 共犯", PlayerData[playerid][pName]);
	                    SetPlayerWanted(i, PlayerData[playerid][pWanted], string);
	                    PlayerData[i][pWantedCount] = PlayerData[playerid][pWantedCount];
	                }
	            }
	            else if(PlayerData[i][pWanted] > PlayerData[playerid][pWanted] && PlayerData[playerid][pDepartment] != DEPT_POLICE)
	            {
	                if(PlayerData[i][pWanted] > 0)
	                {
	                    format(string, sizeof(string), "与 %s 共犯", PlayerData[i][pName]);
	                    SetPlayerWanted(playerid, PlayerData[i][pWanted], string);
	                    PlayerData[playerid][pWantedCount] = PlayerData[i][pWantedCount];
	                }
	            }
	        }
        }
    }

    if(newstate == PLAYER_STATE_DRIVER)
	{
        RemovePlayerAttachedObject(playerid, 9);

	    new engine, lights, alarm, doors, bonnet, boot, objective;
	    vehicleid = GetPlayerVehicleID(playerid);
		SetGVarInt("CurV", vehicleid, playerid);
	    if(IsABike(vehicleid))
	    {
		    GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			SetVehicleParamsEx(vehicleid, 1, lights, alarm, doors, bonnet, boot, objective);
		}
	    SetGVarInt("Occupied", 1, vehicleid);
		SendClientMessage(playerid, COLOR_WHITE, "按"#TEXT_YELLOW"按键2"#TEXT_WHITE"显示载具面板");
		if(GetGVarInt("RaceVeh", playerid) == vehicleid && GetGVarInt("Racing", playerid) == STATUS_STARTED)
		{
		    DeleteGVar("RaceLeaveCount", playerid);
			SendClientMessage(playerid, COLOR_WHITE, "_");
		    SetPlayerArmedWeapon(playerid, 0);
		}
		if(GetGVarInt("SpeVeh", vehicleid) > 0)
		{
		    switch(GetGVarInt("SpeVeh", vehicleid))
		    {
		        case 1://钉刺载具
		        {
		            SetPlayerArmedWeapon(playerid, 0);
					SendClientMessage(playerid, COLOR_WHITE, "这个载具装有钉刺发射器,按左ALT可以向后方发射钉刺");
		        }
		        case 2://地雷载具
		        {
		            SetPlayerArmedWeapon(playerid, 0);
		            SendClientMessage(playerid, COLOR_WHITE, "这个载具装有地雷发射器,按左ALT可以向后方放置地雷");
		        }
		        case 3://轰炸载具
		        {
		            SetPlayerArmedWeapon(playerid, 0);
		            SendClientMessage(playerid, COLOR_WHITE, "这个载具装有炸弹投掷器,按左ALT可以向下方投递炸弹");
		        }
		    }
		}
		switch(VehData[vehicleid][vType])
		{//优化
			case VTYPE_NONE:
			{
				if(!IsPlayerBusy(playerid))
				{
					if(GetVehicleModel(vehicleid) == 408 && PlayerData[playerid][pJob] == JOB_TRASH)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这是垃圾车,按左Ctrl键可以花4点体力接受工作");
					}
					else if(IsATrailerTruck(vehicleid) && PlayerData[playerid][pJob] == JOB_TRUCK)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这是联结车,挂载油罐车或货柜之后,按左Ctrl键可以花4点体力接受工作");
					}
					else if(GetVehicleModel(vehicleid) == 453 && PlayerData[playerid][pJob] == JOB_FISHER)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这是渔船,在静止状态时按左Ctrl键可以花20点体力下网开始捕鱼");
					}
				}
			}
			case VTYPE_PLAYER:
			{
				if(VehData[vehicleid][vOwned] == 0)
				{
        			if(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid && PlayerData[playerid][pJob] == JOB_CARSELL)
		    		{
		    		    format(string, sizeof(string), "这台车是你目前负责销售的 %s,价值$%d,当你在副驾驶座时,客户可以试驾这台车", GetVehicleName(GetVehicleModel(vehicleid)), VehData[vehicleid][vPrice]);
						SendClientMessage(playerid, COLOR_WHITE, string);
		    		}
		    		else if(GetGVarInt("DealerCar", vehicleid) == 1 && GetPlayerVehicleID(GetGVarInt("CarDealer", vehicleid)) == vehicleid && GetPlayerState(GetGVarInt("CarDealer", vehicleid)) == PLAYER_STATE_PASSENGER)
		    		{
						SendClientMessage(playerid, COLOR_WHITE, "你可以试驾这台车来决定是否要购买,当决定要购买之后请告知销售员下车");
		    		}
		    		else
		    		{
						ShowPlayerBuyVehMenu(playerid, vehicleid);
					}
				}
				else if(IsPlayerVehicle(playerid, vehicleid))
				{
				    format(string, sizeof(string), "** 这是你的%s", GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_FADEGREEN, string);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"这是属于%s的%s,你没有权限发动引擎", GetPlayerSqlName(VehData[vehicleid][vOwner]), GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
			}
			case VTYPE_COMPANY:
			{
				if(IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid))
				{
				    format(string, sizeof(string), "** 这是企业的%s", GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_BLUEGREEN, string);
				}
				else
				{
				    new comid = CompanySqlIDToID(VehData[vehicleid][vOwner]);
				    if(comid == -1)
				    {
				        VehData[vehicleid][vType] = VTYPE_PLAYER;
				        VehData[vehicleid][vOwned] = 0;
				    }
				    else
				    {
					    format(string, sizeof(string), ""#TEXT_WHITE"这是属于企业%s的%s,你没有权限发动引擎", CompanyData[comid][comName], GetVehicleName(VehData[vehicleid][vModel]));
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
			}
			case VTYPE_GANG:
			{
				if(IsGangVehicle(PlayerData[playerid][pGang], vehicleid))
				{
				    format(string, sizeof(string), "** 这是帮会的%s", GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_FADERED, string);
				}
				else
				{
				    new gangid = GangSqlIDToID(VehData[vehicleid][vOwner]);
				    if(gangid == -1)
				    {
				        VehData[vehicleid][vType] = VTYPE_PLAYER;
				        VehData[vehicleid][vOwned] = 0;
				    }
				    else
				    {
					    format(string, sizeof(string), ""#TEXT_WHITE"这是属于帮会%s的%s,你没有权限发动引擎", GangData[gangid][gName], GetVehicleName(VehData[vehicleid][vModel]));
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
			}
			case VTYPE_DEPARTMENT:
			{
				if(IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid))
				{
				    format(string, sizeof(string), "** 这是公部门的%s", GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_FADEBLUE, string);
				}
				else
				{
				    new dpid = VehData[vehicleid][vOwner];
				    if(dpid == -1)
				    {
				        VehData[vehicleid][vType] = VTYPE_PLAYER;
				        VehData[vehicleid][vOwned] = 0;
				    }
				    else
				    {
					    format(string, sizeof(string), ""#TEXT_WHITE"这是属于%s的%s,你没有权限发动引擎", Department[dpid][dpName], GetVehicleName(VehData[vehicleid][vModel]));
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
			}
			case VTYPE_RENT:
			{
				if(GetGVarInt("RentCar", playerid) != vehicleid)
				{
        			new vprice = VehData[vehicleid][vPrice];
					format(string, sizeof(string), ""#TEXT_YELLOW"租借这个%s每次需支付"#TEXT_FADEGREEN"$%d\n"#TEXT_WHITE"确定要租借吗?", GetVehicleName(GetVehicleModel(vehicleid)), vprice);
					ShowPlayerDialog(playerid, DIALOG_RENTCAR, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"租借这个载具", string, "确定", "离开");
				}
				else
				{
				    format(string, sizeof(string), "** 这是你租借的%s", GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_FADEYELLOW, string);
				}
			}
			case VTYPE_MW:
			{
				if(GetGVarInt("VehMWLoaded", vehicleid) == 1)
				{
					new mwid = GetGVarInt("VehMW", vehicleid),
						mwitemid = MatWar[mwid][mwMatID];
					format(string, sizeof(string), "** 这个载具装着战争货物"#TEXT_YELLOW"%s"#TEXT_WHITE",前往你的组织地产后打开"#TEXT_FADEGREEN"载具面板"#TEXT_WHITE"将货物卸载到地产内", ItemsList_USE[mwitemid][iuName]);
					SendClientMessage(playerid, COLOR_YELLOW, string);
					for(new i = 0; i < MAX_PLAYERS; i++)
					{
					    if(!IsPlayerNPC(i)) continue;
					    if(GetGVarInt("NPCMW", i) == 1 && GetGVarInt("NPCMWID", i) == mwid)
					    {
					        NPCToTarget(i, TARGET_PLAYER, playerid, 1);
					    }
					}
				}
			}
			case VTYPE_SERVICE:
			{
				SendClientMessage(playerid, COLOR_WHITE, "这是服务车辆,在一段时间后将会自动销毁,请勿在里面放置物品");
                SetGVarInt("DelVehOnUns", vehicleid, playerid);//在载具StreamOut时删除
			}
			case VTYPE_MISSION:
			{
			    new mission = GetGVarInt("VehMission", vehicleid);
			    if(GetGVarInt("Mission", playerid) == mission)
	    		{
	    		    switch(mission)
	    		    {
	    		        case 20:
	    		        {
			    		    new Float:nx, Float:ny, Float:nz, nearest;
							format(string, sizeof(string), ""#TEXT_FADEBLUE"%s"#TEXT_WHITE"取得了其中一台"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
					        SendMissionMessage(mission, COLOR_WHITE, string);
					        SetPlayerCheckpoint(playerid, 2129.1331, -1139.3533, 25.3326, 8.0);
					        SendClientMessage(playerid, COLOR_WHITE, "将"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"送回"#TEXT_RED"西门的车行");
					        ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_SIMEON && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 10.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(8))
										{
											case 0: SendRangeNPCMessage(20.0, n, "车主说: 这车可花了我大半辈子积蓄!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "车主说: 我就知道这台车这么便宜果然有问题!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "车主说: 你在做什么!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "车主说: 给我下车!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 4: SendRangeNPCMessage(20.0, n, "车主说: 这是我的车!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}
										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
						}
						case 22:
	    		        {
			    		    new Float:nx, Float:ny, Float:nz, nearest;
							format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
					        SendMissionMessage(mission, COLOR_WHITE, string);
					        SetPlayerCheckpoint(playerid, 2129.1331, -1139.3533, 25.3326, 8.0);
					        SendClientMessage(playerid, COLOR_WHITE, "将"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"送回"#TEXT_RED"西门的车行");
					        ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_SIMEON && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 15.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(8))
										{
											case 0: SendRangeNPCMessage(20.0, n, "保安说: 这车可是你高攀不起的!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "保安说: 臭乞丐!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "保安说: 保安!保安!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "保安说: 我们这里有状况", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}
										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
						}
						case 23:
						{
						    new Float:nx, Float:ny, Float:nz, nearest;
					        ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_CRACK && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 30.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
						}
						case 24:
			            {
			                new Float:nx, Float:ny, Float:nz, nearest;
			                ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_LOST && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(8))
										{
											case 0: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 别动我的宝贝!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 这家伙不是我们的人!干掉他!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 干掉这个小偷!兄弟们!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}

										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
			            }
			            case 26:
	    		        {
			    		    new Float:nx, Float:ny, Float:nz, nearest;
							format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
					        SendMissionMessage(mission, COLOR_WHITE, string);
					        SetPlayerCheckpoint(playerid, 1794.6018, -2147.5149, 13.3466, 12.0);
					        SendClientMessage(playerid, COLOR_WHITE, "将"#TEXT_YELLOW"目标车辆"#TEXT_WHITE"送至"#TEXT_RED"西萨的住处");
					        ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_CRACK && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 30.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(8))
										{
											case 0: SendRangeNPCMessage(20.0, n, "改车族说: 你要对我的爱车做什么!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "改车族说: 我们这里有人来砸场子了?!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "改车族说: 把他干掉!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "改车族说: 你要车自己去买一台好吗", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}
										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
						}
						case 29:
	    		        {
	    		            if(GetGVarInt("MissionStage", mission) < 3)
	    		            {
				    		    new Float:nx, Float:ny, Float:nz, nearest;
								format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标货车", PlayerData[playerid][pName]);
								SendMissionMessage(mission, COLOR_WHITE, string);
						        UpdateGlobalMission(29, 3);
						        ForEachNPC(n)
								{
									if(GetGVarInt("NPCTeam", n) == NTEAM_GOV && GetGVarInt("NPCTType", n) == TARGET_NONE)
									{
										FCNPC_GetPosition(n, nx, ny, nz);
										FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 30.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
										if(nearest == playerid)
										{
											switch(random(8))
											{
												case 0: SendRangeNPCMessage(20.0, n, "军人说: 我们这里有状况!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
												case 1: SendRangeNPCMessage(20.0, n, "军人说: 请求支援!有人劫持了武装", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
												case 2: SendRangeNPCMessage(20.0, n, "军人说: 你在做什么!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											}
											NPCToTarget(n, TARGET_PLAYER, playerid, 1);
										}
									}
								}
							}
						}
						case 33:
						{
						    if(GetGVarInt("MSVehLoaded", vehicleid) == 1)
						    {
						    	new target = GetGVarInt("MSVehTarget", vehicleid);
						        SetPlayerRaceCheckpoint(playerid, 3, TorenoM2TargetPos[target][0], TorenoM2TargetPos[target][1], TorenoM2TargetPos[target][2]+60.0, 411.4756, 2504.3569, 16.4844, 15.0);
							    SendClientMessage(playerid, COLOR_WHITE, "将"#TEXT_YELLOW"飞机"#TEXT_WHITE"驾驶到"#TEXT_RED"补给坐标"#TEXT_WHITE"来空投物资");
							}
						}
						case 35:
	    		        {
	    		            new Float:nx, Float:ny, Float:nz, nearest;
	    		            if(GetGVarInt("MissionStage", mission) < 3)
	    		            {
								format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
								SendMissionMessage(mission, COLOR_WHITE, string);
						        UpdateGlobalMission(35, 3);
						        ForEachNPC(n)
								{
									if(GetGVarInt("NPCTeam", n) == NTEAM_DANANG && GetGVarInt("NPCTType", n) == TARGET_NONE)
									{
										FCNPC_GetPosition(n, nx, ny, nz);
										FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
										if(nearest == playerid)
										{
											switch(random(10))
											{
												case 0: SendRangeNPCMessage(20.0, n, "越南帮成员说: 我们可不会让抢到的货物就这样飞了!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
												case 1: SendRangeNPCMessage(20.0, n, "越南帮成员说: 你们三合会想抢回来门都没有!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
												case 2: SendRangeNPCMessage(20.0, n, "越南帮成员说: 你以为这是路边捡来的车吗!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
												case 3: SendRangeNPCMessage(20.0, n, "越南帮成员说: 这可是我们抢到的上等货物,想要自己去抢别的!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											}

											NPCToTarget(n, TARGET_PLAYER, playerid, 1);
										}
									}
								}
							}
						}
					}
				}
			}
		}
		if(GetGVarInt("VOutEstate", vehicleid) != 0)
		{
		    new eid = GetGVarInt("VOutEID", vehicleid);
		    format(string, sizeof(string), ""#TEXT_WHITE"按油门键将这个%s从%s内取出来", GetVehicleName(VehData[vehicleid][vModel]), EstateData[eid][eName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
	}
	else if(newstate == PLAYER_STATE_PASSENGER)
	{
        RemovePlayerAttachedObject(playerid, 9);
	    vehicleid = GetPlayerVehicleID(playerid);
	    SetGVarInt("CurV", vehicleid, playerid);
   		if(VehData[vehicleid][vType] == VTYPE_PLAYER && VehData[vehicleid][vOwned] == 0)
		{
			if(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid && PlayerData[playerid][pJob] == JOB_CARSELL)
		    {
		    	format(string, sizeof(string), ""#TEXT_WHITE"这台车是你目前负责销售的 %s,价值$%d,你可以在副驾驶座按左Ctrl键控制这台车的引擎开关", GetVehicleName(GetVehicleModel(vehicleid)), VehData[vehicleid][vPrice]);
				SendClientMessage(playerid, COLOR_WHITE, string);
		    }
		}
		if(GetGVarInt("Taxi", vehicleid) == 1)
		{
			new driver = GetGVarInt("TaxiDriver", vehicleid);
			if(GetGVarInt("TaxiOn", driver) == 1)
			{
			    new fare = GetGVarInt("TaxiFare", driver),
					playername[MAX_PLAYER_NAME];
                if(PlayerData[playerid][pCash] < fare)
				{
				    RemovePlayerFromVehicle_Fix(playerid);
				    return SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不够支付车资!");
				}
				if(GetGVarInt("RequestTaxi", playerid) == 1)
				{
	                DeleteGVar("RequestTaxi", playerid);
	                UpdatePlayerColor(playerid);
				}
				GetPlayerName(driver, playername, MAX_PLAYER_NAME);
			    format(string, sizeof(string), ""#TEXT_WHITE"你登上了 %s 的计程车,你可以在暂停的地图画面向司机标记你的目的地", playername);
			    SendClientMessage(playerid, COLOR_WHITE, string);

			    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
			    format(string, sizeof(string), ""#TEXT_WHITE"%s 登上了你的计程车,请等待乘客指定目的地", playername);
			    SendClientMessage(playerid, COLOR_WHITE, string);
			    SetGVarInt("TaxiCost", fare, playerid);
			    SetGVarInt("TaxiCount", 30, playerid);
			    SetGVarInt("PTaxiDriver", driver, playerid);

			    SetGVarInt("TaxiOn", 2, driver);
			    RemoveVehicleAttachment(vehicleid, ATTACH_TAXI_LIGHT);
			}
			else if(GetGVarInt("TaxiOn", driver) == 2)
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"目前你与车上的其他人共乘这台计程车");
			    SendClientMessage(playerid, COLOR_WHITE, string);
			}
		}
        if(GetGVarInt("Bus", vehicleid) == 1)
		{
			new driver = GetGVarInt("BusDriver", vehicleid);
			if(GetGVarInt("BusOn", driver) != 0)
			{
				new cost = GetGVarInt("BusFare", driver),
					earned = GetGVarInt("BusEarned", driver),
					client = GetGVarInt("BusClient", driver),
					stopid = GetGVarInt("NextStop", playerid),
					playername[MAX_PLAYER_NAME];
				if(PlayerData[playerid][pCash] < cost)
				{
				    RemovePlayerFromVehicle_Fix(playerid);
				    return SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不够支付车资!");
				}
				GiveMoney(playerid, -cost);
				Log(moneylog, INFO, "%s(%d)付了公车钱$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], cost);
				SetGVarInt("BusEarned", earned+cost, driver);
				format(string, sizeof(string), "你登上客运了,车费一共是$%d,按H键可以呼叫下车铃", cost);
				SendClientMessage(playerid, COLOR_WHITE, string);

				GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
				format(string, sizeof(string), ""#TEXT_WHITE"%s 搭上了客运,你的收入增加了$%d", playername, cost);
				SendClientMessage(playerid, COLOR_WHITE, string);
                SetGVarInt("BusClient", client+1, driver);
		        SetStopCP(playerid, stopid);
			}
		}
		if(GetGVarInt("RequestTow", playerid) == 1)
		{
		    if(IsATowTruck(vehicleid))
		    {
		        new driver = GetVehicleDriver(vehicleid), playername[MAX_PLAYER_NAME];
		        if(driver != INVALID_PLAYER_ID && PlayerData[driver][pJob] == JOB_TOW && !IsPlayerBusy(driver))
		        {
		            ShowPlayerDialog(playerid, DIALOG_TOW_TO, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_LIGHTBLUE"道路救援", ""#TEXT_WHITE"请选择你的目的地\n最近的加油站	收费:$250\n最近的修车厂	收费:$250", "选择", "离开");
		            GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
					format(string, sizeof(string), ""#TEXT_WHITE"%s 搭上了拖吊车,请拖吊他的车辆并等待他选择运送的目的地", playername);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetGVarInt("PTowDriver", driver, playerid);
		        }
		    }
		}
	}
	else if(newstate == PLAYER_STATE_ONFOOT)
	{
	    if(oldstate == PLAYER_STATE_DRIVER)
	    {
			vehicleid = GetGVarInt("CurV", playerid);
		    if(GetGVarInt("Racing", playerid) == STATUS_STARTED)
			{
			    SetGVarInt("RaceLeaveCount", 15, playerid);
			    SetTimerEx("RaceLeaveCount", 1000, 0, "i", playerid);
				SendClientMessage(playerid, COLOR_WHITE, "你必须在15秒内回到你的比赛载具,否则将失败比赛资格!");
			}
			if(GetGVarInt("FVendoring", playerid) != 0)
			{
			    DeleteGVar("FVendoring", playerid);
      			UpdatePlayerVehText(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "你离开了餐车结束营业");
			}
			SetPlayerWeaponColored(playerid);

		    ForEachPlayer(i)
		    {
		        if(GetPlayerVehicleID(i) == vehicleid && i != playerid)
		        {
		            if(IsArmed(i))
		            {
			            SetPlayerArmedWeapon(i, 0);
						SendClientMessage(i, COLOR_WHITE, "这个载具的驾驶离开了,你无法使用这武器在载具上进行射击");
					}
 				}
		    }
		    DeleteGVar("CurV", playerid);
		}
		if(oldstate == PLAYER_STATE_PASSENGER)
	    {
	        vehicleid = GetGVarInt("CurV", playerid);
		    if(GetGVarInt("TaxiCount", playerid) > 0)
			{
				PayTaxi(playerid);
			}
			else if(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid)
			{
				ForEachPlayer(i)
		    	{
		        	if(GetPlayerVehicleID(i) == vehicleid && i != playerid)
		        	{
						SendClientMessage(i, COLOR_WHITE, "这台车的销售员下车了,试驾结束");
		                RemovePlayerFromVehicle_Fix(i);
		            }
 				}
		    }
		    DeleteGVar("CurV", playerid);
		}
	}
	return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{
    new string[144],
    vehicleid = GetPlayerVehicleID(playerid);
    if(GetGVarInt("Mission", playerid) > 0)
    {
        new mission = GetGVarInt("Mission", playerid);
        switch(mission)
        {
            case 20:
            {
        		if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 20)
				    {
				        new Float:vhp;
				        GetVehicleHealth(vehicleid, vhp);
				        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了一台"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
			            SendMissionMessage(mission, COLOR_WHITE, string);
			            if(vhp > 500.0) SetGVarInt("MSBonus", GetGVarInt("MSBonus", mission) + floatround(vhp)/2, mission);
				        //DeleteVehicle(vehicleid);
				        SetGVarInt("VUnStreamDel", 1, vehicleid);
				        VehData[vehicleid][vLock] = 1;
				        RemovePlayerFromVehicle_Fix(playerid);
				        UpdateGlobalMission(20, 2);
				    }
				}
			}
			case 22:
            {
        		if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 22)
				    {
				        new Float:vhp;
				        GetVehicleHealth(vehicleid, vhp);
				        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
			            SendMissionMessage(mission, COLOR_WHITE, string);
			            if(vhp > 500.0) SetGVarInt("MSBonus", floatround(vhp), mission);
				        //DeleteVehicle(vehicleid);
				        SetGVarInt("VUnStreamDel", 1, vehicleid);
				        VehData[vehicleid][vLock] = 1;
				        RemovePlayerFromVehicle_Fix(playerid);
				        UpdateGlobalMission(22, 3);
				    }
				}
			}
			case 23:
            {
        		if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 23)
				    {
				        new trailerid = GetVehicleTrailer(vehicleid);
				        if(trailerid == GetGVarInt("MissionTrailer", mission))
				        {
					        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
				            SendMissionMessage(mission, COLOR_WHITE, string);
				            RemovePlayerFromVehicle_Fix(playerid);
				            SetGVarInt("VUnStreamDel", 1, vehicleid);
				            VehData[vehicleid][vLock] = 1;
				            SetGVarInt("VUnStreamDel", 1, trailerid);
					        UpdateGlobalMission(23, 3);
					    }
					    else SendClientMessage(playerid, COLOR_WHITE, "** 你必须将"#TEXT_YELLOW"目标油罐"#TEXT_WHITE"一起送回来这里才可以完成任务");
				    }
				}
			}
			case 26:
			{
			    if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 26 && GetGVarInt("VUnStreamDel", vehicleid) == 0)
				    {
				        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了一台"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
			            SendMissionMessage(mission, COLOR_WHITE, string);
				        //DeleteVehicle(vehicleid);
				        SetGVarInt("VUnStreamDel", 1, vehicleid);
				        VehData[vehicleid][vLock] = 1;
				        RemovePlayerFromVehicle_Fix(playerid);
				        UpdateGlobalMission(26, 3);
				    }
				}
			}
			case 27:
			{
			    if(GetGVarInt("PlayerMSDrop", playerid) == 1)
			    {
			        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
				    SendMissionMessage(mission, COLOR_WHITE, string);
				    DeleteGVar("PlayerMSDrop", playerid);
				    UpdateGlobalMission(27, 4);
			    }
			}
			case 29:
			{
			    if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 29 && GetGVarInt("MissionTarget", mission) == vehicleid && GetGVarInt("VUnStreamDel", vehicleid) == 0)
				    {
				        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了一台"#TEXT_YELLOW"目标货车", PlayerData[playerid][pName]);
			            SendMissionMessage(mission, COLOR_WHITE, string);
				        //DeleteVehicle(vehicleid);
				        SetGVarInt("VUnStreamDel", 1, vehicleid);
				        VehData[vehicleid][vLock] = 1;
				        RemovePlayerFromVehicle_Fix(playerid);
				        UpdateGlobalMission(29, 4);
				    }
				}
			}
			case 30:
			{
			    if(GetGVarInt("PlayerMSDrop", playerid) == 1)
			    {
			        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
				    SendMissionMessage(mission, COLOR_WHITE, string);
				    DeleteGVar("PlayerMSDrop", playerid);
				    UpdateGlobalMission(30, 4);
			    }
			}
			case 35:
			{
			    if(IsPlayerInAnyVehicle(playerid))
			    {
				    if(VehData[vehicleid][vType] == VTYPE_MISSION && GetGVarInt("VehMission", vehicleid) == 35 && GetGVarInt("MissionTarget", mission) == vehicleid && GetGVarInt("VUnStreamDel", vehicleid) == 0)
				    {
				        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
			            SendMissionMessage(mission, COLOR_WHITE, string);
				        //DeleteVehicle(vehicleid);
				        SetGVarInt("VUnStreamDel", 1, vehicleid);
				        VehData[vehicleid][vLock] = 1;
				        RemovePlayerFromVehicle_Fix(playerid);
				        UpdateGlobalMission(35, 4);
				    }
				}
			}
			case 37:
			{
			    if(GetGVarInt("PlayerMSDrop", playerid) == 1)
			    {
			        format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功运送了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
				    SendMissionMessage(mission, COLOR_WHITE, string);
				    DeleteGVar("PlayerMSDrop", playerid);
				    UpdateGlobalMission(37, 4);
			    }
			}
		}
    }
	else if(GetGVarInt("Trashing", playerid) == 99)
	{
	    if(GetVehicleModel(vehicleid) != 408) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这不是垃圾车");
	    new exp = 2000,
	        Float:wdistance = GetGVarFloat("WorkDistance", playerid),
			salary = floatround(wdistance) + 500;
		GivePlayerExp(playerid, exp, EXP_JOB);
        SetGVarInt("Partner", -1, playerid);
		DisablePlayerCheckpoint(playerid);
		LimitData[playerid][plPayCheck] += salary;
		format(string, sizeof(string), " ** "#TEXT_LIGHTGREEN"完成"#TEXT_WHITE": 垃圾处理完成,薪水$%d将会在整点时汇入银行帐户", salary);
	    SendClientMessage(playerid, COLOR_WHITE, string);
		SetGVarFloat("WorkDistance", 0.0, playerid);
		DeleteGVar("Trashing", playerid);
    	DeleteGVar("TrashID", playerid);
    	DeleteGVar("TrashAmount", playerid);
		ShowPTD(playerid, 1, 1);
		RecordData[playerid][prJTrash] ++;
		RepairVehicle(vehicleid);
		SetPlayerTimerEx(playerid, "UnFreeze", 500, 0, "i", playerid);
		SetGVarInt("CarryTrash", 0, playerid);
		RemovePlayerAttachedObject(playerid, 8);
		if(!PlayerHaveItem(playerid, 2, 29))
		{
			SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了垃圾清洁工造型,请至背包查看");
			GivePlayerItem(playerid, 2, 29, 1);
		}
	    return 1;
	}
	else if(GetGVarInt("FisherBoat", playerid) == vehicleid && GetGVarInt("SellingFish", playerid) == 1)
	{
	    new value = GetPlayerFisheriesValue(playerid),
	        exp = GetPlayerTotalFisheries(playerid)*30;
	    Fishery[playerid] = EMPTY_FISHERY;
	    DeleteGVar("FisherBoat", playerid);
	    DeleteGVar("SellingFish", playerid);
	    DisablePlayerCheckpoint(playerid);
	    if(GetGVarInt("FarSell", playerid) == 1)
	    {
	        value = value*10; // 渔夫从 4倍到10倍
	        DeleteGVar("FarSell", playerid);
	    }
	    GiveMoney(playerid, value);
	    Log(moneylog, INFO, "%s(%d)卖出了渔夫渔获,赚得$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], value);
	    GivePlayerExp(playerid, exp, EXP_JOB);
	    format(string, sizeof(string), "** 你将你的渔获顺利卖出了,赚得了"#TEXT_FADEGREEN"$%d", value);
		SendClientMessage(playerid, COLOR_WHITE, string);
		ShowPTD(playerid, 1, 1);
	}
	else if(GetGVarInt("Towing", playerid) != 0)
	{
	    if(IsATowTruck(vehicleid))
	    {
	        new towclient = -1;
	        ForEachPlayer(i)
	        {
	            if(GetPlayerVehicleID(i) != vehicleid || playerid == i) continue;
	            if(GetGVarInt("PTowDriver", i) == playerid)
	            {
	                towclient = i;
	            }
	        }
	    	if(towclient != -1)
			{
				SendClientMessage(playerid, COLOR_WHITE, "** 已顺利到达目的地,你可以协助顾客修车或是加油,薪水"#TEXT_FADEGREEN"$1000"#TEXT_WHITE"将会在整点时汇入你的户头");
				SendClientMessage(towclient, COLOR_YELLOW, "** 顺利到达目的地,已付给拖吊车司机$250");
				LimitData[playerid][plPayCheck] += 1000;
				GiveMoney(towclient, -250);
				Log(moneylog, INFO, "%s(%d)使用拖吊车服务花费了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 250);
			}
			DisablePlayerCheckpoint(playerid);
			DeleteGVar("Towing", playerid);
		}
	}
	else if(GetGVarInt("Cooking", playerid) != 0)
	{
		if(GetPlayerRemainingSpace(playerid) < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包空间不足");
		if(PlayerData[playerid][pStamina] < 2.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足制作餐点");
		PlayerData[playerid][pStamina] -= 2.0;
	    DisablePlayerCheckpoint(playerid);
	    GameTextForPlayer(playerid, "~w~烹饪中...", 8000, 3);
		ApplyAnimationEx(playerid, "SHOP", "SHP_SERVE_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
		SetPlayerTimerEx(playerid, "Cooked", 8000, 0, "i", playerid);
	}
	else if(GetGVarInt("FoodDelivering", playerid) == 1 && GetPlayerState(playerid) == 1)
	{
	    if(!PlayerHaveItem(playerid, 1, 5) && !PlayerHaveItem(playerid, 1, 9))
		{
			SendClientMessage(playerid, COLOR_WHITE, "你身上没有任何餐点可以运送");
		}
		else
		{
		    new eid = GetGVarInt("FDTo", playerid),
				exp = 1550, playername[MAX_PLAYER_NAME],
		        Float:wdistance = GetGVarFloat("WorkDistance", playerid),
				salary = floatround(wdistance) + 500;

			if(PlayerHaveItem(playerid, 1, 5) > 0)
			{
			    GivePlayerItem(playerid, 1, 5, -1);
				GiveEstateItem(eid, -1, ITEM_USE, 5, 1);
			}
			else if(PlayerHaveItem(playerid, 1, 9) > 0)
			{
			    GivePlayerItem(playerid, 1, 9, -1);
				GiveEstateItem(eid, -1, ITEM_USE, 9, 1);
			}
			GivePlayerExp(playerid, exp, EXP_JOB);
			DisablePlayerCheckpoint(playerid);
			LimitData[playerid][plPayCheck] += salary;
			format(string, sizeof(string), " ** "#TEXT_LIGHTGREEN"完成"#TEXT_WHITE": 外送完成,薪水$%d将会在整点时汇入银行帐户", salary);
	   		SendClientMessage(playerid, COLOR_WHITE, string);
			SetGVarFloat("WorkDistance", 0.0, playerid);
			DeleteGVar("QuestTime", playerid);
			DeleteGVar("FoodDelivering", playerid);
	 		DeleteGVar("FDTo", playerid);
			ShowPTD(playerid, 1, 1);
			RecordData[playerid][prJFD] ++;

			GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
			ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
			format(string, sizeof(string), "** %s 将食物送达了这个地产 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);

			if(!PlayerHaveItem(playerid, 2, 31))
			{
				SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了速食店员造型,请至背包查看");
				GivePlayerItem(playerid, 2, 31, 1);
			}
		}
	}
	else if(GetGVarInt("BusOn", playerid) == 1)
	{
	    new rid = GetGVarInt("BusRoute", playerid),
	    	stopid = GetGVarInt("NextStop", playerid);
	    if(GetGVarInt("BusOn", playerid) == 1 && GetGVarInt("Bus", vehicleid) == 1)
	    {
	        DisablePlayerCheckpoint(playerid);
	        PlayerPlaySound(playerid, 1131, 0.0, 0.0, 0.0);
		    if(stopid + 1 == BusRoute[rid][brMaxStop])
		    {
		        new Float:wdistance = GetGVarFloat("WorkDistance", playerid),
					salary = floatround(wdistance/2),
					exp = salary, client = GetGVarInt("BusClient", playerid),
					earned = GetGVarInt("BusEarned", playerid);

				if(client > 3) salary = salary*2+1500;
				if(exp > 3000) exp = 3000;
				GivePlayerExp(playerid, exp, EXP_JOB);
				format(string, sizeof(string), "** 客运完程奖励,依距离获得额外薪水$%d以及经验值", salary);
				SendClientMessage(playerid, COLOR_FADEGREEN, string);
				SetGVarInt("BusEarned", earned+salary, playerid);

          		StopBus(playerid, vehicleid);
          		format(string, sizeof(string), "<<客运>> 已经到达终点站 "#TEXT_YELLOW"%s", BusStop[rid][stopid+1][bsName]);
		        ForEachPlayer(i)
		        {
		            if(GetPlayerVehicleID(i) == vehicleid)
		            {
                		DisablePlayerCheckpoint(i);
                		SendClientMessage(i, COLOR_FADEBLUE, string);
                	}
                }
		    }
		    else
		    {
		        new nextstop = stopid+1,
					Float:wdistance = GetPlayerDistanceFromPointEx(playerid, BusStop[rid][nextstop][bsX], BusStop[rid][nextstop][bsY], BusStop[rid][nextstop][bsZ]),
					fare = GetGVarInt("BusFare", playerid),
					comid = GetGVarInt("BusCom", vehicleid);
                SetGVarInt("NextStop", nextstop, playerid);
		        SetGVarFloat("WorkDistance", GetGVarFloat("WorkDistance", playerid) + wdistance, playerid);

		        format(string, sizeof(string), ""#TEXT_FADEBLUE"【%s客运】\n"#TEXT_LIGHTRED"路线:"#TEXT_YELLOW"%s\n"#TEXT_LIGHTRED"下一站:"#TEXT_YELLOW"%s\n"#TEXT_FADEGREEN"车费:$%d", CompanyData[comid][comName], BusRoute[rid][brName], BusStop[rid][nextstop][bsName], fare);
		        UpdateDynamic3DTextLabelText(VehicleStatus[vehicleid], COLOR_WHITE, string);
		        format(string, sizeof(string), "<<客运>> 下一站为 "#TEXT_FADEGREEN"%s", BusStop[rid][nextstop][bsName]);
		        if(GetGVarInt("Ringed", vehicleid) == 1)
		        {
		            DeleteGVar("Ringed", vehicleid);
				}
				TogglePlayerControllableEx(playerid, 0);
				SetPlayerTimerEx(playerid, "UnFreeze", 3000, 0, "i", playerid);
		        ForEachPlayer(i)
		        {
		            if(GetPlayerVehicleID(i) == vehicleid)
		            {
                		SetStopCP(i, stopid+1);
                		SendClientMessage(i, COLOR_FADEBLUE, string);
                	}
                }
		    }
		}
	}
	return 1;
}

public OnPlayerLeaveCheckpoint(playerid)
{
	return 1;
}

public OnRconCommand(cmd[])
{
	return 1;
}

public OnPlayerRequestSpawn(playerid)
{
	return 1;
}


public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{
	if(IsPlayerNPC(playerid)) return 1;
	new string[144], i, j;
	switch(GetPlayerState(playerid))
	{
		case 1:
		{
			if(GetGVarInt("TPPick", pickupid) == 1)
			{
				SetGVarInt("PickedTP", GetGVarInt("TPPickID", pickupid), playerid);
			}
		    else if(pickupid == curepick)
		    {
				new pworld = GetPlayerVirtualWorld(playerid);
		        if(GetGVarInt("AppMedic", playerid) > 0)
				{
				    if(GetGVarInt("HPUsed", pworld) == 1 && GetGVarInt("HPPatient", pworld) == playerid)
				    {
				        new doctorid = GetGVarInt("HPCureDoc", playerid),
							cost = GetGVarInt("MedicCost", playerid),
							type = GetGVarInt("AppMedic", playerid);
						if(pworld != GetPlayerVirtualWorld(doctorid)) return SendClientMessage(playerid, COLOR_WHITE, "诊治医生离开了医院,请等候他回来");
						if(!IsPlayerConnected(doctorid) || PlayerData[doctorid][pDepartment] != DEPT_MEDIC)
						{
						    DeleteGVar("HPUsed", pworld),
						    DeleteGVar("HPPatient", pworld),
						    DeleteGVar("HPCureDoc", playerid);
							return SendClientMessage(playerid, COLOR_WHITE, "诊治医生已经离线或已经不再是医生了,请等候其他医生接受你的预约");
						}
						DeleteGVar("AppMedic", playerid);
						TogglePlayerControllableEx(playerid, false);
						TogglePlayerControllableEx(doctorid, false);
				        ApplyAnimationEx(playerid, "BEACH", "PARKSIT_M_LOOP", 4.1, 1, 0, 0, 1, 0);
				        ApplyAnimationEx(doctorid, "OTB", "BETSLP_LOOP", 4.1, 1, 0, 0, 1, 0);
				        SetPlayerPos(playerid, -17.0738,149.4547,999.7769);
				        SetPlayerFacingAngle(playerid, 270.0);
				        SetPlayerPos(doctorid, -16.9318,150.4884,999.0519);
				        SetPlayerFacingAngle(doctorid, 180.0);
				        SetPlayerCameraPos(playerid, -14.8765,146.8557,999.0519);
				        SetPlayerCameraPos(doctorid, -14.8765,146.8557,999.0519);
				        SetPlayerCameraLookAt(playerid, -17.0738,149.4547,999.7769);
				        SetPlayerCameraLookAt(doctorid, -17.0738,149.4547,999.7769);
				        format(string, sizeof(string), "** 治疗开始了,费用一共是$%d,请等待疗程结束...", cost);
				        SendClientMessage(playerid, COLOR_NURSEPINK, string);
				        SendClientMessage(doctorid, COLOR_NURSEPINK, string);
				        GiveMoney(playerid, -cost);
				        Log(moneylog, INFO, "%s(%d)付出了医院诊疗费$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], cost);
				        SetPlayerTimerEx(playerid, "SetCureAnim", 500, false, "ii", playerid, doctorid, pworld);
				        SetPlayerTimerEx(playerid, "HPCureComplete", 20000, false, "iidd", playerid, doctorid, type, pworld);
				    }
				    else SendClientMessage(playerid, COLOR_WHITE, "这是诊疗的入口,你已经预约了可是目前尚未轮到你,请稍候");
				}
				else SendClientMessage(playerid, COLOR_WHITE, "这是诊疗的入口,当你有预约治疗且轮到你的时候,来这里可以开始接受治疗");
		    }
		    else
			{
				if(GetGVarInt("StovePick", pickupid) == 1 && GetGVarInt("ViewEstate", playerid) == 0) return SendClientMessage(playerid, COLOR_FADEYELLOW, "按Y键来使用这个炉子");
				else if(GetGVarInt("ChairPick", pickupid) == 1 && GetGVarInt("ViewEstate", playerid) == 0) return SendClientMessage(playerid, COLOR_FADEYELLOW, "按Y键来坐下");
				else if(GetGVarInt("BedPick", pickupid) == 1 && GetGVarInt("ViewEstate", playerid) == 0) return SendClientMessage(playerid, COLOR_FADEYELLOW, "按Y键来躺下");
				else if(GetGVarInt("RadioPick", pickupid) == 1 && GetGVarInt("ViewEstate", playerid) == 0) return SendClientMessage(playerid, COLOR_FADEYELLOW, "按Y键使用播放器播放音乐");
				else if(GetGVarInt("TVPick", pickupid) == 1 && GetGVarInt("ViewEstate", playerid) == 0) return SendClientMessage(playerid, COLOR_FADEYELLOW, "按Y键来看电视");
				else
				{
					for(i = 0, j = sizeof(DropItem); i < j; i++)
					{
						if(DropItem[i][idPickable] == 0) continue;
						if(DropItem[i][idPickup] == pickupid)
						{
							SetGVarInt("PickedDrop", DropItem[i][idItemID], playerid);
							SetGVarInt("PickedDropID", i, playerid);
							break;
						}
					}
				}
			}
		}
		case 2:
	    {
	        new Float:vhp,
	        vehicleid = GetPlayerVehicleID(playerid);
	        if(GetGVarInt("MCCP", pickupid) == 1)
			{
			    if(GetGVarInt("MCID", pickupid) == PlayerData[playerid][pGang])
			    {
			        if(IsAMotorBike(vehicleid))
			        {
		    			if(GetPlayerHealth_Fix(playerid) == 100.0 + PlayerData[playerid][pMaxHealth]) GiveArmour(playerid, 20.0);
		    			else GiveHealth(playerid, 20.0);
		    			GetVehicleHealth(vehicleid, vhp);
						if(vhp + 250.0 > 1000.0 + VehData[vehicleid][vArmour]) vhp = 1000.0 + VehData[vehicleid][vArmour];
						else vhp = vhp + 250.0;
						SetVehicleHealth(vehicleid, vhp);
			            SendClientMessage(playerid, COLOR_FADEBLUE, "** 开路蓝圈增益: 恢复了生命以及修复了机车");
			        }
			        else SendClientMessage(playerid, COLOR_WHITE, "你必须在机车上才能得到开路蓝圈的补给效果");
			    }
			    else SendClientMessage(playerid, COLOR_WHITE, "这不是属于你的帮会的开路蓝圈,没有任何效果");
			    return 1;
			}
			for(i = 0, j = MAX_STINGERS; i < j; i++)
			{
				if(Stinger[i][stgCreated] == 0) continue;
				if(Stinger[i][stgPickup1] == pickupid)
				{
				    PopVehicleTires(vehicleid);
				    if(GetGVarInt("OTStinger", i) == 1) DestroyStinger(i);
				    /*DestroyDynamicPickup(pickupid);
				    GetXYRightToAngle(Stinger[i][stgA], Stinger[i][stgX], Stinger[i][stgY], px, py, 1.5);
					Stinger[i][stgPickup1] = CreateDynamicPickup(1007, 14, px, py, Stinger[i][stgZ], Stinger[i][stgWorld]);*/
					return 1;
				}
				else if(Stinger[i][stgPickup2] == pickupid)
				{
				    PopVehicleTires(vehicleid);
				    if(GetGVarInt("OTStinger", i) == 1) DestroyStinger(i);
				    /*DestroyDynamicPickup(pickupid);
				    GetXYLeftToAngle(Stinger[i][stgA], Stinger[i][stgX], Stinger[i][stgY], px, py, 1.5);
					Stinger[i][stgPickup2] = CreateDynamicPickup(1007, 14, px, py, Stinger[i][stgZ], Stinger[i][stgWorld]);*/
					return 1;
				}
			}
			for(i = 0, j = MAX_LANDMINES; i < j; i++)
			{
				if(LandMine[i][lmCreated] == 0) continue;
				if(LandMine[i][lmPickup] == pickupid)
				{
				    CreateExplosion(LandMine[i][lmX], LandMine[i][lmY], LandMine[i][lmZ], 0, 8.0);
					DestroyLandMine(i);
					return 1;
				}
			}
		}
	}
	return 1;
}


public OnVehicleMod(playerid, vehicleid, componentid)
{
	return 1;
}

public OnPlayerSelectedMenuRow(playerid, row)
{
	return 1;
}

public OnPlayerExitedMenu(playerid)
{
	return 1;
}

public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{
    if(GetGVarInt("IEEing", playerid)){ApplyAnimationEx(playerid, "PED", "WALK_PLAYER", 4.1, 0, 1, 1, 0, 1000, 1);}
    if(newinteriorid == 0)
    {
        DeleteGVar("PlayerX", playerid);
	    DeleteGVar("PlayerY", playerid);
	    DeleteGVar("PlayerZ", playerid);
    }
	//gym
	if(GetGVarInt("FreeLifting", playerid) == 1)
	{
	    DeleteGVar("FreeLifting", playerid);
		DeleteGVar("WeightLift", playerid);
		ApplyAnimationEx(playerid, "freeweights", "gym_free_putdown", 1, 0, 0, 0, 1, 0, 1);
		SetTimerEx("LiftEnd", 3000, 0, "i", playerid);
		RemovePlayerAttachedObject(playerid, 9);
    	RemovePlayerAttachedObject(playerid, 8);
    	return 1;
	}
	//class
	if(GetGVarInt("Classing", playerid) > 0 && GetGVarInt("Concentration", playerid) != 0)
	{
		LeaveClass(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你离开学院,结束听课了");
	}
    //filming
    if(GetGVarInt("Filming", playerid) > CAMERA_OFF) PlayerStartFilming(playerid, GetGVarInt("Filming", playerid));
    //Gym Fight
    if(GetGVarInt("MoveFighting", playerid) > 0)
    {
        SetPlayerLeaveGymFight(playerid);
        SendClientMessage(playerid, COLOR_WHITE, "你离开了健身房,与教练的对练结束了");
    }
    UpdateGangZoneForPlayer(playerid);
	return 1;
}

public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	new string[144], playername[MAX_PLAYER_NAME], vehicleid,
	pstate = GetPlayerState(playerid);

	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    
	if(PRESSED(KEY_SUBMISSION))
	{
		switch(pstate)
		{
			case 1:{}
			case 2:
			{
				vehicleid = GetPlayerVehicleID(playerid);
				if(GetGVarInt("LilBike", vehicleid) == 1)
				{
					ShowPlayerDialog(playerid, DIALOG_LILBIKE, DIALOG_STYLE_MSGBOX, "载具面板", ""#TEXT_WHITE"确认要收回这个折叠单车?", "确认", "取消");
				}
				else if(!IsABike(vehicleid))
				{
					ShowPlayerVehiclePanel(playerid);
				}
				return 1;
			}
		}
	}
	if(PRESSED(KEY_ANALOG_RIGHT)) ShowPlayerKeyList(playerid);
	if(PRESSED(KEY_ANALOG_LEFT)) ShowPlayerKeyList(playerid, 2);
	if(PRESSED(KEY_NO)) ShowPlayerMenu(playerid);
	if(PRESSED(KEY_YES))
	{
		if(GetGVarInt("Filming", playerid) == CAMERA_PLAYER || GetGVarInt("Filming", playerid) == CAMERA_SET)
		{
			if(GetGVarInt("TakingAngle", playerid) == 1)
			{
				new Float:vx, Float:vy, Float:vz, Float:vx2, Float:vy2, Float:vz2;
				SetGVarInt("Filming", CAMERA_SET, playerid);
				DeleteGVar("TakingAngle", playerid);
				DestroyDynamicObject(GetGVarInt("FilmOBJ", playerid));

				GetPlayerCameraPos(playerid, vx, vy, vz);
				GetPlayerCameraFrontVector(playerid, vx2, vy2, vz2);
				vx2 = vx + floatmul(vx2, 10.0);
				vy2 = vy + floatmul(vy2, 10.0);
				vz2 = vz + floatmul(vz2, 10.0);

				SetGVarFloat("CameraX", vx, playerid),
				SetGVarFloat("CameraY", vy, playerid),
				SetGVarFloat("CameraZ", vz, playerid),
				SetGVarFloat("CLookX", vx2, playerid),
				SetGVarFloat("CLookY", vy2, playerid),
				SetGVarFloat("CLookZ", vz2, playerid);
				SetGVarInt("CameraW", GetPlayerVirtualWorld(playerid), playerid),
				SetGVarInt("CameraI", GetPlayerInterior(playerid), playerid);
				PlayerStartFilming(playerid, CAMERA_SET);

				SetCameraBehindPlayer(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "** 视角设定完成,你可以再按Y更改视角或是切换为随行摄影");
			}
			else
			{
				ShowPlayerDialog(playerid, DIALOG_CAMERA_PLAYER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"摄影机设定", "摄影中,若你属于媒体业的成员,你的企业可以将你拍摄的画面播映到电视频道上\n结束摄影\n切换摄影角度", "选择", "关闭");
			}
		}
		else if(GetGVarInt("Racing", playerid) == STATUS_STARTED)
		{
			if(pstate == 2)
			{
				new Float:angle,
				raceid = GetGVarInt("RaceID", playerid),
				rcp = GetGVarInt("NowRCP", playerid);
				if(rcp-1 > 0)
				{
					vehicleid = GetPlayerVehicleID(playerid);
					GetVehicleZAngle(vehicleid, angle);
					SetVehicleZAngle(vehicleid, angle);
					SetVehiclePos(vehicleid, RCPData[raceid][rcp-1][rcpX], RCPData[raceid][rcp-1][rcpY], RCPData[raceid][rcp-1][rcpZ]+5.0);
					RepairVehicle(vehicleid);
					SendClientMessage(playerid, COLOR_ORANGE, "** 你已传送回上个检查点了");
				}
			}
		}
		else if(GetGVarInt("Tied", playerid) > 0)
		{
			new tied = GetGVarInt("Tied", playerid);
			tied = tied-1;
			if(tied == 1)
			{
				tied = 0;
				DeleteGVar("Tied", playerid);
				if(GetGVarInt("Cuffed", playerid) == 0)
				{
					SendClientMessage(playerid, COLOR_PINKRED, "** 你顺利挣脱了束缚");
					format(string, sizeof(string), "** %s 挣脱了他的束缚 **", PlayerData[playerid][pName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					//TogglePlayerControllableEx(playerid, true);
					SetPlayerSpecialAction(playerid, 0);
				}
			}
			else SetGVarInt("Tied", tied, playerid);
		}
		else
		{
			if(GetGVarInt("Eventing", playerid) == 1)
			{
				if(GetGVarInt("EventTeam", playerid) != NO_TEAM)
				{
					new nearest = GetNearestPlayer(playerid, 5.0);
					if(GetGVarInt("EventTeam", playerid) == GetGVarInt("EventTeam", nearest) && GetGVarInt("EvWounded", nearest) == 1 && GetGVarInt("EvWounded", playerid) == 0)
					{
						if(GetGVarInt("EvHealing", playerid) == 0)
						{
							SetGVarInt("EvHealPlayer", nearest, playerid);
							SetGVarInt("EvHealing", 10, playerid);
							ApplyAnimationEx(playerid, "bomber", "bom_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
							format(string, sizeof(string), "** 你开始治疗队友 %s ,期间无法移动,如果要取消请按F", PlayerData[nearest][pName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
						}
					}
				}
			}
			if(IsPlayerInRangeOfPointEx(playerid,5.0,941.2548,4.1725,1000.9297) || IsPlayerInRangeOfPointEx(playerid,5.0,968.1794,-46.3423,1001.1172)
			|| IsPlayerInRangeOfPointEx(playerid,5.0,-784.9268,500.3991,1371.7422) || IsPlayerInRangeOfPointEx(playerid,10.0,-2652.7021,1410.2206,906.2734))
			{
				ShowPlayerDialog(playerid, DIALOG_BAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"吧台",
				""#TEXT_WHITE"品项\t价钱\n啤酒\t$150\n红酒\t$150\n伏特加\t$170\n龙舌兰\t$170\n威士忌\t$170\n白兰地\t$170\n汽水\t$80", "这个", "离开");
			}
			else
			{
				new racestr[256], i, j, k, Float:px, Float:py, Float:pz, nearest;
				switch(pstate)
				{
					case 1:
					{
						if(IsPlayerCloseToFire(playerid))
						{
							ShowPlayerMixMenu(playerid);
							SendClientMessage(playerid, COLOR_WHITE, "在火旁,你可以在合成栏位放入生兽肉或是钓到的鱼来将其烹煮成熟肉,或是放入黏土或木材等材料进行燃烧合成");
						}
						if(IsPlayerCloseToTV(playerid))
						{
							ShowPlayerDialog(playerid, DIALOG_TV, DIALOG_STYLE_MSGBOX, ""#TEXT_FADEGREEN"电视", ""#TEXT_WHITE"要看电视吗?", "确定", "离开");
							return 1;
						}
						if(IsPlayerCloseToBed(playerid) > 0)
						{
							if(GetGVarInt("Laying", playerid) == 0)
							{
								switch(random(2))
								{
									case 0: ApplyAnimationEx(playerid, "CRACK", "CRCKIDLE2", 4.1, 1, 0, 0, 1, 0, 1);
									case 1: ApplyAnimationEx(playerid, "CRACK", "CRCKIDLE4", 4.1, 1, 0, 0, 1, 0, 1);
								}
								SetGVarInt("Laying", 1, playerid);
								SendClientMessage(playerid, COLOR_WHITE, "在床上休息体力恢复的速度为1.5倍");
								return 1;
							}
						}
						new stype, sid;
						IsPlayerCloseToSpeaker(playerid, stype, sid);
						if(stype > 0)
						{
							ShowPlayerDialog(playerid, DIALOG_MUSICPLAYER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"音响", ""#TEXT_WHITE"欢迎使用音响,请选择以下操作\n"#TEXT_FADEGREEN"播放音乐\n"#TEXT_RED"停止播放", "选择", "离开");
							SetGVarInt("DDecideType", stype, playerid);
							SetGVarInt("DDecideID", sid, playerid);
							SetGVarInt("DDecideW", GetPlayerVirtualWorld(playerid), playerid);
						}
						if(IsPlayerCloseToChair(playerid))
						{
							if(GetGVarInt("Sitting", playerid) == 0)
							{
								ApplyAnimationEx(playerid, "PED", "SEAT_IDLE", 4.1, 1, 0, 0, 1, 0, 1);
								SetGVarInt("Sitting", 1, playerid);
								return 1;
							}
						}
						if(IsPlayerCloseToPhoneBooth(playerid))
						{
							ShowPlayerContactMenu(playerid, 1);
							return 1;
						}
						ForEachPlayer(p)
						{
							if(GetGVarInt("FVendoring", p) == 0) continue;
							GetPlayerPos(p, px, py, pz);
							if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) < 4.0)
							{
								vehicleid = GetPlayerVehicleID(p);
								if(GetVehicleModel(vehicleid) == 423)
								{
									format(string, sizeof(string), ""#TEXT_WHITE"确认要购买冰淇淋?\n一盒$%d,吃了会让你恢复:\n15点生命\n20点饥饿值", GetGVarInt("FVPrice", vehicleid));
									ShowPlayerDialog(playerid, DIALOG_FVENDOR_BUY, DIALOG_STYLE_MSGBOX, ""#TEXT_PINK"冰淇淋车", string, "确认", "离开");
									SetGVarInt("DDecideID", p, playerid);
									return 1;
								}
								if(GetVehicleModel(vehicleid) == 588)
								{
									format(string, sizeof(string), ""#TEXT_WHITE"确认要购买热狗?\n一根$%d,吃了会让你恢复:\n20点生命\n10点饥饿值", GetGVarInt("FVPrice", vehicleid));
									ShowPlayerDialog(playerid, DIALOG_FVENDOR_BUY, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"热狗车", string, "确认", "离开");
									SetGVarInt("DDecideID", p, playerid);
									return 1;
								}
							}
						}
						nearest = GetNearestVehicle(playerid, 6.0);
						if(IsATrailer(nearest) && VehData[nearest][vOwned] == 0 && VehData[nearest][vType] == VTYPE_PLAYER)
						{
							ShowPlayerBuyVehMenu(playerid, nearest);
							return 1;
						}
						if(VehData[nearest][vTrunk] == 1 || (IsATrailer(nearest) && VehData[nearest][vType] != VTYPE_NONE))
						{
							format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetVehicleUsedSpace(nearest), GetVehicleSpace(nearest));
							ShowPlayerDialog(playerid, DIALOG_VSTORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
							SetGVarInt("DVehID", nearest, playerid);
							return 1;
						}
						new Float:RotX, Float:RotY, Float:RotZ, classid,
						sWorld = GetPlayerVirtualWorld(playerid);
						for(i = 0, j = sizeof(ATM); i < j; i++)
						{
							if(IsPlayerCloseToDynamicObject(playerid, ATM[i], 1.5))
							{
								SetPlayerArmedWeapon(playerid, 0);
								ApplyAnimationEx(playerid, "CASINO", "SLOT_IN", 4.1, 0, 0, 0, 0, 0, 1);
								ShowPlayerATMMenu(playerid);
								return 1;
							}
						}
						if(GetGVarInt("PCRoom", playerid) == 0)
						{
							for(i = k = 0; i < 20; i++)
							{
								if(IsPlayerCloseToDynamicObject(playerid, ClassSeat1[i], 1.5))
								{
									if(CSeat1Occupied[sWorld][i] == 1){return SendClientMessage(playerid, COLOR_WHITE, "这个座位已经有人坐了");}
									else
									{
										CSeat1Occupied[sWorld][i] = 1;
										k = 1;
										break;
									}
								}
								if(IsPlayerCloseToDynamicObject(playerid, ClassSeat2[i], 1.5))
								{
									if(CSeat2Occupied[sWorld][i] == 1){return SendClientMessage(playerid, COLOR_WHITE, "这个座位已经有人坐了");}
									else
									{
										CSeat1Occupied[sWorld][i] = 1;
										k = 2;
										break;
									}
								}
							}
							if(k != 0)
							{
								SetGVarInt("PCSeat", i, playerid);
								SetGVarInt("PCRoom", k, playerid);
								SetGVarInt("PCWorld", sWorld, playerid);
								CSeat1Occupied[sWorld][i] = 1;

								if(k == 1)
								{
									GetDynamicObjectRot(ClassSeat1[i], RotX, RotY, RotZ);
									SetPlayerFacingAngle(playerid, RotZ+180.0);
								}
								else if(k == 2)
								{
									GetDynamicObjectRot(ClassSeat2[i], RotX, RotY, RotZ);
									SetPlayerFacingAngle(playerid, RotZ);
								}

								format(string, sizeof(string), "** %s 入座了 **", PlayerData[playerid][pName]);
								SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
								ApplyAnimationEx(playerid, "PED", "SEAT_IDLE", 4.1, 1, 0, 0, 1, 0, 1);
								SetCameraBehindPlayer(playerid);
								switch(sWorld)
								{
									case 1,2:{classid = GetGVarInt("ClassID", 1);}//理工学院
									case 3,4:{classid = GetGVarInt("ClassID", 2);}//文学院
									case 5,6:{classid = GetGVarInt("ClassID", 3);}//医学院
								}
								if(classid != 0 && ClassList[classid][clsStarted] == 1 && k == ClassList[classid][clsRoom])
								{
									if((classid == 5 && RecordData[playerid][prClass4] < 180) || (classid == 7 && RecordData[playerid][prClass6] < 180) || (classid == 9 && RecordData[playerid][prClass8] < 180))
									{
										SendClientMessage(playerid, COLOR_WHITE, "你没有达到这堂课的标准,无法从这堂课学到知识");
									}
									else
									{
										SetGVarInt("Classing", classid, playerid);
										SetGVarInt("Concentration", 0, playerid);
										format(string, sizeof(string), "请选择修习这堂%s的态度\t\t每分钟消耗体力\n鬼混\t\t0.5\n马马虎虎\t\t1\n专心\t\t2\n全神贯注\t\t3", ClassList[classid][clsName]);
										ShowPlayerDialog(playerid, DIALOG_CLASS, DIALOG_STYLE_TABLIST_HEADERS, "上课", string, "听课", "不听课");
										UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, "上课中...");
									}
								}
								UpdatePlayerMission(playerid, 15, 4);
								return 1;
							}
						}
						new object = GetNearestObjectDataEx(playerid, 2.0);
						if(object != -1)
						{
							switch(ObjectList[ObjectData[object][oObjectID]][oType])
							{
								case OBJ_DOOR:
								{
									if(GetGVarInt("ObjectDoor", object) == 1) CloseObjectDoor(object);
									else
									{
										if(strcmp(ObjectData[object][oPass], "null_pass") == 0) OpenObjectDoor(object);
										else
										{
											ShowPlayerDialog(playerid, DIALOG_OBJECT_DOOR, DIALOG_STYLE_INPUT, "门", ""#TEXT_WHITE"请输入门锁密码", "确认", "取消");
											SetGVarInt("DDecideID", object, playerid);
										}
									}
								}
							}
							return 1;
						}
					}
					case 2:
					{
						vehicleid = GetPlayerVehicleID(playerid);
						if(PlayerData[playerid][pDepartment] == DEPT_POLICE)
						{
							if(IsPlayerInRangeOfPointEx(playerid, 10.0, -23.5938,340.2398,6.2882) || IsPlayerInRangeOfPointEx(playerid, 10.0, 1565.3040,-1618.5231,13.3653))
							{
								ForEachPlayer(p)
								{
									if(GetGVarInt("Arrested", p) == 0) continue;
									if(GetPlayerVehicleID(p) == vehicleid)
									{
										GiveMoney(playerid, PlayerData[p][pWanted]*3000);
										Log(moneylog, INFO, "%s(%d)逮捕了犯人%s(%d),获得了奖金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[p][pName], PlayerData[p][pID], PlayerData[p][pWanted]*3000);
										GivePlayerExp(playerid, PlayerData[p][pWanted]*500, EXP_ARREST);
										format(string, sizeof(string), "<<部门>> %s 将%d星通缉犯 %s 顺利逮捕归案了", PlayerData[playerid][pName], PlayerData[p][pWanted], PlayerData[p][pName]);
										SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
										format(string, sizeof(string), "** 你被警官 %s 逮捕归案了", PlayerData[playerid][pName]);
										SendClientMessage(p, COLOR_FADERED, string);
										format(string, sizeof(string), "** 你将通缉犯 %s 顺利逮捕归案了,获得了奖金$%d", PlayerData[p][pName], PlayerData[p][pWanted]*3000);
										SendClientMessage(playerid, COLOR_FADEBLUE, string);
										SendClientMessage(playerid, COLOR_WHITE, "** 请记得前往监狱内"#TEXT_FADEGREEN"锁定"#TEXT_WHITE"犯人来搜查其身上是否有违禁品");
										format(string, sizeof(string), "** %s 押送了通缉犯 %s **", PlayerData[playerid][pName], PlayerData[p][pName]);
										SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
										WantedToJail(p);
									}
								}
							}
						}
						for(i = 0; i < sizeof(RepairGarage); i++)
						{
							if(IsPlayerInRangeOfPointEx(playerid, 5.0, RepairGarage[i][0], RepairGarage[i][1], RepairGarage[i][2]))
							{
								ShowPlayerDialog(playerid, DIALOG_VMOD_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"改装厂", ""TEXT_WHITE"这里可以让你修复或改装自订载具\n是否进入?", "是", "否");
							}
						}
					}
				}
				for(i = 0; i < sizeof(GasStationPos); i ++)//加油
				{
					if(IsPlayerInRangeOfPointEx(playerid,5.0,GasStationPos[i][0],GasStationPos[i][1],GasStationPos[i][2]))
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_GAS);
						return 1;
					}
				}
				if(GetGVarInt("Racing", playerid) == STATUS_FINISHED)
				{
					for(i = 0, j = MAX_RACES; i < j; i++)
					{
						if(RaceData[i][rtType] == RACE_NONE) { continue;}
						if(GetPlayerDistanceFromPointEx(playerid, RaceData[i][rtStartPos1X], RaceData[i][rtStartPos1Y], RaceData[i][rtStartPos1Z]) < 20.0)
						{
						    if(GetGVarInt("Mission", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上有其他任务在身,无法参加竞速!");
						    
							format(racestr, sizeof(racestr), ""#TEXT_FADEGREEN"%s\n\n"#TEXT_WHITE"检查点数: %d\n玩家数: %d/%d\n信息:\n%s\n\n是否加入竞速?", RaceData[i][rtName], RaceData[i][rtMaxCP], RaceData[i][rtRacers], RaceData[i][rtMaxRacers], RaceData[i][rtDes]);
							ShowPlayerDialog(playerid, DIALOG_JOINRACE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"赛道信息", racestr, "是", "否");
							SetGVarInt("RaceID", i, playerid);
							return 1;
						}
					}
				}
			}
		}
	}
	if(PRESSED(KEY_CROUCH))
	{
	    switch(pstate)
	    {
	        case 3:
	        {
	            vehicleid = GetPlayerVehicleID(playerid);
				if(GetGVarInt("Bus", vehicleid) == 1)
				{
				    if(GetGVarInt("Ringed", vehicleid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "已经有人按过下车铃了");
				    format(string, sizeof(string), "** %s 按了下车铃 **", playername);
					SendRangeMessage(15.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
     				PlayerPlayGlobalSound(playerid, 31000);
					SetGVarInt("Ringed", 1, vehicleid);
					SetPlayerTimerEx(playerid, "BellUnCD", 15000, 0, "i", playerid);
				}
				else if(IsArmed(playerid))
				{
				    if(GetPlayerWeapon(playerid) == 24 || GetPlayerWeapon(playerid) == 38)
				    {
					    SetPlayerArmedWeapon(playerid, 0);
						SendClientMessage(playerid, COLOR_WHITE, "你无法使用这武器在载具上进行射击");
					}
				    else if(!IsVehicleOccupied(vehicleid, 1))
				    {
					    SetPlayerArmedWeapon(playerid, 0);
						SendClientMessage(playerid, COLOR_WHITE, "你无法在没有驾驶的载具上进行射击");
					}
				}
			}
		}
	}

	if(HOLDING(KEY_FIRE))
	{
	    switch(pstate)
	    {
	        case PLAYER_STATE_ONFOOT:
	        {
				if(GetPlayerWeapon(playerid) != 43 && GetPlayerWeapon(playerid) != 9 && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_SPRUNK && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_WINE && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_SMOKE_CIGGY && GetPlayerSpecialAction(playerid)!=SPECIAL_ACTION_DRINK_BEER)
				{
					if(GetGVarInt("PoliceDuty", playerid) == 0)
					{
		    			new gzid = GetPlayerGangZone(playerid);
		    			if(gzid != -1)
		    			{
		    				if(GangZone[gzid][gzSafezone]) // 自己在安全区开火 按住 提示
		    				{
		    				    ClearAnimationsEx(playerid);
		        				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安全区", "你正在安全区,请不要违规", "确认", "");
		    				}
		 				}
   					}
				}
	            if(GetPlayerWeapon(playerid) == 41)
				{
					SetGVarInt("Spraying", 1, playerid);
				}
	        }
	    }
	}

	if(RELEASED(KEY_FIRE))
	{
	    switch(pstate)
	    {
	        case PLAYER_STATE_ONFOOT:
	        {
	            if(GetPlayerWeapon(playerid) == 41)
				{
					DeleteGVar("Spraying", playerid);
				}
	        }
	    }
	}

	if(PRESSED(KEY_FIRE))
	{
	    switch(pstate)
	    {
	        case PLAYER_STATE_ONFOOT:
	        {
				if(GetPlayerWeapon(playerid) != 43 && GetPlayerWeapon(playerid) != 9 && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_SPRUNK && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_WINE && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_SMOKE_CIGGY && GetPlayerSpecialAction(playerid)!=SPECIAL_ACTION_DRINK_BEER)
				{
					if(GetGVarInt("PoliceDuty", playerid) == 0)
					{
		    			new gzid = GetPlayerGangZone(playerid);
		    			if(gzid != -1)
		    			{
		    				if(GangZone[gzid][gzSafezone]) //自己在安全区开火
		    				{
		    				    ClearAnimationsEx(playerid);
		        				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安全区", "你正在安全区,请不要违规", "确认", "");
		    				}
		 				}
   					}
				}
	            switch(GetPlayerSpecialAction(playerid))
	            {
	            	case SPECIAL_ACTION_DRINK_WINE, SPECIAL_ACTION_DRINK_BEER:
	            	{
	            	    if(GetGVarInt("SpecActCD", playerid) == 0)
	            	    {
		            	    SetGVarInt("Drinking", GetGVarInt("Drinking", playerid)+1, playerid);
		                	PlayerData[playerid][pHunger] += 2.0;
		                	SetGVarInt("SpecActCD", 1, playerid);
		                	SetPlayerTimerEx(playerid, "SpecActUnCD", 2200, 0, "i", playerid);
		                }
	                }
	                case SPECIAL_ACTION_DRINK_SPRUNK:
	                {
	                    if(GetGVarInt("SpecActCD", playerid) == 0)
	            	    {
		            	    SetGVarInt("Drinking", GetGVarInt("Drinking", playerid)+2, playerid);
		                	GiveHealth(playerid, 2.0);
		                	SetGVarInt("SpecActCD", 1, playerid);
		                	SetPlayerTimerEx(playerid, "SpecActUnCD", 2200, 0, "i", playerid);
		                }
	                }
	                case SPECIAL_ACTION_SMOKE_CIGGY:
	                {
	                    if(GetGVarInt("SpecActCD", playerid) == 0)
	            	    {
		            	    SetGVarInt("Smoking", GetGVarInt("Smoking", playerid)+1, playerid);
		                	PlayerData[playerid][pStamina] += 0.5;
		                	SetGVarInt("SpecActCD", 1, playerid);
		                	SetPlayerTimerEx(playerid, "SpecActUnCD", 2200, 0, "i", playerid);
		                }
	                }
	            }
	        }
	        case PLAYER_STATE_DRIVER:
	        {
	            vehicleid = GetPlayerVehicleID(playerid);
			    if(GetGVarInt("SpeVeh", vehicleid) > 0)
			    {
			        new Float:px, Float:py, Float:pz, Float:pangle,
						ammo = GetGVarInt("SpeVehA", vehicleid);
					if(ammo > 0)
					{
				        switch(GetGVarInt("SpeVeh", vehicleid))
				        {
				            case 1:
				            {
				                if(GetGVarInt("SpeVehCD", playerid) == 0)
						        {
					                GetVehiclePos(vehicleid, px, py, pz);
									GetVehicleZAngle(vehicleid, pangle);
				                    GetXYBehindPos(px, py, pangle, px, py, 6.0);
				                    new stinger = CreateStinger(px, py, pz-0.5, pangle+90.0, GetPlayerVirtualWorld(playerid));
				                    PlayerPlaySound(playerid, 36401, 0.0, 0.0, 0.0);
				                    SetGVarInt("OTStinger", 1, stinger);
				                    SetGVarInt("SpeVehA", ammo-1, vehicleid);
				                    SetGVarInt("SpeVehCD", 3, playerid);
				                }
				            }
				            case 2:
				            {
				                if(GetGVarInt("SpeVehCD", playerid) == 0)
						        {
					                GetVehiclePos(vehicleid, px, py, pz);
									GetVehicleZAngle(vehicleid, pangle);
				                    GetXYBehindPos(px, py, pangle, px, py, 6.0);
				                    CreateLandMine(px, py, pz-0.5, pangle+90.0, GetPlayerVirtualWorld(playerid));
				                    PlayerPlaySound(playerid, 45400, 0.0, 0.0, 0.0);
				                    SetGVarInt("SpeVehA", ammo-1, vehicleid);
				                    SetGVarInt("SpeVehCD", 3, playerid);
				                }
				            }
				            case 3://大型轰炸弹
				            {
					            if(GetGVarInt("SpeVehCD", playerid) == 0)
						        {
							        new fired = GetGVarInt("SpeVehFired", playerid);
							        GetVehiclePos(vehicleid, px, py, pz);
							        CreateAirDrop(ITEM_BOMB, 0, 1, px, py, pz-0.8, GetPlayerVirtualWorld(playerid), 15.0);
							        fired += 1;
							        if(fired > 5)
									{
									    DeleteGVar("SpeVehFired", playerid);
									    SetGVarInt("SpeVehCD", 5, playerid);
									}
									else SetGVarInt("SpeVehFired", fired, playerid);
									SetGVarInt("SpeVehA", ammo-1, vehicleid);
								}
							}
							case 4://小型轰炸弹
				            {
					            if(GetGVarInt("SpeVehCD", playerid) == 0)
						        {
							        new fired = GetGVarInt("SpeVehFired", playerid);
							        GetVehiclePos(vehicleid, px, py, pz);
							        CreateAirDrop(ITEM_BOMB, 1, 1, px, py, pz-0.2, GetPlayerVirtualWorld(playerid), 12.0);
							        fired += 1;
							        if(fired > 3)
									{
									    DeleteGVar("SpeVehFired", playerid);
									    SetGVarInt("SpeVehCD", 3, playerid);
									}
									else SetGVarInt("SpeVehFired", fired, playerid);
									SetGVarInt("SpeVehA", ammo-1, vehicleid);
								}
							}
						}
			        }
			    }
	            if(vehicleid == GetGVarInt("ERVeh", playerid))
	            {
	                new Float:px, Float:py, Float:pz, Float:pa,
					raceid = GetGVarInt("ERaceID", playerid);
					GetVehiclePos(vehicleid, px, py, pz);
					GetVehicleZAngle(vehicleid, pa);
		            if(GetGVarInt("ERStart", playerid) != 0)
					{
						if(GetGVarInt("ERStart", playerid) == 1)
						{
						    RaceData[raceid][rtStartPos1X] = px;
						    RaceData[raceid][rtStartPos1Y] = py;
						    RaceData[raceid][rtStartPos1Z] = pz;
						    RaceData[raceid][rtStartPos1A] = pa;
						    SetGVarInt("ERStart", 2, playerid);
						    SendClientMessage(playerid, COLOR_WHITE, "** 起跑点[一]已记录!接下来请纪录第二个玩家的起跑点[二]");
						}
						else if(GetGVarInt("ERStart", playerid) == 2)
						{
						    RaceData[raceid][rtStartPos2X] = px;
						    RaceData[raceid][rtStartPos2Y] = py;
						    RaceData[raceid][rtStartPos2Z] = pz;
						    RaceData[raceid][rtStartPos2A] = pa;
						    format(string, sizeof(string), "** 起跑点[二]已记录!赛道 %s 的资料已储存", RaceData[raceid][rtName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
							SaveRaceData(raceid);
						    DeleteGVar("ERStart", playerid);
						    DestroyVehicle(GetGVarInt("ERVeh", playerid));
							DeleteGVar("ERVeh", playerid);
							DeleteGVar("ERaceID", playerid);
						}
					}
					else if(GetGVarInt("EditRCP", playerid) != 0)
					{
					    AddRaceCheckPoint(raceid, px, py, pz);
					    RaceData[raceid][rtMaxCP] += 1;
					    SetPlayerCheckpoint(playerid, px, py, pz, 10.0);
					    format(string, sizeof(string), "** 已新增检查点,目前有 %d 个检查点", RaceData[raceid][rtMaxCP]);
						SendClientMessage(playerid, COLOR_YELLOW, string);
					}
				}
				if(GetGVarInt("EditBS", playerid) == 1)
				{
				    new rid = GetGVarInt("EBRID", playerid);
				    if(BusRoute[rid][brMaxStop] >= MAX_BUS_STOPS) return SendClientMessage(playerid, COLOR_WHITE, "停靠站的数量已达上限");
					ShowPlayerDialog(playerid, DIALOG_BUSROUTE_NEWSTOP, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"新增停靠站", ""#TEXT_WHITE"请输入停靠站的站名", "确认", "取消");
				}
			}
			case PLAYER_STATE_SPECTATING:
			{
			    if(GetGVarInt("WatchTV", playerid) == 2)
			    {
				    ShowPlayerDialog(playerid, DIALOG_TV, DIALOG_STYLE_TABLIST_HEADERS, "电视", ""#TEXT_WHITE"选择收看频道\n媒体频道\n竞技场频道", "收看", "关闭");
				}
			}
		}
	}


	if(PRESSED(KEY_HANDBRAKE))
	{
	    switch(pstate)
	    {
		    case 1:
		    {
			    if(GetGVarInt("FreeLifting", playerid) == 1 && GetGVarInt("LiftingUp", playerid) == 0)
			    {
			        new Float:lift = GetGVarFloat("WeightLift", playerid);
			        if(PlayerData[playerid][pStamina] < 1.0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有体力举重了");
			        lift = lift + 10.0;
		         	if(lift > 90.0)
			        {
			            PlayerData[playerid][pStamina] -= 1.0;
		             	ApplyAnimationEx(playerid, "freeweights", "gym_free_A", 1, 0, 0, 0, 1, 0, 1);
			            SetTimerEx("LiftDown", 2000, 0, "i", playerid);
			            SetGVarInt("LiftingUp", 1, playerid);
			        }
		        	SetGVarFloat("WeightLift", lift, playerid);
			        UpdateRightTD(playerid);
			    }
			    else if(GetGVarInt("BenchLifting", playerid) != 0 && GetGVarInt("LiftingUp", playerid) == 0)
			    {
			        new Float:lift = GetGVarFloat("WeightLift", playerid);
			        if(PlayerData[playerid][pStamina] < 2.0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有体力举重了");
			        lift = lift + 15.0;
			        if(lift > 90.0)
			        {
			            PlayerData[playerid][pStamina] -= 2.0;
			            ApplyAnimationEx(playerid, "benchpress", "gym_bp_up_A", 1, 0, 0, 0, 1, 0, 1);
			            SetTimerEx("LiftDown", 2000, 0, "i", playerid);
			            SetGVarInt("LiftingUp", 1, playerid);
			        }
		         	SetGVarFloat("WeightLift", lift, playerid);
			        UpdateRightTD(playerid);
			    }
			}
			case PLAYER_STATE_SPECTATING:
			{
			    if(GetGVarInt("EMonitoring", playerid) > 0 || GetGVarInt("WatchTV", playerid) > 0)
				{
					TogglePlayerSpectating(playerid, false);
					TextDrawHideForPlayer(playerid, Black);
					//DeleteGVar("EMonitoring", playerid);
					//DeleteGVar("WatchTV", playerid);
					DeleteGVar("WatchArena", playerid);
				}
			}
		}
	}

	if(PRESSED(KEY_SPRINT))
	{
		switch(pstate)
		{
		    case 1:
		    {
			    if(GetGVarInt("GymBiking", playerid) != 0)
			    {
			        new Float:meter = GetGVarFloat("GymMeter", playerid), distance = GetGVarInt("GymDistance", playerid);
			        if(PlayerData[playerid][pStamina] < 1.0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有体力踩飞轮了");
			        PlayerData[playerid][pStamina] -= 0.4;
			        meter = meter + 8.0;
			        if(meter < 15.0)
			        {
			            ApplyAnimation(playerid, "gymnasium", "gym_bike_still", 1, 1, 0, 0, 1, 0, 1);
			        }
		         	else
			        {
						if(meter > 90.0)
						{
						    meter = 100.0;
							distance = distance + 2;
							ApplyAnimation(playerid, "gymnasium", "gym_bike_fast", 1, 1, 0, 0, 1, 0, 1);
						}
						else
						{
						    distance = distance + 1;
						    ApplyAnimation(playerid, "gymnasium", "gym_bike_fast", 4.1, 1, 0, 0, 1, 0, 1);
						}
			        }
			        SetGVarFloat("GymMeter", meter, playerid);
			        SetGVarInt("GymDistance", distance, playerid);
			        UpdateRightTD(playerid);
			    }
			    else if(GetGVarInt("GymRunning", playerid) != 0)
			    {
			        new Float:meter = GetGVarFloat("GymMeter", playerid), distance = GetGVarInt("GymDistance", playerid);
			        if(PlayerData[playerid][pStamina] < 1.0)
		            {
						return SendClientMessage(playerid, COLOR_WHITE, "你已经没有体力跑步了了");
					}
			        PlayerData[playerid][pStamina] -= 0.2;
			        meter = meter + 8.0;
			        if(meter > 60.0)
					{
						meter = 100.0;
						distance = distance + 1;
					}
		        	SetGVarFloat("GymMeter", meter, playerid);
		        	SetGVarInt("GymDistance", distance, playerid);
			        UpdateRightTD(playerid);
			    }
			}
			case 2:
			{
				vehicleid = GetPlayerVehicleID(playerid);
			    if(GetGVarInt("VOutEstate", vehicleid) == 1)
				{
					if(VehData[vehicleid][vStatus] == VEH_STORED)
					{
						VehData[vehicleid][vStatus] = VEH_NORMAL;
						SetPlayerVirtualWorld(playerid, 0);
						SetPlayerInterior(playerid, 0);
						//SetVehicleToRespawn(vehicleid);
						SetVehicleVirtualWorld(vehicleid, 0);
						LinkVehicleToInterior(vehicleid, 0);
						SetVehiclePos(vehicleid, VehData[vehicleid][vX], VehData[vehicleid][vY], VehData[vehicleid][vZ]);
						PutPlayerInVehicle_Fix(playerid, vehicleid, 0);
						SetVehicleZAngle(vehicleid, VehData[vehicleid][vA] + 180.0);
						Log(vehlog, INFO, "%s(%d)领出了保存在地产的载具%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					}
					if(GetGVarInt("EditVCol", playerid) != 0)
			        {
			            PlayerExitPaintVehicle(playerid);
			        }
				    DeleteGVar("VOutEstate", vehicleid);
				    DeleteGVar("VOutEID", vehicleid);
				}
			}
		}
	}
	if(PRESSED(KEY_JUMP))
	{
	    switch(pstate)
		{
		    case 1:
			{
			    if(GetGVarInt("PlayerAnimal", playerid) > 0)
			    {
           			if(GetGVarInt("PlayerAnimal", playerid) != 22) ApplyAnimationEx(playerid, "ped", "climb_jump", 4.1, 0, 0, 0, 0, 0, 1);
			    }
			}
		}
	}
	if(PRESSED(KEY_SECONDARY_ATTACK))
	{
     	switch(pstate)
		{
		    case PLAYER_STATE_SPECTATING:
			{
			    if(GetGVarInt("IntroTime", playerid) > 0)
			    {
			        ShowPlayerDialog(playerid, DIALOG_SKIPINTRO, DIALOG_STYLE_MSGBOX, " ", ""#TEXT_WHITE"确认跳过导览吗?", "确认", "取消");
			    }
			}
		    case 1:
			{
			    if(GetGVarInt("Spawned", playerid) == 1)
			    {
			        if(GetGVarInt("Surr", playerid) == 1)
					{
					    if(GetGVarInt("Cuffed", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经被上铐了");
						SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
		    			DeleteGVar("Surr", playerid);
		    			format(string, sizeof(string), "** %s 放下双手反悔投降了 **", playername);
			    		SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    		format(string, sizeof(string), "** 通缉犯 %s 反悔投降了", playername);
						SendDeptMessage(DEPT_POLICE, COLOR_YELLOW, string);
		    		}
					else if(GetGVarInt("pCAnim", playerid) > 0)
					{
						StopPlayerCustomAnimation(playerid, INVALID_PLAYER_ID);
					}
					else if(GetGVarInt("Fishing", playerid) > 0)
				    {
				        StopFishing(playerid);
				    }
				    else if(GetGVarInt("Digging", playerid) > 0)
					{
					    StopDigging(playerid);
					}
					else if(GetGVarInt("Hewing", playerid) > 0)
					{
					    StopHewing(playerid);
					}
					else if(GetGVarInt("Healing", playerid) > 0)
					{
					    StopHealing(playerid);
					    SendClientMessage(playerid, COLOR_WHITE, "你取消了治疗");
	  				}
	  				else if(GetGVarInt("EvHealing", playerid) > 0)
					{
					    DeleteGVar("EvHealPlayer", playerid);
					    DeleteGVar("EvHealing", playerid);
	  					ClearAnimationsEx(playerid);
	  				}
	  				else if(GetGVarInt("RangeShooting", playerid) == 1)
					{
					    StopRange(playerid);
					}
					else if(GetGVarInt("FreeLifting", playerid) == 1)
		    		{
						ApplyAnimationEx(playerid, "freeweights", "gym_free_putdown", 1, 0, 0, 0, 1, 0, 1);
						SetTimerEx("RemoveGymObj", 1000, 0, "i", playerid);
						SetTimerEx("LiftEnd", 3000, 0, "i", playerid);
					}
					else if(GetGVarInt("BenchLifting", playerid) != 0)
		    		{
						SetGVarInt("LiftCount", GetGVarInt("LiftCount", playerid), playerid);
						ApplyAnimationEx(playerid, "benchpress", "gym_bp_getoff", 1, 0, 0, 0, 1, 0, 1);
						switch(GetGVarInt("BenchLifting", playerid))
						{
	      					case 1:{SetGVarInt("LSBench", 0);}
							case 2:{SetGVarInt("SFBench", 0);}
							case 3:{SetGVarInt("LVBench1", 0);}
							case 4:{SetGVarInt("LVBench2", 0);}
							case 5:{SetGVarInt("BeachBench", 0);}
							case 6:{SetGVarInt("PrisonBench1", 0);}
							case 7:{SetGVarInt("PrisonBench2", 0);}
						}
	                    SetTimerEx("RemoveGymObj", 2000, 0, "i", playerid);
						SetTimerEx("LiftEnd", 9000, 0, "i", playerid);
					}
					else if(GetGVarInt("GymRunning", playerid) != 0)
		    		{
			            ApplyAnimation(playerid, "gymnasium", "gym_tread_getoff", 1, 0, 0, 0, 1, 0, 1);
					    SetTimerEx("GymEnd", 3500, false, "i", playerid);
					}
					else if(GetGVarInt("GymBiking", playerid) != 0)
		    		{
	                    ApplyAnimation(playerid, "gymnasium", "gym_bike_getoff", 1, 0, 0, 0, 1, 0, 1);
					    SetTimerEx("GymEnd", 2000, false, "i", playerid);
					}
					else if(GetGVarInt("PCRoom", playerid) > 0)
					{
					    if(GetGVarInt("ClassNap", playerid) == 1)
					    {
					        DeleteGVar("ClassNap", playerid);
					        format(string, sizeof(string), "** %s 睡醒了 **", playername);
			    			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    			GameTextForPlayer(playerid, "~w~睡醒了", 1000, 3);
					    }
					    else
					    {
						    LeaveClass(playerid);
						}
					}
					else if(GetGVarInt("Sitting", playerid) == 1 || GetGVarInt("Laying", playerid) > 0)
			        {
			            ApplyAnimationEx(playerid, "PED", "SEAT_UP", 4.1, 0, 0, 0, 0, 0, 1);
			            DeleteGVar("Sitting", playerid);
			            DeleteGVar("Laying", playerid);
			        }
					else
					{
						if(GetPlayerAnimationIndex(playerid) != 1660)
						{
							SetTimerEx("VendCheck", 500, false, "d", playerid);
	     				}
						if(GetGVarInt("PickedTP", playerid) > -1)
						{
							new tpid = GetGVarInt("PickedTP", playerid);
							if(IsPlayerInRangeOfPointEx(playerid, 1.5, TPData[tpid][tpOutX], TPData[tpid][tpOutY], TPData[tpid][tpOutZ]) && TPData[tpid][tpOutW] == GetPlayerVirtualWorld(playerid) && TPData[tpid][tpOutI] == GetPlayerInterior(playerid))
							{
								if(OnPlayerEnterTP(playerid, tpid, TPData[tpid][tpType], TPData[tpid][tpTypeID]))
								{
									SetGVarInt("PickedTP", -1, playerid);
									SetPlayerPos(playerid, TPData[tpid][tpInX], TPData[tpid][tpInY], TPData[tpid][tpInZ]);
									SetPlayerFacingAngle(playerid, TPData[tpid][tpInA]);
									SetPlayerInterior(playerid, TPData[tpid][tpInI]);
									SetPlayerVirtualWorld(playerid, TPData[tpid][tpInW]);
									SetCameraBehindPlayer(playerid);
									return 1;
								}
							}
							else if(IsPlayerInRangeOfPointEx(playerid, 1.5, TPData[tpid][tpInX], TPData[tpid][tpInY], TPData[tpid][tpInZ]) && TPData[tpid][tpInW] == GetPlayerVirtualWorld(playerid) && TPData[tpid][tpInI] == GetPlayerInterior(playerid))
							{
								if(OnPlayerExitTP(playerid, tpid, TPData[tpid][tpType], TPData[tpid][tpTypeID]))
								{
									SetGVarInt("PickedTP", -1, playerid);
									SetPlayerPos(playerid, TPData[tpid][tpOutX], TPData[tpid][tpOutY], TPData[tpid][tpOutZ]);
									SetPlayerFacingAngle(playerid, TPData[tpid][tpOutA]);
									SetPlayerInterior(playerid, TPData[tpid][tpOutI]);
									SetPlayerVirtualWorld(playerid, TPData[tpid][tpOutW]);
									SetCameraBehindPlayer(playerid);
									return 1;
								}
							}
						}
						if(GetGVarInt("PickedDrop", playerid) > 0)
						{
							new i = GetGVarInt("PickedDropID", playerid);
							if(DropItem[i][idCreated] == 1 && DropItem[i][idPickable] == 1)
							{
								if(IsPlayerInRangeOfPointEx(playerid, 2.0, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) && GetPlayerVirtualWorld(playerid) == DropItem[i][idWorld])
								{
									if(GetGVarInt("IDFGang", i) == 1 && GetGVarInt("IDFGangID", i) != PlayerData[playerid][pGang]) return 1;
									switch(DropItem[i][idType])
									{
										case ITEM_USE:
										{
											if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[DropItem[i][idItemID]][iuSpace]*DropItem[i][idAmount])
											{
												return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间放这个物品了");
											}
											if(DropItem[i][idRes] == 1)
											{
												switch(DropItem[i][idItemID])
												{
													case 110:
													{
														ResourceData[rHSeedGreen] --;
														if(ResourceData[rHSeedGreen] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 111:
													{
														ResourceData[rHSeedYellow] --;
														if(ResourceData[rHSeedYellow] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 112:
													{
														ResourceData[rHSeedWhite] --;
														if(ResourceData[rHSeedWhite] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 113:
													{
														ResourceData[rHSeedRed] --;
														if(ResourceData[rHSeedRed] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 42:
													{
														ResourceData[rHerbGreen] --;
														if(ResourceData[rHerbGreen] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 43:
													{
														ResourceData[rHerbYellow] --;
														if(ResourceData[rHerbYellow] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 44:
													{
														ResourceData[rHerbWhite] --;
														if(ResourceData[rHerbWhite] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 114:
													{
														ResourceData[rHerbRed] --;
														if(ResourceData[rHerbRed] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 86:
													{
														ResourceData[rFiber] --;
														if(ResourceData[rFiber] > 100) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 64..69,107..109,304:
													{
														ResourceData[rSeedF] --;
														if(ResourceData[rSeedF] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 77..79:
													{
														ResourceData[rSeedD] --;
														if(ResourceData[rSeedD] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
													case 313..317:
													{
														ResourceData[rFruit] --;
														if(ResourceData[rFruit] > MAX_RESOURCE_SPAWN) CreateRandPosResource(DropItem[i][idItemID]);
													}
												}

											}
											if(GetGVarInt("Treasure", i) == TREA_SEA)
											{
												format(string, sizeof(string), ""#TEXT_SKYBLUE"<<宝藏>>"#TEXT_YELLOW" %s 顺利找到了潜藏在海底的%s了!", PlayerData[playerid][pName], ItemsList_USE[DropItem[i][idItemID]][iuName]);
												SendClientMessageToAll(COLOR_YELLOW, string);
											}
											else if(GetGVarInt("Treasure", i) == TREA_BURY)
											{
												format(string, sizeof(string), ""#TEXT_SKYBLUE"<<宝藏>>"#TEXT_YELLOW" %s 顺利找到了埋藏在土里的%s了!", PlayerData[playerid][pName], ItemsList_USE[DropItem[i][idItemID]][iuName]);
												SendClientMessageToAll(COLOR_YELLOW, string);
											}
											GivePlayerItem(playerid, 1, DropItem[i][idItemID], DropItem[i][idAmount]);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了%d个%s", DropItem[i][idAmount], ItemsList_USE[DropItem[i][idItemID]][iuName]);

											if(DropItem[i][idItemID] == 39) UpdatePlayerMission(playerid, 11, 6);
											if(DropItem[i][idItemID] == 87) UpdatePlayerMission(playerid, 11, 9);
											if(DropItem[i][idItemID] == 86) UpdatePlayerMission(playerid, 11, 11);
										}
										case ITEM_EQ:
										{
											if(GetPlayerRemainingSpace(playerid) < ItemsList_EQ[DropItem[i][idItemID]][ieqSpace])
											{
												return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间放这个物品了");
											}
											if(PlayerHaveItem(playerid, 2, DropItem[i][idItemID]))
											{
												return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经有这个物品了");
											}
											GivePlayerItem(playerid, 2, DropItem[i][idItemID], 1);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了1个%s", ItemsList_EQ[DropItem[i][idItemID]][ieqName]);
										}
										case ITEM_WEAPON:
										{
											static oldweapon, oldammo;
											if(PlayerHaveSameAmmoWeapon(playerid, DropItem[i][idItemID]) > 0 && DropItem[i][idAmount] > 0)
											{
												oldweapon = PlayerHaveSameAmmoWeapon(playerid, DropItem[i][idItemID]);
												GivePlayerWeapon(playerid, oldweapon, DropItem[i][idAmount]);
												format(string, sizeof(string), ""#TEXT_WHITE"你捡起了%s的弹药", WeaponsList[DropItem[i][idItemID]][wName]);
												CreateDropItem(ITEM_WEAPON, DropItem[i][idItemID], 0, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ], DropItem[i][idWorld], 180, DropItem[i][idRes], 0, DropItem[i][idMatWar]);
											}
											else
											{
												if(PlayerHaveSameSlotWeapon(playerid, DropItem[i][idItemID]))
												{
													oldweapon = PlayerHaveSameSlotWeapon(playerid, DropItem[i][idItemID]);
													oldammo = PlayerHaveWeapon(playerid, oldweapon);
													GivePlayerWeapon(playerid, DropItem[i][idItemID], DropItem[i][idAmount]);
													SetPlayerAmmo(playerid, DropItem[i][idItemID], DropItem[i][idAmount]);
													format(string, sizeof(string), ""#TEXT_WHITE"你捡起了%s", WeaponsList[DropItem[i][idItemID]][wName]);
													CreateDropItem(ITEM_WEAPON, oldweapon, oldammo, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ], DropItem[i][idWorld], 180, DropItem[i][idRes], 0, DropItem[i][idMatWar]);
												}
												else
												{
													GivePlayerWeapon(playerid, DropItem[i][idItemID], DropItem[i][idAmount]);
													format(string, sizeof(string), ""#TEXT_WHITE"你捡起了%s", WeaponsList[DropItem[i][idItemID]][wName]);
												}
											}
										}
										case ITEM_SKILLPT:
										{
											GivePlayerPoint(playerid, DropItem[i][idItemID], DropItem[i][idAmount]);
											format(string, sizeof(string), ""#TEXT_WHITE"你获得了%d点%s", DropItem[i][idAmount], PtsList[DropItem[i][idItemID]][spName]);
										}
										case ITEM_CASH:
										{
											GiveMoney(playerid, DropItem[i][idAmount]);
											Log(moneylog, INFO, "%s(%d)捡起了现金掉落物$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], DropItem[i][idAmount]);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了现金$%d", DropItem[i][idAmount]);
										}
										case ITEM_MW:
										{
											if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE && PlayerData[playerid][pGang] == GANG_ID_NONE && PlayerData[playerid][pDepartment] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法捡起战争货物");
											if(GetGVarInt("PlayerMW", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上已经有战争货物了");
											MatWar[DropItem[i][idMatWar]][mwHolder] = playerid;
											MatWar[DropItem[i][idMatWar]][mwStatus] = 3;
											SetGVarInt("PlayerMW", 1, playerid);
											SetGVarInt("PlayerMWID", DropItem[i][idMatWar], playerid);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了货物战争的%s,你必须在时间结束以前前往你的组织地产储存这个货物", ItemsList_USE[DropItem[i][idItemID]][iuName]);
										}
										case ITEM_HP:
										{
											SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了补血包,完全恢复了生命");
										}
										case ITEM_AR:
										{
											SetPlayerArmour_Fix(playerid, 100.0);
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起并穿上了护甲");
										}
										case ITEM_MS:
										{
											new mission = DropItem[i][idItemID];
											if(GetGVarInt("Mission", playerid) != mission) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法捡起这个掉落物");
											if(GetGVarInt("PlayerMSDrop", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上已经拥有一个任务目标包裹了");
											SetGVarInt("PlayerMSDrop", 1, playerid);
											switch(mission)
											{
												case 27:
												{
													if(GetGVarInt("MissionStage", mission) < 3)
													{
														format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
														SendMissionMessage(mission, COLOR_WHITE, string);
														UpdateGlobalMission(27, 3);
													}
												}
												case 30:
												{
													if(GetGVarInt("MissionStage", mission) < 3)
													{
														format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
														SendMissionMessage(mission, COLOR_WHITE, string);
														UpdateGlobalMission(30, 3);
													}
												}
												case 37:
												{
													if(GetGVarInt("MissionStage", mission) < 3)
													{
														format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"取得了"#TEXT_YELLOW"目标包裹", PlayerData[playerid][pName]);
														SendMissionMessage(mission, COLOR_WHITE, string);
														UpdateGlobalMission(37, 3);
													}
												}
											}
											format(string, sizeof(string), ""#TEXT_WHITE"你捡起了"#TEXT_YELLOW"任务目标包裹"#TEXT_WHITE"了");
										}
										case ITEM_BURY:
										{
											return 1;
										}
									}
									SendClientMessage(playerid, COLOR_WHITE, string);
									format(string, sizeof(string), "** %s 捡起了掉落物 **", PlayerData[playerid][pName]);
									SendRangeMessage(15.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
									ApplyAnimationEx(playerid, "BSKTBALL", "BBALL_PICKUP", 4.1, 0, 0, 0, 0, 800, 1);
									PlayerPlaySound(playerid, 1083, 0.0, 0.0, 0.0);
									DeleteDropItem(i);
									return 1;
								}
							}
						}
						if(GetGVarInt("PetCalled", playerid) == 1)
						{
						    static petid, Float:ax, Float:ay, Float:az, Float:php;
						    petid = GetGVarInt("CurrentPetID", playerid);
						    FCNPC_GetPosition(PetData[playerid][petid][petNPC], ax, ay, az);
						    if(PetData[playerid][petid][petDying] > 0 || FCNPC_GetHealth(PetData[playerid][petid][petNPC]) < 1.0)
						    {
						        if(GetPlayerDistanceFromPointEx(playerid, ax, ay, az) < 5.0)
						        {
							        php = GetPlayerHealth_Fix(playerid);
							        if(php < 51.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的生命不足无法治疗你的宠物");}
							        else
							        {
							            PetData[playerid][petid][petDying] = 0;
							            PetData[playerid][petid][petHealth] = 50.0;
							            PetData[playerid][petid][petLove] += 1.0;
							            ApplyAnimationEx(playerid, "bomber", "bom_plant_loop", 4.1, 0, 0, 0, 0, 0, 1);
	                                    GiveHealth(playerid, -50.0);
							            SendClientMessage(playerid, COLOR_PINK, "** 你消耗了"#TEXT_FADEGREEN"50点生命"#TEXT_PINK"治好了你的宠物");
							            FCNPC_Respawn(PetData[playerid][petid][petNPC]);
							            FCNPC_SetPosition(PetData[playerid][petid][petNPC], ax, ay, az);
							            FCNPC_SetHealth(PetData[playerid][petid][petNPC], 50.0);
							            //PlayerRecallPet(playerid, petid);
							            //PlayerSummonPet(playerid, petid);
							            Log(petlog, INFO, "%s(%d)治疗了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
										return 1;
							        }
							    }
							}
						}
						if(GetGVarInt("Trashing", playerid) > 0)
					    {
					        new objid = GetGVarInt("TrashID", playerid);
					        new partner = GetGVarInt("Partner", playerid);
					        if(GetGVarInt("CarryTrash", playerid) == 1)
					        {
					            new Float:px, Float:py, Float:pz, Float:ox, Float:oy, Float:oz, closestveh = GetNearestVehicle(playerid);
					            GetPlayerPos(playerid, px, py, pz);
					            if(GetVehicleModel(closestveh) == 408 && GetVehicleDistanceFromPoint(closestveh, px, py, pz) < 5.0)
					            {
					                SetGVarInt("CarryTrash", 0, playerid);
					                ApplyAnimationEx(playerid, "BASEBALL", "bat_hit_1", 4.1, 0, 0, 0, 0, 0, 1);
					                RemovePlayerAttachedObject(playerid, 8);
					                new trashing = GetGVarInt("Trashing", playerid), rand;
					                if(trashing <= 3)
					                {
					                    if(GetGVarInt("TrashAmount", playerid) > 0)
					                    {
					                        format(string, sizeof(string), " ** 你收集了一个垃圾,"#TEXT_YELLOW"垃圾箱"TEXT_WHITE"里还有 %d 个垃圾", GetGVarInt("TrashAmount", playerid));
					                        SendClientMessage(playerid, COLOR_WHITE, string);
					                        SendClientMessage(partner, COLOR_WHITE, " ** 你的伙伴收集了一个垃圾,"#TEXT_YELLOW"垃圾箱"TEXT_WHITE"里还有其他垃圾");
					                    }
					                    else if(trashing < 3 && GetGVarInt("TrashAmount", playerid) == 0)
					                    {
					                        if(IsPlayerInArea(playerid, "Los Santos"))
											{
										    	rand = random(sizeof(LSTrashCan));
										    	GetDynamicObjectPos(LSTrashCan[rand], ox, oy, oz);
										    	SetGVarInt("TrashID", LSTrashCan[rand], playerid);
												SetGVarInt("TrashID", LSTrashCan[rand], partner);
										    }
						                	else if(IsPlayerInArea(playerid, "San Fierro"))
											{
										    	rand = random(sizeof(SFTrashCan));
										    	GetDynamicObjectPos(SFTrashCan[rand], ox, oy, oz);
										    	SetGVarInt("TrashID", SFTrashCan[rand], playerid);
												SetGVarInt("TrashID", SFTrashCan[rand], partner);
										    }
										    else if(IsPlayerInArea(playerid, "Las Venturas"))
											{
										    	rand = random(sizeof(LVTrashCan));
										    	GetDynamicObjectPos(LVTrashCan[rand], ox, oy, oz);
										    	SetGVarInt("TrashID", LVTrashCan[rand], playerid);
												SetGVarInt("TrashID", LVTrashCan[rand], partner);
										    }
											SetPlayerMapIcon(playerid, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
											SetPlayerMapIcon(partner, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
											SetGVarInt("Trashing", trashing + 1, playerid);
											SetGVarInt("Trashing", trashing + 1, partner);
											SetGVarInt("TrashAmount", 3, playerid);
											SetGVarInt("TrashAmount", 3, partner);
											SendClientMessage(playerid, COLOR_WHITE, " ** 这里的垃圾收完了,接着请到下一个"#TEXT_YELLOW"垃圾箱"TEXT_WHITE"收集垃圾");
											SendClientMessage(partner, COLOR_WHITE, " ** 这里的垃圾收完了,接着请到下一个"#TEXT_YELLOW"垃圾箱"TEXT_WHITE"收集垃圾");
											new Float:wdistance = GetPlayerDistanceFromPointEx(playerid, ox, oy, oz);
											SetGVarFloat("WorkDistance", GetGVarFloat("WorkDistance", playerid) + wdistance, playerid);
											SetGVarFloat("WorkDistance", GetGVarFloat("WorkDistance", playerid) + wdistance, partner);
										}
										else if(trashing >= 3 && GetGVarInt("TrashAmount", playerid) == 0)
										{
										    if(IsPlayerInArea(playerid, "Los Santos"))
											{
										    	SetPlayerCheckpoint(playerid, 2181.1157, -1989.8442, 14.0831, 5.0);
										    	SetPlayerCheckpoint(partner, 2181.1157, -1989.8442, 14.0831, 5.0);
										    }
										    else if(IsPlayerInArea(playerid, "San Fierro"))
											{
										    	SetPlayerCheckpoint(playerid, -1729.6989, -119.2488, 4.0885, 5.0);
										    	SetPlayerCheckpoint(partner, -1729.6989, -119.2488, 4.0885, 5.0);
										    }
										    else if(IsPlayerInArea(playerid, "Las Venturas"))
											{
										    	SetPlayerCheckpoint(playerid, 1064.4855, 2341.8870, 10.8203, 5.0);
										    	SetPlayerCheckpoint(partner, 1064.4855, 2341.8870, 10.8203, 5.0);
										    }
										    RemovePlayerMapIcon(playerid, 0);
											SetGVarInt("Trashing", 99, playerid);
											SetGVarInt("Trashing", 99, partner);
											SetGVarInt("TrashID", 0, playerid);
											SetGVarInt("TrashID", 0, partner);
											SendClientMessage(playerid, COLOR_WHITE, " ** 垃圾收集完成,接着请返回到"#TEXT_RED"垃圾处理厂"TEXT_WHITE"处理垃圾");
											SendClientMessage(partner, COLOR_WHITE, " ** 垃圾收集完成,接着请返回到"#TEXT_RED"垃圾处理厂"TEXT_WHITE"处理垃圾");
										}
									}
					            	return 1;
					            }
				    		}
		           			if(IsPlayerCloseToDynamicObject(playerid, objid))
					        {
					            new trashamount = GetGVarInt("TrashAmount", playerid),
									rand = random(100), Float:px, Float:py, Float:pz;
					            if(GetGVarInt("CarryTrash", playerid) == 1) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 你手上已经有垃圾了");}
					            if(trashamount == 0) {SendClientMessage(playerid, COLOR_WHITE, "错误: 这个垃圾箱已经空了");}
					            if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
					            else
					            {
						            ApplyAnimationEx(playerid, "CARRY", "liftup05", 4.1, 0, 0, 0, 0, 0, 1);//拿起垃圾
						            format(string, sizeof(string), "** %s 从垃圾箱拿起了垃圾 **", playername);
					    			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					    			SendClientMessage(playerid, COLOR_WHITE, "** 你拿起了垃圾,接着按F把垃圾丢进垃圾车");
					    			SetPlayerAttachedObject(playerid, 8, 1265, 5, 0.2249, -0.1049, 0.0579, 0.0000, 239.1999, 88.5989, 0.5540, 0.6569, 0.7229, 0xFFFFFFFF, 0xFFFFFFFF);
					    			SetPlayerArmedWeapon(playerid,0);
					    			SetGVarInt("CarryTrash", 1, playerid);
					    			SetGVarInt("TrashAmount", trashamount - 1, playerid);
						            SetGVarInt("TrashAmount", trashamount - 1, partner);

						            GetPlayerPos(playerid, px, py, pz);
						            switch(rand)
						            {
						                case 0: CreateDropItem(ITEM_USE, 14, 1, px, py, pz, 0);
						                case 1: CreateDropItem(ITEM_USE, 15, 1, px, py, pz, 0);
						                case 2: CreateDropItem(ITEM_USE, 21, 1, px, py, pz, 0);
						                case 3: CreateDropItem(ITEM_USE, 28, 1, px, py, pz, 0);
		                                case 4: CreateDropItem(ITEM_USE, 33, 1, px, py, pz, 0);
		                                case 5: CreateDropItem(ITEM_USE, 91, 1, px, py, pz, 0);
		                                case 6: CreateDropItem(ITEM_USE, 115, 1, px, py, pz, 0);
		                                case 7: CreateDropItem(ITEM_USE, 119, 1, px, py, pz, 0);
		                                case 8: CreateDropItem(ITEM_USE, 135, 1, px, py, pz, 0);
		                                case 9: CreateDropItem(ITEM_USE, 20, 1, px, py, pz, 0);
		                                case 10: CreateDropItem(ITEM_USE, 30, 1, px, py, pz, 0);
		                                case 11: CreateDropItem(ITEM_USE, 29, 1, px, py, pz, 0);
		                                case 12: CreateDropItem(ITEM_USE, 26, 1, px, py, pz, 0);
		                                case 13: CreateDropItem(ITEM_USE, 31, 1, px, py, pz, 0);
		                                case 14: CreateDropItem(ITEM_USE, 80, 1, px, py, pz, 0);
		                                case 15: CreateDropItem(ITEM_USE, 29, 1, px, py, pz, 0);
		                                case 16: CreateDropItem(ITEM_EQ, 36, 1, px, py, pz, 0);
		                                case 17: CreateDropItem(ITEM_EQ, 44, 1, px, py, pz, 0);
		                                case 18: CreateDropItem(ITEM_EQ, 203, 1, px, py, pz, 0);
		                                case 19: CreateDropItem(ITEM_EQ, 204, 1, px, py, pz, 0);
		                                case 20: CreateDropItem(ITEM_CASH, 1, 200, px, py, pz, 0);
		                                case 21: CreateDropItem(ITEM_CASH, 1, 1000, px, py, pz, 0);
		                                case 22: CreateDropItem(ITEM_USE, 20, 1, px, py, pz, 0);
		                                case 23: CreateDropItem(ITEM_USE, 20, 2, px, py, pz, 0);
		                            }
	                            }
				    			return 1;
				    		}
					    }
					    if(GetGVarInt("Papering", playerid) != 0)
					    {
					        new fdid = GetGVarInt("PaperPlace", playerid);
							if(GetGVarInt("Papering", playerid) == 1 && GetPlayerDistanceFromPointEx(playerid, LSFDHousePos[fdid][0], LSFDHousePos[fdid][1], LSFDHousePos[fdid][2]) < 3.0
							|| GetGVarInt("Papering", playerid) == 2 && GetPlayerDistanceFromPointEx(playerid, SFFDHousePos[fdid][0], SFFDHousePos[fdid][1], SFFDHousePos[fdid][2]) < 3.0
							|| GetGVarInt("Papering", playerid) == 3 && GetPlayerDistanceFromPointEx(playerid, LVFDHousePos[fdid][0], LVFDHousePos[fdid][1], LVFDHousePos[fdid][2]) < 3.0)
							{
							    new PaperAmount = GetGVarInt("PaperAmount", playerid),
									Float:wd,
									time = GetGVarInt("QuestTime", playerid),
									salary = GetGVarInt("QuestSalary", playerid),
									rand;
							    SetGVarInt("PaperAmount", PaperAmount-1,  playerid);
							    SetGVarInt("QuestSalary", salary + time*4, playerid);
							    salary = GetGVarInt("QuestSalary", playerid);
							    PaperAmount = GetGVarInt("PaperAmount", playerid);
							    ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
							    format(string, sizeof(string), "** %s 在这里放了一张宣传单 **", playername);
				    			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
							    if(PaperAmount > 0)
							    {
									SendClientMessage(playerid, COLOR_WHITE, "发送完成,接着请到下一个"#TEXT_YELLOW"地点"#TEXT_WHITE"放置传单");
							    	if(IsPlayerInArea(playerid, "Los Santos"))
									{
								    	rand = random(sizeof(LSFDHousePos));
										SetGVarInt("PaperPlace", rand, playerid);
										SetGVarInt("Papering", 1, playerid);
										SetPlayerMapIcon(playerid, 0, LSFDHousePos[rand][0], LSFDHousePos[rand][1], LSFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
										wd = GetPlayerDistanceFromPointEx(playerid, LSFDHousePos[rand][0], LSFDHousePos[rand][1], LSFDHousePos[rand][2]);
										SetGVarFloat("WorkDistance", wd, playerid);
										SetGVarInt("QuestTime", time + floatround(wd/15), playerid);
									}
									else if(IsPlayerInArea(playerid, "San Fierro"))
									{
										rand = random(sizeof(SFFDHousePos));
										SetGVarInt("PaperPlace", rand, playerid);
										SetGVarInt("Papering", 2, playerid);
										SetPlayerMapIcon(playerid, 0, SFFDHousePos[rand][0], SFFDHousePos[rand][1], SFFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
										wd = GetPlayerDistanceFromPointEx(playerid, SFFDHousePos[rand][0], SFFDHousePos[rand][1], SFFDHousePos[rand][2]);
										SetGVarFloat("WorkDistance", wd, playerid);
										SetGVarInt("QuestTime", time + floatround(wd/15), playerid);
									}
									else
									{
										rand = random(sizeof(LVFDHousePos));
										SetGVarInt("PaperPlace", rand, playerid);
										SetGVarInt("Papering", 3, playerid);
										SetPlayerMapIcon(playerid, 0, LVFDHousePos[rand][0], LVFDHousePos[rand][1], LVFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
										wd = GetPlayerDistanceFromPointEx(playerid, LVFDHousePos[rand][0], LVFDHousePos[rand][1], LVFDHousePos[rand][2]);
										SetGVarFloat("WorkDistance", wd, playerid);
										SetGVarInt("QuestTime", time + floatround(wd/15), playerid);
									}
								}
								else
								{
								    new exp = 2000;
								    GivePlayerExp(playerid, exp, EXP_JOB);
									LimitData[playerid][plPayCheck] += salary;
									format(string, sizeof(string), ""#TEXT_WHITE"已送达所有传单,薪水"#TEXT_YELLOW"$%d"#TEXT_WHITE"将会在整点时汇入银行帐户", salary);
								    SendClientMessage(playerid, COLOR_WHITE, string);
									SetGVarFloat("WorkDistance", 0.0, playerid);
									DeleteGVar("Papering", playerid);
							    	DeleteGVar("PaperPlace", playerid);
							    	DeleteGVar("PaperAmount", playerid);
							    	DeleteGVar("QuestTime", playerid);
							    	DeleteGVar("QuestSalary", playerid);
							    	RemovePlayerMapIcon(playerid, 0);
							    	ShowPTD(playerid, 1, 1);
							    	RecordData[playerid][prJAds] ++;
							    	if(!PlayerHaveItem(playerid, 2, 30))
									{
										SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了速食店员造型,请至背包查看");
										GivePlayerItem(playerid, 2, 30, 1);
									}
								}
							}
						}
						return 1;
					}
				}
			}
		    case 2:
		    {
		    }
		}
	}
	else if(PRESSED(KEY_JUMP))
	{
		switch(pstate)
		{
			case 2://煞车
			{
				vehicleid = GetPlayerVehicleID(playerid);
				if(VehData[vehicleid][vTurbo] > 0)//如果有安装涡轮
				{
					SetGVarInt("TurboCD", 5, vehicleid);//让涡轮暂时进入冷却
				}
			}
		}
	}
	
	else if(PRESSED(KEY_CTRL_BACK))
	{
		switch(pstate)
		{
			case 1:
			{
				ShowPlayerChatMenu(playerid);
   			}
		}
	}


	else if(PRESSED(KEY_ACTION))
	{
	    switch(pstate)
		{
		    case 1:{}
		    case 2,3:
			{
			    vehicleid = GetPlayerVehicleID(playerid);
			    if(GetVehicleModel(vehicleid) == 408)
			    {
			        new rand, Float:ox, Float:oy, Float:oz;
			        if(PlayerData[playerid][pJob] != JOB_TRASH) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是垃圾处理员");
			        if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
			        if(GetGVarInt("Trashing", playerid) > 0)
			        {
						ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"结束工作", ""#TEXT_WHITE"你目前正在工作\n是否结束?", "是", "否");
						return 1;
					}
					else if(GetGVarInt("Mission", playerid) > 0)  return SendClientMessage(playerid, COLOR_WHITE, "错误: 正在进行任务时无法进行这个工作");
			        else if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在进行其他事项");
				    if(IsPlayerInArea(playerid, "Los Santos"))
					{
					    rand = random(sizeof(LSTrashCan));
					    GetDynamicObjectPos(LSTrashCan[rand], ox, oy, oz);
					    SetPlayerMapIcon(playerid, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
					    SetGVarInt("TrashID", LSTrashCan[rand], playerid);
					}
					else if(IsPlayerInArea(playerid, "San Fierro"))
					{
					    rand = random(sizeof(SFTrashCan));
					    GetDynamicObjectPos(SFTrashCan[rand], ox, oy, oz);
					    SetPlayerMapIcon(playerid, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
					    SetGVarInt("TrashID", SFTrashCan[rand], playerid);
					}
					else if(IsPlayerInArea(playerid, "Las Venturas"))
					{
					    rand = random(sizeof(LVTrashCan));
					    GetDynamicObjectPos(LVTrashCan[rand], ox, oy, oz);
					    SetPlayerMapIcon(playerid, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
					    SetGVarInt("TrashID", LVTrashCan[rand], playerid);
					}
					else
					{
					    return 	SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地区没有垃圾可以收");
					}
					DisablePlayerCheckpoint(playerid);
					SetGVarInt("Trashing", 1, playerid);
					SetGVarInt("TrashAmount", 3, playerid);
					SendClientMessage(playerid, COLOR_WHITE, "你开始了收垃圾的工作,请到指定垃圾箱收集垃圾,当到达目的地时,按F键从垃圾箱拿起垃圾");
					SendClientMessage(playerid, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
					PlayerData[playerid][pStamina] -= 4.0;
					SetGVarFloat("WorkDistance", 0.0, playerid);
					new Float:wdistance = GetPlayerDistanceFromPointEx(playerid, ox, oy, oz);
					SetGVarFloat("WorkDistance", wdistance, playerid);
					ForEachPlayer(i)
					{
	            		if(GetPlayerVehicleID(i) == vehicleid && i != playerid && PlayerData[i][pJob] == JOB_TRASH)
	            		{
	            		    if(PlayerData[i][pStamina] < 4.0)
	            		    {
	            		        SendClientMessage(i, COLOR_WHITE, "错误: 你的体力不足无法与伙伴一起接受工作");
	            		        return SendClientMessage(playerid, COLOR_WHITE, " "#TEXT_ORANGE"** 注意:"#TEXT_WHITE" 你的伙伴体力不足无法与你一起接受工作");
								//别忘了return停止继续协力工作哟
	            		    }
	            		    if(IsPlayerBusy(i) || GetGVarInt("Mission", i) > 0)
	            		    {
	            		        SendClientMessage(i, COLOR_WHITE, "错误: 你目前有其他事情要忙,无法与伙伴一起接受工作");
	            		        return SendClientMessage(playerid, COLOR_WHITE, " "#TEXT_ORANGE"** 注意:"#TEXT_WHITE" 你的伙伴已经先接受了工作无法与你一起工作");
								//别忘了return停止继续协力工作哟
	            		    }
	            		    DisablePlayerCheckpoint(i);
	            		    SetGVarInt("Partner", i, playerid);
	            		    SetGVarInt("Partner", playerid, i);
	            		    SetGVarInt("Trashing", 1, i);
	            		    SetGVarInt("TrashAmount", 3, i);
							SetGVarInt("TrashID", GetGVarInt("TrashID", playerid), i);
							format(string, sizeof(string), " ** 你的伙伴 %s 开始了收垃圾的工作,请跟他到指定"#TEXT_YELLOW"垃圾箱"TEXT_WHITE"收集垃圾", playername);
							SendClientMessage(i, COLOR_WHITE, string);
							SendClientMessage(i, COLOR_WHITE, " ** 当到达目的地时,按"#TEXT_LIGHTGREEN"F键"TEXT_WHITE"从垃圾箱拿起垃圾");
							SendClientMessage(i, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
							PlayerData[i][pStamina] -= 4.0;
							SetPlayerMapIcon(i, 0, ox, oy, oz, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
							SetGVarFloat("WorkDistance", wdistance, i);
						}
	        		}
				}
				else if(IsATrailerTruck(vehicleid))
				{
				    if(PlayerData[playerid][pJob] != JOB_TRUCK) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是联结车司机");
				    if(!IsTrailerAttachedToVehicle(vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 联结车没有挂载货柜或是油罐");
				    new trailerid = GetVehicleTrailer(vehicleid);
				    if(GetVehicleModel(trailerid) == 584)//油罐
				    {
						if(GetGVarInt("Transporting", playerid) == 0)
						{
						    if(IsPlayerInRangeOfPointEx(playerid,30.0,-1015.9789,-685.3097,32.0078) || IsPlayerInRangeOfPointEx(playerid,30.0,253.3087,1396.6035,10.5859))
							{
							    if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
								static i, j;
						        for(i = j = 0; i < sizeof(GasStationPos); i ++)
						        {
						            if(GasStationFilled[i] != 0) j++;
								}
								if(i == j) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前没有任何一家加油站需要补给");
						        SetGVarInt("Transporting", 1, playerid);
						        SetGVarInt("TTrailer", trailerid, playerid);
						        SendClientMessage(playerid, COLOR_WHITE, "你开始了运送油罐的工作,把石油运送到加油站按左Ctrl键获得收益");
						        SendClientMessage(playerid, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
						        PlayerData[playerid][pStamina] -= 4.0;
						        GameTextForPlayer(playerid, "~w~正在装油...", 4000, 3);
						        TogglePlayerControllableEx(playerid, 0);
						        SetPlayerTimerEx(playerid, "UnFreeze", 5000, 0, "i", playerid);
						        return 1;
						    }
					    }
					    else if(GetGVarInt("Transporting", playerid) == 1)
					    {
						    for(new i = 0; i < sizeof(GasStationPos); i ++)//加油
							{
								if(IsPlayerInRangeOfPointEx(playerid,30.0,GasStationPos[i][0],GasStationPos[i][1],GasStationPos[i][2]) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
								{
									if(GasStationFilled[i] == 0)
									{
									    if(trailerid != GetGVarInt("TTrailer", playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个油罐没有装载石油");
									    new salary = 500 + random(2000),
											exp = 750;
	            						LimitData[playerid][plPayCheck] += salary;
									    GivePlayerExp(playerid, exp, EXP_JOB);
										format(string, sizeof(string), ""#TEXT_WHITE"完成: 运送油罐达成,薪水$%d将会在整点时汇入银行帐户", salary);
										SendClientMessage(playerid, COLOR_WHITE, string);
									    TogglePlayerControllableEx(playerid,0);
										SetPlayerTimerEx(playerid, "UnLoad", 2000, 0, "i", playerid);
										GasStationFilled[i] = 1;
										RecordData[playerid][prJGas] ++;
										DeleteGVar("Transporting", playerid);
										DeleteGVar("TransportTo", playerid);
										DeleteGVar("TTrailer", playerid);
										RepairVehicle(vehicleid);
										return 1;
									}
									else
									{
									    return SendClientMessage(i, COLOR_WHITE, "错误: 这个加油站不需要补给");
									}
								}
							}
							ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"结束工作", ""#TEXT_WHITE"你尚未到达任何加油站\n是否要取消目前的工作?", "是", "否");
							return 1;
						}
				    }
				    else if(GetVehicleModel(trailerid) == 591 || GetVehicleModel(trailerid) == 435)//货柜
				    {
						if(GetGVarInt("Transporting", playerid) == 0)
						{
						    if(IsPlayerInRangeOfPointEx(playerid,60.0,-1710.1624,88.4026,3.5547) || IsPlayerInRangeOfPointEx(playerid,60.0,2307.4146,-2354.1321,13.4025))
							{
						    	new target;
						    	if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
						    	if(IsPlayerInArea(playerid, "Las Venturas"))
								{
									if(IsPlayerInArea(playerid, "Los Santos")) target = 1;
						        	else if(IsPlayerInArea(playerid, "San Fierro")) target = 0;
									else if(IsPlayerInArea(playerid, "Las Venturas")) target = 2;
									else return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这个地区没有办法联系货柜运送工作");
								}
					    		SetPlayerMapIcon(playerid, 0, TrailerDeliverPos[target][0], TrailerDeliverPos[target][1], TrailerDeliverPos[target][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
					    		new Float:wdistance = GetPlayerDistanceFromPointEx(playerid, TrailerDeliverPos[target][0], TrailerDeliverPos[target][1], TrailerDeliverPos[target][2]);
								SetGVarFloat("WorkDistance", wdistance, playerid);
					    		SetGVarInt("Transporting", 2, playerid);
					    		SetGVarInt("TransportTo", target, playerid);
					    		SetGVarInt("TTrailer", trailerid, playerid);
						    	SendClientMessage(playerid, COLOR_WHITE, "你开始了运送货柜的工作,把货柜运送到指定地点按左Ctrl键卸载获得收益");
						    	SendClientMessage(playerid, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
						    	PlayerData[playerid][pStamina] -= 4.0;
						    	return 1;
							}
							else return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在SF货柜区或LS货柜区");
					    }
					    else if(GetGVarInt("Transporting", playerid) == 2)
					    {
					        new pt = GetGVarInt("TransportTo", playerid);
							if(IsPlayerInRangeOfPointEx(playerid, 10.0, TrailerDeliverPos[pt][0], TrailerDeliverPos[pt][1], TrailerDeliverPos[pt][2]))
							{
							    if(trailerid != GetGVarInt("TTrailer", playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个货柜没有装载运输货物");
								new Float:wdistance = GetGVarFloat("WorkDistance", playerid),
									salary = 500 + floatround(wdistance) + random(100),
									exp = floatround(wdistance);
	            				LimitData[playerid][plPayCheck] += salary;
								GivePlayerExp(playerid, exp, EXP_JOB);
								format(string, sizeof(string), ""#TEXT_WHITE"完成: 运送货柜达成,薪水$%d将会在整点时汇入银行帐户", salary);
								SendClientMessage(playerid, COLOR_WHITE, string);
								TogglePlayerControllableEx(playerid,0);
								SetPlayerTimerEx(playerid, "UnLoad", 2000, 0, "i", playerid);
								RemovePlayerMapIcon(playerid, 0);
							    RecordData[playerid][prJRoadDeliver] ++;
								DeleteGVar("Transporting", playerid);
								DeleteGVar("TransportTo", playerid);
								DeleteGVar("TTrailer", playerid);
								RepairVehicle(vehicleid);
							}
							else return ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"结束工作", ""#TEXT_WHITE"你尚未到达目标地点\n是否要取消目前的工作?", "是", "否");
						}
				    }
				    else
					{
					    if(GetGVarInt("Transporting", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先挂载油罐或货柜");
					    else return ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"结束工作", ""#TEXT_WHITE"是否要取消目前的工作?", "是", "否");
					}
				}
				else if(GetVehicleModel(vehicleid) == 453 && PlayerData[playerid][pJob] == JOB_FISHER)
				{
				    if(GetGVarInt("Fishering", playerid) == 1)
					{
					    static inv[256];
				    	inv[0] = EOS;
				    	format(inv, sizeof(inv), ""#TEXT_WHITE"鱼种\t"#TEXT_WHITE"数量\n", inv, Fishery[playerid][fsCod]);
					    if(Fishery[playerid][fsCod] > 0) format(inv, sizeof(inv), "%s鳕鱼\t%d\n", inv, Fishery[playerid][fsCod]);
					    if(Fishery[playerid][fsSaury] > 0) format(inv, sizeof(inv), "%s秋刀鱼\t%d\n", inv, Fishery[playerid][fsSaury]);
					    if(Fishery[playerid][fsHerring] > 0) format(inv, sizeof(inv), "%s鲱鱼\t%d\n", inv, Fishery[playerid][fsHerring]);
					    if(Fishery[playerid][fsSardine] > 0) format(inv, sizeof(inv), "%s沙丁鱼\t%d\n", inv, Fishery[playerid][fsSardine]);
					    if(Fishery[playerid][fsSwordFish] > 0) format(inv, sizeof(inv), "%s旗鱼\t%d\n", inv, Fishery[playerid][fsSwordFish]);
					    if(Fishery[playerid][fsMackerel] > 0) format(inv, sizeof(inv), "%s鲭鱼\t%d\n", inv, Fishery[playerid][fsMackerel]);
					    if(Fishery[playerid][fsSquid] > 0) format(inv, sizeof(inv), "%s鱿鱼\t%d\n", inv, Fishery[playerid][fsSquid]);
					    if(Fishery[playerid][fsTuna] > 0) format(inv, sizeof(inv), "%s鲔鱼\t%d\n", inv, Fishery[playerid][fsTuna]);
					    if(Fishery[playerid][fsGoldenCarp] > 0) format(inv, sizeof(inv), "%s金鳗鱼\t%d\n", inv, Fishery[playerid][fsGoldenCarp]);
					    if(Fishery[playerid][fsPiranha] > 0) format(inv, sizeof(inv), "%s食人鱼\t%d\n", inv, Fishery[playerid][fsPiranha]);
					    if(Fishery[playerid][fsPomfret] > 0) format(inv, sizeof(inv), "%s大白鲳\t%d\n", inv, Fishery[playerid][fsPomfret]);
					    if(Fishery[playerid][fsSnapper] > 0) format(inv, sizeof(inv), "%s长尾鸟\t%d\n", inv, Fishery[playerid][fsSnapper]);
					    if(Fishery[playerid][fsTuskfin] > 0) format(inv, sizeof(inv), "%s四齿鱼\t%d\n", inv, Fishery[playerid][fsTuskfin]);
					    format(inv, sizeof(inv), "%s是否要收网了?", inv);
					    ShowPlayerDialog(playerid, DIALOG_FISHERY_INV, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"渔获", inv, "收网", "继续");
					}
					else
					{
						format(string, sizeof(string), ""#TEXT_WHITE"你的渔获价值: "#TEXT_FADEGREEN"$%d\n出网\n出售渔获", GetPlayerFisheriesValue(playerid));
						ShowPlayerDialog(playerid, DIALOG_FISHERY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"渔船", string, "选择", "取消");
					}
				}
				else if(vehicleid == GetGVarInt("ERVeh", playerid))
				{
					if(GetGVarInt("EditRCP", playerid) != 0)
					{
					    new
					    raceid = GetGVarInt("ERaceID", playerid),
					    currentrcp = RaceData[raceid][rtMaxCP]-1;
					    if(currentrcp < 0)
					    {
					        return SendClientMessage(playerid, COLOR_WHITE, "错误: 已经没有检查点可以删除了");
						}
						DeleteRaceCheckPoint(raceid, currentrcp);
						RaceData[raceid][rtMaxCP] -= 1;
						currentrcp = RaceData[raceid][rtMaxCP]-1;
						if(RaceData[raceid][rtMaxCP] > 0) SetPlayerCheckpoint(playerid, RCPData[raceid][currentrcp][rcpX], RCPData[raceid][currentrcp][rcpY], RCPData[raceid][currentrcp][rcpZ], 10.0);
						else DisablePlayerCheckpoint(playerid);
						format(string, sizeof(string), ""#TEXT_WHITE"已移除检查点,目前有 %d 个检查点", RaceData[raceid][rtMaxCP]);
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
				else if(GetGVarInt("EditBS", playerid) == 1)
				{
				    new rid = GetGVarInt("EBRID", playerid),
					    laststop = BusRoute[rid][brMaxStop]-1;
					if(laststop < 0)
					{
					    return SendClientMessage(playerid, COLOR_WHITE, "错误: 已经没有停靠站可以删除了");
					}
					DeleteBusStop(rid, laststop);
					BusRoute[rid][brMaxStop] -= 1;
					if(BusRoute[rid][brMaxStop] > 0) SetPlayerCheckpoint(playerid, BusStop[rid][laststop][bsX], BusStop[rid][laststop][bsY], BusStop[rid][laststop][bsZ], 10.0);
					else DisablePlayerCheckpoint(playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"已移除停靠站,目前有 %d 个检查点", BusRoute[rid][brMaxStop]);
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				else if(!IsPlayerVehicle(playerid, vehicleid) && !IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid) && !IsGangVehicle(PlayerData[playerid][pGang], vehicleid)
				&& !IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid) && (VehData[vehicleid][vType] == VTYPE_PLAYER || VehData[vehicleid][vType] == VTYPE_COMPANY
				|| VehData[vehicleid][vType] == VTYPE_GANG || VehData[vehicleid][vType] == VTYPE_DEPARTMENT))
				{
				    if(IsPlayerInRangeOfPointEx(playerid,10.0,-1553.7744,123.8907,3.5547) || IsPlayerInRangeOfPointEx(playerid,10.0,2695.2246,-2220.0225,13.5501))
					{
					    format(string, sizeof(string), ""#TEXT_WHITE"你确定要走私这台%s吗?", GetVehicleName(GetVehicleModel(vehicleid)));
						ShowPlayerDialog(playerid, DIALOG_MCAR_SELL, DIALOG_STYLE_MSGBOX, "走私货港", string, "确认", "取消");
					}
				}
				else if(VehData[vehicleid][vOwned] == 0)
				{
				    if(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid && PlayerData[playerid][pJob] == JOB_CARSELL)
		    		{
		    		    PlayerSwitchVehicleEngine(playerid, vehicleid);
					}
				}
			}
		}
	}
	return 1;
}



public OnRconLoginAttempt(ip[], password[], success)
{
	return 1;
}

public OnPlayerUpdate(playerid)
{
	if(GetGVarInt("Logged", playerid) == 1)
	{
	    if(GetGVarInt("Fishing", playerid) > 0 || GetGVarInt("Digging", playerid) > 0 || GetGVarInt("Hewing", playerid) > 0 || GetGVarInt("FreeLifting", playerid) == 1
		 ||GetGVarInt("BenchLifting", playerid) > 0 || GetGVarInt("CarryTrash", playerid) == 1 || GetGVarInt("PlayerAnimal", playerid) > 0
		 ||GetGVarInt("GymRunning", playerid) > 0 || GetGVarInt("GymBiking", playerid) != 0 || GetGVarInt("UsingChalk", playerid) == 1
		 ||GetGVarInt("MoveFighting", playerid) > 0)
		{
		    SetPlayerArmedWeapon(playerid,0);
		}
	    new CurWeap = GetPlayerWeapon(playerid);
	    if(CurWeap != GetGVarInt("CurrentWeapon", playerid))
	    {
	        OnPlayerChangeWeapon(playerid, GetGVarInt("CurrentWeapon", playerid), CurWeap);
	        SetGVarInt("CurrentWeapon", CurWeap, playerid);
	    }
	    if(GetPlayerMoney(playerid) != PlayerData[playerid][pCash])
	    {
	        if(GetGVarInt("ModdingShop", playerid) == 0)//如果正在改车就暂时不同步身上现金
	        {
				ResetPlayerMoney(playerid);
				GivePlayerMoney(playerid, PlayerData[playerid][pCash]);
			}
		}
		
		if (Paused[playerid])
		{
	    	Paused[playerid] = 0;
		}
		AFKLastUpdate[playerid] = gettime();
	}
	return 1;
}

public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
    phone_OnPlayerClickTextDraw(playerid, clickedid);
    if(clickedid == Text:INVALID_TEXT_DRAW)
    {
        if(GetGVarInt("PlayerQTEing", playerid) == 1) FinishQTE(playerid);
		if(GetGVarInt("PlayerBuyingCarAllow", playerid) == 1) PlayerExitBuyCar(playerid);
		if(GetGVarInt("PlayerBuyingSkin", playerid) == 1)
		{
			if(GetGVarInt("SkinType", playerid) == 7)//新手选造型
			{
				HideBuySkinTextDraw(playerid);
				ShowPlayerRegMenu(playerid, 2);
			}
			else PlayerExitBuySkin(playerid);
		}
		if(GetGVarInt("EditVCol", playerid) != 0) PlayerExitPaintVehicle(playerid);
    }
    return 0;
}

public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid)
{
    new string[144];
    
    phone_OnPlayerClickPTextDraw(playerid, playertextid); // phone
    if(GetGVarInt("PlayerQTEing", playerid) == 1)//QTE
    {
        new maxq = GetGVarInt("PlayerQTENum", playerid), firstkey = 0, qtelist[144], count, tmpvar;
        for(new i = 0; i < maxq; i++)
		{
			switch(GetGVarInt("PlayerQTE", i*1000+playerid))
			{
				case 0: continue;
				default:
				{
				    SetGVarInt("PlayerQTEProgress", i, playerid);
        			firstkey = GetGVarInt("PlayerQTE", i*1000+playerid);
				    break;
				}
			}
		}
		if(playertextid == QTECancel[playerid])
	    {
			FinishQTE(playerid);
			printf("QTECancel");
	    }
		if((playertextid == QTELB[playerid] && firstkey == 1) || (playertextid == QTERB[playerid] && firstkey == 2)
		 || (playertextid == QTEUB[playerid] && firstkey == 3) || (playertextid == QTEDB[playerid] && firstkey == 4))
	    {
	        tmpvar = GetGVarInt("PlayerQTEProgress", playerid);
         	SetGVarInt("PlayerQTE", 0, tmpvar*1000+playerid);
	        SetGVarInt("PlayerQTEProgress", tmpvar+1, playerid);
	        PlayerPlaySound(playerid, 1150, 0.0, 0.0, 0.0);
	    }
	    else {SetGVarInt("PlayerQTEWrong", GetGVarInt("PlayerQTEWrong", playerid)+1, playerid);}

	    if(GetGVarInt("PlayerQTEProgress", playerid) >= maxq)
	    {
         	SetGVarInt("PlayerQTESuccess", 1, playerid);
			FinishQTE(playerid);
			printf("PlayerQTESuccess");
	    }
	    else
	    {
        	for(new i = 0; i < maxq; i++)//处理更新后的QTE表
			{
				switch(GetGVarInt("PlayerQTE", i*1000+playerid))
				{
     				case 0: continue;
					case 1: {format(qtelist, sizeof(qtelist), "%s~<~", qtelist); count++;}
					case 2: {format(qtelist, sizeof(qtelist), "%s~>~", qtelist); count++;}
					case 3: {format(qtelist, sizeof(qtelist), "%s~u~", qtelist); count++;}
					case 4:	{format(qtelist, sizeof(qtelist), "%s~d~", qtelist); count++;}
				}
			}
		}
		PlayerTextDrawSetString(playerid,QTEList[playerid],qtelist);
		PlayerTextDrawShow(playerid,QTEList[playerid]);
		format(string, sizeof(string), "%d/%d_剩余", count, maxq);
		PlayerTextDrawSetString(playerid,QTECount[playerid],string);
	}

	if(GetGVarInt("EditVCol", playerid) != 0)
	{
	    if(GetPlayerState(playerid) == 2)
	    {
		    new color1 = GetGVarInt("EVColor1", playerid),
		        color2 = GetGVarInt("EVColor2", playerid),
				vehicleid = GetPlayerVehicleID(playerid);
		    if(playertextid == Color1L[playerid])
		    {
		        color1 = color1+1;
		        if(color1 > 255) color1 = 0;
		    	SetGVarInt("EVColor1", color1, playerid);
				ChangeVehicleColor(vehicleid, color1, color2);
			}
			if(playertextid == Color1R[playerid])
		    {
		        color1 = color1-1;
		        if(color1 < 0) color1 = 255;
		    	SetGVarInt("EVColor1", color1, playerid);
				ChangeVehicleColor(vehicleid, color1, color2);
			}
			if(playertextid == Color2L[playerid])
		    {
		        color2 = color2+1;
		        if(color2 > 255) color2 = 0;
		    	SetGVarInt("EVColor2", color2, playerid);
				ChangeVehicleColor(vehicleid, color1, color2);
			}
			if(playertextid == Color2R[playerid])
		    {
		        color2 = color2-1;
		        if(color2 < 0) color2 = 255;
		    	SetGVarInt("EVColor2", color2, playerid);
				ChangeVehicleColor(vehicleid, color1, color2);
			}
			if(playertextid == ColorEnter[playerid])
			{
			    PlayerExitPaintVehicle(playerid);
			}
		}
	}

	if(GetGVarInt("PlayerBuyingCarAllow", playerid) == 1)//改用一个开关来检查是否可以更换车辆设置
	{
	    new numtmp = GetGVarInt("PlayerBuyingCarNum", playerid);
	    new carid = GetGVarInt("PlayerBuyingCarID", playerid);
	    if(playertextid == BCLeft[playerid])
	    {
	        numtmp++;
   			SetGVarInt("PlayerBuyingCarColor", 0, playerid);
		}
		else if(playertextid == BCRight[playerid])
	    {
			numtmp--;
			SetGVarInt("PlayerBuyingCarColor", 0, playerid);
		}
		else if(playertextid == BCColorL[playerid])
		{
			SetGVarInt("PlayerBuyingCarColor", GetGVarInt("PlayerBuyingCarColor", playerid)+1, playerid);
			if(GetGVarInt("PlayerBuyingCarColor", playerid) > 255) {SetGVarInt("PlayerBuyingCarColor", 0, playerid);}
			new setcolor = GetGVarInt("PlayerBuyingCarColor", playerid);
			ChangeVehicleColor(carid, setcolor, setcolor);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], setcolor, setcolor);
			PlayerTextDrawHide(playerid, BCPreview[playerid]);
			PlayerTextDrawShow(playerid, BCPreview[playerid]);
		}
		else if(playertextid == BCColorR[playerid])
		{
			SetGVarInt("PlayerBuyingCarColor", GetGVarInt("PlayerBuyingCarColor", playerid)-1, playerid);
			if(GetGVarInt("PlayerBuyingCarColor", playerid) < 0) {SetGVarInt("PlayerBuyingCarColor", 255, playerid);}
			new setcolor = GetGVarInt("PlayerBuyingCarColor", playerid);
			ChangeVehicleColor(carid, setcolor, setcolor);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], setcolor, setcolor);
			PlayerTextDrawHide(playerid, BCPreview[playerid]);
			PlayerTextDrawShow(playerid, BCPreview[playerid]);
		}
		else if(playertextid == BCExit[playerid])
		{
			return PlayerExitBuyCar(playerid);
		}
        else if(playertextid == BCBuy[playerid])
		{
		    new model, Float:vehX, Float:vehY, Float:vehZ, Float:vehA, color1, color2, spawnid, vprice,
		    shop = GetGVarInt("PlayerBuyingCarPlace", playerid);
		    switch(shop)
		    {
	            case VS_LV1://LV售车场1
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(LVCarSell1Spawned[0] == 0) spawnid = 0;
			    	else if(LVCarSell1Spawned[1] == 0) spawnid = 1;
			    	else if(LVCarSell1Spawned[2] == 0) spawnid = 2;
			    	else if(LVCarSell1Spawned[3] == 0) spawnid = 3;
			    	else if(LVCarSell1Spawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = LVCARSELL1DATA[numtmp][csModel];
					vprice = GetVehiclePrice(LVCARSELL1DATA[numtmp][csModel]);
					vehX = LVCarSell1SpawnPos[spawnid][0],
					vehY = LVCarSell1SpawnPos[spawnid][1],
					vehZ = LVCarSell1SpawnPos[spawnid][2],
					vehA = LVCarSell1SpawnPos[spawnid][3];
					LVCarSell1Spawned[spawnid] = 1;
				}
				case VS_GROTTI://Grotti
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(GrottiSpawned[0] == 0) spawnid = 0;
			    	else if(GrottiSpawned[1] == 0) spawnid = 1;
			    	else if(GrottiSpawned[2] == 0) spawnid = 2;
			    	else if(GrottiSpawned[3] == 0) spawnid = 3;
			    	else if(GrottiSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = GROTTIDATA[numtmp][csModel];
					vprice = GetVehiclePrice(GROTTIDATA[numtmp][csModel]);
					vehX = GrottiSpawnPos[spawnid][0],
					vehY = GrottiSpawnPos[spawnid][1],
					vehZ = GrottiSpawnPos[spawnid][2],
					vehA = GrottiSpawnPos[spawnid][3];
					GrottiSpawned[spawnid] = 1;
				}
				case VS_SIMEON://Simeon
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(LSCarSell1Spawned[0] == 0) spawnid = 0;
			    	else if(LSCarSell1Spawned[1] == 0) spawnid = 1;
			    	else if(LSCarSell1Spawned[2] == 0) spawnid = 2;
			    	else if(LSCarSell1Spawned[3] == 0) spawnid = 3;
			    	else if(LSCarSell1Spawned[4] == 0) spawnid = 4;
			    	else if(LSCarSell1Spawned[5] == 0) spawnid = 5;
			    	else if(LSCarSell1Spawned[6] == 0) spawnid = 6;
			    	else if(LSCarSell1Spawned[7] == 0) spawnid = 7;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = LSCARSELL1DATA[numtmp][csModel];
					vprice = GetVehiclePrice(LSCARSELL1DATA[numtmp][csModel]);
					vehX = LSCarSell1SpawnPos[spawnid][0],
					vehY = LSCarSell1SpawnPos[spawnid][1],
					vehZ = LSCarSell1SpawnPos[spawnid][2],
					vehA = LSCarSell1SpawnPos[spawnid][3];
					LSCarSell1Spawned[spawnid] = 1;
				}
				case VS_WANG://WangCar
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0 && PlayerHaveItem(playerid, ITEM_USE, 184) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(WangCarSpawned[0] == 0) spawnid = 0;
			    	else if(WangCarSpawned[1] == 0) spawnid = 1;
			    	else if(WangCarSpawned[2] == 0) spawnid = 2;
			    	else if(WangCarSpawned[3] == 0) spawnid = 3;
			    	else if(WangCarSpawned[4] == 0) spawnid = 4;
			    	else if(WangCarSpawned[5] == 0) spawnid = 5;
			    	else if(WangCarSpawned[6] == 0) spawnid = 6;
			    	else if(WangCarSpawned[7] == 0) spawnid = 7;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = WANGCARDATA[numtmp][csModel];
					vprice = GetVehiclePrice(WANGCARDATA[numtmp][csModel]);
					vehX = WangCarSpawnPos[spawnid][0],
					vehY = WangCarSpawnPos[spawnid][1],
					vehZ = WangCarSpawnPos[spawnid][2],
					vehA = WangCarSpawnPos[spawnid][3];
					WangCarSpawned[spawnid] = 1;
				}
				case VS_BISVEH_LS://营业用车
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(LSBisVehSellSpawned[0] == 0) spawnid = 0;
			    	else if(LSBisVehSellSpawned[1] == 0) spawnid = 1;
			    	else if(LSBisVehSellSpawned[2] == 0) spawnid = 2;
			    	else if(LSBisVehSellSpawned[3] == 0) spawnid = 3;
			    	else if(LSBisVehSellSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = BISVEHSELLDATA[numtmp][csModel];
					vprice = GetVehiclePrice(BISVEHSELLDATA[numtmp][csModel]);
					vehX = LSBisVehSellSpawnPos[spawnid][0],
					vehY = LSBisVehSellSpawnPos[spawnid][1],
					vehZ = LSBisVehSellSpawnPos[spawnid][2],
					vehA = LSBisVehSellSpawnPos[spawnid][3];
					LSBisVehSellSpawned[spawnid] = 1;
				}
				case VS_BISVEH_SF://营业用车
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(SFBisVehSellSpawned[0] == 0) spawnid = 0;
			    	else if(SFBisVehSellSpawned[1] == 0) spawnid = 1;
			    	else if(SFBisVehSellSpawned[2] == 0) spawnid = 2;
			    	else if(SFBisVehSellSpawned[3] == 0) spawnid = 3;
			    	else if(SFBisVehSellSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = BISVEHSELLDATA[numtmp][csModel];
					vprice = GetVehiclePrice(BISVEHSELLDATA[numtmp][csModel]);
					vehX = SFBisVehSellSpawnPos[spawnid][0],
					vehY = SFBisVehSellSpawnPos[spawnid][1],
					vehZ = SFBisVehSellSpawnPos[spawnid][2],
					vehA = SFBisVehSellSpawnPos[spawnid][3];
					SFBisVehSellSpawned[spawnid] = 1;
				}
				case VS_BISVEH_LV://营业用车
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(LVBisVehSellSpawned[0] == 0) spawnid = 0;
			    	else if(LVBisVehSellSpawned[1] == 0) spawnid = 1;
			    	else if(LVBisVehSellSpawned[2] == 0) spawnid = 2;
			    	else if(LVBisVehSellSpawned[3] == 0) spawnid = 3;
			    	else if(LVBisVehSellSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = BISVEHSELLDATA[numtmp][csModel];
					vprice = GetVehiclePrice(BISVEHSELLDATA[numtmp][csModel]);
					vehX = LVBisVehSellSpawnPos[spawnid][0],
					vehY = LVBisVehSellSpawnPos[spawnid][1],
					vehZ = LVBisVehSellSpawnPos[spawnid][2],
					vehA = LVBisVehSellSpawnPos[spawnid][3];
					LVBisVehSellSpawned[spawnid] = 1;
				}
				case VS_SFBIKE://SF Bike
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0 && PlayerHaveItem(playerid, ITEM_USE, 185) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(SFBikeSpawned[0] == 0) spawnid = 0;
			    	else if(SFBikeSpawned[1] == 0) spawnid = 1;
			    	else if(SFBikeSpawned[2] == 0) spawnid = 2;
			    	else if(SFBikeSpawned[3] == 0) spawnid = 3;
			    	else if(SFBikeSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = SFBIKEDATA[numtmp][csModel];
					vprice = GetVehiclePrice(SFBIKEDATA[numtmp][csModel]);
					vehX = SFBikeSpawnPos[spawnid][0],
					vehY = SFBikeSpawnPos[spawnid][1],
					vehZ = SFBikeSpawnPos[spawnid][2],
					vehA = SFBikeSpawnPos[spawnid][3];
					SFBikeSpawned[spawnid] = 1;
				}
				case VS_LSMUSCLE://LSMuscle
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(LSMuscleSpawned[0] == 0) spawnid = 0;
			    	else if(LSMuscleSpawned[1] == 0) spawnid = 1;
			    	else if(LSMuscleSpawned[2] == 0) spawnid = 2;
			    	else if(LSMuscleSpawned[3] == 0) spawnid = 3;
			    	else if(LSMuscleSpawned[4] == 0) spawnid = 4;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = LSMUSCLEDATA[numtmp][csModel];
					vprice = GetVehiclePrice(LSMUSCLEDATA[numtmp][csModel]);
					vehX = LSMuscleSpawnPos[spawnid][0],
					vehY = LSMuscleSpawnPos[spawnid][1],
					vehZ = LSMuscleSpawnPos[spawnid][2],
					vehA = LSMuscleSpawnPos[spawnid][3];
					LSMuscleSpawned[spawnid] = 1;
				}
				case VS_SF1://SF售车场1
				{
				    if(PlayerData[playerid][pCash] < vprice && PlayerHaveItem(playerid, ITEM_USE, 183) == 0) return SendClientMessage(playerid, COLOR_WHITE, "**错误: 您身上的现金不足订购这台车");
				    if(SFCarSell1Spawned[0] == 0) spawnid = 0;
			    	else if(SFCarSell1Spawned[1] == 0) spawnid = 1;
			    	else if(SFCarSell1Spawned[2] == 0) spawnid = 2;
			    	else if(SFCarSell1Spawned[3] == 0) spawnid = 3;
			    	else if(SFCarSell1Spawned[4] == 0) spawnid = 4;
			    	else if(SFCarSell1Spawned[5] == 0) spawnid = 5;
			    	else if(SFCarSell1Spawned[6] == 0) spawnid = 6;
			    	else if(SFCarSell1Spawned[7] == 0) spawnid = 7;
			    	else {return SendClientMessage(playerid, COLOR_WHITE, "**错误: 目前没有多余的空位能存放您订购的载具了, 请稍等一下子");}
					model = SFCARSELL1DATA[numtmp][csModel];
					vprice = GetVehiclePrice(SFCARSELL1DATA[numtmp][csModel]);
					vehX = SFCarSell1SpawnPos[spawnid][0],
					vehY = SFCarSell1SpawnPos[spawnid][1],
					vehZ = SFCarSell1SpawnPos[spawnid][2],
					vehA = SFCarSell1SpawnPos[spawnid][3];
					SFCarSell1Spawned[spawnid] = 1;
				}
			}

		    color1 = color2 = GetGVarInt("PlayerBuyingCarColor", playerid);

            PlayerExitBuyCar(playerid);

		    new vehicleid = AddStaticVehicleEx(model,vehX,vehY,vehZ,vehA,color1,color2,60000);
    		new ORM: ormid = VehData[vehicleid][ORM_ID] = orm_create("vehicledata", MYSQL_SESSION_A);//一样先create一个orm物件

			CreateVehicleData(ormid, vehicleid);

    		VehData[vehicleid][vModel] = model,
    		VehData[vehicleid][vX] = vehX,
    		VehData[vehicleid][vY] = vehY,
    		VehData[vehicleid][vZ] = vehZ,
    		VehData[vehicleid][vA] = vehA,
    		VehData[vehicleid][vColor1] = color1,
    		VehData[vehicleid][vColor2] = color2,
    		VehData[vehicleid][vFuel] = 100,
    		VehData[vehicleid][vType] = 1,
    		VehData[vehicleid][vOwned] = 0,
    		VehData[vehicleid][vPrice] = vprice,
    		VehData[vehicleid][vPaintjob] = 3,
    		VehData[vehicleid][vTrunk] = 0,
    		VehData[vehicleid][vDate] = getdate();
    		VehData[vehicleid][vHealth] = 1000.0;
    		VehData[vehicleid][vArmour] = VehList[model-400][voArmor];
    		mysql_format(DEFAULT_SESSION, VehData[vehicleid][vPlate], 32, "%s%s%s-%d%d%d%d", Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], random(10), random(10), random(10), random(10));
    		SetVehiclePlate(vehicleid, VehData[vehicleid][vPlate]);
    		orm_setkey(ormid, "id");
    		orm_save(ormid);
      		SetTimerEx("ClearSpot", 120000, false, "dddi", vehicleid, GetGVarInt("PlayerBuyingCarPlace", playerid), spawnid, playerid);
      		SetGVarInt("OrderedVehicle", 1, playerid);

      		if(IsATrailer(vehicleid)) ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"订购完成", ""#TEXT_WHITE"您已经订购了这个货柜\n请前往"#TEXT_RED"货柜"#TEXT_WHITE"旁按"#TEXT_FADEGREEN"Y键"#TEXT_WHITE"完成购买程序\n"#TEXT_LIGHTRED"注意!若超过2分钟未取车的话载具将被收回.", "确定", "");
    		else ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"订购完成", ""#TEXT_WHITE"您已经订购了这个载具\n请至"#TEXT_RED"红点"#TEXT_WHITE"登上您订购的载具完成购买程序\n"#TEXT_LIGHTRED"注意!若超过2分钟未取车的话载具将被收回.", "确定", "");

			SetGVarInt("GPS4", 1, playerid);
    		SetGVarFloat("GPSVehX", vehX, playerid);
		    SetGVarFloat("GPSVehY", vehY, playerid);
		    SetGVarFloat("GPSVehZ", vehZ, playerid);
    		SetPlayerMapIcon(playerid, 96, vehX, vehY, vehZ, 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
    		SetGVarInt("CSBuyer", PlayerData[playerid][pID], vehicleid);
    		SetGVarInt("CSShop", shop, vehicleid);
    		SetGVarInt("CSSpawn", spawnid, vehicleid);

    		if(model == 582)//新闻车
    		{
	    		GiveVehicleItem(vehicleid, ITEM_EQ, 284, 1);//空拍机
	    		GiveVehicleItem(vehicleid, ITEM_EQ, 285, 5);//摄影机
	    	}
	    	Log(vehlog, INFO, "%s(%d)订购了载具%s(游戏内ID:%d|资料库ID:%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), vehicleid, VehData[vehicleid][vID]);
    		return 1;
    	}
		if(numtmp != GetGVarInt("PlayerBuyingCarNum", playerid))
		{//记得确认车辆编号是否一样哟 不然就变成无限轮回 或是换颜色也重生车辆也说不定qwq
			SetGVarInt("PlayerBuyingCarNum", numtmp, playerid); //再来也要记得马上把PlayerBuyingCarNum换为选中的id哟
			SetGVarInt("PlayerBuyingCarAllow", 0, playerid);//关闭检查按键 直到车辆重新创建
			switch(GetGVarInt("PlayerBuyingCarPlace", playerid))
			{
				case VS_LV1://LV售车场1
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(LVCARSELL1DATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(LVCARSELL1DATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{//如果玩家车辆选择时的号码和原本不一样 我们允许更换车辆 如果顺利删除车辆 则继续创建
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						//PlayerBuyingCarTimer[playerid] = SetTimerEx("ShowSellingVeh", 300, 0, "ddd", playerid, LVCARSELL1DATA[carnum][csModel], 100 + playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LVCARSELL1DATA[carnum][csModel], 100 + playerid);//改用玩家计时器
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LVCARSELL1DATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(LVCARSELL1DATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(LVCARSELL1DATA[carnum][csModel]));
					}
				}
				case VS_GROTTI:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(GROTTIDATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(GROTTIDATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{//如果玩家车辆选择时的号码和原本不一样 我们允许更换车辆 如果顺利删除车辆 则继续创建
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, GROTTIDATA[carnum][csModel], 100 + playerid);//改用玩家计时器
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], GROTTIDATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(GROTTIDATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(GROTTIDATA[carnum][csModel]));
					}
				}
				case VS_SIMEON:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(LSCARSELL1DATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(LSCARSELL1DATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{//如果玩家车辆选择时的号码和原本不一样 我们允许更换车辆 如果顺利删除车辆 则继续创建
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						//PlayerBuyingCarTimer[playerid] = SetTimerEx("ShowSellingVeh", 300, 0, "ddd", playerid, LVCARSELL1DATA[carnum][csModel], 100 + playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LSCARSELL1DATA[carnum][csModel], 100 + playerid);//改用玩家计时器
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LSCARSELL1DATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(LSCARSELL1DATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(LSCARSELL1DATA[carnum][csModel]));
					}
				}
				case VS_WANG:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(WANGCARDATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(WANGCARDATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, WANGCARDATA[carnum][csModel], 100 + playerid);
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], WANGCARDATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(WANGCARDATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(WANGCARDATA[carnum][csModel]));
					}
				}
				case VS_SFBIKE:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(SFBIKEDATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(SFBIKEDATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, SFBIKEDATA[carnum][csModel], 100 + playerid);
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], SFBIKEDATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(SFBIKEDATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(SFBIKEDATA[carnum][csModel]));
					}
				}
				case VS_BISVEH_LS, VS_BISVEH_SF, VS_BISVEH_LV:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(BISVEHSELLDATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(BISVEHSELLDATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    if(!isnull(BISVEHSELLDATA[carnum][csDes]))
						{
						    format(string, sizeof(string), "%s", BISVEHSELLDATA[carnum][csDes]);
						    SendClientMessage(playerid, COLOR_WHITE, string);
						}
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, BISVEHSELLDATA[carnum][csModel], 100 + playerid);
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], BISVEHSELLDATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(BISVEHSELLDATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(BISVEHSELLDATA[carnum][csModel]));
					}
				}
				case VS_LSMUSCLE:
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(LSMUSCLEDATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(LSMUSCLEDATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LSMUSCLEDATA[carnum][csModel], 100 + playerid);
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LSMUSCLEDATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(LSMUSCLEDATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(LSMUSCLEDATA[carnum][csModel]));
					}
				}
				case VS_SF1://SF售车场1
				{
					if(GetGVarInt("PlayerBuyingCarNum", playerid) > sizeof(SFCARSELL1DATA)-1) {SetGVarInt("PlayerBuyingCarNum", 0, playerid);}
					if(GetGVarInt("PlayerBuyingCarNum", playerid) < 0) {SetGVarInt("PlayerBuyingCarNum", sizeof(SFCARSELL1DATA)-1, playerid);}
					if(DestroyVehicle(carid))
					{//如果玩家车辆选择时的号码和原本不一样 我们允许更换车辆 如果顺利删除车辆 则继续创建
					    new carnum = GetGVarInt("PlayerBuyingCarNum", playerid), tmptimer;
					    SetGVarInt("PlayerBuyingCarID", 0, playerid);
						tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, SFCARSELL1DATA[carnum][csModel], 100 + playerid);//改用玩家计时器
						SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
						PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], SFCARSELL1DATA[carnum][csModel]);
						PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
						format(string, sizeof(string), "%s", GetVehicleName(SFCARSELL1DATA[carnum][csModel]));
						PlayerTextDrawSetString(playerid,BCName[playerid],string);
						format(string, sizeof(string), "$%d", GetVehiclePrice(SFCARSELL1DATA[carnum][csModel]));
					}
				}
			}
			PlayerTextDrawSetString(playerid, BCPrice[playerid], string);
			PlayerTextDrawHide(playerid, BCPreview[playerid]);
			PlayerTextDrawShow(playerid, BCPreview[playerid]);
		}
	}
	if(GetGVarInt("PlayerBuyingSkin", playerid) == 1)
    {
        new itemid,
	    selected = GetGVarInt("SelectedSkin", playerid),
	    type = GetGVarInt("SkinType", playerid);
	    if(playertextid == SkinLeft[playerid] || playertextid == SkinRight[playerid])
	    {
		    if(playertextid == SkinLeft[playerid]) selected = selected+1;
		    else selected = selected-1;
		    switch(type)
			{
				case 0:
				{
				    if(selected > sizeof(SkinShop_Cheap)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Cheap)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Cheap[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Cheap[selected][0]][ieqPrice]);
				}
				case 1:
				{
				    if(selected > sizeof(SkinShop_Leisure)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Leisure)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Leisure[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Leisure[selected][0]][ieqPrice]);
				}
				case 2:
				{
				    if(selected > sizeof(SkinShop_Fashion)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Fashion)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Fashion[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Fashion[selected][0]][ieqPrice]);
				}
				case 3:
				{
				    if(selected > sizeof(SkinShop_Street)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Street)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Street[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Street[selected][0]][ieqPrice]);
				}
				case 4:
				{
				    if(selected > sizeof(SkinShop_Country)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Country)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Country[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Country[selected][0]][ieqPrice]);
				}
				case 5:
				{
				    if(selected > sizeof(SkinShop_Business)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Business)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Business[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Business[selected][0]][ieqPrice]);
				}
				case 6:
				{
				    if(selected > sizeof(SkinShop_Suit)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Suit)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Suit[selected][0]][ieqAltID]);
				    format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Suit[selected][0]][ieqPrice]);
				}
				case 7:
				{
				    if(selected > sizeof(SkinShop_Newbie)-1) {selected = 0;}
					else if(selected < 0) {selected = sizeof(SkinShop_Newbie)-1;}
				    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Newbie[selected][0]][ieqAltID]);
				}
			}
			PlayerTextDrawSetString(playerid, SkinPrice[playerid], string);
			SetGVarInt("SelectedSkin", selected, playerid);
		}
		else if(playertextid == SkinExit[playerid])
		{
		    if(type == 7)//新手选造型
		    {
		        HideBuySkinTextDraw(playerid);
		        ShowPlayerRegMenu(playerid, 2);
		    }
		    else
		    {
				PlayerExitBuySkin(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "** 你离开了造型购买,你可以在背包查看以及切换已经拥有的造型");
			}
		}
		else if(playertextid == SkinBuy[playerid])
		{
		    switch(type)
			{
			    case 0: itemid = SkinShop_Cheap[selected][0];
			    case 1: itemid = SkinShop_Leisure[selected][0];
			    case 2: itemid = SkinShop_Fashion[selected][0];
			    case 3: itemid = SkinShop_Street[selected][0];
			    case 4: itemid = SkinShop_Country[selected][0];
			    case 5: itemid = SkinShop_Business[selected][0];
			    case 6: itemid = SkinShop_Suit[selected][0];
			    case 7: itemid = SkinShop_Newbie[selected][0];
			}
			if(type == 7)//新手选造型
		    {
		        SetPlayerSkin_Fix(playerid, ItemsList_EQ[itemid][ieqAltID]);
				PlayerData[playerid][pSkin] = ItemsList_EQ[itemid][ieqAltID];
				ShowPlayerRegMenu(playerid, 4);
		    }
		    else
		    {
				if(PlayerHaveItem(playerid, 2, itemid)) return SendClientMessage(playerid, COLOR_WHITE, "你已经拥有这个造型了");
				GiveMoney(playerid, -ItemsList_EQ[itemid][ieqPrice]);
				Log(moneylog, INFO, "%s(%d)花费了$%d购买造型%s", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[itemid][ieqPrice], ItemsList_EQ[itemid][ieqName]);
				SetPlayerSkin_Fix(playerid, ItemsList_EQ[itemid][ieqAltID]);
				PlayerData[playerid][pSkin] = ItemsList_EQ[itemid][ieqAltID];
				GivePlayerItem(playerid, 2, itemid, 1);
				format(string, sizeof(string), ""#TEXT_WHITE"购买完成!你购买了造型%s", ItemsList_EQ[itemid][ieqName]);
				SendClientMessage(playerid, COLOR_WHITE, string);

				UpdatePlayerMission(playerid, 3, 6);
			}
		}
	}
    return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	new string[144], dialoginfo[512], buyid, playername[MAX_PLAYER_NAME], rand;
    GetPlayerName(playerid, playername, sizeof(playername));
    
	switch(dialogid)
	{
	    case DIALOG_MP3:
	    {
	        if (!response) return 1;
	        ForEachPlayer(i)
			{
	            PlayAudioStreamForPlayer(i, inputtext);
	        }
	    }
	    case DIALOG_SHAREMAP_VEH:
	    {
	        if (!response) return 1;
	        new
	        Float:fx = GetGVarFloat("GPSX", playerid),
	        Float:fy = GetGVarFloat("GPSY", playerid),
	        Float:fz = GetGVarFloat("GPSZ", playerid);
		    if(IsPlayerInAnyVehicle(playerid))
		    {
		        new vehicleid = GetPlayerVehicleID(playerid);
			    ForEachPlayer(i)
				{
				    if(GetPlayerVehicleID(i) == vehicleid && i != playerid)
					{
						SetPlayerGPS(i, fx, fy, fz);
						format(string, sizeof(string), ""#TEXT_VIOLET"你收到了跟你同车的 %s 分享给你的坐标", playername);
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
			}
		}
		case DIALOG_SHAREMAP_TEAM:
	    {
	        if (!response) return 1;
	        new
	        Float:fx = GetGVarFloat("GPSX", playerid),
	        Float:fy = GetGVarFloat("GPSY", playerid),
	        Float:fz = GetGVarFloat("GPSZ", playerid),
			pteam = GetPlayerTeam(playerid);
		    if(pteam != NO_TEAM)
		    {
			    ForEachPlayer(i)
				{
				    if(GetPlayerTeam(i) == pteam && i != playerid)
					{
						SetPlayerGPS(i, fx, fy, fz);
						format(string, sizeof(string), ""#TEXT_VIOLET"你收到了来自同队的 %s 分享给你的坐标", playername);
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
			}
		}
		case DIALOG_LOGIN:
		{//当玩家登入
			if (!response) return Kick(playerid);//玩家按离开 = 踢除玩家
			if (strcmp(inputtext, PlayerData[playerid][pPass]) == 0 && !isnull(inputtext))
			{//由于密码要大小写符合 ignorecase不设置true 这里代表密码正确
				OnPlayerLogin(playerid);
			}
			else
			{//反之 这里代表密码错误
				ShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_PASSWORD, ""#TEXT_WHITE"登入", ""#TEXT_WHITE"密码错误\n请输入你的密码", "登入", "离开");
			    //PassWrong[playerid] ++;
			    SetGVarInt("PassWrong", GetGVarInt("PassWrong", playerid) + 1, playerid);
				if(GetGVarInt("PassWrong", playerid) == 3)
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_RED"错误", ""#TEXT_WHITE"因为你的登入错误次数太多\n所以被系统踢除\n若有任何问题请上官方论坛回报\n网址:"#TEXT_YELLOW"https://gta.sot.blue/bbs/", "确定", "");
				    return Kick(playerid);
				}
			}
			return 1;
		}
		case DIALOG_REGISTER:
		{
			if (!response){ return Kick(playerid);}//玩家按离开 = 踢除玩家
			if (strlen(inputtext) < 6)
			{//玩家密码长度小于6个字符就请玩家重新输入密码
				return ShowPlayerDialog(playerid, DIALOG_REGISTER, DIALOG_STYLE_PASSWORD,  ""#TEXT_WHITE"注册", ""#TEXT_WHITE"你的密码长度"#TEXT_LIGHTRED"小于6\n"#TEXT_WHITE"请输入要注册的密码", "注册", "离开");
			}
			SetGVarString("Pass", inputtext, playerid);
			ShowPlayerDialog(playerid, DIALOG_REGISTER_CHECK, DIALOG_STYLE_PASSWORD,  ""#TEXT_WHITE"注册", ""#TEXT_WHITE"请"#TEXT_YELLOW"再次输入密码"#TEXT_WHITE"做确认", "注册", "离开");
			return 1;
		}
		case DIALOG_REGISTER_CHECK:
		{
			if (!response){ return Kick(playerid);}//玩家按离开 = 踢除玩家
			new ppass[25];
			GetGVarString("Pass", ppass, sizeof(ppass), playerid);
			if (strcmp(inputtext, ppass) || isnull(inputtext))
			{//玩家密码长度小于6个字符就请玩家重新输入密码
				return ShowPlayerDialog(playerid, DIALOG_REGISTER, DIALOG_STYLE_PASSWORD,  ""#TEXT_WHITE"注册", ""#TEXT_WHITE"你输入的密码与刚刚输入的"#TEXT_LIGHTRED"不同\n"#TEXT_WHITE"请重新输入要注册的密码", "注册", "离开");
			}
			DeleteGVar("Pass", playerid);
			//密码没有问题 将密码存入PlayerData里面 记得使用mysql_format安全格式化
			mysql_format(MYSQL_SESSION_A, PlayerData[playerid][pPass], 25, inputtext);
			//如果注册没有任何问题 保存ORM物件 也就是query至MySQL里 这里应该会进行INSERT插入新数据 保存后呼叫OnPlayerRegister函数
			orm_save(PlayerData[playerid][ORM_ID], "OnPlayerRegister", "d", playerid);
			return 1;
		}
        case DIALOG_JOB_FISHER:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
			    {
					format(string, sizeof(string), "鱼种\t市价(尾)\n");
					format(string, sizeof(string), "%s鳕鱼\t$%d\n", string, PriceData[prcCod]);
					format(string, sizeof(string), "%s秋刀鱼\t$%d\n", string, PriceData[prcSaury]);
					format(string, sizeof(string), "%s鲱鱼\t$%d\n", string, PriceData[prcHerring]);
					format(string, sizeof(string), "%s沙丁鱼\t$%d\n", string, PriceData[prcSardine]);
					format(string, sizeof(string), "%s旗鱼\t$%d\n", string, PriceData[prcSwordFish]);
					format(string, sizeof(string), "%s鲭鱼\t$%d\n", string, PriceData[prcMackerel]);
					format(string, sizeof(string), "%s鱿鱼\t$%d\n", string, PriceData[prcSquid]);
					format(string, sizeof(string), "%s鲔鱼\t$%d\n", string, PriceData[prcTuna]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, "目前鱼价", string, "确认", "");
				}
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_FISHER, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"渔夫", ""#TEXT_WHITE"上渔船后按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始捕鱼\n工作内容:\n驾驶渔船到海上捕鱼\n每个海域分布的鱼种都不一样\n"#TEXT_YELLOW"你可以使用学习观察能力来获得鱼种的信息\n\n"#TEXT_WHITE"再将捕捞到的渔获卖至愿意收购的鱼商赚取现金\n"#TEXT_LIGHTRED"** 注意:过度捕捞可能会使鱼的数量减少,请为生态着想\n"#TEXT_LIGHTGREEN"**合约时间: 不限, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"上渔船后按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始捕鱼\n工作内容:\n\t驾驶渔船到海上捕鱼\n每个海域分布的鱼种都不一样\n"#TEXT_YELLOW"你可以使用学习观察能力来获得鱼种的信息\n\n"#TEXT_WHITE"再将捕捞到的渔获卖至愿意收购的鱼商赚取现金\n"#TEXT_LIGHTRED"** 注意:过度捕捞可能会使鱼的数量减少,请为生态着想", "确定", "");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_FISHER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是渔夫");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					if(GetGVarInt("Mission", playerid) > 0)  return SendClientMessage(playerid, COLOR_WHITE, "错误: 正在进行任务时无法进行这个工作");
					SetGVarInt("QuitingJob", JOB_FISHER, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_MINER:
		{
		    if (!response) return 1;
		    new liststr[256];
		    switch(listitem)
		    {
		        case 0:
			    {
			        if(PlayerData[playerid][pJob] != JOB_MINER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有矿工可以在这里卖出矿产");
					format(liststr, sizeof(liststr), "矿种\t尚存数量\t身上数量\t每单位价格\n石材\t%d\t%d\t$%d\n铁矿\t%d\t%d\t$%d\n硝石\t%d\t%d\t$%d",
					ResourceData[rRock], PlayerHaveItem(playerid, 1, 41), PriceData[prcRock],
					ResourceData[rIron], PlayerHaveItem(playerid, 1, 87), PriceData[prcIron],
					ResourceData[rNiter], PlayerHaveItem(playerid, 1, 88), PriceData[prcNiter]);
					ShowPlayerDialog(playerid, DIALOG_JOB_MINER_SELL1, DIALOG_STYLE_TABLIST_HEADERS, "贩售矿产", liststr, "选择", "取消");
				}
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_MINER, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"矿工", ""#TEXT_WHITE"工作内容:\n前往矿场后使用十字镐或石锤挖掘\n并将收集到的矿产运回这里贩售赚钱\n"#TEXT_LIGHTRED"** 注意:过度挖掘可能会使矿产资源匮乏\n"#TEXT_LIGHTGREEN"**合约时间: 不限, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"工作内容:\n前往矿场后使用十字镐或石锤挖掘\n并将收集到的矿产运回这里贩售赚钱\n"#TEXT_LIGHTRED"** 注意:过度挖掘可能会使矿产资源匮乏", "确定", "");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_MINER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是矿工");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_MINER, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
            return 1;
		}
		case DIALOG_JOB_MINER_SELL1:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pJob] != JOB_MINER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有矿工可以在这里出售矿产");
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"目前石材价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n你目前身上有%d个石材\n请输入要卖出的数量", PriceData[prcRock], PlayerHaveItem(playerid, 1, 41));
		            SetGVarInt("DDecideID", 1, playerid);
		        }
		        case 1:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"目前铁矿价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n你目前身上有%d个铁矿\n请输入要卖出的数量", PriceData[prcIron], PlayerHaveItem(playerid, 1, 87));
		            SetGVarInt("DDecideID", 2, playerid);
		        }
		        case 2:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"目前硝石价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n你目前身上有%d个硝石\n请输入要卖出的数量", PriceData[prcNiter], PlayerHaveItem(playerid, 1, 88));
		            SetGVarInt("DDecideID", 3, playerid);
		        }
		    }
		    ShowPlayerDialog(playerid, DIALOG_JOB_MINER_SELL2, DIALOG_STYLE_INPUT, "出售矿产", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_JOB_MINER_SELL2:
		{
		    if(!response){return 1;}
		    new amount = strval(inputtext),
				chosed = GetGVarInt("DDecideID", playerid);
			if(PlayerData[playerid][pJob] != JOB_MINER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有矿工可以在这里出售矿产");
			if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 卖的数量不得小于1");
			switch(chosed)
			{
			    case 1:
			    {
					if(amount > PlayerHaveItem(playerid, 1, 41)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多石材");
					GiveMoney(playerid, amount*PriceData[prcRock]);
					Log(moneylog, INFO, "%s(%d)出售了%d个石材,赚得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, amount*PriceData[prcRock]);
					GivePlayerItem(playerid, 1, 41, -amount);
					format(string, sizeof(string), "** 完成: 你出售了%d个石材,赚得了现金$%d", amount, amount*PriceData[prcRock]);
				}
				case 2:
			    {
					if(amount > PlayerHaveItem(playerid, 1, 87)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多铁矿");
					GiveMoney(playerid, amount*PriceData[prcIron]);
					Log(moneylog, INFO, "%s(%d)出售了%d个铁矿,赚得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, amount*PriceData[prcIron]);
					GivePlayerItem(playerid, 1, 87, -amount);
					format(string, sizeof(string), "** 完成: 你出售了%d个铁矿,赚得了现金$%d", amount, amount*PriceData[prcIron]);
				}
				case 3:
			    {
					if(amount > PlayerHaveItem(playerid, 1, 88)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多硝石");
					GiveMoney(playerid, amount*PriceData[prcNiter]);
					Log(moneylog, INFO, "%s(%d)出售了%d个硝石,赚得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, amount*PriceData[prcNiter]);
					GivePlayerItem(playerid, 1, 88, -amount);
					format(string, sizeof(string), "** 完成: 你出售了%d个硝石,赚得了现金$%d", amount, amount*PriceData[prcNiter]);
				}
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_JOB_LUMBERJACK:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            new woodid = GetNearestGPS(playerid, "伐木林场");
					SetPlayerGPS(playerid, GPSList[woodid][gpsX], GPSList[woodid][gpsY], GPSList[woodid][gpsZ]);
					SendClientMessage(playerid, COLOR_WHITE, "** 已为你标记最近的"#TEXT_LIGHTPURPLE"伐木林场"#TEXT_WHITE"");
				}
		        case 1:
			    {
			        if(PlayerData[playerid][pJob] != JOB_LUMBERJACK)
			        {
			            format(string, sizeof(string), ""#TEXT_WHITE"目前可伐林木尚存: "#TEXT_YELLOW"%d"#TEXT_WHITE"\n目前木头价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n"#TEXT_FADERED"只有伐木工可以在这里卖出木头", ResourceData[rWood], PriceData[prcWood]);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "卖出木头", string, "确认", "");
					}
					else
					{
						format(string, sizeof(string), ""#TEXT_WHITE"目前可伐林木尚存: "#TEXT_YELLOW"%d"#TEXT_WHITE"\n目前木头价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n你目前身上有%d个木头\n请输入要卖出的数量", ResourceData[rWood], PriceData[prcWood], PlayerHaveItem(playerid, 1, 39));
						ShowPlayerDialog(playerid, DIALOG_JOB_LUMBERJACK_SELL, DIALOG_STYLE_INPUT, "卖出木头", string, "确认", "取消");
					}
				}
                case 2:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_LUMBERJACK, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"伐木工", ""#TEXT_WHITE"工作内容:\n前往伐木林场后使用斧头伐木\n并将收集到的木头运回这里贩售赚钱\n"#TEXT_LIGHTRED"** 注意:过度砍伐可能会使林木资源匮乏,请为生态着想\n"#TEXT_LIGHTGREEN"**合约时间: 不限, 确认以签署合约", "签署", "取消");
				}
				case 3:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"工作内容:\n前往伐木林场后使用斧头伐木\n并将收集到的木头运回这里贩售赚钱\n"#TEXT_LIGHTRED"** 注意:过度砍伐可能会使林木资源匮乏,请为生态着想", "确定", "");
				}
				case 4:
                {
                    if(PlayerData[playerid][pJob] != JOB_LUMBERJACK) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是伐木工");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_LUMBERJACK, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
            return 1;
		}
		case DIALOG_JOB_LUMBERJACK_SELL:
		{
		    if(!response){return 1;}
		    new amount = strval(inputtext);
			if(PlayerData[playerid][pJob] != JOB_LUMBERJACK) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有伐木工可以在这里出售木头");
			if(amount > PlayerHaveItem(playerid, 1, 39)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多木头");
			if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 卖的数量不得小于1");
			GiveMoney(playerid, amount*(PriceData[prcWood]+200));
			Log(moneylog, INFO, "%s(%d)出售了%d个木头,赚得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, amount*PriceData[prcWood]);
			GivePlayerItem(playerid, 1, 39, -amount);
			format(string, sizeof(string), "** 完成: 你出售了%d个木头,赚得了现金$%d", amount, amount*PriceData[prcWood]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_JOB_FVENDOR:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
			    {
			        if(PlayerData[playerid][pJob] != JOB_FVENDOR) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有餐车员工可以在这里订购食材货物");
					format(string, sizeof(string), ""#TEXT_WHITE"每箱食材货物价格: "#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/个\n每箱可以制造:\n20根热狗\n25盒冰淇淋\n请输入要购买的数量", ItemsList_USE[153][iuPrice]);
					ShowPlayerDialog(playerid, DIALOG_JOB_FVENDOR_BUYPROD, DIALOG_STYLE_INPUT, "订购货物", string, "确认", "取消");
				}
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_FVENDOR, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"餐车", ""#TEXT_WHITE"工作内容:\n首先前往总工厂后订购食材货物\n并将货物装载到餐车上制成餐点并决定每份价格\n接着就能将制成的餐点通过餐车卖给其他玩家了\n\n每箱食材可以制造:\n20根热狗\n25盒冰淇淋\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"工作内容:\n首先前往总工厂后订购食材货物\n并将货物装载到餐车上制成餐点并决定每份价格\n接着就能将制成的餐点通过餐车卖给其他玩家了\n\n每箱食材可以制造:\n20根热狗\n25盒冰淇淋", "确定", "");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_FVENDOR) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是餐车员工");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_FVENDOR, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
            return 1;
		}
		case DIALOG_JOB_TOW:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
                case 0:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_TOW, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"道路救援", ""#TEXT_WHITE"工作内容:\n使用拖吊车协助载送呼叫者以及其车辆\n运送至最近的加油站或修车厂\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 1:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"工作内容:\n使用拖吊车协助载送呼叫者以及其车辆\n运送至最近的加油站或修车厂", "确定", "");
				}
				case 2:
                {
                    if(PlayerData[playerid][pJob] != JOB_TOW) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是道路救援工人");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_FVENDOR, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
            return 1;
		}
		case DIALOG_TOW_TO:
		{
		    if(GetGVarInt("RequestTow", playerid) == 0) return 1;
		    if (!response) return RemovePlayerFromVehicle_Fix(playerid);
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(IsATowTruck(vehicleid))
		    {
		        new driver = GetGVarInt("PTowDriver", playerid), nearest;
		        if(driver != INVALID_PLAYER_ID && PlayerData[driver][pJob] == JOB_TOW && !IsPlayerBusy(driver))
		        {
				    switch(listitem)
				    {
		                case 0:
		                {
		                    if(PlayerData[playerid][pCash] < 250)
				    		{
				    		    RemovePlayerFromVehicle_Fix(playerid);
				    		    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
				    		}
				    		nearest = GetNearestGPS(playerid, "加油站");
						}
						case 1:
						{
						    if(PlayerData[playerid][pCash] < 250)
				    		{
				    		    RemovePlayerFromVehicle_Fix(playerid);
				    		    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
				    		}
				    		nearest = GetNearestGPS(playerid, "修车厂");
						}
					}
					SetPlayerCheckpoint(driver, GPSList[nearest][gpsX], GPSList[nearest][gpsY], GPSList[nearest][gpsZ], 10.0);
				    format(string, sizeof(string), "** 已将 %s 的目的地标记到地图上了,协助将其载往"#TEXT_RED"目的地"#TEXT_WHITE"可以获得薪水"#TEXT_FADEGREEN"$1000", playername);
					SendClientMessage(driver, COLOR_WHITE, string);
					SendClientMessage(playerid, COLOR_YELLOW, "** 已将目的地告诉拖吊车驾驶!");
					SetGVarInt("Towing", 1, driver);
					DeleteGVar("RequestTow", playerid);
					UpdatePlayerColor(playerid);
				}
				else {SendClientMessage(playerid, COLOR_WHITE, "拖吊车驾驶已经离线或是离职了");}
			}
			return 1;
		}
		case DIALOG_JOB_FVENDOR_BUYPROD:
		{
		    if(!response){return 1;}
		    new amount = strval(inputtext),
				cost = amount*ItemsList_USE[153][iuPrice];
			if(PlayerData[playerid][pJob] != JOB_FVENDOR) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有餐车员工可以在这里订购食材货物");
			if(amount*ItemsList_USE[153][iuSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有空间携带货物了");
			if(cost > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多钱购买货物");
			GiveMoney(playerid, -cost);
			Log(moneylog, INFO, "%s(%d)花费了$%d买了%d箱食材货物", PlayerData[playerid][pName], PlayerData[playerid][pID], cost, amount);
			GivePlayerItem(playerid, 1, 153, amount);
			format(string, sizeof(string), "** 完成: 你花费了$%d购买了%d箱食材货物,接着请前往餐车并打开"#TEXT_YELLOW"载具面板"#TEXT_WHITE"来使用货物制作餐点", cost, amount);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_FVENDOR_BUY:
		{
		    if(!response){return 1;}
		    new vendorid = GetGVarInt("DDecideID", playerid),
		        vendorveh = GetPlayerVehicleID(vendorid),
				price = GetGVarInt("FVPrice", vendorveh),
				food = GetGVarInt("FVFood", vendorveh),
				Float:px, Float:py, Float:pz,
				Float:php = GetPlayerHealth_Fix(playerid);
		    if(GetGVarInt("FVendoring", vendorid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 餐车已经结束营业了");
		    if(price > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
		    if(food < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 餐车的餐点已经卖完了");
		    GetPlayerPos(vendorid, px, py, pz);
		    if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) > 10.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你离餐车太远了");
		    switch(GetGVarInt("FVendoring", vendorid))
		    {
		        case 1:
		        {
		            if(PlayerData[playerid][pHunger] < 90.0 || php < 100.0+PlayerData[playerid][pMaxHealth] || GetGVarInt("Using", playerid) != 0 || LimitData[playerid][plEat] < 3)
					{
					    SetGVarInt("InstantUse", 1, playerid);
					    PlayerUseItem_USE(playerid, 160);
					    format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d购买并吃了一根热狗", price);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买完成", string, "确认", "");
					}
					else
					{
					    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[160][iuSpace]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包放不下了");
					    GivePlayerItem(playerid, 1, 160, 1);
					    format(string, sizeof(string), "** %s 购买了一根热狗", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
						format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d购买了一根热狗\n已经存放在你的背包里", price);
					}
					Log(moneylog, INFO, "%s(%d)付给了%s(%d)共$%d购买热狗", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[vendorid][pName], vendorid, price);
				}
				case 2:
		        {
		            if(PlayerData[playerid][pHunger] < 90.0 || php < 100.0+PlayerData[playerid][pMaxHealth] || GetGVarInt("Using", playerid) != 0 || LimitData[playerid][plEat] < 3)
					{
					    SetGVarInt("InstantUse", 1, playerid);
					    PlayerUseItem_USE(playerid, 161);
					    format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d购买并吃了一盒冰淇淋", price);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买完成", string, "确认", "");
					}
					else
					{
					    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[161][iuSpace]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包放不下了");
					    GivePlayerItem(playerid, 1, 161, 1);
					    format(string, sizeof(string), "** %s 购买了一盒冰淇淋", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
						format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d购买了一盒冰淇淋\n已经存放在你的背包里", price);
					}
					Log(moneylog, INFO, "%s(%d)付给了%s(%d)共$%d购买冰淇淋", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[vendorid][pName], vendorid, price);
				}
			}
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买完成", string, "确认", "");
		    GiveMoney(playerid, -price);
		    GiveMoney(vendorid, price+500);
		    SetGVarInt("FVFood", food-1, vendorveh);
		    if(GetGVarInt("FVFood", vendorveh) < 1)
		    {
		        SendClientMessage(vendorid, COLOR_YELLOW, "** 餐点已经卖完了!请再制作后再重新开始营业");
		        DeleteGVar("FVendoring", vendorid);
		        DeleteGVar("FVFood", vendorveh);
		    }
			UpdatePlayerVehText(vendorid);
			return 1;
		}
		case DIALOG_JOB_FD:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            ShowPlayerDialog(playerid, DIALOG_JOB_FD1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"传单发送员",""#TEXT_WHITE"\n开始工作(消耗4点体力)\n签署合约(1小时)\n工作内容\n辞职", "选择", "离开");
                }
                case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_JOB_FD2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"外送员",""#TEXT_WHITE"\n开始工作\n签署合约(1小时)\n工作内容\n辞职", "选择", "离开");
                }
			}
			return 1;
		}
		case DIALOG_JOB_FD1:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
				    if(PlayerData[playerid][pJob] != JOB_PAPER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是传单发送员");
				    if(IsPlayerBusy(playerid))
				    {
				        ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取消工作", ""#TEXT_WHITE"你目前正在接受工作\n是否中断?", "中断工作", "取消");
				        return 1;
				    }
				    if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
				    SetGVarFloat("WorkDistance", 0.0, playerid);
				    new Float:wdistance;
				    if(IsPlayerInArea(playerid, "Los Santos"))
					{
				    	rand = random(sizeof(LSFDHousePos));
						SetGVarInt("PaperPlace", rand, playerid);
						SetGVarInt("Papering", 1, playerid);
						SetPlayerMapIcon(playerid, 0, LSFDHousePos[rand][0], LSFDHousePos[rand][1], LSFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
						wdistance = GetPlayerDistanceFromPointEx(playerid, LSFDHousePos[rand][0], LSFDHousePos[rand][1], LSFDHousePos[rand][2]);
						SetGVarFloat("WorkDistance", wdistance, playerid);
					}
					else if(IsPlayerInArea(playerid, "San Fierro"))
					{
						rand = random(sizeof(SFFDHousePos));
						SetGVarInt("PaperPlace", rand, playerid);
						SetGVarInt("Papering", 2, playerid);
						SetPlayerMapIcon(playerid, 0, SFFDHousePos[rand][0], SFFDHousePos[rand][1], SFFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
						wdistance = GetPlayerDistanceFromPointEx(playerid, SFFDHousePos[rand][0], SFFDHousePos[rand][1], SFFDHousePos[rand][2]);
						SetGVarFloat("WorkDistance", wdistance, playerid);
					}
					else if(IsPlayerInArea(playerid, "Las Venturas"))
					{
						rand = random(sizeof(LVFDHousePos));
						SetGVarInt("PaperPlace", rand, playerid);
						SetGVarInt("Papering", 3, playerid);
						SetPlayerMapIcon(playerid, 0, LVFDHousePos[rand][0], LVFDHousePos[rand][1], LVFDHousePos[rand][2], 0, COLOR_RED, MAPICON_GLOBAL_CHECKPOINT);
						wdistance = GetPlayerDistanceFromPointEx(playerid, LVFDHousePos[rand][0], LVFDHousePos[rand][1], LVFDHousePos[rand][2]);
						SetGVarFloat("WorkDistance", wdistance, playerid);
					}
					else {return SendClientMessage(playerid, COLOR_WHITE, "错误: 你所在的区域无工作可接受");}
					SetGVarInt("PaperAmount", 5, playerid);
					SendClientMessage(playerid, COLOR_WHITE, "你接受了发送传单的工作,请在时间内把传单送到"#TEXT_YELLOW"指定地点"#TEXT_WHITE",当到达目的地时,按F键将放置传单");
					SendClientMessage(playerid, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
					PlayerData[playerid][pStamina] -= 4.0;
					SetGVarInt("QuestTime", 120, playerid);
					return 1;
                }
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_PAPER, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署合约",
					""#TEXT_LIGHTGREEN"传单发送工作"#TEXT_WHITE"\n工作内容:\n\t每次工作需要将传单发送到5个"#TEXT_YELLOW"地点"#TEXT_WHITE"\n到达后按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"放置传单\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_LIGHTGREEN"传单发送工作"#TEXT_WHITE"\n工作内容:\n每次工作需要将传单发送到5个"#TEXT_YELLOW"地点"#TEXT_WHITE"\n到达后按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"放置传单", "确认", "取消");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_PAPER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是传单发送员");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_PAPER, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_FD2:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
				    if(PlayerData[playerid][pJob] != JOB_FD) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是外送员");
				    if(IsPlayerBusy(playerid) && GetGVarInt("FoodDelivering", playerid) != 2)
				    {
				        ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取消工作", ""#TEXT_WHITE"你目前正在接受工作\n是否中断?", "中断工作", "取消");
				        return 1;
				    }
				    format(string, sizeof(string), ""#TEXT_WHITE"选择工作\n制作5份餐点(消耗10点体力)\n外送至地产(冷却:%d秒)", LimitData[playerid][plJobFD]);
				    ShowPlayerDialog(playerid, DIALOG_JOB_FD2_START, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"接受工作", string, "选择", "取消");
                }
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_FD, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署合约",
					""#TEXT_LIGHTGREEN"外送工作"#TEXT_WHITE"\n工作内容:\n制作餐点:消耗10点体力可以制作5份餐点\n外送至玩家:通过背包的交易将制作好的餐点卖给"#TEXT_YELLOW"玩家"#TEXT_WHITE"\n外送至地产:通过背包的交易将制作好的餐点运送到指定"#TEXT_YELLOW"地产"#TEXT_WHITE"\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_LIGHTGREEN"外送工作"#TEXT_WHITE"\n工作内容:\n制作餐点:消耗5点体力可以制作5份餐点\n外送至玩家:通过背包的交易将制作好的餐点卖给"#TEXT_YELLOW"玩家"#TEXT_WHITE"\n外送至地产:通过背包的交易将制作好的餐点运送到指定"#TEXT_YELLOW"地产"#TEXT_WHITE"", "确认", "取消");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_FD) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是外送员");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_FD, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_FD2_START:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(PlayerData[playerid][pJob] != JOB_FD) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是外送员");
		            if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前有其他事情在身");
		            if(GetPlayerRemainingSpace(playerid) < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包空间不足");
		            if(PlayerData[playerid][pStamina] < 2.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足制作餐点");
		            switch(GetGVarInt("FDType", playerid))
		            {
		                case 1:
		                {
		                    SetPlayerCheckpoint(playerid, 378.3517,-58.1306,1001.5078, 1.0);
		                    SetGVarInt("Cooking", 1, playerid);
		                }
		                case 2:
		                {
		                    SetPlayerCheckpoint(playerid, 376.4533,-114.3398,1001.4922, 1.0);
		                    SetGVarInt("Cooking", 2, playerid);
		                }
					}
					SendClientMessage(playerid, COLOR_WHITE, "** 请前往"#TEXT_RED"烹饪台"#TEXT_WHITE"开始制作餐点");
				}
		        case 1:
		        {
				    if(PlayerData[playerid][pJob] != JOB_FD) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是外送员");
				    if(LimitData[playerid][plJobFD] > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前还没有无法接受这个请求");
				    if(!PlayerHaveItem(playerid, 1, 5) && !PlayerHaveItem(playerid, 1, 9)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 请先制作餐点才能接受这个请求");
				    if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前有其他事情在身");
				    SetGVarFloat("WorkDistance", 0.0, playerid);
				    new Float:wdistance, i, j, k;
				    for(i = random(MAX_ESTATES), k = j = 0; k == 0; j++, i = random(MAX_ESTATES))//用for回圈在0 ~ MAX_ESTATES的范围内随机取得符合条件的地产ID"i"值
				    {
				        if(EstateData[i][eOwnerType] == ESTATE_OWNER_NONE) continue;
				        if(EstateData[i][eLocked] == 1) continue;
				        if(EstateData[i][eType] == ESTATE_SUITE || EstateData[i][eType] == ESTATE_HOUSE || EstateData[i][eType] == ESTATE_CLUBHOUSE || EstateData[i][eType] == ESTATE_OFFICE)
				        {
				            if(GetEstateRemainingSpace(i) > 5)
				            {
				            	k = i;
				            	break;
				            }
				        }
				    }
				    if(k == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前没有任何订单");
				    else
				    {
				        SetGVarInt("FDTo", k, playerid);
						SetGVarInt("FoodDelivering", 1, playerid);
						SetPlayerCheckpoint(playerid, EstateData[k][eX], EstateData[k][eY], EstateData[k][eZ], 5.0);
						wdistance = GetPointDistanceToPoint(GetGVarFloat("PlayerX", playerid), GetGVarFloat("PlayerY", playerid), GetGVarFloat("PlayerZ", playerid), EstateData[k][eX], EstateData[k][eY], EstateData[k][eZ]);//因为玩家在室内空间,因此距离必须取玩家在户外入口坐标的值
						SetGVarFloat("WorkDistance", wdistance, playerid);
					}
					SendClientMessage(playerid, COLOR_WHITE, " ** 你接受了外送员的工作,请在时间内把餐点送到"#TEXT_RED"指定地产"TEXT_WHITE"");
					LimitData[playerid][plJobFD] = 1800;
					SetGVarInt("QuestTime", 600, playerid);
					return 1;
                }
            }
            return 1;
        }
		case DIALOG_JOB_TRASH:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
                case 0:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_TRASH, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX,
					""#TEXT_WHITE"垃圾处理工作", ""#TEXT_WHITE"上垃圾车后消耗"#TEXT_BLUEGREEN"4点体力"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始工作\n工作内容:\n到指定"#TEXT_YELLOW"垃圾箱"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"拿起垃圾\n并再到圾圾车按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"将垃圾丢到垃圾车内\n"#TEXT_SKYBLUE"**这个工作可以两人进行\n"#TEXT_GREEN"**薪资照距离计\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 1:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍", ""#TEXT_WHITE"上垃圾车后消耗"#TEXT_BLUEGREEN"4点体力"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始工作\n工作内容:\n到指定"#TEXT_YELLOW"垃圾箱"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"拿起垃圾\n并再到圾圾车按"#TEXT_LIGHTGREEN"F键"#TEXT_WHITE"将垃圾丢到垃圾车内\n"#TEXT_SKYBLUE"**这个工作可以两人进行\n"#TEXT_GREEN"**薪资照距离计", "确定", "");
				}
				case 2:
                {
                    if(PlayerData[playerid][pJob] != JOB_TRASH) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是垃圾处理人员");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_TRASH, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_TRAILER:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
                case 0:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_TRUCK, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署合约",
					""#TEXT_WHITE"上联结车后必须挂载货柜后油罐才能接受工作\n消耗"#TEXT_BLUEGREEN"4点体力"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始工作\n工作内容:\
					\n"#TEXT_WHITE"货柜:\n将货柜运送到指定"#TEXT_YELLOW"卸货区\n"#TEXT_WHITE"到达后再按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"卸货\
					\n油罐:\n将油罐运送到任何"#TEXT_YELLOW"未补充的加油站\n"#TEXT_WHITE"到达后再按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"卸货\n"#TEXT_YELLOW"**注意: 每个加油站一天只能补充一次\
					\n"#TEXT_LIGHTGREEN"**合约时间: 1小时, 确认以签署合约", "签署", "取消");
				}
				case 1:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍",
					""#TEXT_WHITE"上联结车后必须挂载货柜后油罐才能接受工作\n消耗"#TEXT_BLUEGREEN"4点体力"#TEXT_WHITE"按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"键后开始工作\n工作内容:\
					\n"#TEXT_WHITE"货柜:\n将货柜运送到指定"#TEXT_YELLOW"卸货区\n"#TEXT_WHITE"到达后再按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"卸货\
					\n油罐:\n将油罐运送到任何"#TEXT_YELLOW"未补充的加油站\n"#TEXT_WHITE"到达后再按"#TEXT_LIGHTGREEN"左Ctrl键"#TEXT_WHITE"卸货\n"#TEXT_YELLOW"**注意: 每个加油站一天只能补充一次", "确定", "");
				}
				case 2:
                {
                    if(PlayerData[playerid][pJob] != JOB_TRUCK) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是联结车司机");
                    if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_TRUCK, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_HUNTER:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
				case 0:
				{
					if(GetGVarInt("Hunting", playerid) == 1)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取消委托", ""#TEXT_WHITE"你目前正在接受委托\n是否中断", "中断委托", "取消");
					}
					else
					{
						if(PlayerData[playerid][pJob] != JOB_HUNTER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是猎人");
						format(string, sizeof(string), ""#TEXT_WHITE"选择要接受的委托种类\n接受新委托\n加入正在进行中的委托(%d)", GetStartedHuntQuests());
						ShowPlayerDialog(playerid, DIALOG_JOB_HUNTER_CHECK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"狩猎委托", string, "选择", "取消");
					}
				}
				case 1:
				{
					new string2[256];
					format(string2, sizeof(string2), "野生动物\t栖息地\t剩余栖息数\
					\n狐狸\t森林地带\t%d\
					\n熊\t森林地带\t%d\
					\n狼\t森林与沙漠地带\t%d\
					\n鸡\t沙漠地带\t%d\
					\n猪\t森林与沙漠地带\t%d\
					\n绵羊\t森林地带\t%d\
					\n鳄鱼\t沼泽地带\t%d\
					", ResourceData[aFox], ResourceData[aBear], ResourceData[aWolf], ResourceData[aChicken], ResourceData[aPig], ResourceData[aSheep], ResourceData[aGator]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"生态确认", string2, "确认", "");
				}
                case 2:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_HUNTER, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署合约",
					""#TEXT_WHITE"猎人\n工作内容:\
					\n"#TEXT_WHITE"向此处的委托长接受委托来狩猎目标野生动物\
					\n每项委托都有不同的"#TEXT_YELLOW"狩猎难度"#TEXT_WHITE",将会依照难度计算酬劳\
					\n累积的酬劳将会在"#TEXT_YELLOW"整点"#TEXT_WHITE"汇款至猎人的存款帐户\
					\n\
					\n注意事项:\
					\n所有委托都会每小时刷新一次\
					\n猎人必须靠自己找出目标,所以建议拥有"#TEXT_YELLOW"观察能力"#TEXT_WHITE"的玩家担任\
					\n"#TEXT_LIGHTGREEN"**合约时间: 2小时, 确认以签署合约", "签署", "取消");
				}
				case 3:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍",
					""#TEXT_WHITE"猎人\n工作内容:\
					\n"#TEXT_WHITE"向此处的委托长接受委托来狩猎目标野生动物\
					\n每项委托都有不同的"#TEXT_YELLOW"狩猎难度"#TEXT_WHITE",将会依照难度计算酬劳\
					\n累积的酬劳将会在"#TEXT_YELLOW"整点"#TEXT_WHITE"汇款至猎人的存款帐户\
					\n\
					\n注意事项:\
					\n所有委托都会每小时刷新一次\
					\n猎人必须靠自己找出目标,所以建议拥有"#TEXT_YELLOW"观察能力"#TEXT_WHITE"的玩家担任", "确定", "");
				}
				case 4:
                {
                    if(PlayerData[playerid][pJob] != JOB_HUNTER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是猎人");
                    if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_HUNTER, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_HUNTER_CHECK:
		{
		    if (!response) return 1;
			new list[512], i, j, l;
			switch(listitem)
			{
				case 0:
				{
     				for(i = l = 0, j = MAX_HUNTQUESTS; i < j; i++)
					{
						if(HuntQuest[i][hqCreated] == 0){ continue;}
						if(HuntQuest[i][hqStatus] == STATUS_WAITING)
						{
							format(string, sizeof(string), "%s%d只", AnimalsList[HuntQuest[i][hqTarget]][amlName], HuntQuest[i][hqAmount]);
							format(list, sizeof(list), "%s%s\t$%d\t%d分钟\t%d\n", list, string, HuntQuest[i][hqMoney], HuntQuest[i][hqTime], HuntQuest[i][hqLevel]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "狩猎委托", ""#TEXT_WHITE"目前没有任何可接受的狩猎委托\n请等待下一次刷新", "确定", "");}
					format(list, sizeof(list), "狩猎目标\t报酬金\t限制时间\t难度等级\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_JOB_HUNTER_LIST, DIALOG_STYLE_TABLIST_HEADERS, "狩猎委托", list, "选择", "关闭");
				}
				case 1:
				{
					for(i = l = 0, j = MAX_HUNTQUESTS; i < j; i++)
					{
						if(HuntQuest[i][hqCreated] == 0){ continue;}
						if(HuntQuest[i][hqStatus] == STATUS_STARTED)
						{
							format(string, sizeof(string), "%s%d只", HuntQuest[i][hqTarget], HuntQuest[i][hqAmount]);
							format(list, sizeof(list), "%s%s\t$%d\t%d分钟\t%d/%d\n", list, string, HuntQuest[i][hqMoney], HuntQuest[i][hqTime], HuntQuest[i][hqPlayers], MAX_HQPLAYERS);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "狩猎委托", ""#TEXT_WHITE"目前没有任何可加入的狩猎委托", "确定", "");}
					format(list, sizeof(list), "狩猎目标\t报酬金\t剩余时间\t参与人数\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_JOB_HUNTER_LIST, DIALOG_STYLE_TABLIST_HEADERS, "狩猎委托", list, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_JOB_HUNTER_LIST:
		{
		    if (!response) return 1;
			new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(GetGVarInt("Hunting", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "你已经正在进行其他委托了");
			if(HuntQuest[chosed][hqPlayers] >= MAX_HQPLAYERS) return SendClientMessage(playerid, COLOR_WHITE, "这个委托的参加人数已达上限了,无法参加");
			PlayerJoinHuntQuest(playerid, chosed);
			return 1;
		}
		case DIALOG_JOB_CARSELL:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
                case 0:
		        {
				    if(PlayerData[playerid][pJob] != JOB_CARSELL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是汽车销售员");
				    if(IsPlayerBusy(playerid))
				    {
				        ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请求车辆", ""#TEXT_WHITE"你目前正在销售车辆\n是否结束?", "是", "否");
				        return 1;
				    }
				    if(LimitData[playerid][plCarSellModel] != 0)
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"你目前正在销售的车辆 %s,你想要:\n继续销售这台车\n请求另一台车", GetVehicleName(LimitData[playerid][plCarSellModel]));
				        ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL_LOAD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"请求车辆", string, "选择", "取消");
				    }
				    else
				    {
				        if(LimitData[playerid][plCarSellCount] > 4) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你今天已经无法再请求更多车辆了");
				        ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL_REQUEST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"请求车辆",
						""#TEXT_WHITE"选择想要销售的车辆等级\n滞销车 ($30,000 - $170,000)\n中阶车 ($200,000 - $350,000)\n高级车 ($400,000 - 550,000)\n顶级车 ($880,000 - 1,100,000)", "选择", "取消");
					}
					return 1;
                }
                case 1:
                {
                    if(PlayerData[playerid][pJob] != JOB_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经有工作合约在身");
                    SetGVarInt("Contract", JOB_CARSELL, playerid);
                    ShowPlayerDialog(playerid, DIALOG_CONTRACT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署合约",
					""#TEXT_LIGHTGREEN"汽车销售员"#TEXT_WHITE"\n工作内容:\n通过向汽车销售商请求贩售车辆\n并帮忙把销售的汽车卖给其他玩家赚取现金\n当出售车辆时,你可以赚取车价"#TEXT_FADEGREEN"百分之20的佣金\n"#TEXT_LIGHTRED"每天最多可以向销售商请求五辆车\n"#TEXT_LIGHTGREEN"**合约时间: 4小时, 确认以签署合约", "签署", "取消");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工作介绍",
				    ""#TEXT_LIGHTGREEN"汽车销售员"#TEXT_WHITE"\n工作内容:\n通过向汽车销售商请求贩售车辆\n并帮忙把销售的汽车卖给其他玩家赚取现金\n当出售车辆时,你可以赚取车价"#TEXT_FADEGREEN"百分之20的佣金\n"#TEXT_LIGHTRED"每天最多可以向销售商请求五辆车", "确认", "");
				}
				case 3:
                {
                    if(PlayerData[playerid][pJob] != JOB_CARSELL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是汽车销售员");
					if(IsPlayerBusy(playerid))  return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在接受工作,请先结束目前的工作");
					SetGVarInt("QuitingJob", JOB_CARSELL, playerid);
					format(string, sizeof(string), " 你的工作合约尚有 %d 分钟到期\n请确认是否已经到期\n如果在合约到期前就离职将会无法获得薪水\n\n确定是否要离职?", LimitData[playerid][plContract]);
					ShowPlayerDialog(playerid, DIALOG_QUITJOB, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离职", string, "离职", "取消");
				}
            }
		}
		case DIALOG_JOB_CARSELL_LOAD:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pJob] != JOB_CARSELL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是汽车销售员");
		    if(IsPlayerBusy(playerid))
			{
				ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请求车辆", ""#TEXT_WHITE"你目前正在销售车辆\n是否结束?", "是", "否");
				return 1;
			}
			static csplace, vehicleid, modelid, vprice;
			csplace = GetGVarInt("CarSellPlace", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            modelid = LimitData[playerid][plCarSellModel];
		            vprice = LimitData[playerid][plCarSellPrice];
		            switch(csplace)
		            {
		                case 1: vehicleid = CreateVehicleEx(modelid, 842.7328, -1039.5968, 24.9303, 312.2058, -1, -1, VTYPE_PLAYER, vprice);
		                case 2: vehicleid = CreateVehicleEx(modelid, -1651.9869, 1225.8176, 6.7436, 226.7255, -1, -1, VTYPE_PLAYER, vprice);
		                case 3: vehicleid = CreateVehicleEx(modelid, 1675.2747, 1789.1609, 10.5041, 88.4545, -1, -1, VTYPE_PLAYER, vprice);
		            }
		            PutPlayerInVehicle_Fix(playerid, vehicleid, 0);
		            SetGVarInt("CarSelling", 1, playerid);
		            SetGVarInt("SellCar", vehicleid, playerid);
		            SetGVarInt("DealerCar", 1, vehicleid);
		            SetGVarInt("CarDealer", playerid, vehicleid);
		        }
                case 1:
		        {
				    if(LimitData[playerid][plCarSellCount] > 4) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你今天已经无法再请求更多车辆了");
				    ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL_REQUEST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"请求车辆",
					""#TEXT_WHITE"选择想要销售的车辆等级\n滞销车 ($30,000 - $170,000)\n中阶车 ($200,000 - $350,000)\n高级车 ($400,000 - 550,000)\n顶级车 ($880,000 - 1,100,000)", "选择", "取消");
				}
			}
			return 1;
		}
		case DIALOG_JOB_CARSELL_REQUEST:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pJob] != JOB_CARSELL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是汽车销售员");
		    if(IsPlayerBusy(playerid))
			{
				ShowPlayerDialog(playerid, DIALOG_JOB_CANCEL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请求车辆", ""#TEXT_WHITE"你目前正在销售车辆\n是否结束?", "是", "否");
				return 1;
			}
			if(LimitData[playerid][plCarSellCount] > 4) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你今天已经无法再请求更多车辆了");
			static csplace, vehicleid, modelid, vprice;
			csplace = GetGVarInt("CarSellPlace", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            rand = random(sizeof(CarSellJob_Low));
					modelid = CarSellJob_Low[rand][csModel];
					vprice = GetVehiclePrice(CarSellJob_Low[rand][csModel])*8/10;
		        }
                case 1:
		        {
		            if(RecordData[playerid][prCarSellJob] < 5)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还需要更多成交经验才能销售这个等级的车辆");
		            }
                    rand = random(sizeof(CarSellJob_Mid));
					modelid = CarSellJob_Mid[rand][csModel];
					vprice = GetVehiclePrice(CarSellJob_Mid[rand][csModel])*8/10;
				}
				case 2:
		        {
		            if(RecordData[playerid][prCarSellJob] < 20)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还需要更多成交经验才能销售这个等级的车辆");
		            }
                    rand = random(sizeof(CarSellJob_High));
					modelid = CarSellJob_High[rand][csModel];
					vprice = GetVehiclePrice(CarSellJob_High[rand][csModel])*8/10;
				}
				case 3:
		        {
		            if(RecordData[playerid][prCarSellJob] < 50)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还需要更多成交经验才能销售这个等级的车辆");
		            }
                    rand = random(sizeof(CarSellJob_Super));
					modelid = CarSellJob_Super[rand][csModel];
					vprice = GetVehiclePrice(CarSellJob_Super[rand][csModel])*8/10;
				}
			}
			if(LimitData[playerid][plCarSellModel] != 0)
			{
			    DeletePlayerSellCar(playerid);
			    LimitData[playerid][plCarSellModel] =
			    LimitData[playerid][plCarSellPrice] = 0;
			}
			LimitData[playerid][plCarSellModel] = modelid;
		    LimitData[playerid][plCarSellPrice] = vprice;
		    LimitData[playerid][plCarSellCount] ++;
		    switch(csplace)
		    {
		        case 1: vehicleid = CreateVehicleEx(modelid, 842.7328, -1039.5968, 24.9303, 312.2058, -1, -1, VTYPE_PLAYER, vprice);
		        case 2: vehicleid = CreateVehicleEx(modelid, -1651.9869, 1225.8176, 6.7436, 226.7255, -1, -1, VTYPE_PLAYER, vprice);
		        case 3: vehicleid = CreateVehicleEx(modelid, 1675.2747, 1789.1609, 10.5041, 88.4545, -1, -1, VTYPE_PLAYER, vprice);
		    }
		    PutPlayerInVehicle_Fix(playerid, vehicleid, 0);
		    SetGVarInt("CarSelling", 1, playerid);
		    SetGVarInt("SellCar", vehicleid, playerid);
		    SetGVarInt("CarDealer", playerid, vehicleid);
		    SetGVarInt("DealerCar", 1, vehicleid);
		    format(string, sizeof(string), "** 你被指定要销售这台"#TEXT_BLUEGREEN"%s"#TEXT_YELLOW",价值"#TEXT_FADEGREEN"$%d"#TEXT_YELLOW"", GetVehicleName(modelid), vprice);
		    SendClientMessage(playerid, COLOR_YELLOW, string);
		    SendClientMessage(playerid, COLOR_WHITE, "当这台车顺利出售给其他玩家时,你将会获得车价"#TEXT_LIGHTRED"百分之20"#TEXT_WHITE"的佣金");
		    return 1;
		}
		case DIALOG_CONTRACT:
		{
		    if (!response) return 1;
		    new jobid = GetGVarInt("Contract", playerid);
		    switch(jobid)
		    {
		        case JOB_TRASH:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请到工作车上接受工作", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
		        case JOB_TRUCK:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请到工作车上接受工作", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
		        case JOB_PAPER:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请找店经理接受工作", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_FISHER:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"无合约限制\n请到工作船上开始捕鱼", "确认", "");
				    LimitData[playerid][plContract] = 0;
				}
				case JOB_CARSELL:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为4小时\n请找销售商开始接受委托", "确认", "");
				    LimitData[playerid][plContract] = 240;
				}
				case JOB_SWEEPER:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请到工作车上接受工作", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_TOW:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n到拖吊车上打开载具面板可以进行拖吊", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_HOUSESELL:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请找销售商开始接受委托", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_FD:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请找店经理接受工作", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_LUMBERJACK:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"无合约限制\n请前往伐木林场开始砍伐木头\n最近的"#TEXT_LIGHTPURPLE"林场"#TEXT_WHITE"位置已为你标记在地图上了", "确认", "");
					new woodid = GetNearestGPS(playerid, "伐木林场");
					SetPlayerGPS(playerid, GPSList[woodid][gpsX], GPSList[woodid][gpsY], GPSList[woodid][gpsZ]);
				    LimitData[playerid][plContract] = 0;
				    if(!PlayerHaveItem(playerid, 2, 45))
				    {
				        GivePlayerItem(playerid, 2, 45, 1);
				        SendClientMessage(playerid, COLOR_WHITE, "** 你获得了全新的斧头,按N键打开背包选择使用斧头后可以开始伐木");
				    }
				}
				case JOB_MINER:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"无合约限制\n请前往矿场开始挖掘矿产", "确认", "");
				    LimitData[playerid][plContract] = 0;
				    if(!PlayerHaveItem(playerid, 2, 42))
				    {
				        GivePlayerItem(playerid, 2, 42, 1);
				        SendClientMessage(playerid, COLOR_WHITE, "** 你获得了全新的十字镐,前往按N键打开背包选择工具类使用十字镐后可以开始挖掘");
				    }
				}
				case JOB_FVENDOR:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为1小时\n请先跟总工厂"#TEXT_FADEBLUE"订购食材货物"#TEXT_WHITE"\n之后前往餐车打开"#TEXT_YELLOW"载具面板"#TEXT_WHITE"将货物装载到餐车上并设定餐点价格\n接着就能让其他玩家购买你的餐点了", "确认", "");
				    LimitData[playerid][plContract] = 60;
				}
				case JOB_HUNTER:
		        {
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"签署完成", ""#TEXT_WHITE"合约时间为2小时\n请与委托长谈话来接受委托", "确认", "");
				    LimitData[playerid][plContract] = 120;
				}
			}
			PlayerData[playerid][pJob] = jobid;
			UpdatePlayerMission(playerid, 5, 5);
			return 1;
		}
		case DIALOG_QUITJOB:
		{
		    if (!response) return 1;
		    new jobid = GetGVarInt("QuitingJob", playerid);
		    if(jobid != JOB_NONE)
		    {
		        if(LimitData[playerid][plContract] > 0)
		        {
		            format(string, sizeof(string), "** "#TEXT_FADERED"你因为在合约到期前就擅自离职,所以你将不会收到已赚得的薪水"#TEXT_FADEGREEN"$%d", LimitData[playerid][plPayCheck]);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            LimitData[playerid][plPayCheck] = 0;
		        }
		        else
		        {
		            PayCheck(playerid);
		        }
		        PlayerData[playerid][pJob] = JOB_NONE;
		        LimitData[playerid][plContract] = 0;
		        SendClientMessage(playerid, COLOR_YELLOW, "** 你已离职,祝你往后前途一帆风顺!");
			}
		}
		case DIALOG_JOB_CANCEL:
		{
		    if (!response) return 1;
		    format(string, sizeof(string), " ** "#TEXT_RED"工作结束"#TEXT_WHITE": 你取消了目前的工作");
		    SendClientMessage(playerid, COLOR_WHITE, string);
			SetGVarFloat("WorkDistance", 0.0, playerid);
			DeleteGVar("Papering", playerid);
		  	DeleteGVar("PaperPlace", playerid);
		  	DeleteGVar("PaperAmount", playerid);
		  	DeleteGVar("QuestSalary", playerid);
		  	DeleteGVar("Trashing", playerid);
	    	DeleteGVar("TrashID", playerid);
	    	DeleteGVar("TrashAmount", playerid);
	    	DeleteGVar("Fishering", playerid);
	    	DeleteGVar("QuestTime", playerid);
	    	DeleteGVar("SellingFish", playerid);
			DeleteGVar("FoodDelivering", playerid);
			DeleteGVar("Transporting", playerid);
			if(GetGVarInt("Hunting", playerid) == 1)
			{
				PlayerLeaveHuntQuest(playerid, GetGVarInt("HuntQ", playerid));
			}
	    	if(GetGVarInt("CarSelling", playerid) == 1)
	    	{
	    	    DeletePlayerSellCar(playerid);
	    	    DeleteGVar("CarSelling", playerid);
	    	}
		  	RemovePlayerMapIcon(playerid, 0);
			ShowPTD(playerid, 1, 0);
		}
		case DIALOG_SHOP_SKIN:
		{
		    if (!response) return 1;

		    new Float:camX, Float:camY, Float:tmpX, Float:tmpY, Float:tmpZ, tmpI, tmpW,
		    shop = GetGVarInt("ClothesShop", playerid);

		    SetGVarInt("PlayerBuyingSkin", 1, playerid);
			TogglePlayerControllableEx(playerid, 0);
		    GetPlayerPos(playerid, tmpX, tmpY, tmpZ);
		    tmpI = GetPlayerInterior(playerid);
		    tmpW = GetPlayerVirtualWorld(playerid);
		    SetGVarFloat("SelectorX", tmpX, playerid);
		    SetGVarFloat("SelectorY", tmpY, playerid);
		    SetGVarFloat("SelectorZ", tmpZ, playerid);
		    SetGVarInt("SelectorI", tmpI, playerid);
		    SetGVarInt("SelectorW", tmpW, playerid);
		    SetGVarInt("SelectedSkin", 0, playerid);

		    switch(shop)
		    {
		        case CS_BINCO:
		        {
		            SetPlayerVirtualWorld(playerid, 100 + playerid);
		            SetPlayerPos_Fix(playerid, 217.5083,-98.4697,1005.2578);
		            SetPlayerFacingAngle(playerid, 125.6199);
		            GetXYInFrontOfPos(217.5083, -98.4697, 125.6199, camX, camY, 3.0);
		            SetPlayerCameraPos(playerid, camX, camY, 1005.2578);
		            SetPlayerCameraLookAt(playerid, 217.5083, -98.4697, 1005.2578);
				}
				case CS_ZIP:
		        {
		            SetPlayerVirtualWorld(playerid, 100 + playerid);
		            SetPlayerPos_Fix(playerid, 181.4948,-87.5120,1002.0234);
		            SetPlayerFacingAngle(playerid, 138.5592);
		            GetXYInFrontOfPos(181.4948, -87.5120, 138.5592, camX, camY, 3.0);
		            SetPlayerCameraPos(playerid, camX, camY, 1002.0234);
		            SetPlayerCameraLookAt(playerid, 181.4948, -87.5120, 1002.0234);
				}
				case CS_VICTIM:
		        {
		            SetPlayerVirtualWorld(playerid, 100 + playerid);
		            SetPlayerPos_Fix(playerid, 208.9104,-3.7637,1001.2178);
		            SetPlayerFacingAngle(playerid, 183.9903);
		            GetXYInFrontOfPos(208.9104, -3.7637, 183.9903, camX, camY, 3.0);
		            SetPlayerCameraPos(playerid, camX, camY, 1001.2178);
		            SetPlayerCameraLookAt(playerid, 208.9104, -3.7637, 1001.2178);
				}
				case CS_DDS:
		        {
		            SetPlayerVirtualWorld(playerid, 100 + playerid);
		            SetPlayerPos_Fix(playerid, 216.0818,-155.4417,1000.5234);
		            SetPlayerFacingAngle(playerid, 136.6586);
		            GetXYInFrontOfPos(216.0818, -155.4417, 136.6586, camX, camY, 3.0);
		            SetPlayerCameraPos(playerid, camX, camY, 1000.5234);
		            SetPlayerCameraLookAt(playerid, 216.0818, -155.4417, 1000.5234);
				}
		    }
		    switch(listitem)
		    {
		        case 0:
		        {
		            SetGVarInt("SkinType", 0, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Cheap[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了平价类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Cheap[0][0]][ieqPrice]);
		        }
		        case 1:
		        {
		            SetGVarInt("SkinType", 1, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Leisure[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了休闲类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Leisure[0][0]][ieqPrice]);
		        }
		        case 2:
		        {
		            SetGVarInt("SkinType", 2, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Fashion[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了流行类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Fashion[0][0]][ieqPrice]);
		        }
		        case 3:
		        {
		            SetGVarInt("SkinType", 3, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Street[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了街头类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Street[0][0]][ieqPrice]);
		        }
		        case 4:
		        {
		            SetGVarInt("SkinType", 4, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Country[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了乡村类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Country[0][0]][ieqPrice]);
		        }
		        case 5:
		        {
		            SetGVarInt("SkinType", 5, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Business[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了商业类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Business[0][0]][ieqPrice]);
		        }
		        case 6:
		        {
		            SetGVarInt("SkinType", 6, playerid);
		            SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Suit[0][0]][ieqAltID]);
		            SendClientMessage(playerid, COLOR_YELLOW, " ** 你选择了西装类");
		            format(string, sizeof(string), "~g~$%d", ItemsList_EQ[SkinShop_Suit[0][0]][ieqPrice]);
		        }
		    }
		    PlayerTextDrawSetString(playerid,SkinPrice[playerid],string);
		    PlayerTextDrawShow(playerid, SkinBuy[playerid]);
			PlayerTextDrawShow(playerid, SkinExit[playerid]);
			PlayerTextDrawShow(playerid, SkinLeft[playerid]);
			PlayerTextDrawShow(playerid, SkinRight[playerid]);
			PlayerTextDrawShow(playerid, SkinPrice[playerid]);
			SelectTextDraw(playerid, COLOR_FADERED);

			UpdatePlayerMission(playerid, 3, 5);
		    return 1;
		}
		case DIALOG_LVCARSELL1://LV买车1
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_LV1, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_GROTTI://Grotti
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_GROTTI, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_WANGCAR://WangCar
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_WANG, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_LSMUSCLE://LSMuscle
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_LSMUSCLE, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_BISVEHSELL_LS://营业用车
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_BISVEH_LS, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_BISVEHSELL_SF://营业用车
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_BISVEH_SF, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_BISVEHSELL_LV://营业用车
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_BISVEH_LV, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_SFBIKE://SF Bike
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台机车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_SFBIKE, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_SFCARSELL1://SF买车1
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
		            SetGVarInt("PlayerBuyingCarPlace", VS_SF1, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_SIMEON://Simeon
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("OrderedVehicle", playerid) == 1)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 您已经先订购一台车了,请稍后再操作");
		            }
              		SetGVarInt("PlayerBuyingCarPlace", VS_SIMEON, playerid);
		            ShowPlayerBuyVehicleMenu(playerid);
		        }
		    }
		    return 1;
		}
		case DIALOG_PD:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
				{
				    new i, j, l, liststr[1024];
				    liststr[0] = EOS, l = 0;
				    ForEachPlayer(p)
				    {
				        for(i = 0, j = MAX_CRIMES; i < j; i++)
						{
							if(Crime[p][i][crType] == CRIME_NONE) { continue;}
							if((Crime[p][i][crVictimType] == VICTIM_PLAYER && Crime[p][i][crVictimID] == playerid))
							{
								format(liststr, sizeof(liststr), "%s%s\t%s\t%s\n", liststr, PlayerData[p][pName], GetCrimeVictimName(p, i), GetCrimeTypeName(Crime[p][i][crType]));
								SetGVarInt("DListID", p, l*1000+playerid);
								SetGVarInt("DListID2", i, l*1000+playerid);
								l++;
							}
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"报案", ""#TEXT_WHITE"你没有任何可以举报的案件", "确定", "");}
					format(liststr, sizeof(liststr), "加害者\t受害者\t行为\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_911_POLICE, DIALOG_STYLE_TABLIST_HEADERS, "报案", liststr, "确认报案", "关闭");
				}
		        case 1:
		        {
              		if(PlayerHaveVehicle(playerid) == 0)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前没有任何载具");
		            }
		            new VehStr[256], i, j, l;
		            VehStr[0] = EOS;
     				for(i = 1, l = 0, j = GetVehiclePoolSize(); i <= j ; i++)
				    {
				        if(VehData[i][vStatus] == VEH_STOLEN)
						{
						    if(IsPlayerVehicle(playerid, i))
							{
							    format(VehStr, sizeof(VehStr), "%s%s\t%s\t个人\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
							}
							else if(IsCompanyVehicle(PlayerData[playerid][pCompany], i))
							{
							    format(VehStr, sizeof(VehStr), "%s%s\t%s\t企业\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
							}
							else if(IsGangVehicle(PlayerData[playerid][pGang], i))
							{
							    format(VehStr, sizeof(VehStr), "%s%s\t%s\t帮会\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
							}
							else if(IsDepartmentVehicle(PlayerData[playerid][pDepartment], i))
							{
							    format(VehStr, sizeof(VehStr), "%s%s\t%s\t公部门\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
							}
	       					format(VehStr, sizeof(VehStr), "%s%s\t%s\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
     				if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"失窃载具", ""#TEXT_WHITE"你没有载具失窃", "确定", "");}
					format(VehStr, sizeof(VehStr), "车名\t车牌\t所属单位\t手续费\n%s", VehStr);
					ShowPlayerDialog(playerid, DIALOG_PD_REVEH, DIALOG_STYLE_TABLIST_HEADERS, "失窃载具", VehStr, "赎回", "取消");
				}
				case 2:
				{
				    if(PlayerData[playerid][pLevel] < 10) return SendClientMessage(playerid, COLOR_WHITE, "等级必须在10以上才能申请枪械执照");
				    if(PlayerHaveItem(playerid, ITEM_EQ, 286)) return SendClientMessage(playerid, COLOR_WHITE, "你已经拥有枪械执照了");
				    if(LimitData[playerid][plGunLic] == 0)
				    {
				    	ShowPlayerDialog(playerid, DIALOG_PD_GUNLIC, DIALOG_STYLE_MSGBOX, "申请枪械执照", ""#TEXT_WHITE"枪械执照:\n拥有执照的玩家可以合法于武装国度购买并持有枪枝作自卫用途\n但若有任何不法、滥用或营利行为而被扣押则需要重新申请\n\n这是你的第一次申请枪械执照\n不须经过审核,只需支付手续费$1000即可\n确认申领枪械执照吗?", "确认", "取消");
				    }
				    else
				    {
				    	ShowPlayerDialog(playerid, DIALOG_PD_GUNLIC, DIALOG_STYLE_MSGBOX, "申请枪械执照", ""#TEXT_WHITE"枪械执照:\n拥有执照的玩家可以合法于武装国度购买并持有枪枝作自卫用途\n但若有任何不法、滥用或营利行为而被扣押则需要重新申请\n\n枪械执照的申请必须经过高阶警官的审核\n审核通过后需支付手续费$1000\n确认申领枪械执照吗?", "确认", "取消");
				    }
				}
				case 3:
				{
				    if(PlayerData[playerid][pDepartment] > 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经属于公部门组织了");
				    if(PlayerData[playerid][pGang] != GANG_ID_NONE || PlayerData[playerid][pCompany] != COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "企业或帮会成员无法加入警队");

				    ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY, DIALOG_STYLE_MSGBOX, "申请加入警队", ""#TEXT_WHITE"警察的职责为:\n维护治安\n打击犯罪\n查获不法\n确认要申请加入警队吗?\n只有在在线期间警长才能审核你的申请", "确认", "取消");
				    SetGVarInt("DDecideID", DEPT_POLICE, playerid);
				}
			}
			return 1;
		}
		case DIALOG_PD_GUNLIC:
		{
		    if (!response) return 1;
		    if(PlayerHaveItem(playerid, ITEM_EQ, 286)) return SendClientMessage(playerid, COLOR_WHITE, "你已经拥有枪械执照了");
		    if(PlayerData[playerid][pCash] < 1000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手续费不足");
		    if(LimitData[playerid][plGunLic] == 0)
			{
			    new string2[256];
			    GivePlayerItem(playerid, ITEM_EQ, 286, 1);
			    GiveMoney(playerid, -1000);
			    Log(moneylog, INFO, "%s(%d)花费了$%d申请枪械执照", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000);
			    SendClientMessage(playerid, COLOR_YELLOW, "** 申请通过,你获得了枪械执照并扣除$1000手续费,请详读上面的内容以防日后权益受损");
			    format(string2, sizeof(string2), "%s", ItemsList_EQ[286][ieqDes]);
			    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪械执照", string2, "收起", "");
			}
			else
			{
			    if(GetGVarInt("ApplyGunLic", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "你已经发送过申请了");
			    SetGVarInt("ApplyGunLic", 1, playerid);
			    SendClientMessage(playerid, COLOR_WHITE, "** 已经发送申请,若通过将会自动扣除手续费$1000");
			    format(string, sizeof(string), "** 玩家%s发出了枪械执照申请,请R3(含)以上的警官前往警局审核", playername);
            	SendDeptMessage(DEPT_POLICE, COLOR_YELLOW, string);
			}
			LimitData[playerid][plGunLic] ++;
			return 1;
		}
		case DIALOG_PD_REVEH:
		{
		    if (!response) return 1;
		    new vehicleid = GetGVarInt("DListID", listitem*1000+playerid);
		    if(PlayerData[playerid][pCash] < VehData[vehicleid][vPrice]/100) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的现金不够赎回这台车");
		    GiveMoney(playerid, -VehData[vehicleid][vPrice]/100);
		    Log(moneylog, INFO, "%s(%d)花费了$%d赎回他失窃的%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], VehData[vehicleid][vPrice]/100, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    format(string, sizeof(string), "** 已赎回你的%s,花费了你$%d", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPrice]/100);
		    SendClientMessage(playerid, COLOR_YELLOW, string);
		    VehData[vehicleid][vStatus] = VEH_NORMAL;
		    SetVehicleToRespawn(vehicleid);
		    Log(vehlog, INFO, "%s(%d)赎回了失窃载具%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    return 1;
		}
		case DIALOG_MVO://辅导站
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
              		if(PlayerHaveVehicle(playerid) == 0)
		            {
		                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前没有任何载具");
		            }
		            new VehStr[256], i, j, l;
		            VehStr[0] = EOS;

     				for(i = 1, l = 0, j = GetVehiclePoolSize(); i <= j ; i++)
				    {
				        if(VehData[i][vOwner] != PlayerData[playerid][pID]) continue;
				        if(VehData[i][vStatus] != VEH_STOLEN || VehData[i][vStatus] != VEH_DESTROYED)
						{
	       					format(VehStr, sizeof(VehStr), "%s%s\t%s\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vPrice]/100);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
                    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"辅导站", ""#TEXT_WHITE"你没有任何载具", "确定", "");}
					format(VehStr, sizeof(VehStr), "车名\t车牌\t报废价钱\n%s", VehStr);
					ShowPlayerDialog(playerid, DIALOG_MVO_TRASHCAR_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "选择报废载具", VehStr, "确定", "取消");
				}
				case 1:
				{
				    if(PlayerData[playerid][pDepartment] > 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经属于公部门组织了");

				    ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY, DIALOG_STYLE_MSGBOX, "申请加入辅导部门", ""#TEXT_WHITE"辅导员的职责为:\n协助新手熟悉游戏\n于新手频道解答玩家疑问\n确认要申请加入辅导部门吗?\n只有在在线期间辅导长才能审核你的申请", "确认", "取消");
				    SetGVarInt("DDecideID", DEPT_COUNSELOR, playerid);
				}
			}
			return 1;
		}
		case DIALOG_MVO_MEMBER:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0: ShowPlayerDialog(playerid, DIALOG_MVO, DIALOG_STYLE_TABLIST_HEADERS, "辅导站",""#TEXT_WHITE"你好, 需要什么服务?\n个人载具报废", "确认", "离开");
		        case 1:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetDeptUsedSpace(DEPT_COUNSELOR), GetDeptSpace(DEPT_COUNSELOR));
					ShowPlayerDialog(playerid, DIALOG_DEPT_STORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DDeptID", DEPT_COUNSELOR, playerid);
                }
		    }
		    return 1;
		}
		case DIALOG_MVO_TRASHCAR_CHECK://报废车辆检查视窗
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);//取得玩家选的那栏listitem的ID
		    format(dialoginfo, sizeof(dialoginfo), "提示: \n确定要报废载具 %s 吗\n\t载具编号: %d\n\t报废价钱: %d",
		    GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID], VehData[chosed][vPrice]/50);
		    ShowPlayerDialog(playerid, DIALOG_MVO_TRASHCAR, DIALOG_STYLE_MSGBOX, "确认视窗", dialoginfo, "确认报废", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_MVO_TRASHCAR://报废动作
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    format(dialoginfo, sizeof(dialoginfo), "确认: \n你的车 %s 已经被报废\n获得报废价钱 %d 元",
		    GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vPrice]/50);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "确认视窗", dialoginfo, "确认", "");
			GiveMoney(playerid, VehData[chosed][vPrice]/50);
			Log(moneylog, INFO, "%s(%d)报废了他的%s(%d)获得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID], VehData[chosed][vPrice]/50);
			Log(vehlog, INFO, "%s(%d)报废了他的%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID]);
			DeleteVehicle(chosed);
   			return 1;

		}
		case DIALOG_CITYHALL:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
              		format(string, sizeof(string), ""#TEXT_WHITE"国库\t$%d税率\t%f\n福利津贴\t$%d\n油价\t$%d/每单位\n电费\t$%d/分钟"
					, Department[DEPT_GOVERNMENT][dpFund], PriceData[prcTax], PriceData[prcWelfare], PriceData[prcGas], PriceData[prcElec]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "查询", string, "确认", "");
				}
				case 1:
				{
				    new string2[256];
				    format(string2, sizeof(string2), ""#TEXT_WHITE"罪刑\t基本通缉\t通缉上限\n");
				    format(string2, sizeof(string2), "%s伤害\t%d星\t%d星\n", string2, WantedRule[wrHitMin], WantedRule[wrHitMax]);
				    format(string2, sizeof(string2), "%s伤害警察与官员\t%d星\t%d星\n", string2, WantedRule[wrHitSMin], WantedRule[wrHitSMax]);
				    format(string2, sizeof(string2), "%s杀害\t%d星\t%d星\n", string2, WantedRule[wrKillMin], WantedRule[wrKillMax]);
				    format(string2, sizeof(string2), "%s损毁\t%d星\t%d星\n", string2, WantedRule[wrDestroyMin], WantedRule[wrDestroyMax]);
				    format(string2, sizeof(string2), "%s抢劫\t%d星\t%d星\n", string2, WantedRule[wrRobMin], WantedRule[wrRobMax]);
				    format(string2, sizeof(string2), "%s偷窃\t%d星\t%d星\n", string2, WantedRule[wrStealMin], WantedRule[wrStealMax]);
				    format(string2, sizeof(string2), "%s制作枪械\t%d星\t%d星\n", string2, WantedRule[wrGunMin], WantedRule[wrGunMax]);
				    format(string2, sizeof(string2), "%s劫持载具\t%d星\t%d星\n", string2, WantedRule[wrHijackMin], WantedRule[wrHijackMax]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "通缉规则", string2, "确认", "");
				}
				case 2:
				{
				    new i, string2[256];
				    string2[0] = EOS;
				    for(i = 0; i < 6; i++)
				    {
				        format(string2, sizeof(string2), "%s%d星\t%d秒\t$%d\n", string2, i+1, WantedList[i][wtJailTime], WantedList[i][wtFine]);
				    }
				    format(string2, sizeof(string2), ""#TEXT_WHITE"通缉等级\t刑期\t罚金\n%s", string2);
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "通缉罚则", string2, "确认", "");
				}
				case 3:
				{
				    if(PlayerData[playerid][pDepartment] > 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经属于公部门组织了");

				    ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY, DIALOG_STYLE_MSGBOX, "申请加入政府部门", ""#TEXT_WHITE"幕僚的职责为:\n协助州长政府事务\n与政府部门展开相关议事\n确认要申请加入政府部门吗?\n只有在在线期间州长才能审核你的申请", "确认", "取消");
				    SetGVarInt("DDecideID", DEPT_GOVERNMENT, playerid);
				}
			}
			return 1;
		}
		case DIALOG_CITYHALL_MEMBER:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
				{
        			format(string, sizeof(string), "调整项目\t目前数值\n国库\t$%d\n税率\t%f\n福利津贴\t$%d\n油价\t$%d/每单位\n电费\t$%d/分钟"
					, Department[DEPT_GOVERNMENT][dpFund], PriceData[prcTax], PriceData[prcWelfare], PriceData[prcGas], PriceData[prcElec]);
					ShowPlayerDialog(playerid, DIALOG_CITYHALL_PRICE, DIALOG_STYLE_TABLIST_HEADERS, "调整", string, "选择", "取消");
				}
				case 1:
				{
				    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "只有州长才能管理各部门");
				    format(string, sizeof(string), ""#TEXT_WHITE"选择部门\n治安部门\n医疗部门\n辅导部门");
					ShowPlayerDialog(playerid, DIALOG_CITYHALL_DEPT, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "选择", "取消");
				}
				case 2:
				{
				    new string2[256];
				    format(string2, sizeof(string2), "罪刑\t基本通缉\t通缉上限\n");
				    format(string2, sizeof(string2), "%s伤害\t%d星\t%d星\n", string2, WantedRule[wrHitMin], WantedRule[wrHitMax]);
				    format(string2, sizeof(string2), "%s伤害警察与官员\t%d星\t%d星\n", string2, WantedRule[wrHitSMin], WantedRule[wrHitSMax]);
				    format(string2, sizeof(string2), "%s杀害\t%d星\t%d星\n", string2, WantedRule[wrKillMin], WantedRule[wrKillMax]);
				    format(string2, sizeof(string2), "%s损毁\t%d星\t%d星\n", string2, WantedRule[wrDestroyMin], WantedRule[wrDestroyMax]);
				    format(string2, sizeof(string2), "%s抢劫\t%d星\t%d星\n", string2, WantedRule[wrRobMin], WantedRule[wrRobMax]);
				    format(string2, sizeof(string2), "%s偷窃\t%d星\t%d星\n", string2, WantedRule[wrStealMin], WantedRule[wrStealMax]);
				    format(string2, sizeof(string2), "%s制作枪械\t%d星\t%d星\n", string2, WantedRule[wrGunMin], WantedRule[wrGunMax]);
				    format(string2, sizeof(string2), "%s劫持载具\t%d星\t%d星\n", string2, WantedRule[wrHijackMin], WantedRule[wrHijackMax]);
					ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED1, DIALOG_STYLE_TABLIST_HEADERS, "管理通缉规则", string2, "选择", "取消");
				}
				case 3:
				{
				    new i, l, string2[256];
				    string2[0] = EOS;
				    for(i = 0, l = 0; i < 6; i++)
				    {
				        format(string2, sizeof(string2), "%s%d星\t%d秒\t$%d\n", string2, i+1, WantedList[i][wtJailTime], WantedList[i][wtFine]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
				    }
				    format(string2, sizeof(string2), "通缉等级\t刑期\t罚金\n%s", string2);
				    ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2, DIALOG_STYLE_TABLIST_HEADERS, "管理通缉罚则", string2, "选择", "取消");
				}
				case 4:
				{
				    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上才能发布公告");
					ShowPlayerDialog(playerid, DIALOG_CITYHALL_ANNOUNCE, DIALOG_STYLE_INPUT, "发布公告", ""#TEXT_WHITE"输入发布内容", "发布", "取消");
				}
		        case 5:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetDeptUsedSpace(DEPT_GOVERNMENT), GetDeptSpace(DEPT_GOVERNMENT));
					ShowPlayerDialog(playerid, DIALOG_DEPT_STORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DDeptID", DEPT_GOVERNMENT, playerid);
                }
		    }
		    return 1;
		}
		case DIALOG_CITYHALL_WANTED1:
		{
		    if (!response) return 1;
			if(PlayerData[playerid][pDeptRank] < 4) return SendClientMessage(playerid, COLOR_WHITE, "只有R4以上才能管理通缉规则");
		    new smallstr[32];
		    switch(listitem)
		    {
		        case 0: format(smallstr, sizeof(smallstr), "伤害");
		        case 1: format(smallstr, sizeof(smallstr), "伤害警察与官员");
		        case 2: format(smallstr, sizeof(smallstr), "杀害");
		        case 3: format(smallstr, sizeof(smallstr), "损毁");
		        case 4: format(smallstr, sizeof(smallstr), "抢劫");
		        case 5: format(smallstr, sizeof(smallstr), "偷窃");
		        case 6: format(smallstr, sizeof(smallstr), "制作枪械");
		        case 7: format(smallstr, sizeof(smallstr), "劫持载具");
		    }
		    SetGVarInt("DDecideID", listitem, playerid);
		    SetGVarString("DString", smallstr, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s\n请输入基本通缉等级(1~3)以及通缉上限(4~6),并用空格分隔", smallstr);
		    ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED1_SET, DIALOG_STYLE_INPUT, "管理通缉规则", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_CITYHALL_WANTED1_SET:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				smallstr[32], mins, maxs;
		    sscanf(inputtext, "dd", mins, maxs);
		    if(mins < 1 || mins > 3) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED1_SET, DIALOG_STYLE_INPUT, "管理通缉规则", ""#TEXT_WHITE"基本通缉值不得小于1或是大于3", "确认", "取消");
		    if(maxs < 4 || maxs > 6) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED1_SET, DIALOG_STYLE_INPUT, "管理通缉规则", ""#TEXT_WHITE"上限通缉值不得小于4或是大于6", "确认", "取消");
		    switch(chosed)
		    {
		        case 0: {WantedRule[wrHitMin] = mins, WantedRule[wrHitMax] = maxs;}
		        case 1: {WantedRule[wrHitSMin] = mins, WantedRule[wrHitSMax] = maxs;}
		        case 2: {WantedRule[wrKillMin] = mins, WantedRule[wrKillMax] = maxs;}
		        case 3: {WantedRule[wrDestroyMin] = mins, WantedRule[wrDestroyMax] = maxs;}
		        case 4: {WantedRule[wrRobMin] = mins, WantedRule[wrRobMax] = maxs;}
		        case 5: {WantedRule[wrStealMin] = mins, WantedRule[wrStealMax] = maxs;}
		        case 6: {WantedRule[wrGunMin] = mins, WantedRule[wrGunMax] = maxs;}
		        case 7: {WantedRule[wrHijackMin] = mins, WantedRule[wrHijackMax] = maxs;}
		    }
		    GetGVarString("DString", smallstr, sizeof(smallstr), playerid);
		    format(string, sizeof(string), "<<部门>> %s 将 %s 的通缉标准设定为: 基本通缉%d星至上限%d星", PlayerData[playerid][pName], smallstr, mins, maxs);
		    SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
		    format(string, sizeof(string), "<<政府公告>> 官员 %s 调整了 %s 行为的通缉规则,详情可以至州政府查看", PlayerData[playerid][pName], smallstr);
			SendClientMessageToAll(COLOR_GREEN, string);
			return 1;
		}
		case DIALOG_CITYHALL_WANTED2:
		{
		    if (!response) return 1;
			if(PlayerData[playerid][pDeptRank] < 4) return SendClientMessage(playerid, COLOR_WHITE, "只有R4以上才能管理通缉刑责");
		    new level = listitem+1;
		    SetGVarInt("DDecideID", level, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了%d星,请选择设定项目\n刑期\n罚金", level);
		    ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_SET, DIALOG_STYLE_TABLIST_HEADERS, "管理通缉刑责", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_CITYHALL_WANTED2_SET:
		{
		    if (!response) return 1;
		    new level = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入通缉%d星的入狱刑期,单位为秒", level);
				    ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_TIME, DIALOG_STYLE_INPUT, "管理通缉刑责", string, "确认", "取消");
				}
				case 1:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入通缉%d星的入狱罚金", level);
				    ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_FINE, DIALOG_STYLE_INPUT, "管理通缉刑责", string, "确认", "取消");
				}
			}
		    return 1;
		}
		case DIALOG_CITYHALL_WANTED2_TIME:
		{
		    if (!response) return 1;
		    new level = GetGVarInt("DDecideID", playerid),
				amount = strval(inputtext);
			if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_TIME, DIALOG_STYLE_INPUT, "管理通缉刑责", ""#TEXT_WHITE"入狱刑期不得小于1,请重新输入", "确认", "取消");
			if(amount > 43200) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_TIME, DIALOG_STYLE_INPUT, "管理通缉刑责", ""#TEXT_WHITE"入狱刑期不得大于12小时,请重新输入", "确认", "取消");
			WantedList[level-1][wtJailTime] = amount;
			format(string, sizeof(string), "<<部门>> %s 将通缉等级%d星的刑期修改为 %d 秒", PlayerData[playerid][pName], level, amount);
		    SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
		    format(string, sizeof(string), "<<政府公告>> 官员 %s 调整了通缉等级%d星的刑期,详情可以至州政府查看", PlayerData[playerid][pName], level);
			SendClientMessageToAll(COLOR_GREEN, string);
			return 1;
		}
		case DIALOG_CITYHALL_WANTED2_FINE:
		{
		    if (!response) return 1;
		    new level = GetGVarInt("DDecideID", playerid),
				amount = strval(inputtext);
			if(amount < 0) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_WANTED2_FINE, DIALOG_STYLE_INPUT, "管理通缉刑责", ""#TEXT_WHITE"入狱罚金不得小于0,请重新输入", "确认", "取消");
			WantedList[level-1][wtFine] = amount;
			format(string, sizeof(string), "<<部门>> %s 将通缉等级%d星的罚金修改为 $%d", PlayerData[playerid][pName], level, amount);
		    SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
		    format(string, sizeof(string), "<<政府公告>> 官员 %s 调整了通缉等级%d星的罚金,详情可以至州政府查看", PlayerData[playerid][pName], level);
			SendClientMessageToAll(COLOR_GREEN, string);
			return 1;
		}
		case DIALOG_CITYHALL_DEPT:
		{
		    if (!response) return 1;
		    new dpid;
		    switch(listitem)
		    {
		        case 0: dpid = DEPT_POLICE;
		        case 1: dpid = DEPT_MEDIC;
		        case 2: dpid = DEPT_COUNSELOR;
		    }
		    SetGVarInt("DDecideID", dpid, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"已选择%s\n分配资金\t目前$%d", Department[dpid][dpName], Department[dpid][dpFund]);
		    ShowPlayerDialog(playerid, DIALOG_CITYHALL_DEPT_SET, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "选择", "取消");
		    return 1;
		}
		case DIALOG_CITYHALL_DEPT_SET:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入要分配的金额\n目前该部门共有资金$%d,国库余有$%d", Department[dpid][dpFund], Department[DEPT_GOVERNMENT][dpFund]);
		    		ShowPlayerDialog(playerid, DIALOG_CITYHALL_DEPT_FUND, DIALOG_STYLE_INPUT, "发放资金", string, "确认", "取消");
		        }
		    }
		    return 1;
		}
		case DIALOG_CITYHALL_DEPT_FUND:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDecideID", playerid),
				amount = strval(inputtext);
			if(amount < 0) ShowPlayerDialog(playerid, DIALOG_CITYHALL_DEPT_FUND, DIALOG_STYLE_INPUT, "分配资金", ""#TEXT_WHITE"金额不得小于0,请重新输入", "确认", "取消");
			if(amount > Department[DEPT_GOVERNMENT][dpFund]) ShowPlayerDialog(playerid, DIALOG_CITYHALL_DEPT_FUND, DIALOG_STYLE_INPUT, "发放资金", ""#TEXT_WHITE"国库没有那么多资金,请重新输入", "确认", "取消");
			Department[DEPT_GOVERNMENT][dpFund] -= amount;
			Department[dpid][dpFund] += amount;
			format(string, sizeof(string), "** 分配完成,目前国库还剩余 $%d", Department[DEPT_GOVERNMENT][dpFund]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "<<政府公告>> 州长 %s 分配了国库$%d至 %s", PlayerData[playerid][pName], amount, Department[dpid][dpName]);
			SendClientMessageToAll(COLOR_GREEN, string);
			Log(deptlog, INFO, "%s(%d)将国库的$%d分配到了%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, Department[dpid][dpName], dpid);
			return 1;
		}
		case DIALOG_CITYHALL_ANNOUNCE:
		{
		    if (!response) return 1;
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) || strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CITYHALL_ANNOUNCE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"发布公告", ""#TEXT_WHITE"公告长度过长或是有无法使用的字元\n请重新输入", "发布", "取消");
			}
			format(string, sizeof(string), "<<政府公告>> %s: %s", PlayerData[playerid][pName], inputtext);
			SendClientMessageToAll(COLOR_GREEN, string);
			return 1;
		}
		case DIALOG_CITYHALL_PRICE:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "只有州长才能调整各个项目");
		    if(listitem == 0)
		    {
		        format(string, sizeof(string), ""#TEXT_WHITE"目前国库还剩余$%d\n临时徵税\n发放福利津贴", Department[DEPT_GOVERNMENT][dpFund]);
		        ShowPlayerDialog(playerid, DIALOG_CITYHALL_FUND, DIALOG_STYLE_TABLIST_HEADERS, "国库", string, "选择", "取消");
		    }
			else
			{
			    switch(listitem)
			    {
			   		case 1: format(string, sizeof(string), ""#TEXT_WHITE"请输入要设定税率的值,范围为0.001~0.5", "设定", "取消");
			   		case 2: format(string, sizeof(string), ""#TEXT_WHITE"请输入要设定福利津贴的金额\n福利津贴将会在每小时发送给所有在线玩家", "设定", "取消");
			   		case 3: format(string, sizeof(string), ""#TEXT_WHITE"请输入要设定每单位油价的值,范围为1~20", "设定", "取消");
			   		case 4: format(string, sizeof(string), ""#TEXT_WHITE"请输入要设定每分钟电费的值,范围为1~30", "设定", "取消");
			   	}
			   	ShowPlayerDialog(playerid, DIALOG_CITYHALL_SET, DIALOG_STYLE_INPUT, "调整", string, "设定", "取消");
		    	SetGVarInt("DDecideID", listitem, playerid);
		    }
			return 1;
		}
		case DIALOG_CITYHALL_SET:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "只有州长才能调整各个项目");
		    new chosed = GetGVarInt("DDecideID", playerid);
			switch(chosed)
			{
			    case 1:
			    {
					new Float:tax = floatstr(inputtext);
					if(tax < 0.001 || tax > 0.5) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_SET, DIALOG_STYLE_INPUT, "调整", ""#TEXT_WHITE"税率范围必须介于0.001-0.5之间", "设定", "取消");
					PriceData[prcTax] = tax;
					SendClientMessage(playerid, COLOR_WHITE, "** 税率设定完成");
					format(string, sizeof(string), "<<政府公告>> 州长 %s 调整了税率,新的税率为%f,下一次徵收起将以此税率为准", PlayerData[playerid][pName], tax);
					SendClientMessageToAll(COLOR_GREEN, string);
			    }
			    case 2:
			    {
					new welfare = strval(inputtext);
					if(welfare < 0) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_SET, DIALOG_STYLE_INPUT, "调整", ""#TEXT_WHITE"值不得小于0", "设定", "取消");
					PriceData[prcWelfare] = welfare;
					SendClientMessage(playerid, COLOR_WHITE, "** 福利津贴设定完成,注意: 如果国库无法负担福利津贴的话将会停止发放");
					format(string, sizeof(string), "<<政府公告>> 州长 %s 调整了福利津贴,新的津贴为$%d,下一次发放起将以此值为准", PlayerData[playerid][pName], welfare);
					SendClientMessageToAll(COLOR_GREEN, string);
			    }
			    case 3:
			    {
					new amount = strval(inputtext);
					if(amount < 1 || amount > 20) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_SET, DIALOG_STYLE_INPUT, "调整", ""#TEXT_WHITE"值必须介于1-20之间", "设定", "取消");
					PriceData[prcGas] = amount;
					SendClientMessage(playerid, COLOR_WHITE, "** 油价设定完成");
					format(string, sizeof(string), "<<政府公告>> 州长 %s 调整了油价,油价为每单位$%d", PlayerData[playerid][pName], amount);
					SendClientMessageToAll(COLOR_GREEN, string);
					for(new i = 0; i < sizeof(GasStationPos); i++)
					{
					    DestroyDynamic3DTextLabel(GasText[i]);
					    format(string,sizeof(string),"加油站\n目前油价[每1公升"#TEXT_YELLOW"%d"#TEXT_WHITE"元]\n"#TEXT_RED"**"#TEXT_WHITE"请熄火加油"#TEXT_RED"**\n"#TEXT_BLUEGREEN"按Y可以使用贩卖机", PriceData[prcGas]);
					    GasText[i] = CreateDynamic3DTextLabel(string, COLOR_WHITE, GasStationPos[i][0], GasStationPos[i][1], GasStationPos[i][2], 60.0, _, _, 0, 0);
					}
			    }
			    case 4:
			    {
					new amount = strval(inputtext);
					if(amount < 1 || amount > 30) return ShowPlayerDialog(playerid, DIALOG_CITYHALL_SET, DIALOG_STYLE_INPUT, "调整", ""#TEXT_WHITE"值必须介于1-30之间", "设定", "取消");
					PriceData[prcElec] = amount;
					SendClientMessage(playerid, COLOR_WHITE, "** 电价设定完成");
					format(string, sizeof(string), "<<政府公告>> 州长 %s 调整了电价,电价为每分钟$%d,下一次计算将以此值为标准", PlayerData[playerid][pName], amount);
					SendClientMessageToAll(COLOR_GREEN, string);
			    }
			}
			return 1;
		}
		case DIALOG_CITYHALL_FUND:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "只有州长才能管理国库");
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"目前国库还剩余$%d\n请输入要向每个在线玩家徵税的金额($100-$5,000)\n** 总财产低于1万或等级低于15的玩家不会被课税", Department[DEPT_GOVERNMENT][dpFund]);
		        	ShowPlayerDialog(playerid, DIALOG_CITYHALL_TAX, DIALOG_STYLE_INPUT, "徵税", string, "徵税", "取消");
		        }
		        case 1:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"目前国库还剩余$%d\n请输入要发放给每个在线玩家的福利津贴($100-$5,000)", Department[DEPT_GOVERNMENT][dpFund]);
		        	ShowPlayerDialog(playerid, DIALOG_CITYHALL_WELFARE, DIALOG_STYLE_INPUT, "发放津贴", string, "发放", "取消");
		        }
		    }
			return 1;
		}
		case DIALOG_CITYHALL_TAX:
		{
		    if (!response) return 1;
		    new amount = strval(inputtext),
				total = 0;
		    if(amount < 100 || amount > 5000)  return SendClientMessage(playerid, COLOR_WHITE, "徵税范围只能介于$100-$5,000之间");
		    ForEachPlayer(i)
		    {
		        if(GetGVarInt("Logged", i) == 0) continue;
		        if(PlayerData[i][pCash] + PlayerData[i][pBank] < 10000 || PlayerData[i][pLevel] < 15) continue;
		        GiveMoney(i, -amount);
		        Log(moneylog, INFO, "%s(%d)被州政府临时课徵了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        total += amount;
		        format(string, sizeof(string), "<<政府公告>> 州长 %s 发起临时徵税,徵收了 $%d", PlayerData[playerid][pName], amount);
		        SendClientMessage(i, COLOR_GREEN, string);
		    }
		    Department[DEPT_GOVERNMENT][dpFund] += total;
		    format(string, sizeof(string), "<<徵收完成>> 州长发起临时徵税,本次一共徵收了$%d,目前国库结余$%d", total, Department[DEPT_GOVERNMENT][dpFund]);
		    Log(deptlog, INFO, "%s(%d)发起临时徵税,徵收了$%d到国库", PlayerData[playerid][pName], PlayerData[playerid][pID], total);
		    return 1;
		}
		case DIALOG_CITYHALL_WELFARE:
		{
		    if (!response) return 1;
		    new amount = strval(inputtext),
				total = GetOnlinePlayers()*amount;
		    if(amount < 100 || amount > 5000)  return SendClientMessage(playerid, COLOR_WHITE, "发放范围只能介于$100-$5,000之间");
		    ForEachPlayer(i)
		    {
		        if(GetGVarInt("Logged", i) == 0) continue;
		        GiveMoney(i, amount);
		        Log(moneylog, INFO, "%s(%d)收到州政府临时发放的津贴$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        format(string, sizeof(string), "<<政府公告>> 州长 %s 发放了福利津贴 $%d", PlayerData[playerid][pName], amount);
		        SendClientMessage(i, COLOR_GREEN, string);
		    }
		    Department[DEPT_GOVERNMENT][dpFund] -= total;
		    format(string, sizeof(string), "<<发放完成>> 州长发发放了福利津贴,本次一共发放了$%d,目前国库结余$%d", total, Department[DEPT_GOVERNMENT][dpFund]);
		    Log(deptlog, INFO, "%s(%d)从国库发放了共$%d的福利津贴", PlayerData[playerid][pName], PlayerData[playerid][pID], total);
		    return 1;
		}
		case DIALOG_VPANEL_SETPASS:
		{
		    new vehicleid;
		    vehicleid = GetPlayerVehicleID(playerid);
		    if(!response || strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    mysql_format(DEFAULT_SESSION, VehData[vehicleid][vLockPass], 24, "0000");
			    format(string, sizeof(string), "** 你的密码被设为预设密码 %s ", VehData[vehicleid][vLockPass]);
				SendClientMessage(playerid, COLOR_YELLOW, string);
				return 1;
			}
			mysql_format(DEFAULT_SESSION, VehData[vehicleid][vLockPass], 24, "%s", inputtext);
			format(string, sizeof(string), ""#TEXT_WHITE"你的密码已设为 %s ", VehData[vehicleid][vLockPass]);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"数位密码锁", string, "确定", "");
			Log(vehlog, INFO, "%s(%d)设定了载具%s(%d)的密码为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], inputtext);
			return 1;
		}
		case DIALOG_VPANEL_PASS:
		{
		    if(!response){return 1;}
		    new type, vehicleid;
            vehicleid = GetPlayerVehicleID(playerid);
		    if(strcmp(VehData[vehicleid][vLockPass], inputtext) == 0 && !isnull(inputtext))
			{
			    type = GetGVarInt("VehPassType", playerid);
			    vehicleid = GetPlayerVehicleID(playerid);
			    switch(type)
			    {
			        case VPASS_ENGINE:
			        {
			            if(VehData[vehicleid][vFuel] < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这辆车没有油了");
						if(GetGVarInt("Engining", playerid) == 1) return 1;
						PlayerSwitchVehicleEngine(playerid, vehicleid);
					}
					case VPASS_SETPASS:
					{
					    ShowPlayerDialog(playerid, DIALOG_VPANEL_SETPASS, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定车锁密码", ""#TEXT_WHITE"请输入要设定的密码", "确认", "取消");
					}
				}
			}
			else
			{
			    SendClientMessage(playerid, COLOR_WHITE, "你输入的密码是错的!");
			    format(string, sizeof(string), "** %s疑似在尝试解开这台车的密码锁 **", playername);
				SendRangeMessage(15.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			}
			return 1;
		}
		case DIALOG_VPANEL:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid), engine, lights, alarm, doors, bonnet, boot, objective,
				option = GetGVarInt("DListID", listitem*1000+playerid), Float:px, Float:py, Float:pz;
			GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			switch(option)
			{
			    case VPANEL_ENGINE:
			    {
					if(engine == 1)
					{
					    PlayerSwitchVehicleEngine(playerid, vehicleid);
					}
					else
					{
					    if(VehData[vehicleid][vLockLv3] == 1)
					    {
					        SetGVarInt("VehPassType", VPASS_ENGINE, playerid);
					    	ShowPlayerDialog(playerid, DIALOG_VPANEL_PASS, DIALOG_STYLE_PASSWORD, ""#TEXT_WHITE"发动引擎", ""#TEXT_WHITE"请输入解锁密码", "确认", "取消");
					    }
					    else
					    {
					        switch(VehData[vehicleid][vType])
					        {
							    case VTYPE_PLAYER:
								{
								    if(VehData[vehicleid][vOwned] == 0)
								    {
								    	if(GetGVarInt("DealerCar", vehicleid) == 1 && GetGVarInt("CarDealer", vehicleid) == playerid) {}
								    	else return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
								    }
								    else
								    {
	         							if(!IsPlayerVehicle(playerid, vehicleid))
										{
										    if(VehData[vehicleid][vLockAlarm] == 1)
											{
											    ForEachPlayer(i)
												{
												    if(IsPlayerVehicle(i, vehicleid))
												    {
												        format(string, sizeof(string), ""#TEXT_RED"防盗警报:"#TEXT_WHITE"侦测到有人正尝试偷窃你的载具"#TEXT_YELLOW" %s"#TEXT_WHITE",请立即前往查看", GetVehicleName(GetVehicleModel(vehicleid)));
												        SendClientMessage(i, COLOR_WHITE, string);
												    }
												}
											}
											GetPlayerPos(playerid, px, py, pz);
								    		SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, vehicleid, 0, px, py, pz, 90);//偷窃载具罪行
								    		format(string, sizeof(string), "** %s 正在尝试发动这个载具的引擎 **", playername);
											SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
											return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
										}
	         						}
								}
								case VTYPE_COMPANY:
								{
									if(!IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid))
									{
									    if(VehData[vehicleid][vLockAlarm] == 1)
										{
											ForEachPlayer(i)
											{
												if(IsCompanyVehicle(PlayerData[i][pCompany], vehicleid))
												{
												    format(string, sizeof(string), ""#TEXT_RED"防盗警报:"#TEXT_WHITE"侦测到有人正尝试偷窃你的企业的载具"#TEXT_YELLOW" %s"#TEXT_WHITE",请立即前往查看", GetVehicleName(GetVehicleModel(vehicleid)));
												    SendClientMessage(i, COLOR_WHITE, string);
												}
											}
										}
										GetPlayerPos(playerid, px, py, pz);
								    	SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, vehicleid, 0, px, py, pz, 90);//偷窃载具罪行
								    	format(string, sizeof(string), "** %s 正在尝试发动这个载具的引擎 **", playername);
										SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
										return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
									}
								}
								case VTYPE_GANG:
								{
									if(!IsGangVehicle(PlayerData[playerid][pGang], vehicleid))
									{
									    if(VehData[vehicleid][vLockAlarm] == 1)
										{
											ForEachPlayer(i)
											{
											    if(IsGangVehicle(PlayerData[i][pGang], vehicleid))
											    {
											        format(string, sizeof(string), ""#TEXT_RED"防盗警报:"#TEXT_WHITE"侦测到有人正尝试偷窃你的帮会的载具"#TEXT_YELLOW" %s"#TEXT_WHITE",请立即前往查看", GetVehicleName(GetVehicleModel(vehicleid)));
											        SendClientMessage(i, COLOR_WHITE, string);
											    }
											}
										}
										GetPlayerPos(playerid, px, py, pz);
								    	SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, vehicleid, 0, px, py, pz, 45);//偷窃载具罪行
								    	format(string, sizeof(string), "** %s 正在尝试发动这个载具的引擎 **", playername);
										SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
										return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
									}
								}
								case VTYPE_RENT:
								{
									if(!IsPlayerVehicle(playerid, vehicleid))
									{
									    if(!IsPlayerVehicle(playerid, vehicleid))
										{
											GetPlayerPos(playerid, px, py, pz);
								    		SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, vehicleid, 0, px, py, pz, 90);//偷窃载具罪行
								    		format(string, sizeof(string), "** %s 正在尝试发动这个载具的引擎 **", playername);
											SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
											return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
										}
									}
								}
								case VTYPE_DEPARTMENT:
								{
									if(!IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid))
									{
									    if(VehData[vehicleid][vLockAlarm] == 1)
										{
											ForEachPlayer(i)
											{
											    if(IsDepartmentVehicle(PlayerData[i][pDepartment], vehicleid))
											    {
											        format(string, sizeof(string), ""#TEXT_RED"防盗警报:"#TEXT_WHITE"侦测到有人正尝试偷窃你的部门的载具"#TEXT_YELLOW" %s"#TEXT_WHITE",请立即前往查看", GetVehicleName(GetVehicleModel(vehicleid)));
											        SendClientMessage(i, COLOR_WHITE, string);
											    }
											}
										}
										GetPlayerPos(playerid, px, py, pz);
								    	SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, vehicleid, 0, px, py, pz, 90);//偷窃载具罪行
								    	format(string, sizeof(string), "** %s 正在尝试发动这个载具的引擎 **", playername);
										SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
										return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
									}
								}
							}
						    if(GetGVarInt("TargetPlayer", vehicleid) != playerid && GetGVarInt("QuestObj", vehicleid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这台车的钥匙");//Simeon Quest
						    if(VehData[vehicleid][vFuel] < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具没有油了");
						    if(GetGVarInt("Engining", playerid) == 1) return 1;
							PlayerSwitchVehicleEngine(playerid, vehicleid);
						}
					}
				}
				case VPANEL_LIGHT:
				{
					if(lights == 1) SetVehicleParamsEx(vehicleid, engine, 0, alarm, doors, bonnet, boot, objective);
					else SetVehicleParamsEx(vehicleid, engine, 1, alarm, doors, bonnet, boot, objective);
				}
				case VPANEL_LOCK:
				{
				    if(VehData[vehicleid][vType] != VTYPE_NONE && !IsPlayerVehicle(playerid, vehicleid) && !IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid) && !IsGangVehicle(PlayerData[playerid][pGang], vehicleid)
					&& !IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这个载具的钥匙");
	     			if(VehData[vehicleid][vLock] == 1)
					{
						SetVehicleLock(playerid, vehicleid, 2);
					}
					else if(VehData[vehicleid][vLock] == 2)
					{
						SetVehicleLock(playerid, vehicleid, 0);
					}
					else
					{
						SetVehicleLock(playerid, vehicleid, 1);
					}
				}
				case VPANEL_PARK:
				{
				    if(!PlayerCanSetVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个载具的权限,无法进行此操作");
    				if(GetVehicleSpeed(vehicleid) > 0.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 必须在静止的状态才能更改重生位置");

				    new eid, Float:range;
					if(IsAPlane(vehicleid) || IsAHelicopter(vehicleid)) range = 30.0;
					else range = 15.0;
					eid = GetNearestEstate(playerid, range);
				    if(eid == -1)
				    {
					    ParkVehicle(vehicleid);
					    format(string, sizeof(string), ""#TEXT_WHITE"已更改%s的储存位置", GetVehicleName(GetVehicleModel(vehicleid)));
						SendClientMessage(playerid, COLOR_WHITE, string);
					}
					else
					{
					    if((IsACar(vehicleid) || IsABike(vehicleid) || IsAMotorBike(vehicleid)) && ( (EstateData[eid][eType] == ESTATE_HOUSE && IsPlayerEstate(playerid, eid))
						|| (EstateData[eid][eType] == ESTATE_OFFICE && IsCompanyEstate(PlayerData[playerid][pCompany], eid))
						|| (EstateData[eid][eType] == ESTATE_CLUBHOUSE && IsGangEstate(PlayerData[playerid][pGang], eid))
						|| (EstateData[eid][eType] == ESTATE_FACTORY && (IsCompanyEstate(PlayerData[playerid][pCompany], eid) || IsGangEstate(PlayerData[playerid][pGang], eid)))
						|| (EstateData[eid][eType] == ESTATE_WAREHOUSE && (IsCompanyEstate(PlayerData[playerid][pCompany], eid) || IsGangEstate(PlayerData[playerid][pGang], eid)))))
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"选择载具储存位置\n原地\n%s的车库", EstateData[eid][eName]);
						    ShowPlayerDialog(playerid, DIALOG_PARK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"更改载具重生位置", string, "确认", "取消");
						}
						else if(EstateData[eid][eType] == ESTATE_HANGAR && (IsCompanyEstate(PlayerData[playerid][pCompany], eid)
						|| IsGangEstate(PlayerData[playerid][pGang], eid)))
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"选择载具储存位置\n原地\n%s", EstateData[eid][eName]);
						    ShowPlayerDialog(playerid, DIALOG_PARK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"更改载具重生位置", string, "确认", "取消");
						}
						else if((IsABoat(vehicleid)) && (EstateData[eid][eType] == ESTATE_BOATYARD && IsCompanyEstate(PlayerData[playerid][pCompany], eid)
						|| EstateData[eid][eType] == ESTATE_BOATYARD && IsGangEstate(PlayerData[playerid][pGang], eid)))
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"选择载具储存位置\n原地\n%s", EstateData[eid][eName]);
						    ShowPlayerDialog(playerid, DIALOG_PARK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"更改载具重生位置", string, "确认", "取消");
						}
						else
						{
						    ParkVehicle(vehicleid);
						    format(string, sizeof(string), ""#TEXT_WHITE"已更改%s的储存位置", GetVehicleName(GetVehicleModel(vehicleid)));
							SendClientMessage(playerid, COLOR_WHITE, string);
						}
					}
				}
				case VPANEL_TYPE:
				{
				    if(!PlayerCanSetVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个载具的权限,无法进行此操作");
				    format(string, sizeof(string), ""#TEXT_WHITE"选择转移给:\n"#TEXT_WHITE"自己\n"#TEXT_BLUEGREEN"我的企业\n"#TEXT_LIGHTRED"我的帮会");
					ShowPlayerDialog(playerid, DIALOG_VPANEL_TYPE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"转移所有权", string, "选择", "取消");
				}
				case VPANEL_SETPASS:
				{
				    if(!PlayerCanSetVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个载具的权限,无法进行此操作");
				    SetGVarInt("VehPassType", VPASS_SETPASS, playerid);
				    ShowPlayerDialog(playerid, DIALOG_VPANEL_PASS, DIALOG_STYLE_PASSWORD, ""#TEXT_WHITE"更改密码", ""#TEXT_WHITE"请先输入原本的密码", "确认", "取消");
				}
				case VPANEL_TAXI:
				{
				    if(IsATaxi(vehicleid))
					{
					    if(GetGVarInt("TaxiOn", playerid) == 0)
						{
						    if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 请先完成你其他的工作");
						    if(IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid))
						    {
						        new comid = CompanySqlIDToID(VehData[vehicleid][vOwner]);
						        if(CompanyData[comid][comTaxi] == 1)
						        {
							        format(string, sizeof(string), ""#TEXT_WHITE"你所属企业规定的车费为: $%d\n30秒后的费率为: $%d/15秒\n\n是否开始营业?", CompanyData[comid][comTaxiFare1], CompanyData[comid][comTaxiFare2]);
							        ShowPlayerDialog(playerid, DIALOG_TAXI_FARE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"计程车营业", string, "开始营业", "取消");
							    }
							    else ShowPlayerDialog(playerid, DIALOG_TAXI_FARE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定车费", ""#TEXT_WHITE"请输入计程车的起跳车费\n** 你的企业尚未开拓计程车业", "开始营业", "取消");
						    }
						    else
							{
								ShowPlayerDialog(playerid, DIALOG_TAXI_FARE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定车费", ""#TEXT_WHITE"请输入计程车的起跳车费", "开始营业", "取消");
						    }
						}
						else
						{
						    TaxiStop(playerid, vehicleid);
						}
					}
				}
				case VPANEL_BUS:
				{
				    if(IsABus(vehicleid))
					{
					    if(GetGVarInt("BusOn", playerid) == 0)
						{
						    if(IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid))
						    {
						        new comid = CompanySqlIDToID(VehData[vehicleid][vOwner]);
						        if(CompanyData[comid][comBus] == 1)
						        {
						            if(GetGVarInt("EditBS", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在编辑路线时无法开始上班");
						            if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
							        new rlist[256], i, j, l;
							        rlist[0] = EOS;
				     				for(i = l = 0, j = MAX_BUS_ROUTES; i < j; i++)
									{
										if(BusRoute[i][brCreated] == 0) { continue;}
										if(BusRoute[i][brComID] == CompanyData[comid][comID] && BusRoute[i][brMaxStop] > 0)
										{
											format(rlist, sizeof(rlist), "%s%s\t%d\n", rlist, BusRoute[i][brName], BusRoute[i][brMaxStop]);
											SetGVarInt("DListID", i, l*1000+playerid);
											l++;
										}
									}
									if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"选择路线", ""#TEXT_WHITE"你的企业目前还未增加任何客运路线", "确定", "");}
									format(rlist, sizeof(rlist), "路线名称\t停靠站数量\n%s", rlist);
									ShowPlayerDialog(playerid, DIALOG_BUS_FARE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"选择路线", rlist, "选择", "关闭");
							    }
							    else return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业没有客运业了");
						    }
						}
						else
						{
						    StopBus(playerid, vehicleid);
						}
					}
				}
				case VPANEL_EJECT:
				{
				    if(GetGVarInt("BusOn", playerid) == 0)
				    {
					    ForEachPlayer(i)
					    {
					        if(!IsPlayerInAnyVehicle(i)) continue;
					        if(GetPlayerVehicleID(i) == vehicleid && playerid != i)
					        {
					            RemovePlayerFromVehicle_Fix(i);
					            SendClientMessage(i, COLOR_WHITE, "** 你被驾驶请出车外");
					        }
					    }
					}
				}
				case VPANEL_UNRENT:
				{
				    if(VehData[vehicleid][vType] != VTYPE_RENT) return SendClientMessage(playerid, COLOR_WHITE, "这个载具不是租用载具");
				    if(GetGVarInt("RentCar", playerid) != vehicleid) return SendClientMessage(playerid, COLOR_WHITE, "这个载具不是你的租用载具");
				    new Float:vhp;
				    DeleteGVar("RentCar", playerid);
				    SendClientMessage(playerid, COLOR_WHITE, "** 退租这个载具完成!");
					GetVehicleHealth(vehicleid, vhp);
					if(vhp > 990.0)
					{
					    GiveMoney(playerid, VehData[vehicleid][vPrice]/2);
					    Log(moneylog, INFO, "%s(%d)获得租车返还的押金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], VehData[vehicleid][vPrice]/2);
					    format(string, sizeof(string), "** 因为这个载具的租用状况良好,所以返还租用金的一半$%d", VehData[vehicleid][vPrice]/2);
					    SendClientMessage(playerid, COLOR_FADEGREEN, string);
					}
				    RemovePlayerFromVehicle_Fix(playerid);
				    SetVehicleToRespawn(vehicleid);
				    VehData[vehicleid][vFuel] = 100;
				    VehData[vehicleid][vLock] = 0;
				}
				case VPANEL_PAINTJOB:
				{
				    new eid = GetGVarInt("VOutEID", vehicleid);
					if(EstateData[eid][eType] == ESTATE_HANGAR && EstateData[eid][eUpgrade1] == 1)
					{
					    SetGVarInt("EditVCol", 2, playerid);
					    SetGVarInt("EVColor1", VehData[vehicleid][vColor1], playerid);
					    SetGVarInt("EVColor2", VehData[vehicleid][vColor2], playerid);
					    TogglePlayerControllableEx(playerid, 0);

					    SendClientMessage(playerid, COLOR_YELLOW, "** 提示: "#TEXT_WHITE"使用"#TEXT_FADEBLUE"左侧选项"#TEXT_WHITE"选择颜色");
					    PlayerPaintVehicle(playerid);
					}
				}
				case VPANEL_TRUNK:
				{
					if(VehData[vehicleid][vTrunk] == 1)
					{
						SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, 0, objective);
						VehData[vehicleid][vTrunk] = 0;
						format(string, sizeof(string), "** %s 关闭了载具的储物空间 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					}
					else
					{
						SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, 1, objective);
						VehData[vehicleid][vTrunk] = 1;
						SendClientMessage(playerid, COLOR_PINKRED, "** 提示: 打开载具面板或是在载具外按Y键可以存取后车厢道具");
						format(string, sizeof(string), "** %s 打开了载具的储物空间 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
						if(IsABomberPlane(vehicleid))
						{
						    SendClientMessage(playerid, COLOR_YELLOW, "** 提示: 这架是轰炸机,按左ALT键可以抛下炸弹");
						}
					}
					PlayerPlayGlobalSound(playerid, 24600);
				}
				case VPANEL_HOOD:
				{
					if(VehData[vehicleid][vHood] == 1)
					{
						SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, 0, boot, objective);
						VehData[vehicleid][vHood] = 0;
					}
					else
					{
						SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, 1, boot, objective);
						VehData[vehicleid][vHood] = 1;
					}
					PlayerPlayGlobalSound(playerid, 24600);
				}
				case VPANEL_STORE:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetVehicleUsedSpace(vehicleid), GetVehicleSpace(vehicleid));
					ShowPlayerDialog(playerid, DIALOG_VSTORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DVehID", vehicleid, playerid);
				}
				case VPANEL_TRAILER:
				{
				    new trailerid = GetVehicleTrailer(vehicleid);
				    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetVehicleUsedSpace(trailerid), GetVehicleSpace(trailerid));
					ShowPlayerDialog(playerid, DIALOG_VSTORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DVehID", trailerid, playerid);
				}
				case VPANEL_FVENDOR:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"目前你拥有%d个食材货物\n"#TEXT_WHITE"开始/结束营业\n"#TEXT_YELLOW"制作餐点(目前数量:%d)", PlayerHaveItem(playerid, 1, 153), GetGVarInt("FVFood", vehicleid));
					ShowPlayerDialog(playerid, DIALOG_VPANEL_FVENDOR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"餐车", string, "选择", "关闭");
				}
				case VPANEL_TOW:
				{
				    if(IsTrailerAttachedToVehicle(vehicleid))
					{
						DetachTrailerFromVehicle(vehicleid);
					}
					else
					{
					    new towid = GetNearestVehicleForVehicle(vehicleid, 8.0);
					    AttachTrailerToVehicle(towid, vehicleid);
					}
				}
				case VPANEL_MW:
				{
				    if(VehData[vehicleid][vType] == VTYPE_MW && GetGVarInt("VehMWLoaded", vehicleid) == 1)
					{
	    				if(GetVehicleSpeed(vehicleid) > 0.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 必须在静止的状态才能卸货");

					    new eid = GetNearestEstate(playerid, 15.0),
							mwid = GetGVarInt("VehMW", vehicleid),
							mwitemid = MatWar[mwid][mwMatID];
						if(eid == -1)//找无地产
						{
						    if(IsPlayerCloseToDeptHQ(playerid, 15.0))//则确认玩家是否在部门基地附近
						    {
						        new dpid = PlayerData[playerid][pDepartment];
						        if(ItemsList_USE[mwitemid][iuSpace]*MatWar[mwid][mwMatAmount] > GetDeptRemainingSpace(dpid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 储物间没空间装下这个货物了,请腾出空间");
                                SetGVarInt("DelVehOnUns", vehicleid, playerid);//在载具StreamOut时删除
								RemovePlayerFromVehicle_Fix(playerid);
								DeleteGVar("VehMWLoaded", vehicleid);
								VehData[vehicleid][vLock] = 1;
								format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的载具已经被运送完毕,这个货物战争结束", MatWar[mwid][mwMatAmount], ItemsList_USE[mwitemid][iuName]);
								SendMatWarMessage(COLOR_WHITE, string);
								DeptLoadMatWar(playerid, dpid, mwid);
						    }
						    else return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有任何可用的地产");
						}
						else
						{
						    if(IsCompanyEstate(PlayerData[playerid][pCompany], eid) || IsGangEstate(PlayerData[playerid][pGang], eid))
							{
								if(ItemsList_USE[mwitemid][iuSpace]*MatWar[mwid][mwMatAmount] > GetEstateRemainingSpace(eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产没空间装下这个货物了");
                                SetGVarInt("DelVehOnUns", vehicleid, playerid);//在载具StreamOut时删除
								RemovePlayerFromVehicle_Fix(playerid);
								DeleteGVar("VehMWLoaded", vehicleid);
								VehData[vehicleid][vLock] = 1;
								format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的载具已经被运送完毕,这个货物战争结束", MatWar[mwid][mwMatAmount], ItemsList_USE[mwitemid][iuName]);
								SendMatWarMessage(COLOR_WHITE, string);
								EstateLoadMatWar(playerid, eid, mwid);
							}
							else return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有属于你的组织的地产");
						}
					}
				}
				case VPANEL_EXITRC:
				{
				    if(VehData[vehicleid][vType] == VTYPE_RC)
					{
					    if(GetGVarInt("Filming", playerid) == CAMERA_VEHICLE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先结束摄影");
					    SetPlayerExitRCVehicle(playerid);
					    SendClientMessage(playerid, COLOR_YELLOW, "** 你收回了遥控玩具");
					}
				}
				case VPANEL_CAMERA:
				{
				    if(GetGVarInt("Filming", playerid) == CAMERA_VEHICLE) ShowPlayerDialog(playerid, DIALOG_CAMERA_VEH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"摄影机设定", "摄影中,若你属于媒体业的成员,你的企业可以将你拍摄的画面播映到电视频道上\n结束摄影", "选择", "关闭");
				    else if(GetGVarInt("Filming", playerid) == CAMERA_PLAYER || GetGVarInt("Filming", playerid) == CAMERA_SET) SendClientMessage(playerid, COLOR_WHITE, "** 你目前已经在使用摄影机了");
				    else ShowPlayerDialog(playerid, DIALOG_CAMERA_VEH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"摄影机设定", "开始摄影后,你的企业可以将你拍摄的画面播映到电视频道上\n开始摄影", "选择", "关闭");
				}
				case VPANEL_POLICE:
				{
				    if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先值勤才能使用警车功能");
				    format(string, sizeof(string), ""#TEXT_WHITE"请选择项目\n查询通缉犯位置	(目前:%d)\n押解上铐通缉犯\n取消追踪犯人", GetCriminalsAmount());
					ShowPlayerDialog(playerid, DIALOG_VPANEL_POLICE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_BLUE"警察", string, "选择", "关闭");
				}
				case VPANEL_MEDIC:
				{
				    if(GetGVarInt("MedicDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先上班才能使用救护车功能");
				    format(string, sizeof(string), ""#TEXT_WHITE"请选择项目\n求救玩家列表\n治疗车上玩家");
					ShowPlayerDialog(playerid, DIALOG_VPANEL_MEDIC, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_NURSEPINK"救护车", string, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_LILBIKE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(GetGVarInt("LilBike", vehicleid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个不是折叠单车");
			if(PlayerHaveItem(playerid, ITEM_EQ, 287)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上已经有折叠单车了");
			if(GetPlayerRemainingSpace(playerid) < ItemsList_EQ[287][ieqSpace]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下这个折叠单车");

			DeleteGVar("LilBike", vehicleid);
			SendClientMessage(playerid, COLOR_WHITE, " ** 你将这台折叠单车收进了你的背包里");
			DestroyVehicle(vehicleid);
			GivePlayerItem(playerid, ITEM_EQ, 287, 1);
			return 1;
		}
		case DIALOG_VPANEL_MEDIC:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            new k, DList[512];
				    DList[0] = EOS, k = 0;
				    ForEachPlayer(i)
					{
					    if(GetGVarInt("CalledMedic", i) == 0) continue;
					    format(DList, sizeof(DList), "%s%s\n", DList, PlayerData[i][pName]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "求救玩家列表", ""#TEXT_WHITE"目前没有任何求救玩家", "确认", "");}
					format(DList, sizeof(DList), ""#TEXT_WHITE"玩家名称\n%s", DList);
					ShowPlayerDialog(playerid, DIALOG_VPANEL_MEDIC_LIST, DIALOG_STYLE_TABLIST_HEADERS, "求救玩家列表", DList, "查询位置", "关闭");
		        }
		        case 1:
		        {
		            new k, DList[512];
				    DList[0] = EOS, k = 0;
				    ForEachPlayer(i)
					{
					    if(playerid == i) continue;
					    if(GetPlayerVehicleID(i) == vehicleid)
					    {
						    format(DList, sizeof(DList), "%s%s\t%d\n", DList, PlayerData[i][pName], floatround(GetPlayerHealth_Fix(i)));
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "治疗车上玩家", ""#TEXT_WHITE"目前没有其他玩家在救护车上", "确认", "");}
					format(DList, sizeof(DList), ""#TEXT_WHITE"玩家名称\t生命值\n%s", DList);
					ShowPlayerDialog(playerid, DIALOG_VPANEL_MEDIC_CURE, DIALOG_STYLE_TABLIST_HEADERS, "治疗车上玩家", DList, "治疗", "关闭");
		        }
		    }
		    return 1;
		}
		case DIALOG_VPANEL_MEDIC_LIST:
		{
		    if(!response){return 1;}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				Float:px, Float:py, Float:pz;
		    if(GetGVarInt("CalledMedic", chosed) == 0) return SendClientMessage(playerid, COLOR_WHITE, "** 该玩家已经没有请求医疗服务了");

		    GetPlayerPos(chosed, px, py, pz);
		    DeleteGVar("CalledMedic", chosed);
		    format(string, sizeof(string), "** 医疗人员已经收到了你的求救消息,请待在原地等待医疗人员的到来");
			SendClientMessage(chosed, COLOR_NURSEPINK, string);
			format(string, sizeof(string), "** 你获得了求救玩家 %s 的位置,并已标记在地图上", PlayerData[chosed][pName]);
			SendClientMessage(playerid, COLOR_NURSEPINK, string);
			SetPlayerGPS(playerid, px, py, pz);
			return 1;
		}
        case DIALOG_VPANEL_MEDIC_CURE:
		{
		    if(!response){return 1;}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
		        vehicleid = GetPlayerVehicleID(playerid);
			if(GetPlayerVehicleID(chosed) != vehicleid) return SendClientMessage(playerid, COLOR_WHITE, "** 该玩家不在救护车上");
			if(GetPlayerHealth_Fix(chosed) == 100.0+PlayerData[chosed][pMaxHealth]) return SendClientMessage(playerid, COLOR_WHITE, "** 该玩家不需要治疗");

			SetPlayerHealth_Fix(chosed, 100.0+PlayerData[chosed][pMaxHealth]);
			format(string, sizeof(string), "** %s 使用救护车的器材治疗了你", PlayerData[playerid][pName]);
			SendClientMessage(chosed, COLOR_NURSEPINK, string);
			format(string, sizeof(string), "** 你使用了救护车的器材治疗了 %s", PlayerData[chosed][pName]);
			SendClientMessage(playerid, COLOR_NURSEPINK, string);
			format(string, sizeof(string), "** %s 治疗了 %s **", playername, PlayerData[chosed][pName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
		case DIALOG_VPANEL_POLICE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    switch(listitem)
		    {
		        case 0: ShowPlayerWantedList(playerid);
		        case 1:
		        {
		            new Float:NearestRange, Float:CurrentRange, targetid, Float:px, Float:py, Float:pz, targetname[MAX_PLAYER_NAME];
				    NearestRange = 15.0,
				    targetid = INVALID_PLAYER_ID;
				    GetPlayerPos(playerid, px, py, pz);
				    ForEachPlayer(i)
				    {
				        if(GetGVarInt("Cuffed", i) == 0) continue;
				        CurrentRange = GetPlayerDistanceFromPointEx(i, px, py, pz);
				        if(CurrentRange < NearestRange)
				        {
				            NearestRange = CurrentRange;
				            targetid = i;
				        }
				    }
					if(targetid == INVALID_PLAYER_ID) return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有已经被上铐的玩家");
				    if(PutPlayerInVehicle_Fix(targetid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 警车上没有多余的空间");
					GetPlayerName(targetid, targetname, MAX_PLAYER_NAME);
					format(string, sizeof(string), "** %s 将%s押上了警车 **", playername, targetname);
					SendRangeMessage(20.0, targetid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		        }
				case 2:
				{
				    PlayerUntracePlayer(playerid);
				    SendClientMessage(playerid, COLOR_BLUE, "<<警用资料库>> "#TEXT_WHITE"已经关闭与资料库的连线取消追踪犯人");
				}
            }
            return 1;
        }
        case DIALOG_POLICE_TRACE:
		{
		    if(!response){return 1;}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(PlayerData[chosed][pWanted] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经没有被通缉了");

		    format(string, sizeof(string), "<<警用资料库>> "#TEXT_WHITE"开始连线至情报中心,正在取得"#TEXT_FADERED"%s"#TEXT_WHITE"的所在区域...", PlayerData[chosed][pName]);
		    SendClientMessage(playerid, COLOR_BLUE, string);
		    PlayerTracePlayer(playerid, chosed);
		    return 1;
		}
		case DIALOG_VPANEL_FVENDOR:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("FVendoring", playerid) == 0)
					{
					    if(GetGVarInt("FVFood", vehicleid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前还没有准备任何餐点,请先制作餐点");
					    format(string, sizeof(string), ""TEXT_WHITE"请设定每份餐点价格\n目前有%d个餐点", GetGVarInt("FVFood", vehicleid));
					    ShowPlayerDialog(playerid, DIALOG_VPANEL_FVENDOR_PRICE, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"餐车", string, "开始营业", "关闭");
					}
					else
					{
					    DeleteGVar("FVendoring", playerid);
					    UpdatePlayerVehText(playerid);
					    SendClientMessage(playerid, COLOR_WHITE, "** 你已结束餐车的营业");
					}
				}
				case 1:
				{
				    new food = GetGVarInt("FVFood", vehicleid);
				    if(!PlayerHaveItem(playerid, 1, 153)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有任何食材能制作餐点,请先前往工厂购买食材货物");
				    if(GetVehicleModel(vehicleid) == 423)
				    {
				        SetGVarInt("FVFood", 25+food, vehicleid);
				        format(string, sizeof(string), "** 已消耗1箱食材货物制作25盒冰淇淋!");
				    }
				    else if(GetVehicleModel(vehicleid) == 588)
				    {
				        SetGVarInt("FVFood", 20+food, vehicleid);
				        format(string, sizeof(string), "** 已消耗1箱食材货物制作20根热狗!");
				    }
				    GivePlayerItem(playerid, 1, 153, -1);
				    SendClientMessage(playerid, COLOR_WHITE, string);
				    format(string, sizeof(string), "** %s 制作了一些餐点 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				}
			}
			return 1;
		}
		case DIALOG_VPANEL_FVENDOR_PRICE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid),
				price = strval(inputtext);
			if(price < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 售价不得小于0");
			if(GetVehicleModel(vehicleid) == 423)
			{
			    if(!PlayerHaveItem(playerid, 2, 206))
				{
					SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了胖小丑造型,请至背包查看");
					GivePlayerItem(playerid, 2, 206, 1);
				}
				SetGVarInt("FVendoring", 2, playerid);
				format(string, sizeof(string), "** 你开始了冰淇淋车的营业");
			}
			else if(GetVehicleModel(vehicleid) == 588)
			{
			    if(!PlayerHaveItem(playerid, 2, 205))
				{
					SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了厨师造型,请至背包查看");
					GivePlayerItem(playerid, 2, 205, 1);
				}
				SetGVarInt("FVendoring", 1, playerid);
				format(string, sizeof(string), "** 你开始了热狗车的营业");
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			SetGVarInt("FVPrice", price, vehicleid);
			if(IsValidDynamic3DTextLabel(PlayerVehText[playerid])) DestroyDynamic3DTextLabel(PlayerVehText[playerid]);
			PlayerVehText[playerid] = CreateDynamic3DTextLabel(" ", COLOR_WHITE, 0.0, 0.0, 0.0, 40.0, _, vehicleid);
			UpdatePlayerVehText(playerid);
			return 1;
		}
		case DIALOG_TAXI_FARE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid),
				fare = strval(inputtext),
				fare2 = 10, taxibis = 0, comid = 0;
		    if(!IsATaxi(vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在计程车上");
		    if(!IsPlayerVehicle(playerid, vehicleid) && !IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid) && !IsPlayerVehicle(PlayerData[playerid][pGang], vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能使用这台车的跳表机了");

			if(VehData[vehicleid][vType] == VTYPE_COMPANY)
		    {
		        comid = CompanySqlIDToID(VehData[vehicleid][vOwner]);
		        if(CompanyData[comid][comTaxi] == 1)
		        {
			        fare = CompanyData[comid][comTaxiFare1],
					fare2 = CompanyData[comid][comTaxiFare2],
			        taxibis = 1;//为计程车业
			    }
		    }
			if(fare < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 车费不得小于0");
		    if(fare > 2000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 车费不得大于2000");

		    SetGVarInt("TaxiOn", 1, playerid);
		    SetGVarInt("TaxiFare", fare, playerid);
		    SetGVarInt("TaxiFare2", fare2, playerid);
		    SetGVarInt("Taxi", 1, vehicleid);
		    SetGVarInt("TaxiDriver", playerid, vehicleid);
		    format(string, sizeof(string), "** 你开始了计程车营业,起跳车费为 $%d", fare);
		    SendClientMessage(playerid, COLOR_YELLOW, string);
		    SetVehicleAttachment(vehicleid, ATTACH_TAXI_LIGHT);

		    if(taxibis == 1) format(string, sizeof(string), ""#TEXT_YELLOW"【%s计程车业】\n起跳车费:$%d\n30秒后费率:$%d/15秒", CompanyData[comid][comName], fare, fare2);
		    else format(string, sizeof(string), "【自营计程车】\n起跳车费:$%d\n30秒后费率:$%d/15秒", fare, fare2);

		    VehicleStatus[vehicleid] = CreateDynamic3DTextLabel(string, COLOR_WHITE, 0.0, 0.0, 0.3, 40.0, _, vehicleid);
		    return 1;
		}
		case DIALOG_BUS_FARE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid),
		    	comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				fare = CompanyData[comid][comBusFare],
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(!IsABus(vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在客运上");
		    if(!IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这台不是属于你的企业的车");
		    if(CompanyData[comid][comBus] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业并未开拓客运业");
		    if(PlayerData[playerid][pStamina] < 4.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");

		    SetGVarInt("BusOn", 1, playerid);
		    SetGVarInt("BusFare", fare, playerid);
		    SetGVarInt("Bus", 1, vehicleid);
		    SetGVarInt("BusCom", comid, vehicleid);
		    SetGVarInt("BusDriver", playerid, vehicleid);

		    SetGVarInt("BusRoute", chosed, playerid);
			SetGVarInt("NextStop", 0, playerid);
			SetStopCP(playerid, 0);

		    SetGVarFloat("WorkDistance", 0.0, playerid);

		    format(string, sizeof(string), "** 你消耗4点体力开始上班了,车费为 $%d", fare);
		    SendClientMessage(playerid, COLOR_FADEBLUE, string);
            PlayerData[playerid][pStamina] -= 4.0;

		    format(string, sizeof(string), ""#TEXT_FADEBLUE"【%s客运】\n"#TEXT_LIGHTRED"路线:"#TEXT_YELLOW"%s\n"#TEXT_LIGHTRED"下一站:"#TEXT_YELLOW"%s\n"#TEXT_FADEGREEN"车费:$%d", CompanyData[comid][comName], BusRoute[chosed][brName], BusStop[chosed][0][bsName], fare);
		    VehicleStatus[vehicleid] = CreateDynamic3DTextLabel(string, COLOR_BLUEGREEN, 0.0, 0.0, 0.0, 40.0, _, vehicleid);
		    return 1;
		}

		case DIALOG_PARK:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!PlayerCanSetVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个载具的权限,无法进行此操作");
			switch(listitem)
			{
			    case 0:
				{
					ParkVehicle(vehicleid);
					format(string, sizeof(string), ""#TEXT_WHITE"已更改%s的储存位置", GetVehicleName(GetVehicleModel(vehicleid)));
					SendClientMessage(playerid, COLOR_WHITE, string);
					Log(vehlog, INFO, "%s(%d)更改了载具%s(%d)的储存位置(%f, %f, %f)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], VehData[vehicleid][vX], VehData[vehicleid][vY], VehData[vehicleid][vZ]);
				}
			    case 1:
			    {
			        new eid = GetNearestEstate(playerid, 15.0);
			        if(eid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有任何可用的地产");
			        if(!CanEstateStoreVehicle(eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产无法再储存更多载具了");
			        if(EstateData[eid][eType] != ESTATE_HANGAR && !IsACar(vehicleid) && !IsAMotorBike(vehicleid) && !IsABike(vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产无法储存这种类型的载具");

			        ParkVehicle(vehicleid);
        			VehData[vehicleid][vStatus] = VEH_STORED;
				    VehData[vehicleid][vStoredEstate] = EstateData[eid][eID];
			        if(EstateData[eid][eType] == ESTATE_HANGAR)
			        {
			            VehData[vehicleid][vPanelStat] =
					    VehData[vehicleid][vDoorStat] =
					    VehData[vehicleid][vLightStat] =
					    VehData[vehicleid][vTireStat] = 0;
					    VehData[vehicleid][vHealth] = VehData[vehicleid][vArmour] + 1000.0;
					}
					SetVehicleToRespawn(vehicleid);
					format(string, sizeof(string), ""#TEXT_WHITE"你已将%s储存在地产%s", EstateData[eid][eName], GetVehicleName(VehData[vehicleid][vModel]));
					SendClientMessage(playerid, COLOR_WHITE, string);
			        Log(vehlog, INFO, "%s(%d)已将载具%s(%d)的储存地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], EstateData[eid][eName], EstateData[eid][eID]);
			        if(IsATrailerTruck(vehicleid) && GetVehicleTrailer(vehicleid) != 0 && CanEstateStoreVehicle(eid))
					{
					    new trailerid = GetVehicleTrailer(vehicleid);
					    if(PlayerCanSetVehicle(playerid, trailerid))
					    {
						    ParkVehicle(trailerid);
		        			VehData[trailerid][vStatus] = VEH_STORED;
						    VehData[trailerid][vStoredEstate] = EstateData[eid][eID];
					        if(EstateData[eid][eType] == ESTATE_HANGAR)
					        {
							    VehData[trailerid][vHealth] = 1000.0;
							}
							SetVehicleToRespawn(trailerid);
					        format(string, sizeof(string), ""#TEXT_WHITE"货柜已连同车头一起停放在地产 %s", EstateData[eid][eName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
					        Log(vehlog, INFO, "%s(%d)已将载具%s(%d)的储存地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[trailerid][vModel]), VehData[trailerid][vID], EstateData[eid][eName], EstateData[eid][eID]);
					    }
					}
			    }
			}
			return 1;
		}
		case DIALOG_VPANEL_TYPE:
		{
		    if(!response){return 1;}
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!PlayerCanSetVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个载具的权限,无法进行此操作");
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(IsPlayerVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经是你的了");
		            if(VehData[vehicleid][vType] == VTYPE_PLAYER) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经是其他玩家的了");
		            if(!PlayerCanBuyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有办法再拥有更多载具了");

		            if(VehData[vehicleid][vType] == VTYPE_COMPANY)
		            {
		                format(string, sizeof(string), "<<企业>> %s 将企业载具 %s 的所有权转给了自己", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
					    Log(vehlog, INFO, "%s(%d)已将企业ID:%d的载具%s(%d)的所有权转给自己", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pCompany], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					}
					else if(VehData[vehicleid][vType] == VTYPE_GANG)
		            {
		                format(string, sizeof(string), "<<帮会>> %s 将帮会载具 %s 的所有权转给了自己", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
					    Log(vehlog, INFO, "%s(%d)已将帮会ID:%d的载具%s(%d)的所有权转给自己", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pGang], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					}
		            VehData[vehicleid][vType] = VTYPE_PLAYER;
		            VehData[vehicleid][vOwner] = PlayerData[playerid][pID];
		            format(string, sizeof(string), "** 转移完成: 这台 %s 的所有权已经转移到你身上了", GetVehicleName(VehData[vehicleid][vModel]));
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case 1:
		        {
		            if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "你目前不属于任何企业");
		            if(IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经是属于你的企业的了");
		            if(CompanyHaveVehicle(PlayerData[playerid][pCompany]) >= MAX_COMVEHS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业无法再拥有更多载具了");

		            if(VehData[vehicleid][vType] == VTYPE_GANG)
		            {
		                format(string, sizeof(string), "<<帮会>> %s 将帮会载具 %s 的所有权转移至他的企业了", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
					    Log(vehlog, INFO, "%s(%d)已将帮会ID:%d的载具%s(%d)的所有权转给企业ID:%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pGang], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
					}
					else Log(vehlog, INFO, "%s(%d)已将自己的载具%s(%d)的所有权转给企业ID:%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
		            VehData[vehicleid][vType] = VTYPE_COMPANY;
		            VehData[vehicleid][vOwner] = PlayerData[playerid][pCompany];
		            format(string, sizeof(string), "** 转移完成: 这台 %s 的所有权已经转移到你的企业了", GetVehicleName(VehData[vehicleid][vModel]));
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case 2:
		        {
		            if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "你目前不属于任何帮会");
		            if(IsGangVehicle(PlayerData[playerid][pGang], vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经是属于你的帮会的了");
		            if(GangHaveVehicle(PlayerData[playerid][pGang]) >= MAX_GANGVEHS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法再拥有更多载具了");

		            if(VehData[vehicleid][vType] == VTYPE_COMPANY)
		            {
		                format(string, sizeof(string), "<<企业>> %s 将企业载具 %s 的所有权转移至他的帮会了", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
					    Log(vehlog, INFO, "%s(%d)已将企业ID:%d的载具%s(%d)的所有权转给帮会ID:%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[playerid][pCompany], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
					}
					else Log(vehlog, INFO, "%s(%d)已将自己的载具%s(%d)的所有权转给帮会ID:%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
		            VehData[vehicleid][vType] = VTYPE_GANG;
		            VehData[vehicleid][vOwner] = PlayerData[playerid][pGang];
		            format(string, sizeof(string), "** 转移完成: 这台 %s 的所有权已经转移到你的帮会了", GetVehicleName(VehData[vehicleid][vModel]));
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		    }
		    return 1;
		}
		case DIALOG_VMOD_CHECK:
		{
		    if(!response){return 1;}
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "** 通缉期间无法进入改装厂");
		    new vehicleid = GetPlayerVehicleID(playerid);
			SetPlayerTuneVehicle(playerid, vehicleid);
			return 1;
		}
		case DIALOG_VMOD_FIX:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if (!response)
			{
			    PlayerExitTuneVehicle(playerid, vehicleid);
				return 1;
			}
		    new Float:vhp, cost;
		    GetVehicleHealth(vehicleid, vhp);
			cost = floatround(1000.0 + VehData[vehicleid][vArmour] - vhp);
		    if(PlayerData[playerid][pCash] < cost)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不够修复载具");
				return PlayerExitTuneVehicle(playerid, vehicleid);
			}
			GiveMoney(playerid, -cost);
			RepairVehicle(vehicleid);
			SetVehicleHealth(vehicleid, 1000.0+VehData[vehicleid][vArmour]);
			VehData[vehicleid][vHealth] = 1000.0+VehData[vehicleid][vArmour];
			format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d修复了载具", cost);
			SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
		    return 1;
		}
		case DIALOG_VMOD_RETURN:
		{
		    return ShowPlayerVehicleModMenu(playerid);
		}
		case DIALOG_VMOD:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if (!response)
			{
			    PlayerExitTuneVehicle(playerid, vehicleid);
				return 1;
			}
		    switch(listitem)
			{
			    case 0:
			    {
			        SetGVarInt("EditVCol", 1, playerid);
			        SetGVarInt("EVColor1", VehData[vehicleid][vColor1], playerid);
			        SetGVarInt("EVColor2", VehData[vehicleid][vColor2], playerid);

					SendClientMessage(playerid, COLOR_WHITE, "提示: 使用左侧选项选择颜色");
			        PlayerPaintVehicle(playerid);
			    }
			    case 1:
			    {
			        new i, j, k;
			        for(j = sizeof(Paintjob); i < j; i++)
			        {
			            if(Paintjob[i][pjVeh] == VehData[vehicleid][vModel])
				        {
				            format(string, sizeof(string), "%s%s\t$%d\n", string, Paintjob[i][pjName], Paintjob[i][pjPrice]);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
			        }
			        if(k == 0) return ShowPlayerDialog(playerid, DIALOG_VMOD_RETURN, DIALOG_STYLE_MSGBOX, "改装厂", ""#TEXT_WHITE"没有任何适合你的载具的涂装", "确认", "");
			        format(string, sizeof(string), "涂装名称\t价钱\n%s", string);
			        ShowPlayerDialog(playerid, DIALOG_VMOD_PAINTJOB, DIALOG_STYLE_TABLIST_HEADERS, "改装厂", string, "选择", "返回");
			    }
			    case 2: ShowPlayerVehicleModeList(playerid, vehicleid, 99);
				case 3:
				{
					format(string, sizeof(string), "请选择要安装的涡轮增压引擎阶段,目前为第%d阶段\n第1阶段 $4,000\n第2阶段 $35,000\n第3阶段 $80,000\n第4阶段 $150,000\n第5阶段 $400,000", VehData[vehicleid][vTurbo]);
			        ShowPlayerDialog(playerid, DIALOG_VMOD_TURBO, DIALOG_STYLE_TABLIST_HEADERS, "改装厂", string, "选择", "返回");
				}
			    case 4:
			    {
			        if(!IsACar(vehicleid))
					{
					    SendClientMessage(playerid, COLOR_WHITE, "只有四轮载具能安装车底灯");
						return ShowPlayerVehicleModMenu(playerid);
					}
			        ShowPlayerDialog(playerid, DIALOG_VMOD_NEON, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择要安装的颜色\t\t价格\n蓝色\t\t$2,000\n红色\t\t$2,000\n绿色\t\t$2,000\n白色\t\t$2,000\n粉红色\t\t$2,000\n黄色\t\t$2,000", "选择", "离开");
			    }
			    case 5:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_SPEEDO, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择新的时速表的颜色\t\t价格\n红色\t\t$1,000\n黄色\t\t$1,000\n绿色\t\t$1,000\n蓝色\t\t$1,000\n紫色\t\t$1,000\n粉红色\t\t$1,000", "选择", "离开");
			    }
			    case 6:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_ARMOR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择要强化的部分\t说明\t价格\n防弹轮胎\t当轮胎被击破会迅速自动修补破洞\t$50,000\n车身韧性\t当载具生命在500以上时,车身遭撞击变形将会自动恢复\t$100,000\n超轻量装甲\t提升汽车总生命20%\t$10,000\n轻量装甲\t提升汽车总生命40%\t$25,000\n重装甲\t提升汽车总生命60%\t$40,000\n高压装甲\t提升汽车总生命80%\t$80,000\n超级装甲\t提升汽车总生命100%\t$150,000", "选择", "离开");
			    }
			    case 7:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_LOCK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择要安装的防盗系统\t说明\t价格\n通讯警报\t当有陌生人尝试发动引擎时将会向你发出消息警告\t$1,200\n方向盘锁\t多一道防护程序防止窃贼\t$4,600\n电子锁\t高科技防盗锁,防止窃贼使用一般工具偷窃\t$9,500\n数位密码锁\t密码锁,只要知道密码的人便能开锁与发动引擎,便于分享载具给固定人士\t$5,000", "选择", "离开");
			    }
			    case 8:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_PLATE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"改装厂", ""#TEXT_WHITE"请输入车牌内容\n"#TEXT_YELLOW"**长度不得超过16字元\n**需花费$4000", "确认", "取消");
			    }
			    case 9:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_SPECIAL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择以下项目\t价格\t说明\n计程车改装\t$40,000\t包括安装计程车顶灯以及跳表计数器\n警车改装\t$40,000\t安装警车灯,以及加装与警方资料库的连线", "选择", "离开");
			    }
			    case 10:
			    {
			        ShowPlayerDialog(playerid, DIALOG_VMOD_RESET, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择要解除的改装部分\n清除涂装\n清除外装\n卸载车底灯\n卸载防弹轮胎\n卸载车身韧性\n卸载装甲\n解除通讯警报\n解除额外防盗锁\n卸载特殊改装\n涡轮增压", "选择", "离开");
			    }
			}
			return 1;
		}
		case DIALOG_VMOD_PAINTJOB:
		{
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				vehicleid = GetPlayerVehicleID(playerid);
		    ChangeVehiclePaintjob(vehicleid, Paintjob[chosed][pjID]);
		    format(string, sizeof(string), ""#TEXT_WHITE"确认要花费$%d购买这个涂装吗?", Paintjob[chosed][pjPrice]);
		    ShowPlayerDialog(playerid, DIALOG_VMOD_PAINTJOB_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"改装厂", string, "确认", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_VMOD_PAINTJOB_CHECK:
		{
		    new vehicleid = GetPlayerVehicleID(playerid),
				chosed = GetGVarInt("DDecideID", playerid);
			if(!response)
		    {
		        ChangeVehiclePaintjob(vehicleid, VehData[vehicleid][vPaintjob]);
				return ShowPlayerVehicleModMenu(playerid);
			}
			if(VehData[vehicleid][vPaintjob] == Paintjob[chosed][pjID])
		    {
				SendClientMessage(playerid, COLOR_WHITE, "这个载具目前已经是这个涂装了");
				ChangeVehiclePaintjob(vehicleid, VehData[vehicleid][vPaintjob]);
				return ShowPlayerVehicleModMenu(playerid);
			}
			if(PlayerData[playerid][pCash] < Paintjob[chosed][pjPrice])
		    {
				SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不足无法购买这个涂装");
				ChangeVehiclePaintjob(vehicleid, VehData[vehicleid][vPaintjob]);
				return ShowPlayerVehicleModMenu(playerid);
			}
		    GiveMoney(playerid, -Paintjob[chosed][pjPrice]);
		    format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d为载具换上了新涂装", Paintjob[chosed][pjPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    PlayerPlaySound(playerid, 1134, 0.0, 0.0, 0.0);
		    VehData[vehicleid][vPaintjob] = Paintjob[chosed][pjID];
		    ShowPlayerVehicleModMenu(playerid);
		    return 1;
		}
		case DIALOG_VMOD_TUNE:
		{
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    new part = GetGVarInt("DListID", listitem*1000+playerid),
				vehicleid = GetPlayerVehicleID(playerid);
		    ShowPlayerVehicleModeList(playerid, vehicleid, part);
		    SetGVarInt("DDecideType", part, playerid);
		    return 1;
		}
		case DIALOG_VMOD_TUNE_LIST:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModeList(playerid, vehicleid, 99);}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(VehicleHaveComponent(vehicleid, VehTune[chosed][vtID]))
		    {
				SendClientMessage(playerid, COLOR_WHITE, "这个载具已经有安装这个部件了");
				return ShowPlayerVehicleModeList(playerid, vehicleid, GetGVarInt("DDecideType", playerid));
			}
		    if(PlayerData[playerid][pCash] < VehTune[chosed][vtPrice])
		    {
				SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不足无法购买这个外装");
				return ShowPlayerVehicleModeList(playerid, vehicleid, GetGVarInt("DDecideType", playerid));
			}
			AddVehicleComponent(vehicleid, VehTune[chosed][vtID]);
			format(string, sizeof(string), ""#TEXT_WHITE"确认要花费$%d购买这个%s吗?", VehTune[chosed][vtPrice], VehTune[chosed][vtName]);
		    ShowPlayerDialog(playerid, DIALOG_VMOD_TUNE_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"改装厂", string, "确认", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_VMOD_TUNE_CHECK:
		{
		    new vehicleid = GetPlayerVehicleID(playerid),
				chosed = GetGVarInt("DDecideID", playerid);
			if(!response)
		    {
		        RemoveVehicleComponent(vehicleid, VehTune[chosed][vtID]);
				return ShowPlayerVehicleModeList(playerid, vehicleid, GetGVarInt("DDecideType", playerid));
			}
		    GiveMoney(playerid, -VehTune[chosed][vtPrice]);
			Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了%s", PlayerData[playerid][pName], PlayerData[playerid][pID], VehTune[chosed][vtPrice], VehData[vehicleid][vID], VehTune[chosed][vtName]);
		    format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d安装了%s", VehTune[chosed][vtPrice], VehTune[chosed][vtName]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    PlayerPlaySound(playerid, 1133, 0.0, 0.0, 0.0);
		    SaveVehicleComponents(vehicleid);
		    ShowPlayerVehicleModeList(playerid, vehicleid, 99);
		    return 1;
		}
		case DIALOG_VMOD_TURBO:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
			new level = listitem+1, price,
				turbo = VehData[vehicleid][vTurbo];
			if(!IsACar(vehicleid) && !IsAMotorBike(vehicleid))
			{
				SendClientMessage(playerid, COLOR_WHITE, "这个载具不能安装这个改装");
				return ShowPlayerVehicleModMenu(playerid);
			}
			if(turbo >= level)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个阶段的改装了");
				return ShowPlayerVehicleModMenu(playerid);
			}
			if(turbo+1 != level)
			{
				SendClientMessage(playerid, COLOR_WHITE, "这个载具目前还不能安装这个阶级的改装");
				return ShowPlayerVehicleModMenu(playerid);
			}
			switch(level)
			{
				case 1: price = 4000;
				case 2: price = 35000;
				case 3: price = 80000;
				case 4: price = 150000;
				case 5: price = 400000;
			}
			if(PlayerData[playerid][pCash] < price)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不足,无法安装这个改装");
				return ShowPlayerVehicleModMenu(playerid);
			}
			GiveMoney(playerid, -price);
			VehData[vehicleid][vTurbo] = level;
			Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了第%d阶段涡轮增压引擎", PlayerData[playerid][pName], PlayerData[playerid][pID], price, VehData[vehicleid][vID], level);
		    format(string, sizeof(string), ""#TEXT_WHITE"你花费了$%d安装了第%d阶段涡轮增压引擎", price, level);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    PlayerPlaySound(playerid, 1133, 0.0, 0.0, 0.0);
			ShowPlayerVehicleModMenu(playerid);
			return 1;
		}
		case DIALOG_VMOD_SPECIAL:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    switch(listitem)
		    {
		        case 0:
				{
					if(IsATaxi(vehicleid) || IsAPoliceCar(vehicleid) || VehList[VehData[vehicleid][vModel]-400][vAttachZ] == -1.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "这台车不能安装这个项目");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					if(PlayerData[playerid][pCash] < 40000)
				    {
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装这个项目");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					return ShowPlayerDialog(playerid, DIALOG_VMOD_TAXI, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "请选择车顶招牌款式\n黄底黑字\n黑底白字\n白底黑字\n黑底黄字", "选择", "离开");
				}
				case 1:
				{
				    if(PlayerData[playerid][pDepartment] != DEPT_POLICE && PlayerData[playerid][pDepartment] != DEPT_GOVERNMENT)
				    {
					    SendClientMessage(playerid, COLOR_WHITE, "你无法安装这个项目");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					if(IsATaxi(vehicleid) || IsAPoliceCar(vehicleid) || VehList[VehData[vehicleid][vModel]-400][vAttachZ] == -1.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "这台车不能安装这个项目");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					if(PlayerData[playerid][pCash] < 40000)
				    {
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装这个项目");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    GiveMoney(playerid, -40000);
				    Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了警车改装", PlayerData[playerid][pName], PlayerData[playerid][pID], 40000, VehData[vehicleid][vID]);
				    Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了警车改装", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);

					VehData[vehicleid][vPolice] = 1;
				    SetVehicleAttachment(vehicleid, ATTACH_SIREN);
				    format(string, sizeof(string), ""#TEXT_WHITE"完成: 车辆的警车改装已安装完成");
				}
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
        case DIALOG_VMOD_TAXI:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    if(IsATaxi(vehicleid) || IsAPoliceCar(vehicleid) || VehList[VehData[vehicleid][vModel]-400][vAttachZ] == -1.0)
			{
				SendClientMessage(playerid, COLOR_WHITE, "这台车不能安装这个项目");
				return ShowPlayerVehicleModMenu(playerid);
			}
			if(PlayerData[playerid][pCash] < 40000)
   			{
			   SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装这个项目");
			   return ShowPlayerVehicleModMenu(playerid);
			}
		    switch(listitem)
		    {
		        case 0: VehData[vehicleid][vTaxi] = 1;
		        case 1: VehData[vehicleid][vTaxi] = 2;
		        case 2: VehData[vehicleid][vTaxi] = 3;
		        case 3: VehData[vehicleid][vTaxi] = 4;
			}
			GiveMoney(playerid, -40000);
			Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了计程车改装", PlayerData[playerid][pName], PlayerData[playerid][pID], 40000, VehData[vehicleid][vID]);
			Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了计程车改装", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
			SetVehicleAttachment(vehicleid, ATTACH_TAXI);
			format(string, sizeof(string), ""#TEXT_WHITE"完成: 车辆的计程车改装已安装完成");
			if(!PlayerHaveItem(playerid, 2, 202))
			{
				SendClientMessage(playerid, COLOR_WHITE, " ** 你获得了计程车司机造型,请至背包查看");
				GivePlayerItem(playerid, 2, 29, 1);
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
		}
		case DIALOG_VMOD_RESET:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    switch(listitem)
		    {
		        case 0:
				{
				    if(VehData[vehicleid][vPaintjob] == 3)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有涂装可以清除");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					ChangeVehiclePaintjob(vehicleid, 3);
					ChangeVehicleColor(vehicleid, 1, 1);
					VehData[vehicleid][vPaintjob] = 3;
					VehData[vehicleid][vColor1] = VehData[vehicleid][vColor2] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你清除了你车身的涂装");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)清除了车身的涂装", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
		        case 1:
		        {
					ClearVehicleComponents(vehicleid);
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你清除了你车身的外装");
				}
		        case 2:
		        {
		            if(VehData[vehicleid][vNeon] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装车底灯");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					RemoveVehicleAttachment(vehicleid, ATTACH_NEON);
					VehData[vehicleid][vNeon] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了车底灯");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了车底灯", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
		        case 3:
		        {
		            if(VehData[vehicleid][vTireUp] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装防弹轮胎");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vTireUp] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了防弹轮胎");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了防弹轮胎", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
		        case 4:
		        {
		            if(VehData[vehicleid][vBodyUp] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装车身韧性");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vBodyUp] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了车身韧性");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了车身韧性", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
		        case 5:
		        {
		            if(VehData[vehicleid][vArmour] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装任何装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					new Float:vhp;
					VehData[vehicleid][vArmour] = 0;
					GetVehicleHealth(vehicleid, vhp);
					if(vhp > 1000.0) {SetVehicleHealth(vehicleid, 1000.0);}
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了你车上的装甲");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
				case 6:
		        {
		            if(VehData[vehicleid][vLockAlarm] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装通讯警报");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vLockAlarm] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了通讯警报");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了通讯警报", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
				case 7:
		        {
		            if(VehData[vehicleid][vLockLv1] == 0 && VehData[vehicleid][vLockLv2] == 0 && VehData[vehicleid][vLockLv3] == 0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装任何防盗锁");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vLockLv1] = VehData[vehicleid][vLockLv2] = VehData[vehicleid][vLockLv3] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了你车上的所有防盗锁");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了所有防盗锁", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
				case 8:
				{
				    if(VehData[vehicleid][vTaxi] != 0)
				    {
				        if(GetGVarInt("TaxiOn", playerid) != 0)
						{
						    SendClientMessage(playerid, COLOR_WHITE, "你必须先结束计程车的营运才能卸在这个改装");
						    return ShowPlayerVehicleModMenu(playerid);
						}
				        VehData[vehicleid][vTaxi] = 0;
				        RemoveVehicleAttachment(vehicleid, ATTACH_TAXI);
				    }
				    else if(VehData[vehicleid][vPolice] == 1)
				    {
				        VehData[vehicleid][vPolice] = 0;
				        RemoveVehicleAttachment(vehicleid, ATTACH_SIREN);
				    }
		            else
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你没有安装任何特殊改装");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了你车上的特殊改装");
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)卸载了特殊改装", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
				}
				case 9:
		        {
					VehData[vehicleid][vTurbo] = 0;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你卸载了车上的涡轮增压引擎");
				}
		    }
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
		case DIALOG_VMOD_NEON:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    if(PlayerData[playerid][pCash] < 2000)
			{
			    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够改装车底灯");
				return ShowPlayerVehicleModMenu(playerid);
			}
		    switch(listitem)
		    {
		        case 0:
				{
				    if(VehData[vehicleid][vNeon] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了蓝色的车底灯");
				}
		        case 1:
		        {
		            if(VehData[vehicleid][vNeon] == 2)
		            {
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 2;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了红色的车底灯");
				}
		        case 2:
		        {
		            if(VehData[vehicleid][vNeon] == 3)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 3;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了绿色的车底灯");
				}
		        case 3:
		        {
		            if(VehData[vehicleid][vNeon] == 4)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 4;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了白色的车底灯");
				}
		        case 4:
		        {
		            if(VehData[vehicleid][vNeon] == 5)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 5;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了粉红色的车底灯");
				}
		        case 5:
		        {
		            if(VehData[vehicleid][vNeon] == 6)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个车底灯了");
						return ShowPlayerVehicleModMenu(playerid);
					}
					VehData[vehicleid][vNeon] = 6;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了黄色的车底灯");
				}
		    }
		    GiveMoney(playerid, -2000);
		    Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了车底灯", PlayerData[playerid][pName], PlayerData[playerid][pID], 2000, VehData[vehicleid][vID]);
		    Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了车底灯", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    SetVehicleAttachment(vehicleid, ATTACH_NEON);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
        case DIALOG_VMOD_SPEEDO:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    if(PlayerData[playerid][pCash] < 1000)
			{
			    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够更换时速表");
			    return ShowPlayerVehicleModMenu(playerid);
   	        }
		    switch(listitem)
		    {
		        case 0:
				{
				    if(VehData[vehicleid][vSpeedo] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了红色的时速表");
				}
		        case 1:
				{
				    if(VehData[vehicleid][vSpeedo] == 2)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 2;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了黄色的时速表");
				}
				case 2:
				{
				    if(VehData[vehicleid][vSpeedo] == 3)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 3;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了绿色的时速表");
				}
				case 3:
				{
				    if(VehData[vehicleid][vSpeedo] == 4)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 4;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了蓝色的时速表");
				}
				case 4:
				{
				    if(VehData[vehicleid][vSpeedo] == 5)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 5;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了紫色的时速表");
				}
				case 5:
				{
				    if(VehData[vehicleid][vSpeedo] == 6)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经安装这个颜色了");
					    return ShowPlayerVehicleModMenu(playerid);
		   	        }
					VehData[vehicleid][vSpeedo] = 6;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了粉红色的时速表");
				}
		    }
		    GiveMoney(playerid, -1000);
		    Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了时速表", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000, VehData[vehicleid][vID]);
		    Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了时速表", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
        case DIALOG_VMOD_ARMOR:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    switch(listitem)
		    {
		        case 0:
				{
				    if(VehData[vehicleid][vTireUp] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 50000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -50000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了防弹轮胎", PlayerData[playerid][pName], PlayerData[playerid][pID], 50000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了防弹轮胎", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vTireUp] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了防弹轮胎");
				}
		        case 1:
				{
				    if(VehData[vehicleid][vBodyUp] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 100000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -100000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了车身韧性", PlayerData[playerid][pName], PlayerData[playerid][pID], 100000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了车身韧性", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vBodyUp] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了车身韧性");
				}
		        case 2:
				{
				    if(VehData[vehicleid][vArmour] >= 200.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 10000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -10000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了超轻量装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], 10000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了超轻量装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vArmour] = 200.0;
					VehData[vehicleid][vHealth] = VehData[vehicleid][vHealth] + VehData[vehicleid][vArmour];
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了升级了超轻量装甲");
					SetVehicleHealth(vehicleid, 1200.0);
				}
    			case 3:
				{
				    if(VehData[vehicleid][vArmour] >= 400.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 25000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -25000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了轻量装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], 25000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了轻量装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vArmour] = 400.0;
					VehData[vehicleid][vHealth] = VehData[vehicleid][vHealth] + VehData[vehicleid][vArmour];
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了升级了轻量装甲");
					SetVehicleHealth(vehicleid, 1400.0);
				}
				case 4:
				{
				    if(VehData[vehicleid][vArmour] >= 600.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 40000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -40000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了重装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], 40000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了重装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vArmour] = 600.0;
					VehData[vehicleid][vHealth] = VehData[vehicleid][vHealth] + VehData[vehicleid][vArmour];
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了升级了重装甲");
					SetVehicleHealth(vehicleid, 1600.0);
				}
				case 5:
				{
				    if(VehData[vehicleid][vArmour] >= 800.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 80000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -80000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了高压装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], 80000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了高压装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vArmour] = 800.0;
					VehData[vehicleid][vHealth] = VehData[vehicleid][vHealth] + VehData[vehicleid][vArmour];
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了升级了高压装甲");
					SetVehicleHealth(vehicleid, 1800.0);
				}
				case 6:
				{
				    if(VehData[vehicleid][vArmour] >= 1000.0)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你已经不需要安装这个装甲了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 150000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够升级装甲");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -150000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了超级装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], 150000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了超级装甲", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vArmour] = 1000.0;
					VehData[vehicleid][vHealth] = VehData[vehicleid][vHealth] + VehData[vehicleid][vArmour];
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了升级了超级装甲");
					SetVehicleHealth(vehicleid, 2000.0);
				}
		    }
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
        case DIALOG_VMOD_LOCK:
		{
		    new vehicleid = GetPlayerVehicleID(playerid);
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    switch(listitem)
		    {
		        case 0:
				{
				    if(VehData[vehicleid][vLockAlarm] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你安装过通讯警报了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 1200)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装通讯警报");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -1200);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了通讯警报", PlayerData[playerid][pName], PlayerData[playerid][pID], 10000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了通讯警报", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vLockAlarm] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了通讯警报");
				}
		        case 1:
				{
				    if(VehData[vehicleid][vLockLv1] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你安装过方向盘锁了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 4600)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装方向盘锁");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -4600);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了方向盘锁", PlayerData[playerid][pName], PlayerData[playerid][pID], 4600, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了方向盘锁", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vLockLv1] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了方向盘锁");
				}
		        case 2:
				{
				    if(VehData[vehicleid][vLockLv2] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你安装过电子锁了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 9500)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装电子锁");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -9500);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了电子锁", PlayerData[playerid][pName], PlayerData[playerid][pID], 9500, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了电子锁", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vLockLv2] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了电子锁");
				}
				case 3:
				{
				    if(VehData[vehicleid][vLockLv3] == 1)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你安装过数位密码锁了");
					    return ShowPlayerVehicleModMenu(playerid);
					}
				    if(PlayerData[playerid][pCash] < 5000)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够安装密码锁");
					    return ShowPlayerVehicleModMenu(playerid);
					}
					GiveMoney(playerid, -5000);
					Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了数位密码锁", PlayerData[playerid][pName], PlayerData[playerid][pID], 5000, VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)为载具%s(%d)安装了数位密码锁", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vLockLv3] = 1;
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你安装了数位密码锁,离开这里后将会要求您设置密码");
					SetGVarInt("SetVehPass", 1, playerid);
				}
		    }
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
        }
        case DIALOG_VMOD_PLATE:
		{
			new vehicleid = GetPlayerVehicleID(playerid), i, j;
		    if(!response){return ShowPlayerVehicleModMenu(playerid);}
		    if(PlayerData[playerid][pCash] < 4000)
			{
			    SendClientMessage(playerid, COLOR_WHITE, "你身上的钱不够自订车牌");
			    return ShowPlayerVehicleModMenu(playerid);
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) || strlen(inputtext) > 16)
			{
				return ShowPlayerDialog(playerid, DIALOG_VMOD_PLATE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"改装厂", ""#TEXT_WHITE"你的长度不符合标准或是有无法使用的字元\n"#TEXT_YELLOW"**长度不得超过16字元\n**需花费$4000", "确认", "取消");
			}
			for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
    		{
	            if(strcmp(inputtext, VehData[i][vPlate]) == 0 && !isnull(VehData[i][vPlate]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_VMOD_PLATE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"改装厂", ""#TEXT_WHITE"这个车牌已经被使用了,请重新输入\n"#TEXT_YELLOW"**长度不得超过16字元\n**需花费$4000", "确认", "取消");
				}
			}
			GiveMoney(playerid, -4000);
			Log(moneylog, INFO, "%s(%d)花费了$%d为载具(%d)安装了自订车牌", PlayerData[playerid][pName], PlayerData[playerid][pID], 4000, VehData[vehicleid][vID]);
			Log(vehlog, INFO, "%s(%d)为载具%s(%d)更改了车牌为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], inputtext);
			mysql_format(DEFAULT_SESSION, VehData[vehicleid][vPlate], 32, "%s", inputtext);
			SetVehiclePlate(vehicleid, VehData[vehicleid][vPlate]);
			format(string, sizeof(string), ""#TEXT_WHITE"完成: 你将车牌设定为 %s,将会在离开本场后生效", inputtext);
			SendClientMessage(playerid, COLOR_WHITE, string);
		    ShowPlayerVehicleModMenu(playerid);
			return 1;
		}
		case DIALOG_SETPLAYER:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setname[MAX_PLAYER_NAME];
		    GetPlayerName(setto, setname, sizeof(setname));
		    SetGVarInt("DDecideID", listitem, playerid);
		    switch(listitem)
		    {
		        case 0: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的等级为:", setname);
		        case 1: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的现金为:", setname);
		        case 2: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的存款为:", setname);
		        case 3: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的经验值为:", setname);
		        case 4: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的饥饿值为:", setname);
		        case 5: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的体力为:", setname);
		        case 6: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的造型为:", setname);
		        case 7: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的工作为:", setname);
		        case 8: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的背包容量为:", setname);
		        case 9: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的通缉值为:", setname);
		        case 10: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的悬赏为:", setname);
		    }
		    ShowPlayerDialog(playerid, DIALOG_SETPLAYER_AMOUNT, DIALOG_STYLE_INPUT, "设定资料", string, "确认", "取消");
		    return 1;

		}
		case DIALOG_SETPLAYER_AMOUNT:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setid =  GetGVarInt("DDecideID", playerid), setname[MAX_PLAYER_NAME], value = strval(inputtext);
		    GetPlayerName(setto, setname, sizeof(setname));
		    switch(setid)
		    {
		        case 0:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 等级不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的等级设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pLevel] = value;
					PlayerData[setto][pExp] = ExpList[value][expAmount];
				}
				case 1:
				{
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的现金设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pCash] = value;
					Log(moneylog, INFO, "%s(%d)的现金被管理员%s(%d)设定为$%d", PlayerData[setto][pName], PlayerData[setto][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], value);
				}
				case 2:
				{
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的存款设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pBank] = value;
					Log(moneylog, INFO, "%s(%d)的存款被管理员%s(%d)设定为$%d", PlayerData[setto][pName], PlayerData[setto][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], value);
				}
				case 3:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 经验值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的经验值设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pExp] = value;
				}
				case 4:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 饥饿值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的饥饿值设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pHunger] = float(value);
				}
				case 5:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 体力不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的体力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pStamina] = float(value);
				}
				case 6:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 造型不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的造型设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pSkin] = value;
					SetPlayerSkin_Fix(setto, value);
				}
				case 7:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 工作不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的工作设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pJob] = value;
					LimitData[setto][plContract] = 0;
				}
				case 8:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 背包容量不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的背包容量设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerData[setto][pBag] = value;
				}
				case 9:
				{
				    if(value < 0 || value > 6) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 通缉值只能介于0~6");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的通缉值设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerWanted(setto, value, "管理员设定");
				}
				case 10:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 悬赏赏金不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的悬赏赏金设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					if(value == 0) PlayerData[setto][pBounty] = PlayerData[setto][pBountyTime] = 0;
					else
					{
						PlayerData[setto][pBounty] = value;
						PlayerData[setto][pBountyTime] = 7200;
					}
				}
		    }
		    return 1;
		}
		case DIALOG_SETPOINT:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setname[MAX_PLAYER_NAME];
		    GetPlayerName(setto, setname, sizeof(setname));
		    SetGVarInt("DDecideID", listitem, playerid);
		    switch(listitem)
		    {
		        case 0: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的技能点为:", setname);
		        case 1: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的机械知识为:", setname);
		        case 2: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的信息知识为:", setname);
		        case 3: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的研发知识为:", setname);
		        case 4: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的医学知识为:", setname);
		        case 5: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的稀有知识为:", setname);
		        case 6: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的洞察知识为:", setname);
		        case 7: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的射击练习为:", setname);
		        case 8: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的健身练习为:", setname);
		        case 9: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的禅修练习为:", setname);
		        case 10: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的体力练习为:", setname);
		    }
		    ShowPlayerDialog(playerid, DIALOG_SETPOINT_AMOUNT, DIALOG_STYLE_INPUT, "设定点数", string, "确认", "取消");
		    return 1;

		}
		case DIALOG_SETPOINT_AMOUNT:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setid =  GetGVarInt("DDecideID", playerid), setname[MAX_PLAYER_NAME], value = strval(inputtext);
		    GetPlayerName(setto, setname, sizeof(setname));
		    switch(setid)
		    {
		        case 0:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的技能点设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 1, value);
				}
				case 1:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的机械知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 2, value);
				}
				case 2:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的信息知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 3, value);
				}
				case 3:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的研发知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 4, value);
				}
				case 4:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的医疗知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 5, value);
				}
				case 5:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的稀有知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 6, value);
				}
				case 6:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的洞察知识设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 7, value);
				}
				case 7:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的射击练习设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 8, value);
				}
				case 8:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的健身练习设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 9, value);
				}
				case 9:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的禅修练习设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 10, value);
				}
				case 10:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的体力练习设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetPlayerPoint(setto, 11, value);
				}
		    }
		    return 1;
		}
		case DIALOG_SETSKILL:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setname[MAX_PLAYER_NAME];
		    GetPlayerName(setto, setname, sizeof(setname));
		    SetGVarInt("DDecideID", listitem, playerid);
		    switch(listitem)
		    {
		        case 0: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的修车能力为:", setname);
		        case 1: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的开锁能力为:", setname);
		        case 2: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的侵入能力为:", setname);
		        case 3: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的制枪能力为:", setname);
		        case 4: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的爆击能力为:", setname);
		        case 5: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的潜行能力为:", setname);
		        case 6: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的耐打能力为:", setname);
		        case 7: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的治疗能力为:", setname);
		        case 8: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的制药能力为:", setname);
		        case 9: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的吸血能力为:", setname);
		        case 10: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的休养为:", setname);
		        case 11: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的搜索能力为:", setname);
		        case 12: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的观察能力为:", setname);
		        case 13: format(string, sizeof(string), ""#TEXT_WHITE"设定玩家 %s 的THE WORLD!为:", setname);
		    }
		    ShowPlayerDialog(playerid, DIALOG_SETSKILL_AMOUNT, DIALOG_STYLE_INPUT, "设定技能", string, "确认", "取消");
		    return 1;

		}
		case DIALOG_SETSKILL_AMOUNT:
		{
		    if (!response) return 1;
		    new setto = GetGVarInt("DDecidePlayer", playerid), setid =  GetGVarInt("DDecideID", playerid), setname[MAX_PLAYER_NAME], value = strval(inputtext);
		    GetPlayerName(setto, setname, sizeof(setname));
		    switch(setid)
		    {
		        case 0:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的修车能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psFixVeh] = value;
				}
				case 1:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的开锁能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psUnlock] = value;
				}
				case 2:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的侵入能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psHack] = value;
				}
				case 3:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的制枪能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psArm] = value;
				}
				case 4:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的爆击能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psCHit] = value;
				}
				case 5:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的潜行能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psSneak] = value;
				}
				case 6:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的耐打能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psDef] = value;
				}
				case 7:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的治疗能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psHeal] = value;
				}
				case 8:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的制药能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psDrug] = value;
				}
				case 9:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的吸血能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psLeech] = value;
				}
				case 10:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的休养设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psRecover] = value;
				}
				case 11:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的搜索能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psSearch] = value;
				}
				case 12:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的观察能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psObserve] = value;
				}
				case 13:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的THE WORLD!设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psTimeStop] = value;
				}
				case 14:
				{
				    if(value < 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 值不得设定小于0");}
					format(string, sizeof(string), ""#TEXT_LIGHTGREEN"** 你已将玩家 %s 的耐久能力设定为"#TEXT_YELLOW"%d", setname, value);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SkillData[setto][psStamina] = value;
				}
		    }
		    return 1;
		}
		case DIALOG_RENTCAR:
		{
		    if (!response) return RemovePlayerFromVehicle_Fix(playerid);

		    new vehicleid = GetPlayerVehicleID(playerid),
		        rental = VehData[vehicleid][vPrice];
		    if(PlayerData[playerid][pCash] < rental)
		    {
			    SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的钱不够租车");
			    return RemovePlayerFromVehicle_Fix(playerid);
			}
		    if(GetGVarInt("RentCar", playerid) != 0)
		    {
			    SendClientMessage(playerid, COLOR_WHITE, "** 你租借了另一个载具,失去了上一个租借载具的使用权");
			}
		    GiveMoney(playerid, -rental);
		    Log(moneylog, INFO, "%s(%d)花费了$%d租借载具(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], rental, VehData[vehicleid][vID]);
		    SetGVarInt("RentCar", vehicleid, playerid);
			format(string, sizeof(string), ""#TEXT_WHITE"交易完成\n一共花费"#TEXT_YELLOW"$%d"#TEXT_WHITE"\n载具编号:"#TEXT_YELLOW"%d\n车牌:%s\n\n"#TEXT_WHITE"这个载具直到你退租或是离线以前都将会是你的租用车", rental, vehicleid, VehData[vehicleid][vPlate]);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"租借完成", string, "确定", "");
			return 1;
		}
		case DIALOG_BUYCAR:
		{
		    if (!response) return RemovePlayerFromVehicle_Fix(playerid);
		    new vehicleid = GetGVarInt("BuyingCar", playerid),
		        vprice = VehData[vehicleid][vPrice], usedticket;
		    if(VehData[vehicleid][vOwned] != 0)
			{
			    SendClientMessage(playerid, COLOR_WHITE, "错误: 这载具已经是别人的了");
			    return RemovePlayerFromVehicle_Fix(playerid);
			}
			if(GetGVarInt("CSBuyer", vehicleid) > 0 && GetGVarInt("CSBuyer", vehicleid) != PlayerData[playerid][pID])
			{
			    SendClientMessage(playerid, COLOR_WHITE, "错误: 这载具不是你订购的");
			    return RemovePlayerFromVehicle_Fix(playerid);
			}
			if(GetGVarInt("UsingVTicket", playerid) > 0)
			{
			    usedticket = GetGVarInt("UsingVTicket", playerid);
			    vprice = 0;
			    DeleteGVar("UsingVTicket", playerid);
			}
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(IsATrailer(vehicleid))
		            {
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法购买货柜给自己");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(PlayerData[playerid][pCash] < vprice)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金购买这个载具");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(!PlayerCanBuyVehicle(playerid))
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有办法再买更多载具了");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					GiveMoney(playerid, -vprice);
					Log(moneylog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给自己", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					Log(vehlog, INFO, "%s(%d)购买了新载具%s(%d)给自己", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
					VehData[vehicleid][vOwned] = 1;
					VehData[vehicleid][vOwner] = PlayerData[playerid][pID];
					VehData[vehicleid][vDate] = getdate();
				}
				case 1:
				{
				    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
					if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comVehR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID])
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为企业购买载具");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(CompanyHaveVehicle(PlayerData[playerid][pCompany]) >= MAX_COMVEHS)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业无法再拥有更多载具了");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(PlayerData[playerid][pCash] < vprice && (GetPlayerCompanyRank(playerid) == CompanyData[comid][comFundR] || CompanyData[comid][comCEO] == PlayerData[playerid][pID]))
					{
					    if(CompanyData[comid][comFund] < vprice)
					    {
						    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金且企业也没有足够的资金购买这个载具");
						    return RemovePlayerFromVehicle_Fix(playerid);
						}
					    format(string, sizeof(string), "<<企业>> %s 花费了企业资金 $%d 为企业购买了新载具 %s", PlayerData[playerid][pName], vprice, GetVehicleName(VehData[vehicleid][vModel]));
					    SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
					    Log(companylog, INFO, "%s(%d)花费了$%d的企业资金购买了载具%s(%d)给企业(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
					    CompanyData[comid][comFund] -= vprice;
					}
					else
					{
					    if(PlayerData[playerid][pCash] < vprice)
					    {
						    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金购买这个载具");
						    return RemovePlayerFromVehicle_Fix(playerid);
						}
					    format(string, sizeof(string), "<<企业>> %s 为企业购买了新载具 %s", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
					    GiveMoney(playerid, -vprice);
					    Log(moneylog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给企业(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
					    Log(companylog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给企业(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
					}
					Log(vehlog, INFO, "%s(%d)购买了新载具%s(%d)给企业(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pCompany]);
					VehData[vehicleid][vOwned] = 1;
					VehData[vehicleid][vType] = VTYPE_COMPANY;
					VehData[vehicleid][vOwner] = PlayerData[playerid][pCompany];
				}
				case 2:
				{
				    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
					if(GetPlayerCompanyRank(playerid) != GangData[gangid][gVehR] && GangData[gangid][gBoss] != PlayerData[playerid][pID])
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为帮会购买载具");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(GangHaveVehicle(PlayerData[playerid][pGang]) >= MAX_GANGVEHS)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法再拥有更多载具了");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(PlayerData[playerid][pCash] < vprice && (GetPlayerGangRank(playerid) == GangData[gangid][gFundR] || GangData[gangid][gBoss] == PlayerData[playerid][pID]))
					{
					    if(GangData[gangid][gFund] < vprice)
					    {
						    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金且帮会也没有足够的资金购买这个载具");
						    return RemovePlayerFromVehicle_Fix(playerid);
						}
					    format(string, sizeof(string), "<<帮会>> %s 花费了帮会资金 $%d 为帮会购买了新载具 %s", PlayerData[playerid][pName], vprice, GetVehicleName(VehData[vehicleid][vModel]));
					    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
					    Log(ganglog, INFO, "%s(%d)花费了$%d的帮会资金购买了载具%s(%d)给帮会(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
					    GangData[gangid][gFund] -= vprice;
					}
					else
					{
					    if(PlayerData[playerid][pCash] < vprice)
					    {
						    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金购买这个载具");
						    return RemovePlayerFromVehicle_Fix(playerid);
						}
					    format(string, sizeof(string), "<<帮会>> %s 为帮会购买了新载具 %s", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
					    GiveMoney(playerid, -vprice);
					    Log(moneylog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给帮会(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
					    Log(ganglog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给帮会(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
					}
					Log(vehlog, INFO, "%s(%d)购买了新载具%s(%d)给帮会(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pGang]);
					VehData[vehicleid][vOwned] = 1;
					VehData[vehicleid][vType] = VTYPE_GANG;
					VehData[vehicleid][vOwner] = PlayerData[playerid][pGang];
				}
				case 3:
				{
				    new dpid = PlayerData[playerid][pDepartment];
					if(PlayerData[playerid][pDeptRank] < 3)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为所属部门购买载具");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					if(PlayerData[playerid][pCash] < vprice)
					{
					    SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有足够的现金购买这个载具");
					    return RemovePlayerFromVehicle_Fix(playerid);
					}
					format(string, sizeof(string), "<<部门>> %s 为部门购买了新载具 %s", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]));
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
					GiveMoney(playerid, -vprice);
					Log(moneylog, INFO, "%s(%d)花费了$%d购买了载具%s(%d)给所属部门(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], vprice, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], dpid);
                    Log(vehlog, INFO, "%s(%d)购买了新载具%s(%d)给部门(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], dpid);
					VehData[vehicleid][vOwned] = 1;
					VehData[vehicleid][vType] = VTYPE_DEPARTMENT;
					VehData[vehicleid][vOwner] = dpid;
				}
			}
			if(usedticket > 0)
			{
			    GivePlayerItem(playerid, ITEM_USE, usedticket, -1);
			    VehData[vehicleid][vPrice] = 0;
			    format(string, sizeof(string), ""#TEXT_WHITE"交易完成\n你使用了%s兑换了 %s\n载具编号:"#TEXT_YELLOW"%d\n牌号:%s\n\n"#TEXT_WHITE"请记得更改载具重生位置", ItemsList_USE[usedticket][iuName], GetVehicleName(VehData[vehicleid][vModel]), vehicleid, VehData[vehicleid][vPlate]);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"完成购买", string, "确定", "");
			}
			else
			{
				format(string, sizeof(string), ""#TEXT_WHITE"交易完成\n一共花费"#TEXT_YELLOW"$%d"#TEXT_WHITE"\n载具编号:"#TEXT_YELLOW"%d\n牌号:%s\n\n"#TEXT_WHITE"请记得更改载具重生位置", vprice, vehicleid, VehData[vehicleid][vPlate]);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"完成购买", string, "确定", "");
			}
			if(GetGVarInt("CSShop", vehicleid) > 0)
			{
				ClearSpot(vehicleid, GetGVarInt("CSShop", vehicleid), GetGVarInt("CSSpawn", vehicleid), playerid);
				DeleteGVar("CSShop", vehicleid);
				DeleteGVar("CSBuyer", vehicleid);
				DeleteGVar("CSSpawn", vehicleid);
			}
			orm_save(VehData[vehicleid][ORM_ID]);
			RecordData[playerid][prBuyVeh] ++;

      		if(GetGVarInt("DealerCar", vehicleid) == 1)
		    {
		        new dealer = GetGVarInt("CarDealer", vehicleid);
		        if(dealer != INVALID_PLAYER_ID)
		        {
		            new exp = 2050;
		            DeleteGVar("SellCar", dealer);
					DeleteGVar("CarSelling", dealer);
		            LimitData[dealer][plPayCheck] += vprice/10;
		            LimitData[dealer][plCarSellModel] =
		            LimitData[dealer][plCarSellPrice] = 0;
		            format(string, sizeof(string), "** 你卖出了你正在销售的车,"#TEXT_FADEGREEN"佣金$%d"#TEXT_WHITE"将会在整点汇入你的户头,", vprice/10);
		            SendClientMessage(dealer, COLOR_WHITE, string);
		            GivePlayerExp(playerid, exp, EXP_JOB);
		            RecordData[dealer][prCarSellJob] ++;
		            ShowPTD(dealer, 1, 1);
		        }
		    	DeleteGVar("DealerCar", vehicleid);
				DeleteGVar("CarDealer", vehicleid);
			}
			return 1;
		}
		case DIALOG_BAR:
		{
		    if (!response) return 1;
		    new winetype, value;
			switch(listitem)
			{
			    case 0,1: {value = 150, winetype = 1;}
			    case 2..5: {value = 170, winetype = 2;}
			    case 6: {value = 80, winetype = 0;}
			}
            if(GetPlayerDrunkLevel(playerid) > 20000)
			{
				return SendRangeMessage(5.0, playerid, "服务生 说: 为了你好,还是别再喝了吧", COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1);
			}
			if(PlayerData[playerid][pCash] < value)
			{
				return SendRangeMessage(5.0, playerid, "服务生 说: 不好意思,你钱不够呢", COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1);
			}
			switch(winetype)
			{
			    case 1: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
			    case 2: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_WINE);
			    case 0: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_SPRUNK);
			}
			GiveMoney(playerid, -value);
			Log(moneylog, INFO, "%s(%d)花费了$%d于酒吧购买饮品", PlayerData[playerid][pName], PlayerData[playerid][pID], value);
			DeleteGVar("Drinking", playerid);
			SendClientMessage(playerid, COLOR_NURSEPINK, "** 按 鼠标左键 开始享用饮品");
			//啤酒\t$150\n红酒\t$150\n伏特加\t$170\n龙舌兰\t$170\n威士忌\t$170\n白兰地\t$170\n汽水\t$80
			return 1;
		}
		case DIALOG_STRIPER:
		{
		    new actorid, paid;
		    actorid = GetGVarInt("TargetStriper", playerid);
		    DeleteGVar("TargetStriper", playerid);
		    if (!response) return 1;
		    if(PlayerData[playerid][pCash] < 500)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "你没钱能挥霍");
			}
			paid = GetGVarInt("StripPaid", actorid);
			GiveMoney(playerid, -500);
			Log(moneylog, INFO, "%s(%d)花费了$%d给脱衣舞娘", PlayerData[playerid][pName], PlayerData[playerid][pID], 500);
			format(string, sizeof(string), "** %s 对脱衣舞娘撒了一把钞票 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			ApplyAnimationEx(playerid, "strip", "pun_cash", 4.1, 0, 0, 0, 0, 0, 1);
            SetGVarInt("StripPaid", paid + 1, actorid);
			switch(paid)
			{
				case 0 .. 3:
				{
				    rand = random(7);
				    switch(rand)
				    {
				        case 0:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_a", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 1:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_b", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 2:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_c", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 3:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_d", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 4:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_e", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 5:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_f", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
						case 6:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "strip_g", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 1500, 0, "i", actorid);
						}
					}
				}
				case 4 .. 6:
				{
					ApplyDynamicActorAnimation(actorid, "strip", "str_a2b", 4.1, 1, 0, 0, 0, 0);
					SetTimerEx("StripStop", 3500, 0, "i", actorid);
				}
				case 7:
				{
     				ApplyDynamicActorAnimation(actorid, "strip", "str_b2c", 4.1, 1, 0, 0, 0, 0);
					SetTimerEx("StripStop", 4500, 0, "i", actorid);
				}
				default:
				{
					rand = random(2);
					switch(rand)
					{
						case 0:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "str_c1", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 6000, 0, "i", actorid);
						}
						case 1:
						{
							ApplyDynamicActorAnimation(actorid, "strip", "str_c2", 4.1, 1, 0, 0, 0, 0);
							SetTimerEx("StripStop", 6000, 0, "i", actorid);
						}
					}
				}
			}
			SetGVarInt("StripDacing", 1, actorid);
			return 1;
		}
		case DIALOG_247:
		{
		    if (!response) return 1;
			switch(listitem)
			{
			    case 0: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_247_FOOD);
			    case 1: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_247_TOOL);
			    case 2: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_247_VITA);
    			case 3:
				{
				    format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"请选择要增加的空间量(目前%d/%d)\t\n10格\t$500\n20格\t$1000\n100格\t$5000",
					GetPlayerRemainingSpace(playerid), PlayerData[playerid][pBag]);
				    ShowPlayerDialog(playerid, DIALOG_247_BUYSPACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"超市店员", dialoginfo, "选择", "离开");
    			}
			}
			return 1;
		}
		case DIALOG_247_BUYSPACE:
		{
			if (!response) return 1;
			static amount, price;
			switch(listitem)
			{
			    case 0: amount = 10, price = 500;
				case 1: amount = 20, price = 1000;
				case 2: amount = 100, price = 5000;
			}
			if(PlayerData[playerid][pCash] < price)
			{
				return SendRangeMessage(5.0, playerid, "超市店员 说: 不好意思客人,你的钱不够", COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1);
			}
			if(PlayerData[playerid][pBag]+amount > GetPlayerBagLimit(playerid))
			{
			    format(string, sizeof(string), "超市店员 说: 不好意思客人,目前你的背包空间最多只能扩充到%d格喔", GetPlayerBagLimit(playerid));
				return SendRangeMessage(5.0, playerid, string, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1);
			}
			GiveMoney(playerid, -price);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买了%d格背包空间", PlayerData[playerid][pName], PlayerData[playerid][pID], price, amount);
			PlayerData[playerid][pBag] += amount;
			format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"扩充完成,是否需要继续扩充?(目前%d/%d)\t\n10格\t$500\n20格\t$1000\n100格\t$5000",
			GetPlayerRemainingSpace(playerid), PlayerData[playerid][pBag]);
			ShowPlayerDialog(playerid, DIALOG_247_BUYSPACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"超市店员", dialoginfo, "选择", "离开");

			UpdatePlayerMission(playerid, 1, 4);//玩家完成任务3的stage2条件 给他stage4的条件
			return 1;
		}

		case DIALOG_SHOP_MOBILE:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0: ShowPlayerShopList(playerid, ITEM_EQ, EQSHOP_MOBILE);
				case 1: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_ELEC);
			}
			return 1;
		}
		case DIALOG_SHOP_FNT:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_CNT);
				case 1: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_BND);
				case 2: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_LIGHT);
				case 3: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_ELEC);
				case 4: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_FNT_OTHER);
			}
			return 1;
		}
		case DIALOG_AMMU:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"练习项目\t体力\t金额\n9mm手枪\t5\t300\n沙漠之鹰\t8\t600\n霰弹枪\t10\t1000\n乌兹\t8\t1000\nMP5冲锋枪\t10\t1500\nAK-47\t12\t2000\nM4\t12\t2500\n来福枪\t12\t2000");
		            ShowPlayerDialog(playerid, DIALOG_AMMU_RANGE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", string, "选择", "离开");
		            UpdatePlayerMission(playerid, 16, 4);
		        }
		        case 1:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"项目\n9mm手枪\n消音手枪\n沙漠之鹰\n霰弹枪\n短管霰弹枪\n战斗霰弹枪\n乌兹\nMP5冲锋枪\nAK-47\nM4\n来福枪\n狙击枪");
		            ShowPlayerDialog(playerid, DIALOG_AMMU_BUYCHECK_GUN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", string, "选择", "离开");
		            UpdatePlayerMission(playerid, 13, 4);
		        }
		        case 2: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_AMMU_ARMOR, 1);
		    }
		    return 1;
		}
		case DIALOG_AMMU_BUYCHECK_GUN:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_AMMU, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", ""#TEXT_WHITE"如果想要自保的话,你来对地方了\n射击练习\n购买枪枝\n购买护甲", "选择", "离开");
		    new gunid;
		    switch(listitem)
		    {
		        case 0: gunid = 22;
		        case 1: gunid = 23;
		        case 2: gunid = 24;
		        case 3: gunid = 25;
		        case 4: gunid = 26;
		        case 5: gunid = 27;
		        case 6: gunid = 28;
		        case 7: gunid = 29;
		        case 8: gunid = 30;
		        case 9: gunid = 31;
		        case 10: gunid = 33;
		        case 11: gunid = 34;
		    }
		    ShowPlayerGunCustomMenu(playerid, gunid);
		    UpdatePlayerMission(playerid, 13, 5);
		    return 1;
		}
		case DIALOG_AMMU_BUY_GUN:
		{
		    if (!response)
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"项目\n9mm手枪\n消音手枪\n沙漠之鹰\n霰弹枪\n短管霰弹枪\n战斗霰弹枪\n乌兹\nMP5冲锋枪\nAK-47\nM4\n来福枪\n狙击枪");
		        ShowPlayerDialog(playerid, DIALOG_AMMU_BUYCHECK_GUN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", string, "选择", "离开");
				return 1;
			}
		    new gunid, string2[256];
		    gunid = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(PlayerData[playerid][pCash] < WeaponsList[gunid][wPrice]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
		            GiveMoney(playerid, -WeaponsList[gunid][wPrice]);
		            Log(moneylog, INFO, "%s(%d)花费了$%d购买了武器%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], WeaponsList[gunid][wPrice], WeaponsList[gunid][wName], gunid);
		            GivePlayerWeapon(playerid, gunid, WeaponsList[gunid][wDefaultAmmo]);
		            format(string, sizeof(string), ""#TEXT_LIGHTGREEN"你花费"#TEXT_YELLOW"$%d"#TEXT_LIGHTGREEN"购买了一把"#TEXT_YELLOW"%s", WeaponsList[gunid][wPrice], WeaponsList[gunid][wName]);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            ShowPlayerGunCustomMenu(playerid, gunid);

				    UpdatePlayerMission(playerid, 13, 6);
		        }
		        case 1:
		        {
		            new pgun, pammo;
		            GetPlayerWeaponData(playerid, WeaponsList[gunid][wSlot], pgun, pammo);
		            if(pgun != gunid || pammo < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须要有枪才能买子弹");
		            if(PlayerData[playerid][pCash] < AmmosList[WeaponsList[gunid][wAmmo]][amPrice]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
		            SetPlayerAmmo(playerid, gunid, pammo + AmmosList[WeaponsList[gunid][wAmmo]][amAmount]);
		            GiveMoney(playerid, -AmmosList[WeaponsList[gunid][wAmmo]][amPrice]);
		            Log(moneylog, INFO, "%s(%d)花费了$%d购买了弹药%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], AmmosList[WeaponsList[gunid][wAmmo]][amPrice], AmmosList[WeaponsList[gunid][wAmmo]][amName], WeaponsList[gunid][wAmmo]);
		            format(string, sizeof(string), ""#TEXT_LIGHTGREEN"你花费"#TEXT_YELLOW"$%d"#TEXT_LIGHTGREEN"购买了"#TEXT_YELLOW"%d"#TEXT_LIGHTGREEN"颗"#TEXT_YELLOW"%s", AmmosList[WeaponsList[gunid][wAmmo]][amPrice], AmmosList[WeaponsList[gunid][wAmmo]][amAmount], AmmosList[WeaponsList[gunid][wAmmo]][amName]);
		            SendClientMessage(playerid, COLOR_WHITE, string);

		            ShowPlayerGunCustomMenu(playerid, gunid);
		        }
		        case 2:
		        {
		            format(string2, sizeof(string2), ""#TEXT_WHITE"选择%s要上的颜色\n预设[$0]\n黑色[$0]\n"#TEXT_SKYBLUE"天蓝色[$0]\n"#TEXT_SANDYELLOW"土黄色[$0]\n"#TEXT_RED"红色[$0]\n"#TEXT_PINKRED"粉红色[$0]\n"#TEXT_YELLOW"金色[$0]", WeaponsList[gunid][wName]);
		    		ShowPlayerDialog(playerid, DIALOG_AMMU_PAINT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", string2, "选择", "离开");
		    	}
		    }
		    return 1;
		}
		case DIALOG_AMMU_PAINT:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_AMMU, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", ""#TEXT_WHITE"如果想要自保的话,你来对地方了\n射击练习\n购买枪枝\n购买护甲", "选择", "离开");
		    new price, gunid;
		    gunid = GetGVarInt("DDecideID", playerid),
			price = 0;
		    /*switch(listitem)
		    {
		        case 0: {price = 0;}
		        case 1: {price = 400;}
		        case 2: {price = 500;}
		        case 3: {price = 500;}
		        case 4: {price = 600;}
		        case 5: {price = 800;}
		        case 6: {price = 1200;}
		    }*/
		    if(PlayerData[playerid][pCash] < price) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
		    switch(gunid)
		    {
			    case 22: {WeaponData[playerid][pw9mmCol] = listitem;}
				case 24: {WeaponData[playerid][pwDEACol] = listitem;}
				case 25: {WeaponData[playerid][pwShotgunCol] = listitem;}
				case 26: {WeaponData[playerid][pwSawnCol] = listitem;}
				case 27: {WeaponData[playerid][pwSpasCol] = listitem;}
				case 28: {WeaponData[playerid][pwUZICol] = listitem;}
				case 29: {WeaponData[playerid][pwMP5Col] = listitem;}
				case 30: {WeaponData[playerid][pwAK47Col] = listitem;}
				case 31: {WeaponData[playerid][pwM4Col] = listitem;}
				case 32: {WeaponData[playerid][pwTec9Col] = listitem;}
				case 33: {WeaponData[playerid][pwRifleCol] = listitem;}
				case 34: {WeaponData[playerid][pwSniperCol] = listitem;}
				default: return SendClientMessage(playerid, COLOR_WHITE, "错误: 这把武器无法上涂装");
			}
			SendClientMessage(playerid, COLOR_WHITE, "变更枪枝颜色完成!");
			GiveMoney(playerid, -price);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买了枪枝涂装", PlayerData[playerid][pName], PlayerData[playerid][pID], price);
			SetPlayerWeaponColored(playerid);
			ShowPlayerGunCustomMenu(playerid, gunid);
			return 1;
		}
		case DIALOG_AMMU_RANGE:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_AMMU, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", ""#TEXT_WHITE"如果想要自保的话,你来对地方了\n射击练习\n购买枪枝\n购买护甲", "选择", "离开");
			static i, k, pworld, Float:px, Float:py, Float:pz;
			pworld = GetPlayerVirtualWorld(playerid);
			for(i = k = 0; i < 7; i ++)
			{
				if(RangeSpace[pworld][i] == 1){continue;}
				RangeSpace[pworld][i] = 1;
				k = 1;
				break;
			}
			if(k == 0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前在这里进行练习的人额满了");}
			SaveWeaponData(playerid);
			switch(listitem)
		    {
		        case 0:
		        {
		            if(PlayerData[playerid][pStamina] < 5.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 300) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 22, 20000);
					GiveMoney(playerid, -300);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 300);
					PlayerData[playerid][pStamina] -= 5.0;
				}
				case 1:
		        {
		            if(PlayerData[playerid][pStamina] < 8.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 600) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 24, 20000);
					GiveMoney(playerid, -600);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 600);
					PlayerData[playerid][pStamina] -= 8.0;
				}
				case 2:
		        {
		            if(PlayerData[playerid][pStamina] < 10.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 1000) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 25, 20000);
					GiveMoney(playerid, -1000);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000);
					PlayerData[playerid][pStamina] -= 10.0;
				}
				case 3:
		        {
		            if(PlayerData[playerid][pStamina] < 8.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 1000) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 28, 20000);
					GiveMoney(playerid, -1000);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000);
					PlayerData[playerid][pStamina] -= 8.0;
				}
				case 4:
		        {
		            if(PlayerData[playerid][pStamina] < 10.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 1500) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 29, 20000);
					GiveMoney(playerid, -1500);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 1500);
					PlayerData[playerid][pStamina] -= 10.0;
				}
				case 5:
		        {
		            if(PlayerData[playerid][pStamina] < 12.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 2000) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 30, 20000);
					GiveMoney(playerid, -2000);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 2000);
					PlayerData[playerid][pStamina] -= 12.0;
				}
				case 6:
		        {
		            if(PlayerData[playerid][pStamina] < 12.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 2500) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 31, 20000);
					GiveMoney(playerid, -2500);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 2500);
					PlayerData[playerid][pStamina] -= 12.0;
				}
				case 7:
		        {
		            if(PlayerData[playerid][pStamina] < 12.0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
					if(PlayerData[playerid][pCash] < 2000) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");}
					ResetPlayerWeapons(playerid);
					GivePlayerWeapon(playerid, 33, 20000);
					GiveMoney(playerid, -2000);
					Log(moneylog, INFO, "%s(%d)花费了$%d进行射击练习", PlayerData[playerid][pName], PlayerData[playerid][pID], 2000);
					PlayerData[playerid][pStamina] -= 12.0;
				}
			}
			GetPlayerPos(playerid, px, py, pz);
			SetGVarFloat("RangeX", px, playerid);
			SetGVarFloat("RangeY", py, playerid);
			SetGVarFloat("RangeZ", pz, playerid);
			switch(i)
			{
				case 0:{SetPlayerPos_Fix(playerid, 289.0996, -24.8716 ,1001.5156);}
				case 1:{SetPlayerPos_Fix(playerid, 290.6836, -24.8716 ,1001.5156);}
				case 2:{SetPlayerPos_Fix(playerid, 292.1635, -24.8716 ,1001.5156);}
				case 3:{SetPlayerPos_Fix(playerid, 293.7460, -24.8716 ,1001.5156);}
				case 4:{SetPlayerPos_Fix(playerid, 295.1565, -24.8716 ,1001.5156);}
				case 5:{SetPlayerPos_Fix(playerid, 296.6694, -24.8716 ,1001.5156);}
				case 6:{SetPlayerPos_Fix(playerid, 298.2329, -24.8716 ,1001.5156);}
				case 7:{SetPlayerPos_Fix(playerid, 299.7038, -24.8716 ,1001.5156);}
			}
			SetGVarInt("RangeSeat", i, playerid);
			SetPlayerFacingAngle(playerid, 0.0);
			if(GetGVarInt("RangeStarted", pworld) == 0)
			{
				SetGVarInt("RangeStarted", 1, pworld);
				SetTimerEx("SpawnTarget", 5000, 0, "i", pworld);
			}
			SendClientMessage(playerid, COLOR_WHITE, "你开始了射击训练,每次射击到靶都会获得一定分数,累积到一定分数武器的熟练度将会上升");
			SendClientMessage(playerid, COLOR_WHITE, "本次练习时间为5分钟,按F可以提早离开");
			SetGVarInt("RangeShooting", 1, playerid);
			SetGVarInt("RangeTime", 300, playerid);
			UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_LIGHTRED, "射击中...");

			// 即使不动也更新玩家streamer物件
			Streamer_ToggleIdleUpdate(playerid, 1);

			UpdatePlayerMission(playerid, 16, 5);
			return 1;
		}
		case DIALOG_CLASS:
		{
		    if (!response) return SendClientMessage(playerid, COLOR_WHITE, "你选择不听课");
		    switch(listitem)
		    {
		        case 0:
		        {
		            SetGVarInt("Concentration", 1, playerid);
		            format(string, sizeof(string), "** "#TEXT_FADEGREEN"你选择鬼混态度,每分钟消耗0.5点体力,有机率会睡着也有低机率获得知识点");
		        }
		        case 1:
		        {
		            SetGVarInt("Concentration", 2, playerid);
		            format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"你选择马马虎虎态度,每分钟消耗1点体力,有低机率会睡着也有机率获得知识点");
		        }
		        case 2:
		        {
		            SetGVarInt("Concentration", 3, playerid);
		            format(string, sizeof(string), "** "#TEXT_GREEN"你选择专心态度,每分钟消耗2点体力,有机率获得知识点");
		        }
		        case 3:
		        {
		            SetGVarInt("Concentration", 4, playerid);
		            format(string, sizeof(string), "** "#TEXT_BLUEGREEN"你选择全神贯注态度,每分钟消耗3点体力,有高机率获得知识点");
		        }
		    }
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    return 1;
		}
		case DIALOG_GPS:
		{
			if (!response) return 1;
			switch(listitem)
			{
			    case 0:
			    {
			        ShowPlayerDialog(playerid, DIALOG_GPS_SEARCH, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"GPS定位装置", ""#TEXT_WHITE"请输入要查询的地点", "查询", "取消");
			    }
			    case 1:
			    {
			        ShowPlayerDialog(playerid, DIALOG_GPS_TYPE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"GPS定位装置",
					"请选择查找类型:\n所有地标\n商家\n载具相关\n工作相关\n景点\n机构\n学院\n出货口\n竞速\n套房\n房屋\n会所\n办公室\n仓库\n机库\n船坞\n工厂", "选择", "关闭");
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, DIALOG_GPS_SEARCHANY, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"GPS定位装置", ""#TEXT_WHITE"请输入要查询的X,Y,Z坐标\n**坐标之间用空格分隔", "查询", "取消");
				}
				case 3:
				{
				    RemovePlayerMapIcon(playerid, 99);
					DeleteGVar("GPSX", playerid);
	    			DeleteGVar("GPSY", playerid);
	    			DeleteGVar("GPSZ", playerid);
					DeleteGVar("GPS2", playerid);
					SendClientMessage(playerid, COLOR_WHITE, "** 已关闭目前的标记");
				}
			}
			return 1;
		}
		case DIALOG_GPS_TYPE:
		{
			if (!response)
			{
				ShowPlayerGPSMenu(playerid);
				return 1;
			}
			ShowPlayerGPSList(playerid, listitem, 0);
			return 1;
		}
		case DIALOG_GPS_NEAR:
		{
		    if (!response)
			{
				ShowPlayerGPSMenu(playerid);
				return 1;
			}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(chosed == PREV_PAGE) ShowPlayerGPSList(playerid, GetGVarInt("DDecideType", playerid), GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerGPSList(playerid, GetGVarInt("DDecideType", playerid), GetGVarInt("Page", playerid)+1);
		    else
		    {
				SetPlayerGPS(playerid, GPSList[chosed][gpsX], GPSList[chosed][gpsY], GPSList[chosed][gpsZ]);
				format(string, sizeof(string), ""#TEXT_WHITE"已标记了"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE",距离%d公尺", GPSList[chosed][gpsName], floatround(GetPlayerDistanceFromPointEx(playerid, GPSList[chosed][gpsX], GPSList[chosed][gpsY], GPSList[chosed][gpsZ])));
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
				AskShareMap(playerid);
			}
			return 1;
		}
		case DIALOG_GPS_NEAR2:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			SetPlayerGPS(playerid, GPSList[chosed][gpsX], GPSList[chosed][gpsY], GPSList[chosed][gpsZ]);
			format(string, sizeof(string), ""#TEXT_WHITE"已标记了"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE",距离%d公尺", GPSList[chosed][gpsName], floatround(GetPlayerDistanceFromPointEx(playerid, GPSList[chosed][gpsX], GPSList[chosed][gpsY], GPSList[chosed][gpsZ])));
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
			UpdatePlayerMission(playerid, 5, 4);
			return 1;
		}
		case DIALOG_GPS_SEARCH:
		{
			if (!response)
			{
				ShowPlayerGPSMenu(playerid);
				return 1;
			}
            new i, j, Float:curdis, Float:minidis, mini;
            minidis = 6000.0;
            mini = -1;
			for(i = 0, j = MAX_GPS; i < j ; i++)
    		{
    		    if(GPSList[i][gpsCreated] == false){continue;}
	            if(strfind(GPSList[i][gpsName], inputtext, true) != -1)
				{
				    curdis = GetPlayerDistanceFromPointEx(playerid, GPSList[i][gpsX], GPSList[i][gpsY], GPSList[i][gpsZ]);
				    if(curdis < minidis)
				    {
				        minidis = curdis;
				        mini = i;
				    }
				}
			}
			if(mini == -1){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", ""#TEXT_WHITE"找不到搜寻的地点", "确认", "");}
			SetPlayerGPS(playerid, GPSList[mini][gpsX], GPSList[mini][gpsY], GPSList[mini][gpsZ]);
			format(string, sizeof(string), ""#TEXT_WHITE"找到了最近的"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE",距离%d公尺\n已为你标记在地图上", GPSList[mini][gpsName], floatround(minidis));
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
			AskShareMap(playerid);
			return 1;
		}
		case DIALOG_GPS_SEARCHANY:
		{
			if (!response)
			{
				ShowPlayerGPSMenu(playerid);
				return 1;
			}
			static Float:fX, Float:fY, Float:fZ;
			if(sscanf(inputtext, "fff", fX, fY, fZ))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GPS_SEARCHANY, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"GPS定位装置", ""#TEXT_WHITE"请输入要查询的X,Y,Z坐标\n**坐标之间用空格分隔", "查询", "取消");
            }
			SetPlayerGPS(playerid, fX, fY, fZ);
			format(string, sizeof(string), ""#TEXT_WHITE"找到了目标"#TEXT_LIGHTPURPLE"位置"#TEXT_WHITE",距离%d公尺\n已为你标记在地图上", floatround(GetPlayerDistanceFromPointEx(playerid, fX, fY, fZ)));
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
			AskShareMap(playerid);
			return 1;
		}
		case DIALOG_SHOP_POT:
		{
		    if (!response) return 1;
			switch(listitem)
			{
			    case 0: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_PLANT_SEED);
				case 1: ShowPlayerShopList(playerid, ITEM_EQ, EQSHOP_PLANT);
				case 2: ShowPlayerShopList(playerid, ITEM_USE, USESHOP_PLANT_FERT);
				case 3:
				{
				    if (!response) return 1;
				    new ListString[1024], i, j, k, l;
					ListString[0] = EOS;
					for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
					{
						if(PlayerItems_USE[playerid][i][iuItemID] == 0) { continue;}
						k = PlayerItems_USE[playerid][i][iuItemID];
						if(ItemsList_USE[k][iuType] == IU_POT)
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t$%d\n",
							ListString, ItemsList_USE[k][iuName], PlayerItems_USE[playerid][i][iuCount], ItemsList_USE[k][iuPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
                    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"出售植物", ""#TEXT_WHITE"你没有任何收割的植物可卖", "确定", "");}
					format(ListString, sizeof(ListString), "名称\t数量\t每个卖价\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MPLANT_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "出售植物", ListString, "选择", "关闭");

					UpdatePlayerMission(playerid, 8, 3);
					/*for(i = l = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_PLANT) { continue;}
						else
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t%d\t%d\n",
							ListString, ItemsList_USE[MarketData[i][mStuffID]][iuName], PlayerHaveItem(playerid, 1, MarketData[i][mStuffID]), MarketData[i][mAmount], MarketData[i][mPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "花市交易清单", ""#TEXT_WHITE"目前没有任何交易", "确认", "");}
					format(ListString, sizeof(ListString), "项目\t身上的数量\t需求数量\t交易金额\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MPLANT_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "花市交易清单", ListString, "选择", "关闭");*/
				}
			}
			return 1;
		}
		case DIALOG_MPLANT_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid),
				chosed = PlayerItems_USE[playerid][order][iuItemID];
			format(string, sizeof(string), ""#TEXT_WHITE"你选择了: %s\n每个可卖金额: $%d\n\n**你目前有%d个\n请输入要出售的数量", ItemsList_USE[chosed][iuName], ItemsList_USE[chosed][iuPrice], PlayerHaveItem(playerid, 1, chosed));
			ShowPlayerDialog(playerid, DIALOG_MPLANT_SELL, DIALOG_STYLE_INPUT, "花市交易确认", string, "是", "否");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_MPLANT_SELL:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				amount = strval(inputtext);
			if(PlayerHaveItem(playerid, 1, chosed) < amount) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这么多这种盆栽");}
			if(amount < 1) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量无效");}
		    GivePlayerItem(playerid, 1, chosed, -amount);
		    GiveMoney(playerid, amount*ItemsList_USE[chosed][iuPrice]);
		    Log(moneylog, INFO, "%s(%d)于花市卖出了%d个%s并获得了交易金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[chosed][iuName], amount*ItemsList_USE[chosed][iuPrice]);
			format(string, sizeof(string), "** 交易完成: 你卖出了%d个%s并获得了交易金"#TEXT_LIGHTGREEN"$%d", amount, ItemsList_USE[chosed][iuName], amount*ItemsList_USE[chosed][iuPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
			RecordData[playerid][prMPlant] ++;

			UpdatePlayerMission(playerid, 8, 4);
			return 1;
		}
		case DIALOG_SHOP_PET:
		{
		    if (!response) return 1;
		    if(PlayerHavePet(playerid) >= MAX_PETS)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法再拥有更多宠物了");
			}
			switch(listitem)
			{
			    case 0:
				{
				    ShowPlayerDialog(playerid, DIALOG_SHOP_PET_BUY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"宠物摊老板",
					""#TEXT_WHITE"品项\t价格\n拳师犬\t$5000\n牛头\t$3000\n大麦町\t$4000\n杜宾犬\t$4500\n哈士奇\t$4500\n比特犬\t$5000\n罗威那\t$4500\n德国牧羊犬\t$4000\n德国短毛指示犬\t$4000\n柴犬\t$3000\n法国斗牛犬\t$2000\n猫\t$2000", "选择", "离开");
					UpdatePlayerMission(playerid, 14, 3);
				}
			}
			return 1;
		}
		case DIALOG_SHOP_PET_BUY:
		{
		    if (!response) return 1;
			switch(listitem)
			{
			    case 0: {buyid = 1;}
			    case 1: {buyid = 2;}
			    case 2: {buyid = 3;}
			    case 3: {buyid = 4;}
			    case 4: {buyid = 5;}
			    case 5:
				{
				    rand = random(4);
				    switch(rand)
				    {
				        case 0:buyid = 6;
				        case 1:buyid = 7;
				        case 2:buyid = 8;
				        case 3:buyid = 9;
					}
				}
			    case 6: {buyid = 10;}
			    case 7: {buyid = 11;}
			    case 8: {buyid = 12;}
			    case 9: {buyid = 21;}
			    case 10: {buyid = 24;}
			    case 11: {buyid = 13;}
			}
			if(PlayerData[playerid][pCash] < AnimalsList[buyid][amlPrice])
			{
				return SendRangeMessage(5.0, playerid, "宠物摊老板 说: 没钱我不能卖给你喔", COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1, COLOR_FADE1);
			}
			new petid = GivePlayerPet(buyid, playerid);
			GiveMoney(playerid, -AnimalsList[buyid][amlPrice]);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买了新宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], AnimalsList[buyid][amlPrice], AnimalsList[buyid][amlName], petid);
			SendClientMessage(playerid, COLOR_PINK, "** 你购买了一只新宠物,赶紧打开个人菜单->资产->宠物呼叫出来吧!");
			SendClientMessage(playerid, COLOR_YELLOW, "** 呼叫宠物出来后,可以通过锁定你的宠物来查看更详细的资料");
			UpdatePlayerMission(playerid, 14, 4);
			return 1;
		}
		case DIALOG_SHOP_LIST_USE:
		{
		    if (!response) return DeleteGVar("InstantUse", playerid);
			buyid = GetGVarInt("DListID", listitem*1000+playerid);
			if(GetGVarInt("InstantUse", playerid) == 1)
			{
				switch(ItemsList_USE[buyid][iuType])
				{
					case IU_FOOD:
					{
						if(PlayerData[playerid][pHunger] > 90.0 && GetPlayerHealth_Fix(playerid) >= 100.0+PlayerData[playerid][pMaxHealth] && LimitData[playerid][plEat] > 4) DeleteGVar("InstantUse", playerid);
					}
					case IU_ARMOR:
					{
						if(GetPlayerArmour_Fix(playerid) > 20.0) DeleteGVar("InstantUse", playerid);
					}
					default: DeleteGVar("InstantUse", playerid);
				}
			}

			format(dialoginfo, sizeof(dialoginfo), ""#TEXT_YELLOW"%s\n"#TEXT_WHITE"价钱:$%d\n占用空间:%d\n\t%s\n\n请输入购买数量",
			ItemsList_USE[buyid][iuName], ItemsList_USE[buyid][iuPrice], ItemsList_USE[buyid][iuSpace], ItemsList_USE[buyid][iuDes]);
			ShowPlayerDialog(playerid, DIALOG_SHOP_BUY_USE, DIALOG_STYLE_INPUT, "物品介绍", dialoginfo, "购买", "取消");
			SetGVarInt("DDecideID", buyid, playerid);
			return 1;
		}
		case DIALOG_SHOP_BUY_USE:
		{
		    if (!response)
		    {
				DeleteGVar("InstantUse", playerid);
				return 1;
			}
		    new Hour, Minute, Second,
			amount = strval(inputtext);
			gettime(Hour, Minute, Second);
			buyid = GetGVarInt("DDecideID", playerid);
		    if(buyid == 4 && Hour != 12 && Hour != 18){ return SendClientMessage(playerid, COLOR_WHITE, "购买失败,这个商品这个时段没有贩售");}
		    if(buyid == 8 && Hour != 11 && Hour != 17){ return SendClientMessage(playerid, COLOR_WHITE, "购买失败,这个商品这个时段没有贩售");}
		    if(buyid == 12 && Hour != 13 && Hour != 19){ return SendClientMessage(playerid, COLOR_WHITE, "购买失败,这个商品这个时段没有贩售");}

		    if(amount < 1) amount = 1;
		    if(amount > 1000) { return SendClientMessage(playerid, COLOR_WHITE, "购买失败,一次最多只能购买1000个"); }
		    
		    new price;
		    price = ItemsList_USE[buyid][iuPrice]*amount;
		    if(PlayerData[playerid][pCash] < price) { return SendClientMessage(playerid, COLOR_WHITE, "你的现金不足,无法购买这个项目");}
		    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[buyid][iuSpace]*amount) { return SendClientMessage(playerid, COLOR_WHITE, "你没有空间携带这个物品了,无法购买这个项目");}

			GiveMoney(playerid, -ItemsList_USE[buyid][iuPrice]*amount);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买%d个%s", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[buyid][iuPrice]*amount, amount, ItemsList_USE[buyid][iuName]);
			if(GetGVarInt("InstantUse", playerid) == 1 && amount == 1)
			{
			    PlayerUseItem_USE(playerid, buyid);
			}
			else
			{
			    DeleteGVar("InstantUse", playerid);
			    GivePlayerItem(playerid, 1, buyid, amount);
				format(dialoginfo, sizeof(dialoginfo), ""#TEXT_YELLOW"已购买 %s %d个\n"#TEXT_WHITE"一共花费$%d \n请在背包查看使用已购买的东西",
				ItemsList_USE[buyid][iuName], amount, ItemsList_USE[buyid][iuPrice]*amount);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买完成", dialoginfo, "确认", "");
			}

			UpdatePlayerMission(playerid, 1, 4);//玩家完成任务3的stage2条件 给他stage4的条件
			if(buyid == 45) UpdatePlayerMission(playerid, 9, 7);
			if(buyid == 28) UpdatePlayerMission(playerid, 14, 10);
			if(ItemsList_USE[buyid][iuType] == IU_SEED) UpdatePlayerMission(playerid, 6, 6);
			return 1;
		}
		case DIALOG_SHOP_LIST_EQ:
		{
		    if (!response) return DeleteGVar("InstantUse", playerid);
			buyid = GetGVarInt("DListID", listitem*1000+playerid);
			format(dialoginfo, sizeof(dialoginfo), ""#TEXT_YELLOW"%s\n"#TEXT_WHITE"价钱:$%d\n占用空间:%d\n\t%s",
			ItemsList_EQ[buyid][ieqName], ItemsList_EQ[buyid][ieqPrice], ItemsList_EQ[buyid][ieqSpace], ItemsList_EQ[buyid][ieqDes]);
			ShowPlayerDialog(playerid, DIALOG_SHOP_BUY_EQ, DIALOG_STYLE_MSGBOX, "物品介绍", dialoginfo, "购买", "取消");
			SetGVarInt("DDecideID", buyid, playerid);
			return 1;
		}
		case DIALOG_SHOP_BUY_EQ:
		{
		    if (!response) return 1;
			buyid = GetGVarInt("DDecideID", playerid);
			if(PlayerHaveItem(playerid, 2, buyid) != 0)
			{
			     return SendClientMessage(playerid, COLOR_WHITE, "这个物品你已经拥有了,无法购买这个项目");
			}
			if(PlayerData[playerid][pCash] < ItemsList_EQ[buyid][ieqPrice]) {return SendClientMessage(playerid, COLOR_WHITE, "你的现金不足,无法购买这个项目");}
			if(GetPlayerRemainingSpace(playerid) < ItemsList_EQ[buyid][ieqSpace]) { return SendClientMessage(playerid, COLOR_WHITE, "你没有空间携带这个物品了,无法购买这个项目");}
			GiveMoney(playerid, -ItemsList_EQ[buyid][ieqPrice]);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买%s", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[buyid][ieqPrice], ItemsList_EQ[buyid][ieqName]);
			GivePlayerItem(playerid, 2, buyid, 1);
			format(dialoginfo, sizeof(dialoginfo), ""#TEXT_YELLOW"已购买 %s \n"#TEXT_WHITE"一共花费$%d \n请按N键在背包查看使用已购买的东西",
			ItemsList_EQ[buyid][ieqName], ItemsList_EQ[buyid][ieqPrice]);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买完成", dialoginfo, "确认", "");

			if(buyid == 4 || buyid == 33)  UpdatePlayerMission(playerid, 4, 4);
			if(buyid == 2 || buyid == 36)  UpdatePlayerMission(playerid, 9, 4);
			if(buyid == 25 || buyid == 26 || buyid == 27)  UpdatePlayerMission(playerid, 6, 4);
			if(buyid == 42 || buyid == 43 || buyid == 44 || buyid == 45 || buyid == 46) UpdatePlayerMission(playerid, 11, 3);
			return 1;
		}
		case DIALOG_VEH:
		{
		    if (!response)
			{
			    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				else return ShowPlayerPropertyMenu(playerid);
			}
		    new stat[32], checkid = GetGVarInt("DDecidePlayer", playerid),
		    	chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(chosed == PREV_PAGE) ShowPlayerPropertyList(playerid, checkid, 0, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerPropertyList(playerid, checkid, 0, GetGVarInt("Page", playerid)+1);
		    else
		    {
			    switch(VehData[chosed][vStatus])
				{
					case VEH_NORMAL:
					{
						if(VehData[chosed][vLock] == 0) format(stat, sizeof(stat), "未上锁");
						else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
					}
					case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
					case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
				}
			    format(string, sizeof(string), ""#TEXT_WHITE"\t \n"#TEXT_FADEGREEN"取得载具\n"#TEXT_YELLOW"转卖载具\n名称:\t"#TEXT_SKYBLUE"%s\n车牌:\t%s\nID:\t%d\n入手价:\t"#TEXT_FADEGREEN"%d\n状态:\t%s"
				, GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vPlate], chosed, VehData[chosed][vPrice], stat);
				ShowPlayerDialog(playerid, DIALOG_VEH_INFO, DIALOG_STYLE_TABLIST_HEADERS, "我的载具", string, "选择", "取消");
				SetGVarInt("DDecideID", chosed, playerid);
			}
			return 1;
		}
		case DIALOG_VEH_INFO:
		{
		    if (!response) return 1;
		    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0: GetVehicleForPlayer(playerid, vehicleid);
		        case 1:
				{
				    if(VehData[vehicleid][vStatus] != VEH_NORMAL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前这个载具无法被转卖");
				    if(!IsPlayerVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个不是你的载具");

				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要交易这台%s的金额", GetVehicleName(VehData[vehicleid][vModel]));
				    ShowPlayerDialog(playerid, DIALOG_VEH_TRADE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", string, "确认", "取消");
                }
			}
			return 1;
		}
		case DIALOG_VEH_TRADE1:
		{
		    if (!response) return 1;
			if(strval(inputtext) < 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_VEH_TRADE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", ""#TEXT_WHITE"交易金额不得小于0,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了交易金额 $%d\n请输入交易玩家的名称或ID", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_VEH_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", string, "发起交易", "取消");
            SetGVarInt("DTradePrice", strval(inputtext), playerid);
			return 1;
        }
        case DIALOG_VEH_TRADE2:
		{
		    if (!response) return 1;
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	vehicleid = GetGVarInt("DDecideID", playerid),
		    	price = GetGVarInt("DTradePrice", playerid);
		    if(VehData[vehicleid][vStatus] != VEH_NORMAL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前这个载具无法被转卖");
			if(!IsPlayerVehicle(playerid, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个不是你的载具");
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_VEH_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "发起交易", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_VEH_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", ""#TEXT_WHITE"你不能跟自己交易,请重新输入", "发起交易", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_VEH_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖载具", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "发起交易", "取消");
            }
            SetGVarInt("TVehID", vehicleid, giveplayerid);
            SetGVarInt("TPrice", price, giveplayerid);
            SetGVarInt("TTrader", playerid, giveplayerid);
            format(string, sizeof(string), ""#TEXT_WHITE"玩家 %s 想要卖给你载具:\n载具名称: %s\n金额: %d", playername, GetVehicleName(VehData[vehicleid][vModel]), price);
            ShowPlayerDialog(giveplayerid, DIALOG_TRADE_VEH, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易载具", string, "接受", "拒绝");

            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"已发给玩家 %s 一笔交易:\n载具名称: %s\n金额: %d", giveplayername, GetVehicleName(VehData[vehicleid][vModel]), price);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"转卖载具", string, "确认", "");
			return 1;
        }
        case DIALOG_TRADE_VEH:
        {
            if (!response) return 1;
            new Float:px, Float:py, Float:pz, tradername[MAX_PLAYER_NAME],
                vehicleid = GetGVarInt("TVehID", playerid),
            	price = GetGVarInt("TPrice", playerid),
            	trader = GetGVarInt("TTrader", playerid);
            if(VehData[vehicleid][vStatus] != VEH_NORMAL) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前这个载具无法被交易");
			if(!IsPlayerVehicle(trader, vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具已经不属于卖家的了");
            if(!GetGVarInt("Logged", trader))
			{
			    return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家名称ID不存在,或是已经离线");
            }
            GetPlayerPos(trader, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(trader))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
            }
            if(price > PlayerData[playerid][pCash])
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上的钱不够与你交易");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上没有这么多钱");
            }
            if(!PlayerCanBuyVehicle(playerid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家已经无法买更多载具了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你已经无法买更多载具了");
            }

            VehData[vehicleid][vType] = VTYPE_PLAYER;
            VehData[vehicleid][vOwned] = 1;
            VehData[vehicleid][vOwner] = PlayerData[playerid][pID];
    		VehData[vehicleid][vDate] = getdate();
            GiveMoney(playerid, -price);
			GiveMoney(trader, price);
            Log(moneylog, INFO, "%s(%d)将载具%s(%d)卖给了%s(%d),金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pName], PlayerData[playerid][pID], price);
            Log(vehlog, INFO, "%s(%d)将载具%s(%d)卖给了%s(%d),金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID], PlayerData[playerid][pName], PlayerData[playerid][pID], price);
			GetPlayerName(trader, tradername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_WHITE" %s 与你交易了 %s,花费了你现金 $%d", tradername, GetVehicleName(VehData[vehicleid][vModel]), price);
			SendClientMessage(playerid, COLOR_WHITE, string);

			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_LIGHTORANGE" 你与 %s 交易了 %s,交易得了现金 $%d", playername, GetVehicleName(VehData[vehicleid][vModel]), price);
			SendClientMessage(trader, COLOR_WHITE, string);

			format(string, sizeof(string), "** %s 卖给了%s载具%s,并将钥匙交给他 **", tradername, playername, GetVehicleName(VehData[vehicleid][vModel]));
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
		case DIALOG_FISHERY:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pJob] == JOB_FISHER)
		    {
				switch(listitem)
				{
				    case 0:
				    {
				        if(GetGVarInt("SellingFish", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 请先将目前的鱼卖出");
			        	if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前有其他事情要忙");
			        	if(GetGVarInt("Mission", playerid) > 0)  return SendClientMessage(playerid, COLOR_WHITE, "错误: 正在进行任务时无法进行这个工作");
					    if(PlayerData[playerid][pStamina] < 10.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
					    new vehicleid, Float:px, Float:py, Float:pz;
					    vehicleid = GetPlayerVehicleID(playerid);
					    if(GetVehicleSpeed(vehicleid) > 5.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 必须在静止的状态才能下网");
					    GetPlayerPos(playerid, px, py, pz);
					    SetGVarFloat("FisherX", px, playerid);
					    SetGVarFloat("FisherY", py, playerid);
					    SetGVarFloat("FisherZ", pz, playerid);
					    SetGVarInt("Fishering", 1, playerid);
					    SetGVarInt("FisherBoat", vehicleid, playerid);
      					if(IsValidDynamic3DTextLabel(PlayerVehText[playerid])) DestroyDynamic3DTextLabel(PlayerVehText[playerid]);
						PlayerVehText[playerid] = CreateDynamic3DTextLabel(" ", COLOR_WHITE, 0.0, -1.0, -0.3, 40.0, _, vehicleid);
						UpdatePlayerVehText(playerid);
						SendClientMessage(playerid, COLOR_WHITE, "你已经下网了,你可以再次按左Ctrl查看收获以及收网,如果过度移动船只的话将会强制收网");
						SendClientMessage(playerid, COLOR_WHITE, "本次行动消耗了你"#TEXT_FADEGREEN"4"#TEXT_WHITE"点体力");
						format(string, sizeof(string), "** %s 撒下了渔网 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
						PlayerData[playerid][pStamina] -= 10.0;
						SetTimerEx("Fisherman", 10000, 0, "i", playerid);
					}
					case 1:
					{
					    new value = GetPlayerFisheriesValue(playerid);
					    if(value < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前的渔获没有任何价值");
					    format(string, sizeof(string), ""#TEXT_WHITE"出售市场\t"#TEXT_FADEGREEN"预计获利\n本地鱼市场\t"#TEXT_FADEGREEN"%d\n外地鱼市场(获利*10)\t"#TEXT_FADEGREEN"%d", value, value+value/2);
					    ShowPlayerDialog(playerid, DIALOG_FISHERY_SELL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"出售渔获", string, "选择", "取消");
					}
				}
			}
			else return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是渔夫");
			return 1;
        }
		case DIALOG_FISHERY_INV:
		{
		    if (!response) return 1;
			if(GetGVarInt("Fishering", playerid) == 1)
			{
		    	SetGVarInt("Fishering", 0, playerid);
	    		DeleteGVar("FisherBoat", playerid);
				SendClientMessage(playerid, COLOR_WHITE, "你将鱼网收起来了");
				format(string, sizeof(string), "** %s 收起了渔网 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				UpdatePlayerVehText(playerid);
            }
            return 1;
        }
        case DIALOG_FISHERY_SELL:
		{
		    if (!response) return 1;
			if(PlayerData[playerid][pJob] == JOB_FISHER)
			{
			    if(GetGVarInt("SellingFish", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "请先将目前的鱼卖出");
			    if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "你目前有其他事情要忙");
			    if(GetGVarInt("Mission", playerid) > 0)  return SendClientMessage(playerid, COLOR_WHITE, "正在进行任务时无法进行这个工作");
		    	if(IsPlayerInArea(playerid, "Los Santos"))
				{
				    if(listitem == 1)
				    {
				        SetGVarInt("FarSell", 1, playerid);
				        switch(random(4))
						{
							case 0: SetPlayerCheckpoint(playerid, FisherJobSellSF[0][0], FisherJobSellSF[0][1], FisherJobSellSF[0][2], 5.0);
							case 1: SetPlayerCheckpoint(playerid, FisherJobSellSF[1][0], FisherJobSellSF[1][1], FisherJobSellSF[1][2], 5.0);
							case 2: SetPlayerCheckpoint(playerid, FisherJobSellLV[0][0], FisherJobSellLV[0][1], FisherJobSellLV[0][2], 5.0);
							case 3: SetPlayerCheckpoint(playerid, FisherJobSellLV[1][0], FisherJobSellLV[1][1], FisherJobSellLV[1][2], 5.0);
						}
				    }
				    else
				    {
				        SetPlayerCheckpoint(playerid, FisherJobSellLS[0][0], FisherJobSellLS[0][1], FisherJobSellLS[0][2], 5.0);
				    }

				}
				else if(IsPlayerInArea(playerid, "San Fierro"))
				{
				    if(listitem == 1)
				    {
				        SetGVarInt("FarSell", 1, playerid);
				        switch(random(4))
						{
							case 0: SetPlayerCheckpoint(playerid, FisherJobSellLS[0][0], FisherJobSellLS[0][1], FisherJobSellLS[0][2], 5.0);
							case 1: SetPlayerCheckpoint(playerid, FisherJobSellLS[1][0], FisherJobSellLS[1][1], FisherJobSellLS[1][2], 5.0);
							case 2: SetPlayerCheckpoint(playerid, FisherJobSellLV[0][0], FisherJobSellLV[0][1], FisherJobSellLV[0][2], 5.0);
							case 3: SetPlayerCheckpoint(playerid, FisherJobSellLV[1][0], FisherJobSellLV[1][1], FisherJobSellLV[1][2], 5.0);
						}
				    }
				    else
				    {
				        SetPlayerCheckpoint(playerid, FisherJobSellSF[0][0], FisherJobSellSF[0][1], FisherJobSellSF[0][2], 5.0);
				    }
				}
				else if(IsPlayerInArea(playerid, "Las Venturas"))
				{
				    if(listitem == 1)
				    {
				        SetGVarInt("FarSell", 1, playerid);
				        switch(random(4))
						{
							case 0: SetPlayerCheckpoint(playerid, FisherJobSellSF[0][0], FisherJobSellSF[0][1], FisherJobSellSF[0][2], 5.0);
							case 1: SetPlayerCheckpoint(playerid, FisherJobSellSF[1][0], FisherJobSellSF[1][1], FisherJobSellSF[1][2], 5.0);
							case 2: SetPlayerCheckpoint(playerid, FisherJobSellLS[0][0], FisherJobSellLS[0][1], FisherJobSellLS[0][2], 5.0);
							case 3: SetPlayerCheckpoint(playerid, FisherJobSellLS[1][0], FisherJobSellLS[1][1], FisherJobSellLS[1][2], 5.0);
						}
				    }
				    else
				    {
				        SetPlayerCheckpoint(playerid, FisherJobSellLV[0][0], FisherJobSellLV[0][1], FisherJobSellLV[0][2], 5.0);
				    }
				}
				else
				{
				    if(listitem == 1)
				    {
				        rand = random(6);
				        SetGVarInt("FarSell", 1, playerid);
				        switch(rand)
						{
							case 0: SetPlayerCheckpoint(playerid, FisherJobSellSF[0][0], FisherJobSellSF[0][1], FisherJobSellSF[0][2], 5.0);
							case 1: SetPlayerCheckpoint(playerid, FisherJobSellSF[1][0], FisherJobSellSF[1][1], FisherJobSellSF[1][2], 5.0);
							case 2: SetPlayerCheckpoint(playerid, FisherJobSellLV[0][0], FisherJobSellLV[0][1], FisherJobSellLV[0][2], 5.0);
							case 3: SetPlayerCheckpoint(playerid, FisherJobSellLV[1][0], FisherJobSellLV[1][1], FisherJobSellLV[1][2], 5.0);
							case 4: SetPlayerCheckpoint(playerid, FisherJobSellLS[0][0], FisherJobSellLS[0][1], FisherJobSellLS[0][2], 5.0);
							case 5: SetPlayerCheckpoint(playerid, FisherJobSellLS[1][0], FisherJobSellLS[1][1], FisherJobSellLS[1][2], 5.0);
						}
				    }
				    else
				    {
                        rand = GetNearestFishSell(playerid);
                        SetPlayerCheckpoint(playerid, FisherJobSellAll[rand][0], FisherJobSellAll[rand][1], FisherJobSellAll[rand][2], 5.0);
				    }
				}
				new vehicleid = GetPlayerVehicleID(playerid);
				SetGVarInt("SellingFish", 1, playerid);
				SetGVarInt("FisherBoat", vehicleid, playerid);
				SendClientMessage(playerid, COLOR_WHITE, "已找到愿意收购的鱼市场,位置已用"#TEXT_RED"红点"#TEXT_WHITE"标记在地图上了,请将"#TEXT_YELLOW"渔船"#TEXT_WHITE"开过去");
            }
            return 1;
        }
        case DIALOG_PHONE_CALLED:
		{
		    if (!response)
			{
			    Phone_Close(playerid);
				return 1;
   			}
		    new caller;
		    switch(listitem)
			{
			    case 0:
			    {
			        if(GetGVarInt("PhoneCaller", playerid) != -1)
					{
					    caller = GetGVarInt("PhoneCaller", playerid);
					    if(caller == -1 || GetGVarInt("Logged", caller) == 0 || GetGVarInt("Calling", caller) != playerid)
					    {
					        Phone_Close(playerid);
					        return SendClientMessage(playerid, COLOR_WHITE, "对方已挂断电话或已离线");
					    }
					    DeleteGVar("PhoneRing", playerid);
						DeleteGVar("PhoneRung", playerid);
						SetGVarInt("PhoneCaller", -1, playerid);
						SetGVarInt("Calling", caller, playerid);
						SetGVarInt("PhoneChat", 1, playerid);
						SetGVarInt("PhoneChat", 1, caller);
						format(string, sizeof(string), ""#TEXT_WHITE"你已接通了 %s 的来电,你可以通过打字直接和他通话,再次打开手机可以挂掉通话", PlayerData[caller][pName]);
						SendClientMessage(playerid, COLOR_WHITE, string);
						format(string, sizeof(string), ""#TEXT_WHITE"%s 已接通了你的来电,你可以通过打字直接和他通话,再次打开手机可以挂掉通话", PlayerData[playerid][pName]);
						SendClientMessage(caller, COLOR_WHITE, string);
					}
					else if(GetGVarInt("Calling", playerid) != -1)
					{
					    if(GetGVarInt("PhoneSpeaker", playerid) == 1)
					    {
							SendClientMessage(playerid, COLOR_WHITE, "你关闭了手机扩音器");
					        DeleteGVar("PhoneSpeaker", playerid);
					    }
						else
						{
							SendClientMessage(playerid, COLOR_WHITE, "你打开了手机扩音器,对方的谈话内容将会让旁人听到");
					        SetGVarInt("PhoneSpeaker", 1, playerid);
					    }
					}
					else {ShowPlayerPhoneMenu(playerid);}
				}
				case 1:
				{
				    if(GetGVarInt("Calling", playerid) != -1)
					{
					    caller = GetGVarInt("Calling", playerid);
					    if(GetGVarInt("Calling", caller) == playerid)
					    {
							SendClientMessage(caller, COLOR_WHITE, "对方已结束通话");
					    }
					}
					SendClientMessage(playerid, COLOR_WHITE, "你已挂断电话");
				    PhoneHangUp(playerid);
				    ShowPlayerPhoneMenu(playerid);
				}
			}
			return 1;
		}
        case DIALOG_PHONE:
		{
		    if (!response)
			{
			    Phone_Close(playerid);
				return 1;
   			}
		    new phonestr[1024], l, i, j;
		    switch(listitem)
			{
			    case 0:
			    {
			        if(ConfigData[playerid][cfPhoneOff] == 1)
					{
						SendClientMessage(playerid, COLOR_WHITE, "必须先关闭飞行模式才能使用此选项");
						return ShowPlayerPhoneMenu(playerid);
					}

					ShowPlayerContactMenu(playerid);
        		}
        		case 1:
        		{
        		    new Year, Month, Day, Hour, Minute, Second, text[30];
        		    for(i = 0, j = MAX_TEXTS; i < j; i++)
        		    {
        		        if(TextMsg[playerid][i][tmCreated] == 1)
        		        {
        		            TimestampToDate(TextMsg[playerid][i][tmTime], Year, Month, Day, Hour, Minute, Second, 8);
        		            format(text, sizeof(text), "%s", TextMsg[playerid][i][tmText]);
        		            format(phonestr, sizeof(phonestr), "%s%s\t%d月%d日 %02d:%02d\t%s\n", phonestr, GetTextSenderName(playerid, i), Month, Day, Hour, Minute, text);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"短信", ""#TEXT_WHITE"目前没有收到任何短信", "确认", "");
					format(phonestr, sizeof(phonestr), "寄件人\t寄件时间\t预览\n%s", phonestr);
					ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"短信", phonestr, "选择", "返回");
				}
				case 2:
				{
					new status[64], trackid;
					if(GetGVarInt("UsingRadio", playerid) == 1)
					{
						format(phonestr, sizeof(phonestr), "%s关闭收音机\n", phonestr);
						SetGVarInt("DListID", -1, l*1000+playerid);
						l++;
					}
				    for(i = 0, j = MAX_COMPANIES; i < j; i++)
        		    {
        		        if(CompanyData[i][comMedia] == 0 || (GetGVarInt("UsingRadio", playerid) == 1 && GetGVarInt("PRadioID", playerid) == i)) continue;
        		        if(GetGVarInt("RadioPlaying", i) > 0)
						{
							format(status, sizeof(status), "DJ在线播放");
						}
						else if(CompanyData[i][comRadioAir] > 0)
						{
							trackid = CompanyData[i][comRadioTrack];
							format(status, sizeof(status), "排程播放:%s", RadioTrack[i][trackid][rdTitle]);
						}
						else continue;
        		        format(phonestr, sizeof(phonestr), "%s%s\t%s\n", phonestr, CompanyData[i][comRadioName], status);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"收音机", ""#TEXT_WHITE"目前没有任何正在播送的电台", "确认", "");
					format(phonestr, sizeof(phonestr), "电台名称\t状态\n%s", phonestr);
					ShowPlayerDialog(playerid, DIALOG_RADIO, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"收音机", phonestr, "收听", "返回");
				}
				case 3:
				{
				    if(GetGVarInt("Eventing", playerid) == 0)
				    {
					    new eventlist[512];
	     				for(i = l = 0, j = MAX_EVENTS; i < j; i++)
						{
							if(Event[i][evStatus] != STATUS_WAITING) { continue;}
							format(eventlist, sizeof(eventlist), "%s%s\t%s\t%s\t%d\n", eventlist, GetEventTypeName(i), GetEventType2Name(i), GetEventMapName(i), Event[i][evPlayers]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"参加活动", ""#TEXT_WHITE"目前没有任何开放进入的活动", "确定", "");}
						format(eventlist, sizeof(eventlist), "活动种类\t模式\t地图\t参加人数\n%s", eventlist);
						ShowPlayerDialog(playerid, DIALOG_EVENT_JOIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"参加活动", eventlist, "选择", "关闭");
					}
					else ShowPlayerDialog(playerid, DIALOG_EVENT_EXIT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"退出活动", ""TEXT_WHITE"你目前正在进行活动中\n是否要退出目前的活动?", "选择", "关闭");
				}
				case 4:
				{
				    ShowPlayerDialog(playerid, DIALOG_PHONE_SETTING, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"设定", ""#TEXT_WHITE"设定项目\n飞行模式\n切换静音\n删除所有短信", "选择", "返回");
				}
				case 5:
				{
				    //if(GetGVarInt("Calling", playerid) != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在通话中");
		    		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
					RemovePlayerAttachedObject(playerid, 5);
				    //cellphone
				}
			}
			return 1;
		}
		case DIALOG_RADIO:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(chosed == -1)
		    {
		        format(string, sizeof(string), "<<收音机>> 结束收听广播电台");
				SendClientMessage(playerid, COLOR_WHITE, string);
				PlayerTurnOffRadio(playerid);
		    }
		    else
		    {
				format(string, sizeof(string), "<<收音机>> 开始收听%s...", CompanyData[chosed][comRadioName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
				PlayerTuneToRadio(playerid, chosed);
			}
        	return 1;
        }
		case DIALOG_PHONE_CONTACT:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new ctype = GetGVarInt("DListID", listitem*1000+playerid);
			SetGVarInt("DDecideID", ctype, playerid);
			switch(ctype)
			{
				case CONTACT_PLAYER:
				{
				    new cid = GetGVarInt("DListID2", listitem*1000+playerid);
				    format(string, sizeof(string), ""#TEXT_WHITE"已选择:%s\n通话\n传送短信", PlayerData[cid][pName]);
					ShowPlayerDialog(playerid, DIALOG_PHONE_CONTACT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"联络人", string, "选择", "返回");
                    SetGVarInt("DDecideID2", cid, playerid);
				}
				case CONTACT_MNPC:
				{
				    new cid = GetGVarInt("DListID2", listitem*1000+playerid);
				    switch(cid)
				    {
				        case MNPC_SWEET: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMSweet]);
				        case MNPC_SIMEON: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMSimeon]);
				        case MNPC_TREVOR: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMTrevor]);
				        case MNPC_CESAR: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMCesar]);
				        case MNPC_EMMET: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒\n呼叫武器库($2,500)\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMEmmet], LimitData[playerid][plHEmmet]);
				        case MNPC_TORENO: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMToreno]);
				        case MNPC_WOOZIE: format(string, sizeof(string), "已选择:%s\t冷却时间\n接受任务\t%d秒", MissionNPC[cid][mpcName], LimitData[playerid][plMWoozie]);
				    	default: format(string, sizeof(string), "已选择:%s\t\n接受任务", MissionNPC[cid][mpcName]);
				    }
					ShowPlayerDialog(playerid, DIALOG_PHONE_CONTACT_NPC, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"联络人", string, "选择", "返回");
                    SetGVarInt("DDecideID2", cid, playerid);
				}
				case CONTACT_911:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至紧急服务");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_GOODS:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至联合物流");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_FD:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至速食外送");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_TAXI:
				{
				    new i, j, l, liststr[256];
					liststr[0] = EOS;
				    for(i = l = 0, j = MAX_COMPANIES; i < j; i++)
        		    {
        		        if(CompanyData[i][comTaxi] == 0) continue;
        		        if(GetCompanyOnlineMembers(i) > 0)
        		        {
	        		        format(liststr, sizeof(liststr), "%s%s\t%d\n", liststr, CompanyData[i][comName], GetCompanyOnlineMembers(i));
	        		        SetGVarInt("DListID", i, l*1000+playerid);
						    l++;
						}
					}
					if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"联络人", ""TEXT_WHITE"目前没有任何可呼叫的计程车企业", "确认", "");
				    format(liststr, sizeof(liststr), "企业名称\t在线成员数\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_PHONE_CONTACT_TAXI, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"联络人", liststr, "选择", "返回");
				}
				case CONTACT_TOW:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至道路救援");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_INSURE:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至摩斯姆通保险");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_BOUNTY:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至悬赏事务所");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case CONTACT_AD:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "正在通话至广告供应商");
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, 0);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
			}
			return 1;
		}
		case DIALOG_PHONE_CONTACT_TAXI:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new ctype = GetGVarInt("DDecideID", playerid),
			    cid = GetGVarInt("DListID", listitem*1000+playerid);
			format(string, sizeof(string), ""#TEXT_WHITE"正在通话至计程车业%s...", CompanyData[cid][comName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, cid);
			PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
			return 1;
		}
		case DIALOG_PHONE_CONTACT_CHECK:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new ctype = GetGVarInt("DDecideID", playerid),
			    cid = GetGVarInt("DDecideID2", playerid);
			switch(listitem)
			{
				case 0:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"正在通话至%s...", PlayerData[cid][pName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
				    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, cid);
				    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
				}
				case 1:
				{
				    format(string, sizeof(string), ""TEXT_WHITE"请输入要发送给%s的短信内容:", PlayerData[cid][pName]);
				    ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_SEND, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"传送短信", string, "传送", "返回");
				}
			}
			return 1;
		}
		case DIALOG_PHONE_CONTACT_NPC:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new ctype = GetGVarInt("DDecideID", playerid),
			    cid = GetGVarInt("DDecideID2", playerid);
			switch(listitem)
			{
				case 0: SetGVarInt("NContact", NCONTACT_MISSION, playerid);
				case 1: SetGVarInt("NContact", NCONTACT_HELP, playerid);
			}
			format(string, sizeof(string), ""#TEXT_WHITE"正在通话至%s...", MissionNPC[cid][mpcName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, ctype, cid);
			PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
			return 1;
		}
		case DIALOG_PHONE_TEXT_SEND:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new cid = GetGVarInt("DDecideID2", playerid);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) || strlen(inputtext) > 90)
			{
				return ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_SEND, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"传送短信", ""#TEXT_WHITE"短信长度过长,或是含有无法使用的字元", "传送", "返回");
			}
			if(GetGVarInt("Logged", cid) == 0 || cid == INVALID_PLAYER_ID) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "发送失败", ""#TEXT_WHITE"对方已经离线了", "确认", "");
			if(ConfigData[cid][cfPhoneOff] == 1) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "拨号失败", ""#TEXT_WHITE"对方目前手机关机,无法接收消息", "确认", "");
			if(GetPlayerTextMsgAmount(cid) >= MAX_TEXTS) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "发送失败", ""#TEXT_WHITE"短信发送失败!\n对方的短信信箱已经满了", "确认", "");

			SendPlayerTextMsg(cid, playerid, inputtext);
			format(string, sizeof(string), ""TEXT_WHITE"已发送完成!\n收件人:%s\n短信内容:\n%s", PlayerData[cid][pName], inputtext);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"发送完成", string, "确认", "");
			return 1;
		}
		case DIALOG_PHONE_TEXT_LIST:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
		        Year, Month, Day, Hour, Minute, Second;
		    TimestampToDate(TextMsg[playerid][chosed][tmTime], Year, Month, Day, Hour, Minute, Second, 8);
		    format(string, sizeof(string), ""TEXT_WHITE"收件人:%s\n寄件时间:%d-%d-%d %02d:%02d:%02d\n短信内容:\n%s",
			GetTextSenderName(playerid, chosed), Year, Month, Day, Hour, Minute, Second, TextMsg[playerid][chosed][tmText]);
			ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"短信", string, "选项", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
        	return 1;
        }
        case DIALOG_PHONE_TEXT_CHECK:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid);
		    switch(TextMsg[playerid][chosed][tmSenderType])
		    {
		        case 1: ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_OPTION, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"短信", ""#TEXT_WHITE"请选择选项\n"#TEXT_YELLOW"回信\n"#TEXT_FADEGREEN"回拨\n"#TEXT_RED"删除", "选项", "关闭");
		        case 2:
				{
				    if(TextMsg[playerid][chosed][tmSenderID] == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"短信", ""#TEXT_WHITE"这是无效的联络人", "确认", "");
					ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_OPTION, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"短信", ""#TEXT_WHITE"请选择选项\n"#TEXT_FADEGREEN"接受任务\n"#TEXT_RED"删除", "选项", "关闭");
				}
		    }
		    return 1;
		}
		case DIALOG_PHONE_TEXT_OPTION:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			new chosed = GetGVarInt("DDecideID", playerid);
			switch(TextMsg[playerid][chosed][tmSenderType])
			{
			    case 1:
			    {
			        new senderid = PlayerSqlIDToID(TextMsg[playerid][chosed][tmSenderID]);
			        switch(listitem)
					{
					    case 0:
						{
						    if(!GetGVarInt("Logged", senderid)) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "通话失败", ""#TEXT_WHITE"对方已经离线了", "确认", "");
						    format(string, sizeof(string), ""TEXT_WHITE"请输入要发送给%s的短信内容:", PlayerData[senderid][pName]);
						    ShowPlayerDialog(playerid, DIALOG_PHONE_TEXT_SEND, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"传送短信", string, "传送", "返回");
						    SetGVarInt("DDecideID2", senderid, playerid);
						}
						case 1:
						{
						    if(!GetGVarInt("Logged", senderid)) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "通话失败", ""#TEXT_WHITE"对方已经离线了", "确认", "");
						    format(string, sizeof(string), ""#TEXT_WHITE"正在通话至%s...", PlayerData[senderid][pName]);
						    SendClientMessage(playerid, COLOR_WHITE, string);
						    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, CONTACT_PLAYER, senderid);
						    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
						}
						case 2:
						{
						    DeletePlayerText(playerid, chosed);
						    SendClientMessage(playerid, COLOR_WHITE, "<<删除完成>> 短信已删除!");
						    ShowPlayerPhoneMenu(playerid);
						}
					}
			    }
			    case 2:
			    {
			        new senderid = TextMsg[playerid][chosed][tmSenderID];
			        switch(listitem)
					{
						case 0:
						{
						    if(senderid == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "通话失败", ""#TEXT_WHITE"无效的联络人", "确认", "");
							format(string, sizeof(string), ""#TEXT_WHITE"正在通话至%s...", MissionNPC[senderid][mpcName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
						    SetPlayerTimerEx(playerid, "PlayerPhoneCall", 3000, 0, "idd", playerid, CONTACT_MNPC, senderid);
						    PlayerPlaySound(playerid, 3600, 0.0, 0.0, 0.0);
						}
						case 1:
						{
						    DeletePlayerText(playerid, chosed);
							SendClientMessage(playerid, COLOR_WHITE, "短信已删除!");
						    ShowPlayerPhoneMenu(playerid);
						}
					}
			    }
			}
			return 1;
		}
		case DIALOG_PHONE_SETTING:
		{
		    if (!response) return ShowPlayerPhoneMenu(playerid);
			switch(listitem)
			{
				case 0:
				{
				    if(ConfigData[playerid][cfPhoneOff] == 1)
				    {
						SendClientMessage(playerid, COLOR_WHITE, "短信已删除!");
				        ConfigData[playerid][cfPhoneOff] = 0;
				    }
				    else
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "已开启飞行模式!");
				        ConfigData[playerid][cfPhoneOff] = 1;
				    }
				}
				case 1:
				{
				    if(ConfigData[playerid][cfPhoneMute] == 1)
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "已开启铃声!");
				        ConfigData[playerid][cfPhoneMute] = 0;
				    }
				    else
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "已将手机静音!");
				        ConfigData[playerid][cfPhoneMute] = 1;
				    }
				}
				case 2:
				{
				    DeleteAllPlayerText(playerid);
				    SendClientMessage(playerid, COLOR_WHITE, "已删除所有短信!");
				}
			}
			return 1;
		}
		case DIALOG_911:
		{
		    if (!response) return 1;
		    switch(listitem)
			{
				case 0:
				{
				    new i, j, l, liststr[1024];
				    liststr[0] = EOS, l = 0;
				    ForEachPlayer(p)
				    {
				        for(i = 0, j = MAX_CRIMES; i < j; i++)
						{
							if(Crime[p][i][crType] == CRIME_NONE) { continue;}
							if((Crime[p][i][crVictimType] == VICTIM_PLAYER && Crime[p][i][crVictimID] == playerid) || GetPlayerDistanceFromPointEx(playerid, Crime[p][i][crX], Crime[p][i][crY], Crime[p][i][crZ]) < 20.0)
							{
								format(liststr, sizeof(liststr), "%s%s\t%s\t%s\n", liststr, PlayerData[p][pName], GetCrimeVictimName(p, i), GetCrimeTypeName(Crime[p][i][crType]));
								SetGVarInt("DListID", p, l*1000+playerid);
								SetGVarInt("DListID2", i, l*1000+playerid);
								l++;
							}
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"紧急服务", ""#TEXT_WHITE"所在地附近没有任何可以举报的案件", "确定", "");}
					format(liststr, sizeof(liststr), "加害者\t受害者\t行为\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_911_POLICE, DIALOG_STYLE_TABLIST_HEADERS, "紧急服务", liststr, "确认报案", "关闭");
				}
				case 1:
				{
					if(GetPlayerHealth_Fix(playerid) > 99.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的状态不需要医疗服务");
					if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法请求医疗服务");
					if(GetGVarInt("CalledMedic", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "你已经呼叫过医疗服务了");
					SetGVarInt("CalledMedic", 1, playerid);
					SendClientMessage(playerid, COLOR_WHITE, "** 你请求了医疗服务,若有在线的医疗人员将会尽快到达你的位置");
					format(string, sizeof(string), "** %s 请求了医疗救援服务,请在线的成员驾驶救护车查询并前往他的位置救援", PlayerData[playerid][pName]);
					SendDeptMessage(DEPT_MEDIC, COLOR_YELLOW, string);
		    		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
					RemovePlayerAttachedObject(playerid, 5);
				}
			}
			return 1;
		}
		case DIALOG_911_POLICE:
		{
		    if (!response) return 1;
		    new criminal = GetGVarInt("DListID", listitem*1000+playerid),
				chosed = GetGVarInt("DListID2", listitem*1000+playerid);
			if(Crime[criminal][chosed][crType] == CRIME_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该行为追溯期已过");
			if(!GetGVarInt("Logged", criminal)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 举报目标已经离线");
			SendClientMessage(playerid, COLOR_WHITE, "** 警方已经收到你的报案,将会立即采取行动");
			CrimeToWanted(criminal, chosed);
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
			return 1;
		}
		case DIALOG_GOODS:
		{
		    if (!response) return 1;
		    switch(listitem)
			{
				case 0:
				{
				    if(GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法订购原料");
				    new i, j, l, liststr[256];
				    liststr[0] = EOS;
				    for(i = l = 0, j = sizeof(ItemsList_USE); i < j; i++)
					{
						if(ItemsList_USE[i][iuType] != IU_FMAT) { continue;}
						format(liststr, sizeof(liststr), "%s%s\t%d\t$%d\n", liststr, ItemsList_USE[i][iuName], ItemsList_USE[i][iuSpace], ItemsList_USE[i][iuPrice]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"订购原料", ""#TEXT_WHITE"目前没有任何原料可以订购", "确定", "");}
					format(liststr, sizeof(liststr), "名称\t占用空间\t价格\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_GOODS_BUY1, DIALOG_STYLE_TABLIST_HEADERS, "订购原料", liststr, "订购", "关闭");
				}
				case 1:
				{
				    new i, j, l, liststr[512], typetxt[24];
				    liststr[0] = EOS;
				    for(i = l = 0, j = MAX_MATWARS; i < j; i++)
					{
						if(MatWar[i][mwStatus] == 0) { continue;}
						switch(MatWar[i][mwType])
						{
						    case MW_VEH: format(typetxt, sizeof(typetxt), "装于载具");
						    case MW_DROP:
							{
								if(MatWar[i][mwStatus] == 1) format(typetxt, sizeof(typetxt), "等待空投");
								else format(typetxt, sizeof(typetxt), "已空投");
							}
							case MW_NPC:
							{
							    if(MatWar[i][mwStatus] == 1) format(typetxt, sizeof(typetxt), "混混身上");
							    else if(MatWar[i][mwStatus] == 2) format(typetxt, sizeof(typetxt), "已掉落");
								else format(typetxt, sizeof(typetxt), "玩家身上");
							}
						}
						format(liststr, sizeof(liststr), "%s%s\t%d\t%s\n", liststr, ItemsList_USE[MatWar[i][mwMatID]][iuName], MatWar[i][mwMatAmount], typetxt);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"进行中的货物战争", ""#TEXT_WHITE"目前没有进行中的货物战争", "确定", "");}
					format(liststr, sizeof(liststr), "货物种类\t数量\t状态\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_GOODS_JOINWAR, DIALOG_STYLE_TABLIST_HEADERS, "进行中的货物战争", liststr, "参与", "关闭");
				}
				case 2:
				{
				    new i, j, k, l, liststr[512], location[24];
				    liststr[0] = EOS;
				    for(i = l = 0, j = MAX_GOODBUYERS; i < j; i++)
					{
						if(GoodBuyer[i][gbBuyerID] == 0) { continue;}
						k = GoodBuyer[i][gbBuyerID];
						switch(GetGVarInt("GBPlace", i))
						{
						    case 0: format(location, sizeof(location), "洛圣都(LS)");
						    case 1: format(location, sizeof(location), "圣费耶洛(SF)");
						    case 2: format(location, sizeof(location), "拉斯维托拉斯(LV)");
						}
						format(liststr, sizeof(liststr), "%s%s\t%s(%d)\t$%d\t%s\n", liststr, BuyersList[k][gbName], ItemsList_USE[GoodBuyer[i][gbGoodID]][iuName], GoodBuyer[i][gbGoodAmount], GoodBuyer[i][gbGoodPrice], location);
                        SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"海外货物买家", ""#TEXT_WHITE"目前没有任何买家", "确定", "");}
					format(liststr, sizeof(liststr), "买家\t需求货物(剩余需求/箱)\t每箱出价\t交易地点\n%s", liststr);
					ShowPlayerDialog(playerid, DIALOG_GOODS_BUYERS, DIALOG_STYLE_TABLIST_HEADERS, "海外货物买家", liststr, "贩卖货物", "关闭");
				}
				case 3:
				{
				    ShowPlayerDialog(playerid, DIALOG_GOODS_INFO, DIALOG_STYLE_MSGBOX, "关于物流",
					""#TEXT_YELLOW"原料用途:\n"#TEXT_WHITE"各类原料可以通过组织购买的"#TEXT_YELLOW"工厂"#TEXT_WHITE"加工\n来制成可以使用,或是进一步以更高价格出售的货物\n"#TEXT_FADEGREEN"原料的取得:\n"#TEXT_WHITE"您可以通过电话连络我们联合物流订购原料\n或是可以参与定时举行的"#TEXT_FADERED"货物战争"#TEXT_WHITE"来与其他玩家争夺免费的货物\n"#TEXT_FADEBLUE"货物的出口:\n"#TEXT_WHITE"要出口制成的货物,您可以通过GPS的"#TEXT_VIOLET"物流"#TEXT_WHITE"分类寻找到我们的据点\n并通过载具将您的物流运送到我们这边经手出口\n卖出原料的收入将会归卖出货物的玩家所有", "确认", "");
				}
			}
			return 1;
		}
		case DIALOG_GOODS_INFO:
		{
		    if (!response) return 1;
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		    ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n海外买家列表\n取得说明", "选择", "返回");
		    return 1;
		}
		case DIALOG_GOODS_SELL1:
		{
		    if (!response) return 1;
		    new i, j, k, l, liststr[256],
			place = GetGVarInt("GBNPC", playerid);
			for(i = l = 0, j = MAX_GOODBUYERS; i < j; i++)
			{
				if(GoodBuyer[i][gbBuyerID] == 0) { continue;}
				if(GetGVarInt("GBPlace", i) == place)
				{
					k = GoodBuyer[i][gbBuyerID];
					format(liststr, sizeof(liststr), "%s%s\t%s\t%d\t$%d\n", liststr, BuyersList[k][gbName], ItemsList_USE[GoodBuyer[i][gbGoodID]][iuName], GoodBuyer[i][gbGoodAmount], GoodBuyer[i][gbGoodPrice]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"选择买家", ""#TEXT_WHITE"目前没有任何买家", "确定", "");}
			format(liststr, sizeof(liststr), "买家\t需求货物\t剩余需求数\t每箱出价\n%s", liststr);
			ShowPlayerDialog(playerid, DIALOG_GOODS_SELL2, DIALOG_STYLE_TABLIST_HEADERS, "选择买家", liststr, "选择", "关闭");
		    return 1;
		}
		case DIALOG_GOODS_SELL2:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				buyer = GoodBuyer[chosed][gbBuyerID];
			if(buyer == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个买家已经结束交易了");
			if(!PlayerHaveItem(playerid, ITEM_USE, GoodBuyer[chosed][gbGoodID])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这个买家需求的货物");
			format(string, sizeof(string), ""#TEXT_WHITE"买家名称:%s\n需求货物:%s\n剩余需求数:%d\n每箱出价:$%d\n请输入要交易的货物数量,目前你身上有%d箱", BuyersList[buyer][gbName], ItemsList_USE[GoodBuyer[chosed][gbGoodID]][iuName], GoodBuyer[chosed][gbGoodAmount], GoodBuyer[chosed][gbGoodPrice], PlayerHaveItem(playerid, ITEM_USE, GoodBuyer[chosed][gbGoodID]));
			ShowPlayerDialog(playerid, DIALOG_GOODS_SELL3, DIALOG_STYLE_INPUT, "确认交易", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_GOODS_SELL3:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				buyer = GoodBuyer[chosed][gbBuyerID],
				amount = strval(inputtext);
			if(buyer == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个买家已经结束交易了");
			if(PlayerHaveItem(playerid, ITEM_USE, GoodBuyer[chosed][gbGoodID]) < amount) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多货物");
			if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 卖的数量不得小于1");
			if(amount > GoodBuyer[chosed][gbGoodAmount]) amount = GoodBuyer[chosed][gbGoodAmount];
			GivePlayerItem(playerid, ITEM_USE, GoodBuyer[chosed][gbGoodID], -amount);
			GiveMoney(playerid, amount*GoodBuyer[chosed][gbGoodPrice]);
			Log(moneylog, INFO, "%s(%d)于货物市场卖出了%d个%s,赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[GoodBuyer[chosed][gbGoodID]][iuName], amount*GoodBuyer[chosed][gbGoodPrice]);
			GoodBuyer[chosed][gbGoodAmount] -= amount;
			format(string, sizeof(string), "** 交易完成,你卖出了%d个%s,获得了交易金共$%d", amount, ItemsList_USE[GoodBuyer[chosed][gbGoodID]][iuName], amount*GoodBuyer[chosed][gbGoodPrice]);
			SendClientMessage(playerid, COLOR_FADEGREEN, string);
			if(GoodBuyer[chosed][gbGoodAmount] == 0) DeleteGoodBuyer(chosed);
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		    return 1;
		}
		case DIALOG_GOODS_BUYERS:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n联络海外买家\n取得说明", "选择", "返回");
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			switch(GetGVarInt("GBPlace", chosed))
			{
			    case 0: SetPlayerGPS(playerid, 2067.3716,-2209.3491,13.5469);
			    case 1: SetPlayerGPS(playerid, -1705.3439,64.8994,3.5495);
			    case 2: SetPlayerGPS(playerid, 2840.6001,1381.8423,10.8922);
			}
			SendClientMessage(playerid, COLOR_WHITE, "** 已为你标注"#TEXT_VIOLET"交易地点"#TEXT_WHITE",前往找到交易NPC即可出售货物");
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		    return 1;
		}
		case DIALOG_GOODS_JOINWAR:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n联络海外买家\n取得说明", "选择", "返回");
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(MatWar[chosed][mwStatus] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这场货物战争已经结束");
		    SetGVarInt("PlayerTraceMW", 1, playerid);
		    SetGVarInt("PlayerTraceMWID", chosed, playerid);
		    PlayerTraceMatWar(playerid, chosed);
		    SendClientMessage(playerid, COLOR_WHITE, "货物目前的所在位置已经为你标记在地图上了");
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		    return 1;
		}
		case DIALOG_GOODS_BUY1:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n联络海外买家\n取得说明", "选择", "返回");
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法订购原料");
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了 %s \n每箱价格: $%d\n每箱需要%d空间\n请输入订购数量\n订购后原料将会以空投的方式掉落在你的位置",
			ItemsList_USE[chosed][iuName], ItemsList_USE[chosed][iuPrice], ItemsList_USE[chosed][iuSpace]);
		    ShowPlayerDialog(playerid, DIALOG_GOODS_BUY2, DIALOG_STYLE_INPUT, "订购原料", string, "订购", "关闭");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_GOODS_BUY2:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n联络海外买家\n取得说明", "选择", "返回");
		    new chosed = GetGVarInt("DDecideID", playerid),
		        amount = strval(inputtext),
		        cost = ItemsList_USE[chosed][iuPrice]*amount,
				Float:px, Float:py, Float:pz;
		    if(GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法订购原料");
		    if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_GOODS_BUY2, DIALOG_STYLE_INPUT, "订购原料", ""#TEXT_WHITE"订购数量不得小于1,请重新输入", "订购", "关闭");
		    if(PlayerData[playerid][pCash] < cost) return ShowPlayerDialog(playerid, DIALOG_GOODS_BUY2, DIALOG_STYLE_INPUT, "订购原料", ""#TEXT_WHITE"你的现金不足,请重新输入", "订购", "关闭");
		    GetPlayerPos(playerid, px, py, pz);
		    format(string, sizeof(string), ""#TEXT_WHITE"订购完成!\n你订购了%d箱[%s]\n花费了你现金$%d\n原料将会在数秒后降落在你的目前位置", amount, ItemsList_USE[chosed][iuName], cost);
		    ShowPlayerDialog(playerid, DIALOG_GOODS_INFO, DIALOG_STYLE_MSGBOX, "订购原料", string, "确认", "");
		    GiveMoney(playerid, -cost);
		    Log(moneylog, INFO, "%s(%d)于联合物流订购了%d个%s,花费了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[chosed][iuName], cost);
		    CreateAirDrop(ITEM_USE, chosed, amount, px, py, pz+60.0, 0, 3.0);
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		    return 1;
		}
		case DIALOG_INFO:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    switch(listitem)
			{
			    case 0: ShowPlayerDialog(playerid, DIALOG_INFO_TITLE, DIALOG_STYLE_TABLIST_HEADERS, "切换头衔", ""#TEXT_WHITE"选择你要公开的头衔\n无头衔\n企业头衔\n帮会头衔\n帮会头衔(全名)\n部门头衔", "选择", "关闭");
			    case 9: ShowPlayerRecordMenu(playerid);
			}
			return 1;
		}
		case DIALOG_INFO_TITLE:
		{
		    if (!response) return ShowPlayerInfoMenu(playerid);
		    switch(listitem)
			{
			    case 0:
			    {
			        PlayerData[playerid][pTitle] = TITLE_NONE;
			        SendClientMessage(playerid, COLOR_WHITE, "** 已将头衔设定为无头衔");
			    }
			    case 1:
			    {
			        if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何企业");
			        PlayerData[playerid][pTitle] = TITLE_COMPANY;
			        SendClientMessage(playerid, COLOR_WHITE, "** 已将头衔设定为企业头衔");
			    }
			    case 2:
			    {
			        if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何帮会");
			        PlayerData[playerid][pTitle] = TITLE_GANG;
			        SendClientMessage(playerid, COLOR_WHITE, "** 已将头衔设定为帮会头衔");
			    }
			    case 3:
			    {
			        if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何帮会");
			        PlayerData[playerid][pTitle] = TITLE_GANG_FULL;
			        SendClientMessage(playerid, COLOR_WHITE, "** 已将头衔设定为帮会头衔(全名显示)");
			    }
			    case 4:
			    {
			        if(PlayerData[playerid][pDepartment] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何公部门");
			        PlayerData[playerid][pTitle] = TITLE_DEPARTMENT;
			        SendClientMessage(playerid, COLOR_WHITE, "** 已将头衔设定为部门头衔");
			    }
			}
			UpdatePlayerColor(playerid);
			ShowPlayerInfoMenu(playerid);
			return 1;
		}
  		case DIALOG_CLICKME:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    switch(chosed)
			{
			    case PMENU_JAIL: ShowPlayerJailMenu(playerid);
			    case PMENU_WANTED: ShowPlayerWantedMenu(playerid);
			    case PMENU_BAG: ShowPlayerBagMenu(playerid);
				case PMENU_INFO: ShowPlayerInfoMenu(playerid);
				case PMENU_PROP: ShowPlayerPropertyMenu(playerid);
				case PMENU_DEPT: ShowPlayerDepartmentMenu(playerid);
				case PMENU_COMPANY: ShowPlayerCompanyMenu(playerid);
				case PMENU_GANG: ShowPlayerGangMenu(playerid);
				case PMENU_MISSION: ShowPlayerMissionMenu(playerid);
				case PMENU_TEAM:
			    {
			        if(GetGVarInt("Eventing", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "在活动中无法使用小队功能");
			        new pteam = GetPlayerTeam(playerid);
					if(pteam == NO_TEAM)
			        {
				        format(string, sizeof(string), ""#TEXT_WHITE"你目前尚未加入任何小队\n小队列表\n建立小队\n什么是小队?");
						ShowPlayerDialog(playerid, DIALOG_TEAM_NONE, DIALOG_STYLE_TABLIST_HEADERS, "小队", string, "选择", "关闭");
					}
					else
					{
					    if(Team[pteam][tLeader] == playerid)
					    {
						    format(string, sizeof(string), ""#TEXT_WHITE"你的小队: %s\n查看队员\n邀请玩家\n管理小队\n解散小队", Team[pteam][tName]);
							ShowPlayerDialog(playerid, DIALOG_TEAM_LEADER, DIALOG_STYLE_TABLIST_HEADERS, "小队", string, "选择", "关闭");
						}
						else
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"你所在的小队: %s\n查看队员\n离开小队", Team[pteam][tName]);
							ShowPlayerDialog(playerid, DIALOG_TEAM_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, "小队", string, "选择", "关闭");
						}
					}
				}
				case PMENU_SKILL: ShowPlayerSkillMenu(playerid);
				case PMENU_MIX: ShowPlayerMixMenu(playerid);
				case PMENU_CONFIG: ShowPlayerConfigMenu(playerid);
				case PMENU_GIFT: ShowPlayerGiftMenu(playerid);
				case PMENU_HELP: ShowPlayerHelpMenu(playerid);
				case PMENU_ANIM: ShowPlayerAnimSetting(playerid);
			}
			return 1;
		}
		case DIALOG_CLICKME_PROPERTY:
		{
		    if (!response)
			{
			    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				else return ShowPlayerMenu(playerid);
			}
	        new checkid = GetGVarInt("DDecidePlayer", playerid);
	        ShowPlayerPropertyList(playerid, checkid, listitem, 0);
			return 1;
		}
		case DIALOG_PLAYER_ESTATE:
		{
		    if (!response)
			{
			    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				else return ShowPlayerPropertyMenu(playerid);
			}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				checkid = GetGVarInt("DDecidePlayer", playerid);
		    if(chosed == PREV_PAGE) ShowPlayerPropertyList(playerid, checkid, 1, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerPropertyList(playerid, checkid, 1, GetGVarInt("Page", playerid)+1);
		    else
		    {
		        if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
			    if(EstateData[chosed][eOwnerID] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你了");
			    format(string, sizeof(string), ""#TEXT_WHITE"%s\t \n导航\n出售地产\n转卖地产", EstateData[chosed][eName]);
			    ShowPlayerDialog(playerid, DIALOG_PLAYER_ESTATE_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看地产", string, "选择", "取消");
			    SetGVarInt("DDecideID", chosed, playerid);
			}
		    return 1;
		}
		case DIALOG_PLAYER_ESTATE_SET:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(EstateData[chosed][eOwnerID] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            SetPlayerGPS(playerid, EstateData[chosed][eX], EstateData[chosed][eY], EstateData[chosed][eZ]);
					format(string, sizeof(string), ""#TEXT_WHITE"已标记了"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE"的位置", EstateData[chosed][eName]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
				}
				case 1:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n房地产公司出价为$%d,卖出后这笔钱会汇入你的银行帐户", EstateData[chosed][eName], EstateData[chosed][ePrice]/2);
					ShowPlayerDialog(playerid, DIALOG_PLAYER_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "卖出地产", string, "确认", "取消");
				}
				case 2:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"请输入要交易这栋地产%s的金额", EstateData[chosed][eName]);
				    ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", string, "确认", "取消");
                }
			}
			return 1;
		}
		case DIALOG_ESTATE_TRADE1:
		{
		    if (!response) return 1;
			if(strval(inputtext) < 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", ""#TEXT_WHITE"交易金额不得小于0,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了交易金额 $%d\n请输入交易玩家的名称或ID", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", string, "发起交易", "取消");
            SetGVarInt("DTradePrice", strval(inputtext), playerid);
			return 1;
        }
        case DIALOG_ESTATE_TRADE2:
		{
		    if (!response) return 1;
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	eid = GetGVarInt("DDecideID", playerid),
		    	price = GetGVarInt("DTradePrice", playerid);

			if(!IsPlayerEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个不是你的地产");
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "发起交易", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", ""#TEXT_WHITE"你不能跟自己交易,请重新输入", "发起交易", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_ESTATE_TRADE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"转卖地产", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "发起交易", "取消");
            }
            SetGVarInt("TEstateID", eid, giveplayerid);
            SetGVarInt("TPrice", price, giveplayerid);
            SetGVarInt("TTrader", playerid, giveplayerid);
            format(string, sizeof(string), ""#TEXT_WHITE"玩家 %s 想要卖给你地产:\n地产名称: %s\n金额: %d", playername, EstateData[eid][eName], price);
            ShowPlayerDialog(giveplayerid, DIALOG_TRADE_ESTATE, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易载具", string, "接受", "拒绝");

            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"已发给玩家 %s 一笔交易:\n地产名称: %s\n金额: %d", giveplayername, EstateData[eid][eName], price);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"转卖载具", string, "确认", "");
			return 1;
        }
        case DIALOG_TRADE_ESTATE:
        {
            if (!response) return 1;
            new Float:px, Float:py, Float:pz, tradername[MAX_PLAYER_NAME],
                eid = GetGVarInt("TEstateID", playerid),
            	price = GetGVarInt("TPrice", playerid),
            	trader = GetGVarInt("TTrader", playerid);

            if(EstateData[eid][eType] != ESTATE_SUITE && EstateData[eid][eType] != ESTATE_HOUSE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有房屋或套房可以被转卖");
			if(!IsPlayerEstate(trader, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这栋地产已经不属于卖家的了");
            if(!GetGVarInt("Logged", trader))
			{
			    return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家名称ID不存在,或是已经离线");
            }
            GetPlayerPos(trader, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(trader))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
            }
            if(price > PlayerData[playerid][pCash])
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上的钱不够与你交易");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上没有这么多钱");
            }
            if(!PlayerCanBuyEstate(playerid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家已经无法买更多地产了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你已经无法买更多地产了");
            }

            EstateData[eid][eOwnerType] = ESTATE_OWNER_PLAYER;
            EstateData[eid][eOwnerID] = PlayerData[playerid][pID];
            GiveMoney(playerid, -price);
			GiveMoney(trader, price);
            Log(moneylog, INFO, "%s(%d)将地产%s(%d)卖给了%s(%d),金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], EstateData[eid][eName], EstateData[eid][eID], PlayerData[playerid][pName], PlayerData[playerid][pID], price);
            Log(estatelog, INFO, "s(%d)将地产%s(%d)卖给了%s(%d),金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], EstateData[eid][eName], EstateData[eid][eID], PlayerData[playerid][pName], PlayerData[playerid][pID], price);
			GetPlayerName(trader, tradername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_WHITE" %s 与你交易了 %s,花费了你现金 $%d", tradername, EstateData[eid][eName], price);
			SendClientMessage(playerid, COLOR_WHITE, string);

			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_LIGHTORANGE" 你与 %s 交易了 %s,交易得了现金 $%d", playername, EstateData[eid][eName], price);
			SendClientMessage(trader, COLOR_WHITE, string);

			format(string, sizeof(string), "** %s 卖给了%s地产%s,并将钥匙交给他 **", tradername, playername, EstateData[eid][eName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
		case DIALOG_PLAYER_ESTATE_SELL:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				value = EstateData[chosed][ePrice]/2;
		    if(EstateData[chosed][eOwnerID] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你了");
		    format(string, sizeof(string), "** 你已把地产 %s 卖出了,并收到了房地产公司的汇款$%d", EstateData[chosed][eName], value);
			SendClientMessage(playerid, COLOR_YELLOW, string);
		    PlayerData[playerid][pBank] += value;
		    Log(moneylog, INFO, "%s(%d)卖出了地产%s(%d)获得了$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[chosed][eName], EstateData[chosed][eID], value);
		    Log(estatelog, INFO, "s(%d)卖出了地产%s(%d)获得了$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[chosed][eName], EstateData[chosed][eID], value);
		    DeleteEstateOwner(chosed);
			if(RemoveEstateFurniture(chosed) > 0)
			{
				format(string, sizeof(string), "** 地产内布置的物件已被移至该地产门口");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
		case DIALOG_TEAM_NONE:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new i, j, l, teamstring[1024];
		    switch(listitem)
			{
			    case 0:
			    {
			        for(i = l = 0, j = MAX_TEAMS; i < j; i++)
					{
						if(Team[i][tPublic] == 0) { continue;}
						format(teamstring, sizeof(teamstring), "%s%s\t%d/6\t%s\n", teamstring, Team[i][tName], Team[i][tMembers], PlayerData[Team[i][tLeader]][pName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"小队列表", ""#TEXT_WHITE"目前没有任何公开的小队", "确定", "");}
					format(teamstring, sizeof(teamstring), "小队名称\t人数\t队长\n%s", teamstring);
					ShowPlayerDialog(playerid, DIALOG_TEAM_LIST, DIALOG_STYLE_TABLIST_HEADERS, "小队列表", teamstring, "请求加入", "关闭");
					return 1;
				}
				case 1:
				{
					for(i = l = 0, j = MAX_TEAMS; i < j; i++) {
						if(Team[i][tLeader] == playerid){
							return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"建立小队", ""#TEXT_WHITE"建立失败\n目前无法再建立新小队", "确定", "");
						}
					}
				    for(i = l = 0, j = MAX_TEAMS; i < j; i++)
					{
						if(Team[i][tCreated] == 1) { continue;}
						Team[i][tCreated] = 1;
						format(Team[i][tName], 64, "%s的小队", PlayerData[playerid][pName]);
						Team[i][tPublic] = 1;
						Team[i][tLeader] = playerid;
						Team[i][tMembers] = 1;
						PutPlayerToTeam(playerid, i);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"建立小队", ""#TEXT_WHITE"建立完成\n你可以在小队菜单管理自己的小队", "确定", "");
						l = 1;
						break;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"建立小队", ""#TEXT_WHITE"建立失败\n目前无法再建立新小队", "确定", "");}
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"小队", ""#TEXT_WHITE"玩家可以加入或自行组成一个小队\n一个小队最多只能有5位玩家\n小队间的玩家跟载具不会被彼此的火力伤害\n小队的好处:\n当队长进行联络人任务时,所有其他未参加任务的队员也会一同加入任务\n小队可以参加小队间的竞赛活动(STD,SDM以及小队生存战等等..)\n也可以组织进行大型抢劫任务\n\n** 小队在队长离线后就会被自动解散", "确定", "");
				}
			}
			return 1;
		}
		case DIALOG_TEAM_LEADER:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new teamstring[256], l,
		    pteam = GetPlayerTeam(playerid);
		    switch(listitem)
			{
			    case 0:
			    {
			        l = 0;
			        ForEachPlayer(i)
					{
						if(GetPlayerTeam(i) == pteam)
						{
							format(teamstring, sizeof(teamstring), "%s%s(%d)\t%d\n", teamstring, PlayerData[i][pName], i, PlayerData[i][pLevel]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"队员列表", ""#TEXT_WHITE"目前小队内没有任何队员", "确定", "");}
					format(teamstring, sizeof(teamstring), "队员名称\t等级\n%s", teamstring);
					ShowPlayerDialog(playerid, DIALOG_TEAM_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, "队员列表", teamstring, "请出小队", "关闭");
					return 1;
				}
				case 1:
				{
				    if(Team[pteam][tMembers] >= 6)
				    {
				        return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"目前小队已经满员\n无法再邀请玩家加入", "确定", "");
					}
				    ShowPlayerDialog(playerid, DIALOG_TEAM_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"请输入要邀请的玩家名称或ID", "发送邀请", "取消");
				}
				case 2:
				{
				    new opt1[8];
				    if(Team[pteam][tPublic] == 1) format(opt1, sizeof(opt1), "是");
				    else format(opt1, sizeof(opt1), "否");
				    format(string, sizeof(string), "设定项目\t \n更改小队名称\t%s\n是否公开小队\t%s", Team[pteam][tName], opt1);
				    ShowPlayerDialog(playerid, DIALOG_TEAM_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "设定小队", string, "设定", "关闭");
				}
				case 3:
				{
				    ShowPlayerDialog(playerid, DIALOG_TEAM_LEAVE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"解散小队", ""#TEXT_WHITE"确认要解散小队?", "确定", "取消");
				}
			}
			return 1;
		}
        case DIALOG_TEAM_MEMBER:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new teamstring[256], check,
		    pteam = GetPlayerTeam(playerid);
		    switch(listitem)
			{
			    case 0:
			    {
			        check = 0;
			        ForEachPlayer(i)
					{
						if(GetPlayerTeam(i) == pteam)
						{
							if(Team[pteam][tLeader] == i) format(teamstring, sizeof(teamstring), ""#TEXT_YELLOW"%s%s\t%d\n", teamstring, PlayerData[i][pName], PlayerData[i][pLevel]);
							else format(teamstring, sizeof(teamstring), "%s%s(%d)\t%d\n", teamstring, PlayerData[i][pName], i, PlayerData[i][pLevel]);
							check ++;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"队员列表", ""#TEXT_WHITE"目前小队内没有任何队员", "确定", "");}
					format(teamstring, sizeof(teamstring), "队员名称\t等级\n%s", teamstring);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, "队员列表", teamstring, "确认", "");
					return 1;
				}
				case 1:
				{
				    ShowPlayerDialog(playerid, DIALOG_TEAM_LEAVE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"离开小队", ""#TEXT_WHITE"确认要离开目前所在小队?", "确定", "取消");
				}
			}
			return 1;
		}
        case DIALOG_TEAM_INVITE:
        {
            if (!response) return 1;
            new giveplayerid, giveplayername[MAX_PLAYER_NAME],
            pteam = GetPlayerTeam(playerid);
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_TEAM_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", "该玩家名称或ID不存在,请重新输入", "确认", "关闭");
            }
            if(Team[pteam][tMembers] >= 6)
			{
		 		return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"目前小队已经满员\n无法再邀请玩家加入", "确定", "");
			}
			if(GetPlayerTeam(giveplayerid) != NO_TEAM) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经在别的小队里了");
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"有小队向你发出邀请,是否要加入?\n小队名称: %s\n队长: %s(%d)", Team[pteam][tName], PlayerData[playerid][pName], playerid);
            ShowPlayerDialog(giveplayerid, DIALOG_INVITE_TEAM, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"小队邀请", string, "加入", "无视");
            SetGVarInt("InvitedTeam", pteam, giveplayerid);
            format(string, sizeof(string), "** 你已向 %s 发出小队邀请", giveplayername);
            SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TEAM_LIST:
        {
            if (!response) return ShowPlayerMenu(playerid);
            new
            teamid = GetGVarInt("DListID", listitem*1000+playerid);
            format(string, sizeof(string), "<<小队>> 玩家 %s(%d) 希望能加入小队,请求队长发送邀请加入", PlayerData[playerid][pName], playerid);
	        SendTeamMessage(teamid, COLOR_LIGHTBLUE, string);
            format(string, sizeof(string), "** 你已向 %s 发出加入请求", Team[teamid][tName]);
            SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TEAM_MEMBERS:
        {
            if (!response) return ShowPlayerMenu(playerid);
            new
            pteam = GetPlayerTeam(playerid),
            kickid = GetGVarInt("DListID", listitem*1000+playerid);
            if(kickid == playerid)
            {
                return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请出小队", "你无法将自己移出小队", "确认", "关闭");
            }
            if(Team[pteam][tLeader] != playerid)
            {
                return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请出小队", "你没有移出其他队员的权限", "确认", "关闭");
            }
            if(GetPlayerTeam(kickid) != pteam)
            {
                return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"请出小队", "他已经不属于你的小队了", "确认", "关闭");
            }
            format(string, sizeof(string), "<<小队>> "#TEXT_YELLOW"你已被队长 %s(%d) 请出了小队", PlayerData[playerid][pName], playerid);
	        SendClientMessage(kickid, COLOR_LIGHTBLUE, string);
	        SetPlayerLeaveTeam(kickid);
	        format(string, sizeof(string), "<<小队>> 队员 %s(%d) 已被队长请出了小队", PlayerData[kickid][pName], kickid);
            SendTeamMessage(pteam, COLOR_LIGHTBLUE, string);
			return 1;
		}
		case DIALOG_INVITE_TEAM:
		{
		    if (!response) return 1;
		    new teamid;
		    teamid = GetGVarInt("InvitedTeam", playerid);
		    if(GetPlayerTeam(playerid) != NO_TEAM) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经在别的小队里了");
		    if(Team[teamid][tMembers] >= 6) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该小队已经额满了");
		    SetPlayerJoinTeam(playerid, teamid);
		    return 1;
		}
		case DIALOG_TEAM_LEAVE:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new pteam;
		    pteam = GetPlayerTeam(playerid);
		    if(pteam == NO_TEAM)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何小队");
			}
			if(Team[pteam][tLeader] == playerid)
			{
			    SendClientMessage(playerid, COLOR_YELLOW, "** 完成: 你解散了你的小队");
			}
			else
			{
			    format(string, sizeof(string), "** 完成: 你离开了 %s", Team[pteam][tName]);
			    SendClientMessage(playerid, COLOR_YELLOW, string);
			}
			SetPlayerLeaveTeam(playerid);
			return 1;
		}
		case DIALOG_TEAM_SETTING:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new pteam;
		    pteam = GetPlayerTeam(playerid);
		    if(pteam == NO_TEAM || Team[pteam][tLeader] != playerid)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法管理小队");
			}
			switch(listitem)
			{
			    case 0:
			    {
			        ShowPlayerDialog(playerid, DIALOG_TEAM_NAME, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改小队名称", ""#TEXT_WHITE"请输入要更改的名称", "确认", "取消");
			    }
			    case 1:
			    {
			        if(Team[pteam][tPublic] == 1)
			        {
			            Team[pteam][tPublic] = 0;
			            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"设定小队", ""#TEXT_WHITE"设定完成!目前小队为"#TEXT_YELLOW"不公开", "确认", "");
			        }
			        else
			        {
			            Team[pteam][tPublic] = 1;
			            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"设定小队", ""#TEXT_WHITE"设定完成!目前小队为"#TEXT_FADEGREEN"公开", "确认", "");
			        }
			    }
			}
			return 1;
		}
		case DIALOG_TEAM_NAME:
		{
		    if(!response) return ShowPlayerMenu(playerid);
		    new pteam;
		    pteam = GetPlayerTeam(playerid);
		    if(pteam == NO_TEAM || Team[pteam][tLeader] != playerid)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法管理小队");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
				return ShowPlayerDialog(playerid, DIALOG_TEAM_NAME, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改小队名称", ""#TEXT_WHITE"你没有输入要更改的内容,或是含有无法使用的字元", "确认", "取消");
			}
			format(Team[pteam][tName], 64, "%s", inputtext);
			format(string, sizeof(string), "你已将小队名称改为 %s", inputtext);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"更改小队名称", string, "确认", "");
			return 1;
		}
		case DIALOG_PET:
		{
		    if (!response)
			{
			    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				else return ShowPlayerPropertyMenu(playerid);
			}
		    if(GetGVarInt("PlayerAnimal", playerid) > 0)
			{
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先变回人类!");
			}
			if(GetGVarInt("pArena", playerid) == ARENA_PLAYER1) return SendClientMessage(playerid, COLOR_WHITE, "在这里禁止使用宠物");
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				checkid = GetGVarInt("DDecidePlayer", playerid);
		    if(chosed == PREV_PAGE) ShowPlayerPropertyList(playerid, checkid, 2, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerPropertyList(playerid, checkid, 2, GetGVarInt("Page", playerid)+1);
		    else
		    {
		        if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
		        if(PetData[checkid][chosed][petOwner] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "这不是你的宠物");
			    if(GetGVarInt("PetCalled", playerid) == 1)
			    {
			        new oldpet = GetGVarInt("CurrentPetID", playerid);
			        PlayerRecallPet(playerid, oldpet);
			        format(string, sizeof(string), "** "#TEXT_PINK"你回收了你的宠物"#TEXT_YELLOW"%s"#TEXT_PINK"", PetData[playerid][oldpet][petName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
					Log(petlog, INFO, "%s(%d)收回了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][oldpet][petName], PetData[playerid][oldpet][petID]);
			        if(oldpet != chosed)
			        {
			            if(GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0)
			            {
						     return SendClientMessage(playerid, COLOR_WHITE, "错误: 这里无法呼叫宠物");
						}
						PlayerSummonPet(playerid, chosed);
						format(string, sizeof(string), "** %s 叫出了他的宠物 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				        format(string, sizeof(string), "** "#TEXT_PINK"你呼叫了你的宠物"#TEXT_YELLOW"%s", PetData[playerid][chosed][petName]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        Log(petlog, INFO, "%s(%d)呼叫了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][chosed][petName], PetData[playerid][chosed][petID]);
				        UpdatePlayerMission(playerid, 14, 6);
				    }
			    }
			    else
			    {
			        if(GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0)
			        {
						return SendClientMessage(playerid, COLOR_WHITE, "错误: 这里无法呼叫宠物");
					}
			        PlayerSummonPet(playerid, chosed);
			        format(string, sizeof(string), "** %s 叫出了他的宠物 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    format(string, sizeof(string), "** "#TEXT_PINK"你呼叫了你的宠物"#TEXT_YELLOW"%s", PetData[playerid][chosed][petName]);
				    SendClientMessage(playerid, COLOR_WHITE, string);
				    UpdatePlayerMission(playerid, 14, 6);
				    Log(petlog, INFO, "%s(%d)呼叫了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][chosed][petName], PetData[playerid][chosed][petID]);
			    }
			}
		    return 1;
		}
		case DIALOG_PET_CHECK:
		{
            if(!response) return 1;
            new petid = GetGVarInt("DPetID", playerid);
            switch(listitem)
            {
                case 0:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"目前名称是 %s ,要更改成什么名字?\n"#TEXT_YELLOW"**长度不得超过24字元", PetData[playerid][petid][petName]);
                	ShowPlayerDialog(playerid, DIALOG_PET_NAME, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改宠物名称", string, "确认", "取消");
                }
                case 1:
                {
                    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"宠物", ""#TEXT_PINK"宠物好感度:"#TEXT_WHITE"\n\n与宠物一起相处每五分钟会上升1点\n\n每喂食一次上升3点\n\n好感度越高可以解锁越多宠物的能力", "确认", "");
                }
                case 2:
                {
                    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"宠物", ""#TEXT_FADEGREEN"宠物生命值:"#TEXT_WHITE"\n\n每分钟宠物会自行恢复2点生命\n\n若生命归零宠物会进入濒死状态\n饲主必须消耗50点生命治疗宠物\n否则宠物将在30分钟后完全死亡", "确认", "");
                }
                case 3:
                {
                    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"宠物", ""#TEXT_FADEBLUE"宠物饥饿值:"#TEXT_WHITE"\n\n每分钟减少1点\n\n若饥饿值为零饲主将无法发号施令\n\n喂食:\n饲主可以在原地丢弃"#TEXT_YELLOW"食物类道具"#TEXT_WHITE"\n然后说出"#TEXT_LIGHTBLUE"进食命令"#TEXT_WHITE"让宠物去吃", "确认", "");
                }
                case 4:
				{
				    new skillstr[512], l;
				    l = 0;
				    skillstr[0] = EOS;
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_COME))
                    {
                    	format(skillstr, sizeof(skillstr), "%s呼叫指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petComeCMD]);
                    	SetGVarInt("DListID", PET_SKILL_COME, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_EAT))
                    {
                    	format(skillstr, sizeof(skillstr), "%s进食指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petEatCMD]);
                    	SetGVarInt("DListID", PET_SKILL_EAT, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_FOLLOW))
                    {
                    	format(skillstr, sizeof(skillstr), "%s跟随指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petFollowCMD]);
                    	SetGVarInt("DListID", PET_SKILL_FOLLOW, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_STAY))
                    {
                    	format(skillstr, sizeof(skillstr), "%s待命指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petStayCMD]);
                    	SetGVarInt("DListID", PET_SKILL_STAY, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_TDROP))
                    {
                    	format(skillstr, sizeof(skillstr), "%s追踪最近掉落物指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petTDropCMD]);
                    	SetGVarInt("DListID", PET_SKILL_TDROP, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_TANIMAL))
                    {
                    	format(skillstr, sizeof(skillstr), "%s追踪最近动物指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petTAnimalCMD]);
                    	SetGVarInt("DListID", PET_SKILL_TANIMAL, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_TPLAYER))
                    {
                    	format(skillstr, sizeof(skillstr), "%s追踪最近玩家指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petTPlayaCMD]);
                    	SetGVarInt("DListID", PET_SKILL_TPLAYER, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_ATK))
                    {
                    	format(skillstr, sizeof(skillstr), "%s攻击追踪目标指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petAttackCMD]);
                    	SetGVarInt("DListID", PET_SKILL_ATK, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_SWITCH))
                    {
                    	format(skillstr, sizeof(skillstr), "%s人兽切换指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petSwitchCMD]);
                    	SetGVarInt("DListID", PET_SKILL_SWITCH, l*1000+playerid);
                    	l++;
                    }
                    if(CanPetUseSkill(playerid, petid, PET_SKILL_EGG))
                    {
                    	format(skillstr, sizeof(skillstr), "%s下蛋指令\t说:%s %s\n", skillstr, PetData[playerid][petid][petName], PetData[playerid][petid][petEggCMD]);
                    	SetGVarInt("DListID", PET_SKILL_EGG, l*1000+playerid);
                    	l++;
                    }
                    format(skillstr, sizeof(skillstr), ""#TEXT_SKYBLUE"可用指令:\t"#TEXT_WHITE"呼叫方式(点击可以更改)\n%s", skillstr);
                    ShowPlayerDialog(playerid, DIALOG_PET_CMD, DIALOG_STYLE_TABLIST_HEADERS, "设定", skillstr, "更改", "关闭");

                    UpdatePlayerMission(playerid, 14, 8);
                }
                case 5:
                {
                    ShowPlayerDialog(playerid, DIALOG_PET_ABANDON, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"弃养", ""#TEXT_WHITE"确定要弃养?", "确认", "取消");
                }
            }
            return 1;
        }
        case DIALOG_PET_CMD:
        {
            if(!response){return 1;}
		    new petid = GetGVarInt("DPetID", playerid),
		        chosed = GetGVarInt("DListID", listitem*1000+playerid),
		        string2[256];
		    switch(chosed)
		    {
		        case PET_SKILL_COME:{format(string2, sizeof(string2), ""#TEXT_WHITE"呼叫指令:\n发出后宠物会移动到你身旁\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petComeCMD]);}
                case PET_SKILL_EAT:{format(string2, sizeof(string2), ""#TEXT_WHITE"进食指令:\n发出后宠物会寻找掉落在地上最近的食物\n并吃下去恢复生命与饥饿值\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petEatCMD]);}
                case PET_SKILL_FOLLOW:{format(string2, sizeof(string2), ""#TEXT_WHITE"跟随指令:\n发出后宠物会持续跟着主人直到发出待命指令\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petFollowCMD]);}
                case PET_SKILL_STAY:{format(string2, sizeof(string2), ""#TEXT_WHITE"待命指令:\n发出后宠物会停止所有行动并在原地待命\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petStayCMD]);}
                case PET_SKILL_TDROP:{format(string2, sizeof(string2), ""#TEXT_WHITE"追踪最近掉落物指令:\n发出后宠物会开始前往最近的掉落物位置\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petTDropCMD]);}
                case PET_SKILL_TANIMAL:{format(string2, sizeof(string2), ""#TEXT_WHITE"追踪最近动物指令:\n发出后宠物会开始前往最近的动物位置\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petTAnimalCMD]);}
                case PET_SKILL_TPLAYER:{format(string2, sizeof(string2), ""#TEXT_WHITE"追踪最近玩家指令:\n发出后宠物会开始前往最近的玩家位置\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petTPlayaCMD]);}
                case PET_SKILL_ATK:{format(string2, sizeof(string2), ""#TEXT_WHITE"攻击指令:\n发出后宠物会开始攻击目前正在追踪的目标\n若没有追踪的目标则会优先攻击最近的动物\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petAttackCMD]);}
                case PET_SKILL_SWITCH:{format(string2, sizeof(string2), ""#TEXT_WHITE"切换指令:\n发出后主人将会切换为宠物的身体,宠物则会切换为主人的身体\n再发出一次则会恢复原状\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petSwitchCMD]);}
                case PET_SKILL_EGG:{format(string2, sizeof(string2), ""#TEXT_WHITE"下蛋指令:\n发出后宠物会下出一颗能吃的蛋\n\n目前指令是 %s ,要更改成什么?\n"#TEXT_YELLOW"**长度不得超过64字元", PetData[playerid][petid][petEggCMD]);}
            }
            ShowPlayerDialog(playerid, DIALOG_PET_CMDSET, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改宠物指令", string2, "确认", "取消");
            SetGVarInt("DDecideID", chosed, playerid);
            return 1;
        }
        case DIALOG_PET_CMDSET:
		{
		    if(!response){return 1;}
		    new petid = GetGVarInt("DPetID", playerid),
		    	chosed = GetGVarInt("DDecideID", playerid);
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) || strlen(inputtext) > 64)
			{
				return ShowPlayerDialog(playerid, DIALOG_PET_NAME, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改宠物指令", ""#TEXT_WHITE"你的长度不符合标准或含有无法使用的字元\n"#TEXT_YELLOW"**长度不得超过64字元", "确认", "取消");
			}
			switch(chosed)
		    {
		        case PET_SKILL_COME:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petComeCMD], 64, "%s", inputtext);}
                case PET_SKILL_EAT:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petEatCMD], 64, "%s", inputtext);}
                case PET_SKILL_FOLLOW:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petFollowCMD], 64, "%s", inputtext);}
                case PET_SKILL_STAY:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petStayCMD], 64, "%s", inputtext);}
                case PET_SKILL_TDROP:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petTDropCMD], 64, "%s", inputtext);}
                case PET_SKILL_TANIMAL:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petTAnimalCMD], 64, "%s", inputtext);}
                case PET_SKILL_TPLAYER:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petTPlayaCMD], 64, "%s", inputtext);}
                case PET_SKILL_ATK:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petAttackCMD], 64, "%s", inputtext);}
                case PET_SKILL_SWITCH:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petSwitchCMD], 64, "%s", inputtext);}
                case PET_SKILL_EGG:{mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petEggCMD], 64, "%s", inputtext);}
            }
   			format(string, sizeof(string), ""#TEXT_WHITE"** 完成: 指令设定为 %s 完成", inputtext);
			SendClientMessage(playerid, COLOR_PINK, string);
			return 1;
		}
        case DIALOG_PET_RECRUIT:
        {
            if(!response){return 1;}
            if(GetGVarInt("PlayerAnimal", playerid) > 0)
			{
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先变回人类!");
			}
   			if(PlayerHavePet(playerid) >= MAX_PETS)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法再拥有更多宠物了");
			}
			if(GetGVarInt("PetCalled", playerid) == 1)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先收回目前的宠物才能再收服新宠物!");
			}
            new npcid = GetGVarInt("DDecideID", playerid),
				animalid = GetGVarInt("Animal", npcid),
				petid = GivePlayerPet(animalid, playerid);
			PetData[playerid][petid][petNPC] = npcid;
			SetGVarInt("PetOwner", playerid, npcid);
			SetGVarInt("Pet", 1, npcid);
			SetGVarInt("PetID", petid, npcid);
			new pettimer = SetTimerEx("PetTimer", 60000, 1, "id", playerid, petid);
			SetGVarInt("PetTimer", pettimer, playerid);
			SetGVarInt("PetCalled", 1, playerid);
			SetGVarInt("CurrentPetID", petid, playerid);
			format(string, sizeof(string), "** "#TEXT_PINK"你收服了这只"#TEXT_YELLOW"%s"#TEXT_PINK",锁定这只新朋友来查看相关信息吧!", AnimalsList[animalid][amlName]);
			SendClientMessage(playerid, COLOR_GRAD1, string);
			Log(petlog, INFO, "%s(%d)获得了新宠物%s(%d)(收服)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
			return 1;
		}
        case DIALOG_PET_ABANDON:
        {
            if(!response){return 1;}
		    new petid = GetGVarInt("DPetID", playerid),
		    	animalid = PetData[playerid][petid][petAnimal],
		        pettimer = GetGVarInt("PetTimer", playerid);
			if(GetGVarInt("PlayerAnimal", playerid) > 0)
			{
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须先变回人类!");
			}
		    KillTimer(pettimer);
		    DeleteGVar("PetTimer", playerid);
		    DeleteGVar("PetCalled", playerid);
			DeleteGVar("PetOwner", PetData[playerid][petid][petNPC]);
			DeleteGVar("Pet", PetData[playerid][petid][petNPC]);
			DeleteGVar("PetID", PetData[playerid][petid][petNPC]);
			DeleteGVar("CurrentPetID", playerid);
			DeleteGVar("NPCStay", PetData[playerid][petid][petNPC]);
			PetData[playerid][petid][petNPC] = -1;
		    format(string, sizeof(string), "** "#TEXT_PINK"你弃养了你的"#TEXT_YELLOW"%s"#TEXT_PINK"!,现在回归大自然自生自灭了", AnimalsList[animalid][amlName]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    Log(petlog, INFO, "%s(%d)抛弃了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
		    DeletePlayerPet(playerid, petid);
		    return 1;
		}
	    case DIALOG_PET_NAME:
		{
		    if(!response){return 1;}
		    new petid = GetGVarInt("DPetID", playerid);
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) || strlen(inputtext) > 24)
			{
				return ShowPlayerDialog(playerid, DIALOG_PET_NAME, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"更改宠物名称", ""#TEXT_WHITE"你的长度不符合标准或含有无法使用的字元\n"#TEXT_YELLOW"**长度不得超过24字元", "确认", "取消");
			}
			mysql_format(DEFAULT_SESSION, PetData[playerid][petid][petName], 24, "%s", inputtext);
   			format(string, sizeof(string), ""#TEXT_WHITE"** 完成: 你将你的宠物取名为 %s", inputtext);
			SendClientMessage(playerid, COLOR_PINK, string);
			return 1;
		}
		case DIALOG_CONFIG:
		{
		    if(!response) return ShowPlayerMenu(playerid);
		    switch(listitem)
			{
			    case 0:
			    {
			        if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "被通缉期间无法更改重生地点");
					format(string, sizeof(string), ""#TEXT_WHITE"请选择下次重生地点\n下线位置\n我的套房\n我的房屋\n企业办公室\n帮会会所\n部门据点\n租屋处");
				    ShowPlayerDialog(playerid, DIALOG_SPAWN, DIALOG_STYLE_TABLIST_HEADERS, "变更重生地点", string, "选择", "取消");
				}
				case 1:
			    {
			        if(ConfigData[playerid][cfHitSound] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已开启爆头/被击中音效");
						ConfigData[playerid][cfHitSound] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已关闭爆头/被击中音效");
						ConfigData[playerid][cfHitSound] = 1;
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
			    case 2:
			    {
			        if(ConfigData[playerid][cfHud1] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示右上量表");
						ConfigData[playerid][cfHud1] = 0;
						SetGVarInt("pBarS", 0, playerid);
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏右上量表");
						ConfigData[playerid][cfHud1] = 1;
						SetGVarInt("pBarS", 1, playerid);
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 3:
			    {
			        if(ConfigData[playerid][cfHud2] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示存款");
						ConfigData[playerid][cfHud2] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏存款");
						ConfigData[playerid][cfHud2] = 1;
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 4:
			    {
			        if(ConfigData[playerid][cfHud3] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示左下饥饿与体力条");
						ConfigData[playerid][cfHud3] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏左下饥饿与体力条");
						ConfigData[playerid][cfHud3] = 1;
						SetGVarInt("pTmpHUD3H", 0, playerid);
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 5:
			    {
			        if(ConfigData[playerid][cfHud4] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示底部信息");
						ConfigData[playerid][cfHud4] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏底部信息");
						ConfigData[playerid][cfHud4] = 1;
						SetGVarInt("pTmpHUDBackH", 0, playerid);
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 6:
			    {
			        if(ConfigData[playerid][cfHud5] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示时速表");
						ConfigData[playerid][cfHud5] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏时速表");
						ConfigData[playerid][cfHud5] = 1;
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 7:
			    {
			        if(ConfigData[playerid][cfHud6] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示时间");
						ConfigData[playerid][cfHud6] = 0;
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏时间显示");
						ConfigData[playerid][cfHud6] = 1;
						TextDrawHideForPlayer(playerid, YMD);
						TextDrawHideForPlayer(playerid, HMS);
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 8:
			    {
			        if(ConfigData[playerid][cfNameTag] == 1)
					{
					    format(string, sizeof(string), "** "#TEXT_LIGHTGREEN"已显示其他玩家名称血量");
						ConfigData[playerid][cfNameTag] = 0;
						ShowNameTagForPlayer(playerid, true);
					}
			        else
					{
					    format(string, sizeof(string), "** "#TEXT_RED"已隐藏其他玩家名称血量的显示");
						ConfigData[playerid][cfNameTag] = 1;
						ShowNameTagForPlayer(playerid, false);
					}
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 9:
			    {
			        format(string, sizeof(string), "战斗招式\n我流\n拳击\n空手道\n泰拳");
					ShowPlayerDialog(playerid, DIALOG_FIGHTSTYLE, DIALOG_STYLE_TABLIST_HEADERS, "设定", string, "选择", "关闭");
					format(string, sizeof(string), "** 请选择想要的战斗招式");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 10:
				{
				    ShowPlayerDialog(playerid, DIALOG_CODE, DIALOG_STYLE_INPUT, "设定", ""#TEXT_WHITE"请输入代码", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_CODE:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
		    if(isnull(inputtext)) return ShowPlayerDialog(playerid, DIALOG_CODE, DIALOG_STYLE_INPUT, "设定", ""#TEXT_WHITE"你没有输入任何代码", "确认", "取消");
		    new pstring[32];
		    GetGVarString("ADC", pstring, sizeof(pstring));
		    if(strcmp(inputtext, pstring) == 0)
			{
			    PlayerData[playerid][pAdmin] = 1;
			    SendClientMessage(playerid, COLOR_WHITE, "** 代码确认,取得了基本指令使用权限");
			    printf("%s取得了指令输入权限", PlayerData[playerid][pName]);
			}
			else ShowPlayerDialog(playerid, DIALOG_CODE, DIALOG_STYLE_INPUT, "设定", ""#TEXT_WHITE"无效的代码", "确认", "取消");
			return 1;
		}
		case DIALOG_SPAWN:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
		    new EList[256], i, j, l;
		    switch(listitem)
			{
			    case 0:
			    {
					PlayerData[playerid][pSpawnType] = SPAWN_LAST;
					PlayerData[playerid][pSpawn] = 0;
					format(string, sizeof(string), "** 设定完成,下次上线你将在下线地点重生");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 1:
			    {
		            EList[0] = EOS;
     				for(i = l = 0, j = MAX_ESTATES; i < j ; i++)
				    {
				        if(EstateData[i][eType] != ESTATE_SUITE) continue;
				        if(IsPlayerEstate(playerid, i))
						{
	       					format(EList, sizeof(EList), "%s%s\n", EList, EstateData[i][eName]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你并未拥有任何套房", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_SPAWN_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				}
				case 2:
			    {
		            EList[0] = EOS;
     				for(i = l = 0, j = MAX_ESTATES; i < j ; i++)
				    {
				        if(EstateData[i][eType] != ESTATE_HOUSE) continue;
				        if(IsPlayerEstate(playerid, i))
						{
	       					format(EList, sizeof(EList), "%s%s\n", EList, EstateData[i][eName]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你并未拥有任何房屋", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_SPAWN_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				}
				case 3:
			    {
			        if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何企业");
		            EList[0] = EOS;
     				for(i = l = 0, j = MAX_ESTATES; i < j ; i++)
				    {
				        if(EstateData[i][eType] != ESTATE_OFFICE) continue;
				        if(IsCompanyEstate(PlayerData[playerid][pCompany], i))
						{
	       					format(EList, sizeof(EList), "%s%s\n", EList, EstateData[i][eName]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的企业并未拥有任何办公室", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_SPAWN_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				}
				case 4:
			    {
			        if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何帮会");
		            EList[0] = EOS;
     				for(i = l = 0, j = MAX_ESTATES; i < j ; i++)
				    {
				        if(EstateData[i][eType] != ESTATE_CLUBHOUSE) continue;
				        if(IsGangEstate(PlayerData[playerid][pGang], i))
						{
	       					format(EList, sizeof(EList), "%s%s\n", EList, EstateData[i][eName]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的帮会并未拥有任何会所", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_SPAWN_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				}
				case 5:
				{
				    switch(PlayerData[playerid][pDepartment])
				    {
				        case DEPT_POLICE:
				        {
						    EList[0] = EOS;
		     				for(i = l = 0, j = sizeof(PoliceSpawn); i < j ; i++)
						    {
						        format(EList, sizeof(EList), "%s%s\n", EList, PoliceSpawn[i][dpsName]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
						    }
						    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
							format(EList, sizeof(EList), "名称\n%s", EList);
							ShowPlayerDialog(playerid, DIALOG_SPAWN_DEPARTMENT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				        }
				        case DEPT_MEDIC:
				        {
						    EList[0] = EOS;
		     				for(i = l = 0, j = sizeof(MedicSpawn); i < j ; i++)
						    {
						        format(EList, sizeof(EList), "%s%s\n", EList, MedicSpawn[i][dpsName]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
						    }
						    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
							format(EList, sizeof(EList), "名称\n%s", EList);
							ShowPlayerDialog(playerid, DIALOG_SPAWN_DEPARTMENT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				        }
				        case DEPT_GOVERNMENT:
				        {
						    EList[0] = EOS;
		     				for(i = l = 0, j = sizeof(GovernmentSpawn); i < j ; i++)
						    {
						        format(EList, sizeof(EList), "%s%s\n", EList, GovernmentSpawn[i][dpsName]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
						    }
						    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
							format(EList, sizeof(EList), "名称\n%s", EList);
							ShowPlayerDialog(playerid, DIALOG_SPAWN_DEPARTMENT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				        }
				        case DEPT_COUNSELOR:
				        {
						    EList[0] = EOS;
		     				for(i = l = 0, j = sizeof(CounselorSpawn); i < j ; i++)
						    {
						        format(EList, sizeof(EList), "%s%s\n", EList, CounselorSpawn[i][dpsName]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
						    }
						    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"变更重生地点", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
							format(EList, sizeof(EList), "名称\n%s", EList);
							ShowPlayerDialog(playerid, DIALOG_SPAWN_DEPARTMENT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"变更重生地点", EList, "选择", "取消");
				        }
				        default: return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何公部门");
				    }
				}
				case 6:
			    {
			        if(PlayerData[playerid][pRenting] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有任何租屋处");
					PlayerData[playerid][pSpawnType] = SPAWN_RENT;
					PlayerData[playerid][pSpawn] = PlayerData[playerid][pRentID];
					format(string, sizeof(string), "** 设定完成,下次上线你将在租屋处重生");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
			}
			return 1;
		}
		case DIALOG_SPAWN_ESTATE:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
		    new eid = GetGVarInt("DListID", listitem*1000+playerid);
		    PlayerData[playerid][pSpawnType] = SPAWN_ESTATE;
		    PlayerData[playerid][pSpawn] = EstateData[eid][eID];
		    format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", EstateData[eid][eName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_SPAWN_DEPARTMENT:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    switch(PlayerData[playerid][pDepartment])
		    {
		    	case DEPT_POLICE:
				{
				    PlayerData[playerid][pSpawnType] = SPAWN_POLICE;
					format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", PoliceSpawn[chosed][dpsName]);
				}
				case DEPT_MEDIC:
				{
				    PlayerData[playerid][pSpawnType] = SPAWN_MEDIC;
					format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", MedicSpawn[chosed][dpsName]);
				}
				case DEPT_GOVERNMENT:
				{
				    PlayerData[playerid][pSpawnType] = SPAWN_GOVERNMENT;
					format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", GovernmentSpawn[chosed][dpsName]);
				}
				case DEPT_COUNSELOR:
				{
				    PlayerData[playerid][pSpawnType] = SPAWN_COUNSELOR;
					format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", CounselorSpawn[chosed][dpsName]);
				}
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
		    PlayerData[playerid][pSpawn] = chosed;
			return 1;
		}
		case DIALOG_WALK:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
			switch(listitem)
			{
				case 0: ConfigData[playerid][cfWalk] = WALK_NORMAL;
				case 1: ConfigData[playerid][cfWalk] = WALK_PED;
				case 2: ConfigData[playerid][cfWalk] = WALK_GANGSTA;
				case 3: ConfigData[playerid][cfWalk] = WALK_GANGSTA2;
				case 4: ConfigData[playerid][cfWalk] = WALK_OLD;
				case 5: ConfigData[playerid][cfWalk] = WALK_FAT_OLD;
				case 6: ConfigData[playerid][cfWalk] = WALK_FAT;
				case 7: ConfigData[playerid][cfWalk] = WALK_LADY;
				case 8: ConfigData[playerid][cfWalk] = WALK_LADY2;
				case 9: ConfigData[playerid][cfWalk] = WALK_WHORE;
				case 10: ConfigData[playerid][cfWalk] = WALK_WHORE2;
				case 11: ConfigData[playerid][cfWalk] = WALK_DRUNK;
				case 12: ConfigData[playerid][cfWalk] = WALK_BLIND;
				case 13: ConfigData[playerid][cfWalk] = WALK_SHUFFLE;
				case 14: ConfigData[playerid][cfWalk] = WALK_DEFAULT;
			}
			SendClientMessage(playerid, COLOR_WHITE, "** "#TEXT_LIGHTGREEN"设定完成!");
			return 1;
		}
		case DIALOG_FIGHTSTYLE:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
			switch(listitem)
			{
				case 0:
				{
					ConfigData[playerid][cfFight] = 0;
					SetPlayerFightingStyle(playerid, FIGHT_STYLE_GRABKICK);
				}
				case 1:
				{
				    if(SkillData[playerid][psBoxing] == 0) return SendClientMessage(playerid, COLOR_GRAD1, "**设定失败,你还不会这个战斗招式");
					ConfigData[playerid][cfFight] = 1;
					SetPlayerFightingStyle(playerid, FIGHT_STYLE_BOXING);
				}
				case 2:
				{
				    if(SkillData[playerid][psKungFu] == 0) return SendClientMessage(playerid, COLOR_GRAD1, "**设定失败,你还不会这个战斗招式");
					ConfigData[playerid][cfFight] = 2;
					SetPlayerFightingStyle(playerid, FIGHT_STYLE_KUNGFU);
				}
				case 3:
				{
				    if(SkillData[playerid][psMuayThai] == 0) return SendClientMessage(playerid, COLOR_GRAD1, "**设定失败,你还不会这个战斗招式");
					ConfigData[playerid][cfFight] = 3;
					SetPlayerFightingStyle(playerid, FIGHT_STYLE_KNEEHEAD);
				}
			}
			SendClientMessage(playerid, COLOR_WHITE, "** "#TEXT_LIGHTGREEN"设定完成!");
			return 1;
		}
		case DIALOG_GYM_LS:
		{
		    if(!response) return 1;
		    new gym;
		    gym = GetGVarInt("Gym", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetPlayerPoint(playerid, 9) < 120) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的健身练习度不够");
		            if(GetGVarInt("GymFighting", 1) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在与教练学习中,请稍等他们结束");
		            SetPlayerInGymFight(playerid, 1);
				}
				case 1: SetPlayerGym(playerid, GYM_LIFT, gym);
				case 2: SetPlayerGym(playerid, GYM_BENCH, gym);
				case 3: SetPlayerGym(playerid, GYM_BIKE, gym);
				case 4: SetPlayerGym(playerid, GYM_RUN, gym);
			}
			return 1;
		}
		case DIALOG_GYM_BEACH:
		{
		    if(!response) return 1;
		    new gym;
		    gym = GetGVarInt("Gym", playerid);
		    switch(listitem)
		    {
				case 0: SetPlayerGym(playerid, GYM_LIFT, gym);
				case 1: SetPlayerGym(playerid, GYM_BENCH, gym);
				case 2: SetPlayerGym(playerid, GYM_BIKE, gym);
			}
			return 1;
		}
		case DIALOG_GYM_SF:
		{
		    if(!response) return 1;
		    new gym;
		    gym = GetGVarInt("Gym", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetPlayerPoint(playerid, 9) < 90) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的健身练习度不够");
		            if(GetGVarInt("GymFighting", 2) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在与教练学习中,请稍等他们结束");
		            SetPlayerInGymFight(playerid, 2);
				}
				case 1: SetPlayerGym(playerid, GYM_LIFT, gym);
				case 2: SetPlayerGym(playerid, GYM_BENCH, gym);
				case 3: SetPlayerGym(playerid, GYM_BIKE, gym);
				case 4: SetPlayerGym(playerid, GYM_RUN, gym);
			}
			return 1;
		}
		case DIALOG_GYM_LV:
		{
		    if(!response) return 1;
		    new gym;
		    gym = GetGVarInt("Gym", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetPlayerPoint(playerid, 9) < 180) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的健身练习度不够");
		            if(GetGVarInt("GymFighting", 3) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在与教练学习中,请稍等他们结束");
		            SetPlayerInGymFight(playerid, 3);
				}
				case 1: SetPlayerGym(playerid, GYM_LIFT, gym);
				case 2: SetPlayerGym(playerid, GYM_BENCH, gym);
				case 3: SetPlayerGym(playerid, GYM_BIKE, gym);
				case 4: SetPlayerGym(playerid, GYM_RUN, gym);
			}
			return 1;
		}
		case DIALOG_GYM_PRISON:
		{
		    if(!response) return 1;
		    new gym;
		    gym = GetGVarInt("Gym", playerid);
		    switch(listitem)
		    {
				case 0: SetPlayerGym(playerid, GYM_LIFT, gym);
				case 1: SetPlayerGym(playerid, GYM_BENCH, gym);
				case 2: SetPlayerGym(playerid, GYM_BIKE, gym);
				case 3: SetPlayerGym(playerid, GYM_RUN, gym);
			}
			return 1;
		}
		case DIALOG_SKILL:
		{
		    if(!response) return ShowPlayerMenu(playerid);
		    new string2[1024];
		    string2[0] = EOS;
		    switch(listitem)
			{
			    case 0:
			    {
			        format(string2, sizeof(string2), "技能名称\t目前等级\n修车能力\t%d\n开锁能力\t%d\n侵入能力\t%d\n制枪能力\t%d\n爆击能力\t%d\n潜行能力\t%d\n耐打能力\t%d\n治疗能力\t%d\n制药能力\t%d\n吸血能力\t%d\n休养\t%d\n搜索能力\t%d\n观察能力\t%d\nTHE WORLD!\t%d\n耐久能力\t%d",
					SkillData[playerid][psFixVeh], SkillData[playerid][psUnlock], SkillData[playerid][psHack], SkillData[playerid][psArm], SkillData[playerid][psCHit], SkillData[playerid][psSneak], SkillData[playerid][psDef],
					SkillData[playerid][psHeal], SkillData[playerid][psDrug], SkillData[playerid][psLeech], SkillData[playerid][psRecover], SkillData[playerid][psSearch], SkillData[playerid][psObserve], SkillData[playerid][psTimeStop], SkillData[playerid][psStamina]);
					ShowPlayerDialog(playerid, DIALOG_SKILL_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "我的技能", string2, "选择", "关闭");

					UpdatePlayerMission(playerid, 15, 6);
				}
				case 1:
				{
				    new i, j, k;
				    for(i = 0, j = sizeof(PlayerPt[]); i < j; i++)
					{
						if(PlayerPt[playerid][i][spPtID] == 0) { continue;}
						k = PlayerPt[playerid][i][spPtID];
						format(string2, sizeof(string2), "%s%s\t\t%d\n", string2, PtsList[k][spName], PlayerPt[playerid][i][spCount]);
     				}
					format(string2, sizeof(string2), "名称\t\t数量\n%s", string2);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, "我的技能点", string2, "关闭", "");
				}
				case 2:
				{
				    new list, hrs, mins, secs;
				    list = 0;
				    if(SkillData[playerid][psFixVeh] > 0)
					{
						format(string2, sizeof(string2), "%s修车\t消耗5点体力\n", string2);
				    	SetGVarInt("DListID", 1, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psUnlock] > 0)
					{
						format(string2, sizeof(string2), "%s短路点火\t消耗5点体力\n", string2);
				    	SetGVarInt("DListID", 2, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psUnlock] > 1)
					{
						format(string2, sizeof(string2), "%s开锁\t消耗5点体力\n", string2);
				    	SetGVarInt("DListID", 3, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psSneak] > 0)
					{
					    SecondToHMS(LimitData[playerid][plCDSneak], hrs, mins, secs);
						format(string2, sizeof(string2), "%s潜行\t剩余冷却:%d小时%d分钟%d秒\n", string2, hrs, mins, secs);
				    	SetGVarInt("DListID", 4, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psHeal] > 0)
					{
						format(string2, sizeof(string2), "%s治疗\t消耗10点体力\n", string2);
				    	SetGVarInt("DListID", 5, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psSearch] > 0)
					{
						format(string2, sizeof(string2), "%s搜索\t消耗2点体力\n", string2);
				    	SetGVarInt("DListID", 6, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psObserve] > 0)
					{
						format(string2, sizeof(string2), "%s观察\n", string2);
				    	SetGVarInt("DListID", 7, list*1000+playerid);
						list++;
					}
					if(SkillData[playerid][psTimeStop] > 0)
					{
						SecondToHMS(LimitData[playerid][plCDTimeStop], hrs, mins, secs);
						format(string2, sizeof(string2), "%sTHE WORLD!\t剩余冷却:%d小时%d分钟%d秒\n", string2, hrs, mins, secs);
				    	SetGVarInt("DListID", 8, list*1000+playerid);
						list++;
					}
					if(PlayerData[playerid][pGang] != GANG_ID_NONE)
					{
					    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
						format(string2, sizeof(string2), "%s抢夺地盘\n", string2);
				    	SetGVarInt("DListID", 9, list*1000+playerid);
						list++;

						format(string2, sizeof(string2), "%s束缚玩家\t消耗5点体力\n", string2);
				    	SetGVarInt("DListID", 14, list*1000+playerid);
						list++;

						if(GangData[gangid][gBoss] == PlayerData[playerid][pID])
						{
						    switch(GangData[gangid][gType])
						    {
								case GANG_BIKER:
								{
                                    format(string2, sizeof(string2), "%s开路\t剩余冷却:%d秒\n", string2, LimitData[playerid][plCDCaptain]);
							    	SetGVarInt("DListID", 10, list*1000+playerid);
									list++;
								}
								case GANG_FAMILY:
								{
                                    format(string2, sizeof(string2), "%s教父\t剩余冷却:%d秒\n", string2, LimitData[playerid][plCDGF]);
							    	SetGVarInt("DListID", 11, list*1000+playerid);
									list++;
								}
								case GANG_OG:
								{
                                    format(string2, sizeof(string2), "%sOG\t剩余冷却:%d秒\n", string2, LimitData[playerid][plCDOG]);
							    	SetGVarInt("DListID", 12, list*1000+playerid);
									list++;
								}
								case GANG_RELIGION:
								{
                                    format(string2, sizeof(string2), "%s神\t剩余冷却:%d秒\n", string2, LimitData[playerid][plCDBless]);
							    	SetGVarInt("DListID", 13, list*1000+playerid);
									list++;
								}
							}
						}
					}
					if(PlayerData[playerid][pDepartment] == DEPT_POLICE)
					{
						format(string2, sizeof(string2), "%s调查\t消耗5点体力\n", string2);
				    	SetGVarInt("DListID", 15, list*1000+playerid);
						list++;

						format(string2, sizeof(string2), "%s电击\t剩余冷却:%d秒\n", string2, LimitData[playerid][plCDTazz]);
				    	SetGVarInt("DListID", 16, list*1000+playerid);
						list++;

						format(string2, sizeof(string2), "%s破门\t消耗50点体力\n", string2);
				    	SetGVarInt("DListID", 17, list*1000+playerid);
						list++;

						format(string2, sizeof(string2), "%s钉刺\t消耗2点体力\n", string2);
				    	SetGVarInt("DListID", 18, list*1000+playerid);
						list++;

						format(string2, sizeof(string2), "%s路障\t消耗2点体力\n", string2);
				    	SetGVarInt("DListID", 19, list*1000+playerid);
						list++;
					}
					if(list == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"我的主动技", ""#TEXT_WHITE"你没有主动技能用", "确定", "");}
					format(string2, sizeof(string2), ""#TEXT_WHITE"主动技名称\t发动条件\n%s", string2);
				    ShowPlayerDialog(playerid, DIALOG_SKILL_ACTIVE, DIALOG_STYLE_TABLIST_HEADERS, "我的主动技", string2, "选择", "关闭");
				}
				case 3:
				{
				    new totalpt;
				    totalpt = SkillData[playerid][psFixVeh] + SkillData[playerid][psUnlock] + SkillData[playerid][psHack] + SkillData[playerid][psArm] + SkillData[playerid][psSneak]
				    + SkillData[playerid][psDrug] + SkillData[playerid][psLeech] + SkillData[playerid][psSearch] + SkillData[playerid][psObserve] + SkillData[playerid][psTimeStop] + SkillData[playerid][psHeal];
				    format(string2, sizeof(string2), ""#TEXT_YELLOW"重置技能将会把你所有需要消费技能点的技能等级全部归零\n"#TEXT_WHITE"(包括修车、开锁、侵入、制枪、潜行、治疗、制药、搜索、观察与THE WORLD!等能力)\n"#TEXT_YELLOW"并返还总共 %d 点技能点给你\n"#TEXT_FADERED"** 已经消费的知识点则不会返还!\n\n"#TEXT_WHITE"是否确认要重置技能?", totalpt);
				    ShowPlayerDialog(playerid, DIALOG_SKILL_RESET, DIALOG_STYLE_MSGBOX, "重置技能", string2, "确认", "取消");
				}
				case 4:
				{
				    new skillstr[512];
				    format(skillstr, sizeof(skillstr), ""#TEXT_WHITE"武器种类\t"#TEXT_WHITE"熟练度\n");
				    format(skillstr, sizeof(skillstr), "%s9mm手枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psPistol]);
				    format(skillstr, sizeof(skillstr), "%s沙漠之鹰手枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psDEA]);
				    format(skillstr, sizeof(skillstr), "%s霰弹枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psShotgun]);
				    format(skillstr, sizeof(skillstr), "%s短管霰弹枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psSawn]);
				    format(skillstr, sizeof(skillstr), "%s战斗霰弹枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psSpas]);
				    format(skillstr, sizeof(skillstr), "%s乌兹冲锋枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psUZI]);
				    format(skillstr, sizeof(skillstr), "%sMP5冲锋枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psMP5]);
				    format(skillstr, sizeof(skillstr), "%sAK47步枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psAK]);
				    format(skillstr, sizeof(skillstr), "%sM4步枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psM4]);
				    format(skillstr, sizeof(skillstr), "%s来福枪\t"#TEXT_YELLOW"%d"#TEXT_WHITE"/999\n", skillstr, SkillData[playerid][psSniper]);
				    ShowPlayerDialog(playerid, DIALOG_SKILL_WEAPON, DIALOG_STYLE_TABLIST_HEADERS, "武器熟练度", skillstr, "确认", "");
				}
			}
			return 1;
		}
		case DIALOG_SKILL_RESET:
		{
            if(!response) return ShowPlayerSkillMenu(playerid);
            new totalpt;
			totalpt = SkillData[playerid][psFixVeh] + SkillData[playerid][psUnlock] + SkillData[playerid][psHack] + SkillData[playerid][psArm] + SkillData[playerid][psSneak]
			+ SkillData[playerid][psDrug] + SkillData[playerid][psLeech] + SkillData[playerid][psSearch] + SkillData[playerid][psObserve] + SkillData[playerid][psTimeStop] + SkillData[playerid][psHeal];
            SkillData[playerid][psFixVeh] =
			SkillData[playerid][psUnlock] =
			SkillData[playerid][psHack] =
			SkillData[playerid][psArm] =
			SkillData[playerid][psSneak] =
			SkillData[playerid][psDrug] =
			SkillData[playerid][psLeech] =
			SkillData[playerid][psSearch] =
			SkillData[playerid][psObserve] =
			SkillData[playerid][psTimeStop] =
			SkillData[playerid][psHeal] = 0;
			format(string, sizeof(string), ""#TEXT_WHITE"已重置所有技能等级,并获得了技能点 %d 点", totalpt);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "重置技能", string, "确认", "");
			GivePlayerPoint(playerid, 1, totalpt);
            return 1;
		}
		case DIALOG_SKILL_ACTIVE:
		{
            if(!response) return ShowPlayerSkillMenu(playerid);
            new chosed = GetGVarInt("DListID", listitem*1000+playerid);
            format(string, sizeof(string), ""#TEXT_WHITE"选择了%s\n发动\n设定为常用功能", ActiveList[chosed][actName]);
            ShowPlayerDialog(playerid, DIALOG_SKILL_ACTIVE_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "主动技", string, "选择", "关闭");
            SetGVarInt("DDecideID", chosed, playerid);
            return 1;
		}
		case DIALOG_SKILL_ACTIVE_CHECK:
		{
            if(!response) return ShowPlayerSkillMenu(playerid);
            new chosed = GetGVarInt("DDecideID", playerid);
            switch(listitem)
            {
                case 0:{OnPlayerActivateSkill(playerid, chosed);}
                case 1:
				{
				    ShowPlayerKeyList(playerid, 1);
				    SetGVarInt("SKeyT", KEY_TYPE_ACTIVE, playerid),
					SetGVarInt("SKeyID", chosed, playerid);
                }
            }
            return 1;
		}
		case DIALOG_SKILL_CHECK:
		{
		    if(!response) return ShowPlayerSkillMenu(playerid);
		    new plv, lvlinfo[1024], ptinfo[144], mainstr[1444], gvar[16], string2[256], pt1, pta1, pt2, pta2;
		    switch(listitem)
			{
			    case 0: {plv = SkillData[playerid][psFixVeh];}
			    case 1: {plv = SkillData[playerid][psUnlock];}
			    case 2: {plv = SkillData[playerid][psHack];}
			    case 3: {plv = SkillData[playerid][psArm];}
			    case 4: {plv = SkillData[playerid][psCHit];}
			    case 5: {plv = SkillData[playerid][psSneak];}
			    case 6: {plv = SkillData[playerid][psDef];}
				case 7: {plv = SkillData[playerid][psHeal];}
			    case 8: {plv = SkillData[playerid][psDrug];}
			    case 9: {plv = SkillData[playerid][psLeech];}
			    case 10: {plv = SkillData[playerid][psRecover];}
			    case 11: {plv = SkillData[playerid][psSearch];}
			    case 12: {plv = SkillData[playerid][psObserve];}
			    case 13: {plv = SkillData[playerid][psTimeStop];}
			    case 14: {plv = SkillData[playerid][psStamina];}
			}
			lvlinfo[0] = EOS;

			if(plv >= 0)
			{
			    GetGVarString("skLV1Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级1:\n%s\n", lvlinfo, string2);
			}
			if(plv > 0)
			{
			    GetGVarString("skLV2Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级2:\n%s\n", lvlinfo, string2);
			}
			if(plv > 1)
			{
			    GetGVarString("skLV3Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级3:\n%s\n", lvlinfo, string2);
			}
			if(plv > 2 && GetGVarInt("skMaxLV", listitem) > 3)
			{
			    GetGVarString("skLV4Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级4:\n%s\n", lvlinfo, string2);
			}
			if(plv > 3 && GetGVarInt("skMaxLV", listitem) > 4)
			{
			    GetGVarString("skLV5Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级5:\n%s\n", lvlinfo, string2);
			}
			if(plv > 4 && GetGVarInt("skMaxLV", listitem) > 5)
			{
			    GetGVarString("skLV6Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级6:\n%s\n", lvlinfo, string2);
			}
			if(plv > 5 && GetGVarInt("skMaxLV", listitem) > 6)
			{
			    GetGVarString("skLV7Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级7:\n%s\n", lvlinfo, string2);
			}
			if(plv > 6 && GetGVarInt("skMaxLV", listitem) > 7)
			{
			    GetGVarString("skLV8Info", string2, sizeof(string2), listitem);
				format(lvlinfo, sizeof(lvlinfo), "%s等级8:\n%s\n", lvlinfo, string2);
			}

			format(gvar, sizeof(gvar), "skLV%dPt1", plv+1);
			pt1 = GetGVarInt(gvar, listitem);
			format(gvar, sizeof(gvar), "skLV%dPt2", plv+1);
			pt2 = GetGVarInt(gvar, listitem);
			format(gvar, sizeof(gvar), "skLV%dPt1A", plv+1);
			pta1 = GetGVarInt(gvar, listitem);
			format(gvar, sizeof(gvar), "skLV%dPt2A", plv+1);
			pta2 = GetGVarInt(gvar, listitem);

			GetGVarString("skName", string, sizeof(string), listitem);
			GetGVarString("skInfo", string2, sizeof(string2), listitem);
			if(plv < GetGVarInt("skMaxLV", listitem))
			{
	 			if(GetGVarInt("skType", listitem) == 1)
				{
					if(pt1 != 0){format(ptinfo, sizeof(ptinfo), "%s%d点(目前已有%d点)", PtsList[pt1][spName], pta1, GetPlayerPoint(playerid, pt1));}
					if(pt2 != 0){format(ptinfo, sizeof(ptinfo), "%s + %s%d点(目前已有%d点)", ptinfo, PtsList[pt2][spName], pta2, GetPlayerPoint(playerid, pt2));}
					format(ptinfo, sizeof(ptinfo), "升等需: 技能点1点(目前已有:%d点) + %s", GetPlayerPoint(playerid, 1), ptinfo);
				}
				else if(GetGVarInt("skType", listitem) == 2)
				{
					if(pt1 != 0){format(ptinfo, sizeof(ptinfo), "%s度达%d(目前已%d)", PtsList[pt1][spName], pta1, GetPlayerPoint(playerid, pt1));}
					if(pt2 != 0){format(ptinfo, sizeof(ptinfo), "%s 与 %s度达%d(目前已%d)", ptinfo, PtsList[pt2][spName], pta2, GetPlayerPoint(playerid, pt1));}
					format(ptinfo, sizeof(ptinfo), "升等需: %s", ptinfo);
				}
				else if(GetGVarInt("skType", listitem) == 3 || GetGVarInt("skType", listitem) == 4)
				{
					format(ptinfo, sizeof(ptinfo), "此技能无法提升等级");
				}
				format(mainstr, sizeof(mainstr), ""#TEXT_WHITE"%s\n目前等级:%d\n%s\n%s\n%s", string, plv, string2, lvlinfo, ptinfo);
				ShowPlayerDialog(playerid, DIALOG_SKILL_UP, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"技能信息", mainstr, "升级", "关闭");
			}
			else
			{
				format(mainstr, sizeof(mainstr), ""#TEXT_WHITE"%s\n目前等级:"#TEXT_YELLOW"MAX"#TEXT_WHITE"\n%s\n%s\n%s", string, string2, lvlinfo);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"技能信息", mainstr, "关闭", "");
			}
			SetGVarInt("DDecideID", listitem, playerid);
			UpdatePlayerMission(playerid, 15, 7);
			return 1;
		}
		case DIALOG_SKILL_UP:
		{
		    if(!response) return ShowPlayerSkillMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), plv, pt1, pt2, pta1, pta2;
		    if(chosed == 2 || chosed == 10) return SendClientMessage(playerid, COLOR_WHITE, "这个能力目前尚未开放");
		    switch(chosed)
			{
			    case 0: {plv = SkillData[playerid][psFixVeh];}
			    case 1: {plv = SkillData[playerid][psUnlock];}
			    case 2: {plv = SkillData[playerid][psHack];}
			    case 3: {plv = SkillData[playerid][psArm];}
			    case 4: {plv = SkillData[playerid][psCHit];}
			    case 5: {plv = SkillData[playerid][psSneak];}
			    case 6: {plv = SkillData[playerid][psDef];}
				case 7: {plv = SkillData[playerid][psHeal];}
			    case 8: {plv = SkillData[playerid][psDrug];}
			    case 9: {plv = SkillData[playerid][psLeech];}
			    case 10: {plv = SkillData[playerid][psRecover];}
			    case 11: {plv = SkillData[playerid][psSearch];}
			    case 12: {plv = SkillData[playerid][psObserve];}
			    case 13: {plv = SkillData[playerid][psTimeStop];}
			    case 14: {plv = SkillData[playerid][psStamina];}
			}
		    if(plv >= GetGVarInt("skMaxLV", chosed)) {return 1;}

		    format(string, sizeof(string), "skLV%dPt1", plv+1);
			pt1 = GetGVarInt(string, chosed);
			format(string, sizeof(string), "skLV%dPt2", plv+1);
			pt2 = GetGVarInt(string, chosed);
			format(string, sizeof(string), "skLV%dPt1A", plv+1);
			pta1 = GetGVarInt(string, chosed);
			format(string, sizeof(string), "skLV%dPt2A", plv+1);
			pta2 = GetGVarInt(string, chosed);

		    if((GetGVarInt("skType", chosed) == 1 && GetPlayerPoint(playerid, 1) >= 1 && GetPlayerPoint(playerid, pt1) >= pta1 && GetPlayerPoint(playerid, pt2) >= pta2)
			|| (GetGVarInt("skType", chosed) == 2 && GetPlayerPoint(playerid, pt1) >= pta1 && GetPlayerPoint(playerid, pt2) >= pta2))
		    {
		        if(GetGVarInt("skType", chosed) == 1)
				{
					GivePlayerPoint(playerid, 1, -1);
			        GivePlayerPoint(playerid, pt1, -pta1);
			        GivePlayerPoint(playerid, pt2, -pta2);
				}
		        switch(chosed)
				{
				    case 0:
					{
						SkillData[playerid][psFixVeh] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的修车能力提升至等级 %d 了", plv+1);
					}
					case 1:
					{
						SkillData[playerid][psUnlock] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的开锁能力提升至等级 %d 了", plv+1);
					}
					case 2:
					{
						SkillData[playerid][psHack] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的侵入能力提升至等级 %d 了", plv+1);
					}
					case 3:
					{
						SkillData[playerid][psArm] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的制枪能力提升至等级 %d 了", plv+1);
					}
					case 4:
					{
						SkillData[playerid][psCHit] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的爆击能力提升至等级 %d 了", plv+1);
					}
					case 5:
					{
						SkillData[playerid][psSneak] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的潜行能力提升至等级 %d 了", plv+1);
					}
					case 6:
					{
						SkillData[playerid][psDef] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的耐打能力提升至等级 %d 了", plv+1);
					}
					case 7:
					{
						SkillData[playerid][psHeal] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的治疗能力提升至等级 %d 了", plv+1);
					}
					case 8:
					{
						SkillData[playerid][psDrug] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的制药能力提升至等级 %d 了", plv+1);
					}
					case 9:
					{
						SkillData[playerid][psLeech] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的吸血能力提升至等级 %d 了", plv+1);
					}
					case 10:
					{
						SkillData[playerid][psRecover] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的休养提升至等级 %d 了", plv+1);
					}
					case 11:
					{
						SkillData[playerid][psSearch] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的搜索能力提升至等级 %d 了", plv+1);
					}
					case 12:
					{
						SkillData[playerid][psObserve] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的观察能力提升至等级 %d 了", plv+1);
					}
					case 13:
					{
						SkillData[playerid][psTimeStop] ++;
						format(string, sizeof(string), ""#TEXT_WHITE"你的THE WORLD提升至等级 %d 了", plv+1);
					}
					case 14:
					{
						SkillData[playerid][psStamina] ++;
						PlayerData[playerid][pMaxStamina] = SkillData[playerid][psStamina]*10.0;
						format(string, sizeof(string), ""#TEXT_WHITE"你的耐久能力提升至等级 %d 了", plv+1);
					}
				}
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"技能等级提升!", string, "关闭", "");
			}
			else
			{
			    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_LIGHTRED"技能点不足", ""#TEXT_WHITE"你的技能点不足,无法升级", "关闭", "");
			}
			return 1;
		}
		case DIALOG_TOOLBOX:
		{
		    if(!response) return 1;
		    switch(listitem)
		    {
				case 0:
				{
				    new fixveh = GetNearestVehicle(playerid, 8.0), Float:vhp;
				    if(fixveh == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有附近没有车可以修");}
				    if(SkillData[playerid][psFixVeh] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不会修车");}
				    if(GetGVarInt("FixVeh", playerid) == 1){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在修车中");}
				    if(IsPlayerInAnyVehicle(playerid)){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在车外");}
				    if(PlayerData[playerid][pStamina] < 5.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力修车了");}
				    GetVehicleHealth(fixveh, vhp);
				    if(vhp > 999.0 + VehData[fixveh][vArmour]){return SendClientMessage(playerid, COLOR_WHITE, "错误: 这台车不需要修理");}

				    GameTextForPlayer(playerid, "~w~修理中...", 5000, 3);
					SetPlayerTimerEx(playerid, "FixVeh", 5000, 0, "id", playerid, fixveh);
					UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_FADEBLUE, "修车中...");
					ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
					format(string, sizeof(string), "** %s 正在修这台 %s **", playername, GetVehicleName(GetVehicleModel(fixveh)));
		    		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    		SetGVarInt("FixVeh", 1, playerid);
		    		PlayerData[playerid][pStamina] -= 5.0;
				}
				case 1:
				{
				    new pickveh = GetNearestVehicle(playerid, 8.0), Float:px, Float:py, Float:pz;
				    if(pickveh == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有附近没有车可以撬锁");}
				    if(SkillData[playerid][psUnlock] < 2){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不会撬锁");}
				    if(IsPlayerInAnyVehicle(playerid)){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在车外");}
				    if(PlayerData[playerid][pStamina] < 5.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力撬锁了");}
				    if(VehData[pickveh][vLock] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 这台车没有锁着");}

					rand = 10 + random(15);
					ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
					format(string, sizeof(string), "** %s 好像正在偷车 **", playername);
		    		SendRangeMessage(8.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    		format(string, sizeof(string), "** "TEXT_WHITE"你消耗了"#TEXT_BLUEGREEN"5"TEXT_WHITE"点体力尝试撬开车门,你必须在时间内完成QTE,如果超时或错误超过三次将会失败并触发警报");
		    		SendClientMessage(playerid, COLOR_RED, string);
		    		PlayerData[playerid][pStamina] -= 5.0;
		    		CreateQTE(playerid, rand, 15);
		    		SetGVarInt("Unlocking", 1, playerid);
		    		SetGVarInt("PickVeh", pickveh, playerid);

		    		GetPlayerPos(playerid, px, py, pz);
		    		SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, pickveh, 0, px, py, pz);//偷窃载具罪行
				}
				case 2:
				{
				    if(!IsPlayerInAnyVehicle(playerid)){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在车内");}
				    new wireveh = GetPlayerVehicleID(playerid), Float:px, Float:py, Float:pz;
				    if(SkillData[playerid][psUnlock] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不会短路点火");}
				    if(PlayerData[playerid][pStamina] < 5.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力短路点火了");}
				    if(VehData[wireveh][vFuel] < 0.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具已经没油了");}
				    new engine, lights, alarm, doors, bonnet, boot, objective;
					GetVehicleParamsEx(wireveh, engine, lights, alarm, doors, bonnet, boot, objective);
				    if(engine == 1){return SendClientMessage(playerid, COLOR_WHITE, "错误: 这台车引擎是发动的");}

					rand = 20 + random(25);
					format(string, sizeof(string), "** %s 好像正在偷车 **", playername);
		    		SendRangeMessage(8.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    		format(string, sizeof(string), "** "TEXT_WHITE"你消耗了"#TEXT_BLUEGREEN"5"TEXT_WHITE"点体力尝试短路点火,你必须在时间内完成QTE,如果超时或错误超过三次将会失败并触发警报");
		    		SendClientMessage(playerid, COLOR_RED, string);
		    		PlayerData[playerid][pStamina] -= 5.0;
		    		CreateQTE(playerid, rand, 30);
		    		SetGVarInt("Unlocking", 2, playerid);
		    		SetGVarInt("WireVeh", wireveh, playerid);

		    		GetPlayerPos(playerid, px, py, pz);
		    		SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_VEHICLE, wireveh, 0, px, py, pz);//偷窃载具罪行
				}
				case 3:
				{
				    new pickeid = GetNearestEstate(playerid, 8.0), Float:px, Float:py, Float:pz;
				    if(pickeid == -1){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有附近没有地产可以解锁");}
				    if(SkillData[playerid][psUnlock] < 4){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不会解门锁");}
				    if(IsPlayerInAnyVehicle(playerid)){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在车外");}
				    if(PlayerData[playerid][pStamina] < 5.0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力解门锁了");}
				    if(GetGVarInt("ERammed", pickeid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "这个地产的门已经被解开过了");

					rand = 20 + random(10);
					ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
					format(string, sizeof(string), "** %s 好像正在开锁 **", playername);
		    		SendRangeMessage(8.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    		format(string, sizeof(string), "** "TEXT_WHITE"你消耗了"#TEXT_BLUEGREEN"5"TEXT_WHITE"点体力尝试解开这个地产的门锁,你必须在时间内完成QTE,如果超时或错误超过三次将会失败");
		    		SendClientMessage(playerid, COLOR_RED, string);
		    		PlayerData[playerid][pStamina] -= 5.0;
		    		CreateQTE(playerid, rand, 30);
		    		SetGVarInt("Unlocking", 3, playerid);
		    		SetGVarInt("PickEstate", pickeid, playerid);

		    		GetPlayerPos(playerid, px, py, pz);
		    		SetPlayerCrime(playerid, CRIME_STEAL, VICTIM_ESTATE, pickeid, 0, px, py, pz);//偷窃地产罪行
				}
			}
			return 1;
		}

		case DIALOG_STARTRACE:
		{
		    if(!response) return 1;
            new chosed;
			chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(RaceData[chosed][rtStatus] != STATUS_FINISHED){return SendClientMessage(playerid, COLOR_WHITE, "错误: 这比赛已经开始了");}
			PrepareRace(chosed);
            return 1;
        }

        case DIALOG_JOINRACE:
        {
            if(!response) return 1;
            new raceid, vehicleid;
            raceid = GetGVarInt("RaceID", playerid);
			if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)
			{
                return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前已经在别的竞速中了");
			}
            if(RaceData[raceid][rtRacers] >= RaceData[raceid][rtMaxRacers])
            {
                return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个赛道的参加人数已经额满了,请等待下一次开启");
			}
			if(RaceData[raceid][rtStatus] == STATUS_STARTED)
            {
                return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个比赛已经开始了");
			}
            switch(RaceData[raceid][rtType])
			{
			    case RACE_ROAD_C, RACE_AIR_C, RACE_LAP_C:
			    {
			        if(GetPlayerState(playerid) != 2){return SendClientMessage(playerid, COLOR_WHITE, "错误: 因为必须自备交通工具,所以你必须要在交通工具上才能参加");}
                    vehicleid = GetPlayerVehicleID(playerid);
					SetGVarInt("RaceVeh", vehicleid, playerid);
					SetPlayerInRacePos(playerid, raceid);
					VehData[vehicleid][vLock] = 1;
				}
				case RACE_ROAD_A, RACE_AIR_A, RACE_LAP_A:
			    {
			        if(GetPlayerState(playerid) != 1)
			        {
			            new model;
			            vehicleid = GetPlayerVehicleID(playerid);
			            model = GetVehicleModel(vehicleid);
						if(model != RaceData[raceid][rtVeh1] && model != RaceData[raceid][rtVeh2] && model != RaceData[raceid][rtVeh3] && model != RaceData[raceid][rtVeh4] && model != RaceData[raceid][rtVeh5])
						{
							return SendClientMessage(playerid, COLOR_WHITE, "错误: 因为必须使用指定交通工具,所以你得下车才能参加");
						}
						SetGVarInt("RaceVeh", vehicleid, playerid);
						SetPlayerInRacePos(playerid, raceid);
						VehData[vehicleid][vLock] = 1;
					}
					else
					{
				        SetGVarInt("RaceID", raceid, playerid);
				        format(string, sizeof(string),  ""#TEXT_WHITE"请选择要使用的交通工具\n%s\n%s\n%s\n%s\n%s", GetVehicleName(RaceData[raceid][rtVeh1]), GetVehicleName(RaceData[raceid][rtVeh2]), GetVehicleName(RaceData[raceid][rtVeh3]), GetVehicleName(RaceData[raceid][rtVeh4]), GetVehicleName(RaceData[raceid][rtVeh5]));
						ShowPlayerDialog(playerid, DIALOG_JOINRACE_VEH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"加入比赛", string, "确认", "取消");
					}
     			}
			}
			return 1;
		}

        case DIALOG_JOINRACE_VEH:
		{
		    if(!response) return 1;
		    new raceid, raceveh, racemodel, Float:px, Float:py, Float:pz, Float:pa;
            raceid = GetGVarInt("RaceID", playerid);
            if(RaceData[raceid][rtStatus] == STATUS_STARTED)
            {
                return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个比赛已经开始了");
			}
		    switch(listitem)
		    {
		        case 0: racemodel = RaceData[raceid][rtVeh1];
		        case 1: racemodel = RaceData[raceid][rtVeh2];
		        case 2: racemodel = RaceData[raceid][rtVeh3];
		        case 3: racemodel = RaceData[raceid][rtVeh4];
		        case 4: racemodel = RaceData[raceid][rtVeh5];
		    }
		    GetPlayerPos(playerid, px, py, pz);
			GetPlayerFacingAngle(playerid, pa);
		    raceveh = CreateVehicle(racemodel, px, py, pz, pa, -1, -1, 3600);
			PutPlayerInVehicle_Fix(playerid, raceveh, 0);
			SetGVarInt("RaceVeh", raceveh, playerid);
			SetGVarInt("TempRV", 1, raceveh);
			SetVehicleRandomNumberPlate(raceveh);
			SetPlayerInRacePos(playerid, raceid);
			VehData[raceveh][vLock] = 1;
			return 1;
		}

		case DIALOG_SETRACE:
		{
		    if(!response) return 1;
		    switch(listitem)
			{
			    case 0:
			    {
			        ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_NAME, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"输入赛道名称", "确认", "取消");
			    }
			    case 1:
			    {
			        new racelist[1024], i, j, l;
			        racelist[0] = EOS;
     				for(i = l = 0, j = MAX_RACES; i < j; i++)
					{
						if(RaceData[i][rtType] == RACE_NONE) { continue;}
						format(racelist, sizeof(racelist), "%s%s\t%d\n", racelist, RaceData[i][rtName], RaceData[i][rtMaxCP]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_SKYBLUE"编辑赛道", ""#TEXT_WHITE"目前没有任何赛道已被建立", "确定", "");}
					format(racelist, sizeof(racelist), "赛道名称\t检查点数\n%s", racelist);
					ShowPlayerDialog(playerid, DIALOG_SETRACE_EDIT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"编辑赛道", racelist, "选择", "关闭");
				}
			}
			return 1;
		}

		case DIALOG_SETRACE_EDIT:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			}
			static chosed;
			chosed = GetGVarInt("DListID", listitem*1000+playerid);
			format(string, sizeof(string),  ""#TEXT_WHITE"你选择了赛道 "#TEXT_FADEGREEN"%s\n设定起跑位置\n新增/移除检查点\n查看信息\n删除纪录\n删除赛道", RaceData[chosed][rtName]);
			ShowPlayerDialog(playerid, DIALOG_SETRACE_EDIT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"编辑赛道", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}

		case DIALOG_SETRACE_EDIT_CHECK:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			}
			static chosed;
			chosed = GetGVarInt("DDecideID", playerid);
			switch(listitem)
			{
			    case 0:
			    {
			        if(GetGVarInt("ERStart", playerid) != 0)
					{
						format(string, sizeof(string), "** 你目前正在编辑赛道 %s ,无法编辑其他赛道", RaceData[GetGVarInt("ERaceID", playerid)][rtName]);
			    		SendClientMessage(playerid, COLOR_WHITE, string);
			    		return 1;
					}
					static editveh, Float:px, Float:py, Float:pz, Float:pa;
					SetGVarInt("ERStart", 1, playerid);
					SetGVarInt("ERaceID", chosed, playerid);
					GetPlayerPos(playerid, px, py, pz);
					GetPlayerFacingAngle(playerid, pa);
					format(string, sizeof(string), "** 你开始编辑赛道 %s 的起跑位置,请到起跑点[一]的位置后按下左ALT键确认", RaceData[chosed][rtName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
					SendClientMessage(playerid, COLOR_WHITE, "** 离开载具将结束编辑!");
					editveh = CreateVehicle(RaceData[chosed][rtVeh1], px, py, pz, pa, -1, -1, 3600);
					PutPlayerInVehicle_Fix(playerid, editveh, 0);
					SetGVarInt("ERVeh", editveh, playerid);
				}
			    case 1:
			    {
			        if(RaceData[chosed][rtStartPos1X] == 0.0 && RaceData[chosed][rtStartPos1Y] == 0.0 && RaceData[chosed][rtStartPos1Z] == 0.0)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "必须先设定起跑位置才能设置检查点");
			        }
					if(GetGVarInt("EditRCP", playerid) == 1)
					{
						if(GetGVarInt("ERaceID", playerid) == chosed)
						{
							format(string, sizeof(string), "** 你结束了赛道 %s 的编辑,资料已储存", RaceData[chosed][rtName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
							SaveRaceData(chosed);
							DisablePlayerCheckpoint(playerid);
						}
						else
						{
							format(string, sizeof(string), "** 你目前在编辑赛道 %s ,无法编辑其他赛道", RaceData[GetGVarInt("ERaceID", playerid)][rtName]);
			    			SendClientMessage(playerid, COLOR_WHITE, string);
						}
					}
					else
					{
					    new editveh;
					    SetGVarInt("EditRCP", 1, playerid);
					    SetGVarInt("ERaceID", chosed, playerid);
					    format(string, sizeof(string), "** 你开始编辑赛道 %s 的检查点,请到下一个检查点的位置后按下左ALT键确认", RaceData[chosed][rtName]);
						SendClientMessage(playerid, COLOR_WHITE, string);
						SendClientMessage(playerid, COLOR_WHITE, "** 按左CTRL键删除上一个检查点,离开载具将结束编辑!");
						format(string, sizeof(string), "** 目前有 %d 个检查点", RaceData[chosed][rtMaxCP]);
						SendClientMessage(playerid, COLOR_YELLOW, string);
						if(RaceData[chosed][rtMaxCP] > 0)
						{
						    new showrcp = RaceData[chosed][rtMaxCP]-1;
						    SetPlayerCheckpoint(playerid, RCPData[chosed][showrcp][rcpX], RCPData[chosed][showrcp][rcpY], RCPData[chosed][showrcp][rcpZ], 10.0);
						}
						editveh = CreateVehicle(RaceData[chosed][rtVeh1], RaceData[chosed][rtStartPos1X], RaceData[chosed][rtStartPos1Y], RaceData[chosed][rtStartPos1Z], RaceData[chosed][rtStartPos1A], -1, -1, 3600);
						PutPlayerInVehicle_Fix(playerid, editveh, 0);
						SetGVarInt("ERVeh", editveh, playerid);
					}
			    }
			    case 2:
			    {
			        new racestr[256];
					if(RaceData[chosed][rtCreator] == 0)
					{
					    format(string, sizeof(string), "服务器");
					}
					else
					{
                        format(string, sizeof(string), "%s", GetPlayerSqlName(RaceData[chosed][rtCreator]));
					}
			        format(racestr, sizeof(racestr), ""#TEXT_FADEGREEN"%s\n\n"#TEXT_WHITE"建立人: %s\n检查点数: %d\n最多玩家数: %d\n信息:\n%s", RaceData[chosed][rtName], string, RaceData[chosed][rtMaxCP], RaceData[chosed][rtMaxRacers], RaceData[chosed][rtDes]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"赛道信息", racestr, "关闭", "");
				}
				case 3:
				{
				    RaceData[chosed][rtFastestTime] = 86400000;
				    RaceData[chosed][rtFastestRacer] = 0;
				    SaveRaceData(chosed);
				    ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_YELLOW"纪录删除完成\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
				}
				case 4:
				{
				    if(GetGVarInt("ERaceCP", playerid) == 1)
					{
						if(GetGVarInt("ERaceID", playerid) == chosed)
						{
							return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你目前还在编辑这个赛道,请先结束编辑才能删除");
						}
					}
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要删除这个赛道 %s 吗?", RaceData[chosed][rtName]);
					ShowPlayerDialog(playerid, DIALOG_SETRACE_DELETE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"赛道信息", string, "确认", "取消");
				}
			}
			return 1;
		}

		case DIALOG_SETRACE_DELETE:
		{
            if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			}
			static chosed;
			chosed = GetGVarInt("DDecideID", playerid);
			DeleteRace(chosed);
			ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_YELLOW"赛道删除完成!\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			return 1;
		}

		case DIALOG_SETRACE_CREATE_NAME:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_YELLOW"赛道系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			}
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_NAME, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"你没有输入任何东西\n输入赛道名称", "确认", "取消");
			}
			SetGVarString("CRaceName", inputtext, playerid);
			ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_INFO, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"输入赛道信息", "确认", "取消");
			return 1;
		}

		case DIALOG_SETRACE_CREATE_INFO:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_NAME, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"输入赛道名称", "确认", "取消");
			}
			SetGVarString("CRaceInfo", inputtext, playerid);
			ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_TYPE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"选择赛道类型:\n海陆赛道 (指定载具)\n海陆赛道 (自备载具)\n空中赛道 (指定飞机)\n空中赛道 (自备飞机)", "选择", "关闭");
			return 1;
		}

		case DIALOG_SETRACE_CREATE_TYPE:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_INFO, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"输入赛道信息", "确认", "取消");
			}
			switch(listitem)
			{
			    case 0:SetGVarInt("CRaceType", RACE_ROAD_A, playerid);
			    case 1:SetGVarInt("CRaceType", RACE_ROAD_C, playerid);
			    case 2:SetGVarInt("CRaceType", RACE_AIR_A, playerid);
			    case 3:SetGVarInt("CRaceType", RACE_AIR_C, playerid);
			    case 4:SetGVarInt("CRaceType", RACE_LAP_A, playerid);
			    case 5:SetGVarInt("CRaceType", RACE_LAP_C, playerid);
			}
			ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_MAX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"选择赛道最大人数:\n1\n2\n\n3\n4\n5\n6\n7\n8\n9\n10", "选择", "关闭");
			return 1;
		}

		case DIALOG_SETRACE_CREATE_MAX:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_INFO, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"输入赛道信息", "确认", "取消");
			}
			static name[24], info[144], type, maxracers;
			GetGVarString("CRaceName", name, sizeof(name), playerid);
			GetGVarString("CRaceInfo", info, sizeof(info), playerid);
			type = GetGVarInt("CRaceType", playerid);
			maxracers = listitem+1;
			switch(type)
			{
			    case RACE_ROAD_C, RACE_LAP_C:
			    {
			        CreateRace(name, info, type, maxracers, 560, 562, 559, 561, 558);
			        ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"赛道系统", ""#TEXT_FADEGREEN"赛道建立完成,请选择编辑赛道来设定检查点\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			    }
			    case RACE_AIR_C:
			    {
			        CreateRace(name, info, type, maxracers, 513, 476, 593, 512, 511);
			        ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"赛道系统", ""#TEXT_FADEGREEN"赛道建立完成,请选择编辑赛道来设定检查点\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			    }
			    default:
			    {
			        ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_VEH, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"依序输入五台指定载具的模组ID,并用空格分隔", "确认", "取消");
			        SetGVarInt("CRaceMax", maxracers, playerid);
			    }
			}
			return 1;
		}

		case DIALOG_SETRACE_CREATE_VEH:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_MAX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"选择赛道最大人数:\n1\n2\n\n3\n4\n5\n6\n7\n8\n9\n10", "选择", "关闭");
			}
			static name[24], info[144], type, maxracers, veh1, veh2, veh3, veh4, veh5;
			GetGVarString("CRaceName", name, sizeof(name), playerid);
			GetGVarString("CRaceInfo", info, sizeof(info), playerid);
			type = GetGVarInt("CRaceType", playerid);
			maxracers = GetGVarInt("CRaceMax", playerid);
			sscanf(inputtext, "ddddd", veh1, veh2, veh3, veh4, veh5);
			if(veh1 < 400 || veh2 < 400 || veh3 < 400 || veh4 < 400 || veh5 < 400)
			{
			    return ShowPlayerDialog(playerid, DIALOG_SETRACE_CREATE_VEH, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"建立赛道", ""#TEXT_WHITE"模组ID不存在!\n\n依序输入五台指定载具的模组ID,并用空格分隔", "确认", "取消");
            }
			CreateRace(name, info, type, maxracers, veh1, veh2, veh3, veh4, veh5);
			ShowPlayerDialog(playerid, DIALOG_SETRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"赛道系统", ""#TEXT_FADEGREEN"赛道建立完成,请选择编辑赛道来设定检查点\n"#TEXT_FADEGREEN"新增赛道\n"#TEXT_SKYBLUE"编辑赛道", "选择", "关闭");
			return 1;
		}

		case DIALOG_EVENT:
		{
		    if(!response) return 1;
		    switch(listitem)
			{
			    case 0:
			    {
			        if(GetStartedEvent() >= MAX_EVENTS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前无法再开始新活动了");
			        ShowPlayerDialog(playerid, DIALOG_EVENT_START1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", ""#TEXT_WHITE"选择活动种类\n单人死斗(DM)\n团队死斗(TDM)\n单人对决(VS)\n团队对决(TVS)\n生存战(Survival)\n小队死斗(SDM)\n小队对决(SVS)\n小队生存(SSurvivial)", "确认", "取消");
			    }
			    case 1:
			    {
			        new eventlist[512], i, j, l;
			        eventlist[0] = EOS;
     				for(i = l = 0, j = MAX_EVENTS; i < j; i++)
					{
						if(Event[i][evStatus] == STATUS_FINISHED) { continue;}
						format(eventlist, sizeof(eventlist), "%s(%d)%s\t%s\t%s\t%d\n", eventlist, i, GetEventTypeName(i), GetEventType2Name(i), GetEventMapName(i), Event[i][evPlayers]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_SKYBLUE"管理活动", ""#TEXT_WHITE"目前没有任何进行中的活动", "确定", "");}
					format(eventlist, sizeof(eventlist), "(id)活动种类\t模式\t地图\t参加人数\n%s", eventlist);
					ShowPlayerDialog(playerid, DIALOG_EVENT_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"管理活动", eventlist, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_EVENT_JOIN:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(GetGVarInt("Eventing", playerid) == 1 || GetPlayerState(playerid) == PLAYER_STATE_SPECTATING
			|| GetGVarInt("Racing", playerid) > 0 || PlayerData[playerid][pWanted] > 0 || GetGVarInt("PlayerAnimal", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前无法参加活动");
			switch(Event[chosed][evType])
			{
			    case EVENT_TDM, EVENT_TVS:
			    {
			        if(GetGVarInt("BluePlayers", chosed) > GetGVarInt("RedPlayers", chosed)) SetPlayerJoinEvent(playerid, chosed, EVENT_TEAM_RED);
		    		else SetPlayerJoinEvent(playerid, chosed, EVENT_TEAM_BLUE);
		    	}
		    	case EVENT_DM, EVENT_VS, EVENT_SURVIVE:
			    {
		    		SetPlayerJoinEvent(playerid, chosed, NO_TEAM);
		    	}
		    	case EVENT_SDM, EVENT_SVS, EVENT_SSUR:
		    	{
		    	    new team = GetPlayerTeam(playerid);
		    	    if(team == NO_TEAM) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这是小队性质活动,你必须先在个人菜单加入或建立小队才能参加这个活动");
		    	    if(Team[team][tEventing] == 1 && Team[team][tEventID] != chosed) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的小队正在参加其他活动了");
		    	    SetPlayerJoinEvent(playerid, chosed, GetPlayerTeam(playerid));
		    	}
		    }
		    return 1;
		}
		case DIALOG_EVENT_EXIT:
		{
		    if(!response) return 1;
		    if(GetGVarInt("Eventing", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前没有参加任何活动");
		    new eventid = GetGVarInt("EventID", playerid);
			SetPlayerLeaveEvent(playerid, eventid);
		    return 1;
		}
		case DIALOG_EVENT_LIST:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    SetGVarInt("DDecideID", chosed, playerid);
		    ShowPlayerDialog(playerid, DIALOG_EVENT_ADMIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"管理活动", ""#TEXT_WHITE"选择以下操作\n"#TEXT_RED"结束活动", "选择", "关闭");
		    return 1;
		}
		case DIALOG_EVENT_ADMIN:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
			{
			    case 0: EventEnd(chosed);
			}
			return 1;
		}
		case DIALOG_EVENT_START1:
		{
		    if(!response) return 1;
		    switch(listitem)
			{
			    case 0: SetGVarInt("EvSType", EVENT_DM, playerid);
			    case 1: SetGVarInt("EvSType", EVENT_TDM, playerid);
			    case 2: SetGVarInt("EvSType", EVENT_VS, playerid);
			    case 3: SetGVarInt("EvSType", EVENT_TVS, playerid);
			    case 4: SetGVarInt("EvSType", EVENT_SURVIVE, playerid);
			    case 5: SetGVarInt("EvSType", EVENT_SDM, playerid);
			    case 6: SetGVarInt("EvSType", EVENT_SVS, playerid);
			    case 7: SetGVarInt("EvSType", EVENT_SSUR, playerid);
			}
			ShowPlayerDialog(playerid, DIALOG_EVENT_START2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", ""#TEXT_WHITE"选择活动持续时间\n1分钟\n3分钟\n5分钟\n10分钟\n15分钟\n20分钟\n30分钟\n60分钟\n不限", "确认", "取消");
			return 1;
		}
		case DIALOG_EVENT_START2:
		{
		    if(!response) return 1;
		    new type = GetGVarInt("EvSType", playerid);
		    switch(listitem)
			{
			    case 0: SetGVarInt("EvSTime", 60, playerid);
			    case 1: SetGVarInt("EvSTime", 180, playerid);
			    case 2: SetGVarInt("EvSTime", 300, playerid);
			    case 3: SetGVarInt("EvSTime", 600, playerid);
			    case 4: SetGVarInt("EvSTime", 900, playerid);
			    case 5: SetGVarInt("EvSTime", 1200, playerid);
			    case 6: SetGVarInt("EvSTime", 1800, playerid);
			    case 7: SetGVarInt("EvSTime", 3600, playerid);
			    case 8: SetGVarInt("EvSTime", 0, playerid);
			}
			switch(type)
			{
			    case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS:
			    {
			        new i, j, l, typestr[256];
			        for(i = l = 0, j = sizeof(SingleEventType); i < j; i++)
			        {
			            format(typestr, sizeof(typestr), "%s%s\n", typestr, SingleEventType[i][sevtName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
			        }
			        format(typestr, sizeof(typestr), ""#TEXT_WHITE"选择活动模式\n%s", typestr);
					ShowPlayerDialog(playerid, DIALOG_EVENT_START3, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", typestr, "选择", "关闭");
			    }
			    case EVENT_TDM, EVENT_TVS:
			    {
			        new i, j, l, typestr[256];
			        for(i = l = 0, j = sizeof(TeamEventType); i < j; i++)
			        {
			            format(typestr, sizeof(typestr), "%s%s\n", typestr, TeamEventType[i][tevtName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
			        }
			        format(typestr, sizeof(typestr), ""#TEXT_WHITE"选择活动模式\n%s", typestr);
					ShowPlayerDialog(playerid, DIALOG_EVENT_START3, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", typestr, "选择", "关闭");
			    }
			    case EVENT_SURVIVE, EVENT_SSUR:
			    {
			        new i, j, l, typestr[256];
			        for(i = l = 0, j = sizeof(SurviveEventMap); i < j; i++)
			        {
			            format(typestr, sizeof(typestr), "%s%s\n", typestr, SurviveEventMap[i][svevmName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
			        }
			        format(typestr, sizeof(typestr), ""#TEXT_WHITE"选择活动地图\n%s", typestr);
					ShowPlayerDialog(playerid, DIALOG_EVENT_START4, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", typestr, "选择", "关闭");
			    }
			}
			return 1;
		}
		case DIALOG_EVENT_START3:
		{
		    if(!response) return 1;
		    new type = GetGVarInt("EvSType", playerid);
		    SetGVarInt("EvSType2", GetGVarInt("DListID", listitem*1000+playerid), playerid);
		    switch(type)
			{
			    case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS:
			    {
			        new i, j, l, typestr[256];
			        for(i = l = 0, j = sizeof(SingleEventMap); i < j; i++)
			        {
			            format(typestr, sizeof(typestr), "%s%s\n", typestr, SingleEventMap[i][sevmName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
			        }
			        format(typestr, sizeof(typestr), ""#TEXT_WHITE"选择活动地图\n%s", typestr);
					ShowPlayerDialog(playerid, DIALOG_EVENT_START4, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", typestr, "选择", "关闭");
			    }
			    case EVENT_TDM, EVENT_TVS:
			    {
			        new i, j, l, typestr[256];
			        for(i = l = 0, j = sizeof(TeamEventMap); i < j; i++)
			        {
			            format(typestr, sizeof(typestr), "%s%s\n", typestr, TeamEventMap[i][tevmName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
			        }
			        format(typestr, sizeof(typestr), ""#TEXT_WHITE"选择活动地图\n%s", typestr);
					ShowPlayerDialog(playerid, DIALOG_EVENT_START4, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", typestr, "选择", "关闭");
			    }
			}
		    return 1;
		}
		case DIALOG_EVENT_START4:
		{
		    if(!response) return 1;
		    SetGVarInt("EvSMap", GetGVarInt("DListID", listitem*1000+playerid), playerid);
		    ShowPlayerDialog(playerid, DIALOG_EVENT_START5, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"开始新活动", ""#TEXT_WHITE"选择胜方奖金\n无奖励\n$500\n$1000\n$3000\n$5000\n$10000\n$20000\n$50000\n$100000", "选择", "关闭");
		    return 1;
		}
		case DIALOG_EVENT_START5:
		{
		    if(!response) return 1;
		    new prize;
		    switch(listitem)
			{
			    case 0: prize = 0;
			    case 1: prize = 500;
			    case 2: prize = 1000;
			    case 3: prize = 3000;
			    case 4: prize = 5000;
			    case 5: prize = 10000;
			    case 6: prize = 20000;
			    case 7: prize = 50000;
			    case 8: prize = 100000;
			}
		    StartEvent(GetGVarInt("EvSType", playerid), GetGVarInt("EvSType2", playerid), GetGVarInt("EvSMap", playerid), GetGVarInt("EvSTime", playerid), prize);
		    return 1;
		}
		case DIALOG_MIX:
		{
		    if(!response) return 1;
	    	new slot1 = GetGVarInt("MixSlot1", playerid),
				slot2 = GetGVarInt("MixSlot2", playerid),
				slot3 = GetGVarInt("MixSlot3", playerid),
				amount1 = GetGVarInt("MixAmount1", playerid),
				amount2 = GetGVarInt("MixAmount2", playerid),
				amount3 = GetGVarInt("MixAmount3", playerid);
		    switch(listitem)
			{
			    case 0 .. 2:
			    {
			        new oBagString[1024], i, k, j, l;
			        oBagString[0] = EOS;
     				for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
					{
						if(PlayerItems_USE[playerid][i][iuItemID] == 0) { continue;}
						k = PlayerItems_USE[playerid][i][iuItemID];
						if(ItemsList_USE[k][iuType] == IU_MAT || ItemsList_USE[k][iuType] == IU_FOOD || ItemsList_USE[k][iuType] == IU_FISH || ItemsList_USE[k][iuType] == IU_WATER)
						{
							format(oBagString, sizeof(oBagString), "%s%s\t%d\t%d\n",
							oBagString, ItemsList_USE[k][iuName], PlayerItems_USE[playerid][i][iuCount], ItemsList_USE[k][iuSpace]*PlayerItems_USE[playerid][i][iuCount]);
							SetGVarInt("DListID", k, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"选择材料", ""#TEXT_WHITE"你没有任何材料", "确定", "");}
					format(oBagString, sizeof(oBagString), "名称\t总数\t占用空间\n%s", oBagString);
					ShowPlayerDialog(playerid, DIALOG_MIX_SELECT, DIALOG_STYLE_TABLIST_HEADERS, "选择材料", oBagString, "使用", "关闭");
					SetGVarInt("DSelect", listitem+1, playerid);
				}
				case 3:
				{
				    if(slot1 == 0 && slot2 == 0 && slot3 == 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有选择任何合成材料");}
				    new i, j, k;
				    for(i = k = 0, j = sizeof(MixList); i < j; i++)
				    {
				        if((slot1 == MixList[i][mxSlot1] && amount1 == MixList[i][mxSlot1A]) && (slot2 == MixList[i][mxSlot2] && amount2 == MixList[i][mxSlot2A]) && (slot3 == MixList[i][mxSlot3] && amount3 == MixList[i][mxSlot3A]))
				        {
				            if(PlayerHaveItem(playerid, 1, MixList[i][mxSlot1]) + MixList[i][mxSlot1A] < 1
							|| PlayerHaveItem(playerid, 1, MixList[i][mxSlot2]) + MixList[i][mxSlot2A] < 1
							|| PlayerHaveItem(playerid, 1, MixList[i][mxSlot3]) + MixList[i][mxSlot3A] < 1)
							{
								DeleteGVar("MixSlot1", playerid),
								DeleteGVar("MixSlot2", playerid),
								DeleteGVar("MixSlot3", playerid),
								DeleteGVar("MixAmount1", playerid),
								DeleteGVar("MixAmount2", playerid),
								DeleteGVar("MixAmount3", playerid);
							    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你选择的素材已经不够了,请重新选择");
					    	}
					    	if(MixList[i][mxReqFire] == 1 && !IsPlayerCloseToFire(playerid)){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须要在火旁才能合成这些材料");}
					    	if(SkillData[playerid][psArm] < MixList[i][mxReqArm]) return SendClientMessage(playerid, COLOR_WHITE, "合成错误: 所选的材料组合合成不出任何道具,请确认材料跟顺序是否正确");
					    	if(SkillData[playerid][psDrug] < MixList[i][mxReqDrug]) return SendClientMessage(playerid, COLOR_WHITE, "合成错误: 所选的材料组合合成不出任何道具,请确认材料跟顺序是否正确");

					    	if(MixList[i][mxType] == 1)
							{
							    if(ItemsList_USE[MixList[i][mxResult]][iuType] == IU_FOOD)
						    	{
						    		format(string, sizeof(string), "** %s 烹煮了%s **", playername, ItemsList_USE[MixList[i][mxResult]][iuName]);
						    	}
						    	else format(string, sizeof(string), "** %s 合成了%s **", playername, ItemsList_USE[MixList[i][mxResult]][iuName]);
						    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
								GivePlayerItem(playerid, 1, MixList[i][mxResult], MixList[i][mxResultA]);
								format(string, sizeof(string), "** "#TEXT_YELLOW"合成完成"#TEXT_BLUEGREEN": 你合成了%d个"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN",消耗了",
					    		MixList[i][mxResultA], ItemsList_USE[MixList[i][mxResult]][iuName]);
							}
					    	else if(MixList[i][mxType] == 2)
							{
							    if(PlayerHaveItem(playerid, 2, MixList[i][mxResult])){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经有这个物品了");}
							    format(string, sizeof(string), "** %s 合成了 %s **", playername, ItemsList_EQ[MixList[i][mxResult]][ieqName]);
						    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
								GivePlayerItem(playerid, 2, MixList[i][mxResult], 1);
								format(string, sizeof(string), "** "#TEXT_YELLOW"合成完成"#TEXT_BLUEGREEN": 你合成了1个"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN",消耗了",
					    		ItemsList_EQ[MixList[i][mxResult]][ieqName]);
							}
					    	else if(MixList[i][mxType] == 3)
							{
							    format(string, sizeof(string), "** %s 合成了 %s **", playername, WeaponsList[MixList[i][mxResult]][wName]);
						    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
								GivePlayerWeapon(playerid, MixList[i][mxResult], MixList[i][mxResultA]);
								format(string, sizeof(string), "** "#TEXT_YELLOW"合成完成"#TEXT_BLUEGREEN": 你合成了"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN"弹药%d发,消耗了",
					    		WeaponsList[MixList[i][mxResult]][wName], MixList[i][mxResultA]);
							}
							if(MixList[i][mxSlot1] > 0)
							{
							    GivePlayerItem(playerid, 1, MixList[i][mxSlot1], -MixList[i][mxSlot1A]);
								format(string, sizeof(string), "%s (A)%d个%s", string, MixList[i][mxSlot1A], ItemsList_USE[MixList[i][mxSlot1]][iuName]);
								DeleteGVar("MixSlot1", playerid);
								if(PlayerHaveItem(playerid, 1, MixList[i][mxSlot1]) >= MixList[i][mxSlot1A])
								{
								    SetGVarInt("MixSlot1", MixList[i][mxSlot1], playerid);
									SetGVarInt("MixAmount1", MixList[i][mxSlot1A], playerid);
								}
								else
								{
								    DeleteGVar("MixSlot1", playerid);
									DeleteGVar("MixAmount1", playerid);
								}
							}
					    	if(MixList[i][mxSlot2] > 0)
							{
							    GivePlayerItem(playerid, 1, MixList[i][mxSlot2], -MixList[i][mxSlot2A]);
								format(string, sizeof(string), "%s (B)%d个%s", string, MixList[i][mxSlot2A], ItemsList_USE[MixList[i][mxSlot2]][iuName]);
								DeleteGVar("MixSlot2", playerid);
								if(PlayerHaveItem(playerid, 1, MixList[i][mxSlot2]) >= MixList[i][mxSlot2A])
								{
								    SetGVarInt("MixSlot2", MixList[i][mxSlot2], playerid);
									SetGVarInt("MixAmount2", MixList[i][mxSlot2A], playerid);
								}
								else
								{
								    DeleteGVar("MixSlot2", playerid);
									DeleteGVar("MixAmount2", playerid);
								}
							}
					    	if(MixList[i][mxSlot3] > 0)
							{
							    GivePlayerItem(playerid, 1, MixList[i][mxSlot3], -MixList[i][mxSlot3A]);
								format(string, sizeof(string), "%s (C)%d个%s", string, MixList[i][mxSlot3A], ItemsList_USE[MixList[i][mxSlot3]][iuName]);
								DeleteGVar("MixSlot3", playerid);
								if(PlayerHaveItem(playerid, 1, MixList[i][mxSlot3]) >= MixList[i][mxSlot3A])
								{
								    SetGVarInt("MixSlot3", MixList[i][mxSlot3], playerid);
									SetGVarInt("MixAmount3", MixList[i][mxSlot3A], playerid);
								}
								else
								{
								    DeleteGVar("MixSlot3", playerid);
									DeleteGVar("MixAmount3", playerid);
								}
							}
					    	SendClientMessage(playerid, COLOR_BLUEGREEN, string);

					    	k = 1;
					    	rand = random(20);
							if(rand == 0)
							{
								GivePlayerPoint(playerid, 4, 1);
								format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"研发知识"#TEXT_LIGHTBLUE"1点");
								SendClientMessage(playerid, COLOR_WHITE, string);
							}
							if(MixList[i][mxReqArm] > 0)
							{
								new Float:px, Float:py, Float:pz;
							    GetPlayerPos(playerid, px, py, pz);
		    					SetPlayerCrime(playerid, CRIME_MAKEGUN, VICTIM_NONE, 0, 0, px, py, pz, 60);//合成枪械罪行
							}
					    	break;
					    }
					    else { continue; }
					}
					if(k == 0)
				    {
						SendClientMessage(playerid, COLOR_WHITE, "合成错误: 所选的材料组合合成不出任何道具,请确认材料跟顺序是否正确");
				    }
				    if(i == 1) UpdatePlayerMission(playerid, 12, 6);//合成火种
				    if(i == 0) UpdatePlayerMission(playerid, 12, 9);//合成火堆
				    ShowPlayerMixMenu(playerid);
				}
				case 4:
				{
				    DeleteGVar("MixSlot1", playerid),
					DeleteGVar("MixSlot2", playerid),
					DeleteGVar("MixSlot3", playerid),
					DeleteGVar("MixAmount1", playerid),
					DeleteGVar("MixAmount2", playerid),
					DeleteGVar("MixAmount3", playerid);
					ShowPlayerMixList(playerid, 0);
				}
			}
			return 1;
		}
		case DIALOG_SETGIFT:
		{
		    if(!response) return 1;
		    switch(listitem)
			{
			    case 0:
			    {
			        ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD1, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入礼物标题", "确认", "取消");
			    }
			    case 1:
			    {
			        new list[1024], i, j, l, itemname[64];
			        list[0] = EOS;
     				for(i = l = 0, j = MAX_GIFTS; i < j; i++)
					{
						if(GiftData[i][gfType] == GIFT_LEVEL)
						{
						    switch(GiftData[i][gfItemType])
						    {
						        case ITEM_USE: format(itemname, 64, "%s", ItemsList_USE[GiftData[i][gfItemID]][iuName]);
						        case ITEM_EQ: format(itemname, 64, "%s", ItemsList_EQ[GiftData[i][gfItemID]][ieqName]);
						        case ITEM_CASH: format(itemname, 64, "礼金");
						        case ITEM_WEAPON: format(itemname, 64, "%s", WeaponsList[GiftData[i][gfItemID]][wName]);
						        case ITEM_SKILLPT: format(itemname, 64, "%s", PtsList[GiftData[i][gfItemID]][spName]);
						    }
							format(list, sizeof(list), "%s%s\t%d\t%s\t%d\n", list, GiftData[i][gfTitle], GiftData[i][gfLevel], itemname, GiftData[i][gfAmount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "管理等级奖励", ""#TEXT_WHITE"目前没有任何等级奖励", "确定", "");}
					format(list, sizeof(list), "标题\t可领取等级\t道具名称\t数量\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_LIST, DIALOG_STYLE_TABLIST_HEADERS, "管理等级奖励", list, "选择", "关闭");
				}
				case 2:
			    {
			        new list[1024], i, j, l, itemname[64];
			        list[0] = EOS;
     				for(i = l = 0, j = MAX_GIFTS; i < j; i++)
					{
						if(GiftData[i][gfType] == GIFT_DAILY)
						{
						    switch(GiftData[i][gfItemType])
						    {
						        case ITEM_USE: format(itemname, 64, "%s", ItemsList_USE[GiftData[i][gfItemID]][iuName]);
						        case ITEM_EQ: format(itemname, 64, "%s", ItemsList_EQ[GiftData[i][gfItemID]][ieqName]);
						        case ITEM_CASH: format(itemname, 64, "礼金");
						        case ITEM_WEAPON: format(itemname, 64, "%s", WeaponsList[GiftData[i][gfItemID]][wName]);
						        case ITEM_SKILLPT: format(itemname, 64, "%s", PtsList[GiftData[i][gfItemID]][spName]);
						    }
							format(list, sizeof(list), "%s%s\t%d\t%s\t%d\n", list, GiftData[i][gfTitle], GiftData[i][gfMonth], itemname, GiftData[i][gfAmount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "管理每日登入奖励", ""#TEXT_WHITE"目前没有任何每日登入奖励", "确定", "");}
					format(list, sizeof(list), "标题\t月份\t道具名称\t数量\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_LIST, DIALOG_STYLE_TABLIST_HEADERS, "管理每日登入奖励", list, "选择", "关闭");
				}
				case 3:
			    {
			        new list[1024], i, j, l, itemname[64];
			        list[0] = EOS;
     				for(i = l = 0, j = MAX_GIFTS; i < j; i++)
					{
						if(GiftData[i][gfType] == GIFT_DATE)
						{
						    switch(GiftData[i][gfItemType])
						    {
						        case ITEM_USE: format(itemname, 64, "%s", ItemsList_USE[GiftData[i][gfItemID]][iuName]);
						        case ITEM_EQ: format(itemname, 64, "%s", ItemsList_EQ[GiftData[i][gfItemID]][ieqName]);
						        case ITEM_CASH: format(itemname, 64, "礼金");
						        case ITEM_WEAPON: format(itemname, 64, "%s", WeaponsList[GiftData[i][gfItemID]][wName]);
						        case ITEM_SKILLPT: format(itemname, 64, "%s", PtsList[GiftData[i][gfItemID]][spName]);
						    }
							format(list, sizeof(list), "%s%s\t%d.%d.%d\t%s\t%d\n", list, GiftData[i][gfTitle], GiftData[i][gfYear], GiftData[i][gfMonth], GiftData[i][gfDate], itemname, GiftData[i][gfAmount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "管理指定日期奖励", ""#TEXT_WHITE"目前没有任何指定日期奖励", "确定", "");}
					format(list, sizeof(list), "标题\t日期\t道具名称\t数量\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_LIST, DIALOG_STYLE_TABLIST_HEADERS, "管理指定日期奖励", list, "选择", "关闭");
				}
				case 4:
			    {
			        new list[1024], i, j, l, itemname[64];
			        list[0] = EOS;
     				for(i = l = 0, j = MAX_GIFTS; i < j; i++)
					{
						if(GiftData[i][gfType] == GIFT_STREAK)
						{
						    switch(GiftData[i][gfItemType])
						    {
						        case ITEM_USE: format(itemname, 64, "%s", ItemsList_USE[GiftData[i][gfItemID]][iuName]);
						        case ITEM_EQ: format(itemname, 64, "%s", ItemsList_EQ[GiftData[i][gfItemID]][ieqName]);
						        case ITEM_CASH: format(itemname, 64, "礼金");
						        case ITEM_WEAPON: format(itemname, 64, "%s", WeaponsList[GiftData[i][gfItemID]][wName]);
						        case ITEM_SKILLPT: format(itemname, 64, "%s", PtsList[GiftData[i][gfItemID]][spName]);
						    }
							format(list, sizeof(list), "%s%s\t%d\t%s\t%d\n", list, GiftData[i][gfTitle], GiftData[i][gfStreak], itemname, GiftData[i][gfAmount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "管理连续登入奖励", ""#TEXT_WHITE"目前没有任何连续登入奖励", "确定", "");}
					format(list, sizeof(list), "标题\t登入天数\t道具名称\t数量\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_LIST, DIALOG_STYLE_TABLIST_HEADERS, "管理连续登入奖励", list, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_SETGIFT_LIST:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);

		    ShowPlayerDialog(playerid, DIALOG_SETGIFT_DEL, DIALOG_STYLE_MSGBOX, "管理礼物", ""#TEXT_WHITE"是否要删除这条礼物", "选择", "关闭");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_SETGIFT_DEL:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);

		    format(string, sizeof(string), "** 已删除礼物ID:%d", chosed);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    DeleteGiftData(chosed);
		    return 1;
		}
		case DIALOG_SETGIFT_ADD1:
		{
		    if(!response) return 1;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD1, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"标题为空白或是含有无法使用的字元,请重新输入", "确认", "取消");
			}
			SetGVarString("GiftTitle", inputtext, playerid);
		    ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD2, DIALOG_STYLE_TABLIST_HEADERS, "新增礼物", ""#TEXT_WHITE"选择礼物种类\n等级奖励\n每日登入奖励\n指定日期奖励\n连续登入奖励", "确认", "取消");
		    return 1;
		}
		case DIALOG_SETGIFT_ADD2:
		{
		    if(!response) return 1;
		    switch(listitem)
		    {
		        case 0:
				{
					SetGVarInt("GiftType", GIFT_LEVEL, playerid);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入领取等级", "确认", "关闭");
				}
		        case 1:
		        {
					SetGVarInt("GiftType", GIFT_DAILY, playerid);
		        	ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入可领取期间月份(0的话则为全年皆可领取)", "确认", "关闭");
				}
		        case 2:
				{
					SetGVarInt("GiftType", GIFT_DATE, playerid);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入可领取日期(格式:年 月 日)", "确认", "关闭");
				}
		        case 3:
				{
					SetGVarInt("GiftType", GIFT_STREAK, playerid);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入可领取连续登入天数", "确认", "关闭");
				}
		    }
		    return 1;
		}
		case DIALOG_SETGIFT_ADD3:
		{
		    if(!response) return 1;
		    DeleteGVar("GiftLevel", playerid);
		    DeleteGVar("GiftYear", playerid);
		    DeleteGVar("GiftMonth", playerid);
		    DeleteGVar("GiftDate", playerid);
		    DeleteGVar("GiftStreak", playerid);
		    switch(GetGVarInt("GiftType", playerid))
		    {
		        case GIFT_LEVEL:
				{
				    new level = strval(inputtext);
					if(level < 1) return ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"领取等级不得小于1\n请输入领取等级", "确认", "关闭");
					SetGVarInt("GiftLevel", level, playerid);
				}
		        case GIFT_DAILY:
		        {
				    new month = strval(inputtext);
					if(month < 0 || month > 12) return ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"月份范围错误\n请输入可领取期间月份(0的话则为全年皆可领取)", "确认", "关闭");
					SetGVarInt("GiftMonth", month, playerid);
				}
		        case GIFT_DATE:
		        {
		            new year, month, date;
				    sscanf(inputtext, "ddd", year, month, date);
					if(month < 1 || month > 12 || date < 1 || date > 31 || year < 1990) return ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"日期范围错误\n请输入可领取日期(格式:年 月 日)", "确认", "关闭");
                    SetGVarInt("GiftYear", year, playerid);
					SetGVarInt("GiftMonth", month, playerid);
					SetGVarInt("GiftDate", date, playerid);
				}
		        case GIFT_STREAK:
				{
				    new streak = strval(inputtext);
					if(streak < 0) return ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD3, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"天数不得小于1\n请输入可领取连续登入天数", "确认", "关闭");
					SetGVarInt("GiftStreak", streak, playerid);
				}
		    }
		    ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD4, DIALOG_STYLE_TABLIST_HEADERS, "新增礼物", ""#TEXT_WHITE"请选择礼品种类\n消耗型道具\n工具型道具\n武器\n礼金\n技能点", "选择", "关闭");
		    return 1;
		}
		case DIALOG_SETGIFT_ADD4:
		{
		    if(!response) return 1;
		    new itemtype;
		    switch(listitem)
		    {
		        case 0:
				{
					itemtype = ITEM_USE;
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD5, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入消耗型道具ID", "确认", "关闭");
				}
		        case 1:
		        {
					itemtype = ITEM_EQ;
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD5, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入工具型道具ID", "确认", "关闭");
				}
		        case 2:
		        {
					itemtype = ITEM_WEAPON;
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD5, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入武器ID", "确认", "关闭");
				}
		        case 3:
		        {
					itemtype = ITEM_CASH;
					SetGVarInt("GiftItemID", 1, playerid);
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入礼金金额", "确认", "关闭");
				}
		        case 4:
		        {
					itemtype = ITEM_SKILLPT;
					ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD5, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入技能点ID", "确认", "关闭");
				}
		    }
		    SetGVarInt("GiftItemType", itemtype, playerid);
		    return 1;
		}
		case DIALOG_SETGIFT_ADD5:
		{
		    if(!response) return 1;
		    new itemid = strval(inputtext);
		    if(itemid < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这是无效的ID");
		    switch(GetGVarInt("GiftItemType", playerid))
		    {
		        case ITEM_USE, ITEM_EQ: ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入道具数量", "确认", "关闭");
		        case ITEM_WEAPON: ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入武器数量/弹药数", "确认", "关闭");
		        case ITEM_CASH: ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入礼金金额", "确认", "关闭");
		        case ITEM_SKILLPT: ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"请输入技能点数量", "确认", "关闭");
		    }
		    SetGVarInt("GiftItemID", itemid, playerid);
		    return 1;
		}
		case DIALOG_SETGIFT_ADD6:
		{
		    if(!response) return 1;
		    new amount = strval(inputtext),
				title[64];
			GetGVarString("GiftTitle", title, sizeof(title), playerid);
		    if(GetGVarInt("GiftItemType", playerid) == ITEM_EQ && amount > 1) ShowPlayerDialog(playerid, DIALOG_SETGIFT_ADD6, DIALOG_STYLE_INPUT, "新增礼物", ""#TEXT_WHITE"工具型道具数量不得大于1\n请输入道具数量", "确认", "关闭");
		    else if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于1");
		    AddGiftData(title, GetGVarInt("GiftType", playerid), GetGVarInt("GiftItemType", playerid), GetGVarInt("GiftItemID", playerid), amount, GetGVarInt("GiftLevel", playerid)
			, GetGVarInt("GiftYear", playerid), GetGVarInt("GiftMonth", playerid), GetGVarInt("GiftDate", playerid), GetGVarInt("GiftStreak", playerid));
			SendClientMessage(playerid, COLOR_WHITE, "** 新的礼物已经新增完成!");
			ShowPlayerDialog(playerid, DIALOG_SETGIFT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_PINKRED"礼物系统", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增礼物\n管理等级奖励\n管理每日登入奖励\n管理指定日期奖励\n管理连续登入奖励", "选择", "关闭");
			return 1;
		}
		case DIALOG_MIX_CHECK:
		{
		    if(!response) return ShowPlayerMixMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    if(chosed == PREV_PAGE) ShowPlayerMixList(playerid, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerMixList(playerid, GetGVarInt("Page", playerid)+1);
		    else
		    {
		        SetGVarInt("MixSlot1", MixList[chosed][mxSlot1], playerid),
				SetGVarInt("MixSlot2", MixList[chosed][mxSlot2], playerid),
				SetGVarInt("MixSlot3", MixList[chosed][mxSlot3], playerid),
				SetGVarInt("MixAmount1", MixList[chosed][mxSlot1A], playerid),
				SetGVarInt("MixAmount2", MixList[chosed][mxSlot2A], playerid),
				SetGVarInt("MixAmount3", MixList[chosed][mxSlot3A], playerid);
		        ShowPlayerMixMenu(playerid);
		    }
		    return 1;
		}
		case DIALOG_MIX_SELECT:
		{
		    if(!response) return ShowPlayerMixMenu(playerid);
		    new slot = GetGVarInt("DSelect", playerid),
		    	chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    switch(slot)
			{
			    case 1:
				{
					SetGVarInt("MixSlot1", chosed, playerid);
					SetGVarInt("MixAmount1", 0, playerid);
				}
			    case 2:
				{
					SetGVarInt("MixSlot2", chosed, playerid);
					SetGVarInt("MixAmount2", 0, playerid);
				}
				case 3:
				{
					SetGVarInt("MixSlot3", chosed, playerid);
					SetGVarInt("MixAmount3", 0, playerid);
				}
			}
			format(string, sizeof(string), ""#TEXT_WHITE"输入要放入几个%s,目前有%d个\n输入0代表清空栏位", ItemsList_USE[chosed][iuName], PlayerHaveItem(playerid, ITEM_USE, chosed));
			ShowPlayerDialog(playerid, DIALOG_MIX_AMOUNT, DIALOG_STYLE_INPUT, "输入数量", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_MIX_AMOUNT:
		{
		    if(!response) return ShowPlayerMixMenu(playerid);
		    new slot = GetGVarInt("DSelect", playerid),
		    	chosed = GetGVarInt("DDecideID", playerid);
			if(strval(inputtext) > PlayerHaveItem(playerid, ITEM_USE, chosed))
			{
				format(string, sizeof(string), ""#TEXT_WHITE"你没有这么多%s,目前有%d个", ItemsList_USE[chosed][iuName], PlayerHaveItem(playerid, ITEM_USE, chosed));
				ShowPlayerDialog(playerid, DIALOG_MIX_AMOUNT, DIALOG_STYLE_INPUT, "输入数量", string, "确认", "取消");
				return 1;
			}
			if(strval(inputtext) < 0)
			{
				format(string, sizeof(string), ""#TEXT_WHITE"数量不得小于0\n输入要放入几个%%s,目前有%d个", ItemsList_USE[chosed][iuName], PlayerHaveItem(playerid, ITEM_USE, chosed));
				ShowPlayerDialog(playerid, DIALOG_MIX_AMOUNT, DIALOG_STYLE_INPUT, "输入数量", string, "确认", "取消");
				return 1;
			}
		    switch(slot)
			{
			    case 1:
				{
					SetGVarInt("MixAmount1", strval(inputtext), playerid);
					if(strval(inputtext) == 0)
					{
						DeleteGVar("MixSlot1", playerid);
						DeleteGVar("MixAmount1", playerid);
					}
				}
			    case 2:
				{
					SetGVarInt("MixAmount2", strval(inputtext), playerid);
					if(strval(inputtext) == 0)
					{
						DeleteGVar("MixSlot2", playerid);
						DeleteGVar("MixAmount2", playerid);
					}
				}
				case 3:
				{
					SetGVarInt("MixAmount3", strval(inputtext), playerid);
					if(strval(inputtext) == 0)
					if(strval(inputtext) == 0)
					{
						DeleteGVar("MixSlot3", playerid);
						DeleteGVar("MixAmount3", playerid);
					}
				}
			}
			ShowPlayerMixMenu(playerid);
			return 1;
		}
		case DIALOG_OBJECT:
		{
		    if (!response)
			{
			    if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				else return ShowPlayerPropertyMenu(playerid);
			}
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				checkid = GetGVarInt("DDecidePlayer", playerid);
		    if(chosed == PREV_PAGE) ShowPlayerPropertyList(playerid, checkid, 4, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerPropertyList(playerid, checkid, 4, GetGVarInt("Page", playerid)+1);
		    else if(chosed == -3)
		    {
		        if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
		        SetGVarInt("SelectMode", SELECT_MOVE, playerid);
		        SelectObject_Fix(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "** 请点击要查看信息的物件,按住空白键可以移动视角,按ESC键取消");
		    }
		    else if(chosed == -4)
		    {
		        if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				new i, j, k, l, n;
		        for(i = k = l = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
		        {
		            if(ObjectData[i][oOwner] == PlayerData[playerid][pID])
		            {
		                k = ObjectData[i][oObjectID];
		                n = gettime() + ObjectList[k][oLast];
				        if(n > ObjectData[i][oExpire]) ObjectData[i][oExpire] = n;
						//ObjectData[i][oHealth] = ObjectList[k][oMaxHealth];
						l++;
					}
				}
				format(string, sizeof(string), "** 保养完成: 已将所有共 %d 个物件保养", l);
				SendClientMessage(playerid, COLOR_WHITE, string);
		    }
		    else
		    {
		        if(GetGVarInt("CheckProp", playerid) == 1) return DeleteGVar("CheckProp", playerid);
				new object = ObjectData[chosed][oObjectID], Year, Month, Day, Hour, Minute, Second;
                TimestampToDate(ObjectData[chosed][oExpire], Year, Month, Day, Hour, Minute, Second, 8);
				format(string, sizeof(string), ""#TEXT_WHITE"已选择 %s\n移动\n设定开关\n保养(延长有效期限,目前为:%04d/%02d/%02d %02d:%02d:%02d)\n收回\n破坏\n设定密码", ObjectList[object][oName], Year, Month, Day, Hour, Minute, Second);
				ShowPlayerDialog(playerid, DIALOG_OBJECT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "物件", string, "选择", "返回");
				SetGVarInt("DDecideID", chosed, playerid);
			}
			return 1;
		}
		case DIALOG_OBJECT_CHECK:
		{
		    if (!response) return ShowPlayerPropertyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				object = ObjectData[chosed][oObjectID];
			switch(listitem)
			{
			    case 0:
			    {
				    if(GetPlayerDistanceFromPointEx(playerid, ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ]) > 10.0 || GetPlayerInterior(playerid) != ObjectData[chosed][oInterior] || GetPlayerVirtualWorld(playerid) != ObjectData[chosed][oWorld])
				    {
				        format(string, sizeof(string), "** 你离你的 %s 太远了,已为你标记该物件的位置", ObjectList[object][oName]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        SetPlayerGPS(playerid, ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ]);
				    }
				    else
				    {
				        SetDynamicObjectPos(ObjectData[chosed][oObject], 0.0, 0.0, -100.0);//隐藏Dynamic Object改用原生Object来Edit(方便使用GetPlayerSurfingObjectID)
					    Streamer_Update(playerid);
				        new tmpobj = CreateObject(ObjectList[object][oObjID], ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ], ObjectData[chosed][oRX], ObjectData[chosed][oRY], ObjectData[chosed][oRZ]);
					    EditObject_Fix(playerid, tmpobj);
						SetGVarInt("EditMode", SELECT_MOVE, playerid);
						SetGVarInt("EditObjData", chosed, playerid);
						SetGVarInt("EditObject", object, playerid);
						SetGVarInt("EditObjID", tmpobj, playerid);
						SetGVarInt("EditDymObj", ObjectData[chosed][oObject], playerid);
		    			format(string, sizeof(string), "提示: 你可以拖拉移动这个 %s,按住空白键可以移动视角,按Esc将会取消放置,按确定则将会将物件放置在指定位置", ObjectList[object][oName]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				    }
				}
				case 1:
				{
				    switch(ObjectList[object][oType])
				    {
				        case OBJ_DOOR:
						{
							if(GetGVarInt("ObjectDoor", chosed) == 1)
							{
								CloseObjectDoor(chosed);
								format(string, sizeof(string), "** 已关闭门物件 %s", ObjectList[object][oName]);
				    			SendClientMessage(playerid, COLOR_WHITE, string);
				    		}
					        else
					        {
        						OpenObjectDoor(chosed);
								format(string, sizeof(string), "** 已开启门物件 %s", ObjectList[object][oName]);
				    			SendClientMessage(playerid, COLOR_WHITE, string);
							}
						}
						case OBJ_LIGHT:
						{
							if(GetGVarInt("ObjectLight", chosed) == 0)
							{
								SetDynamicObjectMaterial(ObjectData[chosed][oObject], 0, 0, "none", "none", 0xFFFFFFFF);
								SetGVarInt("ObjectLight", 1, chosed);
								format(string, sizeof(string), "** 已关闭灯物件 %s 的灯光", ObjectList[object][oName]);
				    			SendClientMessage(playerid, COLOR_WHITE, string);
				    		}
					        else
					        {
        						DestroyDynamicObject(ObjectData[chosed][oObject]);
        						ObjectData[chosed][oObject] = CreateDynamicObject(ObjectList[ObjectData[chosed][oObjectID]][oObjID], ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ], ObjectData[chosed][oRX], ObjectData[chosed][oRY], ObjectData[chosed][oRZ], ObjectData[chosed][oWorld], ObjectData[chosed][oInterior]);
        						Streamer_Update(playerid);
        						SetGVarInt("ObjectLight", 0, chosed);
								format(string, sizeof(string), "** 已开启灯物件 %s 的灯光", ObjectList[object][oName]);
				    			SendClientMessage(playerid, COLOR_WHITE, string);
							}
						}
						default: SendClientMessage(playerid, COLOR_WHITE, "** 这个物件没有可开关项目");
				    }
				}
				case 2:
				{
				    new newtime, Year, Month, Day, Hour, Minute, Second;
				    newtime = gettime() + ObjectList[object][oLast];
				    if(newtime > ObjectData[chosed][oExpire]) ObjectData[chosed][oExpire] = newtime;
				    //ObjectData[chosed][oHealth] = ObjectList[object][oMaxHealth];
				    TimestampToDate(ObjectData[chosed][oExpire], Year, Month, Day, Hour, Minute, Second, 8);
				    format(string, sizeof(string), "** 保养完成: 已将 %s 的有效期限延长至 %04d年%02d月%02d日 %02d:%02d:%02d", ObjectList[object][oName], Year, Month, Day, Hour, Minute, Second);
				    SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 3:
				{
				    if(GetPlayerDistanceFromPointEx(playerid, ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ]) > 10.0 || GetPlayerInterior(playerid) != ObjectData[chosed][oInterior] || GetPlayerVirtualWorld(playerid) != ObjectData[chosed][oWorld])
				    {
				        format(string, sizeof(string), "** 你离你的 %s 太远了,已为你标记该物件的位置", ObjectList[object][oName]);
				        SendClientMessage(playerid, COLOR_WHITE, string);
				        SetPlayerGPS(playerid, ObjectData[chosed][oX], ObjectData[chosed][oY], ObjectData[chosed][oZ]);
				    }
				    else
				    {
				        if((ObjectList[object][oItemType] == ITEM_USE && GetPlayerRemainingSpace(playerid) < ItemsList_USE[ObjectList[object][oItemID]][iuSpace])
						|| (ObjectList[object][oItemType] == ITEM_EQ && GetPlayerRemainingSpace(playerid) < ItemsList_EQ[ObjectList[object][oItemID]][ieqSpace]))
				        {
				            return SendClientMessage(playerid, COLOR_WHITE, "你的背包放不下这个物件了");
				        }
						GivePlayerItem(playerid, ObjectList[object][oItemType], ObjectList[object][oItemID], 1);
						DeleteObjectData(chosed);
				        format(string, sizeof(string), "** 已将物件 %s 收入背包", ObjectList[object][oName]);
				    	SendClientMessage(playerid, COLOR_WHITE, string);
				    }
				}
				case 4:
				{
				    DeleteObjectData(chosed);
				    format(string, sizeof(string), "** 已破坏物件 %s", ObjectList[object][oName]);
				    SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case 5:
				{
				    ShowPlayerDialog(playerid, DIALOG_OBJECT_PASS, DIALOG_STYLE_INPUT, "设定密码", ""#TEXT_WHITE"请输入要设定的密码,如果留白则不设定密码\n** 密码只对门类物件有效", "确认", "返回");
				}
			}
		    return 1;
		}
		case DIALOG_OBJECT_DOOR:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(strcmp(ObjectData[chosed][oPass], inputtext) == 0 && !isnull(inputtext))
		    {
		        OpenObjectDoor(chosed);
		    }
		    else SendClientMessage(playerid, COLOR_WHITE, "密码错误!");
		}
		case DIALOG_OBJECT_PASS:
		{
		    if (!response) return ShowPlayerPropertyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(strlen(inputtext) > 24) return ShowPlayerDialog(playerid, DIALOG_OBJECT_PASS, DIALOG_STYLE_INPUT, "设定密码", ""#TEXT_WHITE"密码过长,请重新输入", "确认", "返回");
		    if(isnull(inputtext))
		    {
		        format(string, sizeof(string), "** 你已经清除了这个门的密码设定");
		        mysql_format(DEFAULT_SESSION, ObjectData[chosed][oPass], 24, "null_pass");
		    }
		    else
		    {
		        format(string, sizeof(string), "** 这个物件的密码已设定完成");
		        mysql_format(DEFAULT_SESSION, ObjectData[chosed][oPass], 24, "%s", inputtext);
		    }
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    return 1;
		}
		case DIALOG_PLANT_CHECK:
		{
		    if (!response) return ShowPlayerPropertyMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				checkid = GetGVarInt("DDecidePlayer", playerid);
		    if(chosed == PREV_PAGE) ShowPlayerPropertyList(playerid, checkid, 3, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerPropertyList(playerid, checkid, 3, GetGVarInt("Page", playerid)+1);
		    else
		    {
			    SetPlayerMapIcon(playerid, 98, PlantData[chosed][ptX], PlantData[chosed][ptY], PlantData[chosed][ptZ], 0, COLOR_LIGHTGREEN, MAPICON_GLOBAL_CHECKPOINT);
			    SendClientMessage(playerid, COLOR_WHITE, "**已在地图上标示你的"#TEXT_LIGHTGREEN"植物"#TEXT_WHITE"了");
			    SetGVarInt("GPSPlant", chosed, playerid);
			    SetGVarInt("GPS1", 1, playerid);
			}
		    return 1;
		}
	    case DIALOG_PLANT_DELETE:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				plantid = PlantData[chosed][ptPlantID];
			if(PlantData[chosed][ptPlantID] == 0) return SendClientMessage(playerid, COLOR_WHITE, "这个植物已经不存在了");
		    format(string, sizeof(string), "** %s 把他的植物挖起来丢弃了 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	    	format(string, sizeof(string), "** 你把了你的植物"#TEXT_LIGHTGREEN" %s "#TEXT_WHITE"丢弃了", PlantList[plantid][ptName]);
	    	DeletePlant(chosed);
		    return 1;
		}
		case DIALOG_MGUN:
		{
		    if (!response) return 1;
		    new ListString[1024], i, j, l, check;
			ListString[0] = EOS;
			switch(listitem)
			{
			    case 0:
			    {
					for(i = l = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_GUN || MarketData[i][mSold] == 1) { continue;} //跳过非枪枝或已被完成的交易
						else
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t%d\n",
							ListString, WeaponsList[MarketData[i][mStuffID]][wName], MarketData[i][mAmount], MarketData[i][mPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
							check = 1;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场交易清单", ""#TEXT_WHITE"目前没有任何交易", "确认", "");}
					format(ListString, sizeof(ListString), "项目\t弹药数\t交易金额\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MGUN_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "枪枝市场交易清单", ListString, "选择", "关闭");
				}
				case 1:
			    {
			        for(i = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_GUN) { continue;}
						if(MarketData[i][mPoster] == PlayerData[playerid][pID])
						{
						    check = 1;
						    if(MarketData[i][mSold] == 0)
						    {
							    format(string, sizeof(string), ""#TEXT_WHITE"你目前已经还有未完成的交易,无法发起新交易\n\n "#TEXT_YELLOW"是否要取消目前的交易?\n取消后将返还交易金%d元", MarketData[i][mPrice]);
							    ShowPlayerDialog(playerid, DIALOG_MGUN_CANCEL, DIALOG_STYLE_MSGBOX, "枪枝市场发起交易", string, "是", "否");
							    SetGVarInt("DListID", i, playerid);
							}
							else
							{
							    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场我的交易", ""#TEXT_WHITE"你有已经完成的交易\n请先接收交易的物品", "确认", "");
							}
							break;
						}
					}
					if(check == 0)
					{
						ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE1, DIALOG_STYLE_TABLIST_HEADERS, "枪枝市场发起交易", "选择要订购的枪枝种类\n9mm手枪\n沙漠之鹰\n霰弹枪\n乌兹\nMP5冲锋枪\nAK47\n来福枪", "选择", "关闭");
					}
				}
				case 2:
				{
				    for(i = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_GUN) { continue;}
						if(MarketData[i][mPoster] == PlayerData[playerid][pID])
						{
						    check = 1;
						    format(string, sizeof(string), ""#TEXT_WHITE"交易枪枝: %s\n弹药数: %d\n交易金额: %d",
							WeaponsList[MarketData[i][mStuffID]][wName], MarketData[i][mAmount], MarketData[i][mPrice]);
						    if(MarketData[i][mSold] == 1)
						    {
						        format(string, sizeof(string), "%s\n"#TEXT_WHITE"交易状态: "TEXT_LIGHTGREEN"已成交\n"#TEXT_WHITE"成交玩家: %s\n\n"TEXT_YELLOW"** 是否领取你的交易品?", string, GetPlayerSqlName(MarketData[i][mSeller]));
						        ShowPlayerDialog(playerid, DIALOG_MGUN_DEAL, DIALOG_STYLE_MSGBOX, "枪枝市场我的交易", string, "是", "否");
						        SetGVarInt("DListID", i, playerid);
							}
							else
						    {
						        format(string, sizeof(string), "%s\n"#TEXT_WHITE"交易状态: "TEXT_RED"尚未成交", string);
						        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场我的交易", string, "确认", "");
							}
							break;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场我的交易", ""#TEXT_WHITE"你没有发起任何交易", "确认", "");}
				}
			}
			return 1;
		}
		case DIALOG_MGUN_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid);
		    if(MarketData[order][mPoster] == 0){format(string, sizeof(string), "黑市场");}
		    else
			{
				format(string, sizeof(string), "%s", GetPlayerSqlName(MarketData[order][mSeller]));
			}
			SetGVarInt("DListID", order, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"发起人: %s\n交易枪枝: %s\n弹药数: %d\n交易金额: %d\n\n**是否卖出手上的枪枝以获得"TEXT_LIGHTGREEN"$%d"TEXT_WHITE"?",
			string, WeaponsList[MarketData[order][mStuffID]][wName], MarketData[order][mAmount], MarketData[order][mPrice], MarketData[order][mPrice]);
			ShowPlayerDialog(playerid, DIALOG_MGUN_SELL, DIALOG_STYLE_MSGBOX, "枪枝市场交易确认", string, "是", "否");
			return 1;
		}
		case DIALOG_MGUN_SELL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", playerid), pgun, pammo;
		    GetPlayerWeaponData(playerid, WeaponsList[MarketData[order][mStuffID]][wSlot], pgun, pammo);
		    if(pgun != MarketData[order][mStuffID]) {return SendClientMessage(playerid, COLOR_WHITE, "交易错误: 你没有这个交易要求的枪枝");}
		    if(pammo < MarketData[order][mAmount]) {return SendClientMessage(playerid, COLOR_WHITE, "交易错误: 你的武器的弹药小于这项交易的要求");}
		    GivePlayerWeapon(playerid, MarketData[order][mStuffID], -MarketData[order][mAmount]);
		    GiveMoney(playerid, MarketData[order][mPrice]);
		    Log(moneylog, INFO, "%s(%d)于枪黑市卖出了%d弹药的%s(交易ID:%d),赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], MarketData[order][mAmount], MarketData[order][mStuffID], MarketData[order][mID], MarketData[order][mPrice]);
		    format(string, sizeof(string), "** 交易完成: 你卖出了手上的武器并获得了交易金"#TEXT_LIGHTGREEN"$%d", MarketData[order][mPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    RecordData[playerid][prMGun] ++;
		    if(MarketData[order][mPoster] == 0)
			{
			    GivePlayerExp(playerid, 200, EXP_MARKET);
			    DeleteDeal(order);
			    CreateSystemDeal(MARKET_GUN);
			}
		    else
			{
			    MarketData[order][mSeller] = PlayerData[playerid][pID];
			    MarketData[order][mSold] = 1;

			}
			return 1;
		}
		case DIALOG_MGUN_CANCEL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", playerid);
		    GiveMoney(playerid, MarketData[order][mPrice]);
		    Log(moneylog, INFO, "%s(%d)因为取消了枪黑市的交易而拿回了交易金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], MarketData[order][mPrice]);
		    DeleteDeal(order);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场取消交易", ""#TEXT_WHITE"你已取消你发起的交易,并返回交易金", "确认", "");
			return 1;
		}
		case DIALOG_MGUN_DEAL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", playerid);
		    GivePlayerWeapon(playerid, MarketData[order][mStuffID], MarketData[order][mAmount]);
		    DeleteDeal(order);
		    format(string, sizeof(string), ""#TEXT_WHITE"你获得了你的交易品");
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "枪枝市场交易完成", string, "确认", "");
			return 1;
		}
		case DIALOG_MGUN_CREATE1:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
          		case 0:
				{
					SetGVarInt("DCreateID", 22, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[22][wName]);
				}
		        case 1:
				{
					SetGVarInt("DCreateID", 24, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[24][wName]);
				}
				case 2:
				{
					SetGVarInt("DCreateID", 25, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[25][wName]);
				}
				case 3:
				{
					SetGVarInt("DCreateID", 28, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[28][wName]);
				}
				case 4:
				{
					SetGVarInt("DCreateID", 29, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[29][wName]);
				}
				case 5:
				{
					SetGVarInt("DCreateID", 30, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的弹药数", WeaponsList[30][wName]);
				}
		    }
		    ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE2, DIALOG_STYLE_INPUT, "枪枝市场发起交易", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_MGUN_CREATE2:
		{
		    if (!response) return 1;
		    new gid = GetGVarInt("DCreateID", playerid),
				amount = strval(inputtext);
		    if(amount < 1){return ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE2, DIALOG_STYLE_INPUT, "枪枝市场发起交易", ""#TEXT_WHITE"弹药数不得小于0,请重新输入", "确认", "取消");}
		    SetGVarInt("DCreateAmount", strval(inputtext), playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s以及弹药%d发\n请输入你愿意出的交易价\n"#TEXT_YELLOW"**确认后将会发起交易并扣除你身上的现金作为交易费", WeaponsList[gid][wName], strval(inputtext));
		    ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE3, DIALOG_STYLE_INPUT, "枪枝市场发起交易", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_MGUN_CREATE3:
		{
		    if (!response) return 1;
		    new gid = GetGVarInt("DCreateID", playerid), gamount = GetGVarInt("DCreateAmount", playerid),
				value = strval(inputtext);
		    if(value < 1){return ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE3, DIALOG_STYLE_INPUT, "枪枝市场发起交易", ""#TEXT_WHITE"交易价不得小于0,请重新输入", "确认", "取消");}
		    if(value > PlayerData[playerid][pCash]){return ShowPlayerDialog(playerid, DIALOG_MGUN_CREATE3, DIALOG_STYLE_INPUT, "枪枝市场发起交易", ""#TEXT_WHITE"你身上没那么多现金,请重新输入", "确认", "取消");}
            new deal = CreateDeal(3, gid, gamount, value, PlayerData[playerid][pID]);
			GiveMoney(playerid, -value);
		    Log(moneylog, INFO, "%s(%d)于枪黑市发起了交易(%d),花费了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], deal, value);
		    format(string, sizeof(string), ""#TEXT_WHITE"交易发起完成,请确认以下明细:\n交易枪枝: %s\n弹药数: %d\n交易金额: %d\n\n** 请记得按时查看交易状况以及时取得交易品",
			WeaponsList[gid][wName], gamount, value);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "发起交易完成", string, "确认", "");
		    return 1;
		}
		case DIALOG_MCAR:
		{
            PlayerTextDrawHide(playerid, PreviewTD[playerid]);
			if (!response) return 1;
		    new ListString[1024], i, j, l, check;
			ListString[0] = EOS;
			switch(listitem)
			{
			    case 0:
			    {
					for(i = l = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_CAR) { continue;} //跳过非车类或已被完成的交易
						else
						{
							format(ListString, sizeof(ListString), "%s%s\t\t%d\n",
							ListString, GetVehicleName(MarketData[i][mStuffID]), MarketData[i][mPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
							check = 1;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "车黑市场交易清单", ""#TEXT_WHITE"目前没有任何交易", "确认", "");}
					format(ListString, sizeof(ListString), "项目\t\t交易金额\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MCAR_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "车黑市场交易清单", ListString, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_MCAR_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid), string2[256];
		    if(MarketData[order][mPoster] == 0){format(string, sizeof(string), "海外订单");}
		    else
			{
				format(string, sizeof(string), "%s", GetPlayerSqlName(MarketData[order][mSeller]));
			}
			PlayerTextDrawSetPreviewModel(playerid, PreviewTD[playerid], MarketData[order][mStuffID]);
			PlayerTextDrawShow(playerid, PreviewTD[playerid]);
		    format(string2, sizeof(string2), ""#TEXT_WHITE"发起人: %s\n交易型号: %s\n交易金额: %d\n\n"#TEXT_WHITE"如果已经获取目标载具的话,请将该车开到此处并在车上按左Ctrl出售\n"#TEXT_YELLOW"** 注意: 这里只能接受私人或组织载具的交易",
			string, GetVehicleName(MarketData[order][mStuffID]), MarketData[order][mPrice]);
			ShowPlayerDialog(playerid, DIALOG_MCAR, DIALOG_STYLE_MSGBOX, "车黑市场交易项目", string2, "确认", "");
			return 1;
		}
		case DIALOG_MCAR_SELL:
		{
		    if (!response) return 1;
		    new vehicleid = GetPlayerVehicleID(playerid), vmodel = GetVehicleModel(vehicleid), i, j, check;
		    if(VehData[vehicleid][vPrice] == 0) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 这台车没有任何价值");}
		    for(i = check = 0, j = MAX_DEALS; i < j; i++)
			{
				if(MarketData[i][mType] == MARKET_CAR)
				{
				    if(MarketData[i][mStuffID] == vmodel)
				    {
				        new exp = 1750;
				        GiveMoney(playerid, MarketData[i][mPrice]);
				        Log(moneylog, INFO, "%s(%d)于车黑市卖出了%s,赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(MarketData[i][mStuffID]), MarketData[i][mPrice]);
                        Log(vehlog, INFO, "%s(%d)将载具%s(%d)卖给了车黑市,该载具进入失窃状态", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
						format(string, sizeof(string), "** 交易完成: 你卖出了这台%s并获得了交易金"#TEXT_LIGHTGREEN"$%d"#TEXT_WHITE"与经验值"#TEXT_LIGHTBLUE"%d点", GetVehicleName(MarketData[i][mStuffID]), MarketData[i][mPrice], exp);
					    SendClientMessage(playerid, COLOR_WHITE, string);
					    VehData[vehicleid][vStatus] = VEH_STOLEN;
					    SetVehicleToRespawn(vehicleid);
					    RecordData[playerid][prMCar] ++;
						if(MarketData[i][mPoster] == 0)
						{
						    GivePlayerExp(playerid, exp, EXP_MARKET);
						    DeleteDeal(i);
						    CreateSystemDeal(MARKET_CAR);
						}
					    else
						{
						    MarketData[i][mSeller] = PlayerData[playerid][pID];
						    MarketData[i][mSold] = 1;
						}
						check = 1;
						break;
					}
				}
			}
			if(check == 0){SendClientMessage(playerid, COLOR_WHITE, "错误: 黑市场不需要这台车");}
			return 1;
		}
		case DIALOG_MFISH:
		{
		    if (!response) return 1;
		    new ListString[512], i, j, l, k;
			ListString[0] = EOS;
			switch(listitem)
			{
			    case 0:
			    {
					for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
					{
						if(PlayerItems_USE[playerid][i][iuItemID] == 0) { continue;}
						k = PlayerItems_USE[playerid][i][iuItemID];
						if(ItemsList_USE[k][iuType] == IU_FISH)
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t$%d\n",
							ListString, ItemsList_USE[k][iuName], PlayerItems_USE[playerid][i][iuCount], ItemsList_USE[k][iuPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
                    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"出售鱼只", ""#TEXT_WHITE"你没有任何鱼可卖", "确定", "");}
					format(ListString, sizeof(ListString), "名称\t数量\t每条卖价\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MFISH_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "出售鱼只", ListString, "选择", "关闭");
					UpdatePlayerMission(playerid, 10, 3);
				}
				case 1:
				{
				    ShowPlayerDialog(playerid, DIALOG_JOB_FISHER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"渔夫",""#TEXT_WHITE"\n目前鱼价\n签署合约\n工作内容\n辞职", "选择", "离开");
				}
			}
			return 1;
		}
		case DIALOG_MFISH_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid),
				chosed = PlayerItems_USE[playerid][order][iuItemID];
			format(string, sizeof(string), ""#TEXT_WHITE"你选择了: %s\n每只可卖金额: $%d\n\n**你目前有%d个\n请输入要出售的数量", ItemsList_USE[chosed][iuName], ItemsList_USE[chosed][iuPrice], PlayerHaveItem(playerid, 1, chosed));
			ShowPlayerDialog(playerid, DIALOG_MFISH_SELL, DIALOG_STYLE_INPUT, "鱼市场交易确认", string, "是", "否");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_MFISH_SELL:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				amount = strval(inputtext);
			if(PlayerHaveItem(playerid, 1, chosed) < amount) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有这么多这种鱼");}
			if(amount < 1) {return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量无效");}
		    GivePlayerItem(playerid, 1, chosed, -amount);
		    GiveMoney(playerid, amount*ItemsList_USE[chosed][iuPrice]);
		    Log(moneylog, INFO, "%s(%d)于鱼市场卖出了%d条%s,赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[chosed][iuName], amount*ItemsList_USE[chosed][iuPrice]);
			format(string, sizeof(string), "** 交易完成: 你卖出了%d只%s并获得了交易金"#TEXT_LIGHTGREEN"$%d", amount, ItemsList_USE[chosed][iuName], amount*ItemsList_USE[chosed][iuPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
			RecordData[playerid][prMFish] ++;

			UpdatePlayerMission(playerid, 10, 4);
			return 1;
		}
		case DIALOG_MHUNT:
		{
		    if (!response) return 1;
		    new ListString[256], i, j, l, check;
			ListString[0] = EOS;
			switch(listitem)
			{
			    case 0:
			    {
					for(i = l = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_HUNT) { continue;}
						else
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t%d\t%d\n",
							ListString, ItemsList_USE[MarketData[i][mStuffID]][iuName], PlayerHaveItem(playerid, 1, MarketData[i][mStuffID]), MarketData[i][mAmount], MarketData[i][mPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
							check = 1;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "狩猎市场交易清单", ""#TEXT_WHITE"目前没有任何交易", "确认", "");}
					format(ListString, sizeof(ListString), "项目\t身上的数量\t需求数量\t交易金额\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MHUNT_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "狩猎市场交易清单", ListString, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_MHUNT_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid);
		    if(MarketData[order][mPoster] == 0){format(string, sizeof(string), "狩猎市场");}
		    else
			{
				format(string, sizeof(string), "%s", GetPlayerSqlName(MarketData[order][mSeller]));
			}
			SetGVarInt("DListID", order, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"发起人: %s\n交易物品: %s\n数量: %d\n交易金额: %d\n\n**你目前有%d个\n是否卖出背包里的%s以获得"TEXT_LIGHTGREEN"$%d"TEXT_WHITE"?",
			string, ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mAmount], MarketData[order][mPrice], PlayerHaveItem(playerid, 1, MarketData[order][mStuffID]), ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mPrice]);
			ShowPlayerDialog(playerid, DIALOG_MHUNT_SELL, DIALOG_STYLE_MSGBOX, "狩猎市场交易确认", string, "是", "否");
			return 1;
		}
		case DIALOG_MHUNT_SELL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", playerid);
		    if(PlayerHaveItem(playerid, 1, MarketData[order][mStuffID]) < MarketData[order][mAmount]) {return SendClientMessage(playerid, COLOR_WHITE, "交易错误: 你有的物品数量小于这项交易的要求");}
		    GivePlayerItem(playerid, 1, MarketData[order][mStuffID], -MarketData[order][mAmount]);
		    GiveMoney(playerid, MarketData[order][mPrice]);
		    Log(moneylog, INFO, "%s(%d)于狩猎市场卖出了%d个%s,赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], MarketData[order][mAmount], ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mPrice]);
		    format(string, sizeof(string), "** 交易完成: 你卖出了%d个%s并获得了交易金"#TEXT_LIGHTGREEN"$%d", MarketData[order][mAmount], ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    RecordData[playerid][prMHunt] ++;
		    if(MarketData[order][mPoster] == 0)
			{
			    GivePlayerExp(playerid, 100, EXP_MARKET);
			    DeleteDeal(order);
			    CreateSystemDeal(MARKET_HUNT);
			}
		    else
			{
			    MarketData[order][mSeller] = PlayerData[playerid][pID];
			    MarketData[order][mSold] = 1;
			}
			return 1;
		}
		case DIALOG_MMAT:
		{
		    if (!response) return 1;
		    new ListString[1024], i, j, l, check;
			ListString[0] = EOS;
			switch(listitem)
			{
			    case 0:
			    {
					for(i = l = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_MAT || MarketData[i][mSold] == 1) { continue;} //跳过非材料或已被完成的交易
						else
						{
							format(ListString, sizeof(ListString), "%s%s\t%d\t%d\t%d\n",
							ListString, ItemsList_USE[MarketData[i][mStuffID]][iuName], PlayerHaveItem(playerid, 1, MarketData[i][mStuffID]), MarketData[i][mAmount], MarketData[i][mPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
							check = 1;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场交易清单", ""#TEXT_WHITE"目前没有任何交易", "确认", "");}
					format(ListString, sizeof(ListString), "项目\t身上的数量\t需求数量\t交易金额\n%s", ListString);
					ShowPlayerDialog(playerid, DIALOG_MMAT_SELLCHECK, DIALOG_STYLE_TABLIST_HEADERS, "材料市场交易清单", ListString, "选择", "关闭");
				}
				case 1:
			    {
			        for(i = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_MAT) { continue;}
						if(MarketData[i][mPoster] == PlayerData[playerid][pID])
						{
						    check = 1;
						    if(MarketData[i][mSold] == 0)
						    {
							    format(string, sizeof(string), ""#TEXT_WHITE"你目前已经还有未完成的交易,无法发起新交易\n\n "#TEXT_YELLOW"是否要取消目前的交易?\n取消后将返还交易金%d元", MarketData[i][mPrice]);
							    ShowPlayerDialog(playerid, DIALOG_MMAT_CANCEL, DIALOG_STYLE_MSGBOX, "材料市场发起交易", string, "是", "否");
							    SetGVarInt("DShowID", i, playerid);
							}
							else
							{
							    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场我的交易", ""#TEXT_WHITE"你有已经完成的交易\n请先接收交易的物品", "确认", "");
							}
							break;
						}
					}
					if(check == 0)
					{
						ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE1, DIALOG_STYLE_TABLIST_HEADERS, "材料市场发起交易", "选择要订购的材料种类\n木头\n铁矿\n硝石\n纤维\n兽皮\n兽毛\n石材\n黄色药草\n绿色药草\n白色药草", "选择", "关闭");
					}
				}
				case 2:
				{
				    for(i = check = 0, j = MAX_DEALS; i < j; i++)
					{
						if(MarketData[i][mType] != MARKET_MAT) { continue;}
						if(MarketData[i][mPoster] == PlayerData[playerid][pID])
						{
						    check = 1;
						    format(string, sizeof(string), ""#TEXT_WHITE"交易材料: %s\n数量: %d\n交易金额: %d",
							ItemsList_USE[MarketData[i][mStuffID]][iuName], MarketData[i][mAmount], MarketData[i][mPrice]);
						    if(MarketData[i][mSold] == 1)
						    {
						        format(string, sizeof(string), "%s\n"#TEXT_WHITE"交易状态: "TEXT_LIGHTGREEN"已成交\n"#TEXT_WHITE"成交玩家: %s\n\n"TEXT_YELLOW"** 是否领取你的交易品?", string, GetPlayerSqlName(MarketData[i][mSeller]));
						        ShowPlayerDialog(playerid, DIALOG_MMAT_DEAL, DIALOG_STYLE_MSGBOX, "材料市场我的交易", string, "是", "否");
						        SetGVarInt("DShowID", i, playerid);
							}
							else
						    {
						        format(string, sizeof(string), "%s\n"#TEXT_WHITE"交易状态: "TEXT_RED"尚未成交", string);
						        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场我的交易", string, "确认", "");
							}
							break;
						}
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场我的交易", ""#TEXT_WHITE"你没有发起任何交易", "确认", "");}
				}
			}
			return 1;
		}
		case DIALOG_MMAT_SELLCHECK:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", listitem*1000+playerid);
		    if(MarketData[order][mPoster] == 0){format(string, sizeof(string), "海外市场");}
		    else
			{
				format(string, sizeof(string), "%s", GetPlayerSqlName(MarketData[order][mSeller]));
			}
			SetGVarInt("DListID", order, playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"发起人: %s\n交易材料: %s\n数量: %d\n交易金额: %d\n\n**你目前有%d个\n是否卖出背包里的%s以获得"TEXT_LIGHTGREEN"$%d"TEXT_WHITE"?",
			string, ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mAmount], MarketData[order][mPrice], PlayerHaveItem(playerid, 1, MarketData[order][mStuffID]), ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mPrice]);
			ShowPlayerDialog(playerid, DIALOG_MMAT_SELL, DIALOG_STYLE_MSGBOX, "材料市场交易确认", string, "是", "否");
			return 1;
		}
		case DIALOG_MMAT_SELL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DListID", playerid);
		    if(PlayerHaveItem(playerid, 1, MarketData[order][mStuffID]) < MarketData[order][mAmount]) {return SendClientMessage(playerid, COLOR_WHITE, "交易错误: 你有的材料数量小于这项交易的要求");}
		    GivePlayerItem(playerid, 1, MarketData[order][mStuffID], -MarketData[order][mAmount]);
		    GiveMoney(playerid, MarketData[order][mPrice]);
		    Log(moneylog, INFO, "%s(%d)于材料市场卖出了%d个%s(交易ID:%d),赚得了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], MarketData[order][mAmount], ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mID], MarketData[order][mPrice]);
		    format(string, sizeof(string), "** 交易完成: 你卖出了%d个%s并获得了交易金"#TEXT_LIGHTGREEN"$%d", MarketData[order][mAmount], ItemsList_USE[MarketData[order][mStuffID]][iuName], MarketData[order][mPrice]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    RecordData[playerid][prMMat] ++;
		    if(MarketData[order][mPoster] == 0)
			{
			    GivePlayerExp(playerid, 100, EXP_MARKET);
			    DeleteDeal(order);
			    CreateSystemDeal(MARKET_MAT);
			}
		    else
			{
			    MarketData[order][mSeller] = PlayerData[playerid][pID];
			    MarketData[order][mSold] = 1;
			}
			return 1;
		}
		case DIALOG_MMAT_CANCEL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DShowID", playerid);
		    GiveMoney(playerid, MarketData[order][mPrice]);
		    Log(moneylog, INFO, "%s(%d)取消了于材料市场发起的交易而拿回了交易金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], MarketData[order][mPrice]);
		    DeleteDeal(order);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场取消交易", ""#TEXT_WHITE"你已取消你发起的交易,并返回交易金", "确认", "");
			return 1;
		}
		case DIALOG_MMAT_DEAL:
		{
		    if (!response) return 1;
		    new order = GetGVarInt("DShowID", playerid);
		    GivePlayerItem(playerid, 1, MarketData[order][mStuffID], MarketData[order][mAmount]);
		    format(string, sizeof(string), ""#TEXT_WHITE"你获得了你的交易品\n获得了"#TEXT_LIGHTYELLOW"%d"#TEXT_WHITE"个"#TEXT_LIGHTYELLOW"%s\n请按N键打开背包查看", MarketData[order][mAmount], ItemsList_USE[MarketData[order][mStuffID]][iuName]);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "材料市场交易完成", string, "确认", "");
		    DeleteDeal(order);
			return 1;
		}
		case DIALOG_MMAT_CREATE1:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
          		case 0: SetGVarInt("DCreateID", 39, playerid);
          		case 1: SetGVarInt("DCreateID", 87, playerid);
          		case 2: SetGVarInt("DCreateID", 88, playerid);
          		case 3: SetGVarInt("DCreateID", 86, playerid);
          		case 4: SetGVarInt("DCreateID", 83, playerid);
          		case 5: SetGVarInt("DCreateID", 84, playerid);
          		case 6: SetGVarInt("DCreateID", 41, playerid);
          		case 7: SetGVarInt("DCreateID", 43, playerid);
          		case 8: SetGVarInt("DCreateID", 42, playerid);
          		case 9: SetGVarInt("DCreateID", 44, playerid);
		    }
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请输入要购买的数量", ItemsList_USE[GetGVarInt("DCreateID", playerid)][iuName]);
		    ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE2, DIALOG_STYLE_INPUT, "材料市场发起交易", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_MMAT_CREATE2:
		{
		    if (!response) return 1;
		    new gid = GetGVarInt("DCreateID", playerid);
		    if(strval(inputtext) < 1){return ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE2, DIALOG_STYLE_INPUT, "材料市场发起交易", ""#TEXT_WHITE"数量不得小于0,请重新输入", "确认", "取消");}
		    SetGVarInt("DCreateAmount", strval(inputtext), playerid);
		    format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s共%d个\n请输入你愿意出的交易价\n"#TEXT_YELLOW"**确认后将会发起交易并扣除你身上的现金作为交易费", ItemsList_USE[gid][iuName], strval(inputtext));
		    ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE3, DIALOG_STYLE_INPUT, "材料市场发起交易", string, "确认", "取消");
		    return 1;
		}
		case DIALOG_MMAT_CREATE3:
		{
		    if (!response) return 1;
		    new gid = GetGVarInt("DCreateID", playerid), gamount = GetGVarInt("DCreateAmount", playerid),
				value = strval(inputtext);
		    if(value < 1){return ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE3, DIALOG_STYLE_INPUT, "材料市场发起交易", ""#TEXT_WHITE"交易价不得小于0,请重新输入", "确认", "取消");}
		    if(value > PlayerData[playerid][pCash]){return ShowPlayerDialog(playerid, DIALOG_MMAT_CREATE3, DIALOG_STYLE_INPUT, "材料市场发起交易", ""#TEXT_WHITE"你身上没那么多现金,请重新输入", "确认", "取消");}
            new deal = CreateDeal(2, gid, gamount, value, PlayerData[playerid][pID]);
			GiveMoney(playerid, -value);
		    Log(moneylog, INFO, "%s(%d)于材料市场发起了交易(%d),花费了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], deal, value);
		    format(string, sizeof(string), ""#TEXT_WHITE"交易发起完成,请确认以下明细:\n交易材料: %s\n数量: %d\n交易金额: %d\n\n** 请记得按时查看交易状况以及时取得交易品",
			ItemsList_USE[gid][iuName], gamount, value);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "发起交易完成", string, "确认", "");
		    return 1;
		}
		case DIALOG_BAG:
		{
		    if (!response)
		    {
				if(GetGVarInt("PutItem", playerid) != 0) DeleteGVar("PutItem", playerid);//玩家开启背包菜单时是不是正在放道具到载具或地产
		    	return 1;
		    }
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			switch(chosed)
			{
			    case BAG_MONEY:
			    {
					if(PlayerData[playerid][pCash] < 1){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"现金", ""#TEXT_WHITE"你身上没有任何现金", "确定", "");}
					format(string, sizeof(string), ""#TEXT_WHITE"目前现金:"#TEXT_FADEGREEN"$%d\n给予玩家\n丢弃现金", PlayerData[playerid][pCash]);
					ShowPlayerDialog(playerid, DIALOG_BAG_MONEY, DIALOG_STYLE_TABLIST_HEADERS, "现金", string, "选择", "关闭");
			    }
			    case BAG_WEAPON: ShowPlayerBagList(playerid, ITEM_WEAPON);
			    case BAG_FOOD: ShowPlayerBagList(playerid, ITEM_USE, IU_FOOD);
				case BAG_USE: ShowPlayerBagList(playerid, ITEM_USE, IU_USE, IU_FUEL);
				case BAG_TOOL: ShowPlayerBagList(playerid, ITEM_EQ, IEQ_TOOL, IEQ_BOOK);
				case BAG_3C: ShowPlayerBagList(playerid, ITEM_EQ, IEQ_3C);
				case BAG_ARMOR_AMMO: ShowPlayerBagList(playerid, ITEM_USE, IU_ARMOR, IU_WEAPON);
				case BAG_MAT: ShowPlayerBagList(playerid, ITEM_USE, IU_MAT);
				case BAG_FISH: ShowPlayerBagList(playerid, ITEM_USE, IU_FISH);
				case BAG_PLANT: ShowPlayerBagList(playerid, ITEM_USE, IU_SEED, IU_POT);
				case BAG_GOODS: ShowPlayerBagList(playerid, ITEM_USE, IU_FMAT, IU_FPROD);
				case BAG_LICENSE: ShowPlayerBagList(playerid, ITEM_EQ, IEQ_LICENSE);
				case BAG_SKIN: ShowPlayerBagList(playerid, ITEM_EQ, IEQ_SKIN, IEQ_SKINX);
				case BAG_TICKET: ShowPlayerBagList(playerid, ITEM_USE, IU_TICKET);
				case BAG_OBJECT: ShowPlayerBagList(playerid, ITEM_USE, IU_OBJECT);
			}
			return 1;
		}

		case DIALOG_BAG_CHECK:
		{
		    if (!response)
			{
				ShowPlayerBagMenu(playerid, GetGVarInt("PutItem", playerid));
				return 1;
			}
		    new type = GetGVarInt("DType1", playerid),
				listid = GetGVarInt("DListID", listitem*1000+playerid);
			if(listid == PREV_PAGE) ShowPlayerBagList(playerid, type, GetGVarInt("DType2", playerid), GetGVarInt("DType3", playerid), GetGVarInt("Page", playerid)-1);
		    else if(listid == NEXT_PAGE) ShowPlayerBagList(playerid, type, GetGVarInt("DType2", playerid), GetGVarInt("DType3", playerid), GetGVarInt("Page", playerid)+1);
			else
			{
				ShowPlayerBagSelectItem(playerid, type, listid);
			}
		    return 1;
		}
		case DIALOG_BAG_MONEY:
		{
		    if (!response)
			{
			    ShowPlayerBagMenu(playerid);
				return 1;
			}
			switch(listitem)
			{
			    case 0:
			    {
			        new Float:px, Float:py, Float:pz, l, liststr[512];
					ForEachPlayer(p)
					{
						if(playerid == p) continue;
						GetPlayerPos(p, px, py, pz);
						if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) < 8.0)
						{
				            format(liststr, sizeof(liststr), "%s%s(%d)\n", liststr, PlayerData[p][pName], p);
							SetGVarInt("DListID", p, l*1000+playerid);
							l++;
						}
					}
					if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"给予现金", ""#TEXT_WHITE"你附近没有任何玩家可以给予现金", "确定", "");
					format(liststr, sizeof(liststr), ""#TEXT_WHITE"选择给予玩家\n%s", liststr);
				    ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_GIVE1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"给予现金", liststr, "选择", "返回");
			    }
			    case 1:
			    {
			        ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_THROW, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"丢弃现金", ""#TEXT_WHITE"请输入丢弃金额", "确认丢弃", "返回");
			    }
			}
			return 1;
		}
		case DIALOG_BAG_MONEY_GIVE1:
		{
		    if (!response)
			{
			    ShowPlayerBagMenu(playerid);
				return 1;
			}
			new chosed = GetGVarInt("DListID", listitem*1000+playerid);
   			if(!GetGVarInt("Logged", chosed))
   			{
   			    ShowPlayerBagMenu(playerid);
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线了");
			}

   			format(string, sizeof(string), ""#TEXT_WHITE"请输入要给予%s的金额", PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_GIVE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"给予现金", string, "确认给予", "返回");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_BAG_MONEY_GIVE2:
		{
		    if (!response)
			{
			    ShowPlayerBagMenu(playerid);
				return 1;
			}
			static amount, Float:px, Float:py, Float:pz, chosed;
   			amount = strval(inputtext),
   			chosed = GetGVarInt("DDecideID", playerid);
   			if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_GIVE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"给予现金", ""#TEXT_WHITE"给予金额不得小于$1,请重新输入", "确认给予", "返回");
   			if(PlayerData[playerid][pCash] < amount) return ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_GIVE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"给予现金", ""#TEXT_WHITE"你身上没有这么多钱,请重新输入", "确认给予", "返回");
   			if(!GetGVarInt("Logged", chosed))
   			{
   			    ShowPlayerBagMenu(playerid);
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线了");
			}
			GetPlayerPos(chosed, px, py, pz);
			if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) > 10.0)
   			{
   			    ShowPlayerBagMenu(playerid);
			    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家离你太远了");
			}

			GiveMoney(playerid, -amount);
			GiveMoney(chosed, amount);
			Log(moneylog, INFO, "%s(%d)给了%s(%d)现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[chosed][pName], PlayerData[chosed][pID], amount);
			format(string, sizeof(string), "** 成功给予%s现金 $%d", PlayerData[chosed][pName], amount);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "** 你收到了 %s 给你的现金 $%d", PlayerData[playerid][pName], amount);
			SendClientMessage(chosed, COLOR_WHITE, string);
			format(string, sizeof(string), "** %s 给了%s一些钱 **", playername, PlayerData[chosed][pName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			ShowPlayerBagMenu(playerid);
			return 1;
		}
		case DIALOG_BAG_MONEY_THROW:
		{
		    if (!response)
			{
			    ShowPlayerBagMenu(playerid);
				return 1;
			}
			static amount, Float:px, Float:py, Float:pz;
   			amount = strval(inputtext);
   			if(amount < 100) return ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_THROW, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"丢弃现金", ""#TEXT_WHITE"丢弃金额不得小于$100,请重新输入", "确认丢弃", "返回");
   			if(PlayerData[playerid][pCash] < amount) return ShowPlayerDialog(playerid, DIALOG_BAG_MONEY_THROW, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"丢弃现金", ""#TEXT_WHITE"你身上没有这么多钱,请重新输入", "确认丢弃", "返回");

			GetPlayerPos(playerid, px, py, pz);
			CreateDropItem(ITEM_CASH, 1, amount, px, py, pz, GetPlayerVirtualWorld(playerid), 180);
			GiveMoney(playerid, -amount);
			Log(moneylog, INFO, "%s(%d)丢弃了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
			format(string, sizeof(string), "** 成功丢弃现金 $%d", amount);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "** %s 从身上丢弃了一些现金 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			ShowPlayerBagMenu(playerid);
			return 1;
		}
		case DIALOG_BAG_WEAPON:
		{
		    if (!response)
			{
			    ShowPlayerBagMenu(playerid);
				return 1;
			}
      		new slot = GetGVarInt("DDecideID", playerid), Float:px, Float:py, Float:pz, pworld,
			  	gunid, ammo, dammo;
		    GetPlayerWeaponData(playerid, slot, gunid, ammo);
		    dammo = WeaponsList[gunid][wDefaultAmmo];

		    GetPlayerPos(playerid, px, py, pz);
		    pworld = GetPlayerVirtualWorld(playerid);
		    if(gunid == 0 || ammo == 0) return SendClientMessage(playerid, COLOR_WHITE, "你手上的武器或是弹药已经没了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(GetGVarInt("PoliceDuty", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "你正在执勤中,无法丢弃武器");
		            if(IsPlayerUsingExplosiveShell(playerid, gunid)) return SendClientMessage(playerid, COLOR_WHITE, "你无法丢弃含有爆裂子弹的武器");
		            if(ammo < dammo)
		            {
		                GivePlayerWeapon(playerid, gunid, -ammo);
		                CreateDropItem(ITEM_WEAPON, gunid, ammo, px, py, pz, pworld);
		                format(string, sizeof(string), "** 丢弃 %s %d 弹药完成", WeaponsList[gunid][wName], ammo);
		            }
		            else
		            {
		                GivePlayerWeapon(playerid, gunid, -dammo);
		                CreateDropItem(ITEM_WEAPON, gunid, dammo, px, py, pz, pworld);
		                format(string, sizeof(string), "** 丢弃 %s %d 弹药完成", WeaponsList[gunid][wName], dammo);
		            }
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            format(string, sizeof(string), "** %s 丢弃了武器%s的部分弹药 **", playername, WeaponsList[gunid][wName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				}
				case 1:
				{
				    if(GetGVarInt("PoliceDuty", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "你正在执勤中,无法丢弃武器");
				    if(IsPlayerUsingExplosiveShell(playerid, gunid)) return SendClientMessage(playerid, COLOR_WHITE, "你无法丢弃含有爆裂子弹的武器");
				    if(ammo > 9999 || ammo < 0) ammo = 9999;
				    SetPlayerAmmo(playerid, gunid, 0);
		            CreateDropItem(ITEM_WEAPON, gunid, ammo, px, py, pz, pworld);
		            format(string, sizeof(string), "** 丢弃武器%s完成", WeaponsList[gunid][wName]);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            format(string, sizeof(string), "** %s 丢弃了武器%s **", playername, WeaponsList[gunid][wName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				}
			}
			return 1;
		}
		case DIALOG_BAG_SELECT_USE:
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid);
		    format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"已选择: %s\n"#TEXT_YELLOW"使用\n"#TEXT_VIOLET"设定常用功能\n"#TEXT_RED"丢弃\n"#TEXT_LIGHTGREEN"给予\n"#TEXT_SKYBLUE"交易",ItemsList_USE[chosed][iuName]);
		    ShowPlayerDialog(playerid, DIALOG_BAG_USE, DIALOG_STYLE_TABLIST_HEADERS, "动作", dialoginfo, "确认", "取消");
		    return 1;
		}
		case DIALOG_BAG_USE://使用消耗品
		{
		    if (!response)
			{
				return 1;
			}
		    //new order = GetGVarInt("DListID", listitem*1000+playerid);
		    new chosed = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
				    PlayerUseItem_USE(playerid, chosed);
				}
				case 1:
                {
                    ShowPlayerKeyList(playerid, 1);
				    SetGVarInt("SKeyT", KEY_TYPE_IU, playerid),
					SetGVarInt("SKeyID", chosed, playerid);
                }
				case 2:
				{
				    if(ItemsList_USE[chosed][iuType] == IU_TICKET)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能丢弃这类道具");
			        }
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要丢弃%s的数量", ItemsList_USE[chosed][iuName]);
				    ShowPlayerDialog(playerid, DIALOG_BAG_THROW_USE, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"丢弃道具", string, "确认", "取消");
				}
				case 3:
				{
				    if(ItemsList_USE[chosed][iuType] == IU_TICKET)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能给予这类道具");
			        }
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要给予玩家%s的数量", ItemsList_USE[chosed][iuName]);
				    ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", string, "确认", "取消");
                }
                case 4:
				{
				    if(ItemsList_USE[chosed][iuType] == IU_TICKET)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能交易这类道具");
			        }
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要交易给玩家%s的数量", ItemsList_USE[chosed][iuName]);
				    ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", string, "确认", "取消");
                }
			}
		    return 1;
		}
		case DIALOG_BAG_THROW_USE:
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid), Float:px, Float:py, Float:pz, pworld;
			if(strval(inputtext) <= 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_THROW_USE, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"丢弃道具", ""#TEXT_WHITE"数量不得小于0,请重新输入", "确认", "取消");
            }
            else if(strval(inputtext) > PlayerHaveItem(playerid, 1, chosed))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_THROW_USE, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"丢弃道具", ""#TEXT_WHITE"你没有这么多道具,请重新输入", "确认", "取消");
            }
		    GivePlayerItem(playerid, 1, chosed, -strval(inputtext));
			format(string, sizeof(string), "** %s 丢弃了他的%s **", playername, ItemsList_USE[chosed][iuName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			format(string, sizeof(string), "** 丢弃完成: "#TEXT_WHITE"已丢弃%d个 %s ", strval(inputtext), ItemsList_USE[chosed][iuName]);
			SendClientMessage(playerid, COLOR_RED, string);

			GetPlayerPos(playerid, px, py, pz);
			pworld = GetPlayerVirtualWorld(playerid);
			new threwid = CreateDropItem(ITEM_USE, chosed, strval(inputtext), px, py, pz, pworld);
			if(ItemsList_USE[chosed][iuType] == IU_FOOD || ItemsList_USE[chosed][iuType] == IU_FISH)
			{
			    for(new i = 0, j = MAX_PLAYERS; i < j; i++)
			    {
			        if(!IsPlayerNPC(i)) continue;
			        if(GetGVarInt("Animal", i) > 0 && GetGVarInt("Pet", i) == 0)
			        {
			            new Float:ax, Float:ay, Float:az;
			            FCNPC_GetPosition(i, ax, ay, az);
			            if(GetPointDistanceToPoint(ax, ay, az, px, py, pz) < 60.0)
			            {
			            	NPCToTarget(i, TARGET_DROP, threwid, 1, 1);
			            }
			        }
			    }
			    UpdatePlayerMission(playerid, 14, 11);
			}
			ShowPlayerBagMenu(playerid);
		    return 1;
		}
		case DIALOG_BAG_SELECT_EQ:
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid);
		    format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"已选择: %s\n"#TEXT_YELLOW"使用\n"#TEXT_VIOLET"设定常用功能\n"#TEXT_RED"丢弃\n"#TEXT_LIGHTGREEN"给予\n"#TEXT_SKYBLUE"交易",ItemsList_EQ[chosed][ieqName]);
		    ShowPlayerDialog(playerid, DIALOG_BAG_EQ, DIALOG_STYLE_TABLIST_HEADERS, "动作", dialoginfo, "确认", "取消");
		    return 1;
		}
		case DIALOG_BAG_EQ://使用装备
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid),
			Float:px, Float:py, Float:pz, pworld;
			switch(listitem)
			{
			    case 0: {OnPlayerUseItem_EQ(playerid, chosed);}
				case 1:
			    {
			        ShowPlayerKeyList(playerid, 1);
				    SetGVarInt("SKeyT", KEY_TYPE_IEQ, playerid),
					SetGVarInt("SKeyID", chosed, playerid);
			    }
			    case 2:
			    {
			        if(ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能丢弃证书类道具");
			        }
			        if((ItemsList_EQ[chosed][ieqType] == IEQ_SKIN && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]) || (ItemsList_EQ[chosed][ieqType] == IEQ_SKINX && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]))
					{
					    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在穿戴这个造型");
					}
			        GivePlayerItem(playerid, 2, chosed, -1);
				    format(string, sizeof(string), "** %s 丢弃了他的%s **", playername, ItemsList_EQ[chosed][ieqName]);
				    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    format(string, sizeof(string), "** 丢弃完成: "#TEXT_WHITE"已丢弃 %s ", ItemsList_EQ[chosed][ieqName]);
				    SendClientMessage(playerid, COLOR_RED, string);

				    GetPlayerPos(playerid, px, py, pz);
					pworld = GetPlayerVirtualWorld(playerid);
					CreateDropItem(ITEM_EQ, chosed, 1, px, py, pz, pworld);

				    ShowPlayerBagMenu(playerid);
				}
				case 3:
				{
				    if(ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能给予证书类道具");
			        }
				    if((ItemsList_EQ[chosed][ieqType] == IEQ_SKIN && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]) || (ItemsList_EQ[chosed][ieqType] == IEQ_SKINX && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]))
					{
					    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在穿戴这个造型");
					}
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要给予%s的玩家名称或ID", ItemsList_EQ[chosed][ieqName]);
				    ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", string, "确认给予", "取消");
                }
                case 4:
				{
				    if(ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE)
			        {
			            return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能交易证书类道具");
			        }
				    if((ItemsList_EQ[chosed][ieqType] == IEQ_SKIN && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]) || (ItemsList_EQ[chosed][ieqType] == IEQ_SKINX && PlayerData[playerid][pSkin] == ItemsList_EQ[chosed][ieqAltID]))
					{
					    return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在穿戴这个造型");
					}
				    format(string, sizeof(string), ""#TEXT_WHITE"请输入要交易%s的金额", ItemsList_EQ[chosed][ieqName]);
				    ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_EQ1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", string, "确认", "取消");
                }
			}
			return 1;
		}
		case DIALOG_BAG_GIVE_USE1:
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid);
			if(strval(inputtext) <= 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"给予数量不得小于0,请重新输入", "确认", "取消");
            }
            else if(strval(inputtext) > PlayerHaveItem(playerid, 1, chosed))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你没有这么多道具,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了 %d 个\n请输入给予玩家的名称或ID", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", string, "确认给予", "取消");
            SetGVarInt("DAmount", strval(inputtext), playerid);
			return 1;
        }
		case DIALOG_BAG_GIVE_USE2:
		{
		    if (!response)
			{
				return 1;
			}
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	chosed = GetGVarInt("DDecideID", playerid),
		    	amount = GetGVarInt("DAmount", playerid);
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "确认给予", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你不能给自己道具,请重新输入", "确认给予", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "确认给予", "取消");
            }
            if(strval(inputtext)*ItemsList_USE[chosed][iuSpace] > GetPlayerRemainingSpace(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家没有这么多空间了!\n请重新输入数量", "确认", "取消");
            }
            GivePlayerItem(giveplayerid, 1, chosed, amount);
            GivePlayerItem(playerid, 1, chosed, -amount);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"注意:"#TEXT_WHITE" %s 给你了 %d 个 %s", playername, amount, ItemsList_USE[chosed][iuName]);
			SendClientMessage(giveplayerid, COLOR_WHITE, string);
			GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"完成:"#TEXT_LIGHTORANGE" 你给了 %s %d个 %s", giveplayername, amount, ItemsList_USE[chosed][iuName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "** %s 给了%s%s **", playername, giveplayername, ItemsList_USE[chosed][iuName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			ShowPlayerBagMenu(playerid);
			return 1;
        }
		case DIALOG_BAG_GIVE_EQ:
		{
            if (!response)
			{
				return 1;
			}
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	chosed = GetGVarInt("DDecideID", playerid);
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "确认给予", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你不能给自己道具,请重新输入", "确认给予", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "确认给予", "取消");
            }
			if(PlayerHaveItem(giveplayerid, 2, chosed))
			{
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家已经有这个道具了,无法给予,请重新输入", "确认给予", "取消");
            }
            if(ItemsList_EQ[chosed][ieqSpace] > GetPlayerRemainingSpace(giveplayerid))
			{
                return ShowPlayerDialog(playerid, DIALOG_BAG_GIVE_EQ, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家已经没空间放这个道具了,无法给予,请重新输入", "确认给予", "取消");
            }
			GivePlayerItem(giveplayerid, 2, chosed, 1);
            GivePlayerItem(playerid, 2, chosed, -1);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"注意:"#TEXT_WHITE" %s 给你了一个 %s", playername, ItemsList_EQ[chosed][ieqName]);
			SendClientMessage(giveplayerid, COLOR_WHITE, string);
			GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"完成:"#TEXT_LIGHTORANGE" 你给了 %s 一个 %s", giveplayername, ItemsList_EQ[chosed][ieqName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "** %s 给了%s%s **", playername, giveplayername, ItemsList_EQ[chosed][ieqName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			ShowPlayerBagMenu(playerid);
        }
        case DIALOG_BAG_TRADE_USE1:
		{
		    if (!response)
			{
				return 1;
			}
		    new chosed = GetGVarInt("DDecideID", playerid);
			if(strval(inputtext) <= 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", ""#TEXT_WHITE"交易数量不得小于0,请重新输入", "确认", "取消");
            }
            else if(strval(inputtext) > PlayerHaveItem(playerid, 1, chosed))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", ""#TEXT_WHITE"你没有这么多道具,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了 %d 个\n请输入交易的金额", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", string, "发起交易", "取消");
            SetGVarInt("DAmount", strval(inputtext), playerid);
			return 1;
        }
        case DIALOG_BAG_TRADE_USE2:
		{
		    if (!response)
			{
				return 1;
			}
			if(strval(inputtext) <= 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", ""#TEXT_WHITE"交易金额不得小于0,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了交易金额 $%d\n请输入交易玩家的名称或ID", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE3, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", string, "发起交易", "取消");
            SetGVarInt("DTradePrice", strval(inputtext), playerid);
			return 1;
        }
		case DIALOG_BAG_TRADE_USE3:
		{
		    if (!response)
			{
				return 1;
			}
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	chosed = GetGVarInt("DDecideID", playerid),
		    	amount = GetGVarInt("DAmount", playerid),
		    	price = GetGVarInt("DTradePrice", playerid);
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "发起交易", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你不能跟自己交易,请重新输入", "发起交易", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "发起交易", "取消");
            }
            SetGVarInt("TItemID", chosed, giveplayerid);
            SetGVarInt("TAmount", amount, giveplayerid);
            SetGVarInt("TPrice", price, giveplayerid);
            SetGVarInt("TTrader", playerid, giveplayerid);
            format(string, sizeof(string), ""#TEXT_WHITE"玩家 %s 想要卖给你道具\n道具名称: %s\n数量: %d\n金额: %d", playername, ItemsList_USE[chosed][iuName], amount, price);
            ShowPlayerDialog(giveplayerid, DIALOG_TRADE_USE, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易道具", string, "接受", "拒绝");

            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"已发给玩家 %s 一笔交易:\n道具: %s\n数量: %d\n金额: %d", giveplayername, ItemsList_USE[chosed][iuName], amount, price);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易道具", string, "确认", "");
			return 1;
        }
        case DIALOG_BAG_TRADE_EQ1:
		{
		    if (!response)
			{
				return 1;
			}
			if(strval(inputtext) <= 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_EQ1, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", ""#TEXT_WHITE"交易金额不得小于0,请重新输入", "确认", "取消");
            }
            format(string, sizeof(string), ""#TEXT_WHITE"你输入了交易金额 $%d\n请输入交易玩家的名称或ID", strval(inputtext));
            ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_EQ2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"交易道具", string, "发起交易", "取消");
            SetGVarInt("DTradePrice", strval(inputtext), playerid);
			return 1;
        }
        case DIALOG_BAG_TRADE_EQ2:
		{
		    if (!response)
			{
				return 1;
			}
		    new giveplayerid, Float:px, Float:py, Float:pz, giveplayername[MAX_PLAYER_NAME],
		    	chosed = GetGVarInt("DDecideID", playerid),
		    	price = GetGVarInt("DTradePrice", playerid);
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"该玩家名称ID不存在,请重新输入", "发起交易", "取消");
            }
            if(giveplayerid == playerid)
			{
			    return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你不能跟自己交易,请重新输入", "发起交易", "取消");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_BAG_TRADE_USE2, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"给予道具", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "发起交易", "取消");
            }
            SetGVarInt("TItemID", chosed, giveplayerid);
            SetGVarInt("TPrice", price, giveplayerid);
            SetGVarInt("TTrader", playerid, giveplayerid);
            format(string, sizeof(string), ""#TEXT_WHITE"玩家 %s 想要卖给你道具:\n道具名称: %s\n金额: %d", playername, ItemsList_EQ[chosed][ieqName], price);
            ShowPlayerDialog(giveplayerid, DIALOG_TRADE_EQ, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易道具", string, "接受", "拒绝");

            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"已发给玩家 %s 一笔交易:\n道具: %s\n金额: %d", giveplayername, ItemsList_EQ[chosed][ieqName], price);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"交易道具", string, "确认", "");
			return 1;
        }
        case DIALOG_TRADE_USE:
        {
            if (!response)
			{
				return 1;
			}
            new Float:px, Float:py, Float:pz, tradername[MAX_PLAYER_NAME],
                itemid = GetGVarInt("TItemID", playerid),
            	price = GetGVarInt("TPrice", playerid),
            	amount = GetGVarInt("TAmount", playerid),
            	trader = GetGVarInt("TTrader", playerid);
            if(!GetGVarInt("Logged", trader))
			{
			    return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家名称ID不存在,或是已经离线");
            }
            GetPlayerPos(trader, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(trader))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
            }
            if(PlayerHaveItem(trader, 1, itemid) < amount)
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你身上的交易道具的数量不够了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家身上的交易道具的数量不够了");
            }
            if(price > PlayerData[playerid][pCash])
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上的钱不够与你交易");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上没有这么多钱");
            }
            if(ItemsList_USE[itemid][iuSpace]*amount > GetPlayerRemainingSpace(playerid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上已经没有空间了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上已经没有空间了");
            }
            if(GetGVarInt("RequestFD", playerid) == 1 && PlayerData[trader][pJob] == JOB_FD)
            {
                DeleteGVar("RequestFD", playerid);
                UpdatePlayerColor(playerid);
                RecordData[playerid][prJFD] ++;
			}
            GivePlayerItem(playerid, 1, itemid, amount);
            GivePlayerItem(trader, 1, itemid, -amount);
            GiveMoney(playerid, -price);
            GiveMoney(trader, price);
            Log(moneylog, INFO, "%s(%d)卖给了%s(%d)共%d个%s,金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[itemid][iuName], price);
            GetPlayerName(trader, tradername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_WHITE" %s 与你交易了 %d 个 %s,花费了你现金 $%d", tradername, amount, ItemsList_USE[itemid][iuName], price);
			SendClientMessage(playerid, COLOR_WHITE, string);

			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_LIGHTORANGE" 你与 %s 交易了 %d个 %s,交易得了现金 $%d", playername, amount, ItemsList_USE[itemid][iuName], price);
			SendClientMessage(trader, COLOR_WHITE, string);

			format(string, sizeof(string), "** %s 卖给了%s%s **", tradername, playername, ItemsList_USE[itemid][iuName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
		case DIALOG_TRADE_EQ:
        {
            if (!response)
			{
				return 1;
			}
            new Float:px, Float:py, Float:pz, tradername[MAX_PLAYER_NAME],
                itemid = GetGVarInt("TItemID", playerid),
            	price = GetGVarInt("TPrice", playerid),
            	trader = GetGVarInt("TTrader", playerid);
            if(!GetGVarInt("Logged", trader))
			{
			    return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家名称ID不存在,或是已经离线");
            }
            GetPlayerPos(trader, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(trader))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你离交易玩家太远了");
            }
            if(PlayerHaveItem(playerid, 2, itemid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上已经有这个道具了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上已经有这个道具了");
            }
            if(!PlayerHaveItem(trader, 2, itemid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 你身上没有交易道具了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 交易玩家身上没有交易道具");
            }
            if(price > PlayerData[playerid][pCash])
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上的钱不够与你交易");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上没有这么多钱");
            }
            if(ItemsList_EQ[itemid][ieqSpace] > GetPlayerRemainingSpace(playerid))
            {
                SendClientMessage(trader, COLOR_GRAD1, "交易错误: 交易玩家身上已经没有空间了");
                return SendClientMessage(playerid, COLOR_GRAD1, "交易错误: 你身上已经没有空间了");
            }
            GivePlayerItem(playerid, 2, itemid, 1);
            GivePlayerItem(trader, 2, itemid, -1);
            GiveMoney(playerid, -price);
            GiveMoney(trader, price);
            Log(moneylog, INFO, "%s(%d)卖给了%s(%d)1个%s,金额为$%d", PlayerData[trader][pName], PlayerData[trader][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_EQ[itemid][ieqName], price);
            GetPlayerName(trader, tradername, MAX_PLAYER_NAME);
			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_WHITE" %s 与你交易了 %s,花费了你现金 $%d", tradername, ItemsList_EQ[itemid][ieqName], price);
			SendClientMessage(playerid, COLOR_WHITE, string);

			format(string, sizeof(string), " **"#TEXT_LIGHTGREEN"交易完成:"#TEXT_LIGHTORANGE" 你与 %s 交易了 %s,交易得了现金 $%d", playername, ItemsList_EQ[itemid][ieqName], price);
			SendClientMessage(trader, COLOR_WHITE, string);

			format(string, sizeof(string), "** %s 卖给了%s一个%s **", tradername, playername, ItemsList_EQ[itemid][ieqName]);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
        case DIALOG_HEAL:
		{
            if (!response) return 1;
		    new giveplayerid, Float:px, Float:py, Float:pz, Float:php, giveplayername[MAX_PLAYER_NAME];
		    sscanf(inputtext, "u", giveplayerid);
			if(!IsPlayerConnected(giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_HEAL, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"治疗", "该玩家名称或ID不存在,请重新输入", "确认", "关闭");
            }
            GetPlayerPos(giveplayerid, px, py, pz);
            if(!IsPlayerInRangeOfPointEx(playerid, 5.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(giveplayerid))
            {
                return ShowPlayerDialog(playerid, DIALOG_HEAL, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"治疗", ""#TEXT_WHITE"你离这个玩家太远了,请重新输入", "确认", "取消");
            }
			php = GetPlayerHealth_Fix(giveplayerid);
            if(php >= 100.0 + PlayerData[giveplayerid][pMaxHealth])
			{
                return ShowPlayerDialog(playerid, DIALOG_HEAL, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"治疗", ""#TEXT_WHITE"该玩家不需要治疗,请重新输入", "确认", "取消");
            }
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            SetGVarInt("HealPlayer", giveplayerid, playerid);
            ApplyAnimationEx(playerid, "bomber", "bom_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
            PlayerData[playerid][pStamina] -= 10.0;
			switch(SkillData[playerid][psHeal])
			{
			    case 1: SetGVarInt("Healing", 30, playerid);
			    case 2: SetGVarInt("Healing", 30, playerid);
				case 3: SetGVarInt("Healing", 20, playerid);
				case 4: SetGVarInt("Healing", 20, playerid);
				case 5: SetGVarInt("Healing", 15, playerid);
            }
            format(string, sizeof(string), " ** %s 正在治疗你,请勿离开他的身边", playername);
			SendClientMessage(giveplayerid, COLOR_NURSEPINK, string);
			format(string, sizeof(string), " ** 你消耗10点体力治疗 %s ,按F键可以取消", giveplayername);
			SendClientMessage(playerid, COLOR_NURSEPINK, string);
			format(string, sizeof(string), "** %s 正在治疗%s **", playername, giveplayername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_NURSEPINK, "治疗中...");
			UpdateDynamic3DTextLabelText(PlayerStatus[giveplayerid], COLOR_FADEGREEN, "被治疗中...");
			return 1;
        }
        case DIALOG_POLICE_CRIMINAL:
        {
            if (!response) return 1;
            new targetid = GetGVarInt("DDecideID", playerid), targetname[MAX_PLAYER_NAME];
            if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须是警察且正在值勤才能进行这项操作");
            GetPlayerName(targetid, targetname, MAX_PLAYER_NAME);
            switch(listitem)
            {
                case 0:
                {
           			format(string, sizeof(string), " ** %s 对你进行了搜身", playername);
					SendClientMessage(targetid, COLOR_YELLOW, string);
					format(string, sizeof(string), "** %s 对%s进行了搜身 **", playername, targetname);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					ShowPlayerFriskList(playerid, targetid);
				}
				case 1:
				{
				    if(GetGVarInt("Cuffed", targetid) == 1)
				    {
				        DeleteGVar("Cuffed", targetid);
				        DeleteGVar("Arrested", playerid);
				        DeleteGVar("Tied", targetid);
				        format(string, sizeof(string), "** %s 替你解开手铐了", playername);
				        SendClientMessage(targetid, COLOR_PINKRED, string);
			            format(string, sizeof(string), "** %s 替%s解开了手铐 **", playername, targetname);
						SendRangeMessage(20.0, targetid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			            TogglePlayerControllableEx(targetid, true);
			            SetPlayerSpecialAction(targetid, 0);
				    }
				    else
				    {
				        PlayerCuffPlayer(playerid, targetid);
				    }
				}
			}
        }
        case DIALOG_FRISK_NONE:
		{
            if (!response) return 1;
            new friskid = GetGVarInt("FriskID", playerid);
            ShowPlayerFriskList(playerid, friskid);
            return 1;
        }
        case DIALOG_FRISK_LIST:
        {
            if (!response) return 1;
            new oBagString[256], i, k, j, l, friskid;
			oBagString[0] = EOS,
			friskid = GetGVarInt("FriskID", playerid);
			if (!response) return 1;
			switch(listitem)
			{
			    case 0:
			    {
			        new pgun, pammo;
			        for(i = l = 0, j = 10; i < j; i++)
					{
					    GetPlayerWeaponData(friskid, i, pgun, pammo);
						if(pgun != 0 && pammo != 0)
						{
							format(oBagString, sizeof(oBagString), "%s%s\t%d\n", oBagString, WeaponsList[pgun][wName], pammo);
							SetGVarInt("DListID", i, l*1000+friskid);
							SetGVarInt("DListType", ITEM_WEAPON, l*1000+friskid);
							l++;
						}
					}
					if(l == 0) return ShowPlayerDialog(playerid, DIALOG_FRISK_NONE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"搜身", ""#TEXT_WHITE"该玩家没有任何武器", "确定", "");
					format(oBagString, sizeof(oBagString), "名称\t弹药数\n%s", oBagString);
					ShowPlayerDialog(playerid, DIALOG_FRISK_TAKE, DIALOG_STYLE_TABLIST_HEADERS, "武器", oBagString, "扣押", "返回");
			    }
			    case 1:
			    {
					for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
					{
						if(PlayerItems_USE[friskid][i][iuItemID] == 0) { continue;}
						k = PlayerItems_USE[friskid][i][iuItemID];
						if(k == 38 || k == 90)//铁与火药
						{
							format(oBagString, sizeof(oBagString), "%s%s\t%d\n", oBagString, ItemsList_USE[k][iuName], PlayerItems_USE[friskid][i][iuCount]);
							SetGVarInt("DListID", k, l*1000+playerid);
							SetGVarInt("DListType", ITEM_USE, l*1000+playerid);
							l++;
						}
					}
                    if(l == 0){return ShowPlayerDialog(playerid, DIALOG_FRISK_NONE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"制枪材料", ""#TEXT_WHITE"该玩家没有制枪材料", "确定", "");}
					format(oBagString, sizeof(oBagString), "名称\t数量\n%s", oBagString);
					ShowPlayerDialog(playerid, DIALOG_FRISK_TAKE, DIALOG_STYLE_TABLIST_HEADERS, "制枪材料", oBagString, "扣押", "返回");
				}
				case 2:
			    {
					for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
					{
						if(PlayerItems_USE[friskid][i][iuItemID] == 0) { continue;}
						k = PlayerItems_USE[friskid][i][iuItemID];
						if(k == 139 || k == 140 || 146 < k < 151 || 154 < k < 158)//枪与毒品货物
						{
							format(oBagString, sizeof(oBagString), "%s%s\t%d\n", oBagString, ItemsList_USE[k][iuName], PlayerItems_USE[friskid][i][iuCount]);
							SetGVarInt("DListID", k, l*1000+playerid);
							SetGVarInt("DListType", ITEM_USE, l*1000+playerid);
							l++;
						}
					}
                    if(l == 0){return ShowPlayerDialog(playerid, DIALOG_FRISK_NONE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"非法货物", ""#TEXT_WHITE"该玩家没有非法货物", "确定", "");}
					format(oBagString, sizeof(oBagString), "名称\t数量\n%s", oBagString);
					ShowPlayerDialog(playerid, DIALOG_FRISK_TAKE, DIALOG_STYLE_TABLIST_HEADERS, "非法货物", oBagString, "扣押", "返回");
				}
				case 3:
			    {
					for(i = l = 0, j = sizeof(PlayerItems_EQ[]); i < j; i++)
					{
						if(PlayerItems_EQ[friskid][i][ieqItemID] == 0) { continue;}
						k = PlayerItems_EQ[friskid][i][ieqItemID];
						if(ItemsList_EQ[k][ieqType] == IEQ_LICENSE)//执照证照
						{
							format(oBagString, sizeof(oBagString), "%s%s\n", oBagString, ItemsList_EQ[k][ieqName]);
							SetGVarInt("DListID", k, l*1000+playerid);
							SetGVarInt("DListType", ITEM_EQ, l*1000+playerid);
							l++;
						}
					}
                    if(l == 0){return ShowPlayerDialog(playerid, DIALOG_FRISK_NONE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"执照证照", ""#TEXT_WHITE"该玩家没有执照与证照", "确定", "");}
					format(oBagString, sizeof(oBagString), "名称\n%s", oBagString);
					ShowPlayerDialog(playerid, DIALOG_FRISK_TAKE, DIALOG_STYLE_TABLIST_HEADERS, "执照证照", oBagString, "扣押", "返回");
				}
			}
			return 1;
		}
		case DIALOG_FRISK_TAKE:
        {
            if (!response) return 1;
			new friskid = GetGVarInt("FriskID", playerid),
				type = GetGVarInt("DListType", listitem*1000+playerid),
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(!GetGVarInt("Logged", friskid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线了");
			switch(type)
            {
                case ITEM_USE:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"确认要扣押%s的%s吗", PlayerData[friskid][pName], ItemsList_USE[chosed][iuName]);
                }
                case ITEM_EQ:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"确认要扣押%s的%s吗", PlayerData[friskid][pName], ItemsList_EQ[chosed][ieqName]);
                }
                case ITEM_WEAPON:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"确认要扣押%s的%s吗", PlayerData[friskid][pName], WeaponsList[chosed][wName]);
                }
            }
            ShowPlayerDialog(playerid, DIALOG_FRISK_TAKE_CHECK, DIALOG_STYLE_MSGBOX, "扣押", string, "扣押", "取消");
            SetGVarInt("DDecideType", type, playerid),
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_FRISK_TAKE_CHECK:
        {
            if (!response) return 1;
			new friskid = GetGVarInt("FriskID", playerid),
				type = GetGVarInt("DDecideType", playerid),
				chosed = GetGVarInt("DDecideID", listitem*1000+playerid),
				Float:px, Float:py, Float:pz, amount, friskname[MAX_PLAYER_NAME];
			if (!response) return ShowPlayerFriskList(playerid, friskid);
			if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不再是警察了");
			GetPlayerPos(friskid, px, py, pz);
			if(!IsPlayerInRangeOfPointEx(playerid, 10.0, px, py, pz) || GetPlayerVirtualWorld(playerid) != GetPlayerVirtualWorld(friskid))
            {
                return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家离你太远了");
            }
            if(!GetGVarInt("Logged", friskid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线了");

            GetPlayerName(friskid, friskname, MAX_PLAYER_NAME);
            switch(type)
            {
                case ITEM_USE:
                {
                    amount = PlayerHaveItem(friskid, ITEM_USE, chosed);
                    if(amount == 0)
					{
					    ShowPlayerFriskList(playerid, friskid);
						return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经没有这个物品了");
					}
                    GivePlayerItem(friskid, ITEM_USE, chosed, -amount);

                    format(string, sizeof(string), " ** %s 查扣了你的%s共%d个", playername, ItemsList_USE[chosed][iuName], amount);
					SendClientMessage(friskid, COLOR_YELLOW, string);
					format(string, sizeof(string), " ** 你查扣并销毁了%s的%d个%s", friskname, amount, ItemsList_USE[chosed][iuName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
                    format(string, sizeof(string), "** %s 查扣并销毁了%s的%s **", playername, friskname, ItemsList_USE[chosed][iuName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
                }
                case ITEM_EQ:
                {
                    amount = PlayerHaveItem(friskid, ITEM_EQ, chosed);
                    if(amount == 0)
                    {
					    ShowPlayerFriskList(playerid, friskid);
						return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经没有这个物品了");
					}
                    GivePlayerItem(friskid, ITEM_EQ, chosed, -amount);

                    format(string, sizeof(string), " ** %s 查扣了你的%s共%d个", playername, ItemsList_EQ[chosed][ieqName], amount);
					SendClientMessage(friskid, COLOR_YELLOW, string);
					format(string, sizeof(string), " ** 你查扣并销毁了%s的%d个%s", friskname, amount, ItemsList_EQ[chosed][ieqName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
                    format(string, sizeof(string), "** %s 查扣并销毁了%s的%s **", playername, friskname, ItemsList_EQ[chosed][ieqName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
                }
                case ITEM_WEAPON:
                {
                    GetPlayerWeaponData(friskid, chosed, chosed, amount);
                    if(amount == 0)
                    {
					    ShowPlayerFriskList(playerid, friskid);
						return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经没有这个武器了");
					}
					GivePlayerWeapon(friskid, chosed, -amount);

                    format(string, sizeof(string), " ** %s 查扣了你的%s", playername, WeaponsList[chosed][wName]);
					SendClientMessage(friskid, COLOR_YELLOW, string);
					format(string, sizeof(string), " ** 你查扣并销毁了%s的%s", friskname, WeaponsList[chosed][wName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
                    format(string, sizeof(string), "** %s 查扣并销毁了%s的%s **", playername, friskname, WeaponsList[chosed][wName]);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
                }
            }
            ShowPlayerFriskList(playerid, friskid);
            return 1;
        }
        case DIALOG_FISH:
        {
            if (!response) return 1;
            if(!PlayerHaveItem(playerid, ITEM_EQ, 2) && !PlayerHaveItem(playerid, ITEM_EQ, 36)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有钓竿");
            OnPlayerUseItem_EQ(playerid, 2);
            return 1;
        }
        case DIALOG_OBSERVE:
        {
            if (!response) return 1;
            new lvl, obsstr[1024], i, j, found, Float:range;
            lvl = SkillData[playerid][psObserve];
            obsstr[0] = EOS;
            found = 0;
            switch(lvl)
            {
                case 1..3: range = 90.0;
                case 4: range = 150.0;
				case 5: range = 240.0;
			}
            switch(listitem)
            {
                case 0:
                {
                    for(i = 0, j = MAX_DROPS; i < j ; i++)
					{
						if(DropItem[i][idCreated] == 0) continue;
						if(60.0 < GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < range)
						{
						    switch(DropItem[i][idType])
						    {
							    case ITEM_USE:format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"* 物品:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
							    case ITEM_EQ:format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"* 物品:%s\n", obsstr, ItemsList_EQ[DropItem[i][idItemID]][ieqName]);
							    case ITEM_WEAPON:format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"* 武器:%s\n", obsstr, WeaponsList[DropItem[i][idItemID]][wName]);
							}
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
						else if(30.0 < GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 60.0)
						{
						    switch(DropItem[i][idType])
						    {
							    case ITEM_USE:format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 物品:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
							    case ITEM_EQ:format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 物品:%s\n", obsstr, ItemsList_EQ[DropItem[i][idItemID]][ieqName]);
							    case ITEM_WEAPON:format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 武器:%s\n", obsstr, WeaponsList[DropItem[i][idItemID]][wName]);
							}
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
						else if(GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 30.0)
						{
						    switch(DropItem[i][idType])
						    {
							    case ITEM_USE:format(obsstr, sizeof(obsstr), "%s"#TEXT_YELLOW"*** 物品:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
							    case ITEM_EQ:format(obsstr, sizeof(obsstr), "%s"#TEXT_YELLOW"*** 物品:%s\n", obsstr, ItemsList_EQ[DropItem[i][idItemID]][ieqName]);
							    case ITEM_WEAPON:format(obsstr, sizeof(obsstr), "%s"#TEXT_YELLOW"*** 武器:%s\n", obsstr, WeaponsList[DropItem[i][idItemID]][wName]);
							}
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
					}
					format(obsstr, sizeof(obsstr), ""#TEXT_FADEGREEN"观察到 %d 个掉落物...\n\n%s", found, obsstr);
					ShowPlayerDialog(playerid, DIALOG_OBSERVE_DROP, DIALOG_STYLE_TABLIST_HEADERS, "观察结果", obsstr, "确认", "");
				}
                case 1:
                {
                    if(lvl < 2) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还不懂得观察可采资源");
                    if(IsPlayerInMineZone(playerid))
					{
						format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 矿产: 铁矿、石材、硝石\n", obsstr);
						found ++;
					}
					else if(IsPlayerInForestZone(playerid))
					{
						format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 土壤: 黏土\n", obsstr);
						found ++;
					}
                    for(i = 0, j = MAX_DROPS; i < j ; i++)
				    {
				        if(DropItem[i][idCreated] == 0) continue;
				        if(DropItem[i][idType] == ITEM_BURY)
						{
						    if(60.0 < GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < range)
							{
							    format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"* 埋藏物:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
								found ++;
							}
							else if(30.0 < GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 60.0)
							{
								format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 埋藏物:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
								found ++;
							}
							else if(15.0 < GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 30.0)
							{
								format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEYELLOW"** 埋藏物:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
								found ++;
							}
							else if(GetPlayerDistanceFromPointEx(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 15.0)
							{
								format(obsstr, sizeof(obsstr), "%s"#TEXT_YELLOW"*** 埋藏物:%s\n", obsstr, ItemsList_USE[DropItem[i][idItemID]][iuName]);
								found ++;
							}
				        }
				    }
					for(i = 0, j = MAX_TREES; i < j; i++)
					{
					    if(LumberTree[i][trCreated] != 1) continue;
					    if(GetPlayerDistanceFromPointEx(playerid, LumberTree[i][trX], LumberTree[i][trY], LumberTree[i][trZ]) < 60.0)
					    {
					        format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** 木头\n", obsstr);
							found ++;
							break;
						}
					}
					format(obsstr, sizeof(obsstr), ""#TEXT_FADEGREEN"观察到 %d 种可采物...\n\n%s", found, obsstr);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, "观察结果", obsstr, "确认", "");
				}
				case 2:
                {
                    if(lvl < 3) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还不懂得观察野生动物");
                    new Float:ax, Float:ay, Float:az, animalid;
                    for(i = 0, j = MAX_PLAYERS; i < j ; i++)
					{
						animalid = GetGVarInt("Animal", i);
						if(!IsPlayerNPC(i) || animalid == 0) continue;
						FCNPC_GetPosition(i, ax, ay, az);
						if(60.0 < GetPlayerDistanceFromPointEx(playerid, ax, ay, az) < range)
      					{
						    format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"* %s\n", obsstr, AnimalsList[animalid][amlName]);
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
						else if(30.0 < GetPlayerDistanceFromPointEx(playerid, ax, ay, az) < 60.0)
						{
						    format(obsstr, sizeof(obsstr), "%s"#TEXT_WHITE"** %s\n", obsstr, AnimalsList[animalid][amlName]);
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
						else if(GetPlayerDistanceFromPointEx(playerid, ax, ay, az) < 30.0)
						{
						    format(obsstr, sizeof(obsstr), "%s"#TEXT_YELLOW"*** %s\n", obsstr, AnimalsList[animalid][amlName]);
							SetGVarInt("DListID", i, found*1000+playerid);
							found ++;
						}
					}
					format(obsstr, sizeof(obsstr), ""#TEXT_FADEGREEN"观察到 %d 只动物...\n\n%s", found, obsstr);
					ShowPlayerDialog(playerid, DIALOG_OBSERVE_ANIMAL, DIALOG_STYLE_TABLIST_HEADERS, "观察结果", obsstr, "确认", "");
				}
				case 3:
                {
                    if(lvl < 3) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还不懂得观察鱼类资源");
                    if(IsPlayerOnSWOcean(playerid))
					{
					    if(ResourceData[fCod] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 鳕鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fSaury] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 秋刀鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fPomfret] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"** 大白鲳\n", obsstr);
							found ++;
						}
						if(ResourceData[fSnapper] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"** 长尾鸟\n", obsstr);
							found ++;
						}
					}
					if(IsPlayerOnOcean(playerid))
					{
					    if(ResourceData[fHerring] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 鲱鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fSardine] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 沙丁鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fMackerel] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 鲭鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fTuna] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 鲔鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fGoldenCarp] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"** 金鳗鱼\n", obsstr);
							found ++;
						}
					}
					if(IsPlayerOnSEOcean(playerid))
					{
					    if(ResourceData[fSwordFish] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 旗鱼\n", obsstr);
							found ++;
						}
						if(ResourceData[fTuskfin] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_GRAD"** 四齿鱼\n", obsstr);
							found ++;
						}
					}
					if(IsPlayerOnInnerOcean(playerid))
					{
					    if(ResourceData[fSquid] > 0)
					    {
							format(obsstr, sizeof(obsstr), "%s"#TEXT_FADEBLUE"** 鱿鱼\n", obsstr);
							found ++;
						}
					}
					format(obsstr, sizeof(obsstr), ""#TEXT_FADEGREEN"观察到 %d 种鱼类资源...\n\n%s", found, obsstr);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_TABLIST_HEADERS, "观察结果", obsstr, "确认", "");
				}
				case 4:
                {
                    if(lvl < 4) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你还不懂得观察地盘信息");
                    new gzid = GetPlayerGangZone(playerid);
                    if(GangZone[gzid][gzSafezone]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法查看安全区信息");
                    if(gzid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何地盘内");
					else
					{
					    new gangid = GangSqlIDToID(GangZone[gzid][gzOwner]),
							rssstr[16], status[16];
						switch(GangZone[gzid][gzType])
						{
						    case GZ_MONEY: format(rssstr, sizeof(rssstr), "保护费");
						    case GZ_WOOD: format(rssstr, sizeof(rssstr), "木材");
						    case GZ_IRON: format(rssstr, sizeof(rssstr), "铁矿");
						    case GZ_NITER: format(rssstr, sizeof(rssstr), "硝石");
						    case GZ_ROCK: format(rssstr, sizeof(rssstr), "石材");
						}
						switch(GangZone[gzid][gzStatus])
						{
						    case GZ_NORMAL: format(status, sizeof(status), "正常");
						    case GZ_UNDERATK: format(status, sizeof(status), "遭受攻击");
						    case GZ_CD: format(status, sizeof(status), "冷却中");
						}
						if(GangZone[gzid][gzOwner] == GANG_ID_NONE) format(obsstr, sizeof(obsstr), ""#TEXT_WHITE"这是不属于任何帮会的地盘");
						else format(obsstr, sizeof(obsstr), ""#TEXT_WHITE"这是属于帮会{%06x}%s[%s]"#TEXT_WHITE"的地盘", GangData[gangid][gColor] >>> 8, GangData[gangid][gName], GangData[gangid][gShort]);
                    	format(obsstr, sizeof(obsstr), "%s\n名称:%s\n状态:%s\n等级:%d\n防御度:%d\n收益:%s"
						, obsstr, GangZone[gzid][gzName], status, GangZone[gzid][gzLevel], GangZone[gzid][gzDefense], rssstr);
                    }
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "观察结果", obsstr, "确认", "");
				}
			}
			return 1;
		}
		case DIALOG_OBSERVE_ANIMAL:
		{
			if (!response) return 1;
			new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				Float:nx, Float:ny, Float:nz, Float:px, Float:py, Float:pz;
			GetPlayerPos(chosed, nx, ny, nz);
			GetPlayerCameraPos(playerid, px, py, pz);
			SetPlayerCameraPos(playerid, px, py, pz);
			SetPlayerCameraLookAt(playerid, nx, ny, nz, CAMERA_MOVE);
			SetPlayerTimerEx(playerid, "ReturnCamera", 1500, 0, "i", playerid);
			return 1;
		}
		case DIALOG_OBSERVE_DROP:
		{
			if (!response) return 1;
			new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				Float:px, Float:py, Float:pz;
			GetPlayerCameraPos(playerid, px, py, pz);
			SetPlayerCameraPos(playerid, px, py, pz);
			SetPlayerCameraLookAt(playerid, DropItem[chosed][idX], DropItem[chosed][idY], DropItem[chosed][idZ], CAMERA_MOVE);
			SetPlayerTimerEx(playerid, "ReturnCamera", 1500, 0, "i", playerid);
			return 1;
		}
        case DIALOG_SEARCH:
        {
            if (!response) return 1;
            switch(listitem)
            {
                case 0: ShowPlayerDialog(playerid, DIALOG_SEARCH_PLAYER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", ""#TEXT_WHITE"请输入要寻找的玩家名称或ID", "确认", "关闭");
                case 1: ShowPlayerDialog(playerid, DIALOG_SEARCH_VEHICLE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", ""#TEXT_WHITE"请输入要寻找的载具车牌", "确认", "关闭");
            }
            return 1;
        }
        case DIALOG_SEARCH_PLAYER:
        {
            if (!response) return 1;
            new giveplayerid, Float:px, Float:py, Float:pz, Float:distance, giveplayername[MAX_PLAYER_NAME];
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_SEARCH_PLAYER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", "该玩家名称或ID不存在或尚未登入,请重新输入", "确认", "关闭");
            }
            switch(SkillData[playerid][psSearch])
            {
                case 1: distance = 150.0;
                case 2: distance = 300.0;
                case 3: distance = 600.0;
                case 4: distance = 1200.0;
                case 5: distance = 6000.0;
            }
            if(GetGVarFloat("PlayerX", giveplayerid) != 0.0 || GetGVarFloat("PlayerY", giveplayerid) != 0.0 || GetGVarFloat("PlayerZ", giveplayerid) != 0.0)
			{
			    px = GetGVarFloat("PlayerX", giveplayerid),
			    py = GetGVarFloat("PlayerY", giveplayerid),
			    pz = GetGVarFloat("PlayerZ", giveplayerid);
			}
			else if(GetGVarInt("UsingRC", giveplayerid) > 0)
			{
			    px = GetGVarFloat("RCX", giveplayerid),
			    py = GetGVarFloat("RCY", giveplayerid),
			    pz = GetGVarFloat("RCZ", giveplayerid);
			}
			else
			{
				GetPlayerPos(giveplayerid, px, py, pz);
			}
            if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) > distance || GetGVarInt("Spawned", giveplayerid) == 0)
            {
                return ShowPlayerDialog(playerid, DIALOG_SEARCH_PLAYER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", ""#TEXT_WHITE"以目前的能力找不到该玩家的踪迹,请重新输入", "确认", "取消");
            }
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            PlayerData[playerid][pStamina] -= 2.0;
            format(string, sizeof(string), " ** "#TEXT_FADEGREEN"你花费了2点体力找到了玩家"#TEXT_LIGHTORANGE" %s "#TEXT_FADEGREEN"的位置,已标示在地图上了", giveplayername);
            SendClientMessage(playerid, COLOR_WHITE, string);
            SetPlayerGPS(playerid, px, py, pz);
			rand = random(20);
			if(rand == 10)
			{
				GivePlayerPoint(playerid, 7, 1);
				format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"洞察知识"#TEXT_LIGHTBLUE"1点");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
		case DIALOG_SEARCH_VEHICLE:
        {
            if (!response) return 1;
            new Float:vx, Float:vy, Float:vz, Float:distance, i, j, k;
            for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j ; i++)
    		{
	            if(strcmp(inputtext, VehData[i][vPlate]) == 0 && !isnull(inputtext))
				{
				    GetVehiclePos(i, vx, vy, vz);
				    k = 1;
				    break;
				}
			}
			if(k == 0)
			{
			    return ShowPlayerDialog(playerid, DIALOG_SEARCH_VEHICLE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", "没有该车牌的载具,请重新输入", "确认", "关闭");
            }
            switch(SkillData[playerid][psSearch])
            {
                case 1: distance = 150.0;
                case 2: distance = 300.0;
                case 3: distance = 600.0;
                case 4: distance = 1200.0;
                case 5: distance = 6000.0;
            }
            if(GetPlayerDistanceFromPointEx(playerid, vx, vy, vz) > distance)
            {
                return ShowPlayerDialog(playerid, DIALOG_SEARCH_VEHICLE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"搜索", ""#TEXT_WHITE"以目前的能力找不到该载具的踪迹,请重新输入", "确认", "取消");
            }
            PlayerData[playerid][pStamina] -= 2.0;
            format(string, sizeof(string), " ** "#TEXT_FADEGREEN"你花费了2点体力找到了该"#TEXT_LIGHTORANGE" %s "#TEXT_FADEGREEN"的位置,已标示在地图上了", GetVehicleName(GetVehicleModel(i)));
            SendClientMessage(playerid, COLOR_WHITE, string);
            SetPlayerGPS(playerid, vx, vy, vz);
			rand = random(20);
			if(rand == 10)
			{
				GivePlayerPoint(playerid, 7, 1);
				format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"洞察知识"#TEXT_LIGHTBLUE"1点");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
		case DIALOG_CHAT:
		{
		    if (!response) return 1;
		    new option = GetGVarInt("DListID", listitem*1000+playerid);
			switch(option)
			{
			    case CHAT_ALL:
				{
					ShowPlayerDialog(playerid, DIALOG_CHAT_ALL, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"世界频道", ""#TEXT_WHITE"输入你要发布的"#TEXT_SKYBLUE"全频消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
				case CHAT_TEAM:
				{
				    if(GetPlayerTeam(playerid) == NO_TEAM)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何小队里面");
				    }
					ShowPlayerDialog(playerid, DIALOG_CHAT_TEAM, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTBLUE"小队频道", ""#TEXT_WHITE"输入你要发布的"#TEXT_LIGHTBLUE"小队消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
				case CHAT_COMPANY:
				{
				    if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何企业里面");
				    }
					ShowPlayerDialog(playerid, DIALOG_CHAT_COMPANY, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"企业频道", ""#TEXT_WHITE"输入你要发布的"#TEXT_SKYBLUE"企业消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
				case CHAT_GANG:
				{
				    if(PlayerData[playerid][pGang] == GANG_ID_NONE)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何帮会里面");
				    }
					ShowPlayerDialog(playerid, DIALOG_CHAT_GANG, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTRED"帮会频道", ""#TEXT_WHITE"输入你要发布的"#TEXT_LIGHTRED"帮会消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
			    case CHAT_RANGE:
				{
					ShowPlayerDialog(playerid, DIALOG_CHAT_ME, DIALOG_STYLE_INPUT, ""#TEXT_SANDYELLOW"动作消息", ""#TEXT_WHITE"输入你要发布的"#TEXT_SANDYELLOW"动作消息", "发送", "取消");
				}
			    case CHAT_SHOUT:
				{
					ShowPlayerDialog(playerid, DIALOG_CHAT_SHOUT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"周围呼喊", ""#TEXT_WHITE"输入你要向周围呼喊的内容", "发送", "取消");
				}
				case CHAT_DEPT:
				{
				    if(PlayerData[playerid][pDepartment] == 0)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何部门里面");
				    }
					ShowPlayerDialog(playerid, DIALOG_CHAT_DEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_FADEBLUE"部门频道", ""#TEXT_WHITE"输入你要发布的"#TEXT_FADEBLUE"部门消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
				case CHAT_DEPT_ALL:
				{
				    if(PlayerData[playerid][pDepartment] == 0)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在任何部门里面");
				    }
					ShowPlayerDialog(playerid, DIALOG_CHAT_ALLDEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_FADEYELLOW"政府频道", ""#TEXT_WHITE"输入你要传达给"#TEXT_FADEYELLOW"政府频道"#TEXT_WHITE"的消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
				case CHAT_NEWBIE:
				{
					ShowPlayerDialog(playerid, DIALOG_CHAT_NEWBIE, DIALOG_STYLE_INPUT, ""#TEXT_PINKRED"新手频道", ""#TEXT_WHITE"输入你要询问"#TEXT_PINKRED"辅导员"#TEXT_WHITE"的问题或是与其他新手玩家交流的消息\n"#TEXT_WHITE"(长度限制144字元)", "发送", "取消");
				}
			}
			UpdatePlayerMission(playerid, 2, 4);
			return 1;
		}
		case DIALOG_CHAT_ALL:
		{
		    if (!response) return 1;
		    if (ooc_control == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 世界频道未开启!");
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_ALL, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"世界频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_ALL, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"世界频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			if(GetTickCount() - GetGVarInt("pCmdTick", playerid) < 500)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "错误: 请不要刷屏!");
   			}

			SetGVarInt("pCmdTick", GetTickCount(), playerid);
			
			format(string, sizeof(string), " [%s"#TEXT_WHITE"] %s(%d): %s", GetPlayerTitle(playerid), PlayerData[playerid][pName], playerid, inputtext);
			SendClientMessageToAll(COLOR_WHITE, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_ALL, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"世界频道", ""#TEXT_WHITE"输入你要发布的下一条"#TEXT_SKYBLUE"全频消息", "发送", "取消");
		    Log(chatlog, INFO, "[世界频道] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_TEAM:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_TEAM, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTBLUE"小队频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_TEAM, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTBLUE"小队频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			new teamid = GetPlayerTeam(playerid);
			format(string, sizeof(string), " [%s] *%s(%d): %s", Team[teamid][tName], PlayerData[playerid][pName], playerid, inputtext);
			SendTeamMessage(teamid, COLOR_LIGHTBLUE, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_TEAM, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTBLUE"小队频道", ""#TEXT_WHITE"输入你要发布的下一条"#TEXT_LIGHTBLUE"小队消息", "发送", "取消");
		    Log(chatlog, INFO, "[%s] %s(%d): %s", Team[teamid][tName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_COMPANY:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_COMPANY, DIALOG_STYLE_INPUT, ""#TEXT_BLUEGREEN"企业频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_COMPANY, DIALOG_STYLE_INPUT, ""#TEXT_BLUEGREEN"企业频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			static rankstr[32], id;
			id = CompanySqlIDToID(PlayerData[playerid][pCompany]);
			switch(GetPlayerCompanyRank(playerid))
			{
			    case 1: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR1]);
			    case 2: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR2]);
			    case 3: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR3]);
			    case 4: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR4]);
			    case 5: format(rankstr, sizeof(rankstr), "%s", CompanyData[id][comR5]);
			}
			format(string, sizeof(string), " [%s] *%s%s(%d): %s", CompanyData[id][comName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
			SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_COMPANY, DIALOG_STYLE_INPUT, ""#TEXT_BLUEGREEN"企业频道", ""#TEXT_WHITE"输入你要发布的下一条"#TEXT_BLUEGREEN"企业消息", "发送", "取消");
		    Log(chatlog, INFO, "[%s] %s(%d): %s", CompanyData[id][comName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_GANG:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_GANG, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTRED"帮会频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_GANG, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTRED"帮会频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			static rankstr[32], id;
			id = GangSqlIDToID(PlayerData[playerid][pGang]);
			switch(GetPlayerGangRank(playerid))
			{
			    case 1: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR1]);
			    case 2: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR2]);
			    case 3: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR3]);
			    case 4: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR4]);
			    case 5: format(rankstr, sizeof(rankstr), "%s", GangData[id][gR5]);
			}
			format(string, sizeof(string), " [%s] *%s%s(%d): %s", GangData[id][gName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
			SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_GANG, DIALOG_STYLE_INPUT, ""#TEXT_LIGHTRED"帮会频道", ""#TEXT_WHITE"输入你要发布的下一条"#TEXT_LIGHTRED"帮会消息", "发送", "取消");
		    Log(chatlog, INFO, "[%s] %s(%d): %s", GangData[id][gName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_DEPARTMENT:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_DEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"部门频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_DEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"部门频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			static rankstr[32], id;
			id = PlayerData[playerid][pDepartment];
			switch(PlayerData[playerid][pDeptRank])
			{
			    case 1: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR1]);
			    case 2: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR2]);
			    case 3: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR3]);
			    case 4: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR4]);
			    case 5: format(rankstr, sizeof(rankstr), "%s", Department[id][dpR5]);
			}
			format(string, sizeof(string), " [%s] *%s%s(%d): %s", Department[id][dpName], rankstr, PlayerData[playerid][pName], playerid, inputtext);
			SendDeptMessage(PlayerData[playerid][pDepartment], COLOR_FADEBLUE, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_DEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"部门频道", ""#TEXT_WHITE"输入你要发布的下一条"#TEXT_FADEBLUE"部门消息", "发送", "取消");
		    Log(chatlog, INFO, "[%s] %s(%d): %s", Department[id][dpName], PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_ALLDEPARTMENT:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_ALLDEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"政府频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_ALLDEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"政府频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			static dept[32];
			switch(PlayerData[playerid][pDepartment])
			{
			    case DEPT_POLICE: format(dept, sizeof(dept), "治安部门");
			    case DEPT_MEDIC: format(dept, sizeof(dept), "医疗部门");
			    case DEPT_GOVERNMENT: format(dept, sizeof(dept), "政府部门");
			    case DEPT_COUNSELOR: format(dept, sizeof(dept), "辅导部门");
			    case DEPT_ARMY: format(dept, sizeof(dept), "军事部门");
			}
			format(string, sizeof(string), " [政府] *%s%s(%d): %s", dept, PlayerData[playerid][pName], playerid, inputtext);
			SendAllDeptMessage(COLOR_FADEYELLOW, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_ALLDEPARTMENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"政府频道", ""#TEXT_WHITE"输入你要发布的下一条要传达给"#TEXT_FADEYELLOW"政府频道"#TEXT_WHITE"的消息", "发送", "取消");
		    Log(chatlog, INFO, "[政府] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_NEWBIE:
		{
		    if (!response) return 1;
		    if (strlen(inputtext) > 144)
			{
				return ShowPlayerDialog(playerid, DIALOG_CHAT_NEWBIE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"新手频道", ""#TEXT_YELLOW"你的消息太长无法发布", "发送", "取消");
			}
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_NEWBIE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"新手频道", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			static tistr[32];
			if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR) format(tistr, sizeof(tistr), ""#TEXT_YELLOW"辅导员");
			else format(tistr, sizeof(tistr), ""#TEXT_WHITE"新手");
			format(string, sizeof(string), " [新手] *%s%s(%d): %s", tistr, PlayerData[playerid][pName], playerid, inputtext);
			SendNewbieMessage(COLOR_PINKRED, string);
		    ShowPlayerDialog(playerid, DIALOG_CHAT_NEWBIE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"新手频道", ""#TEXT_WHITE"输入你要发布的下一条消息或问题", "发送", "取消");
		    Log(chatlog, INFO, "[新手] %s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
		    print(string);
			return 1;
		}
		case DIALOG_CHAT_ME:
		{
		    if (!response) return 1;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_ME, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"动作消息", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			format(string, sizeof(string), "** %s %s **", PlayerData[playerid][pName], inputtext);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			print(string);
			return 1;
		}
		case DIALOG_CHAT_SHOUT:
		{
		    if (!response) return 1;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_CHAT_SHOUT, DIALOG_STYLE_INPUT, ""#TEXT_SKYBLUE"周围呼喊", ""#TEXT_YELLOW"你的消息有无法发送的字元", "发送", "取消");
			}
			format(string, sizeof(string), "** %s(%d) 大叫: %s!", PlayerData[playerid][pName], playerid, inputtext);
			SendRangeMessage(40.0, playerid, string, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_GRAD1);
			Log(chatlog, INFO, "%s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
			print(string);
			return 1;
		}
		case DIALOG_CMD:
		{
		    if (!response) return 1;
			switch(listitem)
			{
			    case 0:
				{
					SendClientMessage(playerid, COLOR_WHITE, "服务器: "#TEXT_FADEYELLOW"/setweather"#TEXT_WHITE" [设定天气] "#TEXT_FADEYELLOW"/settime"#TEXT_WHITE" [设定时间]");
					SendClientMessage(playerid, COLOR_WHITE, "服务器: "#TEXT_FADEYELLOW"/setdept"#TEXT_WHITE" [管理公部门] "#TEXT_FADEYELLOW"/moonlake"#TEXT_WHITE" [梦月潭]");
				}
				case 1:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/addpet"#TEXT_WHITE" [给予宠物] "#TEXT_FADEGREEN"/givegun"#TEXT_WHITE" [给予武器] "#TEXT_FADEGREEN"/giveitem"#TEXT_WHITE" [给予道具]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/setskin"#TEXT_WHITE" [设定造型] "#TEXT_FADEGREEN"/sethp"#TEXT_WHITE" [设定生命] "#TEXT_FADEGREEN"/setar"#TEXT_WHITE" [设定防弹衣]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/setplayer"#TEXT_WHITE" [设定玩家]"#TEXT_WHITE" "#TEXT_FADEGREEN"/setpoint"#TEXT_WHITE" [设定技能点] "#TEXT_FADEGREEN"/setskill"#TEXT_WHITE" [设定技能]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/giveallskin"#TEXT_WHITE" [给予所有造型] "#TEXT_FADEGREEN"/givemoney"#TEXT_WHITE" [给予金钱]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/setint"#TEXT_WHITE" [设定室内编号] "#TEXT_FADEGREEN"/setworld"#TEXT_WHITE" [设定世界编号]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/respawnplayer"#TEXT_WHITE" [重生玩家] "#TEXT_FADEGREEN"/checkprop"#TEXT_WHITE" [确认资产]");
				    SendClientMessage(playerid, COLOR_WHITE, "玩家: "#TEXT_FADEGREEN"/pm"#TEXT_WHITE" [私信玩家] "#TEXT_FADEGREEN"/checkweapon"#TEXT_WHITE" [检查武器] /ocontrol"#TEXT_WHITE" [管理世界频道]");
				    SendClientMessage(playerid, COLOR_WHITE, "组织: "#TEXT_GREEN"/setplayercompany"#TEXT_WHITE" [设置玩家企业] "#TEXT_GREEN"/setplayergang"#TEXT_WHITE" [设置玩家帮会] ");
				    SendClientMessage(playerid, COLOR_WHITE, "组织: "#TEXT_GREEN"/setplayerdept"#TEXT_WHITE" [设置玩家公部门] "#TEXT_GREEN"/setplayerdrank"#TEXT_WHITE" [设置玩家公部门阶级]");
				}
			    case 2:
				{
					SendClientMessage(playerid, COLOR_WHITE, "载具: "#TEXT_FADEBLUE"/veh"#TEXT_WHITE" [新增载具] "#TEXT_FADEBLUE"/vehx"#TEXT_WHITE" [移除载具] "#TEXT_FADEBLUE"/vtype"#TEXT_WHITE" [设定载具种类]");
				    SendClientMessage(playerid, COLOR_WHITE, "载具: "#TEXT_FADEBLUE"/fixveh"#TEXT_WHITE" [修复载具] "#TEXT_FADEBLUE"/apark"#TEXT_WHITE" [更改重生位置] "#TEXT_FADEBLUE"/vprice"#TEXT_WHITE" [设定载具价格]");
				    SendClientMessage(playerid, COLOR_WHITE, "载具: "#TEXT_FADEBLUE"/alock"#TEXT_WHITE" [载具上锁] "#TEXT_FADEBLUE"/acolor"#TEXT_WHITE" [载具颜色] "#TEXT_FADEBLUE"/afuel"#TEXT_WHITE" [设定油量]");
				    SendClientMessage(playerid, COLOR_WHITE, "载具: "#TEXT_FADEBLUE"/respawnveh"#TEXT_WHITE" [重生载具] "#TEXT_FADEBLUE"/respawnallveh"#TEXT_WHITE" [重生所有载具]");
				}
			    case 3:
				{
					SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/gotogps"#TEXT_WHITE" [传送至GPS位置] "#TEXT_VIOLET"/gotoany"#TEXT_WHITE" [传送至坐标] "#TEXT_VIOLET"/gotocar"#TEXT_WHITE" [传送至载具]");
					SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/getcar"#TEXT_WHITE" [传送载具] "#TEXT_VIOLET"/gotop"#TEXT_WHITE" [传送至玩家] "#TEXT_VIOLET"/getp"#TEXT_WHITE" [传送玩家]");
					SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/goincar"#TEXT_WHITE" [传送进载具] "#TEXT_VIOLET"/gotoestate"#TEXT_WHITE" [传送至地产]");
					SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/gotoplant"#TEXT_WHITE" [传送至植物] "#TEXT_VIOLET"/gotoobj"#TEXT_WHITE" [传送至物件]");
				    SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/xplus"#TEXT_WHITE" [增加X坐标] "#TEXT_VIOLET"/xminus"#TEXT_WHITE" [减少X坐标]");
				    SendClientMessage(playerid, COLOR_WHITE, "传送: "#TEXT_VIOLET"/yplus"#TEXT_WHITE" [增加Y坐标] "#TEXT_VIOLET"/yminus"#TEXT_WHITE" [减少Y坐标]");
				}
				case 4:
				{
				    SendClientMessage(playerid, COLOR_WHITE, "地产: "#TEXT_SKYBLUE"/addestate"#TEXT_WHITE" [新增地产] "#TEXT_SKYBLUE"/estatex"#TEXT_WHITE" [删除地产] "#TEXT_SKYBLUE"/etype"#TEXT_WHITE" [地产种类]");
				    SendClientMessage(playerid, COLOR_WHITE, "地产: "#TEXT_SKYBLUE"/ename"#TEXT_WHITE" [地产名称] "#TEXT_SKYBLUE"/estyle"#TEXT_WHITE" [地产内装] "#TEXT_SKYBLUE"/eprice"#TEXT_WHITE" [地产价值]");
				    SendClientMessage(playerid, COLOR_WHITE, "地产: "#TEXT_SKYBLUE"/elock"#TEXT_WHITE" [地产上锁]");
				}
				case 5:
				{
					SendClientMessage(playerid, COLOR_WHITE, "储存: "#TEXT_ORANGE"/saveserver"#TEXT_WHITE" [储存所有服务器资料] "#TEXT_ORANGE"/saveme"#TEXT_WHITE" [储存个人资料] "#TEXT_ORANGE"/savecar"#TEXT_WHITE" [储存所有车辆资料]");
				}
				case 6:
				{
					SendClientMessage(playerid, COLOR_WHITE, "其他: "#TEXT_PINKRED"/jpack"#TEXT_WHITE" [喷射背包] "#TEXT_PINKRED"/amp3"#TEXT_WHITE" 播放音乐] "#TEXT_PINKRED"/sound"#TEXT_WHITE" [播放音效]");
				    SendClientMessage(playerid, COLOR_WHITE, "其他: "#TEXT_PINKRED"/testqte"#TEXT_WHITE" [测试QTE]  "#TEXT_PINKRED"/getmypos"#TEXT_WHITE" [取得自己坐标] "#TEXT_PINKRED"/setplant"#TEXT_WHITE" [设定植物成长]");
				    SendClientMessage(playerid, COLOR_WHITE, "其他: "#TEXT_PINKRED"/uncd"#TEXT_WHITE" [结束技能冷却] "#TEXT_PINKRED"/startclass"#TEXT_WHITE" [开始课程] "#TEXT_PINKRED"/endclass"#TEXT_WHITE" [结束课程]");
				    SendClientMessage(playerid, COLOR_WHITE, "竞速: "#TEXT_PINKRED"/setrace"#TEXT_WHITE" [设定赛道] "#TEXT_PINKRED"/startrace"#TEXT_WHITE" [开始赛道]");
				    SendClientMessage(playerid, COLOR_WHITE, "地盘: "#TEXT_PINKRED"/addgangzone"#TEXT_WHITE" [新增地盘] "#TEXT_PINKRED"/gangzone"#TEXT_WHITE" [管理地盘]");
				    SendClientMessage(playerid, COLOR_WHITE, "活动: "#TEXT_PINKRED"/startmatwar"#TEXT_WHITE" [开始新的货物战争] "#TEXT_PINKRED"/event"#TEXT_WHITE" [活动菜单]");
				    SendClientMessage(playerid, COLOR_WHITE, "活动: "#TEXT_PINKRED"/startlotto"#TEXT_WHITE" [乐透开奖] "#TEXT_PINKRED"/startlottoex"#TEXT_WHITE" [乐透连续开奖]");
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_BUY:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid),
				price = EstateData[eid][ePrice];
			switch(listitem)
			{
				case 0:
				{
				    new usedticket = 0;
				    if(PlayerHaveItem(playerid, ITEM_USE, 190) > 0)
				    {
				        price = 0;
				        usedticket = 190;
				    }
				    if(PlayerData[playerid][pCash] < price) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有钱买下这里");
				    switch(EstateData[eid][eType])
				    {
				        case ESTATE_SUITE:
				        {
				            if(!PlayerCanBuyEstate(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前无法再为自己购买更多地产了");
						    AddEstateOwner(eid, ESTATE_OWNER_PLAYER, PlayerData[playerid][pID]);
						    PlayerEnterEstate(playerid, eid);
						}
						case ESTATE_HOUSE:
				        {
				            if(!PlayerCanBuyEstate(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前无法再为自己购买更多地产了");
						    AddEstateOwner(eid, ESTATE_OWNER_PLAYER, PlayerData[playerid][pID]);
						    PlayerEnterEstate(playerid, eid);
						}
						case ESTATE_OFFICE:
				        {
							if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何企业,无法买下办公室");
							new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
							if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为企业购买地产");
							if(IsCompanyHaveOffice(PlayerData[playerid][pCompany])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 一个企业只能购买一间办公室");
						    AddEstateOwner(eid, ESTATE_OWNER_COMPANY, PlayerData[playerid][pCompany]);
						    PlayerEnterEstate(playerid, eid);
							format(string, sizeof(string), "<<企业>> %s 为企业购买了新地产 %s", PlayerData[playerid][pName], EstateData[eid][eName]);
							SendCompanyMessage(PlayerData[playerid][pCompany], COLOR_BLUEGREEN, string);
						}
						case ESTATE_CLUBHOUSE:
				        {
				            if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何帮会,无法买下会所");
				            new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
							if(GetPlayerGangRank(playerid) < GangData[gangid][gER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为帮会购买地产");
							if(IsGangHaveClubhouse(PlayerData[playerid][pGang])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 一个帮会只能购买一间会所");
						    AddEstateOwner(eid, ESTATE_OWNER_GANG, PlayerData[playerid][pGang]);
						    PlayerEnterEstate(playerid, eid);
							format(string, sizeof(string), "<<帮会>> %s 为帮会购买了新地产 %s", PlayerData[playerid][pName], EstateData[eid][eName]);
							SendGangMessage(PlayerData[playerid][pGang], COLOR_FADERED, string);
						}
						case ESTATE_WAREHOUSE, ESTATE_FACTORY, ESTATE_HANGAR, ESTATE_BOATYARD:
				        {
				            if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE && PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何组织,无法买下这个地产");
				            format(string, sizeof(string), "请选择要替哪个组织购买\n企业\n帮会");
						    ShowPlayerDialog(playerid, DIALOG_ESTATE_BUYFOR, DIALOG_STYLE_TABLIST_HEADERS, "购买地产", string, "选择", "关闭");
						    SetGVarInt("UsingETicket", usedticket, playerid);
						    return 1;
						}
					}
					GiveMoney(playerid, -price);
					Log(moneylog, INFO, "%s(%d)花费了$%d购买了地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
					Log(estatelog, INFO, "s(%d)花费了$%d购买了地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
					if(usedticket > 0)
					{
					    format(string, sizeof(string), "** "#TEXT_BLUEGREEN"你使用"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN"兑换了"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN",你可以在里面开启地产介面查看信息", ItemsList_USE[usedticket][iuName], EstateData[eid][eName]);
					    SendClientMessage(playerid, COLOR_WHITE, string);
					    GivePlayerItem(playerid, ITEM_USE, usedticket, -1);
					}
					else
					{
					    format(string, sizeof(string), "** "#TEXT_BLUEGREEN"你顺利花费了"#TEXT_FADEGREEN"$%d"#TEXT_BLUEGREEN"买下了"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN",你可以在里面开启地产介面查看信息", price, EstateData[eid][eName]);
					    SendClientMessage(playerid, COLOR_WHITE, string);
					}
				}
				case 1:
				{
				    new hrs,mins,secs;
					gettime(hrs,mins,secs);
					if(10 < hrs < 14 || 17 < hrs < 22)
					{
					    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "你目前有通缉在身,无法预览地产");
					    if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "你必须先完成手边的事情才能预览地产");
					    PlayerEnterEstate(playerid, eid);
					    SetGVarInt("ViewEstate", 1, playerid);
					}
					else return SendClientMessage(playerid, COLOR_WHITE, "只有白天11至13时以及晚间18至21时才能观看地产");
				}
				case 2:
				{
				    new estatestr[256], style = EstateData[eid][eStyle];
				    switch(EstateData[eid][eType])
				    {
						case ESTATE_SUITE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Suite[style][esName], EstateStyle_Suite[style][esDes]);
						case ESTATE_HOUSE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_House[style][esName], EstateStyle_House[style][esDes]);
						case ESTATE_OFFICE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Office[style][esName], EstateStyle_Office[style][esDes]);
						case ESTATE_CLUBHOUSE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Clubhouse[style][esName], EstateStyle_Clubhouse[style][esDes]);
						case ESTATE_WAREHOUSE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Warehouse[style][esName], EstateStyle_Warehouse[style][esDes]);
						case ESTATE_FACTORY: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Factory[style][esName], EstateStyle_Factory[style][esDes]);
						case ESTATE_HANGAR: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Hangar[style][esName], EstateStyle_Hangar[style][esDes]);
						case ESTATE_BOATYARD: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s", EstateStyle_Boatyard[style][esName], EstateStyle_Boatyard[style][esDes]);
					}
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_FADEGREEN"内装简介", estatestr, "确认", "");
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_BUYFOR:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid), buyertype, buyerid,
				usedticket = GetGVarInt("UsingETicket", playerid),
				price = EstateData[eid][ePrice];
			if(PlayerHaveItem(playerid, ITEM_USE, 190) > 0)
			{
				price = 0;
				usedticket = 190;
			}
		    if(PlayerData[playerid][pCash] < price) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有钱买下这里");
			switch(listitem)
			{
				case 0:
				{
				    if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何企业");
				    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
					if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为企业购买地产");
				    buyertype = ESTATE_OWNER_COMPANY;
				    buyerid = PlayerData[playerid][pCompany];
				    Log(companylog, INFO, "%s(%d)花费了$%d购买了地产%s(%d)给企业%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID], CompanyData[comid][comName], CompanyData[comid][comID]);
					format(string, sizeof(string), "<<企业>> %s 为企业购买了新地产 %s", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendCompanyMessage(buyerid, COLOR_BLUEGREEN, string);
				}
				case 1:
				{
				    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不属于任何帮会");
				    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
					if(GetPlayerGangRank(playerid) < GangData[gangid][gER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限为帮会购买地产");
				    buyertype = ESTATE_OWNER_GANG;
				    buyerid = PlayerData[playerid][pGang];
				    Log(ganglog, INFO, "%s(%d)花费了$%d购买了地产%s(%d)给帮会%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID], GangData[gangid][gName], GangData[gangid][gID]);
					format(string, sizeof(string), "<<帮会>> %s 为帮会购买了新地产 %s", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendGangMessage(buyerid, COLOR_FADERED, string);
				}
			}
			PlayerEnterEstate(playerid, eid);
   			AddEstateOwner(eid, buyertype, buyerid);
			GiveMoney(playerid, -price);
			Log(moneylog, INFO, "%s(%d)花费了$%d购买了地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
            Log(estatelog, INFO, "s(%d)花费了$%d购买了地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
			if(usedticket > 0)
			{
				format(string, sizeof(string), "** "#TEXT_BLUEGREEN"你使用"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN"兑换了"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN",你可以在里面开启地产介面查看信息", ItemsList_USE[usedticket][iuName], EstateData[eid][eName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
				GivePlayerItem(playerid, ITEM_USE, usedticket, -1);
				DeleteGVar("UsingETicket", playerid);
			}
			else
			{
				format(string, sizeof(string), "** "#TEXT_BLUEGREEN"你顺利花费了"#TEXT_FADEGREEN"$%d"#TEXT_BLUEGREEN"买下了"#TEXT_YELLOW"%s"#TEXT_BLUEGREEN"", price, EstateData[eid][eName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
				SendClientMessage(playerid, COLOR_WHITE, "你可以在出口处按F开启地产介面查看信息,按Y可以使用地产里的家具");
			}
			return 1;
		}
		case DIALOG_ESTATE_VISIT:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid);
		    switch(listitem)
		    {
		        case 0:
				{
		            if(GetGVarInt("RingCD", playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "你不久前才按过门铃");
				    if(EstateData[eid][eOwnerType] == ESTATE_OWNER_NONE) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于任何人");
				    format(string, sizeof(string), "** %s 按了下门铃 **", playername);
					SendRangeMessage(15.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					PlayerPlayGlobalSound(playerid, 31000);
					SetGVarInt("RingEstate", eid, playerid);
					SetGVarInt("RingCD", 1, playerid);
					SetPlayerTimerEx(playerid, "BellUnCD", 20000, 0, "i", playerid);
					ForEachPlayer(i)
					{
						if(GetPlayerVirtualWorld(i) == EstateData[eid][eID])
						{
							SendClientMessage(i, COLOR_WHITE, "门铃响了一下,可以去门前查看访客");
						    PlayerPlaySound(i, 31000, 0.0, 0.0, 0.0);
						}
					}
				}
				case 1:
				{
				    if(EstateData[eid][eRentable] == 9) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不开放租屋");
				    if(EstateData[eid][eOwnerType] == ESTATE_OWNER_NONE) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于任何人");
				    if(EstateData[eid][eOwnerID] == PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你无法租自己的地产");
				    if(PlayerData[playerid][pRenting] == 1) return SendClientMessage(playerid, COLOR_WHITE, "你已经有租屋处了");
				    new rent = EstateData[eid][eRent];
				    if(PlayerData[playerid][pCash] < rent) return SendClientMessage(playerid, COLOR_WHITE, "你身上的现金付不起租约订金");
				    GiveMoney(playerid, -rent);
				    Log(moneylog, INFO, "%s(%d)花费了$%d租下了地产%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], rent, EstateData[eid][eName], EstateData[eid][eID]);
				    EstateData[eid][eMoney] += rent;
				    format(string, sizeof(string), "** 你花费了 $%d 租借了 %s 作为你的租屋处,你可以至个人菜单的设定将这里设为你的出生地点", rent, EstateData[eid][eID]);
				    SendClientMessage(playerid, COLOR_YELLOW, string);
				    PlayerData[playerid][pRenting] = 1;
				    PlayerData[playerid][pRentID] = EstateData[eid][eID];
				    PlayerEnterEstate(playerid, eid);
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_PASS:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid);
		    if(strcmp(EstateData[eid][ePass], inputtext) == 0 && !isnull(inputtext))
			{
			    PlayerEnterEstate(playerid, eid);
			}
			else
			{
			    SendClientMessage(playerid, COLOR_WHITE, "你输入的密码是错的!");
			}
			return 1;
		}
		case DIALOG_ESTATE_SETTING:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid),
				option = GetGVarInt("DListID", listitem*1000+playerid);
            switch(option)
            {
                case ES_EXIT:
                {
                    SetPlayerPos_Fix(playerid, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
					SetPlayerFacingAngle(playerid, EstateData[eid][eA]);
					SetPlayerVirtualWorld(playerid, 0);
					SetPlayerInterior(playerid, 0);
					PlayerExitTP(playerid);
				}
				case ES_VISITOR:
				{
				    new k = 0, RingList[256];
				    ForEachPlayer(i)
					{
					    if(GetGVarInt("RingEstate", i) != eid){continue;}
						if(GetPlayerDistanceFromPointEx(i, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]) < 20.0)
						{
							format(RingList, sizeof(RingList), "%s%s(%d)\n", RingList, PlayerData[i][pName], i);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "访客", ""#TEXT_WHITE"目前没有访客", "确认", "");}
					format(RingList, sizeof(RingList), "访客名称(id)\n%s", RingList);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_VISITOR, DIALOG_STYLE_TABLIST_HEADERS, "访客", RingList, "让他进入", "关闭");
				}
				case ES_MONITOR:
				{
				    if(GetGVarInt("EMonitoring", playerid) != 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经在查看监视器了");
				    if(!PlayerCanSpectate(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前无法查看监视器");
				    if(LimitData[playerid][plEstateDebt] > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的地产目前没有电力使用这个项目");
				    new Float:tmpX, Float:tmpY, Float:tmpZ, tmpI, tmpW;
				    SetGVarInt("EMonitoring", 1, playerid);
				    SetGVarInt("EMEstate", eid, playerid);
				    GetPlayerPos(playerid, tmpX, tmpY, tmpZ);
				    tmpI = GetPlayerInterior(playerid);
				    tmpW = GetPlayerVirtualWorld(playerid);
				    SetGVarFloat("EMX", tmpX, playerid),
					SetGVarFloat("EMY", tmpY, playerid),
					SetGVarFloat("EMZ", tmpZ, playerid),
					SetGVarInt("EMI", tmpI, playerid),
					SetGVarInt("EMW", tmpW, playerid);
					SaveWeaponData(playerid);
				    TogglePlayerSpectating(playerid, true);
				    TogglePlayerControllableEx(playerid, 0);
				    format(string, sizeof(string), ""#TEXT_WHITE"你正在使用 %s 门口的监视器察看门前影像,按鼠标右键离开摄影画面", EstateData[eid][eName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				case ES_SPAWN:
				{
				    switch(EstateData[eid][eType])
				    {
				        case ESTATE_SUITE,ESTATE_HOUSE:
					    {
							if(IsPlayerEstate(playerid, eid))
							{
							    PlayerData[playerid][pSpawnType] = SPAWN_ESTATE;
							    PlayerData[playerid][pSpawn] = EstateData[eid][eID];
							    format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", EstateData[eid][eName]);
								SendClientMessage(playerid, COLOR_WHITE, string);
					        }
					        else if(PlayerData[playerid][pRenting] == 1 && PlayerData[playerid][pRentID] == EstateData[eid][eID])
					        {
					            PlayerData[playerid][pSpawnType] = SPAWN_RENT;
								PlayerData[playerid][pSpawn] = EstateData[eid][eID];
								format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", EstateData[eid][eName]);
								SendClientMessage(playerid, COLOR_WHITE, string);
					        }
					        else return SendClientMessage(playerid, COLOR_WHITE, "错误: 这不是属于你的地产");
					    }
					    case ESTATE_OFFICE,ESTATE_CLUBHOUSE:
					    {
							if(IsCompanyEstate(PlayerData[playerid][pCompany], eid) || IsGangEstate(PlayerData[playerid][pGang], eid))
							{
							    PlayerData[playerid][pSpawnType] = SPAWN_ESTATE;
							    PlayerData[playerid][pSpawn] = EstateData[eid][eID];
							    format(string, sizeof(string), "** 设定完成,下次上线你将在%s重生", EstateData[eid][eName]);
								SendClientMessage(playerid, COLOR_WHITE, string);
					        }
					        else return SendClientMessage(playerid, COLOR_WHITE, "错误: 这不是属于你的组织的地产");
					    }
					    default:
					    {
					        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不能将这里设为重生点");
					    }
					}
				}
				case ES_GARAGE:
		        {
		            if(IsPlayerEstate(playerid, eid) && LimitData[playerid][plEstateDebt] > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的地产目前没有电力使用这个项目");
		            new VehStr[256], i, j, l;
		            VehStr[0] = EOS;
     				for(i = 1, l = 0, j = GetVehiclePoolSize(); i <= j ; i++)
				    {
				        if(VehData[i][vStatus] != VEH_STORED) continue;
				        if(VehData[i][vStoredEstate] == EstateData[eid][eID])
						{
	       					format(VehStr, sizeof(VehStr), "%s%s\t%d\t%s\n", VehStr, GetVehicleName(VehData[i][vModel]), i, VehData[i][vPlate]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"地产车库", ""#TEXT_WHITE"车库里没有任何载具", "确定", "");}
					format(VehStr, sizeof(VehStr), "名称\tID\t车牌\n%s", VehStr);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_GARAGE, DIALOG_STYLE_TABLIST_HEADERS, "地产车库", VehStr, "取出载具", "取消");
				}
				case ES_HANGAR:
		        {
		            new VehStr[256], i, j, l;
		            VehStr[0] = EOS;
     				for(i = 1, l = 0, j = GetVehiclePoolSize(); i <= j ; i++)
				    {
				        if(VehData[i][vStatus] != VEH_STORED) continue;
				        if(VehData[i][vStoredEstate] == EstateData[eid][eID])
						{
	       					format(VehStr, sizeof(VehStr), "%s%s\t%d\t%s\n", VehStr, GetVehicleName(VehData[i][vModel]), i, VehData[i][vPlate]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
				    }
				    if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"机库", ""#TEXT_WHITE"机库里没有任何载具", "确定", "");}
					format(VehStr, sizeof(VehStr), "名称\tID\t车牌\n%s", VehStr);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_HANGAR, DIALOG_STYLE_TABLIST_HEADERS, "机库", VehStr, "取出载具", "取消");
				}
				case ES_SELL:
				{
				    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限出售这个地产");
				    switch(EstateData[eid][eOwnerType])
				    {
				        case ESTATE_OWNER_PLAYER:
				        {
							format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n房地产公司出价为$%d,卖出后这笔钱会汇入你的银行帐户\n"#TEXT_RED"出售前请先确认已领出所有保存在地产内的物品", EstateData[eid][eName], EstateData[eid][ePrice]/2);
							ShowPlayerDialog(playerid, DIALOG_PLAYER_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "卖出地产", string, "确认", "取消");
						}
						case ESTATE_OWNER_COMPANY:
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n卖出获得的金额$%d将会存入企业资金\n"#TEXT_RED"出售前请先确认已领出所有保存在地产内的物品", EstateData[eid][eName], EstateData[eid][ePrice]/2);
							ShowPlayerDialog(playerid, DIALOG_COMPANY_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "出售地产", string, "确认", "取消");
						}
						case ESTATE_OWNER_GANG:
						{
						    format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n卖出获得的金额$%d将会存入帮会资金\n"#TEXT_RED"出售前请先确认已领出所有保存在地产内的物品", EstateData[eid][eName], EstateData[eid][ePrice]/2);
							ShowPlayerDialog(playerid, DIALOG_GANG_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "出售地产", string, "确认", "取消");
						}
					}
					SetGVarInt("DDecideID", eid, playerid);
                }
                case ES_UPGRADE:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"选择装潢项目\n修改内装\n安装设备");
					ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE, DIALOG_STYLE_TABLIST_HEADERS, "装潢地产", string, "确认", "取消");
				}
				case ES_FACTORY:
				{
				    //if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整工厂项目");
				    if(EstateData[eid][eType] != ESTATE_FACTORY) return SendClientMessage(playerid, COLOR_WHITE, "这个地产不是工厂");
				    new facstr[256], ftype, header[24], l, mat, prod, mats, prods;
				    facstr[0] = EOS;
				    l = 0,
				    ftype = EstateData[eid][eType2],
				    mat = FactoryList[ftype][efMat],
				    prod = FactoryList[ftype][efProd],
				    mats = EstateHaveItem(eid, 1, mat),
				    prods = EstateHaveItem(eid, 1, prod);

					if(ftype != FACTORY_NONE)
					{
					    format(facstr, sizeof(facstr), "%s"#TEXT_YELLOW"装载原料(%s)\n", facstr, ItemsList_USE[mat][iuName]);
						SetGVarInt("DListID", FS_LOAD, l*1000+playerid);
						l++;

						if(prods > 0)
						{
							format(facstr, sizeof(facstr), "%s"#TEXT_FADEGREEN"卸载货物[总价值:$%d]\n", facstr, prods*ItemsList_USE[prod][iuPrice]);
							SetGVarInt("DListID", FS_UNLOAD, l*1000+playerid);
							l++;
						}

						if(EstateData[eid][eSwitch] == 1) format(facstr, sizeof(facstr), "%s"#TEXT_FADERED"停止运作"#TEXT_WHITE"(目前离生产完成还需%d分钟)\n", facstr, EstateData[eid][eProdTime]);
						else format(facstr, sizeof(facstr), "%s"#TEXT_FADEBLUE"开始运作\n", facstr);
						SetGVarInt("DListID", FS_SWITCH, l*1000+playerid);
						l++;

						format(facstr, sizeof(facstr), "%s"#TEXT_WHITE"工厂升级\n", facstr);
						SetGVarInt("DListID", FS_UPGRADE, l*1000+playerid);
						l++;
					}
				    format(facstr, sizeof(facstr), "%s"#TEXT_WHITE"设定生产种类\n", facstr);
					SetGVarInt("DListID", FS_TYPE, l*1000+playerid);
					l++;

                    format(facstr, sizeof(facstr), ""#TEXT_FADEGREEN"产品数量: %d "#TEXT_YELLOW"原料数量: %d\n%s", prods, mats, facstr);
                    format(header, sizeof(header), ""#TEXT_FADEYELLOW"%s", FactoryList[ftype][efName]);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY, DIALOG_STYLE_TABLIST_HEADERS, header, facstr, "确认", "取消");
				}
				case ES_STORE:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出\n"#TEXT_FADEGREEN"金库", GetEstateUsedSpace(eid), GetEstateSpace(eid));
					ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"地产储物空间", string, "选择", "关闭");
					SetGVarInt("DDecideEID", eid, playerid);
				}
				case ES_LOCK:
				{
				    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限设定这个地产");
				    if(EstateData[eid][eLocked] == 1)
				    {
						format(string, sizeof(string), ""#TEXT_WHITE"地产已"#TEXT_FADEGREEN"解锁");
						EstateData[eid][eLocked] = 0;
					}
					else
				    {
						format(string, sizeof(string), ""#TEXT_WHITE"地产已"#TEXT_RED"上锁");
						EstateData[eid][eLocked] = 1;
					}
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"地产设定", string, "确认", "");
				}
				case ES_RENT:
				{
				    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限设定这个地产");
				    if(EstateData[eid][eRentable] == 1)
				    {
						ShowPlayerDialog(playerid, DIALOG_ESTATE_RENT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"地产设定", ""#TEXT_WHITE"确认要取消开放租屋吗?\n确认的话所有目前住户都将被请出屋内", "确认", "取消");
					}
					else
				    {
						ShowPlayerDialog(playerid, DIALOG_ESTATE_RENT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"租金设定", ""#TEXT_WHITE"请输入每小时租金\n收取的租金会自动由租屋人存款存至地产金库", "确认", "取消");
					}
				}
				case ES_NAME:
                {
					ShowPlayerDialog(playerid, DIALOG_ESTATE_NAME, DIALOG_STYLE_INPUT, "地产改名", ""#TEXT_WHITE"请输入要更改的名称", "确认更改", "取消");
				}
				case ES_UNRENT:
				{
				    if(PlayerData[playerid][pRentID] != EstateData[eid][eID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经没有在租这个地产了");
				    SetPlayerPos_Fix(playerid, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
					SetPlayerFacingAngle(playerid, EstateData[eid][eA]);
					SetPlayerVirtualWorld(playerid, 0);
					SetPlayerInterior(playerid, 0);
					PlayerExitTP(playerid);
					PlayerData[playerid][pRentID] = -1;
					PlayerData[playerid][pRenting] = 0;
					format(string, sizeof(string), "** 你退租了%s,你不再能使用这个地产以及将这里设为重生点了", EstateData[eid][eName]);
					SendClientMessage(playerid, COLOR_WHITE, string);
                }
                case ES_SETPASS:
                {
                    if(EstateData[eid][ePassOn] == 1)
                    {
                        EstateData[eid][ePassOn] = 0;
                        SendClientMessage(playerid, COLOR_WHITE, "** 你取消了密码锁的设定");
                    }
					else ShowPlayerDialog(playerid, DIALOG_ESTATE_SETPASS, DIALOG_STYLE_INPUT, "设定密码锁", ""#TEXT_WHITE"请输入要地产的密码锁\n只有知道密码的访客才能进入此地产", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_SETPASS:
		{
		    new eid = GetGVarInt("IEEEstateID", playerid);
		    if(!response || strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    mysql_format(DEFAULT_SESSION, EstateData[eid][ePass], 32, "0000");
			    EstateData[eid][ePassOn] = 1;
			    format(string, sizeof(string), "** 你的密码被设为预设密码 %s ", EstateData[eid][ePass]);
				SendClientMessage(playerid, COLOR_YELLOW, string);
				return 1;
			}
			mysql_format(DEFAULT_SESSION, EstateData[eid][ePass], 32, "%s", inputtext);
			EstateData[eid][ePassOn] = 1;
			format(string, sizeof(string), ""#TEXT_WHITE"地产的密码已设为 %s ", EstateData[eid][ePass]);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"地产密码锁", string, "确定", "");
			return 1;
		}
		case DIALOG_ESTATE_NAME:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid);
			if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限为这个地产改名");
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_ESTATE_NAME, DIALOG_STYLE_INPUT, "地产改名", ""#TEXT_WHITE"你输入的新名称为空白,或含有无法使用的字元\n请重新输入", "确认更改", "取消");
			}
			Log(estatelog, INFO, "s(%d)将地产%s(%d)改名为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], inputtext);
			mysql_format(DEFAULT_SESSION, EstateData[eid][eName], 32, "%s", inputtext);
			format(string, sizeof(string), "** 已将此地产名称更改为 %s", inputtext);
            SendClientMessage(playerid, COLOR_WHITE, string);
            UpdateEstate(eid);
		    return 1;
		}
		case DIALOG_ESTATE_RENT:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid);
            if(EstateData[eid][eRent] == 1)
            {
                ForEachPlayer(i)
				{
				    if(PlayerData[i][pRenting] == 0 || i == playerid) continue;
				    if(PlayerData[i][pRentID] == EstateData[eid][eID])
				    {
					    if(GetPlayerVirtualWorld(i) == EstateData[eid][eID])
					    {
							SetPlayerPos_Fix(i, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
							SetPlayerFacingAngle(i, EstateData[eid][eA]);
							SetPlayerVirtualWorld(i, 0);
							SetPlayerInterior(i, 0);
							PlayerExitTP(i);
							format(string, sizeof(string), "** %s 取消了 %s 租屋的开放,你被请出地产外了", EstateData[eid][eName], PlayerData[playerid][pName]);
							SendClientMessage(i, COLOR_WHITE, string);
						}
						else
						{
						    format(string, sizeof(string), "** %s 取消了 %s 租屋的开放,你无法再进入该地产了", EstateData[eid][eName], PlayerData[playerid][pName]);
							SendClientMessage(i, COLOR_WHITE, string);
						}
						PlayerData[i][pRenting] = 0;
						PlayerData[i][pRentID] = -1;
					}
				}
				EstateData[eid][eRentable] = 0;
				format(string, sizeof(string), "** 已取消了 %s 租屋的开放,所有房客已被赶出去了", EstateData[eid][eName]);
				SendClientMessage(playerid, COLOR_YELLOW, string);
            }
            else
            {
                new rent = strval(inputtext);
                if(rent < 0) return SendClientMessage(playerid, COLOR_WHITE, "租金不得小于0");
                if(rent > 1000) return SendClientMessage(playerid, COLOR_WHITE, "租金不得大于1000");
                EstateData[eid][eRentable] = 1;
                EstateData[eid][eRent] = rent;
				format(string, sizeof(string), "** %s 的租屋已开放,你将租金设置为每小时 $%d", EstateData[eid][eName], rent);
				SendClientMessage(playerid, COLOR_YELLOW, string);
            }
            return 1;
        }
		case DIALOG_ESTATE_FACTORY:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                ftype = EstateData[eid][eType2],
                matid = FactoryList[ftype][efMat],
                prodid = FactoryList[ftype][efProd],
                option = GetGVarInt("DListID", listitem*1000+playerid);
            //if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限管理工厂项目");
            switch(option)
            {
                case FS_LOAD:
                {
                    if(ftype == FACTORY_NONE) return SendClientMessage(playerid, COLOR_WHITE, "工厂并未准备完成,请先设定工厂生产种类");
                    if(!PlayerHaveItem(playerid, ITEM_USE, matid)) return SendClientMessage(playerid, COLOR_WHITE, "你身上没有任何原料可以装载");
                    format(string, sizeof(string), ""#TEXT_WHITE"请输入要装载"#TEXT_FADEBLUE"%s"#TEXT_WHITE"的数量\n"#TEXT_YELLOW"每箱需要%d的储物空间,目前剩余空间: %d",
					ItemsList_USE[matid][iuName], ItemsList_USE[matid][iuSpace], GetEstateRemainingSpace(eid));
                    ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_LOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"装载原料", string, "确认", "取消");
                }
                case FS_UNLOAD:
                {
                    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限管理工厂项目");
                    if(!EstateHaveItem(eid, ITEM_USE, prodid)) return SendClientMessage(playerid, COLOR_WHITE, "工厂还没有制成任何货物");
                    format(string, sizeof(string), ""#TEXT_WHITE"请输入要卸载"#TEXT_FADEBLUE"%s"#TEXT_WHITE"的数量\n目前有%d箱,每箱价值$%d\n"#TEXT_FADEBLUE"每箱需要%d的背包空间,目前你的背包空间: %d",
					ItemsList_USE[prodid][iuName], EstateHaveItem(eid, ITEM_USE, prodid), ItemsList_USE[prodid][iuPrice], ItemsList_USE[prodid][iuSpace], GetPlayerRemainingSpace(playerid));
                    ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_UNLOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"卸载货物", string, "确认", "取消");
                }
                case FS_TYPE:
                {
                    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限管理工厂项目");
                    if(EstateData[eid][eSwitch] == 1) return SendClientMessage(playerid, COLOR_WHITE, "工厂必须先停止运作才能更改种类");
                    new facstr[512], i, j, l;
                    for(i = l = 0, j = sizeof(FactoryList); i < j; i++)
                    {
                        if(i != ftype && i != 0)
                        {
							format(facstr, sizeof(facstr), "%s"#TEXT_WHITE"%s\t%s\t%s\t$%d\n", facstr, FactoryList[i][efName], ItemsList_USE[FactoryList[i][efMat]][iuName], ItemsList_USE[FactoryList[i][efProd]][iuName], FactoryList[i][efPrice]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
                    format(facstr, sizeof(facstr), ""#TEXT_WHITE"名称\t"#TEXT_YELLOW"消耗原料\t"#TEXT_FADEGREEN"产品\t"#TEXT_FADERED"改建价格\n%s", facstr);
                    ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_TYPE1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"请选择欲安装的生产种类", facstr, "选择", "取消");
                }
                case FS_SWITCH:
                {
                    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限管理工厂项目");
                    if(ftype == FACTORY_NONE) return SendClientMessage(playerid, COLOR_WHITE, "工厂并未准备完成,请先设定工厂生产种类");
					if(EstateData[eid][eSwitch] == 0)
					{
					    if(!EstateHaveItem(eid, ITEM_USE, matid)) return SendClientMessage(playerid, COLOR_WHITE, "工厂还没有任何原料可以生产,无法开工");
						ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_SWITCH, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工厂开工", ""#TEXT_WHITE"工厂目前处于停工状态\n确认开始运作?", "确认", "取消");
					}
					else ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_SWITCH, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工厂停工", ""#TEXT_WHITE"工厂目前处于运作状态\n所有生产阶段都会中断暂停\n确认停工?", "确认", "取消");
                }
				case FS_UPGRADE:
				{
				    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限管理工厂项目");
				    ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE_EQ, DIALOG_STYLE_TABLIST_HEADERS,
					""#TEXT_WHITE"工厂升级", "升级项目\t价格\t说明\n设备升级\t$200,000\t使运转所需电费减半\n空间升级\t$500,000\t使储物空间增为两倍\n产能升级\t$300,000\t使生产所需时间减半", "选择", "取消");
				}
            }
            return 1;
        }
        case DIALOG_ESTATE_FACTORY_LOAD:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                ftype = EstateData[eid][eType2],
                matid = FactoryList[ftype][efMat],
				amount = strval(inputtext);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限调整工厂项目");
            if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_LOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"装载原料", ""#TEXT_WHITE"装载数量不得小于1,请重新输入", "确认", "取消");
            if(PlayerHaveItem(playerid, ITEM_USE, matid) < amount) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_LOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"装载原料", ""#TEXT_WHITE"你身上没有这么多原料可以装载,请重新输入", "确认", "取消");
            if(GetEstateRemainingSpace(eid) < ItemsList_USE[matid][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_LOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"装载原料", ""#TEXT_WHITE"工厂的空间装不下这么多原料,请重新输入", "确认", "取消");
            GivePlayerItem(playerid, ITEM_USE, matid, -amount);
            GiveEstateItem(eid, -1, ITEM_USE, matid, amount);
            if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
            {
                format(string, sizeof(string), "<<企业>> %s 在企业工厂 %s 装载了 %d 个 %s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[matid][iuName]);
				SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
			}
			else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
			{
			    format(string, sizeof(string), "<<帮会>> %s 在帮会工厂 %s 装载了 %d 个 %s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[matid][iuName]);
				SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
			}
			Log(estatelog, INFO, "s(%d)在工厂地产%s(%d)装载了%d个%s", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount, ItemsList_USE[matid][iuName]);
			if(EstateData[eid][eSwitch] == 0) ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_SWITCH, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工厂开工", ""#TEXT_WHITE"原料装载完成\n工厂目前处于停工状态\n要立刻开始生产吗?", "确认", "取消");
			return 1;
		}
		case DIALOG_ESTATE_FACTORY_UNLOAD:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                ftype = EstateData[eid][eType2],
                prodid = FactoryList[ftype][efProd],
				amount = strval(inputtext);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限调整工厂项目");
            if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_UNLOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"卸载货物", ""#TEXT_WHITE"卸载数量不得小于1,请重新输入", "确认", "取消");
            if(EstateHaveItem(eid, ITEM_USE, prodid) < amount) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_UNLOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"卸载货物", ""#TEXT_WHITE"地产没有这么多货物可以卸载,请重新输入", "确认", "取消");
            if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[prodid][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_UNLOAD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"卸载货物", ""#TEXT_WHITE"你的背包装不下这么多货物,请重新输入", "确认", "取消");
            GivePlayerItem(playerid, ITEM_USE, prodid, amount);
            GiveEstateItem(eid, -1, ITEM_USE, prodid, -amount);
            if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
            {
                format(string, sizeof(string), "<<企业>> %s 从企业工厂 %s 卸载了 %d 个 %s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[prodid][iuName]);
				SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
			}
			else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
			{
			    format(string, sizeof(string), "<<帮会>> %s 将帮会工厂 %s 卸载了 %d 个 %s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[prodid][iuName]);
				SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
			}
			Log(estatelog, INFO, "s(%d)在工厂地产%s(%d)卸载了%d个%s", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount, ItemsList_USE[prodid][iuName]);
			return 1;
		}
		case DIALOG_ESTATE_FACTORY_SWITCH:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限调整工厂项目");
            if(EstateData[eid][eType2] == FACTORY_NONE) return SendClientMessage(playerid, COLOR_WHITE, "工厂并未准备完成,请先设定工厂生产种类");
			if(EstateData[eid][eSwitch] == 0)
			{
				EstateData[eid][eSwitch] = 1;
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工厂开工", ""#TEXT_WHITE"工厂的生产线已经开始运作\n接下来会随时间消耗原料生产货物\n当原料用完时产线将会自动停工", "确认", "");
				if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
	            {
	                format(string, sizeof(string), "<<企业>> %s 开启了企业工厂 %s 产线的运作", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
				}
				else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
				{
				    format(string, sizeof(string), "<<帮会>> %s 开启了帮会工厂 %s 产线的运作", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
				}
				Log(estatelog, INFO, "s(%d)开启了工厂地产%s(%d)产线的运作", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID]);
			}
			else
			{
				EstateData[eid][eSwitch] = 0;
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"工厂开工", ""#TEXT_WHITE"工厂的生产线已经停止运作\n生产的进度将会保留", "确认", "");
				if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
	            {
	                format(string, sizeof(string), "<<企业>> %s 停止了企业工厂 %s 产线的运作", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
				}
				else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
				{
				    format(string, sizeof(string), "<<帮会>> %s 停止了帮会工厂 %s 产线的运作", PlayerData[playerid][pName], EstateData[eid][eName]);
					SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
				}
				Log(estatelog, INFO, "s(%d)停止了工厂地产%s(%d)产线的运作", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID]);
			}
			return 1;
		}
		case DIALOG_ESTATE_FACTORY_TYPE1:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                chosed = GetGVarInt("DListID", listitem*1000+playerid);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限调整工厂项目");
            if(EstateData[eid][eSwitch] == 1) return SendClientMessage(playerid, COLOR_WHITE, "工厂必须先停止运作才能更改种类");
            if(GetPlayerMoney(playerid) < FactoryList[chosed][efPrice]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有钱支付改建金额");

            if(EstateData[eid][eProdTime] > 0)
            {
                format(string, sizeof(string), ""#TEXT_YELLOW"这个工厂目前还有在生产中的货物\n如果现在改建的话将会遗失目前的生产进度\n"#TEXT_WHITE"确认要花费 $%d 将 %s 的生产类型改建为 %s吗?", FactoryList[chosed][efPrice], EstateData[eid][eName], FactoryList[chosed][efName]);
            }
            else
            {
                format(string, sizeof(string), ""#TEXT_WHITE"确认要花费 $%d 将 %s 的生产类型改建为 %s吗?", FactoryList[chosed][efPrice], EstateData[eid][eName], FactoryList[chosed][efName]);
            }
           	ShowPlayerDialog(playerid, DIALOG_ESTATE_FACTORY_TYPE2, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"改建工厂", string, "确认", "");
           	SetGVarInt("DDecideID", chosed, playerid);
           	return 1;
        }
        case DIALOG_ESTATE_FACTORY_TYPE2:
		{
		    if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                chosed = GetGVarInt("DDecideID", playerid);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你没有权限调整工厂项目");
            if(EstateData[eid][eSwitch] == 1) return SendClientMessage(playerid, COLOR_WHITE, "工厂必须先停止运作才能更改种类");
            if(GetPlayerMoney(playerid) < FactoryList[chosed][efPrice]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有钱支付改建金额");

			ForEachPlayer(i)
			{
			    if(GetGVarInt("EMEstate", i) == EstateData[eid][eID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用这个地产的监视器,暂时无法改建");
			    if(GetPlayerVirtualWorld(i) == EstateData[eid][eID])
			    {
					SetPlayerPos_Fix(i, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
					SetPlayerFacingAngle(i, EstateData[eid][eA]);
					SetPlayerVirtualWorld(i, 0);
					SetPlayerInterior(i, 0);
					PlayerExitTP(i);
					format(string, sizeof(string), "** %s 改建了这个工厂的产线,请稍待改建完成再进入", PlayerData[playerid][pName]);
					SendClientMessage(i, COLOR_LIGHTORANGE, string);
				}
			}
			GiveMoney(playerid, -FactoryList[chosed][efPrice]);
			Log(moneylog, INFO, "%s(%d)花费了$%d改建工厂%s(%d)为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], FactoryList[chosed][efPrice], EstateData[eid][eName], EstateData[eid][eID], FactoryList[chosed][efName]);
			if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
            {
                format(string, sizeof(string), "<<企业>> %s 将企业工厂 %s 的生产类型改建为 %s", PlayerData[playerid][pName], EstateData[eid][eName], FactoryList[chosed][efName]);
				SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
			}
			else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
			{
			    format(string, sizeof(string), "<<帮会>> %s 将帮会工厂 %s 的生产类型改建为 %s", PlayerData[playerid][pName], EstateData[eid][eName], FactoryList[chosed][efName]);
				SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
			}
			Log(estatelog, INFO, "s(%d)将工厂地产%s(%d)的生产类型改建为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], FactoryList[chosed][efName]);
            format(string, sizeof(string), ""#TEXT_WHITE"你花费了 $%d 将 %s 的生产类型改建为 %s\n改建作业将在1分钟左右完成", FactoryList[chosed][efPrice], EstateData[eid][eName], FactoryList[chosed][efName]);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"改建中", string, "确认", "");
            EstateData[eid][eType2] = chosed;
            EstateData[eid][eProdTime] = 0;

			SetGVarInt("EUpgrading", 1, eid);
			SetTimerEx("EstateUpgraded", 60000, 0, "i", eid);
			return 1;
		}
		case DIALOG_ESTATE_UPGRADE:
        {
            if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid);
            if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有权限设置这个地产");
			switch(listitem)
			{
			    case 0:
			    {
			        new i, j, l, list[512];
			        l = 0;
			        list[0] = EOS;
			        switch(EstateData[eid][eType])
			        {
			            case ESTATE_HOUSE:
			            {
			        		for(i = 0, j = sizeof(EstateStyle_House); i < j; i++)
			        		{
			        		    if(EstateStyle_House[i][esLevel] == 0 || i == EstateData[eid][eStyle]) continue;
                                format(list, sizeof(list), "%s%s\t%d\t$%d\n", list, EstateStyle_House[i][esName], EstateStyle_House[i][esLevel], EstateStyle_House[i][esPrice]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
			        		}
			        	}
			        	case ESTATE_OFFICE:
			        	{
			        		for(i = 0, j = sizeof(EstateStyle_Office); i < j; i++)
			        		{
			        		    if(EstateStyle_Office[i][esLevel] == 0 || i == EstateData[eid][eStyle]) continue;
                                format(list, sizeof(list), "%s%s\t%d\t$%d\n", list, EstateStyle_Office[i][esName], EstateStyle_Office[i][esLevel], EstateStyle_Office[i][esPrice]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
			        		}
			        	}
						case ESTATE_CLUBHOUSE:
						{
			        		for(i = 0, j = sizeof(EstateStyle_Clubhouse); i < j; i++)
			        		{
			        		    if(EstateStyle_Clubhouse[i][esLevel] == 0 || i == EstateData[eid][eStyle]) continue;
                                format(list, sizeof(list), "%s%s\t%d\t$%d\n", list, EstateStyle_Clubhouse[i][esName], EstateStyle_Clubhouse[i][esLevel], EstateStyle_Clubhouse[i][esPrice]);
								SetGVarInt("DListID", i, l*1000+playerid);
								l++;
			        		}
			        	}
						default: return SendClientMessage(playerid, COLOR_WHITE, "这个地产无法修改内装");
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"修改内装", ""#TEXT_WHITE"目前没有适合你的地产的内装", "确定", "");}
					format(list, sizeof(list), "内装名称\t内装等级\t装潢底价\n%s", list);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE_INT1, DIALOG_STYLE_TABLIST_HEADERS, "修改内装", list, "选择", "取消");
				}
				case 1:
				{
				    switch(EstateData[eid][eType])
			        {
			            case ESTATE_HANGAR: ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE_EQ, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"安装设备", "安装项目\t价格\t说明\n载具喷漆设备\t$250,000\t安装后可以在机库内免费更换已储存载具的颜色", "选择", "取消");
			            case ESTATE_FACTORY: ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE_EQ, DIALOG_STYLE_TABLIST_HEADERS,
						""#TEXT_WHITE"安装设备", "安装项目\t价格\t说明\n省电设备\t$200,000\t使运转所需电费减半\n储物扩充\t$500,000\t使储物空间增为两倍\n高效设备\t$300,000\t使生产所需时间减半", "选择", "取消");
			        	default: ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安装设备", ""#TEXT_WHITE"目前没有适合你的地产的设备", "确定", "");
			        }
			    }
			}
			return 1;
		}
		case DIALOG_ESTATE_UPGRADE_EQ:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid);
			switch(EstateData[eid][eType])
			{
				case ESTATE_HANGAR:
				{
					switch(listitem)
					{
					    case 0:
					    {
					        if(EstateData[eid][eUpgrade1] == 1) return SendClientMessage(playerid, COLOR_WHITE, "你的地产已经安装这个项目了");
					        if(PlayerData[playerid][pCash] < 250000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上现金不足");
					        GiveMoney(playerid, -250000);
					        Log(moneylog, INFO, "%s(%d)花费了$%d为地产%s(%d)安装载具喷漆设备", PlayerData[playerid][pName], PlayerData[playerid][pID], 250000, EstateData[eid][eName], EstateData[eid][eID]);
					        Log(estatelog, INFO, "s(%d)花费了$%d为地产%s(%d)安装载具喷漆设备", PlayerData[playerid][pName], PlayerData[playerid][pID], 250000, EstateData[eid][eName], EstateData[eid][eID]);
					        SendClientMessage(playerid, COLOR_WHITE, "** 安装载具喷漆设备完成,在提取载具后开启载具面板可以开始使用这个设备为载具修改颜色");
					        EstateData[eid][eUpgrade1] = 1;
					    }
					}
				}
				case ESTATE_FACTORY:
				{
					switch(listitem)
					{
					    case 0:
					    {
					        if(EstateData[eid][eUpgrade1] == 1) return SendClientMessage(playerid, COLOR_WHITE, "你的地产已经安装这个项目了");
					        if(PlayerData[playerid][pCash] < 200000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上现金不足");
					        GiveMoney(playerid, -200000);
					        Log(moneylog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行设备升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 200000, EstateData[eid][eName], EstateData[eid][eID]);
					        Log(estatelog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行设备升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 200000, EstateData[eid][eName], EstateData[eid][eID]);
					        SendClientMessage(playerid, COLOR_WHITE, "** 进行设备升级完成,未来运转电费金额将会大幅减少");
					        EstateData[eid][eUpgrade1] = 1;
					    }
					    case 1:
					    {
					        if(EstateData[eid][eUpgrade2] == 1) return SendClientMessage(playerid, COLOR_WHITE, "你的地产已经安装这个项目了");
					        if(PlayerData[playerid][pCash] < 500000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上现金不足");
					        GiveMoney(playerid, -500000);
					        Log(moneylog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行空间升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 500000, EstateData[eid][eName], EstateData[eid][eID]);
					        Log(estatelog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行空间升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 500000, EstateData[eid][eName], EstateData[eid][eID]);
					        SendClientMessage(playerid, COLOR_WHITE, "** 进行空间升级完成,储存货物的空间大幅提升了");
					        EstateData[eid][eUpgrade2] = 1;
					    }
					    case 2:
					    {
					        if(EstateData[eid][eUpgrade3] == 1) return SendClientMessage(playerid, COLOR_WHITE, "你的地产已经安装这个项目了");
					        if(PlayerData[playerid][pCash] < 300000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上现金不足");
					        GiveMoney(playerid, -300000);
					        Log(moneylog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行产能升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 300000, EstateData[eid][eName], EstateData[eid][eID]);
					        Log(estatelog, INFO, "%s(%d)花费了$%d为地产%s(%d)进行产能升级", PlayerData[playerid][pName], PlayerData[playerid][pID], 300000, EstateData[eid][eName], EstateData[eid][eID]);
					        SendClientMessage(playerid, COLOR_WHITE, "** 进行产能升级完成,从下一批货物开始,生产的时间将会大大减少");
					        EstateData[eid][eUpgrade3] = 1;
					    }
					}
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_UPGRADE_INT1:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid), estatestr[256],
				style = GetGVarInt("DListID", listitem*1000+playerid);
			switch(EstateData[eid][eType])
			{
				case ESTATE_HOUSE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s\n\n升级共需要支付现金:%d\n确认升级?", EstateStyle_House[style][esName], EstateStyle_House[style][esDes], EstateStyle_House[style][esPrice]);
				case ESTATE_OFFICE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s\n\n升级共需要支付现金:%d\n确认升级?", EstateStyle_Office[style][esName], EstateStyle_Office[style][esDes], EstateStyle_Office[style][esPrice]);
				case ESTATE_CLUBHOUSE: format(estatestr, sizeof(estatestr), ""#TEXT_YELLOWGREEN"%s\n"#TEXT_WHITE"%s\n\n升级共需要支付现金:%d\n确认升级?", EstateStyle_Clubhouse[style][esName], EstateStyle_Clubhouse[style][esDes], EstateStyle_Clubhouse[style][esPrice]);
			}
			ShowPlayerDialog(playerid, DIALOG_ESTATE_UPGRADE_INT2, DIALOG_STYLE_MSGBOX, ""#TEXT_FADEGREEN"内装简介", estatestr, "确认升级", "取消");
			SetGVarInt("DDecideID", style, playerid);
			return 1;
		}
		case DIALOG_ESTATE_UPGRADE_INT2:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid),
				style = GetGVarInt("DDecideID", playerid), price, usedticket = 0;
			if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有权限设置这个地产");
			switch(EstateData[eid][eType])
			{
				case ESTATE_HOUSE: price = EstateStyle_House[style][esPrice];
				case ESTATE_OFFICE: price = EstateStyle_Office[style][esPrice];
				case ESTATE_CLUBHOUSE: price = EstateStyle_Clubhouse[style][esPrice];
			}
			if(PlayerHaveItem(playerid, ITEM_USE, 191) > 0)
			{
			    price = 0;
			    usedticket = 191;
			}
			if(PlayerData[playerid][pCash] < price) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的现金不够你安装这个内装");

			ForEachPlayer(i)
			{
			    if(GetGVarInt("EMEstate", i) == EstateData[eid][eID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用这个地产的监视器,暂时无法修改内装");
			    if(GetPlayerVirtualWorld(i) == EstateData[eid][eID])
			    {
					SetPlayerPos_Fix(i, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
					SetPlayerFacingAngle(i, EstateData[eid][eA]);
					SetPlayerVirtualWorld(i, 0);
					SetPlayerInterior(i, 0);
					PlayerExitTP(i);
					format(string, sizeof(string), "** %s 修改了这个地产的内装,请稍待装潢完成再进入", PlayerData[playerid][pName]);
					SendClientMessage(i, COLOR_LIGHTORANGE, string);
				}
			}
			GiveMoney(playerid, -price);
			Log(moneylog, INFO, "%s(%d)花费了$%d为地产%s(%d)修改内装", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
			Log(estatelog, INFO, "%s(%d)花费了$%d为地产%s(%d)修改内装", PlayerData[playerid][pName], PlayerData[playerid][pID], price, EstateData[eid][eName], EstateData[eid][eID]);
			EstateData[eid][eStyle] = style;

			UpdateEstate(eid);
			SetGVarInt("EUpgrading", 1, eid);
			SetTimerEx("EstateUpgraded", 60000, 0, "i", eid);

			if(usedticket > 0)
			{
			    format(string, sizeof(string), "** "#TEXT_WHITE"你使用了"#TEXT_YELLOW"%s"#TEXT_WHITE"修改了这个地产的内装\n装潢作业将在1分钟左右完成", ItemsList_USE[usedticket][iuName]);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_FADEGREEN"装潢中", string, "确认", "");
				GivePlayerItem(playerid, ITEM_USE, usedticket, -1);
			}
			else
			{
				format(string, sizeof(string), "** "#TEXT_WHITE"你花费了"#TEXT_FADEGREEN"$%d"#TEXT_WHITE"修改了这个地产的内装\n装潢作业将在1分钟左右完成", price);
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_FADEGREEN"装潢中", string, "确认", "");
			}
			new savefur = SaveEstateFurniture(eid);
			if(savefur > 0)
			{
				format(string, sizeof(string), "** 已将地产内布置的%d个物件收入地产空间内存放", savefur);
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
        case DIALOG_ESTATE_GARAGE:
        {
            if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(VehData[chosed][vStatus] != VEH_STORED || VehData[chosed][vStoredEstate] != EstateData[eid][eID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不存在这个地产里面了");

			VehData[chosed][vStatus] = VEH_NORMAL;
			SetVehicleToRespawn(chosed);
			SetVehicleVirtualWorld(chosed, 0);
			ParkVehicle(chosed);

			format(string, sizeof(string), ""#TEXT_WHITE"你已将储存在地产%s里的载具%s取出来了", EstateData[eid][eName], GetVehicleName(VehData[chosed][vModel]));
			SendClientMessage(playerid, COLOR_WHITE, string);
			Log(vehlog, INFO, "%s(%d)将储存在地产%s(%d)的载具%s(%d)取出来了", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID]);
			return 1;
		}
		case DIALOG_ESTATE_HANGAR:
        {
            if (!response) return 1;
            new eid = GetGVarInt("IEEEstateID", playerid),
                style = EstateData[eid][eStyle],
				worldid = EstateData[eid][eID],
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(VehData[chosed][vStatus] != VEH_STORED || VehData[chosed][vStoredEstate] != EstateData[eid][eID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不存在这个地产里面了");
			for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
		    {
		        if(VehData[i][vStatus] != VEH_STORED) continue;
		        if(GetGVarInt("VOutEID", i) == eid && i != chosed)
		        {
		            SetVehicleToRespawn(i);
		        }
			}
			SetGVarInt("VOutEstate", 1, chosed);
			SetGVarInt("VOutEID", eid, chosed);
			SetVehicleVirtualWorld(chosed, worldid);
			switch(style)
			{
			    case 1:
			    {
					SetVehiclePos(chosed, 3942.5334, 3998.0432, 2987.7944);
					LinkVehicleToInterior(chosed, EstateStyle_Hangar[1][esInt]);
					PutPlayerInVehicle_Fix(playerid, chosed, 0);
					SetVehicleZAngle(chosed, 180.0);
				}
			}
			format(string, sizeof(string), "** "#TEXT_FADEGREEN"你已将储存在地产"#TEXT_FADEBLUE" %s "#TEXT_FADEGREEN"里的载具"#TEXT_YELLOW" %s "#TEXT_FADEGREEN"取出来了", EstateData[eid][eName], GetVehicleName(VehData[chosed][vModel]));
			SendClientMessage(playerid, COLOR_WHITE, string);
			Log(vehlog, INFO, "%s(%d)将储存在地产%s(%d)的载具%s(%d)取出来了", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID]);
			return 1;
		}
		case DIALOG_ESTATE_VISITOR:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("IEEEstateID", playerid),
				visitor = GetGVarInt("DListID", listitem*1000+playerid);
			if(GetGVarInt("RingEstate", visitor) == eid) DeleteGVar("RingEstate", visitor);
			if(GetGVarInt("Spawned", visitor) != 1) return SendClientMessage(playerid, COLOR_WHITE, "该名访客已经离开了");
			if(GetPlayerDistanceFromPointEx(visitor, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]) > 20.0) return SendClientMessage(playerid, COLOR_WHITE, "该名访客已经离开了");
			PlayerEnterEstate(visitor, eid);
			format(string, sizeof(string), "** "#TEXT_GREEN"%s"#TEXT_WHITE"的屋主让你进来了这里", EstateData[eid][eName]);
			SendClientMessage(visitor, COLOR_WHITE, string);
			format(string, sizeof(string), "** 你让 %s 进入了屋内", PlayerData[visitor][pName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_CITYHALL_COMPANY:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
				{
				    new i, j, k, ComList[512];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_COMPANIES; i < j; i++)
					{
					    if(CompanyData[i][comCreated] == 0){continue;}
						format(ComList, sizeof(ComList), "%s{%06x}%s\t%s\n", ComList, CompanyData[i][comColor] >>> 8, CompanyData[i][comName], GetPlayerSqlName(CompanyData[i][comCEO]));
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "企业列表", ""#TEXT_WHITE"目前没有任何企业", "确认", "");}
					format(ComList, sizeof(ComList), "企业名称\tCEO\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_LIST, DIALOG_STYLE_TABLIST_HEADERS, "企业列表", ComList, "查看", "关闭");
				}
				case 1:
				{
				    if(PlayerData[playerid][pCompany] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经在一个企业里面了");
					ShowPlayerDialog(playerid, DIALOG_COMPANY_CREATE, DIALOG_STYLE_MSGBOX, "创立企业", ""#TEXT_WHITE"创立企业需要支付$110,000的现金\n其中有$10,000用作创立手续费\n其余$100,000则成为企业的资金\n\n确认要支付$110,000创立企业吗?", "确认", "关闭");
				}
			}
		}
		case DIALOG_COMPANY_LIST:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				infostr[512], members = GetCompanyMembers(chosed);
		    format(infostr, sizeof(infostr), "{%06x}%s\t \nCEO\t"#TEXT_LIGHTBLUE"%s\n成员数\t"#TEXT_LIGHTGREEN"%d/%d\n地产数量:\t%d\n旗下事业:\n",
			CompanyData[chosed][comColor] >>> 8, CompanyData[chosed][comName], GetPlayerSqlName(CompanyData[chosed][comCEO]), members, MAX_CMEMBERS, GetCompanyEstates(chosed));
		    if(CompanyData[chosed][comTaxi] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_YELLOW"计程车业\n", infostr);
		    if(CompanyData[chosed][comBus] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_BLUEGREEN"客运运输业\n", infostr);
		    if(CompanyData[chosed][comHeli] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_VIOLET"直升机运输业\n", infostr);
		    if(CompanyData[chosed][comAirline] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_SKYBLUE"航空业\n", infostr);
		    if(CompanyData[chosed][comBoat] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_LIGHTBLUE"海上运输业\n", infostr);
		    if(CompanyData[chosed][comMedia] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_ORANGE"媒体业\n", infostr);
		    if(CompanyData[chosed][comAnimal] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_SANDYELLOW"畜牧业\n", infostr);
		    if(CompanyData[chosed][comTrade] == 1) format(infostr, sizeof(infostr), "%s"#TEXT_PINKRED"贸易业\n", infostr);
		    format(infostr, sizeof(infostr), "%s", infostr);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_LIST_INFO, DIALOG_STYLE_TABLIST_HEADERS, "企业资料", infostr, "申请加入", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_LIST_INFO:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(PlayerData[playerid][pCompany] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的企业了");
		    //if(CompanyData[chosed][comOpen] != 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前该企业不开放申请");
		    if(GetCompanyMembers(chosed) >= MAX_CMEMBERS) return SendClientMessage(playerid, COLOR_WHITE, "这间企业已经额满了");
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_APPLY, DIALOG_STYLE_INPUT, "申请加入", ""#TEXT_WHITE"请输入申请时要发送给该企业的消息", "确认", "关闭");
		    return 1;
		}
		case DIALOG_COMPANY_APPLY:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    AddCompanyMember(chosed, PlayerData[playerid][pID], inputtext, MEMBER_APPLYING);
		    format(string, sizeof(string), "** 已向企业 %s 发送申请,若申请通过你将会自动成为该企业成员", CompanyData[chosed][comName]);
		    SendClientMessage(playerid, COLOR_YELLOW, string);
		    format(string, sizeof(string), "<<企业>> 玩家 %s 向企业发送了加入申请", PlayerData[playerid][pName]);
		    SendCompanyMessage(CompanyData[chosed][comID], COLOR_BLUEGREEN, string);
		    return 1;
		}
		case DIALOG_COMPANY_CREATE:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pCompany] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的企业了");
		    if(PlayerData[playerid][pCash] < 110000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的钱不足无法成立企业");
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_CREATE_NAME, DIALOG_STYLE_INPUT, "创立企业", ""#TEXT_WHITE"请输入"#TEXT_LIGHTGREEN"企业名称", "下一步", "关闭");
		    return 1;
		}
		case DIALOG_COMPANY_CREATE_NAME:
		{
		    if (!response) return 1;
		    new colorstr[1024], i, j;
		    colorstr[0] = EOS;
		    if(PlayerData[playerid][pCompany] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的企业了");
		    if(PlayerData[playerid][pCash] < 110000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的钱不足无法成立企业");
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_CREATE_NAME, DIALOG_STYLE_INPUT, "创立企业", ""#TEXT_WHITE"你输入的名称为空白,或是含有无法使用的字元", "下一步", "关闭");
			}
			for(i = 0, j = MAX_COMPANIES; i < j ; i++)
    		{
    		    if(CompanyData[i][comCreated] == 0) continue;
	            if(strcmp(inputtext, CompanyData[i][comName]) == 0 && !isnull(CompanyData[i][comName]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_COMPANY_CREATE_NAME, DIALOG_STYLE_INPUT, "创立企业", ""#TEXT_WHITE"这个企业名称已经被使用了,请重新输入", "下一步", "关闭");
				}
			}
		    format(colorstr, sizeof(colorstr), ""#TEXT_WHITE"名称为%s,请选择企业颜色\n"#TEXT_DARKRED"深红\n"#TEXT_RED"红色\n"#TEXT_FADERED"浅红\n"#TEXT_VIOLET"淡紫\n"#TEXT_PINK"粉红\n"#TEXT_LIGHTRED"亮红\n"#TEXT_ORANGE"橘色\n", inputtext);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_LIGHTORANGE"亮橘\n"#TEXT_YELLOW"黄色\n"#TEXT_FADEYELLOW"浅黄\n"#TEXT_LIGHTYELLOW"亮黄\n"#TEXT_YELLOWGREEN"黄绿\n"#TEXT_DARKYELLOWGREEN"暗黄绿\n"#TEXT_LIGHTGREEN"亮绿\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEGREEN"浅绿\n"#TEXT_GREEN"绿色\n"#TEXT_DARKGREEN"暗绿\n"#TEXT_BLUEGREEN"蓝绿\n"#TEXT_LIGHTBLUE"亮蓝\n"#TEXT_FADEBLUE"浅蓝\n"#TEXT_SKYBLUE"天蓝\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_WATERBLUE"水蓝\n"#TEXT_BLUE"蓝色\n"#TEXT_PURPLE"紫色\n"#TEXT_LIGHTPURPLE"亮紫\n"#TEXT_PINKRED"桃红\n"#TEXT_BLOODRED"血红\n"#TEXT_DARKBROWN"暗棕\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEBROWN"淡棕\n"#TEXT_BROWN"棕色\n"#TEXT_SANDYELLOW"沙黄", colorstr);
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_CREATE_COLOR, DIALOG_STYLE_TABLIST_HEADERS, "创立企业", colorstr, "成立企业", "关闭");
		    SetGVarString("ComName", inputtext, playerid);
		    return 1;
		}
		case DIALOG_COMPANY_CREATE_COLOR:
		{
		    if (!response) return 1;
		    new cname[16], color;
			GetGVarString("ComName", cname, sizeof(cname), playerid);
		    if(PlayerData[playerid][pCompany] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的企业了");
		    if(PlayerData[playerid][pCash] < 110000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的钱不足无法成立企业");
		    switch(listitem)
		    {
		        case 0: color = PLAYER_DARKRED;
		        case 1: color = PLAYER_RED;
		        case 2: color = PLAYER_FADERED;
		        case 3: color = PLAYER_VIOLET;
		        case 4: color = PLAYER_PINK;
		        case 5: color = PLAYER_LIGHTRED;
		        case 6: color = PLAYER_ORANGE;
		        case 7: color = PLAYER_LIGHTORANGE;
		        case 8: color = PLAYER_YELLOW;
		        case 9: color = PLAYER_FADEYELLOW;
		        case 10: color = PLAYER_LIGHTYELLOW;
		        case 11: color = PLAYER_YELLOWGREEN;
		        case 12: color = PLAYER_DARKYELLOWGREEN;
		        case 13: color = PLAYER_LIGHTGREEN;
		        case 14: color = PLAYER_FADEGREEN;
		        case 15: color = PLAYER_GREEN;
		        case 16: color = PLAYER_DARKGREEN;
		        case 17: color = PLAYER_BLUEGREEN;
		        case 18: color = PLAYER_LIGHTBLUE;
		        case 19: color = PLAYER_FADEBLUE;
		        case 20: color = PLAYER_SKYBLUE;
		        case 21: color = PLAYER_WATERBLUE;
		        case 22: color = PLAYER_BLUE;
		        case 23: color = PLAYER_PURPLE;
		        case 24: color = PLAYER_LIGHTPURPLE;
		        case 25: color = PLAYER_PINKRED;
		        case 26: color = PLAYER_BLOODRED;
		        case 27: color = PLAYER_DARKBROWN;
		        case 28: color = PLAYER_FADEBROWN;
		        case 29: color = PLAYER_BROWN;
		        case 30: color = PLAYER_SANDYELLOW;
		    }
		    new comid = CreateCompany(PlayerData[playerid][pID], cname, color);
		    SetPlayerTimerEx(playerid, "SetPlayerCreateCompany", 1000, 0, "ii", playerid, comid);
		    return 1;
		}
		case DIALOG_COMPANY:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    switch(listitem)
		    {
		    	case 0:
				{
				    new i, j, k, ComList[512];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(CompanyMember[comid][i][cmJoined] != MEMBER_JOINED){continue;}
						format(ComList, sizeof(ComList), "%s%s\t%d\t%d\n", ComList, GetPlayerSqlName(CompanyMember[comid][i][cmMemberID]), CompanyMember[comid][i][cmRank], CompanyMember[comid][i][cmPoint]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "成员一览", ""#TEXT_WHITE"目前没有任何成员", "确认", "");}
					format(ComList, sizeof(ComList), "成员名称\t阶级\t点数\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, "成员一览", ComList, "查看", "关闭");
				}
				case 1:
				{
				    if(!IsCompanyHaveOffice(CompanyData[comid][comID])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 企业必须要先拥有一个办公室才能进行这个设定");
				    new check = 0, infostr[512];
				    infostr[0] = EOS;
				    if(CompanyData[comid][comTaxi] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_YELLOW"计程车业\n", infostr);
						SetGVarInt("DListID", BIS_TAXI, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comBus] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_BLUEGREEN"客运运输业\n", infostr);
						SetGVarInt("DListID", BIS_BUS, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comHeli] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_VIOLET"直升机运输业\n", infostr);
						SetGVarInt("DListID", BIS_HELI, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comAirline] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_SKYBLUE"航空业\n", infostr);
						SetGVarInt("DListID", BIS_AIRLINE, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comBoat] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_LIGHTBLUE"海上运输业\n", infostr);
						SetGVarInt("DListID", BIS_BOAT, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comMedia] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_ORANGE"媒体业\n", infostr);
						SetGVarInt("DListID", BIS_MEDIA, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comAnimal] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_SANDYELLOW"畜牧业\n", infostr);
						SetGVarInt("DListID", BIS_ANIMAL, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comTrade] == 1)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_PINKRED"贸易业\n", infostr);
						SetGVarInt("DListID", BIS_TRADE, check*1000+playerid);
						check++;
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "旗下事业", ""#TEXT_WHITE"目前没有任何事业", "确认", "");}
					format(infostr, sizeof(infostr), ""#TEXT_WHITE"选择以下事业进行相关管理\n%s", infostr);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS, DIALOG_STYLE_TABLIST_HEADERS, "旗下事业", infostr, "查看", "关闭");
				}
				case 2:
				{
				    new i, j, k, ComList[512], typestr[32], elecbill;
				    ComList[0] = EOS, typestr[0] = EOS;
				    for(i = k = 0, j = MAX_ESTATES; i < j; i++)
					{
					    if(EstateData[i][eOwnerType] != ESTATE_OWNER_COMPANY){continue;}
					    if(EstateData[i][eOwnerID] == CompanyData[comid][comID])
					    {
					        switch(EstateData[i][eType])
					        {
					            case ESTATE_OFFICE:
								{
									format(typestr, sizeof(typestr), "办公室");
									elecbill = PriceData[prcElec]*60;
								}
					            case ESTATE_WAREHOUSE:
								{
									format(typestr, sizeof(typestr), "仓库");
									elecbill = PriceData[prcElec]*60*2;
								}
					            case ESTATE_FACTORY:
								{
									format(typestr, sizeof(typestr), "工厂");
									if(EstateData[i][eSwitch] == 1) elecbill = PriceData[prcElec]*60*4;
									else elecbill = 0;
								}
					            case ESTATE_HANGAR:
								{
									format(typestr, sizeof(typestr), "机库");
									elecbill = PriceData[prcElec]*60*2;
								}
					            case ESTATE_BOATYARD:
								{
									format(typestr, sizeof(typestr), "船坞");
									elecbill = PriceData[prcElec]*60*2;
								}
					        }
							format(ComList, sizeof(ComList), "%s%s\t%s\t$%d\t$%d\n", ComList, EstateData[i][eName], typestr, EstateData[i][ePrice], elecbill);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "地产一览", ""#TEXT_WHITE"目前没有任何地产", "确认", "");}
					format(ComList, sizeof(ComList), "地产名称\t种类\t价值\t每4小时电费\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, "地产一览", ComList, "管理", "关闭");
				}
				case 3:
				{
				    new i, j, k, ComList[1024], stat[32];
				    ComList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_COMPANY){continue;}
					    if(VehData[i][vOwner] == CompanyData[comid][comID])
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(ComList, sizeof(ComList), "%s%s\t%s\t%s\n", ComList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(ComList, sizeof(ComList), "车名\t车牌\t状态\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "载具一览", ComList, "管理", "关闭");
				}
				case 4:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理你的企业\n审核申请(%d)\n邀请新成员\n更改公告\n阶级权限\n阶级名称\n开拓事业\n更改企业名称\n更改企业颜色\n管理资金\n转让CEO位置\n解散企业", GetCompanyApplyMembers(comid));
					ShowPlayerDialog(playerid, DIALOG_COMPANY_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理企业", string, "管理", "关闭");
				}
				case 5:
				{
				    if(CompanyData[comid][comCEO] == PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个企业的CEO,在你转让出这个位置以前无法离开这个企业");
					ShowPlayerDialog(playerid, DIALOG_COMPANY_QUIT, DIALOG_STYLE_MSGBOX, "辞职", ""#TEXT_WHITE"确认要离开这个企业?\n你在这里的所有资料都将会被删除", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_COMPANY_SETTING:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    switch(listitem)
			{
			    case 0:
			    {
					if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
					static i, j, k, ComList[512];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(CompanyMember[comid][i][cmJoined] != MEMBER_APPLYING){continue;}
						format(ComList, sizeof(ComList), "%s%s\t%d\n", ComList, GetPlayerSqlName(CompanyMember[comid][i][cmMemberID]), GetPlayerSqlLevel(CompanyMember[comid][i][cmMemberID]));
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "审核申请", ""#TEXT_WHITE"目前没有任何申请", "确认", "");}
					format(ComList, sizeof(ComList), "玩家名称\t等级\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_APPLY_LIST, DIALOG_STYLE_TABLIST_HEADERS, "审核申请", ComList, "查看", "关闭");
				}
				case 1:
				{
				    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限邀请新成员");
				    if(GetCompanyMembers(comid) >= MAX_CMEMBERS)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "目前企业人数已达上限,无法再邀请新成员加入");
					}
				    ShowPlayerDialog(playerid, DIALOG_COMPANY_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"请输入要邀请的玩家名称或ID", "发送邀请", "取消");
				}
				case 2:
				{
				    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业公告");
                    ShowPlayerDialog(playerid, DIALOG_COMPANY_CATALOG, DIALOG_STYLE_INPUT, "更改企业公告", ""#TEXT_WHITE"请输入新的公告内容", "确认", "取消");
                }
				case 3:
			    {
			        new string2[256];
					format(string2, sizeof(string2), "权限\t拥有权限的阶级\n存取资金权限\t%d\n调整阶级权限\t%d\n管理(出售/转让/设定)地产权限\t%d\n审核/邀请/开除权限\t%d\n管理(出售/转让/设定)载具权限\t%d",
					CompanyData[comid][comFundR], CompanyData[comid][comRankR], CompanyData[comid][comER], CompanyData[comid][comAoFR], CompanyData[comid][comVehR]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_RANK, DIALOG_STYLE_TABLIST_HEADERS, "阶级权限", string2, "管理", "关闭");
					SendClientMessage(playerid, COLOR_WHITE, "** 企业的CEO可以点击管理各权限所需的阶级");
				}
				case 4:
			    {
			        format(string, sizeof(string), ""#TEXT_WHITE"请选择要更改的阶级名称\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)",
					CompanyData[comid][comR1], CompanyData[comid][comR2], CompanyData[comid][comR3], CompanyData[comid][comR4], CompanyData[comid][comR5]);
		            ShowPlayerDialog(playerid, DIALOG_COMPANY_RANK_NAME1, DIALOG_STYLE_TABLIST_HEADERS, "阶级名称管理", string, "设定", "取消");
				}
				case 5:
				{
				    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能开拓新事业");
				    new check = 0, infostr[512];
				    infostr[0] = EOS;
				    if(CompanyData[comid][comTaxi] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_YELLOW"计程车业\n", infostr);
						SetGVarInt("DListID", BIS_TAXI, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comBus] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_BLUEGREEN"客运运输业\n", infostr);
						SetGVarInt("DListID", BIS_BUS, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comHeli] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_VIOLET"直升机运输业\n", infostr);
						SetGVarInt("DListID", BIS_HELI, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comAirline] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_SKYBLUE"航空业\n", infostr);
						SetGVarInt("DListID", BIS_AIRLINE, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comBoat] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_LIGHTBLUE"海上运输业\n", infostr);
						SetGVarInt("DListID", BIS_BOAT, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comMedia] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_ORANGE"媒体业\n", infostr);
						SetGVarInt("DListID", BIS_MEDIA, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comAnimal] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_SANDYELLOW"畜牧业\n", infostr);
						SetGVarInt("DListID", BIS_ANIMAL, check*1000+playerid);
						check++;
					}
				    if(CompanyData[comid][comTrade] == 0)
					{
						format(infostr, sizeof(infostr), "%s"#TEXT_PINKRED"贸易业\n", infostr);
						SetGVarInt("DListID", BIS_TRADE, check*1000+playerid);
						check++;
					}
					if(check == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "开拓事业", ""#TEXT_WHITE"你的企业已经开拓了所有事业", "确认", "");}
					format(infostr, sizeof(infostr), ""#TEXT_WHITE"选择要开拓的项目\n%s", infostr);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_CREATE1, DIALOG_STYLE_TABLIST_HEADERS, "开拓事业", infostr, "选择", "关闭");
				}
				case 6:
				{
				    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业名称");
				    if(!IsCompanyHaveOffice(CompanyData[comid][comID])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 企业必须要先拥有一个办公室才能进行这个设定");
					if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改企业名称需要花费$10,000");
                    ShowPlayerDialog(playerid, DIALOG_COMPANY_NAME, DIALOG_STYLE_INPUT, "更改企业名称", ""#TEXT_WHITE"请输入新的企业名称"#TEXT_LIGHTGREEN"企业名称\n"#TEXT_YELLOW"更改企业名称需要花费你$10,000", "确认", "取消");
                }
                case 7:
				{
				    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业颜色");
				    if(!IsCompanyHaveOffice(CompanyData[comid][comID])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 企业必须要先拥有一个办公室才能进行这个设定");
					if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改企业颜色需要花费$10,000");
					static colorstr[1024];
		    		colorstr[0] = EOS;
                    format(colorstr, sizeof(colorstr), ""#TEXT_WHITE"请选择企业颜色\n"#TEXT_DARKRED"深红\n"#TEXT_RED"红色\n"#TEXT_FADERED"浅红\n"#TEXT_VIOLET"淡紫\n"#TEXT_PINK"粉红\n"#TEXT_LIGHTRED"亮红\n"#TEXT_ORANGE"橘色\n");
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_LIGHTORANGE"亮橘\n"#TEXT_YELLOW"黄色\n"#TEXT_FADEYELLOW"浅黄\n"#TEXT_LIGHTYELLOW"亮黄\n"#TEXT_YELLOWGREEN"黄绿\n"#TEXT_DARKYELLOWGREEN"暗黄绿\n"#TEXT_LIGHTGREEN"亮绿\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEGREEN"浅绿\n"#TEXT_GREEN"绿色\n"#TEXT_DARKGREEN"暗绿\n"#TEXT_BLUEGREEN"蓝绿\n"#TEXT_LIGHTBLUE"亮蓝\n"#TEXT_FADEBLUE"浅蓝\n"#TEXT_SKYBLUE"天蓝\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_WATERBLUE"水蓝\n"#TEXT_BLUE"蓝色\n"#TEXT_PURPLE"紫色\n"#TEXT_LIGHTPURPLE"亮紫\n"#TEXT_PINKRED"桃红\n"#TEXT_BLOODRED"血红\n"#TEXT_DARKBROWN"暗棕\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEBROWN"淡棕\n"#TEXT_BROWN"棕色\n"#TEXT_SANDYELLOW"沙黄", colorstr);
				    ShowPlayerDialog(playerid, DIALOG_COMPANY_COLOR, DIALOG_STYLE_TABLIST_HEADERS, "更改企业颜色", colorstr, "确认", "取消");
                }
                case 8:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"余额:%d\n"#TEXT_YELLOW"捐献\n"#TEXT_FADEGREEN"存款\n"#TEXT_LIGHTRED"取款", CompanyData[comid][comFund]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_FUND, DIALOG_STYLE_TABLIST_HEADERS, "管理资金", string, "选择", "取消");
				}
				case 9:
				{
				    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是企业的CEO");
				    new k, ComList[512];
				    ComList[0] = EOS;
				    ForEachPlayer(i)
					{
					    if(PlayerData[i][pCompany] != CompanyData[comid][comID]) continue;
					    if(GetPlayerCompanyRank(i) > 3)
					    {
							format(ComList, sizeof(ComList), "%s%s\n", ComList, PlayerData[i][pName]);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "成员一览", ""#TEXT_WHITE"目前没有任何在线的R4成员", "确认", "");}
					format(ComList, sizeof(ComList), ""#TEXT_WHITE"成员名称\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_TRANSFER, DIALOG_STYLE_TABLIST_HEADERS, "成员一览", ComList, "查看", "关闭");
				}
				case 10:
                {
                    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是企业的CEO");
					ShowPlayerDialog(playerid, DIALOG_COMPANY_DISBAND, DIALOG_STYLE_MSGBOX, "解散企业", ""#TEXT_WHITE"确认要解散企业吗?\n解散后所有的资金、成员、地产、载具、事业以及科技都将"#TEXT_RED"化为乌有", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_COMPANY_BUSINESS_CREATE1:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DListID", listitem*1000+playerid),
				cmembers = GetCompanyMembers(comid),
				infostr[768], check1, checkstr1[32], check2, checkstr2[32],
				check3, checkstr3[32];
			if(IsCompanyHaveOffice(CompanyData[comid][comID])) {format(checkstr1, 32, ""#TEXT_FADEGREEN"达成"), check1 = 1;}
			else {format(checkstr1, 32, ""#TEXT_LIGHTGREEN"未达成"), check1 = 0;}
			switch(chosed)
			{
			    case BIS_TAXI:
			    {
			        if(cmembers > 4) {format(checkstr2, 32, ""#TEXT_FADEGREEN"达成"), check2 = 1;}
					else {format(checkstr2, 32, ""#TEXT_LIGHTGREEN"未达成"), check2 = 0;}

					new i, j, k;
					for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_COMPANY) continue;
					    if(VehData[i][vOwner] == CompanyData[comid][comID] && IsATaxi(i)) k ++;
					}
					if(k > 3)  {format(checkstr3, 32, ""#TEXT_FADEGREEN"达成"), check3 = 1;}
					else {format(checkstr3, 32, ""#TEXT_LIGHTGREEN"未达成"), check3 = 0;}

					if(check1 == 1 && check2 == 1 && check3 == 1) SetGVarInt("ComCanCreate", 1, playerid);
					else DeleteGVar("ComCanCreate", playerid);

			        format(infostr, sizeof(infostr),""#TEXT_YELLOW"计程车业\n"#TEXT_WHITE"成立一个有组织性且专业的计程车事业\n\n"#TEXT_GREEN"能力:\n"#TEXT_WHITE"旗下计程车皆会升级为黄牌计程车\nCEO可以自订费率\n企业计程车加油免费\n");
			        format(infostr, sizeof(infostr),"%s\n"#TEXT_LIGHTRED"成立条件:\n"#TEXT_WHITE"拥有办公室: %s\n"#TEXT_WHITE"成员达5人(含)以上: %s\n"#TEXT_WHITE"拥有4辆计程车(含)以上: %s\n\n"#TEXT_WHITE"确认要开拓计程车业吗?", infostr, checkstr1, checkstr2, checkstr3);
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_CREATE2, DIALOG_STYLE_MSGBOX, "开拓企业", infostr, "确认", "取消");
			    }
			    case BIS_BUS:
			    {
			        if(cmembers > 2) {format(checkstr2, 32, ""#TEXT_FADEGREEN"达成"), check2 = 1;}
					else {format(checkstr2, 32, ""#TEXT_LIGHTGREEN"未达成"), check2 = 0;}

					new i, j, k;
					for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_COMPANY) continue;
					    if(VehData[i][vOwner] == CompanyData[comid][comID] && IsABus(i)) k ++;
					}
					if(k > 1)  {format(checkstr3, 32, ""#TEXT_FADEGREEN"达成"), check3 = 1;}
					else {format(checkstr3, 32, ""#TEXT_LIGHTGREEN"未达成"), check3 = 0;}

					if(check1 == 1 && check2 == 1 && check3 == 1) SetGVarInt("ComCanCreate", 1, playerid);
					else DeleteGVar("ComCanCreate", playerid);

			        format(infostr, sizeof(infostr),""#TEXT_BLUEGREEN"客运业\n"#TEXT_WHITE"成立一个可自行规划路线为大众服务的客运事业\n\n"#TEXT_GREEN"能力:\n"#TEXT_WHITE"一个企业最多可以规划5条客运路线\nCEO可以自订车费\n企业公车加油免费\n");
			        format(infostr, sizeof(infostr),"%s\n"#TEXT_LIGHTRED"成立条件:\n"#TEXT_WHITE"拥有办公室: %s\n"#TEXT_WHITE"成员达3人(含)以上: %s\n"#TEXT_WHITE"拥有2辆公车(含)以上: %s\n\n"#TEXT_WHITE"确认要开拓客运业吗?", infostr, checkstr1, checkstr2, checkstr3);
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_CREATE2, DIALOG_STYLE_MSGBOX, "开拓企业", infostr, "确认", "取消");
			    }
			    case BIS_MEDIA:
			    {
			        if(cmembers > 3) {format(checkstr2, 32, ""#TEXT_FADEGREEN"达成"), check2 = 1;}
					else {format(checkstr2, 32, ""#TEXT_LIGHTGREEN"未达成"), check2 = 0;}

					new i, j, k;
					for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_COMPANY) continue;
					    if(VehData[i][vOwner] == CompanyData[comid][comID] && VehData[i][vModel] == 582) k ++;
					}
					if(k > 0)  {format(checkstr3, 32, ""#TEXT_FADEGREEN"达成"), check3 = 1;}
					else {format(checkstr3, 32, ""#TEXT_LIGHTGREEN"未达成"), check3 = 0;}

					if(check1 == 1 && check2 == 1 && check3 == 1) SetGVarInt("ComCanCreate", 1, playerid);
					else DeleteGVar("ComCanCreate", playerid);

			        format(infostr, sizeof(infostr),""#TEXT_ORANGE"媒体业\n"#TEXT_WHITE"成立一个整合电台广播、视讯直播以及书报传播的媒体事业\n\n"#TEXT_GREEN"能力:\n"#TEXT_WHITE"广播 - \n订定广播节目播放音乐\n安排主持人进行谈话\n玩家可以通过手机或车内收音机收听企业的广播频道\n视讯 - \n使用新闻车上的摄影器材为视讯画面取景\n并分享现场的景象与谈话供观众收看\n玩家可以通过家中电视收看企业的视讯频道\n");
			        format(infostr, sizeof(infostr),"%s\n"#TEXT_LIGHTRED"成立条件:\n"#TEXT_WHITE"拥有办公室: %s\n"#TEXT_WHITE"成员达4人(含)以上: %s\n"#TEXT_WHITE"拥有1辆新闻车(含)以上: %s\n\n"#TEXT_WHITE"确认要开拓媒体业吗?", infostr, checkstr1, checkstr2, checkstr3);
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_CREATE2, DIALOG_STYLE_MSGBOX, "开拓企业", infostr, "确认", "取消");
			    }
			}
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_BUSINESS_CREATE2:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid),
				check = GetGVarInt("ComCanCreate", playerid);
            if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能开拓新事业");
			if(check == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业尚未达成所有开拓所需的条件");
			switch(chosed)
			{
			    case BIS_TAXI:
			    {
			        CompanyData[comid][comTaxi] = 1;
			        CompanyData[comid][comTaxiFare1] = 150;
			        CompanyData[comid][comTaxiFare2] = 30;
			        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "开拓企业", ""#TEXT_WHITE"你已为你的企业开拓了"#TEXT_YELLOW"计程车业\n"#TEXT_WHITE"你可以在''旗下事业''的菜单调整你的企业的车资与费率", "确认", "");
			        format(string, sizeof(string), "<<广告>>{%06x}企业 %s 开拓了计程车业", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
			        SendClientMessageToAll(COLOR_WHITE, string);
			        format(string, sizeof(string), "<<企业>> CEO 开拓了新事业计程车业");
					SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					Log(companylog, INFO, "%s(%d)为企业%s(%d)开拓了计程车业", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID]);
			    }
			    case BIS_BUS:
			    {
			        CompanyData[comid][comBus] = 1;
			        CompanyData[comid][comBusFare] = 25;
			        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "开拓企业", ""#TEXT_WHITE"你已为你的企业开拓了"#TEXT_BLUEGREEN"客运业\n"#TEXT_WHITE"你可以在''旗下事业''的菜单调整车资以及建立第一条客运路线", "确认", "");
			        format(string, sizeof(string), "<<广告>>{%06x}企业 %s 开拓了客运业", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
			        SendClientMessageToAll(COLOR_WHITE, string);
			        format(string, sizeof(string), "<<企业>> CEO 开拓了新事业客运业");
					SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					Log(companylog, INFO, "%s(%d)为企业%s(%d)开拓了客运业", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID]);
			    }
			    case BIS_MEDIA:
			    {
			        CompanyData[comid][comMediaFame] =
			        CompanyData[comid][comMediaEarn] =
					CompanyData[comid][comRadioLoop] =
			        CompanyData[comid][comRadioTrack] =
					CompanyData[comid][comRadioAir] = 0;
			        CompanyData[comid][comMedia] = 1;
			        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "开拓企业", ""#TEXT_WHITE"你已为你的企业开拓了"#TEXT_ORANGE"媒体业\n"#TEXT_WHITE"你可以在''旗下事业''的菜单开始订定广播节目或是使用新闻车上的道具来取景拍摄了\n"#TEXT_YELLOW"热度"#TEXT_WHITE"为媒体业的收入指标,热度会随时间减少,当旗下媒体的收视越高热度会增加越多\n当媒体业的热度越高,便会定时获得更多收益\n朝着最高热度的目标与成员一起努力吧", "确认", "");
			        format(string, sizeof(string), "<<广告>>{%06x}企业 %s 开拓了媒体业", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
			        SendClientMessageToAll(COLOR_WHITE, string);
			        format(string, sizeof(string), "<<企业>> CEO 开拓了新事业媒体业");
					SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					Log(companylog, INFO, "%s(%d)为企业%s(%d)开拓了媒体业", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID]);
			    }
			}
			return 1;
		}
		case DIALOG_COMPANY_TRANSFER:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			format(string, sizeof(string), ""#TEXT_WHITE"确认要转让CEO位置给%s?\n转让后企业的所有权将转移给新的CEO", PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_TRANSFER_CHECK, DIALOG_STYLE_MSGBOX, "转让CEO位置", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_TRANSFER_CHECK:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid),
				pfrom = PlayerIDToCompanyMember(playerid, comid),
				pto = PlayerIDToCompanyMember(chosed, comid);
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不在线");
			if(PlayerData[chosed][pCompany] != PlayerData[playerid][pCompany]) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不属于你的企业");
			if(GetPlayerCompanyRank(chosed) < 4) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员阶级已经不足R4");

			CompanyData[comid][comCEO] = PlayerData[chosed][pID];
			CompanyMember[comid][pfrom][cmRank] = 1;
			CompanyMember[comid][pto][cmRank] = 5;
			format(string, sizeof(string), "<<企业>>"#TEXT_YELLOW" CEO %s 已经将CEO的头衔以及企业的所有权转让给了 %s", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
            Log(companylog, INFO, "%s(%d)将为企业%s(%d)CEO的头衔转让给了%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], PlayerData[chosed][pName], PlayerData[chosed][pID]);
            return 1;
        }
        case DIALOG_COMPANY_DISBAND:
        {
            if (!response) return ShowPlayerCompanyMenu(playerid);
            new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是企业的CEO");
            ShowPlayerDialog(playerid, DIALOG_COMPANY_DISBAND_CHECK, DIALOG_STYLE_MSGBOX, "解散企业", ""#TEXT_WHITE"真的确定要解散企业吗?", "确认", "取消");
            return 1;
        }
        case DIALOG_COMPANY_DISBAND_CHECK:
        {
            if (!response) return ShowPlayerCompanyMenu(playerid);
            new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是企业的CEO");
            format(string, sizeof(string), "<<企业>> "#TEXT_YELLOW"注意: CEO %s 将企业解散了!", PlayerData[playerid][pName]);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
            format(string, sizeof(string), "** 你已顺利解散了你的企业 %s", CompanyData[comid][comName]);
            SendClientMessage(playerid, COLOR_YELLOW, string);
            Log(companylog, INFO, "%s(%d)将为企业%s(%d)解散了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID]);
            DeleteCompany(comid);
            PlayerData[playerid][pCompany] = COMPANY_ID_NONE;
            return 1;
        }
		case DIALOG_COMPANY_FUND:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"请选择捐献金额,目前余额为: %d\n$1,000\n$5,000\n$10,000", CompanyData[comid][comFund]);
		            ShowPlayerDialog(playerid, DIALOG_COMPANY_FUND_DONATE, DIALOG_STYLE_TABLIST_HEADERS, "资金捐献", string, "确认", "取消");
		        }
		        case 1:
		        {
		            if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comFundR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入存入金额\n目前余额为: %d", CompanyData[comid][comFund]);
		            ShowPlayerDialog(playerid, DIALOG_COMPANY_FUND_DEPOSIT, DIALOG_STYLE_INPUT, "存入资金", string, "确认", "取消");
		        }
		        case 2:
		        {
		            if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comFundR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入取出金额\n目前余额为: %d", CompanyData[comid][comFund]);
		            ShowPlayerDialog(playerid, DIALOG_COMPANY_FUND_WITHDRAW, DIALOG_STYLE_INPUT, "取出资金", string, "确认", "取消");
		        }
		    }
		    return 1;
		}
		case DIALOG_COMPANY_FUND_DEPOSIT:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), amount = strval(inputtext);
		    if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comFundR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		    if(amount > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足无法存入");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    GiveMoney(playerid, -amount);
		    Log(moneylog, INFO, "%s(%d)在企业%s(%d)的企业资金里存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
            Log(companylog, INFO, "%s(%d)在企业%s(%d)的企业资金里存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
			CompanyData[comid][comFund] += amount;
		    format(string, sizeof(string), "<<企业>> %s 存入了$%d至企业资金", PlayerData[playerid][pName], amount);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    return 1;
		}
		case DIALOG_COMPANY_FUND_WITHDRAW:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), amount = strval(inputtext);
		    if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comFundR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		    if(amount > CompanyData[comid][comFund]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 企业的资金不足");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    GiveMoney(playerid, amount);
		    Log(moneylog, INFO, "%s(%d)从企业%s(%d)的企业资金里领出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
		    Log(companylog, INFO, "%s(%d)从企业%s(%d)的企业资金里领出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
		    CompanyData[comid][comFund] -= amount;
		    format(string, sizeof(string), "<<企业>> %s 从企业资金取出了$%d", PlayerData[playerid][pName], amount);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    return 1;
		}
		case DIALOG_COMPANY_FUND_DONATE:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), amount;
		    switch(listitem)
		    {
		        case 0: amount = 1000;
		        case 1: amount = 5000;
		        case 2: amount = 10000;
		    }
		    if(amount > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足无法捐献");
		    GiveMoney(playerid, -amount);
		    Log(moneylog, INFO, "%s(%d)捐献给企业%s(%d)共$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
		    Log(companylog, INFO, "%s(%d)捐献给企业%s(%d)共$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], amount);
		    CompanyData[comid][comFund] += amount;
		    format(string, sizeof(string), "<<企业>> %s 为企业捐献了$%d", PlayerData[playerid][pName], amount);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    return 1;
		}
		case DIALOG_COMPANY_CATALOG:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业公告");
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_CATALOG, DIALOG_STYLE_INPUT, "更改企业公告", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "取消");
			}
			mysql_format(DEFAULT_SESSION, CompanyData[comid][comCatalog], 128, "%s", inputtext);
			format(string, sizeof(string), "<<企业>> CEO %s 发布了新公告: %s", PlayerData[playerid][pName], inputtext);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    return 1;
		}
		case DIALOG_COMPANY_NAME:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), i, j;
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业名称");
			if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改企业名称需要花费$10,000");
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_NAME, DIALOG_STYLE_INPUT, "更改企业名称", ""#TEXT_WHITE"你输入的名称为空白,或是含有无法使用的字元", "确认", "取消");
			}
			for(i = 0, j = MAX_COMPANIES; i < j ; i++)
    		{
    		    if(CompanyData[i][comCreated] == 0) continue;
	            if(strcmp(inputtext, CompanyData[i][comName]) == 0 && !isnull(CompanyData[i][comName]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_COMPANY_NAME, DIALOG_STYLE_INPUT, "更改企业名称", ""#TEXT_WHITE"这个企业名称已经被使用了,请重新输入", "确认", "取消");
				}
			}
			// mysql format
			Log(companylog, INFO, "%s(%d)将企业%s(%d)改名为%s", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], inputtext);
			mysql_format(DEFAULT_SESSION, CompanyData[comid][comName], 16, "%s", inputtext);
			format(string, sizeof(string), "<<企业>> CEO %s 将企业名称更改为 %s", PlayerData[playerid][pName], inputtext);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
            GiveMoney(playerid, -10000);
            Log(moneylog, INFO, "%s(%d)花费$%d为企业%s(%d)进行改名", PlayerData[playerid][pName], PlayerData[playerid][pID], 10000, CompanyData[comid][comName], CompanyData[comid][comID]);
		    return 1;
		}
		case DIALOG_COMPANY_COLOR:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), color;
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能更改企业颜色");
			if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改企业颜色需要花费$10,000");
		    switch(listitem)
		    {
		        case 0: color = PLAYER_DARKRED;
		        case 1: color = PLAYER_RED;
		        case 2: color = PLAYER_FADERED;
		        case 3: color = PLAYER_VIOLET;
		        case 4: color = PLAYER_PINK;
		        case 5: color = PLAYER_LIGHTRED;
		        case 6: color = PLAYER_ORANGE;
		        case 7: color = PLAYER_LIGHTORANGE;
		        case 8: color = PLAYER_YELLOW;
		        case 9: color = PLAYER_FADEYELLOW;
		        case 10: color = PLAYER_LIGHTYELLOW;
		        case 11: color = PLAYER_YELLOWGREEN;
		        case 12: color = PLAYER_DARKYELLOWGREEN;
		        case 13: color = PLAYER_LIGHTGREEN;
		        case 14: color = PLAYER_FADEGREEN;
		        case 15: color = PLAYER_GREEN;
		        case 16: color = PLAYER_DARKGREEN;
		        case 17: color = PLAYER_BLUEGREEN;
		        case 18: color = PLAYER_LIGHTBLUE;
		        case 19: color = PLAYER_FADEBLUE;
		        case 20: color = PLAYER_SKYBLUE;
		        case 21: color = PLAYER_WATERBLUE;
		        case 22: color = PLAYER_BLUE;
		        case 23: color = PLAYER_PURPLE;
		        case 24: color = PLAYER_LIGHTPURPLE;
		        case 25: color = PLAYER_PINKRED;
		        case 26: color = PLAYER_BLOODRED;
		        case 27: color = PLAYER_DARKBROWN;
		        case 28: color = PLAYER_FADEBROWN;
		        case 29: color = PLAYER_BROWN;
		        case 30: color = PLAYER_SANDYELLOW;
		    }
		    GiveMoney(playerid, -10000);
		    Log(moneylog, INFO, "%s(%d)花费$%d为企业%s(%d)更改颜色", PlayerData[playerid][pName], PlayerData[playerid][pID], 10000, CompanyData[comid][comName], CompanyData[comid][comID]);
			CompanyData[comid][comColor] = color;
			format(string, sizeof(string), "<<企业>> CEO %s 更改了企业颜色", PlayerData[playerid][pName]);
            SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
            ForEachPlayer(p)
            {
                if(PlayerData[p][pCompany] == CompanyData[comid][comID]) UpdatePlayerColor(p);
            }
		    return 1;
		}
		case DIALOG_COMPANY_APPLY_LIST:
		{
            if (!response) return ShowPlayerCompanyMenu(playerid);
            new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DListID", listitem*1000+playerid),
				infostr[512];
            if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
            if(CompanyMember[comid][chosed][cmJoined] != MEMBER_APPLYING) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员的申请已经被通过或已被拒绝");
			format(infostr, sizeof(infostr), " \n名称:%s\n等级:%d\n自我介绍\n%s \n"#TEXT_FADEGREEN"接受申请\n"#TEXT_RED"拒绝申请",
			GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), GetPlayerSqlLevel(CompanyMember[comid][chosed][cmMemberID]), CompanyMember[comid][chosed][cmInfo]);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_APPLY_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "审核申请", infostr, "选择", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_APPLY_CHECK:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid),
				sqlpid = CompanyMember[comid][chosed][cmMemberID],
		    	pid = PlayerSqlIDToID(sqlpid);
		    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
		    switch(listitem)
		    {
		        case 4:
		        {
		            if(GetCompanyMembers(comid) >= MAX_CMEMBERS)
					{
						return SendClientMessage(playerid, COLOR_WHITE, "目前企业人数已达上限,无法再加入新成员");
					}
					if(pid == -1)//当该玩家不在线上时
					{
					    new query[128];
    					if(GetPlayerSqlCompany(sqlpid) != -1)
						{
						    DeleteCompanyMember(comid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员已经加入了其他企业");
						}
						if(GetPlayerSqlDept(sqlpid) == DEPT_ARMY || GetPlayerSqlDept(sqlpid) == DEPT_POLICE)
						{
						    DeleteCompanyMember(comid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员目前为警察或军人,无法加入");
						}
						CompanyMember[comid][chosed][cmJoined] = MEMBER_JOINED;
						mysql_format(MYSQL_SESSION_A, query, sizeof(query), "UPDATE `playerdata` SET `company` = '%d'", CompanyData[comid][comID]);
						mysql_tquery(MYSQL_SESSION_A, query);
						format(string, sizeof(string), "<<企业>> %s 通过了新成员 %s 的申请,大家一起在新成员登入时欢迎他的加入", PlayerData[playerid][pName], GetPlayerSqlName(sqlpid));
					    SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					    Log(companylog, INFO, "%s(%d)通过了企业%s(%d)新成员%s(%d)的申请", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], GetPlayerSqlName(sqlpid), sqlpid);
					}
					else
					{
						if(PlayerData[pid][pCompany] != -1)
						{
						    DeleteCompanyMember(comid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员已经加入了其他企业");
						}
						if(PlayerData[pid][pDepartment] == DEPT_ARMY || PlayerData[pid][pDepartment] == DEPT_POLICE)
						{
						    DeleteCompanyMember(comid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员目前为警察或军人,无法加入");
						}
						CompanyMember[comid][chosed][cmJoined] = MEMBER_JOINED;
						PlayerData[pid][pCompany] = CompanyData[comid][comID];
						PlayerData[pid][pTitle] = TITLE_COMPANY;
						format(string, sizeof(string), "** 企业 %s 的 %s 已经接受了你的申请,现在你已经成为了该企业的一份子", CompanyData[comid][comName], PlayerData[playerid][pName]);
						SendClientMessage(pid, COLOR_YELLOW, string);
						format(string, sizeof(string), "<<企业>> %s 通过了新成员 %s 的申请,大家一起欢迎新成员的加入", PlayerData[playerid][pName], PlayerData[pid][pName]);
					    SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					    Log(companylog, INFO, "%s(%d)通过了企业%s(%d)新成员%s(%d)的申请", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], PlayerData[pid][pName], PlayerData[pid][pID]);
					}
				}
				case 5:
				{
				    format(string, sizeof(string), "** 完成: 你拒绝了该玩家的的申请");
					SendClientMessage(playerid, COLOR_YELLOW, string);
				    DeleteCompanyMember(comid, CompanyMember[comid][chosed][cmMemberID]);
				}
			}
		    return 1;
		}
		case DIALOG_COMPANY_INVITE:
        {
            if (!response) return ShowPlayerCompanyMenu(playerid);
            new giveplayerid, giveplayername[MAX_PLAYER_NAME], comid;
            comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限邀请新成员");
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", "该玩家名称或ID不存在,请重新输入", "确认", "关闭");
            }
            if(PlayerData[giveplayerid][pCompany] != -1)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经属于别的企业了");
			}
			if(PlayerData[giveplayerid][pDepartment] == DEPT_ARMY || PlayerData[giveplayerid][pDepartment] == DEPT_POLICE)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家目前为警察或军人,无法加入");
			}
            if(GetCompanyMembers(comid) >= MAX_CMEMBERS)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "目前企业人数已达上限,无法再邀请新成员加入");
			}
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"来自企业{%06x} %s "#TEXT_WHITE"的%s向你发出邀请\n请问是否要加入该企业?", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName], PlayerData[playerid][pName]);
            ShowPlayerDialog(giveplayerid, DIALOG_INVITE_COMPANY, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"企业邀请", string, "加入", "无视");
            SetGVarInt("InvitedCompany", comid, giveplayerid);
            format(string, sizeof(string), "** 你已向 %s 发出企业邀请", giveplayername);
            SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_INVITE_COMPANY:
		{
		    if (!response) return 1;
		    new comid;
		    comid = GetGVarInt("InvitedCompany", playerid);
		    if(PlayerData[playerid][pCompany] != -1)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "你已经属于别的企业了");
			}
			if(PlayerData[playerid][pDepartment] == DEPT_ARMY || PlayerData[playerid][pDepartment] == DEPT_POLICE)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "你目前为警察或军人,无法加入");
			}
		    if(GetCompanyMembers(comid) >= MAX_CMEMBERS)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "目前该企业企业人数已达上限");
			}
		    AddCompanyMember(comid, PlayerData[playerid][pID], "由其他成员邀请加入", MEMBER_JOINED, 1);
		    PlayerData[playerid][pCompany] = CompanyData[comid][comID];
		    PlayerData[playerid][pTitle] = TITLE_COMPANY;
			format(string, sizeof(string), "<<企业>> 新成员 %s 已接受邀请加入了企业,大家一起欢迎新成员的加入", PlayerData[playerid][pName]);
		    SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    Log(companylog, INFO, "企业%s(%d)新成员%s(%d)接受邀请加入了企业", CompanyData[comid][comName], CompanyData[comid][comID], PlayerData[playerid][pName], PlayerData[playerid][pID]);
		    return 1;
		}
		case DIALOG_COMPANY_RANK:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能管理阶级的权限");
            SetGVarInt("DDecideID", listitem, playerid);//把在这边选择的项目记录下来,以便在下面应用

            format(string, sizeof(string), ""#TEXT_WHITE"请选择可使用这个权限的阶级\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)",
			CompanyData[comid][comR1], CompanyData[comid][comR2], CompanyData[comid][comR3], CompanyData[comid][comR4], CompanyData[comid][comR5]);
            ShowPlayerDialog(playerid, DIALOG_COMPANY_RANK_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "阶级权限管理", string, "设定", "取消");
            return 1;
        }
        case DIALOG_COMPANY_RANK_NAME1:
		{
     		if (!response) return ShowPlayerCompanyMenu(playerid);
		    new rank = listitem+1,
		    	comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能管理阶级的名称");

		    format(string, sizeof(string), ""#TEXT_WHITE"请输入要更改阶级%d的名称为:", rank);
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_RANK_NAME2, DIALOG_STYLE_INPUT, "阶级名称管理", string, "确认", "取消");
		    SetGVarInt("DDecideID", rank, playerid);
		    return 1;
		}
		case DIALOG_COMPANY_RANK_NAME2:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				rank = GetGVarInt("DDecideID", playerid);
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
				return ShowPlayerDialog(playerid, DIALOG_COMPANY_RANK_NAME2, DIALOG_STYLE_INPUT, "阶级名称管理", ""#TEXT_WHITE"你输入的名称为空白或含有无法使用的字元", "确认", "取消");
			}
			switch(rank)
			{
			    case 1: mysql_format(DEFAULT_SESSION, CompanyData[comid][comR1], 16, "%s", inputtext);
			    case 2: mysql_format(DEFAULT_SESSION, CompanyData[comid][comR2], 16, "%s", inputtext);
			    case 3: mysql_format(DEFAULT_SESSION, CompanyData[comid][comR3], 16, "%s", inputtext);
			    case 4: mysql_format(DEFAULT_SESSION, CompanyData[comid][comR4], 16, "%s", inputtext);
			    case 5: mysql_format(DEFAULT_SESSION, CompanyData[comid][comR5], 16, "%s", inputtext);
			}
			format(string, sizeof(string), ""#TEXT_WHITE"你已将企业阶级%d的名称更改为%s了", rank, inputtext);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_COMPANY_RANK_SETTING:
		{
     		if (!response) return ShowPlayerCompanyMenu(playerid);
		    new rank = listitem+1, chosed = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO才能管理阶级的权限");
			switch(chosed)
			{
			    case 0:
			    {
			        CompanyData[comid][comFundR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有存取资金权限的阶级设定至阶级%d", rank);
			    }
			    case 1:
			    {
			        CompanyData[comid][comRankR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有调整阶级权限的阶级设定至阶级%d", rank);
			    }
			    case 2:
			    {
			        CompanyData[comid][comER] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理地产权限的阶级设定至阶级%d", rank);
			    }
			    case 3:
			    {
			        CompanyData[comid][comAoFR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有审核/邀请/开除权限的阶级设定至阶级%d", rank);
			    }
			    case 4:
			    {
			        CompanyData[comid][comVehR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理载具权限的阶级设定至阶级%d", rank);
			    }
			    case 5:
			    {
			        CompanyData[comid][comGoodsR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理物流权限的阶级设定至阶级%d", rank);
			    }
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_COMPANY_QUIT:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyData[comid][comCEO] == PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个企业的CEO,在你转让出这个位置以前无法离开这个企业");
			DeleteCompanyMember(comid, PlayerData[playerid][pID]);
			PlayerData[playerid][pCompany] = COMPANY_ID_NONE;
			if(PlayerData[playerid][pTitle] == TITLE_COMPANY) PlayerData[playerid][pTitle] = TITLE_NONE;
			format(string, sizeof(string), "** 你向企业 %s 提出了辞呈,离开了企业", CompanyData[comid][comName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "<<企业>> 成员 %s 辞职离开了这个企业", PlayerData[playerid][pName]);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			Log(companylog, INFO, "企业%s(%d)的成员%s(%d)离开了企业", CompanyData[comid][comName], CompanyData[comid][comID], PlayerData[playerid][pName], PlayerData[playerid][pID]);
			return 1;
		}
		case DIALOG_COMPANY_MEMBERS:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyMember[comid][chosed][cmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "这个玩家已经不属于你目前的企业了");
		    format(string, sizeof(string), ""#TEXT_WHITE"%s\t \n阶级\t%d\n点数\t%d\n请出企业", GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), CompanyMember[comid][chosed][cmRank], CompanyMember[comid][chosed][cmPoint]);
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_MEMBERS_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看成员", string, "选择", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_COMPANY_MEMBERS_SET:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyMember[comid][chosed][cmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的企业了");
			switch(listitem)
			{
			    case 0:
			    {
			        if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comRankR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整成员阶级");
			        if(GetPlayerCompanyRank(playerid) <= CompanyMember[comid][chosed][cmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整这个成员的阶级");
			        format(string, sizeof(string), ""#TEXT_WHITE"请选择要将%s调整为:\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)"
					, GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), CompanyData[comid][comR1], CompanyData[comid][comR2], CompanyData[comid][comR3], CompanyData[comid][comR4], CompanyData[comid][comR5]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEMBERS_RANK, DIALOG_STYLE_TABLIST_HEADERS, "设定阶级", string, "选择", "取消");
				}
				case 2:
				{
			        if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将成员请出企业");
			        if(GetPlayerCompanyRank(playerid) <= CompanyMember[comid][chosed][cmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将这个成员请出企业");
			        format(string, sizeof(string), ""#TEXT_WHITE"确认要将%s请出企业?", GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]));
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEMBERS_FIRE, DIALOG_STYLE_MSGBOX, "开除成员", string, "确认", "取消");
				}
			}
		    return 1;
		}
		case DIALOG_COMPANY_MEMBERS_RANK:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]), rank = listitem+1;
		    if(CompanyMember[comid][chosed][cmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的企业了");
		    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comRankR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整成员阶级");
			if(GetPlayerCompanyRank(playerid) <= CompanyMember[comid][chosed][cmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整这个成员的阶级");
			if(rank >= GetPlayerCompanyRank(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有无法将成员设为这个阶级");

			format(string, sizeof(string), "** 你已把 %s 的阶级设为R%d", GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), rank);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<企业>> %s 把 %s 的阶级设为R%d", PlayerData[playerid][pName], GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), rank);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			CompanyMember[comid][chosed][cmRank] = rank;
			ShowPlayerCompanyMenu(playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEMBERS_FIRE:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(CompanyMember[comid][chosed][cmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的企业了");
		    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comAoFR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将成员请出企业");
			if(GetPlayerCompanyRank(playerid) <= CompanyMember[comid][chosed][cmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将这个成员请出企业");

			format(string, sizeof(string), "** 你已把 %s 请出了企业", GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]));
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<企业>> %s 把 %s 请出了企业", PlayerData[playerid][pName], GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]));
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			Log(companylog, INFO, "%s(%d)将企业%s(%d)的成员%s(%d)请出了企业", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], GetPlayerSqlName(CompanyMember[comid][chosed][cmMemberID]), CompanyMember[comid][chosed][cmMemberID]);
			DeleteCompanyMember(comid, CompanyMember[comid][chosed][cmMemberID]);
			ShowPlayerCompanyMenu(playerid);
			return 1;
		}
		case DIALOG_COMPANY_VEHICLE:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new vehicleid, stat[32], comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    vehicleid = GetGVarInt("DListID", listitem*1000+playerid);
		    if(VehData[vehicleid][vOwner] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的企业了");
		    switch(VehData[vehicleid][vStatus])
			{
				case VEH_NORMAL:
				{
					if(VehData[vehicleid][vLock] == 0) format(stat, sizeof(stat), "未上锁");
					else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
				}
				case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
				case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
				case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
				case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
			}
		    format(string, sizeof(string), ""#TEXT_WHITE"\t \n"#TEXT_FADEGREEN"取得载具\n"#TEXT_RED"载具报废\n名称:\t"#TEXT_SKYBLUE"%s\n车牌:\t%s\nID:\t%d\n入手价:\t"#TEXT_FADEGREEN"%d\n状态:\t%s"
			, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPlate], vehicleid, VehData[vehicleid][vPrice], stat);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_VEHICLE_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看载具", string, "选择", "取消");
			SetGVarInt("DDecideID", vehicleid, playerid);
		    return 1;
		}
		case DIALOG_COMPANY_VEHICLE_SET:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(VehData[vehicleid][vOwner] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的企业了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            GetVehicleForPlayer(playerid, vehicleid);
				}
				case 1:
				{
				    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comVehR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理载具");
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要报废载具%s吗?\n卖出获得的金额$%d将会存入企业资金", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPrice]/100);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_VEHICLE_SELL, DIALOG_STYLE_MSGBOX, "载具报废", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_COMPANY_VEHICLE_SELL:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(VehData[vehicleid][vOwner] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的企业了");
		    if(GetPlayerCompanyRank(playerid) != CompanyData[comid][comVehR] && CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理载具");

		    format(string, sizeof(string), "** 你已把企业载具 %s 卖出了", GetVehicleName(VehData[vehicleid][vModel]));
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<企业>> %s 把载具 %s 卖出了,企业资金增加了$%d", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPrice]/100);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
		    CompanyData[comid][comFund] += VehData[vehicleid][vPrice]/100;
		    Log(vehlog, INFO, "%s(%d)将企业%s(%d)载具%s(%d)卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    Log(companylog, INFO, "%s(%d)将企业%s(%d)载具%s(%d)卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    DeleteVehicle(vehicleid);
			ShowPlayerCompanyMenu(playerid);
			return 1;
		}
		case DIALOG_COMPANY_ESTATE:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(EstateData[chosed][eOwnerID] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的企业了");
		    format(string, sizeof(string), ""#TEXT_WHITE"%s\t \n导航\n出售地产", EstateData[chosed][eName]);
		    ShowPlayerDialog(playerid, DIALOG_COMPANY_ESTATE_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看地产", string, "选择", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_COMPANY_ESTATE_SET:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		    if(EstateData[chosed][eOwnerID] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的企业了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            SetPlayerGPS(playerid, EstateData[chosed][eX], EstateData[chosed][eY], EstateData[chosed][eZ]);
					format(string, sizeof(string), ""#TEXT_WHITE"已标记了"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE"的位置", EstateData[chosed][eName]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
				}
				case 1:
				{
				    if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地产");
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n卖出获得的金额$%d将会存入企业资金", EstateData[chosed][eName], EstateData[chosed][ePrice]/2);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "卖出地产", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_COMPANY_ESTATE_SELL:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				value = EstateData[chosed][ePrice]/2;
		    if(EstateData[chosed][eOwnerID] != CompanyData[comid][comID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的企业了");
		    if(GetPlayerCompanyRank(playerid) < CompanyData[comid][comER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地产");

		    format(string, sizeof(string), "** 你已把企业地产 %s 卖出了", EstateData[chosed][eName]);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<企业>> %s 把地产 %s 卖出了,企业资金增加了$%d", PlayerData[playerid][pName], EstateData[chosed][eName], value);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			Log(estatelog, INFO, "%s(%d)将企业%s(%d)地产%s(%d)以$%d的价格卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], EstateData[chosed][eName], EstateData[chosed][eID], value);
			Log(companylog, INFO, "%s(%d)将企业%s(%d)地产%s(%d)以$%d的价格卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], EstateData[chosed][eName], EstateData[chosed][eID], value);
		    CompanyData[comid][comFund] += value;
		    DeleteEstateOwner(chosed);
			ShowPlayerCompanyMenu(playerid);
			if(RemoveEstateFurniture(chosed) > 0)
			{
				format(string, sizeof(string), "** 地产内布置的物件已被移至该地产门口");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
		case DIALOG_COMPANY_BUSINESS:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DListID", listitem*1000+playerid),
				cmid = PlayerIDToCompanyMember(playerid, comid), liststr[256];
			switch(chosed)
			{
			    case BIS_TAXI:
			    {
			        if(CompanyData[comid][comTaxi] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有计程车业了");
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_TAXI) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理计程车业");
			        format(liststr, sizeof(liststr), ""#TEXT_WHITE"管理项目\t \n新增/移除负责人\n调整基底车资\t$%d\n调整后续费率\t$%d\n"#TEXT_LIGHTRED"解散计程车业", CompanyData[comid][comTaxiFare1], CompanyData[comid][comTaxiFare2]);
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_TAXI, DIALOG_STYLE_TABLIST_HEADERS, "计程车业", liststr, "选择", "关闭");
			    }
			    case BIS_BUS:
			    {
			        if(CompanyData[comid][comBus] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有客运业了");
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_BUS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理客运业");
			        format(liststr, sizeof(liststr), ""#TEXT_WHITE"管理项目\t \n新增/移除负责人\n调整车资\t$%d\n管理路线\n"#TEXT_LIGHTRED"解散客运业\t ", CompanyData[comid][comBusFare]);
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_BUS, DIALOG_STYLE_TABLIST_HEADERS, "客运业", liststr, "选择", "关闭");
			    }
			    case BIS_MEDIA:
			    {
			        ShowPlayerCompanyMediaMenu(playerid);
			    }
			}
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid),
		    	cmid = PlayerIDToCompanyMember(playerid, comid), liststr[256];
			if(CompanyData[comid][comMedia] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有媒体业了");
			switch(listitem)
			{
			    case 0:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO可以设定这个项目");
			    	static i, j, k, ComList[512], str[16];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(CompanyMember[comid][i][cmJoined] != MEMBER_JOINED){continue;}
						if(CompanyMember[comid][i][cmBisBoss] == BIS_MEDIA) format(str, 8, "媒体业");
						else if(CompanyMember[comid][i][cmBisBoss] == BIS_NONE) format(str, 8, "无");
						else format(str, 8, "其他");
						format(ComList, sizeof(ComList), "%s%s\t%d\n", ComList, GetPlayerSqlName(CompanyMember[comid][i][cmMemberID]), CompanyMember[comid][i][cmRank], CompanyMember[comid][i][cmPoint]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "媒体业负责人", ""#TEXT_WHITE"目前没有任何申请", "确认", "");}
					format(ComList, sizeof(ComList), "玩家名称\t阶级\t负责事业\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_BOSS, DIALOG_STYLE_TABLIST_HEADERS, "媒体业负责人", ComList, "设定", "关闭");
				}
				case 1:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        format(string, sizeof(string), ""#TEXT_WHITE"目前媒体业的收益共有$%d\n确认要将全数收益转移至企业资金吗?", CompanyData[comid][comMediaEarn]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_EARN, DIALOG_STYLE_MSGBOX, "媒体业资金", string, "是", "否");
				}
				case 2:
			    {
					static status[32];
					if(CompanyData[comid][comRadioAir] == 0) format(status, sizeof(status), ""#TEXT_FADEGREEN"播放排程清单");
					else format(status, sizeof(status), ""#TEXT_RED"停播排程清单");
			        format(liststr, sizeof(liststr), ""#TEXT_WHITE"\t \n发送电台消息\n立即播送音乐\n%s\n排程列表\t目前排程:编号%d(剩余:%d秒)\n新增排程\n更改电台名称\t目前:%s\n设定循环播放", status, CompanyData[comid][comRadioTrack], CompanyData[comid][comRadioAir], CompanyData[comid][comRadioName]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO, DIALOG_STYLE_TABLIST_HEADERS, "广播频道", liststr, "选择", "取消");
				}
				case 3:
			    {
					static status[32];
					if(GetGVarInt("TVAir", comid) == 0) format(status, sizeof(status), ""#TEXT_FADEGREEN"开始画面播送");
					else format(status, sizeof(status), ""#TEXT_RED"结束画面播送");
			        format(liststr, sizeof(liststr), ""#TEXT_WHITE"\t \n%s\n设定摄影机\n更改电视台名称\t目前:%s", status, CompanyData[comid][comTVName]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_TV, DIALOG_STYLE_TABLIST_HEADERS, "广播频道", liststr, "选择", "取消");
				}
				case 4:
			    {
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_DISBAND, DIALOG_STYLE_MSGBOX, "解散媒体业", ""#TEXT_WHITE"确认要解散媒体业?", "确认", "取消");
				}
			}
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_TV:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid),
				filmer = GetGVarInt("Filmer", comid);
			switch(listitem)
			{
			    case 0:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        if(GetGVarInt("TVAir", comid) == 0)
			        {
			        	if(GetGVarInt("Filming", filmer) == CAMERA_OFF) return SendClientMessage(playerid, COLOR_WHITE, "错误: 必须先设定要连线的摄影机才能开始播映");
			        	SetTVOnAir(comid, filmer);
			        	format(string, sizeof(string), "<<企业>> %s开始了电视频道的播映", PlayerData[playerid][pName]);
						SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			        }
			        else
			        {
			            SetTVOffAir(comid);
			            format(string, sizeof(string), "<<企业>> %s结束了电视频道的播映", PlayerData[playerid][pName]);
						SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			        }
			    }
			    case 1:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        new k, ComList[512], typestr[24];
			        ComList[0] = EOS, k = 0;
			        ForEachPlayer(i)
			        {
			            if(PlayerData[i][pCompany] != CompanyData[comid][comID]) continue;
			            if(GetGVarInt("Filming", i) == CAMERA_OFF) continue;
			            switch(GetGVarInt("Filming", i))
			            {
							case CAMERA_VEHICLE: format(typestr, sizeof(typestr), "空拍机");
							case CAMERA_PLAYER: format(typestr, sizeof(typestr), "随行摄影机");
							case CAMERA_SET: format(typestr, sizeof(typestr), "定点摄影机");
						}
						if(filmer == i) format(ComList, sizeof(ComList), "%s"#TEXT_YELLOW"%s\t%s\n", ComList, PlayerData[i][pName], typestr);
			            else format(ComList, sizeof(ComList), "%s"#TEXT_WHITE"%s\t%s\n", ComList, PlayerData[i][pName], typestr);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "选择摄影机", ""#TEXT_WHITE"目前没有任何成员正在使用摄影机", "确认", "");}
					format(ComList, sizeof(ComList), "成员名称\t摄影类型\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_TV_FILMER, DIALOG_STYLE_TABLIST_HEADERS, "选择摄影机", ComList, "连线", "关闭");
			    }
			    case 2:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_TV_NAME, DIALOG_STYLE_INPUT, "电视频道名称", ""#TEXT_WHITE"请输入电视频道的新名称", "确认", "取消");
			    }
			}
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_TV_FILMER:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
			SetGVarInt("Filmer", chosed, comid);
			if(GetGVarInt("TVAir", comid) == 1)
			{
				SetTVOnAir(comid, chosed);
			}
			format(string, sizeof(string), "** 已将摄影画面设定为成员%s所拍摄的画面", PlayerData[chosed][pName]);
			SendClientMessage(playerid, COLOR_GREEN, string);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_TV_NAME:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_TV_NAME, DIALOG_STYLE_INPUT, "电视频道名称", ""#TEXT_WHITE"你输入的名称为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			if(strlen(inputtext) > 16)
			{
				return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_TV_NAME, DIALOG_STYLE_INPUT, "电视频道名称", ""#TEXT_WHITE"电视频道长度过长,请重新输入", "确认", "关闭");
			}
			mysql_format(DEFAULT_SESSION, CompanyData[comid][comTVName], 24, "%s", inputtext);
			format(string, sizeof(string), "<<企业>> %s 将电视频道的名称改为%s", PlayerData[playerid][pName], inputtext);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid);
			switch(listitem)
			{
			    case 0:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_CHAT, DIALOG_STYLE_INPUT, "电台消息", ""#TEXT_WHITE"请输入消息内容\n所有正在收听企业电台的玩家都会看到你所发送的消息", "确认", "取消");
			    }
			    case 1:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_MP3, DIALOG_STYLE_INPUT, "播送音乐", ""#TEXT_WHITE"请输入要播放的歌曲mp3网址\n"#TEXT_YELLOW"所有正在播放的排程将会被中断", "确认", "取消");
			    }
			    case 2:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        if(GetTotalRadioTrack(comid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前还没有任何排程,请先新增新排程清单");
			        if(CompanyData[comid][comRadioAir] == 0)
			        {
			            DeleteGVar("RadioPlaying", comid);
			            CompanyData[comid][comRadioTrack] = -1;
			            PlayRadioNextTrack(comid);
			            format(string, sizeof(string), "<<企业>> %s开始播放了电台的预定排程", PlayerData[playerid][pName]);
						SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
						PlayerTuneToRadio(playerid, comid);
			        }
					else
					{
			            StopRadioAir(comid);
			            format(string, sizeof(string), "<<企业>> %s结束了电台排程的播放", PlayerData[playerid][pName]);
						SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			        }
			    }
			    case 3:
			    {
					ShowPlayerCompanyRadioList(playerid, comid, 0);
			    }
			    case 4:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        if(GetTotalRadioTrack(comid) >= MAX_PLAYLISTS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 播放排程数量已达上限");
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"新播放排程", ""#TEXT_WHITE"选择新增种类\n音乐播放\n消息发送\n空白间隔", "选择", "取消");
			    }
			    case 5:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_NAME, DIALOG_STYLE_INPUT, "电台名称", ""#TEXT_WHITE"请输入电台的新名称", "确认", "取消");
			    }
			    case 6:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			        if(CompanyData[comid][comRadioLoop] == 1)
			        {
			            SendClientMessage(playerid, COLOR_WHITE, "** 已关闭循环播放,当排程曲目播毕时将会停止播送");
			            CompanyData[comid][comRadioLoop] = 0;
			        }
					else
					{
			            SendClientMessage(playerid, COLOR_WHITE, "** 已开启循环播放,当排程曲目播毕时将会从第一首开始重新播送");
			            CompanyData[comid][comRadioLoop] = 1;
			        }
			    }
			}
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_LIST:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid),
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			if(chosed == PREV_PAGE) ShowPlayerCompanyRadioList(playerid, comid, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerCompanyRadioList(playerid, comid, GetGVarInt("Page", playerid)+1);
      		else
		    {
				format(string, sizeof(string), ""#TEXT_WHITE"已选择%s\n"#TEXT_FADEGREEN"播放\n"#TEXT_WHITE"编辑\n"#TEXT_RED"删除", RadioTrack[comid][chosed][rdTitle]);
				ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_SET, DIALOG_STYLE_TABLIST_HEADERS, "播放排程", string, "确认", "取消");
				SetGVarInt("DDecideID", chosed, playerid);
			}
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_SET:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid);
			switch(listitem)
			{
			    case 0:
			    {
			        DeleteGVar("RadioPlaying", comid);
			        PlayRadioTrack(comid, chosed);
			        format(string, sizeof(string), "<<企业>> %s开始播放了电台排程%s", PlayerData[playerid][pName], RadioTrack[comid][chosed][rdTitle]);
					SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
					PlayerTuneToRadio(playerid, comid);
				}
				case 1:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要编辑排程%s吗?", RadioTrack[comid][chosed][rdTitle]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT1, DIALOG_STYLE_MSGBOX, "播放排程", string, "确认", "取消");
				}
				case 2:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要删除已建立的排程%s吗?", RadioTrack[comid][chosed][rdTitle]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_DEL, DIALOG_STYLE_MSGBOX, "播放排程", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT1:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid);
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			if(GetTotalRadioTrack(comid) >= MAX_PLAYLISTS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 播放排程数量已达上限");
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"编辑播放排程", ""#TEXT_WHITE"选择更换种类\n音乐播放\n消息发送\n空白间隔", "选择", "取消");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT2:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
			switch(listitem)
			{
			    case 0: SetGVarInt("RType", RADIO_MUSIC, playerid);
			    case 1: SetGVarInt("RType", RADIO_TEXT, playerid);
			    case 2: SetGVarInt("RType", RADIO_SPACE, playerid);
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT3, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入要更改的排程标题/曲名", "确认", "取消");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT3:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new type = GetGVarInt("RType", playerid);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT3, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			switch(type)
			{
			    case RADIO_MUSIC:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT4, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入要播放的音乐mp3网址", "确认", "取消");
			    }
			    case RADIO_TEXT:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT5, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入要显示的消息内容", "确认", "取消");
			    }
			    case RADIO_SPACE:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT6, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入间格持续时间(秒)", "确认", "取消");
			    }
			}
			SetGVarString("RTitle", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT4:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
            if(isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT4, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT5, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入播放时显示的消息内容", "确认", "取消");
			SetGVarString("RURL", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT5:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
            if(isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT5, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT6, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"请输入持续时间(秒)", "确认", "取消");
			SetGVarString("RText", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_EDT6:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	chosed = GetGVarInt("DDecideID", playerid),
				type = GetGVarInt("RType", playerid),
				url[1024], title[32], text[144],
				hrs, mins, secs,
				length = strval(inputtext);
			if(length < 1)
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT6, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"秒数不得小于1", "确认", "关闭");
			}
			if(length > 3600)
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_EDT6, DIALOG_STYLE_INPUT, "编辑播放排程", ""#TEXT_WHITE"秒数不得大于1小时", "确认", "关闭");
			}
			GetGVarString("RURL", url, sizeof(url), playerid);
			GetGVarString("RTitle", title, sizeof(title), playerid);
			GetGVarString("RText", text, sizeof(text), playerid);
			switch(type)
			{
			    case RADIO_MUSIC:
				{
					RadioTrack[comid][chosed][rdType] = type;
					RadioTrack[comid][chosed][rdLength] = length;
					mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdTitle], 64, "%s", title);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdURL], 1024, "%s", url);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdText], 144, "%s", text);
				}
			    case RADIO_TEXT:
			    {
					RadioTrack[comid][chosed][rdType] = type;
					RadioTrack[comid][chosed][rdLength] = length;
					mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdTitle], 64, "%s", title);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdURL], 1024, " ", url);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdText], 144, "%s", text);
				}
			    case RADIO_SPACE:
			    {
					RadioTrack[comid][chosed][rdType] = type;
					RadioTrack[comid][chosed][rdLength] = length;
					mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdTitle], 64, "%s", title);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdURL], 1024, " ", url);
		            mysql_format(DEFAULT_SESSION, RadioTrack[comid][chosed][rdText], 144, " ", text);
				}
			}
			SecondToHMS(length, hrs, mins, secs);
			format(string, sizeof(string),  ""#TEXT_WHITE"排程%s已编辑完成,长度为%02d:%02d", title, mins, secs);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_END, DIALOG_STYLE_MSGBOX, "编辑播放排程", string, "确认", "");
			if(CompanyData[comid][comRadioAir] > 0 && CompanyData[comid][comRadioTrack] == chosed)
			{
			    PlayRadioTrack(comid, chosed);
			}
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_DEL:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid);
			if(CompanyData[comid][comRadioAir] > 0 && CompanyData[comid][comRadioTrack] == chosed)
			{
			    PlayRadioNextTrack(comid);
			}
			DeleteRadioTrack(comid, chosed);
			format(string, sizeof(string), ""#TEXT_WHITE"已删除排程%s", RadioTrack[comid][chosed][rdTitle]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_CHAT:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_CHAT, DIALOG_STYLE_INPUT, "电台消息", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			PlayerTuneToRadio(playerid, comid);
			format(string, sizeof(string), "<<%s>> %s", CompanyData[comid][comRadioName], inputtext);
			SendRadioMessage(comid, COLOR_BROWN, string);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_CHAT, DIALOG_STYLE_INPUT, "电台消息", ""#TEXT_WHITE"你可以继续输入下一封消息", "确认", "关闭");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_MP3:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
			if(CompanyData[comid][comRadioAir] > 0)
			{
			    CompanyData[comid][comRadioAir] = 0;
			    format(string, sizeof(string), "<<企业>> %s 中断了电台的播放排程并播放了新曲目", PlayerData[playerid][pName], inputtext);
				SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			}
			format(string, sizeof(string), "** 你开始播放了新曲目");
			SendClientMessage(playerid, COLOR_YELLOW, string);
			SetGVarInt("RadioPlaying", 600, comid);
			SetGVarString("RadioTURL", inputtext, comid);
			PlayRadioMusic(comid, inputtext);
			PlayerTuneToRadio(playerid, comid);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_CHAT, DIALOG_STYLE_INPUT, "电台消息", ""#TEXT_WHITE"需要发送相关消息给听众吗?", "确认", "关闭");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_MAX:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid);
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_MEDIA) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理媒体业");
			if(GetTotalRadioTrack(comid) >= MAX_PLAYLISTS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 播放排程数量已达上限");
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"新播放排程", ""#TEXT_WHITE"选择新增种类\n音乐播放\n消息发送\n空白间隔", "选择", "取消");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_ADD1:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
			switch(listitem)
			{
			    case 0: SetGVarInt("RType", RADIO_MUSIC, playerid);
			    case 1: SetGVarInt("RType", RADIO_TEXT, playerid);
			    case 2: SetGVarInt("RType", RADIO_SPACE, playerid);
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD2, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入排程的标题/曲名", "确认", "取消");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_ADD2:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new type = GetGVarInt("RType", playerid);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD2, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			switch(type)
			{
			    case RADIO_MUSIC:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD3, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入要播放的音乐mp3网址", "确认", "取消");
			    }
			    case RADIO_TEXT:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD4, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入要显示的消息内容", "确认", "取消");
			    }
			    case RADIO_SPACE:
			    {
			        ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD5, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入间格持续时间(秒)", "确认", "取消");
			    }
			}
			SetGVarString("RTitle", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_ADD3:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
            if(isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD3, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD4, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入播放时显示的消息内容", "确认", "取消");
			SetGVarString("RURL", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_ADD4:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
            if(isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD4, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD5, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"请输入持续时间(秒)", "确认", "取消");
			SetGVarString("RText", inputtext, playerid);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_ADD5:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				type = GetGVarInt("RType", playerid),
				url[1024], title[32], text[144],
				hrs, mins, secs,
				length = strval(inputtext);
			if(length < 1)
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD5, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"秒数不得小于1", "确认", "关闭");
			}
			if(length > 3600)
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_ADD5, DIALOG_STYLE_INPUT, "新播放排程", ""#TEXT_WHITE"秒数不得大于1小时", "确认", "关闭");
			}
			GetGVarString("RURL", url, sizeof(url), playerid);
			GetGVarString("RTitle", title, sizeof(title), playerid);
			GetGVarString("RText", text, sizeof(text), playerid);
			switch(type)
			{
			    case RADIO_MUSIC: AddRadioTrack(comid, type, length, title, url, text);
			    case RADIO_TEXT: AddRadioTrack(comid, type, length, title, "", text);
			    case RADIO_SPACE: AddRadioTrack(comid, type, length, title, "", "");
			}
			SecondToHMS(length, hrs, mins, secs);
			format(string, sizeof(string),  ""#TEXT_WHITE"排程%s已新增,长度为%02d:%02d\n当已制定排程可以至请广播页面播放", title, mins, secs);
			ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_END, DIALOG_STYLE_MSGBOX, "新播放排程", string, "确认", "");
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_END:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    ShowPlayerCompanyMenu(playerid);
		    return 1;
		}
		case DIALOG_COMPANY_MEDIA_RADIO_NAME:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_NAME, DIALOG_STYLE_INPUT, "电台名称", ""#TEXT_WHITE"你输入的名称为空白,或是含有无法使用的字元", "确认", "关闭");
			}
			if(strlen(inputtext) > 16)
			{
				return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_NAME, DIALOG_STYLE_INPUT, "电台名称", ""#TEXT_WHITE"电台名称长度过长,请重新输入", "确认", "关闭");
			}

			// 特别是针对玩家直接输入的MySQL资料字串
			// 务必进行MYSQL安全格式化
			mysql_format(DEFAULT_SESSION, CompanyData[comid][comRadioName], 24, "%s", inputtext);
			format(string, sizeof(string), "<<企业>> %s 将广播电台的名称改为%s", PlayerData[playerid][pName], inputtext);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_COMPANY_MEDIA_EARN:
		{
		    if (!response) return ShowPlayerCompanyMediaMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
			if(CompanyData[comid][comMediaEarn] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前媒体业没有任何收入");
			CompanyData[comid][comFund] += CompanyData[comid][comMediaEarn];
			format(string, sizeof(string), "<<企业>> %s 将媒体业的收益共$%d转至了企业资金,目前企业资金共有$%d", PlayerData[playerid][pName], CompanyData[comid][comMediaEarn], CompanyData[comid][comFund]);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			Log(companylog, INFO, "企业%s(%d)获得了媒体业收益资金$%d", CompanyData[comid][comName], CompanyData[comid][comID], CompanyData[comid][comMediaEarn]);
			CompanyData[comid][comMediaEarn] = 0;
			return 1;
		}
		case DIALOG_COMPANY_TAXI:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid);
			if(CompanyData[comid][comTaxi] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有计程车业了");
			switch(listitem)
			{
			    case 0:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO可以设定这个项目");
			    	static i, j, k, ComList[512], str[16];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(CompanyMember[comid][i][cmJoined] != MEMBER_JOINED){continue;}
						if(CompanyMember[comid][i][cmBisBoss] == BIS_TAXI) format(str, 8, "计程车业");
						else if(CompanyMember[comid][i][cmBisBoss] == BIS_NONE) format(str, 8, "无");
						else format(str, 8, "其他");
						format(ComList, sizeof(ComList), "%s%s\t%d\n", ComList, GetPlayerSqlName(CompanyMember[comid][i][cmMemberID]), CompanyMember[comid][i][cmRank], CompanyMember[comid][i][cmPoint]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "计程车业负责人", ""#TEXT_WHITE"目前没有任何申请", "确认", "");}
					format(ComList, sizeof(ComList), "玩家名称\t阶级\t负责事业\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_BOSS, DIALOG_STYLE_TABLIST_HEADERS, "计程车业负责人", ComList, "设定", "关闭");
				}
				case 1:
			    {
					format(string, sizeof(string), ""#TEXT_WHITE"请设定基底车资\n目前为 "#TEXT_FADEGREEN"$%d", CompanyData[comid][comTaxiFare1]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_TAXI_FARE1, DIALOG_STYLE_INPUT, "计程车基底车资", string, "设定", "取消");
				}
				case 2:
			    {
					format(string, sizeof(string), ""#TEXT_WHITE"请设定后续费率\n目前为 "#TEXT_FADEGREEN"$%d", CompanyData[comid][comTaxiFare2]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_TAXI_FARE2, DIALOG_STYLE_INPUT, "计程车后续费率", string, "设定", "取消");
				}
				case 3:
			    {
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_DISBAND, DIALOG_STYLE_MSGBOX, "解散计程车业", string, ""#TEXT_WHITE"确认要解散计程车业?", "取消");
				}
			}
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_TAXI_FARE1:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid),
		        value = strval(inputtext);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_TAXI) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理计程车业");
		    if(value > 2000 || value < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 基底车资只能介于$0~$2000之间");
			CompanyData[comid][comTaxiFare1] = value;
			format(string, sizeof(string), "<<企业>> %s 将计程车事业的基底车资设定为$%d", PlayerData[playerid][pName], value);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_COMPANY_TAXI_FARE2:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid),
		        value = strval(inputtext);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_TAXI) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理计程车业");
		    if(value > 500 || value < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 后续费率只能介于$0~$500之间");
			CompanyData[comid][comTaxiFare2] = value;
			format(string, sizeof(string), "<<企业>> %s 将计程车事业的后续费率设定为$%d", PlayerData[playerid][pName], value);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_COMPANY_BUS:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid);
			if(CompanyData[comid][comBus] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有客运业了");
			switch(listitem)
			{
			    case 0:
			    {
			        if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO可以设定这个项目");
			    	static i, j, k, ComList[512], str[16];
				    ComList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(CompanyMember[comid][i][cmJoined] != MEMBER_JOINED){continue;}
						if(CompanyMember[comid][i][cmBisBoss] == BIS_BUS) format(str, 8, "客运业");
						else if(CompanyMember[comid][i][cmBisBoss] == BIS_NONE) format(str, 8, "无");
						else format(str, 8, "其他");
						format(ComList, sizeof(ComList), "%s%s\t%d\n", ComList, GetPlayerSqlName(CompanyMember[comid][i][cmMemberID]), CompanyMember[comid][i][cmRank], CompanyMember[comid][i][cmPoint]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "客运业负责人", ""#TEXT_WHITE"目前没有任何成员", "确认", "");}
					format(ComList, sizeof(ComList), "玩家名称\t阶级\t负责事业\n%s", ComList);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_BOSS, DIALOG_STYLE_TABLIST_HEADERS, "客运业负责人", ComList, "设定", "关闭");
				}
				case 1:
			    {
					format(string, sizeof(string), ""#TEXT_WHITE"请设定车资\n目前为 "#TEXT_FADEGREEN"$%d", CompanyData[comid][comBusFare]);
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUS_FARE, DIALOG_STYLE_INPUT, "客运基底车资", string, "设定", "取消");
				}
				case 2:
			    {
			        ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
				}
				case 3:
			    {
					ShowPlayerDialog(playerid, DIALOG_COMPANY_BUSINESS_DISBAND, DIALOG_STYLE_MSGBOX, "解散客运业", string, ""#TEXT_WHITE"确认要解散客运业?", "取消");
				}
			}
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_COMPANY_BUS_FARE:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
		    	cmid = PlayerIDToCompanyMember(playerid, comid),
		        value = strval(inputtext);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_BUS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理客运业");
		    if(value > 5000 || value < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 车资只能介于$0~$5000之间");
			CompanyData[comid][comBusFare] = value;
			format(string, sizeof(string), "<<企业>> %s 将客运事业的车资设定为$%d", PlayerData[playerid][pName], value);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_BUSROUTE:
		{
		    if(!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				cmid = PlayerIDToCompanyMember(playerid, comid);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_BUS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理客运业");
		    switch(listitem)
			{
			    case 0:
			    {
			        if(GetCompanyBusRoutes(comid) >= MAX_BUS_ROUTES) return SendClientMessage(playerid, COLOR_WHITE, "错误: 已经无法再新增更多路线了");
			        ShowPlayerDialog(playerid, DIALOG_BUSROUTE_CREATE, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"新增路线", ""#TEXT_WHITE"输入路线名称", "确认", "取消");
			    }
			    case 1:
			    {
			        new rlist[256], i, j, l;
			        rlist[0] = EOS;
     				for(i = l = 0, j = MAX_BUS_ROUTES; i < j; i++)
					{
						if(BusRoute[i][brCreated] == 0) { continue;}
						if(BusRoute[i][brComID] == CompanyData[comid][comID])
						{
							format(rlist, sizeof(rlist), "%s%s\t%d\n", rlist, BusRoute[i][brName], BusRoute[i][brMaxStop]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"编辑路线", ""#TEXT_WHITE"目前尚未建立任何路线", "确定", "");}
					format(rlist, sizeof(rlist), "路线名称\t停靠站数量\n%s", rlist);
					ShowPlayerDialog(playerid, DIALOG_BUSROUTE_EDIT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"编辑路线", rlist, "选择", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_BUSROUTE_EDIT:
		{
		    if(!response) return ShowPlayerCompanyMenu(playerid);
			new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			format(string, sizeof(string),  ""#TEXT_WHITE"你选择了路线 "#TEXT_FADEGREEN"%s\n设定停靠站\n更改路线名称\n删除路线", BusRoute[chosed][brName]);
			ShowPlayerDialog(playerid, DIALOG_BUSROUTE_EDIT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"编辑路线", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_BUSROUTE_EDIT_CHECK:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			}
			new chosed = GetGVarInt("DDecideID", playerid);
			switch(listitem)
			{
			    case 0:
			    {
					if(GetGVarInt("EditBS", playerid) == 1)
					{
						if(GetGVarInt("EBRID", playerid) == chosed)
						{
							format(string, sizeof(string), "** 你结束了客运路线 %s 的编辑,资料已储存", BusRoute[chosed][brName]);
							SendClientMessage(playerid, COLOR_WHITE, string);
							SaveBusRoute(chosed);
							DisablePlayerCheckpoint(playerid);
							DeleteGVar("EBRID", playerid);
							DeleteGVar("EditBS", playerid);
						}
						else
						{
							format(string, sizeof(string), "** 你目前在编辑客运路线 %s ,无法再编辑其他路线", BusRoute[GetGVarInt("EBRID", playerid)][brName]);
			    			SendClientMessage(playerid, COLOR_WHITE, string);
						}
					}
					else
					{
					    if(IsPlayerBusy(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你得先完成手边的工作才能设置停靠站");
					    if(GetGVarInt("Mission", playerid) > 0)  return SendClientMessage(playerid, COLOR_WHITE, "错误: 正在进行任务时无法设置停靠站");
					    if(!IsABus(GetPlayerVehicleID(playerid))) return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你必须先上一台客运才能开始设置停靠站");
					    SetGVarInt("EditBS", 1, playerid);
					    SetGVarInt("EBRID", chosed, playerid);
					    format(string, sizeof(string), "** 你开始编辑客运路线 %s,请到想新增停靠站的位置后按下左ALT键新增", BusRoute[chosed][brName]);
						SendClientMessage(playerid, COLOR_WHITE, string);
						SendClientMessage(playerid, COLOR_WHITE, "** 按左CTRL键删除上一个检查点,离开载具将结束编辑!");
						format(string, sizeof(string), "** 目前有 %d 个停靠站", BusRoute[chosed][brMaxStop]);
						SendClientMessage(playerid, COLOR_YELLOW, string);
						if(BusRoute[chosed][brMaxStop] > 0)
						{
						    new lastbs = BusRoute[chosed][brMaxStop]-1;
						    SetPlayerCheckpoint(playerid, BusStop[chosed][lastbs][bsX], BusStop[chosed][lastbs][bsY], BusStop[chosed][lastbs][bsZ], 10.0);
						}
					}
			    }
			    case 1:
			    {
			        ShowPlayerDialog(playerid, DIALOG_BUSROUTE_EDIT_NAME, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"命名路线", ""#TEXT_WHITE"输入路线名称", "确认", "取消");
			    }
				case 2:
				{
				    if(GetGVarInt("EditBS", playerid) == 1)
					{
						if(GetGVarInt("EBRID", playerid) == chosed)
						{
							return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你目前还在编辑这个路线,请先结束编辑才能删除");
						}
					}
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要删除客运路线 %s 吗?", BusRoute[chosed][brName]);
					ShowPlayerDialog(playerid, DIALOG_BUSROUTE_DELETE, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"客运路线", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_BUSROUTE_EDIT_NAME:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			}
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BUSROUTE_CREATE, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"命名路线", ""#TEXT_WHITE"你没有输入任何名称或是含有无法使用的字元", "确认", "取消");
			}
			new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				cmid = PlayerIDToCompanyMember(playerid, comid),
				chosed = GetGVarInt("DDecideID", playerid);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_BUS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理客运业");

			format(string, sizeof(string), "<<企业>> %s 更改了路线 %s 的名称为 %s", PlayerData[playerid][pName], BusRoute[chosed][brName], inputtext);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			mysql_format(DEFAULT_SESSION, BusRoute[chosed][brName], 24, "%s", inputtext);
			return 1;
		}
		case DIALOG_BUSROUTE_DELETE:
		{
            if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			}
			new chosed = GetGVarInt("DDecideID", playerid),
				comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);

			format(string, sizeof(string), "<<企业>> %s 删除了客运路线路线 %s", PlayerData[playerid][pName], BusRoute[chosed][brName]);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			DeleteBusRoute(chosed);
			ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"路线删除完成\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			return 1;
		}
		case DIALOG_BUSROUTE_CREATE:
		{
		    if(!response)
			{
				return ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"选择以下操作\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			}
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BUSROUTE_CREATE, DIALOG_STYLE_INPUT, ""#TEXT_FADEGREEN"新增路线", ""#TEXT_WHITE"你没有输入任何名称或是含有无法使用的字元", "确认", "取消");
			}
			new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				cmid = PlayerIDToCompanyMember(playerid, comid);
		    if(CompanyData[comid][comCEO] != PlayerData[playerid][pID] && CompanyMember[comid][cmid][cmBisBoss] != BIS_BUS) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限管理客运业");

			new rid = CreateBusRoute(inputtext, CompanyData[comid][comID]);
			ShowPlayerDialog(playerid, DIALOG_BUSROUTE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"客运路线", ""#TEXT_WHITE"新增完成,请选择管理路线来新增停靠站\n"#TEXT_FADEGREEN"新增路线\n"#TEXT_WHITE"管理路线", "选择", "关闭");
			format(string, sizeof(string), "<<企业>> %s 为客运业增加了新的路线 %s", PlayerData[playerid][pName], BusRoute[rid][brName]);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			return 1;
		}
		case DIALOG_BUSROUTE_NEWSTOP:
		{
		    if(!response) return 1;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BUSROUTE_NEWSTOP, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"新增停靠站", ""#TEXT_WHITE"站名不得为空白或含无法使用的字元,请重新输入", "确认", "取消");
			}
		    new vehicleid = GetPlayerVehicleID(playerid),
		    	rid = GetGVarInt("EBRID", playerid),
				Float:px, Float:py, Float:pz;

			GetVehiclePos(vehicleid, px, py, pz);

			AddBusStop(rid, inputtext, px, py, pz);
			BusRoute[rid][brMaxStop] += 1;
			SetPlayerCheckpoint(playerid, px, py, pz, 10.0);
			format(string, sizeof(string), "** 已新增停靠站 %s,目前有 %d 个停靠站", inputtext, BusRoute[rid][brMaxStop]);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			return 1;
		}
		case DIALOG_COMPANY_BUSINESS_BOSS:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosedbis = GetGVarInt("DDecideID", playerid),
				chosedcm = GetGVarInt("DListID", listitem*1000+playerid),
				bisstr[16];
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO可以设定这个项目");
			switch(chosedbis)
			{
			    case BIS_TAXI: format(bisstr, sizeof(bisstr), "计程车业");
			    case BIS_BUS: format(bisstr, sizeof(bisstr), "客运运输业");
			    case BIS_HELI: format(bisstr, sizeof(bisstr), "直升机运输业");
			    case BIS_AIRLINE: format(bisstr, sizeof(bisstr), "航空业");
			    case BIS_BOAT: format(bisstr, sizeof(bisstr), "海上运输业");
			    case BIS_MEDIA: format(bisstr, sizeof(bisstr), "媒体业");
			    case BIS_ANIMAL: format(bisstr, sizeof(bisstr), "畜牧业");
			    case BIS_TRADE: format(bisstr, sizeof(bisstr), "贸易业");
			}
			if(CompanyMember[comid][chosedcm][cmBisBoss] == chosedbis)
			{
			    CompanyMember[comid][chosedcm][cmBisBoss] = 0;
			    format(string, sizeof(string), "<<企业>> CEO取消了 %s 的%s负责人头衔", GetPlayerSqlName(CompanyMember[comid][chosedcm][cmMemberID]), bisstr);
			    SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			}
			else
			{
			    CompanyMember[comid][chosedcm][cmBisBoss] = chosedbis;
			    format(string, sizeof(string), "<<企业>> CEO 给予了 %s %s的负责人头衔", GetPlayerSqlName(CompanyMember[comid][chosedcm][cmMemberID]), bisstr);
			    SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			}
			return 1;
		}
		case DIALOG_COMPANY_BUSINESS_DISBAND:
		{
		    if (!response) return ShowPlayerCompanyMenu(playerid);
		    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
				chosed = GetGVarInt("DDecideID", playerid),
				bisstr[16];
			if(CompanyData[comid][comCEO] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有企业的CEO可以设定这个项目");
			switch(chosed)
			{
			    case BIS_TAXI:
				{
					format(bisstr, sizeof(bisstr), "计程车业");
					CompanyData[comid][comTaxi] = 0;
				}
			    case BIS_BUS:
				{
					format(bisstr, sizeof(bisstr), "客运运输业");
					CompanyData[comid][comBus] = 0;
				}
			    case BIS_HELI:
			    {
					format(bisstr, sizeof(bisstr), "直升机运输业");
			    	CompanyData[comid][comHeli] = 0;
				}
			    case BIS_AIRLINE:
				{
					format(bisstr, sizeof(bisstr), "航空业");
					CompanyData[comid][comAirline] = 0;
				}
			    case BIS_BOAT:
				{
					format(bisstr, sizeof(bisstr), "海上运输业");
					CompanyData[comid][comBoat] = 0;
				}
			    case BIS_MEDIA:
				{
					format(bisstr, sizeof(bisstr), "媒体业");
					CompanyData[comid][comMedia] = 0;
				}
			    case BIS_ANIMAL:
				{
					format(bisstr, sizeof(bisstr), "畜牧业");
					CompanyData[comid][comAnimal] = 0;
				}
			    case BIS_TRADE:
				{
					format(bisstr, sizeof(bisstr), "贸易业");
					CompanyData[comid][comTrade] = 0;
				}
			}
			format(string, sizeof(string), "<<企业>> CEO 将企业的 %s 解散了", bisstr);
			SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
			Log(companylog, INFO, "%s(%d)将企业%s(%d)的%s解散了", PlayerData[playerid][pName], PlayerData[playerid][pID], CompanyData[comid][comName], CompanyData[comid][comID], bisstr);
			return 1;
		}
		case DIALOG_BOOK_MAT:
		{
		    if (!response) return 1;
			static book[512], page, i, j, k;
			book[0] = EOS;
			page = GetGVarInt("Page", playerid)+1;
            SetGVarInt("Page", page, playerid);
			for(i = k = 0, j = sizeof(ItemsList_USE[]); i < j; i++)
			{
				if(ItemsList_USE[i][iuType] != IU_MAT) continue;
				if(k < page)
				{
					k ++;
					continue;
				}
				else
				{
				    k = i;
				    break;
				}
			}
			if(k <= page)
			{
			    format(book, sizeof(book), ""#TEXT_FADEYELLOW"已到页尾,请再翻至页首");
			    ShowPlayerDialog(playerid, DIALOG_BOOK_MAT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"材料之书", book, "页首", "关闭");
			    SetGVarInt("Page", -1, playerid);
			}
			else
			{
				format(book, sizeof(book), ""#TEXT_FADEYELLOW"%s\n%s", ItemsList_USE[i][iuName], ItemsList_USE[i][iuDes]);
				ShowPlayerDialog(playerid, DIALOG_BOOK_MAT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"材料之书", book, "下一页", "关闭");
			}
			return 1;
		}
		case DIALOG_BOOK_MIX:
		{
		    if (!response) return 1;
		    new book[1024], title[32], slot1[32], slot2[32], slot3[32], i, j, page;
		    book[0] = EOS;
		    page = GetGVarInt("Page", playerid)+1;
		    SetGVarInt("Page", page, playerid);
			for(i = 0, j = sizeof(MixList); i < j; i++)
			{
				if(MixList[i][mxReqDrug] == 1 || MixList[i][mxReqArm] == 1) continue;
				switch(page)
				{
				    case 0:
				    {
				        if(MixList[i][mxType] == 1 && MixList[i][mxReqFire] == 0) format(title, sizeof(title), ""#TEXT_FADEGREEN"组合之章");
						else continue;
					}
					case 1:
				    {
				        if(MixList[i][mxType] == 1 && MixList[i][mxReqFire] == 1) format(title, sizeof(title), ""#TEXT_YELLOW"烧成之章");
						else continue;
					}
					case 2:
				    {
				        if(MixList[i][mxType] == 2) format(title, sizeof(title), ""#TEXT_FADEBLUE"工具之章");
						else continue;
					}
				}
				if(MixList[i][mxSlot1] != 0) format(slot1, sizeof(slot1), " [A]%s*%d", ItemsList_USE[MixList[i][mxSlot1]][iuName], MixList[i][mxSlot1A]);
				else format(slot1, sizeof(slot1), " ");
				if(MixList[i][mxSlot2] != 0) format(slot2, sizeof(slot2), " [B]%s*%d", ItemsList_USE[MixList[i][mxSlot2]][iuName], MixList[i][mxSlot2A]);
				else format(slot2, sizeof(slot2), " ");
				if(MixList[i][mxSlot3] != 0) format(slot3, sizeof(slot3), " [C]%s*%d", ItemsList_USE[MixList[i][mxSlot3]][iuName], MixList[i][mxSlot3A]);
				else format(slot3, sizeof(slot3), " ");

				if(page == 2)format(book, sizeof(book), "%s%s\t%s\t%s\t%s\n", book, slot1, slot2, slot3, ItemsList_EQ[MixList[i][mxResult]][ieqName]);
				else format(book, sizeof(book), "%s%s\t%s\t%s\t%s\n", book, slot1, slot2, slot3, ItemsList_USE[MixList[i][mxResult]][iuName]);
			}
			if(page > 2)
			{
			    format(book, sizeof(book), ""#TEXT_FADEYELLOW"已到页尾,请再翻至页首");
			    ShowPlayerDialog(playerid, DIALOG_BOOK_MIX, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"合成之书", book, "页首", "关闭");
			    SetGVarInt("Page", -1, playerid);
			}
			else
			{
				format(book, sizeof(book), ""#TEXT_FADERED"栏位A\t"#TEXT_LIGHTYELLOW"栏位B\t"#TEXT_FADEBLUE"栏位C\t"#TEXT_WHITE"结果\n%s", book);
				ShowPlayerDialog(playerid, DIALOG_BOOK_MIX, DIALOG_STYLE_TABLIST_HEADERS, title, book, "下一页", "关闭");
			}
			return 1;
		}
		case DIALOG_ATM:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0: ShowPlayerDialog(playerid, DIALOG_ATM_DEPOSIT, DIALOG_STYLE_INPUT, "存款", ""#TEXT_WHITE"请输入存款金额", "确认", "取消");
		        case 1: ShowPlayerDialog(playerid, DIALOG_ATM_WITHDRAW, DIALOG_STYLE_INPUT, "提款", ""#TEXT_WHITE"请输入提款金额", "确认", "取消");
		        case 2: ShowPlayerDialog(playerid, DIALOG_ATM_TRANSFER1, DIALOG_STYLE_INPUT, "汇款", ""#TEXT_WHITE"请输入要汇款至的玩家ID/名称", "确认", "取消");
		    }
		}
		case DIALOG_ATM_DEPOSIT:
		{
		    if (!response)
			{
				return ShowPlayerATMMenu(playerid);
			}
		    new value = strval(inputtext);
		    if(PlayerData[playerid][pCash] < value) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "存款", ""#TEXT_WHITE"交易失败\n你的现金不足", "关闭", "");
		    if(value < 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "存款", ""#TEXT_WHITE"交易失败\n存款金额不得小于0", "关闭", "");
		    GiveMoney(playerid, -value);
		    Log(moneylog, INFO, "%s(%d)在银行存款存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], value);
		    PlayerData[playerid][pBank] += value;
		    format(string, sizeof(string), ""#TEXT_FADEGREEN"$%d"#TEXT_WHITE"已顺利存入您的银行帐户\n目前帐户余额为"#TEXT_YELLOW"$%d", value, PlayerData[playerid][pBank]);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "交易完成", string, "确认", "");
		    return 1;
		}
		case DIALOG_ATM_WITHDRAW:
		{
		    if (!response)
			{
				return ShowPlayerATMMenu(playerid);
			}
		    new value = strval(inputtext);
		    if(PlayerData[playerid][pBank] < value) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "提款", ""#TEXT_WHITE"交易失败\n你的存款余额不足", "关闭", "");
		    if(value < 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "提款", ""#TEXT_WHITE"交易失败\n提款金额不得小于0", "关闭", "");

		    GiveMoney(playerid, value);
		    Log(moneylog, INFO, "%s(%d)在银行存款领出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], value);
		    PlayerData[playerid][pBank] -= value;
		    format(string, sizeof(string), ""#TEXT_WHITE"顺利从您的银行帐户提领"#TEXT_FADEGREEN"$%d"#TEXT_WHITE"\n目前帐户余额为"#TEXT_YELLOW"$%d", value, PlayerData[playerid][pBank]);
		    ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "交易完成", string, "确认", "");
		    UpdatePlayerMission(playerid, 1, 5);//玩家完成任务1的stage4 给他stage5的条件
		    return 1;
		}
		case DIALOG_ATM_TRANSFER1:
		{
		    if (!response)
			{
				return ShowPlayerATMMenu(playerid);
			}
		    new giveplayerid;
		    if(PlayerData[playerid][pBank] < 1) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n你的存款余额不足", "关闭", "");
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid)) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n该玩家ID/名称不在线上或是不存在", "关闭", "");
			if(giveplayerid == playerid) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n你无法汇款给自己", "关闭", "");
            GetPlayerName(giveplayerid, playername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"请输入要汇款给 %s 的金额", playername);
		    ShowPlayerDialog(playerid, DIALOG_ATM_TRANSFER2, DIALOG_STYLE_INPUT, "汇款", string, "确认汇款", "取消");
		    SetGVarInt("DDecideID", giveplayerid, playerid);
		    return 1;
		}
		case DIALOG_ATM_TRANSFER2:
		{
		    if (!response) return ShowPlayerDialog(playerid, DIALOG_ATM_TRANSFER1, DIALOG_STYLE_INPUT, "汇款", ""#TEXT_WHITE"请输入要汇款至的玩家ID/名称", "确认", "取消");
		    new value = strval(inputtext),
		        giveplayerid = GetGVarInt("DDecideID", playerid);
		    if(PlayerData[playerid][pBank] < value) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n你的存款余额不足", "关闭", "");
		    if(value < 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n汇款金额不得小于0", "关闭", "");
		    if(!GetGVarInt("Logged", giveplayerid)) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "汇款", ""#TEXT_WHITE"交易失败\n该玩家ID/名称已经离线", "关闭", "");

		    GetPlayerName(giveplayerid, playername, MAX_PLAYER_NAME);
		    PlayerData[playerid][pBank] -= value;
		    PlayerData[giveplayerid][pBank] += value;
		    Log(moneylog, INFO, "%s(%d)汇给了%s(%d)共$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[giveplayerid][pName], PlayerData[giveplayerid][pID], value);
		    format(string, sizeof(string), ""#TEXT_WHITE"已顺利将"#TEXT_FADEGREEN"$%d"#TEXT_WHITE"汇款至"#TEXT_ORANGE"%s"#TEXT_WHITE"的银行帐户\n目前帐户余额为"#TEXT_YELLOW"$%d", value, playername, PlayerData[playerid][pBank]);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "交易完成", string, "确认", "");
		    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		    format(string, sizeof(string), "<<ATM>> "#TEXT_WHITE"你收到了来自"#TEXT_YELLOW"%s"#TEXT_WHITE"的汇款,金额为"#TEXT_FADEGREEN"$%d", playername, value);
		    SendClientMessage(giveplayerid, COLOR_FADEBLUE, string);
		    return 1;
		}
		case DIALOG_VSTORE:
		{
		    if (!response) return 1;
		    new vehicleid = GetGVarInt("DVehID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
                    ShowPlayerBagMenu(playerid, 1);
                }
                case 1:
                {
                    ShowPlayerItemStoreMenu(playerid, 1, vehicleid, 0);
                }
            }
            return 1;
        }
        case DIALOG_VSTORE_LOAD:
		{
		    if (!response) return 1;
		    new vehicleid = GetGVarInt("DVehID", playerid),
		        slot = GetGVarInt("DListID", listitem*1000+playerid);
			if(slot == PREV_PAGE) ShowPlayerItemStoreMenu(playerid, 1, vehicleid, GetGVarInt("Page", playerid)-1);
		    else if(slot == NEXT_PAGE) ShowPlayerItemStoreMenu(playerid, 1, vehicleid, GetGVarInt("Page", playerid)+1);
      		else
		    {
		        new id = VehicleItem[vehicleid][slot][viItemID],
					type = VehicleItem[vehicleid][slot][viType];
				switch(type)
				{
				    case ITEM_WEAPON:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的弹药数,目前有 %d", WeaponsList[id][wName], VehicleItem[vehicleid][slot][viCount]);
				        ShowPlayerDialog(playerid, DIALOG_VSTORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_USE:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的数量,目前有 %d 个\n每个占用空间:%d,你的背包剩余容量:%d",
						ItemsList_USE[id][iuName], VehicleItem[vehicleid][slot][viCount], ItemsList_USE[id][iuSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_VSTORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_EQ:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"确认要取出 %s 吗?目前尚有 %d 个\n占用空间:%d,你的背包剩余容量:%d",
						ItemsList_EQ[id][ieqName], VehicleItem[vehicleid][slot][viCount], ItemsList_EQ[id][ieqSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_VSTORE_LOAD_CHECK, DIALOG_STYLE_MSGBOX, "取出道具", string, "使用", "关闭");
					}
				}
				SetGVarInt("DDecideID", slot, playerid);
			}
			return 1;
		}
		case DIALOG_VSTORE_LOAD_CHECK:
		{
		    if (!response) return 1;
		    new vehicleid = GetGVarInt("DVehID", playerid),
		        slot = GetGVarInt("DDecideID", playerid),
		        id = VehicleItem[vehicleid][slot][viItemID],
				type = VehicleItem[vehicleid][slot][viType],
				amount;
			switch(type)
			{
			    case ITEM_WEAPON:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > VehicleItem[vehicleid][slot][viCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 载具里面没有这么多弹药");
			        GivePlayerWeapon(playerid, id, amount);
		            GiveVehicleItem(vehicleid, ITEM_WEAPON, id, -amount);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出"#TEXT_FADEGREEN"%d"#TEXT_WHITE"弹药的 "#TEXT_FADEGREEN"%s", GetVehicleName(GetVehicleModel(vehicleid)), amount, WeaponsList[id][wName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
				}
				case ITEM_USE:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > VehicleItem[vehicleid][slot][viCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 载具里面没有这么多数量");
			        if(amount*ItemsList_USE[id][iuSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 1, id, amount);
		            GiveVehicleItem(vehicleid, ITEM_USE, id, -amount);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出"#TEXT_FADEGREEN"%d"#TEXT_WHITE"个 "#TEXT_FADEGREEN"%s", GetVehicleName(GetVehicleModel(vehicleid)), amount, ItemsList_USE[id][iuName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
				}
				case ITEM_EQ:
			    {
			        if(ItemsList_EQ[id][ieqSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 2, id, 1);
		            GiveVehicleItem(vehicleid, ITEM_EQ, id, -1);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出 "#TEXT_FADEGREEN"%s", GetVehicleName(GetVehicleModel(vehicleid)), ItemsList_EQ[id][ieqName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
				}
			}
			return 1;
		}
        case DIALOG_VSTORE_SAVE:
		{
		    if (!response) return 1;
		    new vehicleid = GetGVarInt("DVehID", playerid),
				type = GetGVarInt("PutItemType", playerid),
				chosed = GetGVarInt("DDecideID", playerid),
				space = GetVehicleSpace(vehicleid),
				amount, uspace = GetVehicleUsedSpace(vehicleid);
		    switch(type)
		    {
		        case ITEM_WEAPON:
		        {
					static gunid, ammo;
		            amount = strval(inputtext);
		            GetPlayerWeaponData(playerid, chosed, gunid, ammo);
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(amount > ammo) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多弹药");
		            if(uspace + WeaponsList[gunid][wSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具没有空间放入这个武器");
		            GivePlayerWeapon(playerid, gunid, -amount);
		            GiveVehicleItem(vehicleid, ITEM_WEAPON, gunid, amount);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入"#TEXT_YELLOW"%d"#TEXT_WHITE"弹药的 "#TEXT_YELLOW"%s", GetVehicleName(GetVehicleModel(vehicleid)), amount, WeaponsList[gunid][wName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
                }
                case ITEM_USE:
		        {
		            amount = strval(inputtext);
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(PlayerHaveItem(playerid, 1, chosed) < amount) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多道具");
		            if(ItemsList_USE[chosed][iuType] == IU_TICKET) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在储物间中放入这个道具");
		            if(uspace + ItemsList_USE[chosed][iuSpace]*amount > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具没有空间放入这么多道具");
		            GivePlayerItem(playerid, 1, chosed, -amount);
		            GiveVehicleItem(vehicleid, ITEM_USE, chosed, amount);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入"#TEXT_YELLOW"%d"#TEXT_WHITE"个 "#TEXT_YELLOW"%s", GetVehicleName(GetVehicleModel(vehicleid)), amount, ItemsList_USE[chosed][iuName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
                }
                case ITEM_EQ:
		        {
		            if(!PlayerHaveItem(playerid, 2, chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这个道具");
                    if(ItemsList_EQ[chosed][ieqType] == IEQ_SKIN || ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在载具中放入这个道具");
		            if(uspace + ItemsList_EQ[chosed][ieqSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具没有空间放入这个道具");
		            GivePlayerItem(playerid, 2, chosed, -1);
		            GiveVehicleItem(vehicleid, ITEM_EQ, chosed, 1);
		            format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入 "#TEXT_YELLOW"%s", GetVehicleName(GetVehicleModel(vehicleid)), ItemsList_EQ[chosed][ieqName]);
		            SendClientMessage(playerid, COLOR_PINKRED, string);
                }
            }
            return 1;
        }
        case DIALOG_ESTATE_STORE:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
                    ShowPlayerBagMenu(playerid, 2);
                }
                case 1:
                {
                    ShowPlayerItemStoreMenu(playerid, 2, eid, 0);
                }
                case 2:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"金库存款: "#TEXT_FADEGREEN"$%d\n"#TEXT_FADEGREEN"存入\n"#TEXT_YELLOW"取出", EstateData[eid][eMoney]);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE, DIALOG_STYLE_TABLIST_HEADERS, "金库", string, "选择", "关闭");
                }
            }
            return 1;
        }
        case DIALOG_ESTATE_SAFE:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid);
		    if(!PlayerCanSetEstate(playerid, eid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限使用这个地产的金库");
			switch(listitem)
			{
			    case 0:
			    {
			        format(string, sizeof(string), ""#TEXT_WHITE"金库存款: "#TEXT_FADEGREEN"$%d\n"#TEXT_WHITE"请输入存入金额", EstateData[eid][eMoney]);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_DEPOSIT, DIALOG_STYLE_INPUT, "金库", string, "确认", "关闭");
				}
				case 1:
			    {
			        format(string, sizeof(string), ""#TEXT_WHITE"金库存款: "#TEXT_FADEGREEN"$%d\n"#TEXT_WHITE"请输入取出金额", EstateData[eid][eMoney]);
					ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_WITHDRAW, DIALOG_STYLE_INPUT, "金库", string, "确认", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_ESTATE_SAFE_DEPOSIT:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid),
				amount = strval(inputtext);
			if(amount < 0) return ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_DEPOSIT, DIALOG_STYLE_INPUT, "金库", ""#TEXT_WHITE"金额不得小于0\n请重新输入", "确认", "关闭");
			if(PlayerData[playerid][pCash] < amount) return ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_DEPOSIT, DIALOG_STYLE_INPUT, "金库", ""#TEXT_WHITE"你身上没有这么多钱\n请重新输入", "确认", "关闭");
			GiveMoney(playerid, -amount);
			Log(moneylog, INFO, "%s(%d)于地产%s(%d)的金库存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount);
			Log(estatelog, INFO, "%s(%d)于地产%s(%d)的金库存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount);

			EstateData[eid][eMoney] += amount;
			switch(EstateData[eid][eOwnerType])
			{
				case ESTATE_OWNER_PLAYER:
				{
					format(string, sizeof(string), "** 已在%s的金库存入了$%d,目前金库有:%d", EstateData[eid][eName], amount, EstateData[eid][eMoney]);
					SendClientMessage(playerid, COLOR_FADEGREEN, string);
				}
				case ESTATE_OWNER_COMPANY:
				{
					format(string, sizeof(string), "<<企业>> %s 在%s的金库存入了$%d,目前金库有:%d", PlayerData[playerid][pName], amount, EstateData[eid][eMoney]);
					SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
				}
				case ESTATE_OWNER_GANG:
				{
					format(string, sizeof(string), "<<帮会>> %s 从%s的金库存入了$%d,目前金库有:%d", PlayerData[playerid][pName], amount, EstateData[eid][eMoney]);
					SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
				}
			}
			format(string, sizeof(string), "** %s 在这个地产的金库存入了一点钱", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
		case DIALOG_ESTATE_SAFE_WITHDRAW:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid),
				amount = strval(inputtext);
			if(amount < 0) return ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_WITHDRAW, DIALOG_STYLE_INPUT, "金库", ""#TEXT_WHITE"金额不得小于0\n请重新输入", "确认", "关闭");
			if(amount > EstateData[eid][eMoney]) return ShowPlayerDialog(playerid, DIALOG_ESTATE_SAFE_DEPOSIT, DIALOG_STYLE_INPUT, "金库", ""#TEXT_WHITE"这个地产没有这么多钱\n请重新输入", "确认", "关闭");
			GiveMoney(playerid, amount);
			Log(moneylog, INFO, "%s(%d)于地产%s(%d)的金库领出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount);
			Log(estatelog, INFO, "%s(%d)于地产%s(%d)的金库领出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], amount);
			EstateData[eid][eMoney] -= amount;
			switch(EstateData[eid][eOwnerType])
			{
				case ESTATE_OWNER_PLAYER:
				{
					format(string, sizeof(string), "** 已在%s的金库取出了$%d,目前金库有:%d", EstateData[eid][eName], amount, EstateData[eid][eMoney]);
					SendClientMessage(playerid, COLOR_FADEGREEN, string);
				}
				case ESTATE_OWNER_COMPANY:
				{
					format(string, sizeof(string), "<<企业>> %s 在%s的金库取出了$%d,目前金库有:%d", PlayerData[playerid][pName], amount, EstateData[eid][eMoney]);
					SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
				}
				case ESTATE_OWNER_GANG:
				{
					format(string, sizeof(string), "<<帮会>> %s 从%s的金库取出了$%d,目前金库有:%d", PlayerData[playerid][pName], amount, EstateData[eid][eMoney]);
					SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
				}
			}
			format(string, sizeof(string), "** %s 从这个地产的金库拿出了一点钱", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
		}
        case DIALOG_ESTATE_STORE_LOAD:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid),
		        slot = GetGVarInt("DListID", listitem*1000+playerid);
			if(slot == PREV_PAGE) ShowPlayerItemStoreMenu(playerid, 2, eid, GetGVarInt("Page", playerid)-1);
		    else if(slot == NEXT_PAGE) ShowPlayerItemStoreMenu(playerid, 2, eid, GetGVarInt("Page", playerid)+1);
      		else
		    {
		        new id = EstateItem[eid][slot][eiItemID],
					type = EstateItem[eid][slot][eiType];
				switch(type)
				{
				    case ITEM_WEAPON:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的弹药数,目前有 %d", WeaponsList[id][wName], EstateItem[eid][slot][eiCount]);
				        ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_USE:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的数量,目前有 %d 个\n每个占用空间:%d,你的背包剩余容量:%d",
						ItemsList_USE[id][iuName], EstateItem[eid][slot][eiCount], ItemsList_USE[id][iuSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_EQ:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"确认要取出 %s 吗?目前尚有 %d 个\n占用空间:%d,你的背包剩余容量:%d",
						ItemsList_EQ[id][ieqName], EstateItem[eid][slot][eiCount], ItemsList_EQ[id][ieqSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_LOAD_CHECK, DIALOG_STYLE_MSGBOX, "取出道具", string, "使用", "关闭");
					}
				}
				SetGVarInt("DDecideID", slot, playerid);
			}
			return 1;
		}
		case DIALOG_ESTATE_STORE_LOAD_CHECK:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid),
		        slot = GetGVarInt("DDecideID", playerid),
		        id = EstateItem[eid][slot][eiItemID],
				type = EstateItem[eid][slot][eiType],
				amount;
			switch(type)
			{
			    case ITEM_WEAPON:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > EstateItem[eid][slot][eiCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 地产内没有这么多弹药");
			        GivePlayerWeapon(playerid, id, amount);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_WEAPON, id, -amount);
					switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出"#TEXT_FADEGREEN"%d"#TEXT_WHITE"弹药的 "#TEXT_FADEGREEN"%s", EstateData[eid][eName], amount, WeaponsList[id][wName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 从 %s 取出了%d弹药的%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, WeaponsList[id][wName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 从 %s 取出了%d弹药的%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, WeaponsList[id][wName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
				}
				case ITEM_USE:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > EstateItem[eid][slot][eiCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 地产里面没有这么多数量");
			        if(amount*ItemsList_USE[id][iuSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 1, id, amount);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_USE, id, -amount);
					switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出"#TEXT_FADEGREEN"%d"#TEXT_WHITE"个 "#TEXT_FADEGREEN"%s", EstateData[eid][eName], amount, ItemsList_USE[id][iuName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 从 %s 取出了%d个%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[id][iuName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 从 %s 取出了%d个%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[id][iuName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
				}
				case ITEM_EQ:
			    {
			        if(ItemsList_EQ[id][ieqSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 2, id, 1);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_EQ, id, -1);
					switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已从 %s 取出 "#TEXT_FADEGREEN"%s", EstateData[eid][eName], ItemsList_EQ[id][ieqName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 从 %s 取出了%s", PlayerData[playerid][pName], EstateData[eid][eName], ItemsList_EQ[id][ieqName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 从 %s 取出了%s", PlayerData[playerid][pName], EstateData[eid][eName], ItemsList_EQ[id][ieqName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
				}
			}
			return 1;
		}
        case DIALOG_ESTATE_STORE_SAVE:
		{
		    if (!response) return 1;
		    new eid = GetGVarInt("DDecideEID", playerid),
				type = GetGVarInt("PutItemType", playerid),
				chosed = GetGVarInt("DDecideID", playerid),
				space = GetEstateSpace(eid),
				amount, uspace = GetEstateUsedSpace(eid);
		    switch(type)
		    {
		        case ITEM_WEAPON:
		        {
					static gunid, ammo;
		            amount = strval(inputtext);
		            GetPlayerWeaponData(playerid, chosed, gunid, ammo);
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(amount > ammo) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多弹药");
		            if(uspace + WeaponsList[gunid][wSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产没有空间放入这个武器");
		            GivePlayerWeapon(playerid, gunid, -amount);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_WEAPON, gunid, amount);
					switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入"#TEXT_YELLOW"%d"#TEXT_WHITE"弹药的 "#TEXT_YELLOW"%s", EstateData[eid][eName], amount, WeaponsList[gunid][wName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 在 %s 放入了%d弹药的%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, WeaponsList[gunid][wName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 在 %s 放入了%d弹药的%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, WeaponsList[gunid][wName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
                }
                case ITEM_USE:
		        {
		            amount = strval(inputtext);
		            if(ItemsList_USE[chosed][iuType] == IU_TICKET) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在储物间中放入这个道具");
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(PlayerHaveItem(playerid, 1, chosed) < amount) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多道具");
		            if(uspace + ItemsList_USE[chosed][iuSpace]*amount > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产没有空间放入这么多道具");
		            GivePlayerItem(playerid, 1, chosed, -amount);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_USE, chosed, amount);
					switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入"#TEXT_YELLOW"%d"#TEXT_WHITE"个 "#TEXT_YELLOW"%s", EstateData[eid][eName], amount, ItemsList_USE[chosed][iuName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 在 %s 放入了%d个%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[chosed][iuName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 在 %s 放入了%d个%s", PlayerData[playerid][pName], EstateData[eid][eName], amount, ItemsList_USE[chosed][iuName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
                }
                case ITEM_EQ:
		        {
		            if(!PlayerHaveItem(playerid, 2, chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这个道具");
                    if(ItemsList_EQ[chosed][ieqType] == IEQ_SKIN || ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE || ItemsList_EQ[chosed][ieqType] == IEQ_SKINX) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在储物间中放入这个道具");
		            if(uspace + ItemsList_EQ[chosed][ieqSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个地产没有空间放入这个道具");
		            GivePlayerItem(playerid, 2, chosed, -1);
		            GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_EQ, chosed, 1);
		            switch(EstateData[eid][eOwnerType])
					{
						case ESTATE_OWNER_PLAYER:
						{
							format(string, sizeof(string), "** "#TEXT_WHITE"已在 %s 里放入"#TEXT_YELLOW"1"#TEXT_WHITE"个 "#TEXT_YELLOW"%s", EstateData[eid][eName], ItemsList_EQ[chosed][ieqName]);
							SendClientMessage(playerid, COLOR_PINKRED, string);
						}
						case ESTATE_OWNER_COMPANY:
						{
							format(string, sizeof(string), "<<企业>> %s 在 %s 放入了1个%s", PlayerData[playerid][pName], EstateData[eid][eName], ItemsList_EQ[chosed][ieqName]);
							SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
						}
						case ESTATE_OWNER_GANG:
						{
							format(string, sizeof(string), "<<帮会>> %s 在 %s 放入了1个%s", PlayerData[playerid][pName], EstateData[eid][eName], ItemsList_EQ[chosed][ieqName]);
							SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
						}
					}
                }
            }
            return 1;
        }
        case DIALOG_GANG_NONE:
		{
		    if (!response) return 1;
		    switch(listitem)
		    {
		        case 0:
				{
				    new i, j, k, GList[512];
				    GList[0] = EOS;
				    for(i = k = 0, j = MAX_GANGS; i < j; i++)
					{
					    if(GangData[i][gCreated] == 0){continue;}
						format(GList, sizeof(GList), "%s{%06x}%s[%s]\t%s\n", GList, GangData[i][gColor] >>> 8, GangData[i][gName], GangData[i][gShort], GetPlayerSqlName(GangData[i][gBoss]));
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "帮会列表", ""#TEXT_WHITE"目前没有任何帮会", "确认", "");}
					format(GList, sizeof(GList), "帮会名称\t首领\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_LIST, DIALOG_STYLE_TABLIST_HEADERS, "帮会列表", GList, "查看", "关闭");
				}
				case 1:
				{
				    if(PlayerData[playerid][pLevel] < 15) SendClientMessage(playerid, COLOR_WHITE, "必须要达到等级15才能创立帮会");
				    if(PlayerData[playerid][pGang] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经在一个帮会里面了");
					ShowPlayerDialog(playerid, DIALOG_GANG_CREATE, DIALOG_STYLE_MSGBOX, "创立帮会", ""#TEXT_WHITE"确定要创立帮会吗?", "确认", "关闭");
				}
			}
			return 1;
		}
		case DIALOG_GANG_LIST:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				infostr[512], members = GetGangMembers(chosed);
		    format(infostr, sizeof(infostr), "{%06x}%s[%s]\t \n首领\t"#TEXT_LIGHTRED"%s\n成员数\t"#TEXT_LIGHTGREEN"%d/%d\n地产数量:\t%d",
			GangData[chosed][gColor] >>> 8, GangData[chosed][gName], GangData[chosed][gShort], GetPlayerSqlName(GangData[chosed][gBoss]), members, MAX_GMEMBERS, GetGangEstates(chosed));
		    format(infostr, sizeof(infostr), "%s", infostr);
			ShowPlayerDialog(playerid, DIALOG_GANG_LIST_INFO, DIALOG_STYLE_TABLIST_HEADERS, "帮会资料", infostr, "申请加入", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_GANG_LIST_INFO:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(PlayerData[playerid][pLevel] < 15) SendClientMessage(playerid, COLOR_WHITE, "必须要达到等级15才能加入帮会");
		    if(PlayerData[playerid][pGang] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的帮会了");
		    if(GetGangMembers(chosed) >= MAX_GMEMBERS) return SendClientMessage(playerid, COLOR_WHITE, "这间企业已经额满了");
		    ShowPlayerDialog(playerid, DIALOG_GANG_APPLY, DIALOG_STYLE_INPUT, "申请加入", ""#TEXT_WHITE"请输入申请时要发送给该帮会的消息", "确认", "关闭");
		    return 1;
		}
		case DIALOG_GANG_APPLY:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    AddGangMember(chosed, PlayerData[playerid][pID], inputtext, MEMBER_APPLYING);
		    format(string, sizeof(string), "** 已向帮会 %s 发送申请,若申请通过你将会自动成为该帮会成员", GangData[chosed][gName]);
		    SendClientMessage(playerid, COLOR_YELLOW, string);
		    format(string, sizeof(string), "<<帮会>> 玩家 %s 向帮会发送了加入申请", PlayerData[playerid][pName]);
		    SendCompanyMessage(GangData[chosed][gID], COLOR_LIGHTRED, string);
		    return 1;
		}
		case DIALOG_GANG_CREATE:
		{
		    if (!response) return 1;
		    if(PlayerData[playerid][pGang] != -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经隶属于别的帮会了");
		    ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_NAME, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"请输入"#TEXT_LIGHTGREEN"帮会名称", "下一步", "关闭");
		    return 1;
		}
		case DIALOG_GANG_CREATE_NAME:
		{
		    if (!response) return 1;
		    new i, j;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_NAME, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"你输入的名称为空白,或是含有无法使用的字元", "下一步", "关闭");
			}
			for(i = 0, j = MAX_GANGS; i < j ; i++)
    		{
    		    if(GangData[i][gCreated] == 0) continue;
	            if(strcmp(inputtext, GangData[i][gName]) == 0 && !isnull(GangData[i][gName]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_NAME, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"这个帮会名称已经被使用了,请重新输入", "下一步", "关闭");
				}
			}
			format(string, sizeof(string), ""#TEXT_WHITE"名称为%s\n请输入"#TEXT_LIGHTGREEN"帮会缩写\n帮会缩写只能由4个以下的英数字组成,可于日后修改", inputtext);
      		ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_SHORT, DIALOG_STYLE_INPUT, "创立帮会", string, "下一步", "关闭");
		    SetGVarString("GangName", inputtext, playerid);
		    return 1;
		}
		case DIALOG_GANG_CREATE_SHORT:
		{
		    if (!response) return 1;
		    new colorstr[1024], i, j;
		    colorstr[0] = EOS;
		    if(isnull(inputtext) || !IsStringOnlyHaveLetter(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_SHORT, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"你输入的缩写为空白,或是含有无法使用的字元", "下一步", "关闭");
			}
			if(strlen(inputtext) > 4)
			{
				return ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_SHORT, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"帮会缩写长度不得超过4个英数字,请重新输入", "下一步", "关闭");
			}
			for(i = 0, j = MAX_GANGS; i < j ; i++)
    		{
    		    if(GangData[i][gCreated] == 0) continue;
	            if(strcmp(inputtext, GangData[i][gShort]) == 0 && !isnull(GangData[i][gShort]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_SHORT, DIALOG_STYLE_INPUT, "创立帮会", ""#TEXT_WHITE"这个帮会缩写已经被使用了,请重新输入", "下一步", "关闭");
				}
			}
		    format(colorstr, sizeof(colorstr), ""#TEXT_WHITE"缩写为%s,请选择帮会颜色\n"#TEXT_DARKRED"深红\n"#TEXT_RED"红色\n"#TEXT_FADERED"浅红\n"#TEXT_VIOLET"淡紫\n"#TEXT_PINK"粉红\n"#TEXT_LIGHTRED"亮红\n"#TEXT_ORANGE"橘色\n", inputtext);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_LIGHTORANGE"亮橘\n"#TEXT_YELLOW"黄色\n"#TEXT_FADEYELLOW"浅黄\n"#TEXT_LIGHTYELLOW"亮黄\n"#TEXT_YELLOWGREEN"黄绿\n"#TEXT_DARKYELLOWGREEN"暗黄绿\n"#TEXT_LIGHTGREEN"亮绿\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEGREEN"浅绿\n"#TEXT_GREEN"绿色\n"#TEXT_DARKGREEN"暗绿\n"#TEXT_BLUEGREEN"蓝绿\n"#TEXT_LIGHTBLUE"亮蓝\n"#TEXT_FADEBLUE"浅蓝\n"#TEXT_SKYBLUE"天蓝\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_WATERBLUE"水蓝\n"#TEXT_BLUE"蓝色\n"#TEXT_PURPLE"紫色\n"#TEXT_LIGHTPURPLE"亮紫\n"#TEXT_PINKRED"桃红\n"#TEXT_BLOODRED"血红\n"#TEXT_DARKBROWN"暗棕\n", colorstr);
		    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEBROWN"淡棕\n"#TEXT_BROWN"棕色\n"#TEXT_SANDYELLOW"沙黄", colorstr);
		    ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_COLOR, DIALOG_STYLE_TABLIST_HEADERS, "创立帮会", colorstr, "下一步", "关闭");
		    SetGVarString("GangShort", inputtext, playerid);
		    return 1;
		}
		case DIALOG_GANG_CREATE_COLOR:
		{
		    if (!response) return 1;
		    new gname[16], sname[8], color, string2[512];
			GetGVarString("GangName", gname, sizeof(gname), playerid);
			GetGVarString("GangShort", sname, sizeof(sname), playerid);
		    switch(listitem)
		    {
		        case 0: color = PLAYER_DARKRED;
		        case 1: color = PLAYER_RED;
		        case 2: color = PLAYER_FADERED;
		        case 3: color = PLAYER_VIOLET;
		        case 4: color = PLAYER_PINK;
		        case 5: color = PLAYER_LIGHTRED;
		        case 6: color = PLAYER_ORANGE;
		        case 7: color = PLAYER_LIGHTORANGE;
		        case 8: color = PLAYER_YELLOW;
		        case 9: color = PLAYER_FADEYELLOW;
		        case 10: color = PLAYER_LIGHTYELLOW;
		        case 11: color = PLAYER_YELLOWGREEN;
		        case 12: color = PLAYER_DARKYELLOWGREEN;
		        case 13: color = PLAYER_LIGHTGREEN;
		        case 14: color = PLAYER_FADEGREEN;
		        case 15: color = PLAYER_GREEN;
		        case 16: color = PLAYER_DARKGREEN;
		        case 17: color = PLAYER_BLUEGREEN;
		        case 18: color = PLAYER_LIGHTBLUE;
		        case 19: color = PLAYER_FADEBLUE;
		        case 20: color = PLAYER_SKYBLUE;
		        case 21: color = PLAYER_WATERBLUE;
		        case 22: color = PLAYER_BLUE;
		        case 23: color = PLAYER_PURPLE;
		        case 24: color = PLAYER_LIGHTPURPLE;
		        case 25: color = PLAYER_PINKRED;
		        case 26: color = PLAYER_BLOODRED;
		        case 27: color = PLAYER_DARKBROWN;
		        case 28: color = PLAYER_FADEBROWN;
		        case 29: color = PLAYER_BROWN;
		        case 30: color = PLAYER_SANDYELLOW;
		    }
		    SetGVarInt("GangColor", color, playerid);
		    format(string2, sizeof(string2), ""#TEXT_WHITE"请选择帮会种类,帮会种类会影响到首领能使用的增益\n");
		    format(string2, sizeof(string2), "%s"#TEXT_WHITE"飞车党: 消耗体力产生一个恢复蓝圈,骑乘机车的成员只要碰到蓝圈就会恢复生命及载具耐久度\n", string2);
		    format(string2, sizeof(string2), "%s"#TEXT_WHITE"家族: 持续消耗体力使范围内的成员每10秒后恢复生命\n", string2);
		    format(string2, sizeof(string2), "%s"#TEXT_WHITE"血盟: 消耗体力使所在地盘内的成员瞬间恢复大量生命\n", string2);
		    format(string2, sizeof(string2), "%s"#TEXT_WHITE"教团: 消耗体力使接下来短时间内所有死亡的成员会于原地复活\n", string2);
		    format(string2, sizeof(string2), "%s"#TEXT_WHITE"后援会: 额外提升首领的伤害,成员越多增益越多\n", string2);
		    ShowPlayerDialog(playerid, DIALOG_GANG_CREATE_TYPE, DIALOG_STYLE_TABLIST_HEADERS, "创立帮会", string2, "成立帮会", "关闭");
		    return 1;
		}
		case DIALOG_GANG_CREATE_TYPE:
		{
		    if (!response) return 1;
		    new gname[16], sname[8], color, type;
			GetGVarString("GangName", gname, sizeof(gname), playerid);
			GetGVarString("GangShort", sname, sizeof(sname), playerid);
			color = GetGVarInt("GangColor", playerid);
			switch(listitem)
			{
			    case 0: type = GANG_BIKER;
			    case 1: type = GANG_FAMILY;
			    case 2: type = GANG_OG;
			    case 3: type = GANG_RELIGION;
			    case 4: type = GANG_STAR;
			}
		    new gangid = CreateGang(PlayerData[playerid][pID], type, gname, sname, color);
		    SetPlayerTimerEx(playerid, "SetPlayerCreateGang", 1000, 0, "ii", playerid, gangid);
		    return 1;
		}
		case DIALOG_GANG:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    switch(listitem)
		    {
		    	case 0:
				{
				    new i, j, k, GList[512];
				    GList[0] = EOS;
				    for(i = k = 0, j = MAX_GMEMBERS; i < j; i++)
					{
					    if(GangMember[gangid][i][gmJoined] != MEMBER_JOINED){continue;}
						format(GList, sizeof(GList), "%s%s\t%d\t%d\n", GList, GetPlayerSqlName(GangMember[gangid][i][gmMemberID]), GangMember[gangid][i][gmRank], GangMember[gangid][i][gmPoint]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "成员一览", ""#TEXT_WHITE"目前没有任何成员", "确认", "");}
					format(GList, sizeof(GList), "成员名称\t阶级\t点数\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, "成员一览", GList, "查看", "关闭");
				}
				case 1:
				{
				    ShowPlayerGangTurfList(playerid, gangid, 0);
				}
				case 2:
				{
				    ShowPlayerDialog(playerid, DIALOG_GANG_SKILL, DIALOG_STYLE_TABLIST_HEADERS, "帮会技能", ""#TEXT_WHITE"帮会技能为只有身为帮会成员才能使用的技能\n首领技能\n抢夺地盘\n束缚玩家", "查看", "返回");
				}
				case 3:
				{
				    new i, j, k, GList[512], typestr[32], elecbill;
				    GList[0] = EOS, typestr[0] = EOS;
				    for(i = k = 0, j = MAX_ESTATES; i < j; i++)
					{
					    if(EstateData[i][eOwnerType] != ESTATE_OWNER_GANG){continue;}
					    if(EstateData[i][eOwnerID] == GangData[gangid][gID])
					    {
					        switch(EstateData[i][eType])
					        {
					            case ESTATE_CLUBHOUSE:
								{
									format(typestr, sizeof(typestr), "会所");
									elecbill = PriceData[prcElec]*60;
								}
					            case ESTATE_WAREHOUSE:
								{
									format(typestr, sizeof(typestr), "仓库");
									elecbill = PriceData[prcElec]*60*2;
								}
					            case ESTATE_FACTORY:
								{
									format(typestr, sizeof(typestr), "工厂");
									if(EstateData[i][eSwitch] == 1) elecbill = PriceData[prcElec]*60*4;
									else elecbill = 0;
								}
					            case ESTATE_HANGAR:
								{
									format(typestr, sizeof(typestr), "机库");
									elecbill = PriceData[prcElec]*60*2;
								}
					            case ESTATE_BOATYARD:
								{
									format(typestr, sizeof(typestr), "船坞");
									elecbill = PriceData[prcElec]*60*2;
								}
					        }
							format(GList, sizeof(GList), "%s%s\t%s\t$%d\t%d\n", GList, EstateData[i][eName], typestr, EstateData[i][ePrice], elecbill);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "地产一览", ""#TEXT_WHITE"目前没有任何地产", "确认", "");}
					format(GList, sizeof(GList), "地产名称\t种类\t价值\t每4小时电费\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, "地产一览", GList, "管理", "关闭");
				}
				case 4:
				{
				    new i, j, k, GList[1024], stat[32];
				    GList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_GANG){continue;}
					    if(VehData[i][vOwner] == GangData[gangid][gID])
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(GList, sizeof(GList), "%s%s\t%s\t%s\n", GList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(GList, sizeof(GList), "车名\t车牌\t状态\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "载具一览", GList, "管理", "关闭");
				}
				case 5:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理你的帮会\n审核申请(%d)\n邀请新成员\n更改公告\n阶级权限\n阶级名称\n更改帮会缩写\n更改帮会颜色\n管理资金\n转让首领位置\n解散帮会", GetGangApplyMembers(gangid));
					ShowPlayerDialog(playerid, DIALOG_GANG_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理帮会", string, "管理", "关闭");
				}
				case 6:
				{
				    if(GangData[gangid][gBoss] == PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个帮会的首领,在你转让出这个位置以前无法离开这个帮会");
					ShowPlayerDialog(playerid, DIALOG_GANG_QUIT, DIALOG_STYLE_MSGBOX, "离开帮会", ""#TEXT_WHITE"确认要离开这个帮会?\n你在这里的所有资料都将会被删除", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_GANG_SKILL:
		{
		    if(!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				skillid, mainstr[512], namestr[32], infostr[256], lvlstr[256];
		    switch(listitem)
			{
			    case 0:
				{
				    switch(GangData[gangid][gType])
				    {
				        case GANG_BIKER: skillid = 16;
				        case GANG_FAMILY: skillid = 17;
				        case GANG_OG: skillid = 18;
				        case GANG_RELIGION: skillid = 19;
				        case GANG_STAR: skillid = 20;
				    }
				}
			    case 1: skillid = 15;
			    case 2: skillid = 21;
			}
			GetGVarString("skName", namestr, sizeof(namestr), skillid);
			GetGVarString("skInfo", infostr, sizeof(infostr), skillid);
			GetGVarString("skLV1Info", lvlstr, sizeof(lvlstr), skillid);
			format(mainstr, sizeof(mainstr), ""#TEXT_WHITE"%s\n%s\n%s\n拥有主动技的技能可以于"#TEXT_YELLOW"个人技能"#TEXT_WHITE"的主动技页面发动或是设定常用功能", namestr, infostr, lvlstr);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"技能信息", mainstr, "关闭", "");
			return 1;
		}
  		case DIALOG_GANG_SETTING:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    switch(listitem)
			{
			    case 0:
			    {
					if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
					static i, j, k, GList[512];
				    GList[0] = EOS;
				    for(i = k = 0, j = MAX_CMEMBERS; i < j; i++)
					{
					    if(GangMember[gangid][i][gmJoined] != MEMBER_APPLYING){continue;}
						format(GList, sizeof(GList), "%s%s\t%d\n", GList, GetPlayerSqlName(GangMember[gangid][i][gmMemberID]), GetPlayerSqlLevel(GangMember[gangid][i][gmMemberID]));
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "审核申请", ""#TEXT_WHITE"目前没有任何申请", "确认", "");}
					format(GList, sizeof(GList), "玩家名称\t等级\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_APPLY_LIST, DIALOG_STYLE_TABLIST_HEADERS, "审核申请", GList, "查看", "关闭");
				}
				case 1:
				{
				    if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限邀请新成员");
				    if(GetGangMembers(gangid) >= MAX_GMEMBERS)
				    {
				        return SendClientMessage(playerid, COLOR_WHITE, "目前帮会人数已达上限,无法再邀请新成员加入");
					}
				    ShowPlayerDialog(playerid, DIALOG_GANG_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"请输入要邀请的玩家名称或ID", "发送邀请", "取消");
				}
				case 2:
				{
				    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改帮会公告");
                    ShowPlayerDialog(playerid, DIALOG_GANG_CATALOG, DIALOG_STYLE_INPUT, "更改帮会公告", ""#TEXT_WHITE"请输入新的公告内容", "确认", "取消");
                }
				case 3:
			    {
			        new string2[256];
					format(string2, sizeof(string2), "权限\t拥有权限的阶级\n存取资金权限\t%d\n调整阶级权限\t%d\n管理(出售/转让/设定)地产权限\t%d\n审核/邀请/开除权限\t%d\n管理(出售/转让/设定)载具权限\t%d\n管理地盘权限\t%d",
					GangData[gangid][gFundR], GangData[gangid][gRankR], GangData[gangid][gER], GangData[gangid][gAoFR], GangData[gangid][gVehR], GangData[gangid][gTurfR]);
					ShowPlayerDialog(playerid, DIALOG_GANG_RANK, DIALOG_STYLE_TABLIST_HEADERS, "阶级权限", string2, "管理", "关闭");
					SendClientMessage(playerid, COLOR_WHITE, "** 帮会的首领可以点击管理各权限所需的阶级");
				}
				case 4:
			    {
			        format(string, sizeof(string), ""#TEXT_WHITE"请选择要更改的阶级名称\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)",
					GangData[gangid][gR1], GangData[gangid][gR2], GangData[gangid][gR3], GangData[gangid][gR4], GangData[gangid][gR5]);
		            ShowPlayerDialog(playerid, DIALOG_GANG_RANK_NAME1, DIALOG_STYLE_TABLIST_HEADERS, "阶级名称管理", string, "设定", "取消");
				}
				case 5:
				{
				    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改帮会缩写");
                    ShowPlayerDialog(playerid, DIALOG_GANG_SHORT, DIALOG_STYLE_INPUT, "更改帮会缩写", ""#TEXT_WHITE"请输入新的"#TEXT_YELLOW"帮会缩写", "确认", "取消");
                }
                case 6:
				{
				    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改帮会颜色");
					if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改帮会颜色需要花费$10,000");
					static colorstr[1024];
		    		colorstr[0] = EOS;
                    format(colorstr, sizeof(colorstr), ""#TEXT_WHITE"请选择帮会颜色\n"#TEXT_DARKRED"深红\n"#TEXT_RED"红色\n"#TEXT_FADERED"浅红\n"#TEXT_VIOLET"淡紫\n"#TEXT_PINK"粉红\n"#TEXT_LIGHTRED"亮红\n"#TEXT_ORANGE"橘色\n");
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_LIGHTORANGE"亮橘\n"#TEXT_YELLOW"黄色\n"#TEXT_FADEYELLOW"浅黄\n"#TEXT_LIGHTYELLOW"亮黄\n"#TEXT_YELLOWGREEN"黄绿\n"#TEXT_DARKYELLOWGREEN"暗黄绿\n"#TEXT_LIGHTGREEN"亮绿\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEGREEN"浅绿\n"#TEXT_GREEN"绿色\n"#TEXT_DARKGREEN"暗绿\n"#TEXT_BLUEGREEN"蓝绿\n"#TEXT_LIGHTBLUE"亮蓝\n"#TEXT_FADEBLUE"浅蓝\n"#TEXT_SKYBLUE"天蓝\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_WATERBLUE"水蓝\n"#TEXT_BLUE"蓝色\n"#TEXT_PURPLE"紫色\n"#TEXT_LIGHTPURPLE"亮紫\n"#TEXT_PINKRED"桃红\n"#TEXT_BLOODRED"血红\n"#TEXT_DARKBROWN"暗棕\n", colorstr);
				    format(colorstr, sizeof(colorstr), "%s"#TEXT_FADEBROWN"淡棕\n"#TEXT_BROWN"棕色\n"#TEXT_SANDYELLOW"沙黄", colorstr);
				    ShowPlayerDialog(playerid, DIALOG_GANG_COLOR, DIALOG_STYLE_TABLIST_HEADERS, "更改帮会颜色", colorstr, "确认", "取消");
                }
                case 7:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"余额:%d\n"#TEXT_YELLOW"捐献\n"#TEXT_FADEGREEN"存款\n"#TEXT_LIGHTRED"取款", GangData[gangid][gFund]);
					ShowPlayerDialog(playerid, DIALOG_GANG_FUND, DIALOG_STYLE_TABLIST_HEADERS, "管理资金", string, "选择", "取消");
				}
				case 8:
				{
				    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是帮会的首领");
				    new k, GList[512];
				    GList[0] = EOS;
				    ForEachPlayer(i)
					{
					    if(PlayerData[i][pGang] != GangData[gangid][gID]) continue;
					    if(GetPlayerGangRank(i) > 3)
					    {
							format(GList, sizeof(GList), "%s%s\n", GList, PlayerData[i][pName]);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "成员一览", ""#TEXT_WHITE"目前没有任何在线的R4成员", "确认", "");}
					format(GList, sizeof(GList), ""#TEXT_WHITE"成员名称\n%s", GList);
					ShowPlayerDialog(playerid, DIALOG_GANG_TRANSFER, DIALOG_STYLE_TABLIST_HEADERS, "成员一览", GList, "查看", "关闭");
				}
				case 9:
                {
                    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是帮会的首领");
					ShowPlayerDialog(playerid, DIALOG_GANG_DISBAND, DIALOG_STYLE_MSGBOX, "解散帮会", ""#TEXT_WHITE"确认要解散帮会吗?\n解散后所有的资金、成员、地产、载具以及科技都将"#TEXT_RED"全部拜拜", "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_GANG_TRANSFER:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			format(string, sizeof(string), ""#TEXT_WHITE"确认要转让首领位置给%s?\n转让后帮会的所有权将转移给新的首领", PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_GANG_TRANSFER_CHECK, DIALOG_STYLE_MSGBOX, "转让首领位置", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_GANG_TRANSFER_CHECK:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				chosed = GetGVarInt("DDecideID", playerid),
				pfrom = PlayerIDToGangMember(playerid, gangid),
				pto = PlayerIDToGangMember(chosed, gangid);
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不在线");
			if(PlayerData[chosed][pGang] != PlayerData[playerid][pGang]) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不属于你的帮会");
			if(GetPlayerGangRank(chosed) < 4) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员阶级已经不足R4");

			GangData[gangid][gBoss] = PlayerData[chosed][pID];
			GangMember[gangid][pfrom][gmRank] = 1;
			GangMember[gangid][pto][gmRank] = 5;
			format(string, sizeof(string), "<<帮会>>"#TEXT_YELLOW" 首领 %s 已经将首领的头衔以及帮会的所有权转让给了 %s", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
            Log(ganglog, INFO, "%s(%d)将帮会%s(%d)首领的头衔转让给了%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], PlayerData[chosed][pName], PlayerData[chosed][pID]);
            return 1;
        }
        case DIALOG_GANG_DISBAND:
        {
            if (!response) return ShowPlayerGangMenu(playerid);
            new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
            if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是帮会的首领");
            ShowPlayerDialog(playerid, DIALOG_GANG_DISBAND_CHECK, DIALOG_STYLE_MSGBOX, "解散帮会", ""#TEXT_WHITE"真的确定要解散帮会吗?", "确认", "取消");
            return 1;
        }
        case DIALOG_GANG_DISBAND_CHECK:
        {
            if (!response) return ShowPlayerGangMenu(playerid);
            new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
            if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你不是帮会的首领");
            format(string, sizeof(string), "<<帮会>> "#TEXT_YELLOW"注意: 首领 %s 将帮会解散了!", PlayerData[playerid][pName]);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
            format(string, sizeof(string), "** 你已顺利解散了你的帮会 %s", GangData[gangid][gName]);
            SendClientMessage(playerid, COLOR_YELLOW, string);
            Log(ganglog, INFO, "%s(%d)将帮会%s(%d)解散了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID]);
            DeleteGang(gangid);
            PlayerData[playerid][pGang] = GANG_ID_NONE;
            return 1;
        }
		case DIALOG_GANG_FUND:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"请选择捐献金额,目前余额为: %d\n$1,000\n$5,000\n$10,000", GangData[gangid][gFund]);
		            ShowPlayerDialog(playerid, DIALOG_GANG_FUND_DONATE, DIALOG_STYLE_TABLIST_HEADERS, "资金捐献", string, "确认", "取消");
		        }
		        case 1:
		        {
		            if(GetPlayerGangRank(playerid) < GangData[gangid][gFundR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入存入金额\n目前余额为: %d", GangData[gangid][gFund]);
		            ShowPlayerDialog(playerid, DIALOG_GANG_FUND_DEPOSIT, DIALOG_STYLE_INPUT, "存入资金", string, "确认", "取消");
		        }
		        case 2:
		        {
		            if(GetPlayerGangRank(playerid) < GangData[gangid][gFundR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入取出金额\n目前余额为: %d", GangData[gangid][gFund]);
		            ShowPlayerDialog(playerid, DIALOG_GANG_FUND_WITHDRAW, DIALOG_STYLE_INPUT, "取出资金", string, "确认", "取消");
		        }
		    }
		    return 1;
		}
		case DIALOG_GANG_FUND_DEPOSIT:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]), amount = strval(inputtext);
		    if(GetPlayerGangRank(playerid) < GangData[gangid][gFundR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		    if(amount > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足无法存入");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    GiveMoney(playerid, -amount);
		    Log(moneylog, INFO, "%s(%d)在帮会%s(%d)的帮会资金里存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    Log(ganglog, INFO, "%s(%d)在帮会%s(%d)的帮会资金里存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    GangData[gangid][gFund] += amount;
		    format(string, sizeof(string), "<<帮会>> %s 存入了$%d至帮会资金", PlayerData[playerid][pName], amount);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    return 1;
		}
		case DIALOG_GANG_FUND_WITHDRAW:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]), amount = strval(inputtext);
		    if(GetPlayerGangRank(playerid) < GangData[gangid][gFundR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限存取资金");
		    if(amount > GangData[gangid][gFund]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 帮会的资金不足");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    Log(moneylog, INFO, "%s(%d)在帮会%s(%d)的帮会资金里取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    Log(ganglog, INFO, "%s(%d)在帮会%s(%d)的帮会资金里取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    GangData[gangid][gFund] -= amount;
			GiveMoney(playerid, amount);
		    format(string, sizeof(string), "<<帮会>> %s 从帮会资金取出了$%d", PlayerData[playerid][pName], amount);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    return 1;
		}
		case DIALOG_GANG_FUND_DONATE:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]), amount;
		    switch(listitem)
		    {
		        case 0: amount = 1000;
		        case 1: amount = 5000;
		        case 2: amount = 10000;
		    }
		    if(amount > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足无法捐献");
		    GiveMoney(playerid, -amount);
		    Log(moneylog, INFO, "%s(%d)捐献给帮会%s(%d)共$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    Log(ganglog, INFO, "%s(%d)捐献给帮会%s(%d)共$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], amount);
		    GangData[gangid][gFund] += amount;
		    format(string, sizeof(string), "<<帮会>> %s 为帮会捐献了$%d", PlayerData[playerid][pName], amount);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    return 1;
		}
		case DIALOG_GANG_CATALOG:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
			if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改帮会公告");
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GANG_CATALOG, DIALOG_STYLE_INPUT, "更改帮会公告", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "取消");
			}
			mysql_format(DEFAULT_SESSION, GangData[gangid][gCatalog], 128, "%s", inputtext);
			format(string, sizeof(string), "<<帮会>> 首领 %s 发布了新公告: %s", PlayerData[playerid][pName], inputtext);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    return 1;
		}
		case DIALOG_GANG_SHORT:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]), i, j;
			if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改帮会缩写");
			if(isnull(inputtext) || !IsStringOnlyHaveLetter(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GANG_SHORT, DIALOG_STYLE_INPUT, "更改缩写", ""#TEXT_WHITE"你输入的缩写为空白,或是含有无法使用的字元", "下一步", "关闭");
			}
			if(strlen(inputtext) > 4)
			{
				return ShowPlayerDialog(playerid, DIALOG_GANG_SHORT, DIALOG_STYLE_INPUT, "更改缩写", ""#TEXT_WHITE"帮会缩写长度不得超过4个英数字,请重新输入", "下一步", "关闭");
			}
			for(i = 0, j = MAX_GANGS; i < j ; i++)
    		{
    		    if(GangData[i][gCreated] == 0) continue;
	            if(strcmp(inputtext, GangData[i][gShort]) == 0 && !isnull(GangData[i][gShort]))
				{
				    return ShowPlayerDialog(playerid, DIALOG_GANG_SHORT, DIALOG_STYLE_INPUT, "更改缩写", ""#TEXT_WHITE"这个帮会缩写已经被使用了,请重新输入", "下一步", "关闭");
				}
			}
			Log(ganglog, INFO, "%s(%d)将帮会%s(%d)的缩写改为", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], inputtext);
			mysql_format(DEFAULT_SESSION, GangData[gangid][gShort], 8, "%s", inputtext);
			format(string, sizeof(string), "<<帮会>> 首领 %s 将帮会缩写更改为 %s", PlayerData[playerid][pName], inputtext);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    return 1;
		}
		case DIALOG_GANG_COLOR:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new color, gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
			if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能更改企业颜色");
			if(PlayerData[playerid][pCash] < 10000) return SendClientMessage(playerid, COLOR_WHITE, "更改帮会颜色需要花费$10,000");
		    switch(listitem)
		    {
		        case 0: color = PLAYER_DARKRED;
		        case 1: color = PLAYER_RED;
		        case 2: color = PLAYER_FADERED;
		        case 3: color = PLAYER_VIOLET;
		        case 4: color = PLAYER_PINK;
		        case 5: color = PLAYER_LIGHTRED;
		        case 6: color = PLAYER_ORANGE;
		        case 7: color = PLAYER_LIGHTORANGE;
		        case 8: color = PLAYER_YELLOW;
		        case 9: color = PLAYER_FADEYELLOW;
		        case 10: color = PLAYER_LIGHTYELLOW;
		        case 11: color = PLAYER_YELLOWGREEN;
		        case 12: color = PLAYER_DARKYELLOWGREEN;
		        case 13: color = PLAYER_LIGHTGREEN;
		        case 14: color = PLAYER_FADEGREEN;
		        case 15: color = PLAYER_GREEN;
		        case 16: color = PLAYER_DARKGREEN;
		        case 17: color = PLAYER_BLUEGREEN;
		        case 18: color = PLAYER_LIGHTBLUE;
		        case 19: color = PLAYER_FADEBLUE;
		        case 20: color = PLAYER_SKYBLUE;
		        case 21: color = PLAYER_WATERBLUE;
		        case 22: color = PLAYER_BLUE;
		        case 23: color = PLAYER_PURPLE;
		        case 24: color = PLAYER_LIGHTPURPLE;
		        case 25: color = PLAYER_PINKRED;
		        case 26: color = PLAYER_BLOODRED;
		        case 27: color = PLAYER_DARKBROWN;
		        case 28: color = PLAYER_FADEBROWN;
		        case 29: color = PLAYER_BROWN;
		        case 30: color = PLAYER_SANDYELLOW;
		    }
		    GiveMoney(playerid, -10000);
		    Log(moneylog, INFO, "%s(%d)花费$%d为帮会%s(%d)更改了颜色", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000, GangData[gangid][gName], GangData[gangid][gID]);
			GangData[gangid][gColor] = color;
			format(string, sizeof(string), "<<帮会>> 首领 %s 更改了帮会颜色", PlayerData[playerid][pName]);
            SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
            ForEachPlayer(p)
            {
                if(PlayerData[p][pGang] == GangData[gangid][gID]) UpdatePlayerColor(p);
            }
		    return 1;
		}
		case DIALOG_GANG_APPLY_LIST:
		{
            if (!response) return ShowPlayerGangMenu(playerid);
            new gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				chosed = GetGVarInt("DListID", listitem*1000+playerid),
				infostr[512];
            if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
            if(GangMember[gangid][chosed][gmJoined] != MEMBER_APPLYING) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员的申请已经被通过或已被拒绝");
			format(infostr, sizeof(infostr), " \n名称:%s\n等级:%d\n自我介绍\n%s \n"#TEXT_FADEGREEN"接受申请\n"#TEXT_RED"拒绝申请",
			GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), GetPlayerSqlLevel(GangMember[gangid][chosed][gmMemberID]), GangMember[gangid][chosed][gmInfo]);
			ShowPlayerDialog(playerid, DIALOG_GANG_APPLY_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "审核申请", infostr, "选择", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_GANG_APPLY_CHECK:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				chosed = GetGVarInt("DDecideID", playerid),
				sqlpid = GangMember[gangid][chosed][gmMemberID],
		    	pid = PlayerSqlIDToID(sqlpid);
		    if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限审核加入申请");
		    switch(listitem)
		    {
		        case 4:
		        {
		            if(GetGangMembers(gangid) >= MAX_GMEMBERS)
					{
						return SendClientMessage(playerid, COLOR_WHITE, "目前帮会人数已达上限,无法再加入新成员");
					}
					if(pid == -1)//当该玩家不在线上时
					{
					    new query[128];
    					if(GetPlayerSqlGang(sqlpid) != -1)
						{
						    DeleteGangMember(gangid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员已经加入了其他帮会");
						}
						if(GetPlayerSqlDept(sqlpid) == DEPT_ARMY || GetPlayerSqlDept(sqlpid) == DEPT_POLICE)
						{
						    DeleteGangMember(gangid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员目前为警察或军人,无法加入");
						}
						GangMember[gangid][chosed][gmJoined] = MEMBER_JOINED;
						mysql_format(MYSQL_SESSION_A, query, sizeof(query), "UPDATE `playerdata` SET `gang` = '%d'", GangData[gangid][gID]);
						mysql_tquery(MYSQL_SESSION_A, query);
						format(string, sizeof(string), "<<帮会>> %s 通过了新成员 %s 的申请,大家一起在新成员登入时欢迎他的加入", PlayerData[playerid][pName], GetPlayerSqlName(sqlpid));
					    SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
					    Log(ganglog, INFO, "%s(%d)接受了帮会%s(%d)新成员%s(%d)的申请", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GetPlayerSqlName(sqlpid), sqlpid);
					}
					else
					{
						if(PlayerData[pid][pGang] != -1)
						{
						    DeleteGangMember(gangid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员已经加入了其他帮会");
						}
						if(PlayerData[pid][pDepartment] == DEPT_ARMY || PlayerData[pid][pDepartment] == DEPT_POLICE)
						{
						    DeleteGangMember(gangid, chosed);
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 该成员目前为警察或军人,无法加入");
						}
						GangMember[gangid][chosed][gmJoined] = MEMBER_JOINED;
						PlayerData[pid][pGang] = GangData[gangid][gID];
						PlayerData[pid][pTitle] = TITLE_GANG;
						UpdateGangZoneForPlayer(playerid);
						format(string, sizeof(string), "** 帮会 %s 的 %s 已经接受了你的申请,现在你已经成为了该帮会的一份子", GangData[gangid][gName], PlayerData[playerid][pName]);
						SendClientMessage(pid, COLOR_YELLOW, string);
						format(string, sizeof(string), "<<帮会>> %s 通过了新成员 %s 的申请,大家一起欢迎新成员的加入", PlayerData[playerid][pName], PlayerData[pid][pName]);
					    SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
					    Log(ganglog, INFO, "%s(%d)接受了帮会%s(%d)新成员%s(%d)的申请", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], PlayerData[playerid][pName], PlayerData[playerid][pID]);
					}
				}
				case 5:
				{
				    format(string, sizeof(string), "** 完成: 你拒绝了该玩家的的申请");
					SendClientMessage(playerid, COLOR_YELLOW, string);
				    DeleteGangMember(gangid, GangMember[gangid][chosed][gmMemberID]);
				}
			}
		    return 1;
		}
		case DIALOG_GANG_INVITE:
        {
            if (!response) return ShowPlayerGangMenu(playerid);
            new giveplayerid, giveplayername[MAX_PLAYER_NAME], gangid;
            gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
            if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限邀请新成员");
		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_GANG_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", "该玩家名称或ID不存在,请重新输入", "确认", "关闭");
            }
            if(PlayerData[giveplayerid][pLevel] < 15)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家未达等级15,无法加入帮会");
			}
            if(PlayerData[giveplayerid][pGang] != -1)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经属于别的帮会了");
			}
			if(PlayerData[giveplayerid][pDepartment] == DEPT_ARMY || PlayerData[giveplayerid][pDepartment] == DEPT_POLICE)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家目前为军人或警察,无法加入");
			}
            if(GetGangMembers(gangid) >= MAX_GMEMBERS)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "目前帮会人数已达上限,无法再邀请新成员加入");
			}
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"来自帮会{%06x} %s[%s] "#TEXT_WHITE"的%s向你发出邀请\n请问是否要加入该帮会?", GangData[gangid][gColor] >>> 8, GangData[gangid][gName], GangData[gangid][gShort], PlayerData[playerid][pName]);
            ShowPlayerDialog(giveplayerid, DIALOG_INVITE_GANG, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"帮会邀请", string, "加入", "无视");
            SetGVarInt("InvitedGang", gangid, giveplayerid);
            format(string, sizeof(string), "** 你已向 %s 发出帮会邀请", giveplayername);
            SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_INVITE_GANG:
		{
		    if (!response) return 1;
		    new gangid;
		    gangid = GetGVarInt("InvitedGang", playerid);
		    if(PlayerData[playerid][pGang] != -1)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "你已经属于别的帮会了");
			}
			if(PlayerData[playerid][pDepartment] == DEPT_ARMY || PlayerData[playerid][pDepartment] == DEPT_POLICE)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "你玩家目前为军人或警察,无法加入");
			}
		    if(GetGangMembers(gangid) >= MAX_GMEMBERS)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "目前该帮会成员人数已达上限");
			}
		    AddGangMember(gangid, PlayerData[playerid][pID], "由其他成员邀请加入", MEMBER_JOINED, 1);
		    PlayerData[playerid][pGang] = GangData[gangid][gID];
		    PlayerData[playerid][pTitle] = TITLE_GANG;
		    UpdateGangZoneForPlayer(playerid);
			format(string, sizeof(string), "<<帮会>> 新成员 %s 已接受邀请加入了帮会,大家一起欢迎新成员的加入", PlayerData[playerid][pName]);
		    SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    Log(ganglog, INFO, "%s(%d)接受了帮会%s(%d)的邀请而加入了帮会", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID]);
		    return 1;
		}
		case DIALOG_GANG_RANK:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能管理阶级的权限");
            SetGVarInt("DDecideID", listitem, playerid);

            format(string, sizeof(string), ""#TEXT_WHITE"请选择可使用这个权限的阶级\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)",
			GangData[gangid][gR1], GangData[gangid][gR2], GangData[gangid][gR3], GangData[gangid][gR4], GangData[gangid][gR5]);
            ShowPlayerDialog(playerid, DIALOG_GANG_RANK_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "阶级权限管理", string, "设定", "取消");
            return 1;
        }
		case DIALOG_GANG_RANK_SETTING:
		{
     		if (!response) return ShowPlayerGangMenu(playerid);
		    new rank = listitem+1, chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能管理阶级的权限");
			switch(chosed)
			{
			    case 0:
			    {
			        GangData[gangid][gFundR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有存取资金权限的阶级设定至阶级%d", rank);
			    }
			    case 1:
			    {
			        GangData[gangid][gRankR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有调整阶级权限的阶级设定至阶级%d", rank);
			    }
			    case 2:
			    {
			        GangData[gangid][gER] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理地产权限的阶级设定至阶级%d", rank);
			    }
			    case 3:
			    {
			        GangData[gangid][gAoFR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有审核/邀请/开除权限的阶级设定至阶级%d", rank);
			    }
			    case 4:
			    {
			        GangData[gangid][gVehR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理载具权限的阶级设定至阶级%d", rank);
			    }
			    case 5:
			    {
			        GangData[gangid][gTurfR] = rank;
			        format(string, sizeof(string), ""#TEXT_YELLOW"** 你将拥有管理地盘权限的阶级设定至阶级%d", rank);
			    }
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_GANG_RANK_NAME1:
		{
     		if (!response) return ShowPlayerGangMenu(playerid);
		    new rank = listitem+1,
		    	gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "只有帮会的首领才能管理阶级的名称");

		    format(string, sizeof(string), ""#TEXT_WHITE"请输入要更改阶级%d的名称为:", rank);
		    ShowPlayerDialog(playerid, DIALOG_GANG_RANK_NAME2, DIALOG_STYLE_INPUT, "阶级名称管理", string, "确认", "取消");
		    SetGVarInt("DDecideID", rank, playerid);
		    return 1;
		}
		case DIALOG_GANG_RANK_NAME2:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				rank = GetGVarInt("DDecideID", playerid);
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
				return ShowPlayerDialog(playerid, DIALOG_GANG_RANK_NAME2, DIALOG_STYLE_INPUT, "阶级名称管理", ""#TEXT_WHITE"你输入的名称为空白或含有无法使用的字元", "确认", "取消");
			}
			switch(rank)
			{
			    case 1: mysql_format(DEFAULT_SESSION, GangData[gangid][gR1], 16, "%s", inputtext);
			    case 2: mysql_format(DEFAULT_SESSION, GangData[gangid][gR2], 16, "%s", inputtext);
			    case 3: mysql_format(DEFAULT_SESSION, GangData[gangid][gR3], 16, "%s", inputtext);
			    case 4: mysql_format(DEFAULT_SESSION, GangData[gangid][gR4], 16, "%s", inputtext);
			    case 5: mysql_format(DEFAULT_SESSION, GangData[gangid][gR5], 16, "%s", inputtext);
			}
			format(string, sizeof(string), ""#TEXT_WHITE"你已将帮会阶级%d的名称更改为%s了", rank, inputtext);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_GANG_QUIT:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangData[gangid][gBoss] == PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个帮会的首领,在你转让出这个位置以前无法离开这个帮会");
			DeleteGangMember(gangid, PlayerData[playerid][pID]);
			PlayerData[playerid][pGang] = GANG_ID_NONE;
			if(PlayerData[playerid][pTitle] == TITLE_COMPANY) PlayerData[playerid][pTitle] = TITLE_NONE;
			format(string, sizeof(string), "** 你脱离了帮会 %s", GangData[gangid][gName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "<<帮会>> 成员 %s 离开了这个帮会", PlayerData[playerid][pName]);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			Log(ganglog, INFO, "%s(%d)离开了帮会%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID]);
			return 1;
		}
		case DIALOG_GANG_MEMBERS:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangMember[gangid][chosed][gmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "这个玩家已经不属于你目前的帮会了");
		    format(string, sizeof(string), ""#TEXT_WHITE"%s\t \n阶级\t%d\n点数\t%d\n踢出帮会", GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), GangMember[gangid][chosed][gmRank], GangMember[gangid][chosed][gmPoint]);
		    ShowPlayerDialog(playerid, DIALOG_GANG_MEMBERS_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看成员", string, "选择", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_GANG_MEMBERS_SET:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangMember[gangid][chosed][gmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的帮会了");
			switch(listitem)
			{
			    case 0:
			    {
			        if(GetPlayerGangRank(playerid) != GangData[gangid][gRankR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将成员的阶级");
			        if(GetPlayerGangRank(playerid) <= GangMember[gangid][chosed][gmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整这个成员的阶级");
			        format(string, sizeof(string), ""#TEXT_WHITE"请选择要将%s调整为:\n%s(R1)\n%s(R2)\n%s(R3)\n%s(R4)\n%s(R5)"
					, GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), GangData[gangid][gR1], GangData[gangid][gR2], GangData[gangid][gR3], GangData[gangid][gR4], GangData[gangid][gR5]);
					ShowPlayerDialog(playerid, DIALOG_GANG_MEMBERS_RANK, DIALOG_STYLE_TABLIST_HEADERS, "设定阶级", string, "选择", "取消");
				}
				case 2:
				{
			        if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将成员请出帮会");
			        if(GetPlayerGangRank(playerid) <= GangMember[gangid][chosed][gmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将这个成员请出帮会");
			        format(string, sizeof(string), ""#TEXT_WHITE"确认要将%s请出企业?", GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]));
					ShowPlayerDialog(playerid, DIALOG_GANG_MEMBERS_FIRE, DIALOG_STYLE_MSGBOX, "开除成员", string, "确认", "取消");
				}
			}
		    return 1;
		}
		case DIALOG_GANG_MEMBERS_RANK:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]), rank = listitem+1;
		    if(GangMember[gangid][chosed][gmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的帮会了");
			if(GetPlayerGangRank(playerid) <= GangMember[gangid][chosed][gmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整这个成员的阶级");
			if(rank >= GetPlayerGangRank(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有无法将成员设为这个阶级");

			format(string, sizeof(string), "** 你已把 %s 的阶级设为R%d", GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), rank);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<帮会>> %s 把 %s 的阶级设为R%d", PlayerData[playerid][pName], GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), rank);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			GangMember[gangid][chosed][gmRank] = rank;
			ShowPlayerGangMenu(playerid);
			return 1;
		}
		case DIALOG_GANG_MEMBERS_FIRE:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangMember[gangid][chosed][gmJoined] != MEMBER_JOINED) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个玩家已经不属于你目前的帮会了");
		    if(GetPlayerGangRank(playerid) != GangData[gangid][gAoFR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将成员踢出帮会");
			if(GetPlayerGangRank(playerid) <= GangMember[gangid][chosed][gmRank]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整将这个成员踢出帮会");

			format(string, sizeof(string), "** 你已把 %s 请出了帮会", GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]));
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<帮会>> %s 把 %s 踢出了帮会", PlayerData[playerid][pName], GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]));
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			Log(ganglog, INFO, "%s(%d)将帮会%s(%d)的成员%s(%d)踢出了帮会", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GetPlayerSqlName(GangMember[gangid][chosed][gmMemberID]), GangMember[gangid][chosed][gmMemberID]);
			DeleteGangMember(gangid, GangMember[gangid][chosed][gmMemberID]);
			ShowPlayerGangMenu(playerid);
			return 1;
		}
		case DIALOG_GANG_VEHICLE:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new vehicleid, stat[32], gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    vehicleid = GetGVarInt("DListID", listitem*1000+playerid);
		    if(VehData[vehicleid][vOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的帮会了");
		    switch(VehData[vehicleid][vStatus])
			{
				case VEH_NORMAL:
				{
					if(VehData[vehicleid][vLock] == 0) format(stat, sizeof(stat), "未上锁");
					else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
				}
				case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
				case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
				case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
				case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
			}
		    format(string, sizeof(string), ""#TEXT_WHITE"\t \n"#TEXT_FADEGREEN"取得载具\n"#TEXT_RED"载具报废\n名称:\t"#TEXT_SKYBLUE"%s\n车牌:\t%s\nID:\t%d\n入手价:\t"#TEXT_FADEGREEN"%d\n状态:\t%s"
			, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPlate], vehicleid, VehData[vehicleid][vPrice], stat);
			ShowPlayerDialog(playerid, DIALOG_GANG_VEHICLE_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看载具", string, "选择", "取消");
			SetGVarInt("DDecideID", vehicleid, playerid);
		    return 1;
		}
		case DIALOG_GANG_VEHICLE_SET:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(VehData[vehicleid][vOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的帮会了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            GetVehicleForPlayer(playerid, vehicleid);
				}
				case 1:
				{
				    if(GetPlayerGangRank(playerid) != GangData[gangid][gVehR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理载具");
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要报废载具%s吗?\n卖出获得的金额$%d将会存入帮会资金", GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPrice]/100);
					ShowPlayerDialog(playerid, DIALOG_GANG_VEHICLE_SELL, DIALOG_STYLE_MSGBOX, "载具报废", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_GANG_VEHICLE_SELL:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(VehData[vehicleid][vOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你目前的帮会了");
		    if(GetPlayerGangRank(playerid) != GangData[gangid][gVehR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理载具");

		    format(string, sizeof(string), "** 你已把帮会载具 %s 卖出了", GetVehicleName(VehData[vehicleid][vModel]));
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<帮会>> %s 把载具 %s 卖出了,帮会资金增加了$%d", PlayerData[playerid][pName], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPrice]/100);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
		    GangData[gangid][gFund] += VehData[vehicleid][vPrice]/100;
		    Log(vehlog, INFO, "%s(%d)将帮会%s(%d)载具%s(%d)卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    Log(ganglog, INFO, "%s(%d)将帮会%s(%d)载具%s(%d)卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
		    DeleteVehicle(vehicleid);
			ShowPlayerGangMenu(playerid);
			return 1;
		}
		case DIALOG_GANG_TURF:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(chosed == PREV_PAGE) ShowPlayerGangTurfList(playerid, gangid, GetGVarInt("Page", playerid)-1);
		    else if(chosed == NEXT_PAGE) ShowPlayerGangTurfList(playerid, gangid, GetGVarInt("Page", playerid)+1);
		    else
		    {
			    if(GangZone[chosed][gzOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地盘已经不属于你目前的帮会了");
			    format(string, sizeof(string), ""#TEXT_WHITE"%s\n"#TEXT_VIOLET"导航/防御\n"#TEXT_FADEGREEN"取出收益\n地盘升级\n修复防御度\n抛弃地盘", GangZone[chosed][gzName]);
			    ShowPlayerDialog(playerid, DIALOG_GANG_TURF_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看地盘", string, "选择", "取消");
			    SetGVarInt("DDecideID", chosed, playerid);
			}
		    return 1;
		}
		case DIALOG_GANG_TURF_SET:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangZone[chosed][gzOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地盘已经不属于你目前的帮会了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            new Float:centerx, Float:centery, Float:centerz;
		            centerx = GangZone[chosed][gzMinX] + (GangZone[chosed][gzMaxX] - GangZone[chosed][gzMinX])/2;
		            centery = GangZone[chosed][gzMinY] + (GangZone[chosed][gzMaxY] - GangZone[chosed][gzMinY])/2;
		            CA_FindZ_For2DCoord(centerx, centery, centerz);
		            SetPlayerGPS(playerid, centerx, centery, centerz);
					format(string, sizeof(string), ""#TEXT_WHITE"已标记了地盘"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE"的位置", GangZone[chosed][gzName]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
					if(GangZone[chosed][gzStatus] == GZ_UNDERATK)
					{
					    ShowPlayerTurfInfo(playerid, chosed);
					    SendClientMessage(playerid, COLOR_YELLOW, "** 这个地盘目前正遭受攻击,已经为你标记地盘内的"#TEXT_LIGHTRED"入侵者");
					    SendClientMessage(playerid, COLOR_YELLOW, "** 当"#TEXT_LIGHTRED"入侵者"#TEXT_YELLOW"在地盘内时地盘将会持续损失"#TEXT_WHITE"防御度"#TEXT_YELLOW",一旦防御度归零将会失去对地盘的控制权");
					    SendClientMessage(playerid, COLOR_YELLOW, "** 击杀"#TEXT_LIGHTRED"入侵者"#TEXT_YELLOW"会恢复地盘的防御度,请在防御度归零前驱逐所有"#TEXT_LIGHTRED"入侵者"#TEXT_YELLOW"吧");
					}
				}
				case 1:
				{
				    if(GetPlayerGangRank(playerid) != GangData[gangid][gTurfR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地盘");
					if(!IsGangHaveClubhouse(GangData[gangid][gID])) return SendClientMessage(playerid, COLOR_WHITE, "错误: 帮会必须有会所才能领取收益");
				    switch(GangZone[chosed][gzType])
				    {
				        case GZ_MONEY:
				        {
				            format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出来自地盘%s的保护费金额\n目前累积有"#TEXT_FADEGREEN"$%d"#TEXT_WHITE"/$%d", GangZone[chosed][gzName], GangZone[chosed][gzGain], MAX_GZGAIN_MONEY);
							ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", string, "确认", "");
						}
						case GZ_WOOD:
				        {
				            format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出来自地盘%s的木材数量\n目前累积有"#TEXT_FADEGREEN"%d"#TEXT_WHITE"/%d个\n每个需要%d背包空间,你还有%d个空间"
				            , GangZone[chosed][gzName], GangZone[chosed][gzGain], MAX_GZGAIN_WOOD, ItemsList_USE[39][iuSpace], GetPlayerRemainingSpace(playerid));
							ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", string, "确认", "");
						}
						case GZ_IRON:
				        {
				            format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出来自地盘%s的铁矿数量\n目前累积有"#TEXT_FADEGREEN"%d"#TEXT_WHITE"/%d个\n每个需要%d背包空间,你还有%d个空间"
							, GangZone[chosed][gzName], GangZone[chosed][gzGain], MAX_GZGAIN_IRON, ItemsList_USE[87][iuSpace], GetPlayerRemainingSpace(playerid));
							ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", string, "确认", "");
						}
						case GZ_ROCK:
				        {
				            format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出来自地盘%s的石材数量\n目前累积有"#TEXT_FADEGREEN"%d"#TEXT_WHITE"/%d个\n每个需要%d背包空间,你还有%d个空间"
							, GangZone[chosed][gzName], GangZone[chosed][gzGain], MAX_GZGAIN_ROCK, ItemsList_USE[41][iuSpace], GetPlayerRemainingSpace(playerid));
							ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", string, "确认", "");
						}
						case GZ_NITER:
				        {
				            format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出来自地盘%s的硝石数量\n目前累积有"#TEXT_FADEGREEN"%d"#TEXT_WHITE"/%d个\n每个需要%d背包空间,你还有%d个空间"
				            , GangZone[chosed][gzName], GangZone[chosed][gzGain], MAX_GZGAIN_NITER, ItemsList_USE[88][iuSpace], GetPlayerRemainingSpace(playerid));
							ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", string, "确认", "");
						}
					}
				}
				case 2:
				{
				    new tflv = GangZone[chosed][gzLevel],
						nxtlv = tflv+1;
					if(GangZone[chosed][gzDefense] < GetDefaultGangZoneDefense(tflv)) return SendClientMessage(playerid, COLOR_WHITE, "地盘必须先被完全修复才能升级");
				    format(string, sizeof(string), ""#TEXT_WHITE"%s", TurfUpgrade[tflv][tfDes]);
				    if(tflv < 8)
				    {
				        format(string, sizeof(string), "%s\n升级需求(现有/需求):\n 现金:$%d/%d 木头:%d/%d个 铁:%d/%d个 砖块:%d/%d个\n升级后防御度会提升至%d,确认要升级吗?"
						, string, PlayerData[playerid][pCash], TurfUpgrade[nxtlv][tfMoney], PlayerHaveItem(playerid, ITEM_USE, 39), TurfUpgrade[nxtlv][tfWood], PlayerHaveItem(playerid, ITEM_USE, 38), TurfUpgrade[nxtlv][tfIron], PlayerHaveItem(playerid, ITEM_USE, 40), TurfUpgrade[nxtlv][tfBrick], GetDefaultGangZoneDefense(nxtlv));
				        ShowPlayerDialog(playerid, DIALOG_GANG_TURF_UPGRADE, DIALOG_STYLE_MSGBOX, "地盘升级", string, "确认", "取消");
				    }
				    else
				    {
				        format(string, sizeof(string), "%s\n地盘已达最高等级,无法再升级", string);
				        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "地盘升级", string, "确认", "");
				    }
				}
				case 3:
				{
				    new tflv = GangZone[chosed][gzLevel],
				        maxdef = GetDefaultGangZoneDefense(tflv),
						cost = (maxdef - GangZone[chosed][gzDefense])*4;
				    if(GangZone[chosed][gzDefense] >= GetDefaultGangZoneDefense(tflv)) return SendClientMessage(playerid, COLOR_WHITE, "目前这个地盘不需要被修复");
				    format(string, sizeof(string), ""#TEXT_WHITE"目前地盘防御度为%d/%d\n完全修复费用需要支付现金%d\n确认要修复地盘吗?", GangZone[chosed][gzDefense], maxdef, cost);
				    ShowPlayerDialog(playerid, DIALOG_GANG_TURF_REPAIR, DIALOG_STYLE_MSGBOX, "地盘修复", string, "确认", "取消");
				}
				case 4:
				{
				    if(GetPlayerGangRank(playerid) != GangData[gangid][gTurfR] && GangData[gangid][gBoss] != PlayerData[playerid][pID]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地盘");
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要抛弃地盘%s吗?\n所有在该地盘的收益及升级都将遗失\n该地盘将会变为中立地盘开放所有帮会占领", GangZone[chosed][gzName]);
					ShowPlayerDialog(playerid, DIALOG_GANG_TURF_ABANDON, DIALOG_STYLE_MSGBOX, "抛弃地盘", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_GANG_TURF_REPAIR:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				tflv = GangZone[chosed][gzLevel],
				maxdef = GetDefaultGangZoneDefense(tflv),
				cost = (maxdef - GangZone[chosed][gzDefense])*4;
			if(GangZone[chosed][gzStatus] == GZ_UNDERATK) return SendClientMessage(playerid, COLOR_WHITE, "你不能修复正在遭受攻击的地盘");
			if(PlayerData[playerid][pCash] < cost) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足支付修复费用");
            GiveMoney(playerid, -cost);
            Log(moneylog, INFO, "%s(%d)花费$%d为帮会%s(%d)地盘%s(%d)修复了防御度", PlayerData[playerid][pName], PlayerData[playerid][pID], cost, GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID]);
            Log(ganglog, INFO, "%s(%d)花费$%d为帮会%s(%d)地盘%s(%d)修复了防御度", PlayerData[playerid][pName], PlayerData[playerid][pID], cost, GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID]);
			GangZone[chosed][gzDefense] = maxdef;
			format(string, sizeof(string), "<<帮会>> %s 完全修复了地盘%s的防御度", PlayerData[playerid][pName], GangZone[chosed][gzName]);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			format(string, sizeof(string), "** 你花费了现金%d修复了地盘%s", cost, GangZone[chosed][gzName]);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			return 1;
		}
		case DIALOG_GANG_TURF_UPGRADE:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				tflv = GangZone[chosed][gzLevel],
				nxtlv = tflv+1;
			if(GangZone[chosed][gzStatus] == GZ_UNDERATK) return SendClientMessage(playerid, COLOR_WHITE, "你不能升级正在遭受攻击的地盘");
			if(tflv == 8) return SendClientMessage(playerid, COLOR_WHITE, "地盘已经达到最高等级");
			if(PlayerData[playerid][pCash] < TurfUpgrade[nxtlv][tfMoney]) return SendClientMessage(playerid, COLOR_WHITE, "无法升级,你的现金不足升级");
			if(PlayerHaveItem(playerid, ITEM_USE, 39) < TurfUpgrade[nxtlv][tfWood]) return SendClientMessage(playerid, COLOR_WHITE, "无法升级,你身上没有足够的木头升级");
			if(PlayerHaveItem(playerid, ITEM_USE, 38) < TurfUpgrade[nxtlv][tfIron]) return SendClientMessage(playerid, COLOR_WHITE, "无法升级,你身上没有足够的铁升级");
			if(PlayerHaveItem(playerid, ITEM_USE, 40) < TurfUpgrade[nxtlv][tfBrick]) return SendClientMessage(playerid, COLOR_WHITE, "无法升级,你身上没有足够的砖块升级");
			GangZone[chosed][gzLevel] = nxtlv;
			GangZone[chosed][gzDefense] = GetDefaultGangZoneDefense(nxtlv);
			GiveMoney(playerid, -TurfUpgrade[nxtlv][tfMoney]);
			Log(moneylog, INFO, "%s(%d)花费$%d为帮会%s(%d)地盘%s(%d)进行了升级", PlayerData[playerid][pName], PlayerData[playerid][pID], TurfUpgrade[nxtlv][tfMoney], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID]);
			Log(ganglog, INFO, "%s(%d)花费$%d为帮会%s(%d)地盘%s(%d)进行了升级", PlayerData[playerid][pName], PlayerData[playerid][pID], TurfUpgrade[nxtlv][tfMoney], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID]);
			GivePlayerItem(playerid, ITEM_USE, 39, -TurfUpgrade[nxtlv][tfWood]);
			GivePlayerItem(playerid, ITEM_USE, 38, -TurfUpgrade[nxtlv][tfIron]);
			GivePlayerItem(playerid, ITEM_USE, 40, -TurfUpgrade[nxtlv][tfBrick]);
			format(string, sizeof(string), "<<帮会>> %s 为地盘%s进行了升级,目前等级为%d", PlayerData[playerid][pName], GangZone[chosed][gzName], nxtlv);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			switch(nxtlv)
			{
			    case 6:
			    {
			        format(string, sizeof(string), "<<帮会>> 地盘%s达到了等级6,该地盘在地盘战时将会随机生成仅供帮会成员捡取的补血包", GangZone[chosed][gzName]);
					SendGangMessage(GangData[gangid][gID], COLOR_FADEGREEN, string);
			    }
			}
			format(string, sizeof(string), "** 你花费了现金$%d、木头%d个、铁%d个与砖块%d个为地盘%s进行升级"
			, TurfUpgrade[nxtlv][tfMoney], TurfUpgrade[nxtlv][tfWood], TurfUpgrade[nxtlv][tfIron], TurfUpgrade[nxtlv][tfBrick], GangZone[chosed][gzName]);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			return 1;
		}
		case DIALOG_GANG_TURF_GAIN:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				amount = strval(inputtext);
		    if(GangZone[chosed][gzOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地盘已经不属于你目前的帮会了");
		    if(GangZone[chosed][gzStatus] == GZ_UNDERATK) return SendClientMessage(playerid, COLOR_WHITE, "目前这个地盘正在遭受攻击,无法领取");
		    if(amount < 1) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"数量不得小于1\n请重新输入", "确认", "");
		    if(amount > GangZone[chosed][gzGain]) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"这个地盘收益没这么多\n请重新输入", "确认", "");
		    switch(GangZone[chosed][gzType])
			{
				case GZ_MONEY:
				{
				    GiveMoney(playerid, amount);
				    Log(moneylog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的保护费$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
				    Log(ganglog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的保护费$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
				    GangZone[chosed][gzGain] -= amount;
				    format(string, sizeof(string), "<<帮会>> %s 领出了来自地盘 %s 的保护费$%d", PlayerData[playerid][pName], GangZone[chosed][gzName], amount);
					SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
				}
				case GZ_WOOD:
				{
				    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[39][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"你的背包装不下这么多木头\n请重新输入", "确认", "");
                    Log(ganglog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的木材收益%d个", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
					GivePlayerItem(playerid, ITEM_USE, 39, amount);
				    GangZone[chosed][gzGain] -= amount;
				    format(string, sizeof(string), "<<帮会>> %s 领出了来自地盘 %s 的木材收益%d个", PlayerData[playerid][pName], GangZone[chosed][gzName], amount);
					SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
				}
				case GZ_IRON:
				{
				    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[87][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"你的背包装不下这么多铁矿\n请重新输入", "确认", "");
				    Log(ganglog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的铁矿收益%d个", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
				    GivePlayerItem(playerid, ITEM_USE, 87, amount);
				    GangZone[chosed][gzGain] -= amount;
				    format(string, sizeof(string), "<<帮会>> %s 领出了来自地盘 %s 的铁矿收益%d个", PlayerData[playerid][pName], GangZone[chosed][gzName], amount);
					SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
				}
				case GZ_ROCK:
				{
				    if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[41][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"你的背包装不下这么多石材\n请重新输入", "确认", "");
				    Log(ganglog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的石材收益%d个", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
				    GivePlayerItem(playerid, ITEM_USE, 41, amount);
				    GangZone[chosed][gzGain] -= amount;
				    format(string, sizeof(string), "<<帮会>> %s 领出了来自地盘 %s 的石材收益%d个", PlayerData[playerid][pName], GangZone[chosed][gzName], amount);
					SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
				}
				case GZ_NITER:
      			{
            		if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[88][iuSpace]*amount) return ShowPlayerDialog(playerid, DIALOG_GANG_TURF_GAIN, DIALOG_STYLE_INPUT, "地盘收益", ""#TEXT_WHITE"你的背包装不下这么多硝石\n请重新输入", "确认", "");
            		Log(ganglog, INFO, "%s(%d)领出了帮会%s(%d)地盘%s(%d)的硝石收益%d个", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID], amount);
				    GivePlayerItem(playerid, ITEM_USE, 88, amount);
				    GangZone[chosed][gzGain] -= amount;
				    format(string, sizeof(string), "<<帮会>> %s 领出了来自地盘 %s 的硝石收益%d个", PlayerData[playerid][pName], GangZone[chosed][gzName], amount);
					SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
				}
			}
		    return 1;
		}
		case DIALOG_GANG_TURF_ABANDON:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(GangZone[chosed][gzOwner] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地盘已经不属于你目前的帮会了");
		    if(GangZone[chosed][gzStatus] == GZ_UNDERATK) return SendClientMessage(playerid, COLOR_WHITE, "你不能抛弃正在遭受攻击的地盘");
		    GangZone[chosed][gzOwner] = GANG_ID_NONE,
		    GangZone[chosed][gzLevel] = 1,
		    GangZone[chosed][gzDefense] = GetDefaultGangZoneDefense(1),
		    GangZone[chosed][gzGain] = 0,
		    GangZone[chosed][gzGainTimer] = 600,
		    GangZone[chosed][gzTimer2] = 0;
			GangZone[chosed][gzTimer] = 1800;
		    UpdateGangZone(chosed);
		    format(string, sizeof(string), "<<帮会>> %s 抛弃了帮会的地盘 %s ,帮会失去了对该地盘的所有权", PlayerData[playerid][pName], GangZone[chosed][gzName]);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			Log(ganglog, INFO, "%s(%d)抛弃了帮会%s(%d)的地盘%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], GangZone[chosed][gzName], GangZone[chosed][gzID]);
		    return 1;
		}
		case DIALOG_GANG_ESTATE:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(EstateData[chosed][eOwnerID] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的帮会了");
		    format(string, sizeof(string), ""#TEXT_WHITE"%s\n导航\n出售地产", EstateData[chosed][eName]);
		    ShowPlayerDialog(playerid, DIALOG_GANG_ESTATE_SET, DIALOG_STYLE_TABLIST_HEADERS, "查看地产", string, "选择", "取消");
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_GANG_ESTATE_SET:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid), gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(EstateData[chosed][eOwnerID] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的帮会了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            SetPlayerGPS(playerid, EstateData[chosed][eX], EstateData[chosed][eY], EstateData[chosed][eZ]);
					format(string, sizeof(string), ""#TEXT_WHITE"已标记了"#TEXT_LIGHTPURPLE"%s"#TEXT_WHITE"的位置", EstateData[chosed][eName]);
					ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", string, "确认", "");
				}
				case 1:
				{
				    if(GetPlayerGangRank(playerid) < GangData[gangid][gER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地产");
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要出售地产%s吗?\n卖出获得的金额$%d将会存入帮会资金", EstateData[chosed][eName], EstateData[chosed][ePrice]/2);
					ShowPlayerDialog(playerid, DIALOG_GANG_ESTATE_SELL, DIALOG_STYLE_MSGBOX, "卖出地产", string, "确认", "取消");
				}
			}
			return 1;
		}
		case DIALOG_GANG_ESTATE_SELL:
		{
		    if (!response) return ShowPlayerGangMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
				value = EstateData[chosed][ePrice]/2;
		    if(EstateData[chosed][eOwnerID] != GangData[gangid][gID]) return SendClientMessage(playerid, COLOR_WHITE, "这个地产已经不属于你目前的帮会了");
		    if(GetPlayerGangRank(playerid) < GangData[gangid][gER]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有权限调整管理地产");

		    format(string, sizeof(string), "** 你已把帮会地产 %s 卖出了", EstateData[chosed][eName]);
			SendClientMessage(playerid, COLOR_YELLOW, string);
			format(string, sizeof(string), "<<帮会>> %s 把地产 %s 卖出了,帮会资金增加了$%d", PlayerData[playerid][pName], EstateData[chosed][eName], value);
			SendGangMessage(GangData[gangid][gID], COLOR_FADERED, string);
			Log(estatelog, INFO, "%s(%d)将帮会%s(%d)地产%s(%d)以$%d的价格卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], EstateData[chosed][eName], EstateData[chosed][eID], value);
			Log(ganglog, INFO, "%s(%d)将帮会%s(%d)地产%s(%d)以$%d的价格卖出了", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID], EstateData[chosed][eName], EstateData[chosed][eID], value);
		    GangData[gangid][gFund] += value;
		    DeleteEstateOwner(chosed);
            ShowPlayerGangMenu(playerid);
			if(RemoveEstateFurniture(chosed) > 0)
			{
				format(string, sizeof(string), "** 地产内布置的物件已被移至该地产门口");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			return 1;
		}
		case DIALOG_GANGZONE:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    format(string, sizeof(string), ""TEXT_WHITE"已选择%s(ID:%d)\n设定拥有帮会\n解除冷却\n删除地盘\n设置/取消为安全区", GangZone[chosed][gzName], chosed);
			ShowPlayerDialog(playerid, DIALOG_GANGZONE_SETTING, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"编辑地盘", string, "选择", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
        	return 1;
        }
        case DIALOG_GANGZONE_SETTING:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            ShowPlayerDialog(playerid, DIALOG_GANGZONE_OWNER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"编辑地盘", ""#TEXT_WHITE"请输入帮会ID,输入-1代表没有", "选择", "关闭");
		        }
		        case 1:
		        {
		            GangZone[chosed][gzStatus] = GZ_NORMAL;
		            GangZone[chosed][gzTimer] = 1800;
		            format(string, sizeof(string), "** 完成: 已解除地盘%s(ID:%d)的冷却", GangZone[chosed][gzName], chosed);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            UpdateGangZone(chosed);
		        }
		        case 2:
		        {
		            DeleteGangZone(chosed);
		            format(string, sizeof(string), "** 完成: 已删除地盘%s(ID:%d)", GangZone[chosed][gzName], chosed);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		        }
		        case 3:
		        {
		            switch(GangZone[chosed][gzSafezone])
		            {
		                case 0: GangZone[chosed][gzSafezone]=1;
		                case 1: GangZone[chosed][gzSafezone]=0;
		            }
		            format(string, sizeof(string), "** 完成: 已设置地盘%s(ID:%d)的安全区为%d", GangZone[chosed][gzName], chosed, GangZone[chosed][gzSafezone]);
		            SendClientMessage(playerid, COLOR_WHITE, string);
		            UpdateGangZone(chosed);
		        }
		    }
        	return 1;
        }
        case DIALOG_GANGZONE_OWNER:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
		        owner = strval(inputtext);
		    GangZone[chosed][gzOwner] = owner;
		    UpdateGangZone(chosed);
		    format(string, sizeof(string), "** 完成: 已更改地盘%s(ID:%d)的拥有帮会", GangZone[chosed][gzName], chosed);
		    SendClientMessage(playerid, COLOR_WHITE, string);
        	return 1;
        }
        case DIALOG_AD:
		{
		    if (!response) return 1;
			new length = strlen(inputtext),
				cost = length*10;
            if(strfind(inputtext, "%", true) != -1 || isnull(inputtext) ||  length > 128)
			{
				return ShowPlayerDialog(playerid, DIALOG_AD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"广报供应商", ""#TEXT_WHITE"广告内容过长,或是含有无法使用的字元", "发送", "取消");
			}
			if(PlayerData[playerid][pCash] < cost) return ShowPlayerDialog(playerid, DIALOG_AD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"广报供应商", ""#TEXT_WHITE"你无法支付这样长度的广告,请重新输入", "发送", "取消");
			GiveMoney(playerid, -cost);
			Log(moneylog, INFO, "%s(%d)花费了$%d发送广告消息", PlayerData[playerid][pName], PlayerData[playerid][pID], cost);
			format(string, sizeof(string), "** 广告发送完成,费用一共是$%d", cost);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), "<<广告>> %s | 请联络"#TEXT_YELLOW"%s", inputtext, PlayerData[playerid][pName]);
			SendClientMessageToAll(COLOR_GREEN, string);
			return 1;
		}
        case DIALOG_BOUNTY:
        {
            if (!response) return 1;
            new plist[256], l;
			plist[0] = EOS, l = 0;
            switch(listitem)
            {
                case 0:
                {
					ForEachPlayer(i)
					{
						if(PlayerData[i][pBounty] > 0 || playerid == i || PlayerData[i][pLevel] < 15 || LimitData[i][plCDBounty] > 0) { continue;}
						format(plist, sizeof(plist), "%s%s(%d)\t%d\n", plist, PlayerData[i][pName], i, PlayerData[i][pLevel]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"发起悬赏", ""#TEXT_WHITE"目前没有任何可被悬赏玩家", "确定", "");}
					format(plist, sizeof(plist), "玩家名称(ID)\t等级\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_BOUNTY_CREATE1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"发起悬赏", plist, "选择", "取消");
                }
                case 1:
                {
					ForEachPlayer(i)
					{
						if(PlayerData[i][pBounty] == 0) { continue;}
						format(plist, sizeof(plist), "%s%s(%d)\t$%d\t%d秒\n", plist, PlayerData[i][pName], i, PlayerData[i][pBounty], PlayerData[i][pBountyTime]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"悬赏清单", ""#TEXT_WHITE"目前没有任何悬赏目标", "确定", "");}
					format(plist, sizeof(plist), "目标名称(ID)\t悬赏金额\t剩余时间\n%s", plist);
					ShowPlayerDialog(playerid, 36727, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"悬赏清单", plist, "确认", "");

					SetGVarInt("TraceBounty", 1, playerid);
                    UpdatePlayerColor(playerid);
                    SendClientMessage(playerid, COLOR_WHITE, "** 获得了所有悬赏目标位置,并用"#TEXT_FADERED"浅红点"#TEXT_WHITE"标记在地图上,赶在目标被其他杀手前击杀目标即可获得赏金");
                }
	        }
	        return 1;
        }
        case DIALOG_BOUNTY_CREATE1:
        {
            if (!response) return 1;
            new chosed = GetGVarInt("DListID", listitem*1000+playerid);

            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经离线");
            ShowPlayerDialog(playerid, DIALOG_BOUNTY_CREATE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"发起悬赏", ""#TEXT_WHITE"输入悬赏金额($1,000-$20,000)\n"#TEXT_YELLOW"** 注意:当目标被击杀时目标本身会损失赏金一半的金钱.而击杀者也只会获得一半的奖赏", "发起悬赏", "取消");
            SetGVarInt("DDecideID", chosed, playerid);
            return 1;
        }
        case DIALOG_BOUNTY_CREATE2:
        {
            if (!response) return 1;
            new chosed = GetGVarInt("DDecideID", playerid),
				value = strval(inputtext);

            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经离线");
            if(value < 1000 || value > 20000) return ShowPlayerDialog(playerid, DIALOG_BOUNTY_CREATE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"发起悬赏", ""#TEXT_WHITE"赏金只能介于$1,000~$20,000之间\n请重新输入", "发起悬赏", "取消");
            if(PlayerData[playerid][pCash] < value) return ShowPlayerDialog(playerid, DIALOG_BOUNTY_CREATE2, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"发起悬赏", ""#TEXT_WHITE"你身上的现金不足支付赏金\n请重新输入", "发起悬赏", "取消");
			GiveMoney(playerid, -value);
			Log(moneylog, INFO, "%s(%d)花费了$%d对%s(%d)发起悬赏", PlayerData[playerid][pName], PlayerData[playerid][pID], value, PlayerData[chosed][pName], PlayerData[chosed][pID]);
			SetPlayerBounty(chosed, value/2, 7200, playerid);
            format(string, sizeof(string), ""#TEXT_WHITE"已经发起对%s的悬赏\n赏金为$%d\n这个悬赏令将持续2个小时", PlayerData[chosed][pName], value/2);
            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"发起完成", string, "确认", "");
            return 1;
        }
        case DIALOG_MUSICPLAYER:
        {
            if (!response) return 1;
            switch(listitem)
            {
	            case 0: ShowPlayerDialog(playerid, DIALOG_MUSICPLAYER_PLAY, DIALOG_STYLE_INPUT, "音响", ""#TEXT_WHITE"请输入要播放的音乐mp3网址", "播放", "关闭");
	            case 1: StopSpeakerAudioStream(GetGVarInt("DDecideType", playerid), GetGVarInt("DDecideID", playerid), GetGVarInt("DDecideW", playerid));
	        }
            return 1;
        }
        case DIALOG_MUSICPLAYER_PLAY:
        {
            if (!response) return 1;
            PlaySpeakerAudioStream(GetGVarInt("DDecideType", playerid), GetGVarInt("DDecideID", playerid), GetGVarInt("DDecideW", playerid), inputtext);
            format(string, sizeof(string), "** %s 使用音响播放了一首音乐 **", playername);
            SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
            return 1;
        }
        case DIALOG_TV:
        {
            if (!response) return 1;
            ShowPlayerDialog(playerid, DIALOG_TV_LIST, DIALOG_STYLE_TABLIST_HEADERS, "电视", ""#TEXT_WHITE"选择收看频道\n媒体频道\n竞技场频道", "收看", "关闭");
            return 1;
        }
        case DIALOG_TV_LIST:
        {
            if (!response) return 1;
            new i, j, k, TVList[512];
            switch(listitem)
            {
	            case 0:
	            {
					for(i = k = 0, j = MAX_COMPANIES; i < j; i++)
					{
					    if(GetGVarInt("TVAir", i) == 0) continue;
					    format(TVList, sizeof(TVList), "%s%d\t%s\n", TVList, i, CompanyData[i][comTVName]);
					    SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "电视", ""#TEXT_WHITE"目前没有任何可以收看的频道", "确认", "");}
					format(TVList, sizeof(TVList), "频道\t频道名称\n%s", TVList);
					ShowPlayerDialog(playerid, DIALOG_TV_CHANNEL, DIALOG_STYLE_TABLIST_HEADERS, "电视", TVList, "收看", "关闭");
				}
				case 1:
				{
                    ShowPlayerDialog(playerid, DIALOG_TV_ARENA, DIALOG_STYLE_TABLIST_HEADERS, "电视", ""#TEXT_WHITE"选择收看的竞技场\nLS竞技场\nSF竞技场\nLV竞技场", "选择", "关闭");
				}
			}
            return 1;
        }
        case DIALOG_TV_ARENA:
        {
            if (!response) return 1;
            new arena, k, TVList[512];
            switch(listitem)
            {
                case 0: arena = ARENA_PLAYER1;
                case 1: arena = ARENA_VEHICLE;
                case 2: arena = ARENA_PLAYER2;
            }
            if(GetGVarInt("ArenaS", arena) == STATUS_FINISHED) return SendClientMessage(playerid, COLOR_WHITE, "** 该竞技场目前尚未开始");
            ForEachPlayer(i)
			{
				if(GetGVarInt("pArena", i) == arena)
				{
					format(TVList, sizeof(TVList), "%s%s(%d)\n", TVList, PlayerData[i][pName], i);
				 	SetGVarInt("DListID", i, k*1000+playerid);
					k++;
				}
			}
			if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "电视", ""#TEXT_WHITE"目前该竞技场没有任何参赛者", "确认", "");}
			format(TVList, sizeof(TVList), "参赛者(ID)\n%s", TVList);
			ShowPlayerDialog(playerid, DIALOG_TV_ARENA_PLAYER, DIALOG_STYLE_TABLIST_HEADERS, "电视", TVList, "收看", "关闭");
			return 1;
		}
		case DIALOG_TV_ARENA_PLAYER:
        {
            if (!response) return 1;
            if(!PlayerCanSpectate(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "** 你目前无法看电视");
            new watchid = GetGVarInt("DListID", listitem*1000+playerid);
            SetPlayerWatchPlayer(playerid, watchid);
		    SetGVarInt("WatchArena", 1, playerid);
		    SendClientMessage(playerid, COLOR_WHITE, "** 已开始观赛,按鼠标右键可以离开观赛模式");
		    return 1;
		}
        case DIALOG_TV_CHANNEL:
        {
            if (!response) return 1;
            if(!PlayerCanSpectate(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "** 你目前无法看电视");
            new chosed = GetGVarInt("DListID", listitem*1000+playerid);
            if(GetGVarInt("WatchTV", playerid) == 0)
            {
	            SetPlayerTurnOnTV(playerid, chosed);
	            SendClientMessage(playerid, COLOR_YELLOW, "** 你开始收看电视频道,按鼠标左键选择频道,按鼠标右键关闭电视");
	        }
	        else SetPlayerSwitchTVChannel(playerid, chosed);
            return 1;
        }
        case DIALOG_TV_EVENT:
        {
            if (!response) return 1;
            new l, TVList[512], teamstr[32], chosed;
			TVList[0] = EOS, l = 0,
			chosed = GetGVarInt("DListID", listitem*1000+playerid);
			ForEachPlayer(i)
			{
			    if(GetGVarInt("Eventing", i) == 0) continue;
				if(GetGVarInt("EventID", i) == chosed)
				{
				    switch(GetGVarInt("EventTeam", i))
				    {
				        case NO_TEAM: format(teamstr, sizeof(teamstr), "无");
				        case EVENT_TEAM_BLUE: format(teamstr, sizeof(teamstr), ""#TEXT_SKYBLUE"蓝方");
				        case EVENT_TEAM_RED: format(teamstr, sizeof(teamstr), ""#TEXT_RED"红");
				    }
					format(TVList, sizeof(TVList), "%s"#TEXT_WHITE"%s(%d)\t%s\t%s\t%d\n", TVList, PlayerData[i][pName], i, teamstr);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "电视", ""#TEXT_WHITE"目前没有任何进行中的活动", "确定", "");}
			format(TVList, sizeof(TVList), "玩家名称(ID)\t所属小队\n%s", TVList);
			ShowPlayerDialog(playerid, DIALOG_TV_EVENT, DIALOG_STYLE_TABLIST_HEADERS, "电视", TVList, "选择", "关闭");
            return 1;
        }
        case DIALOG_CAMERA_VEH:
        {
            if (!response) return ShowPlayerVehiclePanel(playerid);
            switch(listitem)
            {
                case 0:
                {
                	if(GetGVarInt("Filming", playerid) == CAMERA_VEHICLE)
                    {
                        PlayerStopFilming(playerid);
						SendClientMessage(playerid, COLOR_WHITE, "** 你结束了摄影");
                    }
                    else
                    {
                        PlayerStartFilming(playerid, CAMERA_VEHICLE);
                        SendClientMessage(playerid, COLOR_GREEN, "** 你开始使用摄影机,你若属于媒体业的成员,你的企业可以开启媒体业菜单来将你的画面播映到电视频道");
                    }
                }
            }
            return 1;
        }
        case DIALOG_CAMERA_PLAYER:
        {
            if (!response) return 1;
			switch(listitem)
            {
                case 0:
                {
                	if(GetGVarInt("Filming", playerid) == CAMERA_PLAYER || GetGVarInt("Filming", playerid) == CAMERA_SET)
                    {
                        PlayerStopFilming(playerid);
						SendClientMessage(playerid, COLOR_WHITE, "** 你结束了摄影");
                    }
                    else
                    {
                        PlayerStartFilming(playerid, CAMERA_PLAYER);
                        SendClientMessage(playerid, COLOR_GREEN, "** 你开始使用摄影机,按Y可以进行设定,你若属于媒体业的成员,你的企业可以开启媒体业菜单来将你的画面播映到电视频道");
                    }
                }
                case 1:
                {
                    ShowPlayerDialog(playerid, DIALOG_CAMERA_PLAYER_ANGLE, DIALOG_STYLE_TABLIST_HEADERS, "摄影机", ""#TEXT_WHITE"选择以下角度进行切换\n随行摄影\n将摄影机固定在此", "选择", "关闭");
                }
            }
            return 1;
        }
        case DIALOG_CAMERA_PLAYER_ANGLE:
        {
            if (!response) return 1;
			switch(listitem)
            {
                case 0:
                {
                	PlayerStartFilming(playerid, CAMERA_PLAYER);
                	SendClientMessage(playerid, COLOR_WHITE, "** 你将视角设定为随行录影,你所看到的画面会由摄影机同步连线");
                }
                case 1:
                {
                    new cameraobj = CreateDynamicObject(19300, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
		            AttachDynamicObjectToPlayer(cameraobj, playerid, 0.0, 0.3, 0.7, 0.0, 0.0, 0.0);
		            AttachCameraToDynamicObject(playerid, cameraobj);
		            SetGVarInt("FilmOBJ", cameraobj, playerid);
		            SetGVarInt("TakingAngle", 1, playerid);
		            SendClientMessage(playerid, COLOR_WHITE, "** 请调整要放置摄影机的位置以及要拍摄的视角,调整完成请按Y固定放置摄影机");
                }
            }
        }
        case DIALOG_INSURANCE:
        {
            if (!response) return 1;
			new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				price = VehData[chosed][vDeductible];
			if(PlayerData[playerid][pBank] < price) return SendClientMessage(playerid, COLOR_WHITE, "无法支付保金: 你的银行存款不足");
			PlayerData[playerid][pBank] -= price;
			Log(moneylog, INFO, "%s(%d)支付了载具%s(%d)的保险费$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID], price);
            Log(vehlog, INFO, "%s(%d)支付保险费将载具%s(%d)恢复为正常状态了", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[chosed][vModel]), VehData[chosed][vID]);
			VehData[chosed][vStatus] = VEH_NORMAL;
			VehData[chosed][vHealth] = 1000.0+VehData[chosed][vArmour];
            VehData[chosed][vPanelStat] =
			VehData[chosed][vDoorStat] =
			VehData[chosed][vLightStat] =
			VehData[chosed][vTireStat] = 0;
			SetVehicleToRespawn(chosed);
			SetVehicleVirtualWorld(chosed, 0);
			ParkVehicle(chosed);

			if((IsACar(chosed) || IsAMotorBike(chosed)) && GetGVarInt("VehInDCount", playerid) == 0)
			{
				format(string, sizeof(string), ""#TEXT_WHITE"您支付了保险费$%d\n我们已为您准备了全新的替代载具%s并将其放在您上次设置的重生位置\n\n是否需要专人将您的载具派送至您的位置?", price, GetVehicleName(VehData[chosed][vModel]));
				ShowPlayerDialog(playerid, DIALOG_INSURANCE_CHECK, DIALOG_STYLE_MSGBOX, "摩斯姆通保险", string, "确认", "取消");
				SetGVarInt("DDecideID", chosed, playerid);
			}
			else
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"您支付了保险费$%d\n我们已为您准备了全新的替代载具%s并将其放在您上次设置的重生位置", price, GetVehicleName(VehData[chosed][vModel]));
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "摩斯姆通保险", string, "确认", "");
			}
            return 1;
        }
        case DIALOG_INSURANCE_CHECK:
        {
            if (!response) return 1;
			static Float:vehX, Float:vehY, Float:vehZ, Float:vehA, chosed;
			chosed = GetGVarInt("DDecideID", playerid);
			if(GetPlayerRoad(playerid, vehX, vehY, vehZ, vehA, 300.0))
			{
				SetGVarFloat("VehInDX", vehX, playerid),
				SetGVarFloat("VehInDY", vehY, playerid),
				SetGVarFloat("VehInDZ", vehZ, playerid),
				SetGVarFloat("VehInDA", vehA, playerid),
				SetGVarInt("VehInDCount", 20, playerid);
				SetGVarInt("VehInDVeh", chosed, playerid);
				format(string, sizeof(string), "** 完成: 您的%s将会在短时间内运送至离您最近的道路上", GetVehicleName(VehData[chosed][vModel]));
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			else SendClientMessage(playerid, COLOR_WHITE, "无法为您运送载具: 你距离最近的道路实在太远了,无法定位");
            return 1;
        }
		case DIALOG_JAIL:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pJail] == 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有在监狱服刑了");
            switch(listitem)
            {
                case 0: ShowPlayerDialog(playerid, DIALOG_JAIL_SHOP, DIALOG_STYLE_TABLIST_HEADERS, "监狱贩卖部", "品项\t价格\t效果\n监狱餐\t$40\t恢复25点饥饿以及25点生命", "购买", "取消");
                case 1:
                {
                    if(GetGVarInt("JailQKing", playerid) > 0)
                    {
                        DeleteGVar("JailQKing", playerid);
                    	GymEnd(playerid);
						LiftEnd(playerid);
						SpawnPlayer(playerid);
						SendClientMessage(playerid, COLOR_WHITE, "** 你回到你的牢房了");
                    }
                    else
                    {
                        if(GetGVarInt("JailQK", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "你目前还不能放风");
                        SetGVarInt("JailQKing", 1, playerid);
                        SetPlayerPos_Fix(playerid, 1773.7290, -1574.1863, 1734.9430);
						SetPlayerVirtualWorld(playerid, 1);
						SetPlayerInterior(playerid, 1);
						SendClientMessage(playerid, COLOR_WHITE, "** 你开始放风了,你可以在监狱内或是户外空间随意走动或使用健身设施,但狱警随时有权结束你的放风时间");
                    }
                }
                case 2:
                {
                    if(PlayerData[playerid][pJail]*2 > PlayerData[playerid][pMaxJail]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有服刑时间过半才能申请假释出狱");
                    ShowPlayerDialog(playerid, DIALOG_JAIL_PAROLE, DIALOG_STYLE_MSGBOX, "假释申请", ""#TEXT_WHITE"确认要申请假释出狱?\n申请发出后将由高阶警官审核\n通过后即可提前出狱", "确认", "取消");
                }
            }
            return 1;
        }
        case DIALOG_JAIL_SHOP:
        {
            if (!response) return 1;
            switch(listitem)
            {
                case 0:
                {
                    if(PlayerData[playerid][pCash] < 40) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
                    format(string, sizeof(string), "** %s 正在享用监狱餐 **", playername);
                    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					if(GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK && GetGVarInt("Animating", playerid) == 0) ApplyAnimation(playerid, "FOOD", "EAT_BURGER" , 4.1, 0, 0, 0, 0, 0, 1);
					PlayerData[playerid][pHunger] += 25;
					GiveHealth(playerid, 25.0);
					GiveMoney(playerid, -40);
					Log(moneylog, INFO, "%s(%d)花费了$%d购买了监狱餐", PlayerData[playerid][pName], PlayerData[playerid][pID], 40);
					SendClientMessage(playerid, COLOR_WHITE, "** 你享用了一份监狱餐,恢复了25点生命以及25点饥饿值");
                }
            }
            return 1;
        }
        case DIALOG_JAIL_PAROLE:
        {
            if (!response) return ShowPlayerJailMenu(playerid);
            if(PlayerData[playerid][pJail] == 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有在监狱服刑了");
			SetGVarInt("ParoldReq", 1, playerid);
            SendClientMessage(playerid, COLOR_WHITE, "** 已发出假释申请,如果通过你将会立即出狱");
            format(string, sizeof(string), "** 监狱囚犯%s发出了假释申请,请R3(含)以上的警官前往州立监狱审核", playername);
            SendDeptMessage(DEPT_POLICE, COLOR_YELLOW, string);
            return 1;
        }
        case DIALOG_PRISON:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            switch(listitem)
            {
                case 0: ShowPlayerPoliceDutyMenu(playerid);
                case 1:
                {
                    new plist[256], l, status[32];
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pJail] == 0) { continue;}
						if(GetGVarInt("ParoldReq", i) > 0) format(status, sizeof(status), "申请假释");
						else if(GetGVarInt("JailQKing", i) > 0) format(status, sizeof(status), "放风中");
						else format(status, sizeof(status), "无");
						format(plist, sizeof(plist), "%s%s(%d)\t%d/%d秒\t%d号房\t%s\n", plist, PlayerData[i][pName], i, PlayerData[i][pJail], PlayerData[i][pMaxJail], PlayerData[i][pJailRoom], status);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"囚犯名单", ""#TEXT_WHITE"目前没有任何囚犯", "确定", "");}
					format(plist, sizeof(plist), "囚犯名称(ID)\t出狱时间(秒)\t牢房编号\t附注\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_PRISON_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"囚犯名单", plist, "管理", "关闭");
                }
                case 2: ShowPlayerDialog(playerid, DIALOG_JAIL_SHOP, DIALOG_STYLE_TABLIST_HEADERS, "监狱贩卖部", "品项\t价格\t效果\n监狱餐\t$40\t恢复25点饥饿以及25点生命", "购买", "取消");
	        }
	        return 1;
        }
        case DIALOG_PRISON_LIST:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            new chosed = GetGVarInt("DListID", listitem*1000+playerid);
            if(PlayerData[chosed][pJail] == 0) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家已经出狱了");
            ShowPlayerDialog(playerid, DIALOG_PRISON_CHECK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"管理囚犯", ""#TEXT_WHITE"选择操作项目\n开放放风\n送回牢房\n通过假释\n直接释放", "选择", "关闭");
            SetGVarInt("DDecideID", chosed, playerid);
            return 1;
        }
        case DIALOG_PRISON_CHECK:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            new chosed = GetGVarInt("DDecideID", playerid);
            if(PlayerData[playerid][pDeptRank] < 2) return SendClientMessage(playerid, COLOR_WHITE, "只有R2以上的警官才能管理囚犯");
            if(PlayerData[chosed][pJail] == 0) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家已经出狱了");
            switch(listitem)
            {
                case 0:
                {
                    if(GetGVarInt("JailQKing", chosed) > 0) return SendClientMessage(playerid, COLOR_WHITE, "该名囚犯现在已经在放风");
                    DeleteGVar("JailQK", chosed);
                    format(string, sizeof(string), "** 你被警官%s直接通过可以放风,打开个人菜单可以选择离开牢房活动筋骨", PlayerData[playerid][pName]);
                    SendClientMessage(chosed, COLOR_FADEGREEN, string);
                    format(string, sizeof(string), "** 你通过了%s的放风时间", PlayerData[chosed][pName]);
                    SendClientMessage(playerid, COLOR_FADEGREEN, string);
                }
                case 1:
                {
                    if(GetGVarInt("JailQKing", chosed) == 0) return SendClientMessage(playerid, COLOR_WHITE, "该名囚犯目前并未在放风");
                    DeleteGVar("JailQKing", chosed);
                    GymEnd(chosed);
					LiftEnd(chosed);
					SpawnPlayer(chosed);
					format(string, sizeof(string), "** 你被警官%s强制送回牢房了", PlayerData[playerid][pName]);
                    SendClientMessage(chosed, COLOR_YELLOW, string);
                    format(string, sizeof(string), "** 你将%s强制送回牢房", PlayerData[chosed][pName]);
                    SendClientMessage(playerid, COLOR_FADEGREEN, string);
                }
                case 2:
                {
                    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上的警官才能审核假释");
                    if(GetGVarInt("ParoldReq", chosed) == 0) return SendClientMessage(playerid, COLOR_WHITE, "该名囚犯并未申请假释");
                    if(PlayerData[chosed][pJail]*2 > PlayerData[chosed][pMaxJail])
					{
					    DeleteGVar("ParoldReq", chosed);
						return SendClientMessage(playerid, COLOR_WHITE, "该名囚犯违反了假释标准,目前无法通过他的假释");
					}
					SetPlayerOutJail(chosed);
					format(string, sizeof(string), "** 警官%s通过了%s的假释申请,该名玩家现已出狱", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            		SendDeptMessage(DEPT_POLICE, COLOR_FADEGREEN, string);
            		format(string, sizeof(string), "** 你的假释申请由警官%s通过了", PlayerData[playerid][pName]);
                    SendClientMessage(chosed, COLOR_YELLOW, string);
            		format(string, sizeof(string), "** 你通过了%s的假释申请", PlayerData[chosed][pName]);
            		SendClientMessage(playerid, COLOR_YELLOW, string);
                }
                case 3:
                {
                    if(PlayerData[playerid][pDeptRank] < 4) return SendClientMessage(playerid, COLOR_WHITE, "只有R4以上的警官才能直接释放囚犯");

					SetPlayerOutJail(chosed);
					format(string, sizeof(string), "** 警官%s将囚犯%s释放了", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            		SendDeptMessage(DEPT_POLICE, COLOR_FADEGREEN, string);
            		format(string, sizeof(string), "** 你被警官%s直接释放了", PlayerData[playerid][pName]);
                    SendClientMessage(chosed, COLOR_YELLOW, string);
            		format(string, sizeof(string), "** 你将%s直接释放出狱了", PlayerData[chosed][pName]);
            		SendClientMessage(playerid, COLOR_YELLOW, string);
                }
            }
            return 1;
        }
        case DIALOG_PD_MEMBER:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            switch(listitem)
            {
                case 0:
				{
				    if(GetGVarInt("PlayerAnimal", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "目前无法执勤");
					ShowPlayerPoliceDutyMenu(playerid);
				}
                case 1: ShowPlayerWantedList(playerid);
                case 2:
                {
                    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上的警官才能审核枪械执照");
                    new plist[256], l;
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(GetGVarInt("ApplyGunLic", i) == 0) { continue;}
						format(plist, sizeof(plist), "%s%s(%d)\t%d\t%s\t%d\n", plist, PlayerData[i][pName], i, PlayerData[i][pLevel], GetPlayerTitle(i), LimitData[i][plGunLic]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"审核枪械执照申请", ""#TEXT_WHITE"目前没有任何申请", "确定", "");}
					format(plist, sizeof(plist), "玩家名称(ID)\t等级\t头衔\t历史申请次数\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_PD_GUNLIC_CHECK1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"审核枪械执照申请", plist, "查看", "关闭");
                }
                case 3: ShowPlayerDialog(playerid, DIALOG_PD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"警局", ""#TEXT_WHITE"需要帮忙吗?\n报案\n寻回失窃车\n申请枪械执照", "选择", "离开");
                case 4:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetDeptUsedSpace(DEPT_POLICE), GetDeptSpace(DEPT_POLICE));
					ShowPlayerDialog(playerid, DIALOG_DEPT_STORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DDeptID", DEPT_POLICE, playerid);
                }
	        }
	        return 1;
        }
        case DIALOG_PD_GUNLIC_CHECK1:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上的警官才能审核枪械执照");
            new chosed = GetGVarInt("DListID", listitem*1000+playerid), string2[256];
            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家已经离线");
            format(string2, sizeof(string2), ""#TEXT_WHITE"玩家名称:%s\t\n等级\t%d\n头衔\t%s\n击杀/死亡次数\t%d/%d\n入狱次数\t%d\n总通缉数\t%d\n"#TEXT_FADEGREEN"通过\n"#TEXT_RED"否决"
            , PlayerData[chosed][pName], PlayerData[chosed][pLevel], GetPlayerTitle(chosed), RecordData[chosed][prKill], RecordData[chosed][prDeath], RecordData[chosed][prJail], RecordData[chosed][prAllWanted]);
            ShowPlayerDialog(playerid, DIALOG_PD_GUNLIC_CHECK2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"审核枪械执照申请", string2, "确认", "取消");
            SetGVarInt("DDecideID", chosed, playerid);
            return 1;
        }
        case DIALOG_PD_GUNLIC_CHECK2:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上的警官才能审核枪械执照");
            new chosed = GetGVarInt("DDecideID", playerid), string2[256];
            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家已经离线");
            if(PlayerHaveItem(chosed, ITEM_EQ, 286)) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家已经拥有枪械执照了");
            if(GetGVarInt("ApplyGunLic", chosed) == 0) return SendClientMessage(playerid, COLOR_WHITE, "该名玩家的审核已经被通过或被否决了");

            switch(listitem)
            {
                case 5:
                {
                    GivePlayerItem(chosed, ITEM_EQ, 286, 1);
				    GiveMoney(chosed, -1000);
				    Log(moneylog, INFO, "%s(%d)花费了$%d申请了枪械执照", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000);
				    SendClientMessage(chosed, COLOR_YELLOW, "** 你的枪械执照申请通过了,已扣除$1000手续费,请详读上面的内容以防日后权益受损");
				    format(string2, sizeof(string2), "%s", ItemsList_EQ[286][ieqDes]);
				    ShowPlayerDialog(chosed, 32767, DIALOG_STYLE_MSGBOX, "枪械执照", string2, "收起", "");

				    format(string, sizeof(string), "** 警官%s发给了%s枪械执照", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            		SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
            		format(string, sizeof(string), "** 你通过了%s的枪械执照申请", PlayerData[chosed][pName]);
            		SendClientMessage(playerid, COLOR_YELLOW, string);
                }
                case 6:
                {
                    SendClientMessage(chosed, COLOR_FADERED, "** 你的枪械执照申请被否决了");
                    format(string, sizeof(string), "** 警官%s否决了%s的枪械执照申请", PlayerData[playerid][pName], PlayerData[chosed][pName]);
            		SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
            		format(string, sizeof(string), "** 你否决了%s的枪械执照申请", PlayerData[chosed][pName]);
            		SendClientMessage(playerid, COLOR_YELLOW, string);
                }
            }
            return 1;
		}
        case DIALOG_PD_DUTY:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            if(GetGVarInt("PlayerAnimal", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "目前无法执勤");
            new itemid, skin;
            switch(listitem)
            {
                case 0:
                {
                    itemid = 172;
                    skin = 280;
                }
                case 1:
                {
                    if(PlayerData[playerid][pDeptRank] < 2) return SendClientMessage(playerid, COLOR_WHITE, "你的阶级不足无法领取这个装备");
                    itemid = 173;
                    skin = 281;
                }
                case 2:
                {
                    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "你的阶级不足无法领取这个装备");
                    itemid = 174;
                    skin = 283;
                }
                case 3:
                {
                    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "你的阶级不足无法领取这个装备");
                    itemid = 175;
                    skin = 285;
                }
                case 4:
                {
                    if(PlayerData[playerid][pDeptRank] < 2) return SendClientMessage(playerid, COLOR_WHITE, "你的阶级不足无法领取这个装备");
                    SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
                    SetPlayerArmour_Fix(playerid, 100.0);
                }
	        }
	        ClearAllWeapon(playerid);
	        OnPlayerUseItem_USE(playerid, itemid);
	        SetGVarInt("InstantUse", 1, playerid);

	        SetPlayerSkin_Fix(playerid, skin);
			SetGVarInt("PoliceDuty", 1, playerid);
			UpdatePlayerColor(playerid);

   			format(string, sizeof(string), "** %s 穿上制服及护甲并拿出装备 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			return 1;
        }
        case DIALOG_POLICE:
        {
            if (!response) return ShowPlayerMenu(playerid);
            if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "你不是警察");
            switch(listitem)
            {
                case 0:
                {
                    new plist[256], l, status[24];
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pDepartment] != DEPT_POLICE) { continue;}
						if(GetGVarInt("PoliceDuty", i) == 1) format(status, sizeof(status), ""#TEXT_YELLOW"值勤中");
						else format(status, sizeof(status), "下班");
						format(plist, sizeof(plist), "%s"#TEXT_WHITE"%s(%d)\t%d\t%s\n", plist, PlayerData[i][pName], i, PlayerData[i][pDeptRank], status);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"在线同仁", ""#TEXT_WHITE"目前没有任何在线同仁", "确定", "");}
					format(plist, sizeof(plist), "名称(ID)\t阶级\t状态\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_DEPT_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"在线同仁", plist, "查看", "关闭");
                }
                case 1: ShowPlayerDialog(playerid, DIALOG_POLICE_SKILL, DIALOG_STYLE_TABLIST_HEADERS, "警用技能", ""#TEXT_WHITE"警用技能为只有身为警察才能使用的技能\n逮捕\n搜身\n调查\n电击\n破门\n钉刺\n路障", "查看", "返回");
                case 2:
				{
				    new i, j, k, PList[1024], stat[32];
				    PList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_DEPARTMENT){continue;}
					    if(VehData[i][vOwner] == DEPT_POLICE)
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(PList, sizeof(PList), "%s%s\t%s\t%s\n", PList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "警用载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(PList, sizeof(PList), "车名\t车牌\t状态\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "警用载具一览", PList, "管理", "关闭");
				}
				case 3:
				{
				    new i, j, k, EList[256];
				    EList[0] = EOS;
		     		for(i = k = 0, j = sizeof(PoliceSpawn); i < j ; i++)
					{
						format(EList, sizeof(EList), "%s%s\n", EList, PoliceSpawn[i][dpsName]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"警用据点一览", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_HQ, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"警用据点一览", EList, "选择", "取消");
				}
				case 4:
				{
				    if(PlayerData[playerid][pDeptRank] < 3) return SendClientMessage(playerid, COLOR_WHITE, "只有R3以上的警官才能自行发布通缉令");
				    if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "你必须先至据点值勤才能发布通缉令");
				    new l, PList[512];
				    PList[0] = EOS;
				    ForEachPlayer(p)
			        {
			            format(PList, sizeof(PList), "%s%s(%d)\n", PList, PlayerData[p][pName], p);
						SetGVarInt("DListID", p, l*1000+playerid);
					    l++;
					}
					format(PList, sizeof(PList), "玩家名称(ID)\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_POLICE_WANTED1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"选择通缉玩家", PList, "选择", "取消");
				}
				case 5:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理治安部门\n审核申请(%d)\n邀请新成员\n设定内部公告\n管理资金\n转让领导位置", GetDeptApplyMembers(DEPT_POLICE));
					ShowPlayerDialog(playerid, DIALOG_DEPT_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "管理", "关闭");
				}
				case 6:
				{
				    if(PlayerData[playerid][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个部门的领导,在你转让出这个位置以前无法离开这个部门");
					ShowPlayerDialog(playerid, DIALOG_DEPT_QUIT, DIALOG_STYLE_MSGBOX, "离开", ""#TEXT_WHITE"确认要离开这个部门?", "确认", "取消");
				}
            }
            return 1;
        }
        case DIALOG_POLICE_WANTED1:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
			format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s,请选择通缉等级\n消除通缉\n1星通缉\n2星通缉\n3星通缉\n4星通缉\n5星通缉\n6星通缉", PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_POLICE_WANTED2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通缉玩家", string, "选择", "取消");
			SetGVarInt("DDecidePID", chosed, playerid);
			return 1;
		}
		case DIALOG_POLICE_WANTED2:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new wantedid = GetGVarInt("DDecidePID", playerid);
		    if(listitem == 0)
		    {
		        ClearPlayerWanted(wantedid);
		        format(string, sizeof(string), "<<部门>> %s 消除了对%s的通缉令", PlayerData[playerid][pName], PlayerData[wantedid][pName]);
				SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
				format(string, sizeof(string), "<<部门>> %s 消除了对你的通缉令", PlayerData[playerid][pName], PlayerData[wantedid][pName]);
				SendClientMessage(wantedid, COLOR_FADEYELLOW, string);
		    }
		    else
		    {
				format(string, sizeof(string), ""#TEXT_WHITE"你选择了%d星,请输入通缉理由", listitem);
				ShowPlayerDialog(playerid, DIALOG_POLICE_WANTED3, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"通缉玩家", string, "发布通缉", "取消");
				SetGVarInt("DDecideWanted", listitem, playerid);
			}
			return 1;
		}
		case DIALOG_POLICE_WANTED3:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new wantedid = GetGVarInt("DDecidePID", playerid),
				level = GetGVarInt("DDecideWanted", playerid);

			if(!GetGVarInt("Logged", wantedid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
		    if(strfind(inputtext, "%", true) != -1)
			{
				return ShowPlayerDialog(playerid, DIALOG_POLICE_WANTED3, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"通缉玩家", ""#TEXT_WHITE"通缉理由含有无法使用的字元\n请重新输入", "发布通缉", "取消");
			}
			SetPlayerWanted(wantedid, level, inputtext);
			format(string, sizeof(string), "<<部门>> %s 发布了对%s的%d星通缉令,理由为%s", PlayerData[playerid][pName], PlayerData[wantedid][pName], level, inputtext);
			SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
		}
        case DIALOG_POLICE_SKILL:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new skillid, mainstr[512], namestr[32], infostr[256], lvlstr[256];
		    switch(listitem)
			{
			    case 0: skillid = 22;
			    case 1: skillid = 23;
			    case 2: skillid = 24;
			    case 3: skillid = 25;
			    case 4: skillid = 26;
			    case 5: skillid = 27;
			    case 6: skillid = 28;
			}
			GetGVarString("skName", namestr, sizeof(namestr), skillid);
			GetGVarString("skInfo", infostr, sizeof(infostr), skillid);
			GetGVarString("skLV1Info", lvlstr, sizeof(lvlstr), skillid);
			format(mainstr, sizeof(mainstr), ""#TEXT_WHITE"%s\n%s\n%s\n拥有主动技的技能可以于"#TEXT_YELLOW"个人技能"#TEXT_WHITE"的主动技页面发动或是设定常用功能", namestr, infostr, lvlstr);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"技能信息", mainstr, "关闭", "");
			return 1;
		}
		case DIALOG_DETECT:
		{
		    if (!response) return 1;
		    new criminal = GetGVarInt("DListID", listitem*1000+playerid),
				chosed = GetGVarInt("DListID2", listitem*1000+playerid);
			if(Crime[criminal][chosed][crType] == CRIME_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该行为追溯期已过");
			if(!GetGVarInt("Logged", criminal)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 加害者已经离线");
			format(string, sizeof(string), "** 你已经将%s的犯罪事证提交给同仁,很快就会有通缉令发布了", PlayerData[criminal][pName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			CrimeToWanted(criminal, chosed);
			return 1;
		}
		case DIALOG_WANTED:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    if(PlayerData[playerid][pWanted] == 0) return SendClientMessage(playerid, COLOR_WHITE, "你现在没有被通缉了");
		    switch(listitem)
		    {
		        case 0:
		        {
		            ShowPlayerDialog(playerid, DIALOG_WANTED_SURR, DIALOG_STYLE_MSGBOX, "投降", ""#TEXT_WHITE"你确认要投降吗?\n你将会丢弃身上所有武器并举起双手站在原地等待警方到来", "确认", "取消");
		        }
		        case 1:
		        {
		            new i, liststr[256];
		            liststr[0] = EOS;
		            for(i = 0; i < 6; i++)
		            {
		                if(PlayerData[playerid][pWanted] == i) format(liststr, sizeof(liststr), "%s"#TEXT_YELLOW"%d星\t%d秒\t$%d\n", liststr, i+1, WantedList[i][wtJailTime], WantedList[i][wtFine]);
		                else format(liststr, sizeof(liststr), "%s"#TEXT_WHITE"%d星\t%d秒\t$%d\n", liststr, i+1, WantedList[i][wtJailTime], WantedList[i][wtFine]);
		            }
		            format(liststr, sizeof(liststr), ""#TEXT_WHITE"通缉等级\t刑期\t罚金\n%s", liststr);
		            if(PlayerData[playerid][pRobbed] > 0) format(liststr, sizeof(liststr), "%s\n你还必须多赔偿之前抢劫得手的金额"#TEXT_FADERED"$%d", liststr, PlayerData[playerid][pRobbed]);
		            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"刑度", liststr, "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_WANTED_SURR:
		{
		    if (!response) return ShowPlayerMenu(playerid);
		    if(PlayerData[playerid][pWanted] == 0) return SendClientMessage(playerid, COLOR_WHITE, "你现在没有被通缉了");

			static i, Float:px, Float:py, Float:pz, pworld, weapons[11][2];
			if(IsPlayerInAnyVehicle(playerid)) RemovePlayerFromVehicle_Fix(playerid);
			GetPlayerPos(playerid, px, py, pz);
			GetXYInFrontOfPlayer(playerid, px, py, 5.0);
			pworld = GetPlayerVirtualWorld(playerid);
		    for(i = 1; i < 10; i++)
			{
			    GetPlayerWeaponData(playerid, i, weapons[i][0], weapons[i][1]);
				if(weapons[i][1] != 0)
				{
		            CreateDropItem(ITEM_WEAPON, weapons[i][0], weapons[i][1], px, py, pz, pworld);
				}
			}
			ClearAllWeapon(playerid);

			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_HANDSUP);
		    SetGVarInt("Surr", 1, playerid);
		    format(string, sizeof(string), "** %s 丢弃身上所有武器并举起双手投降了 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			format(string, sizeof(string), "** 通缉犯 %s 举起双手投降了,请同仁速速前至他的位置将他逮捕", playername);
			SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);

			SendClientMessage(playerid, COLOR_WHITE, "** 你丢弃所有武器并举起双手投降了,你可以在这里等待警方到来或是按回车键反悔");
		    return 1;
		}
		case DIALOG_HP:
        {
            if (!response) return 1;
            switch(listitem)
            {
                case 0:
                {
                    if(GetGVarInt("AppMedic", playerid) > 0)
                    {
                        ShowPlayerDialog(playerid, DIALOG_HP_APP, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取消挂号", ""#TEXT_WHITE"你已经挂号了\n要取消吗?", "确认", "关闭");
                    }
                    else
                    {
                        ShowPlayerDialog(playerid, DIALOG_HP_APP, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"预约治疗", ""#TEXT_WHITE"请选择要预约的治疗项目\t费用\n恢复生命值\t$250\n生命值过低疾病(破伤风、细菌感染等)\t$500\n饥饿疾病(健康流失、厌食症等)\t$800\n体力疾病(小感冒、发烧等)\t$400", "选择", "取消");
                    }
                }
                case 1:
                {
                    format(string, sizeof(string), "品名\t剩余数量\t价格\n绿色药品\t%d\t$%d\n黄色药品\t%d\t$%d\n白色药品\t%d\t$%d"
					, DeptHaveItem(DEPT_MEDIC, ITEM_USE, 97), ItemsList_USE[97][iuPrice], DeptHaveItem(DEPT_MEDIC, ITEM_USE, 99), ItemsList_USE[99][iuPrice], DeptHaveItem(DEPT_MEDIC, ITEM_USE, 98), ItemsList_USE[98][iuPrice]);
					ShowPlayerDialog(playerid, DIALOG_HP_BUY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买药品", string, "选择", "关闭");
                }
                case 2:
				{
				    if(PlayerData[playerid][pDepartment] > 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经属于公部门组织了");

				    ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY, DIALOG_STYLE_MSGBOX, "申请加入医疗部门", ""#TEXT_WHITE"医疗人员的职责为:\n治疗前来医院看病的玩家\n使用救护车接受紧急电话前往紧急治疗玩家\n运送与制作药品供玩家购买\n确认要申请加入医疗部门吗?\n只有在在线期间院长才能审核你的申请", "确认", "取消");
				    SetGVarInt("DDecideID", DEPT_MEDIC, playerid);
				}
            }
            return 1;
        }
        case DIALOG_HP_BUY:
        {
            if (!response) return 1;
            new itemid;
            switch(listitem)
            {
                case 0: itemid = 97;
                case 1: itemid = 99;
                case 2: itemid = 98;
            }
            if(!DeptHaveItem(DEPT_MEDIC, ITEM_USE, itemid)) return SendClientMessage(playerid, COLOR_WHITE, "目前医疗部门正在缺货,无法购买");
            SetGVarInt("DDecideID", itemid, playerid);
            format(string, sizeof(string), ""#TEXT_WHITE"请输入要购买的数量,每瓶%s价格为$%d", ItemsList_USE[itemid][iuName], ItemsList_USE[itemid][iuPrice]);
            ShowPlayerDialog(playerid, DIALOG_HP_BUY_CHECK, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"购买药品", string, "购买", "关闭");
            return 1;
        }
        case DIALOG_HP_BUY_CHECK:
        {
            if (!response) return 1;
            new itemid = GetGVarInt("DDecideID", playerid),
                amount = strval(inputtext);
            if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "数量不得小于1");
            if(PlayerData[playerid][pCash] < ItemsList_USE[itemid][iuPrice]*amount) return SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不足无法购买这个药品");
            if(DeptHaveItem(DEPT_MEDIC, ITEM_USE, itemid) < amount) return SendClientMessage(playerid, COLOR_WHITE, "目前医疗部门没有这么多数量,无法购买");
            if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[itemid][iuSpace]*amount) return SendClientMessage(playerid, COLOR_WHITE, "你的没有空间了");
            GiveDeptItem(DEPT_MEDIC, ITEM_USE, itemid, -amount);
            GivePlayerItem(playerid, ITEM_USE, itemid, amount);
            GiveMoney(playerid, -ItemsList_USE[itemid][iuPrice]*amount);
            Log(moneylog, INFO, "%s(%d)花费了$%d向医疗部门购买了%d个%s", PlayerData[playerid][pName], PlayerData[playerid][pID], ItemsList_USE[itemid][iuPrice]*amount, amount, ItemsList_USE[itemid][iuName]);
            Log(deptlog, INFO, "%s(%d)向医疗部门购买了%d个%s,医疗部门资金增加了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount, ItemsList_USE[itemid][iuName], ItemsList_USE[itemid][iuPrice]*amount);
            Department[DEPT_MEDIC][dpFund] += ItemsList_USE[itemid][iuPrice]*amount;
            format(string, sizeof(string), "** 购买完成,你花费$%d买了%d瓶 %s", ItemsList_USE[itemid][iuPrice], amount, ItemsList_USE[itemid][iuName]);
            SendClientMessage(playerid, COLOR_WHITE, string);
            format(string, sizeof(string), "<<部门>> %s 向我们购买了%d瓶 %s,获得收入资金$%d,目前尚余%d瓶", PlayerData[playerid][pName], amount, ItemsList_USE[itemid][iuName], ItemsList_USE[itemid][iuPrice]*amount, DeptHaveItem(DEPT_MEDIC, ITEM_USE, itemid));
			SendDeptMessage(DEPT_MEDIC, COLOR_FADEBLUE, string);
			return 1;
		}
        case DIALOG_HP_APP:
        {
            if (!response) return 1;
            new type, cost, sick[32], hpstr[32];
            if(GetGVarInt("AppMedic", playerid) > 0)
            {
                DeleteGVar("AppMedic", playerid);
                format(string, sizeof(string), "** %s取消他的挂号了,目前共尚有%d名预约看诊的病患", PlayerData[playerid][pName], GetMedicPatients());
				SendDeptMessage(DEPT_MEDIC, COLOR_NURSEPINK, string);
				SendClientMessage(playerid, COLOR_WHITE, "** 你取消了你的看诊预约了");
            }
            else
            {
                if(GetDeptDutyOnlineMembers(DEPT_MEDIC) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前没有任何当班的医疗人员在线");
                switch(listitem)
                {
                    case 0:
                    {
                        if(GetPlayerHealth_Fix(playerid) > 99.0) return SendClientMessage(playerid, COLOR_WHITE, "你不需要治疗");
                        cost = 250, type = 1;
                        format(sick, sizeof(sick), "生命值不足");
                    }
                    case 1:
                    {
                        switch(SickData[playerid][scHealth])
						{
						    case 0:return SendClientMessage(playerid, COLOR_WHITE, "你不需要治疗");
							case 1:format(sick, sizeof(sick), "破伤风");
							case 2:format(sick, sizeof(sick), "蜂窝性组织炎");
							case 3:format(sick, sizeof(sick), "细菌感染");
							case 4:format(sick, sizeof(sick), "偶发性休克");
						}
                        cost = 500, type = 2;
                    }
                    case 2:
                    {
                        switch(SickData[playerid][scHunger])
						{
						    case 0:return SendClientMessage(playerid, COLOR_WHITE, "你不需要治疗");
							case 1:format(sick, sizeof(sick), "健康流失");
							case 2:format(sick, sizeof(sick), "体力流失");
							case 3:format(sick, sizeof(sick), "厌食症");
						}
                        cost = 800, type = 3;
                    }
                    case 3:
                    {
                        switch(SickData[playerid][scStamina])
						{
						    case 0:return SendClientMessage(playerid, COLOR_WHITE, "你不需要治疗");
							case 1:format(sick, sizeof(sick), "小感冒");
							case 2:format(sick, sizeof(sick), "发烧");
						}
                        cost = 400, type = 4;
                    }
                }
                switch(GetPlayerVirtualWorld(playerid))
                {
                    case 1: format(hpstr, sizeof(hpstr), "洛圣都医院");
                    case 2: format(hpstr, sizeof(hpstr), "圣费耶洛医院");
                    case 3: format(hpstr, sizeof(hpstr), "拉斯维托拉斯医院");
                }
                if(PlayerData[playerid][pCash] < cost) return SendClientMessage(playerid, COLOR_WHITE, "你的现金不足看诊");
                SetGVarInt("AppMedic", type, playerid);
                SetGVarInt("MedicCost", cost, playerid);
                format(string, sizeof(string), "** 新的预约病患 %s ,症状为%s,请医疗人员前往%s治疗", PlayerData[playerid][pName], sick, hpstr);
				SendDeptMessage(DEPT_MEDIC, COLOR_NURSEPINK, string);
				format(string, sizeof(string), "** 你已经预约了看诊治疗%s,看诊费用为$%d,将会在看诊完毕后收费,请在本医院等待医生前来开始治疗", sick, cost);
				SendClientMessage(playerid, COLOR_NURSEPINK, string);
            }
            return 1;
        }
		case DIALOG_HP_MEMBER:
        {
            if (!response) return 1;
            if(PlayerData[playerid][pDepartment] != DEPT_MEDIC) return SendClientMessage(playerid, COLOR_WHITE, "你不是医疗人员");
            switch(listitem)
            {
                case 0:
                {
                    if(GetGVarInt("PlayerAnimal", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "目前无法执勤");
                    if(GetGVarInt("MedicDuty", playerid) == 1)
				    {
				        DeleteGVar("MedicDuty", playerid);
				        SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
				        UpdatePlayerColor(playerid);
				        format(string, sizeof(string), "** %s 将白袍收起下班了 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    }
				    else
				    {
				        SetPlayerSkin_Fix(playerid, 70);
						SetGVarInt("MedicDuty", 1, playerid);
						UpdatePlayerColor(playerid);

			   			format(string, sizeof(string), "** %s 穿上白袍开始上班 **", playername);
						SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					}
                }
                case 1:
                {
                    if(GetGVarInt("MedicDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "你必须先上班才能开始治疗病患");
                    new plist[256], sick[32], l;
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
					    if(GetPlayerVirtualWorld(i) == GetPlayerVirtualWorld(playerid))
					    {
							switch(GetGVarInt("AppMedic", i))
							{
							    case 0: continue;
							    case 1: format(sick, sizeof(sick), "生命值不足");
								case 2:
								{
									switch(SickData[i][scHealth])
									{
								    	case 1:format(sick, sizeof(sick), "破伤风");
								     	case 2:format(sick, sizeof(sick), "蜂窝性组织炎");
								     	case 3:format(sick, sizeof(sick), "细菌感染");
								     	case 4:format(sick, sizeof(sick), "偶发性休克");
									}
								}
								case 3:
								{
								    switch(SickData[i][scHunger])
									{
								     	case 1:format(sick, sizeof(sick), "健康流失");
								     	case 2:format(sick, sizeof(sick), "体力流失");
								     	case 3:format(sick, sizeof(sick), "厌食症");
									}
								}
								case 4:
								{
								    switch(SickData[i][scStamina])
									{
									    case 1:format(sick, sizeof(sick), "小感冒");
									    case 2:format(sick, sizeof(sick), "发烧");
									}
								}
							}
							format(plist, sizeof(plist), "%s%s(%d)\t%s\t$%d\n", plist, PlayerData[i][pName], i, sick, GetGVarInt("MedicCost", i));
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"挂号病患", ""#TEXT_WHITE"目前没有任何病患预约", "确定", "");}
					format(plist, sizeof(plist), "玩家名称(ID)\t症状\t治疗费\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_HP_CURELIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"挂号病患", plist, "开始治疗", "关闭");
                }
                case 2:
                {
                    if(GetGVarInt("MedicMW") > 0) return SendClientMessage(playerid, COLOR_WHITE, "目前没有可运送的药品货物");
                    new mwid = StartMatWar(MW_VEH, 142, 2+random(2), DEPT_MEDIC);
                    SetGVarInt("MedicMW", 1800);
                    format(string, sizeof(string), "** %s 开始了医疗原料运送,已将"#TEXT_BROWN"原料"#TEXT_NURSEPINK"位置标记载了地图上,若顺利将其运送回医院所有成员将会获得经验值与金钱", PlayerData[playerid][pName]);
                    ForEachPlayer(i)
					{
						if(PlayerData[i][pDepartment] != DEPT_MEDIC) continue;
						if(GetGVarInt("PlayerTraceMW", i) == 0)
						{
						    SetGVarInt("PlayerTraceMW", 1, i);
		    				SetGVarInt("PlayerTraceMWID", mwid, i);
						    PlayerTraceMatWar(i, mwid);
						    SendClientMessage(i, COLOR_NURSEPINK, string);
						}
					}
                }
                case 3:
                {
                    new depthave = DeptHaveItem(DEPT_MEDIC, ITEM_USE, 142);
                    format(string, sizeof(string), ""#TEXT_WHITE"选择药品\t需求药品原料货物箱\n绿色药品*10\t1/%d\n黄色药品*10\t1/%d\n白色药品*10\t1/%d", depthave, depthave, depthave);
					ShowPlayerDialog(playerid, DIALOG_HP_MIX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"合成药物", string, "合成", "关闭");
                }
                case 4: ShowPlayerDialog(playerid, DIALOG_HP, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"医院", ""#TEXT_WHITE"你好,请选择需要的服务\n挂号治疗\n购买药品", "选择", "离开");
                case 5:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"目前空间(%d/%d)\n"#TEXT_FADEBLUE"存放\n"#TEXT_YELLOW"取出", GetDeptUsedSpace(DEPT_MEDIC), GetDeptSpace(DEPT_MEDIC));
					ShowPlayerDialog(playerid, DIALOG_DEPT_STORE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"储物空间", string, "选择", "关闭");
					SetGVarInt("DDeptID", DEPT_MEDIC, playerid);
                }
	        }
	        return 1;
        }
        case DIALOG_HP_CURELIST:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				pworld = GetPlayerVirtualWorld(playerid);
			if(GetGVarInt("MedicDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "你必须先上班才能开始治疗病患");
			if(chosed == playerid) return SendClientMessage(playerid, COLOR_WHITE, "你不能帮自己看诊");
			if(GetGVarInt("AppMedic", chosed) == 0) return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经被治疗,或是已取消预约");
			if(GetGVarInt("HPUsed", pworld) == 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有其他医生正在诊疗中,请稍候");
		    if(pworld != GetPlayerVirtualWorld(chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 病患已经离开医院了,无法治疗");

		    SetGVarInt("HPUsed", 1, pworld);
		    SetGVarInt("HPPatient", chosed, pworld);
		    SetGVarInt("HPCureDoc", playerid, chosed);
		    SendClientMessage(chosed, COLOR_NURSEPINK, "** 治疗已经轮到你了,请前往柜台右方的诊疗室的位置开始你的疗程");
		    format(string, sizeof(string), "** 你开始了 %s 的疗程,请等待病患前往诊疗室", PlayerData[chosed][pName]);
		    SendClientMessage(playerid, COLOR_NURSEPINK, string);
		    format(string, sizeof(string), "<<部门>> 医疗人员 %s 开始为病患 %s 进行诊疗", PlayerData[playerid][pName], PlayerData[chosed][pName]);
			SendDeptMessage(DEPT_MEDIC, COLOR_FADEBLUE, string);
		    return 1;
		}
        case DIALOG_HP_MIX:
		{
		    if(!response) return 1;

			new dpid = PlayerData[playerid][pDepartment];
			switch(listitem)
			{
			    case 0:
			    {
			        if(DeptHaveItem(DEPT_MEDIC, ITEM_USE, 142) < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 部门的储物间必须有足够的原料");
			        GiveDeptItem(dpid, ITEM_USE, 97, 10);
			        GiveDeptItem(dpid, ITEM_USE, 142, -1);
			        format(string, sizeof(string), "** %s 使用原料箱合成了几瓶药品 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					SendClientMessage(playerid, COLOR_WHITE, "** 已消耗1箱药品原料箱合成10瓶绿色药品,并保存到储物间内");
			    }
			    case 1:
			    {
			        if(DeptHaveItem(DEPT_MEDIC, ITEM_USE, 142) < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 部门的储物间必须有足够的原料");
			        GiveDeptItem(dpid, ITEM_USE, 99, 10);
			        GiveDeptItem(dpid, ITEM_USE, 142, -1);
			        format(string, sizeof(string), "** %s 使用原料箱合成了几瓶药品 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					SendClientMessage(playerid, COLOR_WHITE, "** 已消耗1箱药品原料箱合成10瓶黄色药品,并保存到储物间内");
			    }
			    case 2:
			    {
			        if(DeptHaveItem(DEPT_MEDIC, ITEM_USE, 142) < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 部门的储物间必须有足够的原料");
			        GiveDeptItem(dpid, ITEM_USE, 98, 10);
			        GiveDeptItem(dpid, ITEM_USE, 142, -1);
			        format(string, sizeof(string), "** %s 使用原料箱合成了几瓶药品 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					SendClientMessage(playerid, COLOR_WHITE, "** 已消耗1箱药品原料箱合成10瓶白色药品,并保存到储物间内");
			    }
			}
			new randpt = random(3);
			if(randpt == 0)
			{
				GivePlayerPoint(playerid, 4, 2);
				format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"研发知识"#TEXT_LIGHTBLUE"2点");
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			new depthave = DeptHaveItem(DEPT_MEDIC, ITEM_USE, 142);
            format(string, sizeof(string), ""#TEXT_WHITE"选择药品\t需求药品原料货物箱\n绿色药品*10\t1/%d\n黄色药品*10\t1/%d\n白色药品*10\t1/%d", depthave, depthave, depthave);
			ShowPlayerDialog(playerid, DIALOG_HP_MIX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"合成药物", string, "合成", "关闭");
			return 1;
		}
		case DIALOG_MEDIC:
        {
            if (!response) return ShowPlayerMenu(playerid);
            if(PlayerData[playerid][pDepartment] != DEPT_MEDIC) return SendClientMessage(playerid, COLOR_WHITE, "你不是医疗人员");
            switch(listitem)
            {
                case 0:
                {
                    new plist[256], l, status[24];
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pDepartment] != DEPT_MEDIC) { continue;}
						if(GetGVarInt("MedicDuty", i) == 1) format(status, sizeof(status), ""#TEXT_YELLOW"上班中");
						else format(status, sizeof(status), "下班");
						format(plist, sizeof(plist), "%s"#TEXT_WHITE"%s(%d)\t%d\t%s\n", plist, PlayerData[i][pName], i, PlayerData[i][pDeptRank], status);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"在线同事", ""#TEXT_WHITE"目前没有任何在线同事", "确定", "");}
					format(plist, sizeof(plist), "名称(ID)\t阶级\t状态\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_DEPT_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"在线同事", plist, "查看", "关闭");
                }
                case 1:
				{
				    new i, j, k, PList[1024], stat[32];
				    PList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_DEPARTMENT){continue;}
					    if(VehData[i][vOwner] == DEPT_MEDIC)
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(PList, sizeof(PList), "%s%s\t%s\t%s\n", PList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "医用载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(PList, sizeof(PList), "车名\t车牌\t状态\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "医用载具一览", PList, "管理", "关闭");
				}
				case 2:
				{
				    new i, j, k, EList[256];
				    EList[0] = EOS;
		     		for(i = k = 0, j = sizeof(MedicSpawn); i < j ; i++)
					{
						format(EList, sizeof(EList), "%s%s\n", EList, MedicSpawn[i][dpsName]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"据点一览", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_HQ, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"据点一览", EList, "选择", "取消");
				}
				case 3:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理医疗部门\n审核申请(%d)\n邀请新成员\n设定内部公告\n管理资金\n转让领导位置", GetDeptApplyMembers(DEPT_MEDIC));
					ShowPlayerDialog(playerid, DIALOG_DEPT_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "管理", "关闭");
				}
				case 4:
				{
				    if(PlayerData[playerid][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个部门的领导,在你转让出这个位置以前无法离开这个部门");
					ShowPlayerDialog(playerid, DIALOG_DEPT_QUIT, DIALOG_STYLE_MSGBOX, "离开", ""#TEXT_WHITE"确认要离开这个部门?", "确认", "取消");
				}
            }
            return 1;
        }
        case DIALOG_COUNSELOR:
        {
            if (!response) return ShowPlayerMenu(playerid);
            if(PlayerData[playerid][pDepartment] != DEPT_COUNSELOR) return SendClientMessage(playerid, COLOR_WHITE, "你不是辅导员");
            switch(listitem)
            {
                case 0:
                {
                    new plist[256], l;
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pLevel] < 15)
						{
							format(plist, sizeof(plist), "%s"#TEXT_WHITE"%s(%d)\n", plist, PlayerData[i][pName], i);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"寻找新手玩家", ""#TEXT_WHITE"目前没有任何新手玩家", "确定", "");}
					format(plist, sizeof(plist), "名称(ID)\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_COUNSELOR_NEWBIE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"寻找新手玩家", plist, "查看", "关闭");
                }
                case 1:
                {
                    new plist[256], l;
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pDepartment] != DEPT_COUNSELOR) { continue;}
						format(plist, sizeof(plist), "%s"#TEXT_WHITE"%s(%d)\t%d\n", plist, PlayerData[i][pName], i, PlayerData[i][pDeptRank]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"在线成员", ""#TEXT_WHITE"目前没有任何在线成员", "确定", "");}
					format(plist, sizeof(plist), "名称(ID)\t阶级\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_DEPT_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"在线成员", plist, "查看", "关闭");
                }
                case 2:
				{
				    new i, j, k, PList[1024], stat[32];
				    PList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_DEPARTMENT){continue;}
					    if(VehData[i][vOwner] == DEPT_COUNSELOR)
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(PList, sizeof(PList), "%s%s\t%s\t%s\n", PList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "辅导员专用载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(PList, sizeof(PList), "车名\t车牌\t状态\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "辅导员专用载具一览", PList, "管理", "关闭");
				}
				case 3:
				{
				    new i, j, k, EList[256];
				    EList[0] = EOS;
		     		for(i = k = 0, j = sizeof(CounselorSpawn); i < j ; i++)
					{
						format(EList, sizeof(EList), "%s%s\n", EList, CounselorSpawn[i][dpsName]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"据点一览", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_HQ, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"据点一览", EList, "选择", "取消");
				}
				case 4:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理辅导部门\n审核申请(%d)\n邀请新成员\n设定内部公告\n管理资金\n转让领导位置", GetDeptApplyMembers(DEPT_COUNSELOR));
					ShowPlayerDialog(playerid, DIALOG_DEPT_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "管理", "关闭");
				}
				case 5:
				{
				    if(PlayerData[playerid][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "你目前是这个部门的领导,在你转让出这个位置以前无法离开这个部门");
					ShowPlayerDialog(playerid, DIALOG_DEPT_QUIT, DIALOG_STYLE_MSGBOX, "离开", ""#TEXT_WHITE"确认要离开这个部门?", "确认", "取消");
				}
            }
            return 1;
        }
        case DIALOG_COUNSELOR_NEWBIE:
        {
            if (!response) return ShowPlayerDepartmentMenu(playerid);
            new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				Float:px, Float:py, Float:pz;
            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");

            GetPlayerPos_Out(playerid, px, py, pz);
			SetPlayerGPS(playerid, px, py, pz);
			format(string, sizeof(string), "** 已经为你定位新手玩家 %s 的位置", PlayerData[chosed][pName]);
			SendClientMessage(playerid, COLOR_FADERED, string);
			return 1;
		}
		case DIALOG_GOV:
        {
            if (!response) return ShowPlayerMenu(playerid);
            if(PlayerData[playerid][pDepartment] != DEPT_GOVERNMENT) return SendClientMessage(playerid, COLOR_WHITE, "你不是政府人员");
            switch(listitem)
            {
                case 0:
                {
                    new plist[256], l;
					plist[0] = EOS, l = 0;
					ForEachPlayer(i)
					{
						if(PlayerData[i][pDepartment] != DEPT_GOVERNMENT) { continue;}
						format(plist, sizeof(plist), "%s"#TEXT_WHITE"%s(%d)\t%d\n", plist, PlayerData[i][pName], i, PlayerData[i][pDeptRank]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"在线成员", ""#TEXT_WHITE"目前没有任何在线成员", "确定", "");}
					format(plist, sizeof(plist), "名称(ID)\t阶级\n%s", plist);
					ShowPlayerDialog(playerid, DIALOG_DEPT_MEMBERS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"在线成员", plist, "查看", "关闭");
                }
                case 1:
				{
				    new i, j, k, PList[1024], stat[32];
				    PList[0] = EOS;
				    for(i = 1, k = 0, j = GetVehiclePoolSize(); i <= j; i++)
					{
					    if(VehData[i][vType] != VTYPE_DEPARTMENT){continue;}
					    if(VehData[i][vOwner] == DEPT_GOVERNMENT)
					    {
					        switch(VehData[i][vStatus])
					        {
					            case VEH_NORMAL:
								{
									if(VehData[i][vLock] == 0) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"未上锁");
									else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
								}
					            case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
					            case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
					            case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
								case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
					        }
							format(PList, sizeof(PList), "%s%s\t%s\t%s\n", PList, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], stat);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "政府专用载具一览", ""#TEXT_WHITE"目前没有任何载具", "确认", "");}
					format(PList, sizeof(PList), "车名\t车牌\t状态\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "政府专用载具一览", PList, "管理", "关闭");
				}
				case 2:
				{
				    new i, j, k, EList[256];
				    EList[0] = EOS;
		     		for(i = k = 0, j = sizeof(GovernmentSpawn); i < j ; i++)
					{
						format(EList, sizeof(EList), "%s%s\n", EList, GovernmentSpawn[i][dpsName]);
						SetGVarInt("DListID", i, k*1000+playerid);
						k++;
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"据点一览", ""#TEXT_WHITE"你的部门并未拥有任何可用据点", "确定", "");}
					format(EList, sizeof(EList), "名称\n%s", EList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_HQ, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"据点一览", EList, "选择", "取消");
				}
				case 3:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"管理政府部门\n审核申请(%d)\n邀请新成员\n设定内部公告\n管理资金\n转让州长位置", GetDeptApplyMembers(DEPT_GOVERNMENT));
					ShowPlayerDialog(playerid, DIALOG_DEPT_SETTING, DIALOG_STYLE_TABLIST_HEADERS, "管理部门", string, "管理", "关闭");
				}
				case 4:
				{
				    if(PlayerData[playerid][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "你目前是州长,在你转让出这个位置以前无法离开政府部门");
					ShowPlayerDialog(playerid, DIALOG_DEPT_QUIT, DIALOG_STYLE_MSGBOX, "离开", ""#TEXT_WHITE"确认要离开政府部门?", "确认", "取消");
				}
            }
            return 1;
        }
		case DIALOG_DEPT:// /setdept指令
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);

			format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s\n设定领导\n设定资金\n给予资金", Department[chosed][dpName]);
			ShowPlayerDialog(playerid, DIALOG_DEPT_ADMIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"管理公部门", string, "选择", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_DEPT_ADMIN:
		{
		    if(!response) return 1;
		    switch(listitem)
		    {
		        case 0: ShowPlayerDialog(playerid, DIALOG_DEPT_SETLD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定部门领导", ""#TEXT_WHITE"请输入要设定为领导的玩家名称或ID", "确认", "取消");
		        case 1: ShowPlayerDialog(playerid, DIALOG_DEPT_SETFUND, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定部门资金", ""#TEXT_WHITE"请输入要将资金设定为", "确认", "取消");
		        case 2: ShowPlayerDialog(playerid, DIALOG_DEPT_GIVEFUND, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"给予部门资金", ""#TEXT_WHITE"请输入要给予的资金", "确认", "取消");
		    }
		    return 1;
		}
		case DIALOG_DEPT_SETLD:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				setid;
		    sscanf(inputtext, "u", setid);
		    if(!GetGVarInt("Logged", setid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
		    if(PlayerData[setid][pDepartment] > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家目前已经属于别的部门了");
			PlayerData[setid][pDepartment] = chosed;
			PlayerData[setid][pDeptRank] = 5;
			Department[chosed][dpLeader] = PlayerData[setid][pID];
			format(string, sizeof(string), "** 管理员 %s 已将你设为%s的领导", Department[chosed][dpName], PlayerData[playerid][pName]);
			SendClientMessage(setid, COLOR_FADERED, string);
			format(string, sizeof(string), "** 已将 %s 设为%s的领导", PlayerData[setid][pName], Department[chosed][dpName]);
			SendClientMessage(playerid, COLOR_FADERED, string);
			Log(deptlog, INFO, "管理员%s(%d)将%s(%d)设为%s(%d)的领导", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[setid][pName], PlayerData[setid][pID], Department[chosed][dpName], chosed);
			return 1;
		}
		case DIALOG_DEPT_SETFUND:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				value = strval(inputtext);

			Department[chosed][dpFund] = value;
			format(string, sizeof(string), "** 管理员 %s 已将你们部门的资金调整为 $%d", PlayerData[playerid][pName], value);
			SendDeptMessage(chosed, COLOR_FADEBLUE, string);
			format(string, sizeof(string), "** 已将%s的资金调整为$%d", Department[chosed][dpName], value);
			SendClientMessage(playerid, COLOR_FADERED, string);
			Log(deptlog, INFO, "管理员%s(%d)将%s(%d)的资金设定为$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[chosed][dpName], chosed, value);
			return 1;
		}
		case DIALOG_DEPT_GIVEFUND:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid),
				value = strval(inputtext);

			Department[chosed][dpFund] += value;
			format(string, sizeof(string), "** 管理员 %s 已给予你们部门资金共 $%d", PlayerData[playerid][pName], value);
			SendDeptMessage(chosed, COLOR_FADEBLUE, string);
			format(string, sizeof(string), "** 已给予%s资金共$%d", Department[chosed][dpName], value);
			SendClientMessage(playerid, COLOR_FADERED, string);
			Log(deptlog, INFO, "管理员%s(%d)给予了%s(%d)资金共$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[chosed][dpName], chosed, value);
			return 1;
		}
		case DIALOG_DEPT_MEMBERS:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);

			format(string, sizeof(string), ""#TEXT_WHITE"你选择了%s\n调整阶级\n踢出组织", PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_DEPT_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"管理成员", string, "选择", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_DEPT_MEMBER:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				dpid = PlayerData[playerid][pDepartment];

		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理部门成员的权限");
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
			if(dpid != PlayerData[chosed][pDepartment] || PlayerData[chosed][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个成员的权限");
			switch(listitem)
			{
			    case 0:
			    {
				    format(string, sizeof(string), ""#TEXT_WHITE"请选择要将%s的阶级调整成:\n%s(R4)\n%s(R3)\n%s(R2)\n%s(R1)"
					, PlayerData[chosed][pName], Department[dpid][dpR4], Department[dpid][dpR3], Department[dpid][dpR2], Department[dpid][dpR1]);
					ShowPlayerDialog(playerid, DIALOG_DEPT_SETRANK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"调整阶级", string, "选择", "取消");
				}
				case 1:
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"确认要将%s踢出%s吗?", PlayerData[chosed][pName], Department[dpid][dpName]);
					ShowPlayerDialog(playerid, DIALOG_DEPT_KICK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"踢除成员", string, "选择", "取消");
				}
			}
			return 1;
		}
		case DIALOG_DEPT_SETRANK:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				dpid = PlayerData[playerid][pDepartment],
				rank;

		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理部门成员的权限");
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
			if(dpid != PlayerData[chosed][pDepartment] || PlayerData[chosed][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个成员的权限");

			switch(listitem)
			{
			    case 0: rank = 4;
			    case 1: rank = 3;
			    case 2: rank = 2;
			    case 3: rank = 1;
			}
			PlayerData[chosed][pDeptRank] = rank;
			format(string, sizeof(string), "<<部门>> %s 将成员%s的阶级调整为R%d", PlayerData[playerid][pName], PlayerData[chosed][pName], rank);
			SendDeptMessage(chosed, COLOR_FADEBLUE, string);
			return 1;
		}
		case DIALOG_DEPT_KICK:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DDecideID", playerid),
				dpid = PlayerData[playerid][pDepartment];

		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理部门成员的权限");
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
			if(dpid != PlayerData[chosed][pDepartment] || PlayerData[chosed][pDeptRank] == 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有管理这个成员的权限");

			PlayerData[chosed][pDepartment] =
			PlayerData[chosed][pDeptRank] = 0;
			format(string, sizeof(string), "<<部门>> %s 将成员%s的踢出%s了", PlayerData[playerid][pName], PlayerData[chosed][pName], Department[dpid][dpName]);
			SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
			format(string, sizeof(string), "** %s 领导%s将你请出该部门了", Department[dpid][dpName], PlayerData[playerid][pName]);
			SendClientMessage(chosed, COLOR_FADERED, string);
			Log(deptlog, INFO, "%s(%d)将%s(%d)的成员%s(%d)请出该部门了", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, PlayerData[chosed][pName], PlayerData[chosed][pID]);
			return 1;
		}
		case DIALOG_DEPT_HQ:
        {
            if (!response) return ShowPlayerDepartmentMenu(playerid);
            new chosed = GetGVarInt("DListID", listitem*1000+playerid);
            switch(PlayerData[playerid][pDepartment])
            {
                case DEPT_POLICE:
                {
                    SetPlayerGPS(playerid, PoliceSpawn[chosed][dpsoutX], PoliceSpawn[chosed][dpsoutY], PoliceSpawn[chosed][dpsoutZ]);
                    format(string, sizeof(string), "** 已为你导航部门据点 "#TEXT_VIOLET"%s"#TEXT_WHITE" 的位置", PoliceSpawn[chosed][dpsName]);
                }
                case DEPT_MEDIC:
                {
                    SetPlayerGPS(playerid, MedicSpawn[chosed][dpsoutX], MedicSpawn[chosed][dpsoutY], MedicSpawn[chosed][dpsoutZ]);
                    format(string, sizeof(string), "** 已为你导航部门据点 "#TEXT_VIOLET"%s"#TEXT_WHITE" 的位置", MedicSpawn[chosed][dpsName]);
                }
                case DEPT_GOVERNMENT:
                {
                    SetPlayerGPS(playerid, GovernmentSpawn[chosed][dpsoutX], GovernmentSpawn[chosed][dpsoutY], GovernmentSpawn[chosed][dpsoutZ]);
                    format(string, sizeof(string), "** 已为你导航部门据点 "#TEXT_VIOLET"%s"#TEXT_WHITE" 的位置", GovernmentSpawn[chosed][dpsName]);
                }
                case DEPT_COUNSELOR:
                {
                    SetPlayerGPS(playerid, CounselorSpawn[chosed][dpsoutX], CounselorSpawn[chosed][dpsoutY], CounselorSpawn[chosed][dpsoutZ]);
                    format(string, sizeof(string), "** 已为你导航部门据点 "#TEXT_VIOLET"%s"#TEXT_WHITE" 的位置", CounselorSpawn[chosed][dpsName]);
                }
            }
            SendClientMessage(playerid, COLOR_WHITE, string);
            return 1;
        }
        case DIALOG_DEPT_VEHICLE:
		{
		    if (!response) return ShowPlayerDepartmentMenu(playerid);
		    new vehicleid = GetGVarInt("DListID", listitem*1000+playerid), stat[32];
		    switch(VehData[vehicleid][vStatus])
			{
				case VEH_NORMAL:
				{
					if(VehData[vehicleid][vLock] == 0) format(stat, sizeof(stat), "未上锁");
					else format(stat, sizeof(stat), ""#TEXT_FADEGREEN"已上锁");
				}
				case VEH_STOLEN: format(stat, sizeof(stat), ""#TEXT_YELLOW"失窃");
				case VEH_DESTROYED: format(stat, sizeof(stat), ""#TEXT_RED"毁坏");
				case VEH_STORED: format(stat, sizeof(stat), ""#TEXT_LIGHTBLUE"已储藏");
				case VEH_UNDELIVERED: format(stat, sizeof(stat), ""#TEXT_ORANGE"运送中");
			}
		    format(string, sizeof(string), ""#TEXT_WHITE"\t \n"#TEXT_FADEGREEN"取得载具\n名称:\t"#TEXT_SKYBLUE"%s\n车牌:\t%s\nID:\t%d\n状态:\t%s"
			, GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vPlate], vehicleid, stat);
			ShowPlayerDialog(playerid, DIALOG_DEPT_VEHICLE_SET, DIALOG_STYLE_TABLIST_HEADERS, "载具一览", string, "选择", "取消");
			SetGVarInt("DDecideID", vehicleid, playerid);
		    return 1;
		}
        case DIALOG_DEPT_VEHICLE_SET:
		{
		    if (!response) return ShowPlayerDepartmentMenu(playerid);
		    new vehicleid = GetGVarInt("DDecideID", playerid);
		    if(VehData[vehicleid][vOwner] != PlayerData[playerid][pDepartment]) return SendClientMessage(playerid, COLOR_WHITE, "这个载具已经不属于你的部门了");
		    switch(listitem)
		    {
		        case 0: GetVehicleForPlayer(playerid, vehicleid);
			}
			return 1;
		}
		case DIALOG_DEPT_APPLY:
		{
		    if (!response) return 1;
		    new chosed = GetGVarInt("DDecideID", playerid);
		    if(PlayerData[playerid][pDeptApply] == chosed) return SendClientMessage(playerid, COLOR_WHITE, "你已经发送过申请了");

		    PlayerData[playerid][pDeptApply] = chosed;
		    format(string, sizeof(string), "** 已经向 %s 提出申请,你必须在线上该部门领导才能审核你的申请", Department[chosed][dpName]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    format(string, sizeof(string), "<<部门>> %s向我们提出加入的申请,请领导审核", PlayerData[playerid][pName]);
		    SendDeptMessage(chosed, COLOR_FADEBLUE, string);
		    return 1;
		}
		case DIALOG_DEPT_STORE:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDeptID", playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
                    ShowPlayerBagMenu(playerid, 3);
                }
                case 1:
                {
                    ShowPlayerItemStoreMenu(playerid, 3, dpid, 0);
                }
            }
            return 1;
        }
        case DIALOG_DEPT_STORE_LOAD:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDeptID", playerid),
		        slot = GetGVarInt("DListID", listitem*1000+playerid);
			if(slot == PREV_PAGE) ShowPlayerItemStoreMenu(playerid, 3, dpid, GetGVarInt("Page", playerid)-1);
		    else if(slot == NEXT_PAGE) ShowPlayerItemStoreMenu(playerid, 3, dpid, GetGVarInt("Page", playerid)+1);
      		else
		    {
		        new id = DeptItem[dpid][slot][diItemID],
					type = DeptItem[dpid][slot][diType];
				switch(type)
				{
				    case ITEM_WEAPON:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的弹药数,目前有 %d", WeaponsList[id][wName], DeptItem[dpid][slot][diCount]);
				        ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_USE:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"请输入要取出 %s 的数量,目前有 %d 个\n每个占用空间:%d,你的背包剩余容量:%d",
						ItemsList_USE[id][iuName], DeptItem[dpid][slot][diCount], ItemsList_USE[id][iuSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_LOAD_CHECK, DIALOG_STYLE_INPUT, "取出道具", string, "使用", "关闭");
					}
					case ITEM_EQ:
				    {
				        format(string, sizeof(string), ""#TEXT_WHITE"确认要取出 %s 吗?目前尚有 %d 个\n占用空间:%d,你的背包剩余容量:%d",
						ItemsList_EQ[id][ieqName], DeptItem[dpid][slot][diCount], ItemsList_EQ[id][ieqSpace], GetPlayerRemainingSpace(playerid));
						ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_LOAD_CHECK, DIALOG_STYLE_MSGBOX, "取出道具", string, "使用", "关闭");
					}
				}
				SetGVarInt("DDecideID", slot, playerid);
			}
			return 1;
		}
		case DIALOG_DEPT_STORE_LOAD_CHECK:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDeptID", playerid),
		        slot = GetGVarInt("DDecideID", playerid),
		        id = DeptItem[dpid][slot][diItemID],
				type = DeptItem[dpid][slot][diType],
				amount;
			switch(type)
			{
			    case ITEM_WEAPON:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > DeptItem[dpid][slot][diCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 储物间里面没有这么多弹药");
			        GivePlayerWeapon(playerid, id, amount);
		            GiveDeptItem(dpid, ITEM_WEAPON, id, -amount);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间取出%d弹药的%s", PlayerData[playerid][pName], amount, WeaponsList[id][wName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
				}
				case ITEM_USE:
			    {
			        amount = strval(inputtext);
			        if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
			        if(amount > DeptItem[dpid][slot][diCount]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 储物间里面没有这么多数量");
			        if(amount*ItemsList_USE[id][iuSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 1, id, amount);
		            GiveDeptItem(dpid, ITEM_USE, id, -amount);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间取出%d个%s", PlayerData[playerid][pName], amount, ItemsList_USE[id][iuName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
				}
				case ITEM_EQ:
			    {
			        if(ItemsList_EQ[id][ieqSpace] > GetPlayerRemainingSpace(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间装下那么多数量");
			        GivePlayerItem(playerid, 2, id, 1);
		            GiveDeptItem(dpid, ITEM_EQ, id, -1);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间取出1个%s", PlayerData[playerid][pName], ItemsList_EQ[id][ieqName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
				}
			}
			return 1;
		}
        case DIALOG_DEPT_STORE_SAVE:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("DDeptID", playerid),
				type = GetGVarInt("PutItemType", playerid),
				chosed = GetGVarInt("DDecideID", playerid),
				space = GetDeptSpace(dpid),
				amount, uspace = GetDeptUsedSpace(dpid);
		    switch(type)
		    {
		        case ITEM_WEAPON:
		        {
					static gunid, ammo;
		            amount = strval(inputtext);
		            GetPlayerWeaponData(playerid, chosed, gunid, ammo);
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(amount > ammo) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多弹药");
		            if(uspace + WeaponsList[gunid][wSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 没有空间放入这个武器");
		            GivePlayerWeapon(playerid, gunid, -amount);
		            GiveDeptItem(dpid, ITEM_WEAPON, gunid, amount);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间放入%d弹药的%s", PlayerData[playerid][pName], amount, WeaponsList[gunid][wName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
                }
                case ITEM_USE:
		        {
		            amount = strval(inputtext);
		            if(amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 数量不得小于0");
		            if(PlayerHaveItem(playerid, 1, chosed) < amount) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这么多道具");
		            if(ItemsList_USE[chosed][iuType] == IU_TICKET) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在储物间中放入这个道具");
		            if(uspace + ItemsList_USE[chosed][iuSpace]*amount > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 没有空间放入这么多道具");
		            GivePlayerItem(playerid, 1, chosed, -amount);
		            GiveDeptItem(dpid, ITEM_USE, chosed, amount);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间放入%d个%s", PlayerData[playerid][pName], amount, ItemsList_USE[chosed][iuName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
                }
                case ITEM_EQ:
		        {
		            if(!PlayerHaveItem(playerid, 2, chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有这个道具");
                    if(ItemsList_EQ[chosed][ieqType] == IEQ_SKIN || ItemsList_EQ[chosed][ieqType] == IEQ_LICENSE || ItemsList_EQ[chosed][ieqType] == IEQ_SKINX) return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在储物间中放入这个道具");
		            if(uspace + ItemsList_EQ[chosed][ieqSpace] > space) return SendClientMessage(playerid, COLOR_WHITE, "错误: 没有空间放入这个道具");
		            GivePlayerItem(playerid, 2, chosed, -1);
		            GiveDeptItem(dpid, ITEM_EQ, chosed, 1);
					format(string, sizeof(string), "<<部门>> %s 已从部门储物间放入1个%s", PlayerData[playerid][pName], ItemsList_EQ[chosed][ieqName]);
					SendDeptMessage(dpid, COLOR_FADEBLUE, string);
                }
            }
            return 1;
        }
        case DIALOG_DEPT_SETTING:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment];
		    switch(listitem)
		    {
		        case 0:
		        {
		            if(PlayerData[playerid][pDeptRank] < 4) return SendClientMessage(playerid, COLOR_WHITE, "只有R4以上的成员才能审核新成员");
		            new l, PList[512];
				    PList[0] = EOS;
				    ForEachPlayer(p)
			        {
			            if(PlayerData[p][pDeptApply] == dpid)
			            {
				            format(PList, sizeof(PList), "%s%s(%d)\t%d\n", PList, PlayerData[p][pName], p, PlayerData[p][pLevel]);
							SetGVarInt("DListID", p, l*1000+playerid);
						    l++;
						}
					}
					if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"申请列表", ""#TEXT_WHITE"目前未有任何玩家申请加入你的部门", "确定", "");}
					format(PList, sizeof(PList), "玩家名称(ID)\t等级\n%s", PList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"申请列表", PList, "选择", "取消");
		        }
		        case 1:
				{
				    if(PlayerData[playerid][pDeptRank] < 4) return SendClientMessage(playerid, COLOR_WHITE, "只有R4以上的成员才能邀请新成员");
				    ShowPlayerDialog(playerid, DIALOG_DEPT_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", ""#TEXT_WHITE"请输入要邀请的玩家名称或ID", "发送邀请", "取消");
				}
				case 2:
				{
					if(PlayerData[playerid][pDeptRank] != 5) return SendClientMessage(playerid, COLOR_WHITE, "你不是这个部门的领导");
					ShowPlayerDialog(playerid, DIALOG_DEPT_CATALOG, DIALOG_STYLE_INPUT, "更改内部公告", ""#TEXT_WHITE"请输入新的公告内容", "确认", "取消");
				}
				case 3:
                {
                    format(string, sizeof(string), ""#TEXT_WHITE"余额:%d\n"#TEXT_FADEGREEN"存款\n"#TEXT_LIGHTRED"取款", Department[dpid][dpFund]);
					ShowPlayerDialog(playerid, DIALOG_DEPT_FUND, DIALOG_STYLE_TABLIST_HEADERS, "管理资金", string, "选择", "取消");
				}
				case 4:
				{
				    if(PlayerData[playerid][pDeptRank] != 5) return SendClientMessage(playerid, COLOR_WHITE, "你不是这个部门的领导");
				    new k, DList[512];
				    DList[0] = EOS;
				    ForEachPlayer(i)
					{
					    if(PlayerData[i][pDepartment] != dpid) continue;
					    if(PlayerData[i][pDeptRank] > 3)
					    {
							format(DList, sizeof(DList), "%s%s\n", DList, PlayerData[i][pName]);
							SetGVarInt("DListID", i, k*1000+playerid);
							k++;
						}
					}
					if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "选择转让给", ""#TEXT_WHITE"目前没有任何在线的R4成员", "确认", "");}
					format(DList, sizeof(DList), ""#TEXT_WHITE"成员名称\n%s", DList);
					ShowPlayerDialog(playerid, DIALOG_DEPT_TRANSFER, DIALOG_STYLE_TABLIST_HEADERS, "选择转让给", DList, "查看", "关闭");
				}
		    }
		    return 1;
		}
		case DIALOG_DEPT_CATALOG:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment];
		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有领导可以更改帮会公告");
			if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_DEPT_CATALOG, DIALOG_STYLE_INPUT, "更改公告", ""#TEXT_WHITE"你输入的内容为空白,或是含有无法使用的字元", "确认", "取消");
			}
			mysql_format(DEFAULT_SESSION, Department[dpid][dpCatalog], 128, "%s", inputtext);
			format(string, sizeof(string), "<<部门>> 领导 %s 发布了新公告: %s", PlayerData[playerid][pName], inputtext);
            SendDeptMessage(dpid, COLOR_FADEBLUE, string);
		    return 1;
		}
		case DIALOG_DEPT_FUND:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment];
		    if(PlayerData[playerid][pDeptRank] < 5) return SendClientMessage(playerid, COLOR_WHITE, "错误: 只有领导可以存取资金");
		    switch(listitem)
		    {
		        case 0:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入存入金额\n目前余额为: %d", Department[dpid][dpFund]);
		            ShowPlayerDialog(playerid, DIALOG_DEPT_FUND_DEPOSIT, DIALOG_STYLE_INPUT, "存入资金", string, "确认", "取消");
		        }
		        case 1:
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"请输入取出金额\n目前余额为: %d", Department[dpid][dpFund]);
		            ShowPlayerDialog(playerid, DIALOG_DEPT_FUND_WITHDRAW, DIALOG_STYLE_INPUT, "取出资金", string, "确认", "取消");
		        }
		    }
		    return 1;
		}
		case DIALOG_DEPT_FUND_DEPOSIT:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment], amount = strval(inputtext);
		    if(amount > PlayerData[playerid][pCash]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上的现金没有这么多");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    GiveMoney(playerid, -amount);
		    Department[dpid][dpFund] += amount;
		    if(dpid == DEPT_GOVERNMENT)
		    {
		        Log(moneylog, INFO, "%s(%d)于国库存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        Log(deptlog, INFO, "%s(%d)于国库存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        format(string, sizeof(string), "<<政府公告>> 州长 %s 于国库存入了$%d", PlayerData[playerid][pName], amount);
	            SendClientMessageToAll(COLOR_GREEN, string);
		    }
		    else
		    {
		        Log(moneylog, INFO, "%s(%d)于%s(%d)资金存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, amount);
		        Log(deptlog, INFO, "%s(%d)于%s(%d)资金存入了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, amount);
			    format(string, sizeof(string), "<<部门>> %s 于部门资金存入了$%d", PlayerData[playerid][pName], amount);
	            SendDeptMessage(dpid, COLOR_FADEBLUE, string);
	        }
		    return 1;
		}
		case DIALOG_DEPT_FUND_WITHDRAW:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment], amount = strval(inputtext);
		    if(amount > Department[dpid][dpFund]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 资金没有这么多");
		    if(amount < 1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 输入的值不能小于0");
		    GiveMoney(playerid, amount);
		    Department[dpid][dpFund] -= amount;
		    if(dpid == DEPT_GOVERNMENT)
		    {
		        Log(moneylog, INFO, "%s(%d)于国库取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        Log(deptlog, INFO, "%s(%d)于国库取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		        format(string, sizeof(string), "<<政府公告>> 州长 %s 从国库取出了$%d", PlayerData[playerid][pName], amount);
	            SendClientMessageToAll(COLOR_GREEN, string);
		    }
		    else
		    {
		        Log(moneylog, INFO, "%s(%d)于%s(%d)资金取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, amount);
		        Log(deptlog, INFO, "%s(%d)于%s(%d)资金取出了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, amount);
			    format(string, sizeof(string), "<<部门>> %s 从部门资金取出了$%d", PlayerData[playerid][pName], amount);
	            SendDeptMessage(dpid, COLOR_FADEBLUE, string);
	        }
		    return 1;
		}
		case DIALOG_DEPT_TRANSFER:
		{
		    if (!response) return ShowPlayerDepartmentMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
		        dpid = PlayerData[playerid][pDepartment];
			format(string, sizeof(string), ""#TEXT_WHITE"确认要将%s的领导位置交给%s?\n转让后部门的最高管理权将交给他", Department[dpid][dpName], PlayerData[chosed][pName]);
			ShowPlayerDialog(playerid, DIALOG_DEPT_TRANSFER_CHECK, DIALOG_STYLE_MSGBOX, "转让领导位置", string, "确认", "取消");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_DEPT_TRANSFER_CHECK:
		{
		    if (!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment],
				chosed = GetGVarInt("DDecideID", playerid);
			if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不在线");
			if(PlayerData[chosed][pDepartment] != dpid) return SendClientMessage(playerid, COLOR_WHITE, "选取的成员已经不属于这个部门");

			PlayerData[chosed][pDepartment] = dpid;
			PlayerData[playerid][pDeptRank] = 1;
			PlayerData[chosed][pDeptRank] = 5;
			Department[dpid][dpLeader] = PlayerData[chosed][pID];
			format(string, sizeof(string), "<<部门>>"#TEXT_YELLOW" 领导 %s 已经将%s领导的位置转让给了 %s", PlayerData[playerid][pName], Department[dpid][dpName], PlayerData[chosed][pName]);
            SendDeptMessage(dpid, COLOR_FADEBLUE, string);
            Log(deptlog, INFO, "%s(%d)将%s(%d)领导的位置转让给%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid, PlayerData[chosed][pName], PlayerData[chosed][pID]);
            return 1;
        }
		case DIALOG_DEPT_INVITE:
        {
            if (!response) return ShowPlayerDepartmentMenu(playerid);
            new giveplayerid, giveplayername[MAX_PLAYER_NAME], dpid;
            dpid = PlayerData[playerid][pDepartment];

		    sscanf(inputtext, "u", giveplayerid);
			if(!GetGVarInt("Logged", giveplayerid))
			{
			    return ShowPlayerDialog(playerid, DIALOG_COMPANY_INVITE, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"邀请玩家", "该玩家名称或ID不存在,请重新输入", "确认", "关闭");
            }
            if(PlayerData[giveplayerid][pDepartment] > 0)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经加入别的部门了");
			}
			if((dpid == DEPT_POLICE || dpid == DEPT_ARMY) && (PlayerData[giveplayerid][pGang] != GANG_ID_NONE || PlayerData[giveplayerid][pGang] != COMPANY_ID_NONE))
			{
				return SendClientMessage(playerid, COLOR_WHITE, "该玩家目前为企业或帮会的成员,无法加入");
			}
            GetPlayerName(giveplayerid, giveplayername, MAX_PLAYER_NAME);
            format(string, sizeof(string), ""#TEXT_WHITE"%s "#TEXT_WHITE"的%s向你发出邀请\n请问是否要加入该部门?", Department[dpid][dpName], PlayerData[playerid][pName]);
            ShowPlayerDialog(giveplayerid, DIALOG_INVITE_DEPT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"部门邀请", string, "加入", "无视");
            SetGVarInt("InvitedDept", dpid, giveplayerid);
            format(string, sizeof(string), "** 你已向 %s 发出邀请", giveplayername);
            SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_INVITE_DEPT:
		{
		    if (!response) return 1;
		    new dpid = GetGVarInt("InvitedDept", playerid);
		    if(PlayerData[playerid][pDepartment] > 0)
            {
				return SendClientMessage(playerid, COLOR_WHITE, "你已经属于别的部门了");
			}
            if((dpid == DEPT_POLICE || dpid == DEPT_ARMY) && (PlayerData[playerid][pGang] != GANG_ID_NONE || PlayerData[playerid][pGang] != COMPANY_ID_NONE))
			{
				return SendClientMessage(playerid, COLOR_WHITE, "你目前为企业或帮会的成员,无法加入该部门");
			}
		    PlayerData[playerid][pDepartment] = dpid;
		    PlayerData[playerid][pDeptRank] = 1;
		    PlayerData[playerid][pDeptApply] = 0;
		    PlayerData[playerid][pTitle] = TITLE_DEPARTMENT;
			format(string, sizeof(string), "<<部门>> 新成员 %s 已接受邀请加入了部门,大家一起欢迎新成员的加入", PlayerData[playerid][pName]);
		    SendDeptMessage(dpid, COLOR_FADEBLUE, string);
		    Log(deptlog, INFO, "%s(%d)接受了邀请加入了%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid);
		    return 1;
		}
		case DIALOG_DEPT_APPLY_LIST:
		{
            if (!response) return ShowPlayerDepartmentMenu(playerid);
            new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				infostr[256];

			format(infostr, sizeof(infostr), " \n名称:%s\n等级:%d\n"#TEXT_FADEGREEN"接受申请\n"#TEXT_RED"拒绝申请", PlayerData[chosed][pName], PlayerData[chosed][pLevel]);
			ShowPlayerDialog(playerid, DIALOG_DEPT_APPLY_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "审核申请", infostr, "选择", "关闭");
			SetGVarInt("DDecideID", chosed, playerid);
			return 1;
		}
		case DIALOG_DEPT_APPLY_CHECK:
		{
            if (!response) return ShowPlayerDepartmentMenu(playerid);
            new dpid = PlayerData[playerid][pDepartment],
				chosed = GetGVarInt("DDecideID", playerid);
            if(!GetGVarInt("Logged", chosed)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经离线");
            if(PlayerData[chosed][pDeptApply] != dpid) return SendClientMessage(playerid, COLOR_WHITE, "错误: 该玩家已经没有申请加入这个部门了");
			switch(listitem)
			{
			    case 2:
			    {
			        if(PlayerData[chosed][pDepartment] > 0)
			        {
			            PlayerData[chosed][pDeptApply] = 0;
			            return SendClientMessage(playerid, COLOR_WHITE, "该玩家已经加入其他部门了");
			        }
			        if((dpid == DEPT_POLICE || dpid == DEPT_ARMY) && (PlayerData[chosed][pGang] != GANG_ID_NONE || PlayerData[chosed][pGang] != COMPANY_ID_NONE))
			        {
			            PlayerData[chosed][pDeptApply] = 0;
			            return SendClientMessage(playerid, COLOR_WHITE, "该玩家目前为企业或帮会的成员,无法加入");
			        }
			        format(string, sizeof(string), "** 你通过了 %s 的申请", PlayerData[chosed][pName]);
			        SendClientMessage(playerid, COLOR_WHITE, string);
			        format(string, sizeof(string), "** 你发送给 %s 的加入申请由 %s 通过了", Department[dpid][dpName], PlayerData[playerid][pName]);
			        SendClientMessage(chosed, COLOR_WHITE, string);
			        format(string, sizeof(string), "<<部门>> %s 通过了 %s 的加入申请,大家一起欢迎新成员的加入", PlayerData[playerid][pName], PlayerData[chosed][pName]);
			        SendDeptMessage(dpid, COLOR_FADEBLUE, string);
			        PlayerData[chosed][pDeptApply] = 0;
			        PlayerData[chosed][pDepartment] = dpid;
			        PlayerData[chosed][pDeptRank] = 1;
			        PlayerData[chosed][pTitle] = TITLE_DEPARTMENT;
			        Log(deptlog, INFO, "%s(%d)通过了%s(%d)在%s(%d)的加入申请", PlayerData[playerid][pName], PlayerData[playerid][pID], PlayerData[chosed][pName], PlayerData[chosed][pID], Department[dpid][dpName], dpid);
			    }
			    case 3:
			    {
					format(string, sizeof(string), "** 你否决了 %s 的申请", PlayerData[chosed][pName]);
			        SendClientMessage(playerid, COLOR_WHITE, string);
			        format(string, sizeof(string), "** 你发送给 %s 的加入申请被否决了", Department[dpid][dpName]);
			        SendClientMessage(chosed, COLOR_WHITE, string);
			        PlayerData[chosed][pDeptApply] = 0;
			    }
			}
			return 1;
		}
		case DIALOG_DEPT_QUIT:
		{
		    if(!response) return ShowPlayerDepartmentMenu(playerid);
		    new dpid = PlayerData[playerid][pDepartment];
		    format(string, sizeof(string), "<<部门>> %s 离开了这个部门", PlayerData[playerid][pName]);
			SendDeptMessage(dpid, COLOR_FADEBLUE, string);
			Log(deptlog, INFO, "%s(%d)离开了%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], Department[dpid][dpName], dpid);
		    PlayerData[playerid][pDepartment] =
		    PlayerData[playerid][pDeptRank] = 0;
		    return 1;
		}
		case DIALOG_LOTTO:
		{
		    if(!response) return 1;
		    new num[6], i;
		    sscanf(inputtext, "dddddd", num[0], num[1], num[2], num[3], num[4], num[5]);
		    for(i = 0; i < 6; i++)
		    {//先做确认
		        if(num[i] < 1 || num[i] > 49)
		        {
		            return ShowPlayerDialog(playerid, DIALOG_LOTTO, DIALOG_STYLE_INPUT, "乐透彩券", ""#TEXT_WHITE"每个号码只能介于1~49之间,请重新输入", "确认", "取消");
		        }
		    }
		    for(i = 0; i < 6; i++)
		    {//再值入号码
		        SetPlayerLotto(playerid, i, num[i]);
		    }
		    format(string, sizeof(string), "** 你参加了下次乐透开奖,号码分别为 %d %d %d %d %d %d", num[0], num[1], num[2], num[3], num[4], num[5]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		    GivePlayerItem(playerid, 1, 176, -1);//确认使用后再扣除道具
		    PriceData[prcLotto] += 200;
		    return 1;
		}
		case DIALOG_REGINFO:
		{
		    ShowPlayerRegMenu(playerid, 1);
		    return 1;
		}
		case DIALOG_REGINFO1:
		{
		    ClearChatbox(playerid, 10);
		    switch(listitem)
		    {
		        case 0:
				{
					SendClientMessage(playerid, COLOR_ORANGE, " 洛圣都?!是个阳光明媚,天气宜人适合度假或是久居的好地方");
					PlayerData[playerid][pX] = 1635.4353,
					PlayerData[playerid][pY] = -2244.2571,
					PlayerData[playerid][pZ] = 13.4989;
					PlayerData[playerid][pInterior] =
					PlayerData[playerid][pWorld] = 0;
				}
		        case 1:
				{
					SendClientMessage(playerid, COLOR_SKYBLUE, " 圣费耶洛?!是个交通发达,人文环境和谐又方便的城市");
					PlayerData[playerid][pX] = -1950.4985,
					PlayerData[playerid][pY] = 138.1728,
					PlayerData[playerid][pZ] = 26.2813;
					PlayerData[playerid][pInterior] =
					PlayerData[playerid][pWorld] = 0;
				}
		        case 2:
				{
					SendClientMessage(playerid, COLOR_YELLOW, " 拉斯维托拉斯?!虽然地处沙漠,可是由赌城带起的商业效益,让这个城市变成掏金的好地方");
		        	PlayerData[playerid][pX] = 1684.8615,
					PlayerData[playerid][pY] = 1448.1130,
					PlayerData[playerid][pZ] = 10.7704;
					PlayerData[playerid][pInterior] =
					PlayerData[playerid][pWorld] = 0;
				}
      		}
		    ShowPlayerRegMenu(playerid, 2);
		    return 1;
		}
		case DIALOG_REGINFO2:
		{
		    if(!response) return ShowPlayerRegMenu(playerid, 1);
		    ClearChatbox(playerid, 10);
		    ClearPlayerSkill(playerid);
		    switch(listitem)
		    {
		        case 0:
				{
				    SkillData[playerid][psPistol] =
				    SkillData[playerid][psDEA] =
				    SkillData[playerid][psShotgun] =
				    SkillData[playerid][psSawn] =
				    SkillData[playerid][psSpas] =
				    SkillData[playerid][psUZI] =
				    SkillData[playerid][psMP5] =
				    SkillData[playerid][psAK] =
				    SkillData[playerid][psM4] =
					SkillData[playerid][psSniper] = 500;
                    SendClientMessage(playerid, COLOR_YELLOW, " 因为受过一定的枪械训练,不管是射击时的稳定度以及准度都将会比一般的新人还要高喔");
				}
		        case 1:
		        {
		            SetPlayerPoint(playerid, 2, 100);
		            SendClientMessage(playerid, COLOR_FADEBLUE, " 对基本的机械有相当的了解,可以在一开始就学习实用的修车与开锁技能");
		        }
		        case 2:
		        {
		            SetPlayerPoint(playerid, 7, 50);
		            SendClientMessage(playerid, COLOR_FADEGREEN, " 洞察力敏锐,让你一开始就能学习搜索以及观察能力");
		        }
		        case 3:
		        {
		            SetPlayerPoint(playerid, 5, 120);
		            SendClientMessage(playerid, COLOR_NURSEPINK, " 有着医学方面的知识,让你一踏入新土地就能马上学习治疗能力来帮助众人");
		        }
		        case 4:
		        {
		            SetPlayerPoint(playerid, 4, 50);
		            SendClientMessage(playerid, COLOR_BROWN, " 有着研发与合成方面的知识,只要有材料,你可以轻松合成一般人不会合成的枪械.如果再搭配医学知识进修,你更能合成各式药物");
		        }
		        case 5:
		        {
		            SetPlayerPoint(playerid, 9, 200);
		            SetPlayerPoint(playerid, 11, 500);
		            SkillData[playerid][psDef] = 2,
		            SkillData[playerid][psStamina] = 1;
		            PlayerData[playerid][pMaxStamina] = 10.0;
		            SendClientMessage(playerid, COLOR_ORANGE, " 身体强壮加上有良好的锻练,让你能够承受更多伤害并比别人有更好的体力!");
		        }
		    }
		    SetPlayerPoint(playerid, 1, 5);
		    ShowPlayerRegMenu(playerid, 3);
		    return 1;
		}
		case DIALOG_REGINFO3:
		{
		    if(!response) return ShowPlayerRegMenu(playerid, 3);
		    SetGVarInt("Spawned", 0, playerid);
		    TogglePlayerSpectating(playerid, true);
		    //PlayAudioStreamForPlayer(playerid, "");
		    ShowPlayerCameraScene(playerid, SCENE_INTRO);
		    return 1;
		}
		case DIALOG_SKIPINTRO:
		{
		    if(!response) return 1;
		    if(GetGVarInt("IntroTime", playerid) > 0)
		    {
			    StopAudioStreamForPlayer(playerid);
				SetGVarInt("IntroTime", 86, playerid);
				IntroTimer(playerid);
			}
			return 1;
		}
		case DIALOG_MISSION_TUT:
		{
		    UpdatePlayerMission(playerid, GetGVarInt("DMission", playerid), 2);
		    DeleteGVar("DMission", playerid);
		    return 1;
		}
		case DIALOG_MISSION:
		{
		    if(!response) return ShowPlayerMenu(playerid);
		    new dialog[512], chosed, missionid;
		    chosed = GetGVarInt("DListID", listitem*1000+playerid);
		    missionid = MissionData[playerid][chosed][msMissionID];
		    if(GetGVarInt("Mission", playerid) == missionid)
		    {
			    format(dialog, sizeof(dialog), "%s\n%s\n\n"#TEXT_WHITE"奖励: 现金$%d 经验值:%d\n\n你目前正在进行这个任务\n是否要退出这个任务?"
				, MissionsList[missionid][msTitle], MissionsList[missionid][msDes], MissionsList[missionid][msMoney], MissionsList[missionid][msExp]);
				ShowPlayerDialog(playerid, DIALOG_MISSION_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务清单", dialog, "退出任务", "关闭");
			}
			else
			{
			    format(dialog, sizeof(dialog), "%s\n%s\n\n"#TEXT_WHITE"奖励: 现金$%d 经验值:%d\n\n是否要开始进行这个任务?"
				, MissionsList[missionid][msTitle], MissionsList[missionid][msDes], MissionsList[missionid][msMoney], MissionsList[missionid][msExp]);
				ShowPlayerDialog(playerid, DIALOG_MISSION_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务清单", dialog, "开始进行", "关闭");
			}
		    SetGVarInt("DDecideID", chosed, playerid);
		    return 1;
		}
		case DIALOG_MISSION_CHECK:
		{
		    if(!response) return 1;
		    new chosed, missionid;
		    chosed = GetGVarInt("DDecideID", playerid);
		    missionid = MissionData[playerid][chosed][msMissionID];
		    if(GetGVarInt("Mission", playerid) > 0)
		    {
		        ShowPlayerDialog(playerid, DIALOG_MISSION_STOP, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务清单", ""#TEXT_WHITE"你已经正在进行任务中了\n是否要结束目前的任务?", "是", "否");
		    }
		    else PlayerStartMission(playerid, missionid);
		    return 1;
		}
		case DIALOG_MISSION_STOP:
		{
		    if(!response) return 1;
		    PlayerStopMission(playerid, 1);
		    SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"已经退出任务");
		    return 1;
		}
		case DIALOG_TICKET_THROW:
		{
		    if(!response) return 1;
			new chosed = GetGVarInt("DDecideItem", playerid);
			GivePlayerItem(playerid, ITEM_USE, chosed, -1);
			format(string, sizeof(string), "** 丢弃 %s 完成", ItemsList_USE[chosed][iuName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_SKIN1:
		{
		    if(!response) return 1;
			new ticket = GetGVarInt("DDecideItem", playerid),
				chosed = GetGVarInt("DListID", listitem*1000+playerid);
            GivePlayerItem(playerid, ITEM_EQ, chosed, 1);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			format(string, sizeof(string), "** 你使用了%s兑换了"#TEXT_VIOLET" %s "#TEXT_WHITE"造型,你可以打开背包马上换上这个新造型", ItemsList_USE[ticket][iuName], ItemsList_EQ[chosed][ieqName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_SKIN2:
		{
		    if(!response) return 1;
		    rand = random(GetGVarInt("DListAmount", playerid));
			new ticket = GetGVarInt("DDecideItem", playerid),
				chosed = GetGVarInt("DListID", rand*1000+playerid);
            GivePlayerItem(playerid, ITEM_EQ, chosed, 1);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			format(string, sizeof(string), "** 你使用了%s抽到了"#TEXT_VIOLET" %s "#TEXT_WHITE"造型,你可以打开背包马上换上这个新造型", ItemsList_USE[ticket][iuName], ItemsList_EQ[chosed][ieqName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_PT1, DIALOG_TICKET_PT2://一般知识点兑换券
		{
		    if(!response) return 1;
			new ticket = GetGVarInt("DDecideItem", playerid), pt;
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			switch(listitem)
			{
			    case 0: pt = 2;
			    case 1: pt = 3;
			    case 2: pt = 4;
			    case 3: pt = 5;
			    case 4: pt = 7;
			}
			if(dialogid == DIALOG_TICKET_PT1)
			{
				GivePlayerPoint(playerid, pt, 50);
				format(string, sizeof(string), "** 你使用了%s兑换了"#TEXT_FADEBLUE" %s "#TEXT_WHITE"50点,你可以打开Tab的技能菜单来立刻分配知识点", ItemsList_USE[ticket][iuName], PtsList[pt][spName]);
			}
			else if(dialogid == DIALOG_TICKET_PT2)
			{
				GivePlayerPoint(playerid, pt, 100);
				format(string, sizeof(string), "** 你使用了%s兑换了"#TEXT_FADEBLUE" %s "#TEXT_WHITE"100点,你可以打开Tab的技能菜单来立刻分配知识点", ItemsList_USE[ticket][iuName], PtsList[pt][spName]);
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_PT3, DIALOG_TICKET_PT4://武器技能兑换券
		{
		    if(!response) return 1;
			new ticket = GetGVarInt("DDecideItem", playerid), amount;

			if(dialogid == DIALOG_TICKET_PT3) amount = 500;
			else if(dialogid == DIALOG_TICKET_PT4) amount = 999;
			switch(listitem)
			{
			    case 0:
			    {
			        if(SkillData[playerid][psPistol] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psPistol] += amount;
			        if(SkillData[playerid][psPistol] > 999) SkillData[playerid][psPistol] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"手枪熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 1:
			    {
			        if(SkillData[playerid][psDEA] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psDEA] += amount;
			        if(SkillData[playerid][psDEA] > 999) SkillData[playerid][psDEA] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"沙漠之鹰熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 2:
			    {
			        if(SkillData[playerid][psShotgun] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psShotgun] += amount;
			        if(SkillData[playerid][psShotgun] > 999) SkillData[playerid][psShotgun] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"霰弹枪熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 3:
			    {
			        if(SkillData[playerid][psSawn] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psSawn] += amount;
			        if(SkillData[playerid][psSawn] > 999) SkillData[playerid][psSawn] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"短管霰弹熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 4:
			    {
			        if(SkillData[playerid][psSpas] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psSpas] += amount;
			        if(SkillData[playerid][psSpas] > 999) SkillData[playerid][psSpas] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"战斗霰弹枪熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 5:
			    {
			        if(SkillData[playerid][psUZI] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psUZI] += amount;
			        if(SkillData[playerid][psUZI] > 999) SkillData[playerid][psUZI] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"乌兹熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 6:
			    {
			        if(SkillData[playerid][psMP5] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psMP5] += amount;
			        if(SkillData[playerid][psMP5] > 999) SkillData[playerid][psMP5] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"MP5熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 7:
			    {
			        if(SkillData[playerid][psAK] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psAK] += amount;
			        if(SkillData[playerid][psAK] > 999) SkillData[playerid][psAK] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"AK47熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 8:
			    {
			        if(SkillData[playerid][psM4] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psM4] += amount;
			        if(SkillData[playerid][psM4] > 999) SkillData[playerid][psM4] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"M4熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			    case 9:
			    {
			        if(SkillData[playerid][psSniper] == 999) return SendClientMessage(playerid, COLOR_WHITE, "你这个武器的熟练度已经达到999了,无法再提升");
			        SkillData[playerid][psSniper] += amount;
			        if(SkillData[playerid][psSniper] > 999) SkillData[playerid][psSniper] = 999;
			        format(string, sizeof(string), "** 你使用了 %s ,你的"#TEXT_BROWN"来福枪熟练度"#TEXT_WHITE"提升了 %d 点", ItemsList_USE[ticket][iuName], amount);
			    }
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			return 1;
		}
		case DIALOG_TICKET_PET1,DIALOG_TICKET_PET3,DIALOG_TICKET_PET4:
		{
		    if(!response) return 1;
			new ticket = GetGVarInt("DDecideItem", playerid),
				chosed = GetGVarInt("DListID", listitem*1000+playerid),
				Float:love = 0.0;
            if(PlayerHavePet(playerid) >= MAX_PETS)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法再拥有更多宠物了");
			}
			if(dialogid == DIALOG_TICKET_PET4) love = 100.0;
            GivePlayerPet(chosed, playerid, love);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			format(string, sizeof(string), "** 你使用了%s兑换了宠物"#TEXT_FADERED" %s "#TEXT_WHITE",你可以打开个人菜单->资产->宠物来查看新的小伙伴", ItemsList_USE[ticket][iuName], AnimalsList[chosed][amlName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_PET2:
		{
		    if(!response) return 1;
		    rand = random(GetGVarInt("DListAmount", playerid));
			new ticket = GetGVarInt("DDecideItem", playerid),
				chosed = GetGVarInt("DListID", rand*1000+playerid);
            if(PlayerHavePet(playerid) >= MAX_PETS)
		    {
		        return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法再拥有更多宠物了");
			}
            GivePlayerPet(chosed, playerid, 0.0);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			format(string, sizeof(string), "** 你使用了%s抽到了宠物"#TEXT_FADERED" %s "#TEXT_WHITE",你可以打开个人菜单->资产->宠物来查看新的小伙伴", ItemsList_USE[ticket][iuName], AnimalsList[chosed][amlName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_TICKET_BAG1:
		{
		    if(!response) return 1;
			new ticket = GetGVarInt("DDecideItem", playerid);
			GivePlayerItem(playerid, ITEM_USE, ticket, -1);
			PlayerData[playerid][pBag] += 100;
			format(string, sizeof(string), "** 你使用了%s扩充了100格背包空间", ItemsList_USE[ticket][iuName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		case DIALOG_BLETTER:
		{
		    if(!response) return 1;
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_BLETTER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"瓶中信", ""#TEXT_WHITE"消息内容含有无法发送的字元,请重新输入", "投掷", "关闭");
			}
			GivePlayerItem(playerid, ITEM_USE, 303, -1);
			CreateBottleLetter(playerid, inputtext);
			format(string, sizeof(string), "** %s 将瓶中信投入了水中 **", playername);
			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			SendClientMessage(playerid, COLOR_WHITE, "** 已将瓶中信投入水中");
			return 1;
		}
		case DIALOG_TORENO_UNJAIL:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pJail] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经出狱了");
		    if(LimitData[playerid][plHToreno] < 20) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经用过这个特权了");

		    format(string, sizeof(string), "<<部门>> %s 因为曾为政府办事而被准予特赦,直接释放", PlayerData[playerid][pName]);
			SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
		    SetPlayerOutJail(playerid);
		    return 1;
		}
		case DIALOG_GIFT:
		{
		    if(!response) return ShowPlayerMenu(playerid);
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				itemid = PlayerGift[playerid][chosed][pgItemID],
				amount = PlayerGift[playerid][chosed][pgAmount];
		    switch(PlayerGift[playerid][chosed][pgItemType])
		    {
		        case ITEM_USE:
		        {
		            if(GetPlayerRemainingSpace(playerid) < ItemsList_USE[itemid][iuSpace]*amount) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包没有空间放置这个奖励了");
		            GivePlayerItem(playerid, ITEM_USE, itemid, amount);
		            format(string, sizeof(string), "** 你领取了奖励: %d个%s", amount, ItemsList_USE[itemid][iuName]);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case ITEM_EQ:
		        {
		            if(PlayerHaveItem(playerid, ITEM_EQ, itemid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经有这个物品了");
		            if(GetPlayerRemainingSpace(playerid) < ItemsList_EQ[itemid][ieqSpace]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的背包没有空间放置这个奖励了");
		            GivePlayerItem(playerid, ITEM_EQ, itemid, 1);
		            format(string, sizeof(string), "** 你领取了奖励: %s", ItemsList_EQ[itemid][ieqName]);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case ITEM_WEAPON:
		        {
		            GivePlayerWeapon(playerid, itemid, amount);
		            format(string, sizeof(string), "** 你领取了奖励: %s%d弹药", WeaponsList[itemid][wName], amount);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case ITEM_CASH:
		        {
		            GiveMoney(playerid, amount);
		            Log(moneylog, INFO, "%s(%d)领取了服务器奖励$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		            format(string, sizeof(string), "** 你领取了奖励: 礼金$%d", amount);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        case ITEM_SKILLPT:
		        {
		            GivePlayerPoint(playerid, itemid, amount);
		            format(string, sizeof(string), "** 你领取了奖励: %s%d点", PtsList[itemid][spName], amount);
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		        }
		        default: return SendClientMessage(playerid, COLOR_WHITE, "错误: 这是无效的奖励");
		    }
		    DeletePlayerGift(playerid, chosed);
		    ShowPlayerGiftMenu(playerid);
		    return 1;
		}
		case DIALOG_HELP:
		{
		    if(!response) return 1;
		    switch(listitem)
		    {
		        case 0:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_LIST, DIALOG_STYLE_TABLIST_HEADERS, "说明", " \n按键说明\n基本说明\n金钱相关\n武器相关\n地产相关\n植物相关\n任务相关\n载具相关\n技能相关\n工作相关\
					\n小队相关\n企业相关\n帮会相关\n公部门相关\n生态相关\n合成相关", "选择", "返回");
		        }
		        case 1: ShowPlayerDialog(playerid, DIALOG_HELP_REPORT, DIALOG_STYLE_INPUT, "回报", ""#TEXT_WHITE"请输入要传送给管理员的回报内容", "传送", "取消");
		    }
		    return 1;
		}
		case DIALOG_HELP_REPORT:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    if(strfind(inputtext, "%", true) != -1 || isnull(inputtext))
			{
			    return ShowPlayerDialog(playerid, DIALOG_HELP_REPORT, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"回报", ""#TEXT_WHITE"消息内容含有无法发送的字元,请重新输入", "传送", "关闭");
			}
			format(string, sizeof(string), "<<管理员>> 来自%s(%d)的回报: %s", PlayerData[playerid][pName], playerid, inputtext);
			SendAdminMessage(COLOR_YELLOW, string);
			Log(reportlog, INFO, "%s(%d): %s", PlayerData[playerid][pName], PlayerData[playerid][pID], inputtext);
			SendClientMessage(playerid, COLOR_WHITE, "** 已将回报内容发送给管理员");
			return 1;
		}
		case DIALOG_HELP_RETURN:
		{
		    return ShowPlayerDialog(playerid, DIALOG_HELP_LIST, DIALOG_STYLE_TABLIST_HEADERS, "说明", " \n基本说明\n金钱相关\n武器相关\n地产相关\n植物相关\n任务相关\n载具相关\n技能相关\n工作相关\
					\n小队相关\n企业相关\n帮会相关\n公部门相关\n生态相关\n合成相关", "选择", "返回");
		}
		case DIALOG_HELP_BASIC:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "等级与经验值",
					""#TEXT_FADEBLUE"经验值"#TEXT_WHITE"\n\
					任何的行为都有可能获得经验值\n\
					包括登入、工作、完成任务、钓鱼、狩猎、击杀NPC、种植、使用技能...等等\n\
					\n\
					"#TEXT_FADEGREEN"等级"#TEXT_WHITE"\n\
					而当经验值累积到一定程度就会提升玩家的等级\n\
					提升等级后将会获得一定奖励与解锁一些新项目\n\
					像是提升最大生命值、获得技能点、获得升等奖励、解锁资产拥有限制....等等\n\
					以提升等级为目标也是不错的选择", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "饥饿值与体力值",
					""#TEXT_YELLOW"饥饿值"#TEXT_WHITE"\n\
					左下角雷达地图旁的黄色条代表的是饥饿值\n\
					饥饿值会随在线时间逐渐减少\n\
					当饥饿值归零时是有可能生病的\n\
					通过在商店或餐厅购买食品进食可以恢复生命与饥饿值\n\
					\n\
					"#TEXT_BLUEGREEN"体力值"#TEXT_WHITE"\n\
					左下角雷达地图旁的蓝绿色条代表的是体力值\n\
					每当进行接受工作、上课、训练、使用技能...等等行为时会消耗一定的体力值\n\
					当体力值低于标准就无法进行特定行为\n\
					体力值除了会随时间逐渐恢复外\n\
					也可以通过使用特定道具补充或加速恢复\n\
					而在健身房进行像飞轮或跑步机的体力训练可以获得体力练习点来提升耐久能力来增加体力值上限", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "个人菜单与背包",
		        	""#TEXT_YELLOW"个人菜单"#TEXT_WHITE"\n\
		        	你可以按N键打开个人菜单\n\
		        	在个人菜单你可以查看自己的信息外\n\
		        	资产、技能、合成、小队、企业、帮会、部门与设定等等选项也可以在这里打开\n\
		        	\n\
					"#TEXT_YELLOW"背包"#TEXT_WHITE"\n\
					按N键你可以打开背包\n\
					在背包内你可以看到所有你拥有的物品\n\
					你可以在背包内选择使用物品,也可以将物品丢弃、给予或交易给其他玩家\n\
					\n\
					背包空间\n\
					大部分的物品都会占用一定的背包空间\n\
					你无法购买或捡起占用空间大于剩余背包空间的物品\n\
					你可以前往超市来花费现金扩充你的背包空间\n\
					但需要注意的是,背包空间的扩充是有上限的,限制会随玩家等级逐渐解锁", "确认", "");
		        }
		        case 3:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "聊天室",
					""#TEXT_WHITE"按"#TEXT_YELLOW"T键"#TEXT_WHITE"可以打开本地对话框来与附近的玩家聊天\n\
					"#TEXT_WHITE"按"#TEXT_SKYBLUE"H键"#TEXT_WHITE"则可以打开各个聊天频道对话框来跟不同频道的玩家聊天\n\
					\n\
					"#TEXT_SKYBLUE"世界频道"#TEXT_WHITE"\n\
					所有玩家都会看到的聊天频道,你可以通过在这个频道与服务器内的所有玩家交流\n\
					\n\
					"#TEXT_PINKRED"新手频道"#TEXT_WHITE"\n\
					这个频道的消息只有辅导员与等级低于15等的玩家才看得到\n\
					你可以通过这个频道向辅导员提问或与其他新玩家一起结伴游戏\n\
					\n\
					"#TEXT_WHITE"企业/帮会/部门频道"#TEXT_WHITE"\n\
					只有在相同组织的玩家才可以看到这个频道的消息\n\
					在这个频道你可以与相同组织的成员一起讨论组织的事宜", "确认", "");
		        }
		        case 4:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "与NPC互动",
					""#TEXT_FADEBLUE"购买与对话"#TEXT_WHITE"\n\
					你会在商店看到各种店员NPC\n\
					在"#TEXT_YELLOW"空手"#TEXT_WHITE"时按"#TEXT_FADEGREEN"鼠标右键"#TEXT_WHITE"可以锁定该NPC与他对话或购买东西\n\
					\n\
					"#TEXT_YELLOW"威吓与抢劫"#TEXT_WHITE"\n\
					在空手时按右键锁定NPC可以与他对话\n\
					在"#TEXT_YELLOW"持有武器"#TEXT_WHITE"时按"#TEXT_FADEGREEN"鼠标右键"#TEXT_WHITE"瞄准该NPC则可以威吓他\n\
					短暂持续瞄准可以威吓NPC,长时间瞄准该NPC则可以逼迫他交出现金\n\
					** 注意: 这是抢劫的行为,这么做你会获得"#TEXT_YELLOW"通缉等级"#TEXT_WHITE"并被警方追捕", "确认", "");
		        }
		        case 5:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "通缉等级",
					""#TEXT_YELLOW"通缉等级"#TEXT_WHITE"\n\
					当你犯法(像是被玩家举报、抢劫商店等...)时,你就会获得一定的"#TEXT_YELLOW"通缉等级"#TEXT_WHITE"\n\
					这时"#TEXT_BLUE"警方"#TEXT_WHITE"就会前来逮捕你\n\
					你可以打开个人菜单的通缉菜单来查看可能面临的刑期或选择投降\n\
					也可以拔腿开跑逃避警方的追捕\n\
					通缉等级会随时间逐渐减少,但等级越高的通缉需要花更多的时间才会消除\n\
					当你在被通缉期间"#TEXT_YELLOW"被上铐押至监狱"#TEXT_WHITE"或被"#TEXT_YELLOW"警方击杀"#TEXT_WHITE"就会被关入州立监狱服刑\n\
					** 你可以到"#TEXT_YELLOW"州政府"#TEXT_WHITE"查询各个犯行的罚则以及通缉等级的刑期与罚金\n\
					\n\
					"#TEXT_FADEYELLOW"入狱"#TEXT_WHITE"\n\
					被关入狱后你将被限制行动范围\n\
					且背包会暂时被没收无法使用\n\
					如果在监狱内表现良好则有机会获得放风时间\n\
					放风期间你可以在监狱内自由活动或是健身\n\
					当服刑时间过半,你可以向警方申请提前假释出狱", "确认", "");
		        }
		        case 6:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "死亡与重生",
					""#TEXT_FADERED"死亡"#TEXT_WHITE"\n\
					当玩家角色在右上角"#TEXT_FADEGREEN"生命值"#TEXT_WHITE"归零后就会死亡\n\
					死亡后会有短暂时间处于重生状态\n\
					这时候你可以好好想一下人生的跑马灯\n\
					\n\
					"#TEXT_FADEBLUE"重生"#TEXT_WHITE"\n\
					重生状态结束后,你会在指定地点重生\n\
					你可以在个人菜单里的"#TEXT_YELLOW"设定"#TEXT_WHITE"里的"#TEXT_YELLOW"出生地点"#TEXT_WHITE"选择重生位置\n\
					当出生地点为下线位置时,你在死亡后会在最近医院重生\n\
					当出生地点为地产或基地内则会在该地内重生", "确认", "");
		        }
		        case 7:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "疾病与治疗",
					""#TEXT_FADERED"疾病"#TEXT_WHITE"\n\
					当饥饿过久或生命值过低太久将有机率生病\n\
					生病会对自身的状态造成不好的影响\n\
					像是逐渐损失体力与生命、或是饥饿值无法好好恢复等问题\n\
					\n\
					"#TEXT_FADEYELLOW"治疗"#TEXT_WHITE"\n\
					当生病时,你可以前往医院挂号治疗\n\
					挂号后在线的医生便会开始替你治疗疾病或恢复生命\n\
					除了看病外,你也可以向医院购买各类药品来治疗疾病\n\
					但要注意的是,药品的治疗率不是百分之百", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_MONEY:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "银行存款",
					""#TEXT_FADEGREEN"存款"#TEXT_WHITE"\n\
					你可以在各地或是超市内找到"#TEXT_FADEBLUE"ATM自动提款机"#TEXT_WHITE"\n\
					在提款机前按"#TEXT_YELLOW"Y键"#TEXT_WHITE"可以使用ATM提款、存款或汇款", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "赚钱管道",
					""#TEXT_YELLOW"目前已知收入管道"#TEXT_WHITE"\n\
					任务完成奖励\n\
					工作收入\n\
					政府津贴\n\
					与玩家交易道具\n\
					在鱼市场卖出钓到的鱼\n\
					在花市卖出收成的植物\n\
					在狩猎市场卖出狩猎的收获\n\
					在材料市场卖出收集到的材料\n\
					在枪黑市完成交易\n\
					在车黑市完成交易\n\
					于联合物流卖出工厂货物\n\
					计程车或客运载客收入\n\
					媒体业热度收入\n\
					帮会地盘收入\n\
					警方逮捕/击杀犯人\n\
					医生治疗病人\n\
					竞速奖励\n\
					服务器活动奖励\n\
					...等", "确认", "");
		        }
     		}
		    return 1;
		}
		case DIALOG_HELP_WEAPON:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "武器取得管道",
					""#TEXT_YELLOW"武器取得管道"#TEXT_WHITE"\n\
					武装国度购买(除了9mm外其他枪械需要枪械执照才能购买)\n\
					捡拾玩家或NPC掉落的武器\n\
					使用武器货物箱\n\
					活动奖励赠送\n\
					升级"#TEXT_YELLOW"制枪能力"#TEXT_WHITE"后消耗材料合成", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "武装国度与枪械执照",
					""#TEXT_LIGHTRED"武装国度"#TEXT_WHITE"\n\
					在武装国度内你可以购买武器与护甲以及打靶训练武器熟练度\n\
					购买武器后你可以花费再继续购买该武器的弹药或是购买该武器的颜色涂装\n\
					需要注意的是,在武装国度内要购买9mm手枪以外的枪枝需要拥有"#TEXT_YELLOW"枪械执照"#TEXT_WHITE"\n\
					\n\
					"#TEXT_FADEYELLOW"打靶"#TEXT_WHITE"\n\
					在武装国度你还可以花费现金以及消耗体力还打靶\n\
					当打靶达到一定分数会获得一定的武器熟练度\n\
					\n\
					"#TEXT_FADEBLUE"枪械执照"#TEXT_WHITE"\n\
					枪械执照可以让你合法持有各类武器也可以让你在武装国度购买所有枪械\n\
					申请办法为前往各地"#TEXT_FADEBLUE"警局"#TEXT_WHITE"找柜台NPC向治安部门申请\n\
					第一次申请不需要经过审核,但警方有权没收犯法玩家的枪械执照\n\
					如果日后犯法被警方没收的话,再次申请就必须经过警方同意了", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "制枪能力合成",
					""#TEXT_FADEBLUE"制枪能力"#TEXT_WHITE"\n\
					制枪能力可以通过花费技能点与研发知识升级\n\
					升级后你就可以在个人菜单的"#TEXT_YELLOW"技能"#TEXT_WHITE"查看可以合成的枪械与所需材料\n\
					并在"#TEXT_YELLOW"合成菜单"#TEXT_WHITE"放入材料合成枪枝\n\
					** 注意: 自行合成枪械是非法行为,合成时请小心不要被警方发现", "确认", "");
		        }
     		}
		    return 1;
		}
		case DIALOG_HELP_ESTATE:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "购买地产",
					""#TEXT_FADEYELLOW"购买地产"#TEXT_WHITE"\n\
					你可以在各处找到待售的地产\n\
					前往该地产的门口图标处按"#TEXT_YELLOW"F键"#TEXT_WHITE"可以购买地产与查看其信息\n\
					在特定时段甚至还可以进去预览内部装潢\n\
					需要注意的是,每个玩家可以购买的地产数有限,限制会随等级放宽\n\
					\n\
					部分地产只能购买给组织用(企业或帮会)\n\
					当你拥有组织授予的权限时你就可以为组织购买地产", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "管理地产",
					""#TEXT_FADEBLUE"查看个人地产"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"资产"#TEXT_WHITE"页面选择"#TEXT_YELLOW"地产"#TEXT_WHITE"可以查看你个人拥有的地产\n\
					在这页面你除了可以导航地产位置外也可以在这里出售或转卖你的地产\n\
					\n\
					"#TEXT_VIOLET"查看组织地产"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"企业/帮会"#TEXT_WHITE"里选择"#TEXT_YELLOW"企业/帮会地产"#TEXT_WHITE"可以查看组织所拥有的地产\n\
					在这页面你除了可以导航地产位置外,如果有权限的话也可以替组织出售地产\n\
					\n\
					"#TEXT_LIGHTORANGE"使用地产功能与管理地产"#TEXT_WHITE"\n\
					在你按F进入地产内之后,在"#TEXT_YELLOW"出口处"#TEXT_WHITE"再按"#TEXT_YELLOW"F键"#TEXT_WHITE"可以管理地产或使用地产功能\n\
					在该菜单你可以使用地产门口监视器、查看访客、设定地产为重生点、\n\
					查看车库、存取物品、为地产进行装潢或升级...等等功能", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "套房与房屋",
					""#TEXT_FADEGREEN"套房与房屋"#TEXT_WHITE"\n\
					套房以及房屋为个人用地产\n\
					屋主可以将这类地产设为重生点,并可在里面存放物品\n\
					高级的套房与大部分的房屋都附有车库可以存放载具\n\
					如果升级内部装潢更可升级至更高级的车库", "确认", "");
		        }
		        case 3:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "办公室与会所",
					""#TEXT_FADEBLUE"办公室"#TEXT_WHITE"\n\
					办公室为企业专用地产\n\
					企业创立后需要购置办公室来解锁大部分功能(开拓产业、管理内部...等)\n\
					在办公室内企业成员可以存放载具,也可以存放物品让其他成员存取\n\
					企业成员更可将办公室设为出生地点\n\
					\n\
					"#TEXT_FADERED"会所"#TEXT_WHITE"\n\
					会所为帮会专用地产\n\
					帮会成立后需要购置会所来解锁大部分功能(领取保护费、管理内部...等)\n\
					在会所内帮会成员可以存放载具,也可以存放物品让其他成员存取\n\
					帮会成员更可将会所设为出生地点", "确认", "");
		        }
		        case 4:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "仓库、工厂与机库",
					""#TEXT_FADEYELLOW"仓库"#TEXT_WHITE"\n\
					仓库为企业与帮会专用地产\n\
					仓库内部拥有大量储存空间,让组织成员可以存放物品与工厂货物\n\
					其内部也提供一定的载具储存空间\n\
					对于有储存需求的组织来说是很不错的选择\n\
					\n\
					"#TEXT_LIGHTORANGE"工厂"#TEXT_WHITE"\n\
					工厂为企业与帮会专用地产\n\
					拥有地产管理权限的组织成员可以在工厂出口处按F打开管理菜单选择"#TEXT_YELLOW"设定工厂"#TEXT_WHITE"来设定工厂生产种类\n\
					每个种类的货物生产时间与价值都不同\n\
					设定完成之后成员便可使用手机联络"#TEXT_YELLOW"联合物流"#TEXT_WHITE"订购原料\n\
					并回到工厂内选择"#TEXT_YELLOW"管理生产线"#TEXT_WHITE"的"#TEXT_YELLOW"装载原料"#TEXT_WHITE"将刚订购的原料放至工厂内\n\
					装载完成之后便可选择"#TEXT_YELLOW"开始运作"#TEXT_WHITE"开启产线并等待货物生产完成\n\
					生产完成后在工厂菜单内选择"#TEXT_YELLOW"卸载货物"#TEXT_WHITE"可以将货物取出并放入背包内\n\
					之后便可以联络"#TEXT_YELLOW"联合物流"#TEXT_WHITE"选择"#TEXT_YELLOW"联络海外买家"#TEXT_WHITE"来将货物卖给有需求的买家来获利了\n\
					如果有暂时卖不出去的货物可以先将其保存在仓库内来腾出空间\n\
					\n\
					"#TEXT_SKYBLUE"机库"#TEXT_WHITE"\n\
					机库为企业与帮会专用地产\n\
					机库可以保存包括飞机与直升机在内的各种载具\n\
					存放在机库内的载具都会受到一定的保养并完全修复\n\
					另外也可以在机库内安装"#TEXT_YELLOW"载具喷漆设备"#TEXT_WHITE"让使用者可以免费任意更换载具颜色", "确认", "");
		        }
		        case 5:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "租屋",
					""#TEXT_FADEGREEN"租屋"#TEXT_WHITE"\n\
					房屋的屋主可以开放出租自己的房屋\n\
					租屋的房客每小时必须支付屋主设定的房租\n\
					租屋之后房客便可将租屋处设为出生地点", "确认", "");
		        }
     		}
		    return 1;
		}
		case DIALOG_HELP_PLANT:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "种子",
					""#TEXT_GREEN"种子"#TEXT_WHITE"\n\
					你可以在"#TEXT_PINKRED"花市"#TEXT_WHITE"购买到大部分的种子\n\
					也可以在"#TEXT_FADEGREEN"野外"#TEXT_WHITE"碰碰运气看看能不能采集到稀有的种子\n\
					有了种子之后就可以打开"#TEXT_YELLOW"背包"#TEXT_WHITE"选择"#TEXT_YELLOW"种子与盆栽"#TEXT_WHITE"来使用拥有的种子\n\
					使用种子后会在数秒后在"#TEXT_YELLOW"原地"#TEXT_WHITE"生成一个盆栽,接着你就可以通过浇水与施肥来让你的盆栽成长茁壮了\n\
					\n\
					你可以在个人菜单的"#TEXT_YELLOW"资产"#TEXT_WHITE"介面查看目前所有已种植的盆栽", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "浇水与施肥",
					""#TEXT_WATERBLUE"浇水"#TEXT_WHITE"\n\
					植物如果在缺水状态是不会成长的\n\
					你可以在"#TEXT_YELLOW"工具行"#TEXT_WHITE"或"#TEXT_PINKRED"花市"#TEXT_WHITE"购买浇水所需要的"#TEXT_YELLOW"水桶"#TEXT_WHITE"或"#TEXT_YELLOW"浇水桶"#TEXT_WHITE"\n\
					有了浇水工具之后就可以前往任何的"#TEXT_WATERBLUE"水域"#TEXT_WHITE"旁使用浇水工具来装满它\n\
					将浇水工具装满之后你就可以回到你的植物旁使用浇水工具来为植物浇水了\n\
     				如果植物长期处在缺水状态的话是会死亡的\n\
					\n\
					"#TEXT_ORANGE"施肥"#TEXT_WHITE"\n\
					施肥可以在短时间让植物的成长速度加倍\n\
					你可以"#TEXT_PINKRED"花市"#TEXT_WHITE"找到各式各样的"#TEXT_YELLOW"肥料"#TEXT_WHITE"\n\
					购买肥料之后就可以到植物旁使用肥料来为植物施肥了", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "收成",
					""#TEXT_FADEYELLOW"收成"#TEXT_WHITE"\n\
					当植物状态显示为"#TEXT_FADEGREEN"可收成"#TEXT_WHITE"时代表它已经成熟了,成熟的植物是不会继续成长的\n\
					你可以"#TEXT_PINKRED"花市"#TEXT_WHITE"或"#TEXT_YELLOW"工具行"#TEXT_WHITE"购买"#TEXT_YELLOW"泥铲"#TEXT_WHITE"来收成成熟的植物\n\
					收成的植物会被存放在背包里\n\
					你可以选择将成熟的植物卖到"#TEXT_PINKRED"花市"#TEXT_WHITE"赚钱或是使用作装饰物件来美化环境", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_MISSION:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "教学任务",
					""#TEXT_PINKRED"教学任务"#TEXT_WHITE"\n\
					完成教学任务除了可以增加对游戏玩法的了解\n\
					也可以获得经验值与现金奖励\n\
					你可以在个人菜单的"#TEXT_YELLOW"任务"#TEXT_WHITE"查看所有可以接受的任务\n\
					需要注意的是,一次只能进行一个任务而已", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "联络人任务",
					""#TEXT_SKYBLUE"联络人任务"#TEXT_WHITE"\n\
					当达到一定等级后,特定的NPC会发送短信给予工作机会\n\
					届时你便可使用手机连络该NPC来接受联络人任务\n\
					完成联络人任务可以获得大量金钱与经验值报酬\n\
					大部分的联络人任务都可重复接受,但是完成后会需要等待一定的冷却时间来再次接受\n\
					需要注意的是,一次只能进行一个任务而已\n\
					\n\
					可以与其他玩家一同进行相同任务来让任务能更顺利的完成\n\
					如果是"#TEXT_LIGHTBLUE"小队"#TEXT_WHITE"的队长,在开始联络人任务时更会自动让其他队员一起加入任务", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_VEHICLE:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "载具面板",
					""#TEXT_YELLOW"载具面板"#TEXT_WHITE"\n\
					在载具内按"#TEXT_YELLOW"数字键2"#TEXT_WHITE"可以打开载具面板\n\
					在载具面板你可以发动载具引擎、开关头灯、设定门锁...等等\n\
					如果是个人载具更可以开关储物空间以便在载具内存放物品\n\
					部分载具更有特别的选项,像是计程车的营业选项", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "个人与组织载具",
					""#TEXT_WHITE"你可以使用"#TEXT_VIOLET"GPS"#TEXT_WHITE"找到各地的车行来购买载具\n\
					你可以选择要为自己或是所属组织购买专属载具\n\
					购买后在"#TEXT_YELLOW"载具面板"#TEXT_WHITE"可以更改"#TEXT_FADEBLUE"载具重生位置"#TEXT_WHITE"\n\
					如果在自己或组织的地产旁更可以将载具储存在地产内\n\
					\n\
					"#TEXT_FADEGREEN"个人载具"#TEXT_WHITE"\n\
					你可以在个人菜单的"#TEXT_YELLOW"资产"#TEXT_WHITE"查看拥有的载具\n\
					在该菜单除了可以取得载具位置外也可以将载具转卖给其他人\n\
					可以拥有的载具有一定的上限,上限会随等级逐渐松绑\n\
					如果拥有数量已达上限,可以在"#TEXT_PINKRED"辅导站"#TEXT_WHITE"将个人载具报废换钱\n\
					\n\
					"#TEXT_FADEBLUE"组织载具"#TEXT_WHITE"\n\
					组织载具可以在个人菜单的企业/帮会/公部门菜单的企业/帮会/部门载具找到\n\
					成员除了可以在这里找到组织所有的载具外\n\
					拥有管理载具权限的成员更可以在这里管理或报废载具", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "载具修复与改装",
					""#TEXT_LIGHTGREEN"载具修复"#TEXT_WHITE"\n\
					当载具有损时,你可以通过"#TEXT_VIOLET"GPS"#TEXT_WHITE"寻找最近的"#TEXT_YELLOW"修车厂"#TEXT_WHITE"\n\
					将载具停进去修车厂便可完全修复载具并依照修复值收费\n\
					\n\
					"#TEXT_FADERED"改装厂"#TEXT_WHITE"\n\
					你可以在"#TEXT_YELLOW"改装厂"#TEXT_WHITE"为载具改装外表或是安装氮气\n\
					个人载具与组织载具的所有改装都将会自动保存\n\
					\n\
					"#TEXT_FADEYELLOW"改装厂"#TEXT_WHITE"\n\
					在"#TEXT_YELLOW"改装厂"#TEXT_WHITE"里可以为个人与组织载具安装特别的改装\n\
					包括车锁强化、霓虹灯管、车体强化、修改车牌、安装计程车系统... 等\n\
					让你可以为专属载具做更进一步改装", "确认", "");
		        }
		        case 3:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "摩斯姆通保险",
					""#TEXT_VIOLET"摩斯姆通保险"#TEXT_WHITE"\n\
					当你的载具完全损毁(爆炸、落水、生命值归零...)后将会消失\n\
					这时你必须打电话联系"#TEXT_VIOLET"摩斯姆通保险"#TEXT_WHITE"支付保险费来为你替换相同型号的载具\n\
					如果不想支付保险费,你也可以选择直接报废报销的载具来腾出空间购买新的载具", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_SKILL:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "技能与主动技",
					""#TEXT_FADEBLUE"技能"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"技能"#TEXT_WHITE"查看目前各类技能的技能等级、可用的主动技、技能点以及武器熟练度\n\
					目前技能分为三类:\n\
					一个是必须花费"#TEXT_FADEYELLOW"技能点"#TEXT_WHITE"以及"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"来升级的"#TEXT_FADEGREEN"知识技能"#TEXT_WHITE"\n\
					Ex:修车能力、治疗能力、制枪能力、搜索能力...等\n\
					另一个是必须达到一定"#TEXT_FADERED"练习度"#TEXT_WHITE"才能升级的"#TEXT_FADERED"锻练技能"#TEXT_WHITE"\n\
					Ex:耐打能力与耐久能力\n\
					还有一个是当为特定组织成员才能使用的"#TEXT_YELLOW"组织技能"#TEXT_WHITE"\n\
					Ex:治安部门的上铐、搜身、电击以及帮会首领的各项天生技...等\n\
					你可以在技能菜单的"#TEXT_YELLOW"技能等级"#TEXT_WHITE"页面查看各个技能的升级需求\n\
					\n\
					"#TEXT_FADEYELLOW"主动技"#TEXT_WHITE"\n\
					一些技能在升级后会获得可以发动的"#TEXT_YELLOW"主动技"#TEXT_WHITE"\n\
					你可以在技能菜单的"#TEXT_YELLOW"主动技"#TEXT_WHITE"页面查看与发动习得的主动技\n\
					除此之外在该菜单更可以为主动技设定"#TEXT_YELLOW"常用功能"#TEXT_WHITE"以便快速发动", "确认", "");
		        }
		        case 1:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "技能点、知识点与练习度",
					""#TEXT_YELLOW"技能点"#TEXT_WHITE"\n\
					技能点是升级"#TEXT_FADEGREEN"知识技能"#TEXT_WHITE"必须的要素之一\n\
					而技能点仅能通过升级获得\n\
					在重置技能之后会返还所有已花费的技能点让玩家可以重新分配技能点\n\
					\n\
					"#TEXT_FADEGREEN"知识点"#TEXT_WHITE"\n\
					知识点是升级"#TEXT_FADEGREEN"知识技能"#TEXT_WHITE"必须的要素之一\n\
					各种知识点获得的管道很多,像是学院听课、技能实作、活动奖励...等\n\
					尤其通过在学院听课可以稳定的获得知识点,以下是各学院可获得的知识点列表:\n\
					理工学院: 机械知识、信息知识与研发知识\n\
					文学院: 洞察知识与研发知识\n\
					医学院: 医疗知识与研发知识\n\
					** "#TEXT_LIGHTRED"注意"#TEXT_WHITE":在重置技能之后已花费的知识点"#TEXT_LIGHTRED"不会"#TEXT_WHITE"返还\n\
					\n\
					"#TEXT_FADERED"练习度"#TEXT_WHITE"\n\
					练习度可以通过在"#TEXT_YELLOW"健身房"#TEXT_WHITE"运动获得\n\
					飞轮以及跑步机可以获得体力练习度\n\
					举重则可以获得健身练习度", "确认", "");
		        }
		        case 2:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "武器熟练度",
					""#TEXT_ORANGE"武器熟练度"#TEXT_WHITE"\n\
					武器熟练度高低会影响到你使用枪枝的稳定度\n\
					当武器熟练度够高射击的准心会越来越稳定\n\
					部分武器的熟练度达到顶点时甚至可以边移动边射击或是双持\n\
					\n\
					武器熟练度可以通过在"#TEXT_YELLOW"武装国度"#TEXT_WHITE"打靶提升\n\
					当击杀玩家或NPC时也有一定机率会获得武器熟练度\n\
					你可以在技能菜单的"#TEXT_YELLOW"武器熟练度"#TEXT_WHITE"察看所有武器当前的熟练度", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_JOB:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "就职",
					""#TEXT_FADEBLUE"找工作"#TEXT_WHITE"\n\
					你可以在通过"#TEXT_YELLOW"州政府"#TEXT_WHITE"谘询服务人员或是使用"#TEXT_VIOLET"GPS"#TEXT_WHITE"寻找各地的工作机会\n\
					找到工作NPC后与他谈话来查看工作内容或签署工作合约\n\
					大部分工作的薪资都将在整点时汇至银行帐户\n\
					\n\
					"#TEXT_LIGHTRED"离职"#TEXT_WHITE"\n\
					如果要离职,你必须与负责相同工作的NPC谈话才能离职\n\
					需要注意的是,部分工作含有一定时效的工作合约,如果在合约到期前就离职将会收不到薪水", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_TEAM:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "成立/加入小队",
					""#TEXT_WHITE"你可以成立或加入小队来与其他玩家一起行动\n\
					同一个小队的玩家不会伤害到彼此且会在地图上显示彼此的位置\n\
					如果队长发起了联络人任务,小队的其他成员也会自动一起加入任务\n\
					而有些活动也需要玩家组队才能一起参加\n\
					\n\
					"#TEXT_LIGHTBLUE"成立小队"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"小队"#TEXT_WHITE"选择"#TEXT_YELLOW"建立小队"#TEXT_WHITE"来以队长的身分成立新的小队\n\
					成立之后可以在小队菜单内邀请队员以及设定小队名称\n\
					也可以设定其他玩家是否可以在小队列表看到自己的小队\n\
					\n\
					"#TEXT_LIGHTBLUE"加入小队"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"小队"#TEXT_WHITE"选择"#TEXT_YELLOW"小队列表"#TEXT_WHITE"来查询可加入的小队\n\
					并向小队发送申请来以队员身分加入小队", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_COMPANY:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "成立/加入企业",
					""#TEXT_WHITE"加入或创立企业可以为你开拓更多赚钱的管道\n\
					除了可以购买组织用的工厂来获得额外被动收入之外\n\
					开拓各类产业也可以让成员有更多元的收入方式\n\
					\n\
					"#TEXT_BLUEGREEN"创立企业"#TEXT_WHITE"\n\
					在"#TEXT_YELLOW"州政府"#TEXT_WHITE"谘询柜台右方的服务人员可以以CEO的身分"#TEXT_YELLOW"创立企业"#TEXT_WHITE"\n\
					创立企业需要先准备现金$10万,其中1万会用做手续费,其余9万会存做企业资金\n\
					企业资金会用做部分产业的开拓门槛,企业地产的花费也会从企业资金扣除\n\
					CEO以及拥有权限的成员可以随时存取企业资金\n\
					\n\
					"#TEXT_BLUEGREEN"加入企业"#TEXT_WHITE"\n\
					在"#TEXT_YELLOW"州政府"#TEXT_WHITE"谘询柜台右方的服务人员可以查看现有"#TEXT_YELLOW"企业列表"#TEXT_WHITE"\n\
					并可以向中意的企业发出申请,待通过对方审核之后就能以成员的身分加入企业\n\
					CEO可以调整成员的阶级来授予其不同的权限\n\
					加入企业后可以打开个人菜单的"#TEXT_YELLOW"企业菜单"#TEXT_WHITE"来查看企业信息", "确认", "");
		        }
		        case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "开拓产业",
					""#TEXT_WHITE"企业可以开拓各种不同的产业\n\
					每种产业都可以以不同的形式为成员或企业带来丰厚的收入\n\
					CEO可以为各个产业指定"#TEXT_YELLOW"负责人"#TEXT_WHITE"来协助管理产业\n\
					\n\
					"#TEXT_YELLOW"计程车业"#TEXT_WHITE"\n\
					拥有计程车业的企业可以统一设定旗下计程车的收费与后续费率\n\
					且客户可以通过电话联系企业来呼叫旗下计程车\n\
					而企业的计程车也会获得加油免费的福利\n\
					\n\
					"#TEXT_BLUEGREEN"客运业"#TEXT_WHITE"\n\
					拥有客运业的企业可以统一设定旗下公车的收费与后续费率\n\
					且可以自行规划旗下公车路线\n\
					每当成员完成一趟公车路线还会获得额外的奖励\n\
					而企业的公车也会获得加油免费的福利\n\
					\n\
					"#TEXT_ORANGE"媒体业"#TEXT_WHITE"\n\
					旗下拥有媒体业的企业可以经营专属的广播与电视频道\n\
					在广播频道成员可以播放音乐给听众,并安排播放清单以在成员不在线时仍可以自动播放\n\
					而在电视频道,成员可以使用"#TEXT_ORANGE"新闻车"#TEXT_WHITE"上的"#TEXT_YELLOW"空拍机"#TEXT_WHITE"与"#TEXT_YELLOW"摄影机"#TEXT_WHITE"将身边的画面直播给电视观众\n\
					当广播的听众与电视的观众越多,媒体业的热度会持续提升\n\
					而当媒体业的热度越高企业会随时间获得越多的收入", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_GANG:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "创立/加入帮会",
					""#TEXT_WHITE"当玩家达到等级"#TEXT_YELLOW"15"#TEXT_WHITE"时便可以加入或建立属于自己的帮会\n\
					加入或创立帮会可以带给你在江湖角逐天下的机会\n\
					除了可以购买组织用的工厂来获得额外被动收入之外\n\
					帮会技能可以为你提供在战斗上的增益\n\
					而帮会地盘更可以为帮会带来大量的金钱或资源收入\n\
					\n\
					"#TEXT_FADERED"创立帮会"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"可以以首领的身分"#TEXT_YELLOW"创立帮会"#TEXT_WHITE"\n\
					创立时可以选择不同的帮会种类,不同的帮会种类会对首领以及成员带来不同的增益\n\
					需要注意的是,帮会资金一开始是$0,如果要购置帮会地产记得要先存入一定资金\n\
					否则如果没有帮会资金的话将无法缴纳地产电费,造成地产被法拍\n\
					\n\
					"#TEXT_FADERED"加入帮会"#TEXT_WHITE"\n\
					在个人菜单的"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"可以查看"#TEXT_YELLOW"帮会列表"#TEXT_WHITE"\n\
					并可以向中意的帮会发出申请,待通过对方审核之后就能以成员的身分加入帮会\n\
					加入帮会可以打开个人菜单的"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"来查看帮会信息", "确认", "");
		        }
		        case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "帮会技能",
					""#TEXT_FADERED"首领技能"#TEXT_WHITE"\n\
					首领技能会依帮会首领创帮时选择的帮会种类而异\n\
					每种首领技能都会为帮会带来不同的增益:\n\
					\n\
					开路队长: 消耗体力产生一个恢复蓝圈,骑乘机车的成员只要碰到蓝圈就会恢复生命及载具耐久度\n\
					精神领袖: 持续消耗体力使范围内的成员每10秒后恢复生命\n\
					龙头老大: 消耗体力使所在地盘内的成员瞬间恢复大量生命\n\
					救世主: 消耗体力使接下来短时间内所有死亡的成员会于原地复活\n\
					后援会: 额外提升首领的伤害,成员越多增益越多\n\
					\n\
					"#TEXT_FADERED"成员技能"#TEXT_WHITE"\n\
					除了首领技能之外,帮会成员也会获得帮会专属技能:\n\
					\n\
					抢夺地盘: 发动后会向敌对地盘发起进攻,从而开启或加入地盘战争,如果在白色的中立地盘上发动则会直接占领地盘\n\
					束缚: 发动后会在接下来的数秒内会束缚第一个使用拳头攻击中的目标,使其无法使用双手\n\
					\n\
					帮会成员可以在"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"来查看自己可以使用的技能\n\
					拥有主动技的技能则可以在"#TEXT_YELLOW"技能菜单"#TEXT_WHITE"的"#TEXT_YELLOW"主动技"#TEXT_WHITE"来发动或设定常用功能", "确认", "");
		        }
		        case 2:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "帮会技能",
					""#TEXT_FADERED"帮会地盘"#TEXT_WHITE"\n\
					帮会地盘会定时为帮会带来一定的收益\n\
					属于帮会的地盘会以该帮会的颜色标记在地图上,帮会成员可以在帮会菜单查看自己帮会拥有的地盘\n\
					每种地盘都有不同的收益种类,首领或拥有权限的成员更可以领出帮会收益\n\
					\n\
					"#TEXT_FADEGREEN"进攻地盘"#TEXT_WHITE"\n\
					要向敌对地盘发起进攻的话,可以在"#TEXT_YELLOW"技能菜单"#TEXT_WHITE"的"#TEXT_YELLOW"主动技"#TEXT_WHITE"使用"#TEXT_WHITE"的"#TEXT_YELLOW"抢夺地盘"#TEXT_WHITE"来发起进攻\n\
					发起进攻后,在接下来的15分钟内进攻方必须将敌对地盘的"#TEXT_FADEGREEN"防御度"#TEXT_WHITE"耗尽\n\
					参与进攻的成员待在敌对地盘内会持续耗减地盘的"#TEXT_FADEGREEN"防御度"#TEXT_WHITE",越多成员在地盘内会消耗越快\n\
					如果进攻方击杀"#TEXT_LIGHTRED"守方成员"#TEXT_WHITE"时会额外破坏该地盘的防御度"#TEXT_YELLOW"30点"#TEXT_WHITE"\n\
					但如果进攻方成员被击杀则会恢复守方地盘"#TEXT_YELLOW"60点"#TEXT_WHITE"\n\
					如果在地盘战结束前进攻方顺利将地盘"#TEXT_FADEGREEN"防御度"#TEXT_WHITE"归零,地盘的拥有权将会转移至进攻方\n\
					\n\
					"#TEXT_FADEYELLOW"防守地盘"#TEXT_WHITE"\n\
					当自家地盘被攻击时,可以开启"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"的"#TEXT_YELLOW"帮会地盘"#TEXT_WHITE"来查看被攻击的地盘状态并进行协防\n\
					加入协防之后可以获得所有正在进攻方成员的所有位置以方便进行追击\n\
					如果在帮会战时间结束前顺利保持住"#TEXT_FADEGREEN"防御度"#TEXT_WHITE"的话代表守方胜利,地盘将会进入短暂冷却不会被攻打\n\
					\n\
					"#TEXT_ORANGE"地盘修复与升级"#TEXT_WHITE"\n\
					在非地盘战期间,帮会成员可以在"#TEXT_YELLOW"帮会菜单"#TEXT_WHITE"的"#TEXT_YELLOW"帮会地盘"#TEXT_WHITE"里花费金钱来修复受损的防御度\n\
					修复完成之后,更可以花费资源与金钱来为帮会地盘进行"#TEXT_FADEBLUE"升级"#TEXT_WHITE"来提高地盘防御度以及获得新增益", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_DEPT:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "加入公部门",
					""#TEXT_WHITE"公部门为州立组织,以提供公共服务为主\n\
					目前开放的公部门包括:\n\
					治安部门 - 维持治安,打击犯罪\n\
					医疗部门 - 为民众提供医疗服务并供售药品\n\
					政府部门 - 管理税收有效运用税金,并管理法律以及罚则\n\
					辅导部门 - 协助新玩家解惑,带领新手融入新环境\n\
					\n\
					"#TEXT_FADEBLUE"加入公部门"#TEXT_WHITE"\n\
					要加入各大公部门的话,可以使用"#TEXT_VIOLET"GPS"#TEXT_WHITE"寻找各部门的据点来发出申请\n\
					治安部门: 各地警察局\n\
					医疗部门: 各地医院\n\
					政府部门: 州政府\n\
					辅导部门: 各地辅导站", "确认", "");
		        }
		        case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "治安部门",
					""#TEXT_BLUE"治安部门"#TEXT_WHITE"\n\
					治安部门的职责是执法追捕通缉犯\n\
					为了提高追捕效率,治安部门的成员可以使用以下技能与设备\n\
					\n\
					"#TEXT_SKYBLUE"主动技"#TEXT_WHITE"\n\
					逮捕: 持续瞄准生命低于自己、被电击麻痹或是已经投降的"#TEXT_YELLOW"通缉犯"#TEXT_WHITE"来将其上铐,被上铐之后的通缉犯可以被拉上警车押送至监狱\n\
					搜身: 对通缉犯或监狱犯人可以进行搜身查看其身上是否有非法物品,如果有更可以进一步没收\n\
					调查: 调查所在地附近的犯罪纪录,如果有调查到可以直接对犯人进行通缉\n\
					电击: 为手枪装填一颗电击子弹,使下一发手枪子弹命中的人被电击麻痹\n\
					破门: 使用工具破门以强制进入地产内查缉\n\
					钉刺: 设置钉刺使行驶过钉刺破胎\n\
					路障: 设置阻挡用的路障来阻碍犯人逃跑\n\
					\n\
					"#TEXT_FADEBLUE"警车功能"#TEXT_WHITE"\n\
					在警车上打开"#TEXT_YELLOW"载具面板"#TEXT_WHITE"选择"#TEXT_YELLOW"警车选项"#TEXT_WHITE"可以使用警车专用功能\n\
					查询通缉犯位置: 可以查询目前所有通缉犯,并取得该通缉犯目前所在地区\n\
					押解上铐通缉犯: 可以将附近已经被逮捕的通缉犯拉上警车,以便后续将其送至监狱\n\
					\n\
					所有被逮捕的犯人需要被送至"#TEXT_YELLOW"州立监狱"#TEXT_WHITE"关押服刑\n\
					当警察成功将犯人逮捕归案后将会获得奖金", "确认", "");
		        }
		        case 2:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "医疗部门",
					""#TEXT_NURSEPINK"医疗部门"#TEXT_WHITE"\n\
					医疗部门的职责是治疗病患以及制作药品贩售\n\
					\n\
					"#TEXT_NURSEPINK"挂号与治疗"#TEXT_WHITE"\n\
					生病的病患可以到各大医院柜台办理挂号\n\
					接着医疗部门的医生就可以于柜台查看"#TEXT_YELLOW"预约病患名单"#TEXT_WHITE"受理挂号并安排病患到诊疗室治疗\n\
					完成治疗的医生会获得经验值与金钱奖励\n\
					\n\
					"#TEXT_NURSEPINK"取得与制作药品"#TEXT_WHITE"\n\
					医疗部门成员可以至柜台选择"#TEXT_YELLOW"运送药品货物"#TEXT_WHITE"来取得制作药品的材料\n\
					取得装有药材的货物之后,必须将货物送回医院来保存\n\
					顺利保存药材货物将会使所有在线医疗部门成员获得金钱与经验值奖励\n\
					\n\
					运送药品之后便可选择"#TEXT_YELLOW"合成药品"#TEXT_WHITE"来消耗药材制作药品了\n\
					药品上架之后,玩家便可至医院购买药品了\n\
					购买药品的收入将会存入医疗部门的资金里", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_NATURE:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "动物",
					""#TEXT_WHITE"在大自然中可以发现各式各样的野生动物\n\
					你可以选择狩猎,并加狩猎的收获卖至"#TEXT_YELLOW"狩猎市场"#TEXT_WHITE"卖钱\n\
					或是丢弃身上的食物来吸引们来吃\n\
					幸运的话动物是有可能会被驯服并能收编为宠物的", "确认", "");
		        }
		        case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "资源与采集",
					""#TEXT_FADEGREEN"资源"#TEXT_WHITE"\n\
					世界内散落着各式各样的资源\n\
					有些可以直接通过捡拾取得\n\
					有些则需要使用工具前往特定地点才能采集\n\
					\n\
					"#TEXT_FADEGREEN"伐木"#TEXT_WHITE"\n\
					前往"#TEXT_YELLOW"伐木林场"#TEXT_WHITE"使用"#TEXT_YELLOW"斧头"#TEXT_WHITE"可以砍伐树木来获得木头\n\
					木头广泛的被用做各种合成材料,也可以用来升级地产或帮会地盘\n\
					\n\
					"#TEXT_GRAD"采矿"#TEXT_WHITE"\n\
					前往"#TEXT_YELLOW"矿场"#TEXT_WHITE"使用"#TEXT_YELLOW"十字镐"#TEXT_WHITE"或"#TEXT_YELLOW"石锤"#TEXT_WHITE"可以采集矿产\n\
					有机会采集到的矿产包括"#TEXT_YELLOW"铁矿"#TEXT_WHITE"、"#TEXT_YELLOW"石材"#TEXT_WHITE"与"#TEXT_YELLOW"硝石"#TEXT_WHITE"\n\
					这些矿产除了可以作为合成材料,也可以用来升级地产或帮会地盘", "确认", "");
		        }
		        case 2:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "钓鱼",
					""#TEXT_WATERBLUE"钓鱼"#TEXT_WHITE"\n\
					前往"#TEXT_WATERBLUE"水域"#TEXT_WHITE"边使用"#TEXT_YELLOW"钓竿"#TEXT_WHITE"可以开始钓鱼\n\
					每次钓鱼都需要消耗1个"#TEXT_YELLOW"鱼饵"#TEXT_WHITE"\n\
					钓到的鱼只都可以拿去"#TEXT_YELLOW"鱼市场"#TEXT_WHITE"卖钱,也可以在"#TEXT_YELLOW"火堆"#TEXT_WHITE"旁使用"#TEXT_FADEYELLOW"合成"#TEXT_WHITE"烹煮成鱼肉食用", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_MIX:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		        	ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "合成",
					""#TEXT_YELLOW"合成"#TEXT_WHITE"\n\
					在个人菜单你可以打开"#TEXT_YELLOW"合成菜单"#TEXT_WHITE"来合成身上拥有的材料\n\
					在A、B、C栏位放入不同的材料或是依照不同的顺序摆放都会有不同的结果\n\
					可以在"#TEXT_YELLOW"查看目前可合成项目"#TEXT_WHITE"中查看目前的材料可以合成出的所有结果", "确认", "");
		        }
		        case 1:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "物件",
					""#TEXT_YELLOW"物件"#TEXT_WHITE"\n\
					物件可以摆放在地图上用作建材或是装饰品\n\
					各类物件可以通过合成或是购买取得\n\
					需要注意的是物件是有"#TEXT_LIGHTRED"耐久度"#TEXT_WHITE"的,如果被攻击太多次将会损毁\n\
					另外物件也有"#TEXT_YELLOW"保存期限"#TEXT_WHITE"需要定期保养,否则保存期限一到将会消失\n\
					你可以在个人菜单的"#TEXT_YELLOW"资产"#TEXT_WHITE"菜单查看与管理所有拥有的物件", "确认", "");
		        }
		    }
		    return 1;
		}
		case DIALOG_HELP_LIST:
		{
		    if(!response) return ShowPlayerHelpMenu(playerid);
		    switch(listitem)
		    {
		        case 0:
		        {
		            ShowPlayerDialog(playerid, DIALOG_HELP_RETURN, DIALOG_STYLE_MSGBOX, "按键说明",
					""#TEXT_LIGHTORANGE"Tab\t"#TEXT_WHITE"显示在线玩家列表\n\
					"#TEXT_LIGHTORANGE"F7\t"#TEXT_WHITE"HUD介面显示\n\
					"#TEXT_LIGHTORANGE"F8\t"#TEXT_WHITE"萤幕截图\n\
					"#TEXT_LIGHTORANGE"T\t"#TEXT_WHITE"本地聊天频道\n\
					"#TEXT_LIGHTORANGE"Y\t"#TEXT_WHITE"其他聊天频道\n\
					"#TEXT_LIGHTORANGE"F\t"#TEXT_WHITE"进入载具驾驶座\n\
					"#TEXT_LIGHTORANGE"G\t"#TEXT_WHITE"进入载具乘客座\n\
					"#TEXT_LIGHTORANGE"B\t"#TEXT_WHITE"打开背包\n\
					"#TEXT_LIGHTORANGE"M\t"#TEXT_WHITE"打开个人页面\n\
					"#TEXT_LIGHTORANGE"1\t"#TEXT_WHITE"打开载具面板\n\
					"#TEXT_LIGHTORANGE"Z\t"#TEXT_WHITE"环境互动、捡拾...等\n\
					"#TEXT_LIGHTORANGE"数字键+\t"#TEXT_WHITE"查看自订常用功能\n\
					"#TEXT_LIGHTORANGE"数字键1-9\t"#TEXT_WHITE"使用自订常用功能", "确认", "");
		        }
		        case 1: ShowPlayerDialog(playerid, DIALOG_HELP_BASIC, DIALOG_STYLE_TABLIST_HEADERS, "说明", "基本说明\n等级与经验值\n饥饿值与体力值\n个人菜单与背包\n聊天室\n与NPC互动\n通缉等级\n死亡与重生\n疾病与治疗", "选择", "返回");
		        case 2: ShowPlayerDialog(playerid, DIALOG_HELP_MONEY, DIALOG_STYLE_TABLIST_HEADERS, "说明", "金钱相关\n银行存款\n赚钱管道", "选择", "返回");
		        case 3: ShowPlayerDialog(playerid, DIALOG_HELP_WEAPON, DIALOG_STYLE_TABLIST_HEADERS, "说明", "武器相关\n武器取得管道\n武装国度与枪械执照\n制枪能力合成", "选择", "返回");
		        case 4: ShowPlayerDialog(playerid, DIALOG_HELP_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, "说明", "地产相关\n购买地产\n管理地产\n套房与房屋\n办公室与会所\n仓库、工厂与机库\n租屋", "选择", "返回");
		        case 5: ShowPlayerDialog(playerid, DIALOG_HELP_PLANT, DIALOG_STYLE_TABLIST_HEADERS, "说明", "植物相关\n种子\n浇水与施肥\n收成", "选择", "返回");
		        case 6: ShowPlayerDialog(playerid, DIALOG_HELP_MISSION, DIALOG_STYLE_TABLIST_HEADERS, "说明", "任务相关\n教学任务\n联络人任务", "选择", "返回");
		        case 7: ShowPlayerDialog(playerid, DIALOG_HELP_VEHICLE, DIALOG_STYLE_TABLIST_HEADERS, "说明", "载具相关\n载具面板\n个人与组织载具\n载具修复与改装\n摩斯姆通保险", "选择", "返回");
		        case 8: ShowPlayerDialog(playerid, DIALOG_HELP_SKILL, DIALOG_STYLE_TABLIST_HEADERS, "说明", "技能相关\n技能与主动技\n技能点、知识点与练习度\n武器熟练度", "选择", "返回");
		        case 9: ShowPlayerDialog(playerid, DIALOG_HELP_JOB, DIALOG_STYLE_TABLIST_HEADERS, "说明", "工作相关\n就职与离职", "选择", "返回");
		        case 10: ShowPlayerDialog(playerid, DIALOG_HELP_TEAM, DIALOG_STYLE_TABLIST_HEADERS, "说明", "小队相关\n成立/加入小队", "选择", "返回");
		        case 11: ShowPlayerDialog(playerid, DIALOG_HELP_COMPANY, DIALOG_STYLE_TABLIST_HEADERS, "说明", "企业相关\n成立/加入企业\n开拓产业", "选择", "返回");
		        case 12: ShowPlayerDialog(playerid, DIALOG_HELP_GANG, DIALOG_STYLE_TABLIST_HEADERS, "说明", "帮会相关\n成立/加入帮会\n帮会技能\n帮会地盘", "选择", "返回");
		        case 13: ShowPlayerDialog(playerid, DIALOG_HELP_DEPT, DIALOG_STYLE_TABLIST_HEADERS, "说明", "公部门相关\n加入公部门\n治安部门\n医疗部门", "选择", "返回");
		        case 14: ShowPlayerDialog(playerid, DIALOG_HELP_NATURE, DIALOG_STYLE_TABLIST_HEADERS, "说明", "生态相关\n动物\n资源与采集\n钓鱼", "选择", "返回");
		        case 15: ShowPlayerDialog(playerid, DIALOG_HELP_MIX, DIALOG_STYLE_TABLIST_HEADERS, "说明", "合成相关\n合成\n物件", "选择", "返回");
		    }
		    return 1;
		}
		/*case DIALOG_ARENA_VEHICLE:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    if(GetGVarInt("ArenaS", ARENA_VEHICLE) == STATUS_STARTED)
		    {
		        ShowPlayerDialog(playerid, DIALOG_ARENA_TV, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"载具竞技场", ""#TEXT_WHITE"目前竞技场已经开始\n要进入观赛吗?", "确认", "取消");
		    }
		    else
		    {
		    	ShowPlayerDialog(playerid, DIALOG_ARENA_JOIN, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"载具竞技场", ""#TEXT_WHITE"确认要参加载具竞技场?\n参加必须付出$500~$5000不等的赌金\n请输入赌金以参赛", "确认参加", "取消");
		    }
		    SetGVarInt("DDecideID", ARENA_VEHICLE, playerid);
		    return 1;
		}*/
		case DIALOG_ARENA_PLAYER1:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    if(GetGVarInt("ArenaS", ARENA_PLAYER1) == STATUS_STARTED)
		    {
				ShowPlayerDialog(playerid, DIALOG_ARENA_TV, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"玩家竞技场", ""#TEXT_WHITE"目前竞技场已经开始\n要进入观赛吗?", "确认", "取消");
			}
			else
			{
		    	ShowPlayerDialog(playerid, DIALOG_ARENA_JOIN, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"玩家竞技场", ""#TEXT_WHITE"确认要参加玩家竞技场?\n参加必须付出$500~$5000不等的赌金\n请输入赌金以参赛", "确认参加", "取消");
		    }
		    SetGVarInt("DDecideID", ARENA_PLAYER1, playerid);
		    return 1;
		}
		case DIALOG_ARENA_PLAYER2:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    if(GetGVarInt("ArenaS", ARENA_PLAYER2) == STATUS_STARTED)
			{
				ShowPlayerDialog(playerid, DIALOG_ARENA_TV, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"玩家竞技场", ""#TEXT_WHITE"目前竞技场已经开始\n要进入观赛吗?", "确认", "取消");
			}
			else
			{
		    	ShowPlayerDialog(playerid, DIALOG_ARENA_JOIN, DIALOG_STYLE_INPUT, ""#TEXT_YELLOW"玩家竞技场", ""#TEXT_WHITE"确认要参加玩家竞技场?\n参加必须付出$500~$5000不等的赌金\n请输入赌金以参赛", "确认参加", "取消");
		    }
		    SetGVarInt("DDecideID", ARENA_PLAYER2, playerid);
		    return 1;
		}
		case DIALOG_ARENA_TV:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    new arena = GetGVarInt("DDecideID", playerid), list[512], k;
			ForEachPlayer(p)
			{
			    if(GetGVarInt("pArena", p) == arena)
			    {
			        format(list, sizeof(list), "%s%s(%d)\n", list, PlayerData[p][pName], p);
					SetGVarInt("DListID", p, k*1000+playerid);
					k++;
			    }
			}
			if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "观赛", ""#TEXT_WHITE"目前没有任何参赛者", "确认", "");}
			format(list, sizeof(list), "参赛者(ID)\n%s", list);
			ShowPlayerDialog(playerid, DIALOG_ARENA_TV_WATCH, DIALOG_STYLE_TABLIST_HEADERS, "观赛", list, "查看", "取消");
		    return 1;
		}
		case DIALOG_ARENA_TV_WATCH:
		{
		    if(!response) return 1;
		    new watchid = GetGVarInt("DListID", listitem*1000+playerid),
				arena = GetGVarInt("DDecideID", playerid);
			if(GetGVarInt("pArena", watchid) != arena) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    SetPlayerWatchPlayer(playerid, watchid);
		    SetGVarInt("WatchArena", 1, playerid);
		    SendClientMessage(playerid, COLOR_WHITE, "** 已开始观赛,按鼠标右键可以离开观赛模式");
			return 1;
		}
		case DIALOG_ARENA_JOIN:
		{
		    if(!response) return 1;
		    if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "于被通缉状态无法加入竞技场");
		    if(GetGVarInt("PlayerAnimal", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "目前的状态无法加入竞技场");
		    new arena = GetGVarInt("DDecideID", playerid),
				bet = strval(inputtext);
			if(bet < 500 || bet > 5000) return SendClientMessage(playerid, COLOR_WHITE, "错误: 赌金只局限于$500~$5000之间");
		    PlayerJoinArena(playerid, arena, bet);
		    return 1;
		}
		case DIALOG_ARENA_LEAVE:
		{
		    if(!response) return 1;
		    new arena = GetGVarInt("pArena", playerid);
		    if(arena == 0) return SendClientMessage(playerid, COLOR_WHITE, "你没有参加竞技场");
			if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
			{
			    format(string, sizeof(string), "<<竞技场>> %s 提前离开了竞技场", PlayerData[playerid][pName]);
			    SendArenaMessage(arena, COLOR_SKYBLUE, string);
			    format(string, sizeof(string), "** 你提前离开了竞技场");
		    	SendClientMessage(playerid, COLOR_WHITE, string);
			    PlayerLeaveArena(playerid);
			}
			else
			{
			    new bet = GetGVarInt("pArenaBet", playerid);
			    format(string, sizeof(string), "<<竞技场>> %s 离开了竞技场,总赌金减少了$%d", PlayerData[playerid][pName], bet);
		    	SendArenaMessage(arena, COLOR_SKYBLUE, string);
		    	format(string, sizeof(string), "** 你提前离开了竞技场,返还了赌金$%d", bet);
		    	SendClientMessage(playerid, COLOR_WHITE, string);
		    	PlayerLeaveArena(playerid);
				GiveMoney(playerid, bet);
				Log(moneylog, INFO, "%s(%d)提前离开竞技场而收到返还的赌金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], bet);
		    	SetGVarInt("ArenaB", GetGVarInt("ArenaB", arena)-bet, arena);
		    }
		    return 1;
		}
		case DIALOG_ANIM_SET1:
		{
		    if(!response) return ShowPlayerConfigMenu(playerid);
			new animtype, i, j, k, list[512];
			switch(listitem)
			{
				case 0: animtype = ANIM_NORMAL;
				case 1: animtype = ANIM_LOOP;
				case 2: animtype = ANIM_INTER;
				case 3: animtype = ANIM_DANCE;
			}
			for(j = sizeof(AnimList); i < j; i++)
			{
			    if(AnimList[i][anmType] == animtype)
			    {
			        format(list, sizeof(list), "%s%s\n", list, AnimList[i][anmName]);
					SetGVarInt("DListID", i, k*1000+playerid);
					k++;
			    }
			}
			if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "动作列表", ""#TEXT_WHITE"目前没有任何可用动作", "确认", "");}
			format(list, sizeof(list), "动作名称\n%s", list);
			ShowPlayerDialog(playerid, DIALOG_ANIM_SET2, DIALOG_STYLE_TABLIST_HEADERS, "动作列表", list, "选择", "取消");
			return 1;
		}
		case DIALOG_ANIM_SET2:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid);
			ShowPlayerKeyList(playerid, 1);
			SetGVarInt("SKeyT", KEY_TYPE_ANIM, playerid),
			SetGVarInt("SKeyID", chosed, playerid);
			return 1;
		}
		case DIALOG_ANIM_ASK:
		{
		    if(!response) return 1;
		    new chosed = GetGVarInt("DListID", listitem*1000+playerid),
				animid = GetGVarInt("DDecideID", playerid);
			if(!PlayerCanUseAnim(chosed)) return SendClientMessage(playerid, COLOR_WHITE, "对方目前状态无法与你进行动作");
			format(string, sizeof(string), ""#TEXT_WHITE"已向%s发出互动动作请求,请与对方保持近距离并等待对方回应", PlayerData[chosed][pName]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			format(string, sizeof(string), ""#TEXT_WHITE"%s想与你互动%s,是否接受请求?", PlayerData[playerid][pName], AnimList[animid][anmName]);
			ShowPlayerDialog(chosed, DIALOG_ANIM_CHECK, DIALOG_STYLE_MSGBOX, "动作请求", string, "同意", "拒绝");
			SetGVarInt("DAsker", playerid, chosed);
			SetGVarInt("DAskAnim", animid, chosed);
			return 1;
		}
		case DIALOG_ANIM_CHECK:
		{
			new asker = GetGVarInt("DAsker", playerid),
				animid = GetGVarInt("DAskAnim", playerid),
				Float:px, Float:py, Float:pz;
			if(!response)
			{
				if(GetGVarInt("Logged", asker))
				{
					SendClientMessage(asker, COLOR_WHITE, "对方婉拒了你的动作请求");
					SendClientMessage(playerid, COLOR_WHITE, "你婉拒了对方的动作请求");
				}
				return 1;
			}
			if(!PlayerCanUseAnim(asker)) return SendClientMessage(playerid, COLOR_WHITE, "对方目前状态无法与你进行动作");
			if(!PlayerCanUseAnim(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "你目前的状态无法与对方进行动作");
			GetPlayerPos(playerid, px, py, pz);
			if(GetPlayerDistanceFromPointEx(asker, px, py, pz) > 8.0) return SendClientMessage(playerid, COLOR_WHITE, "对方离你太远了,无法进行动作");
			OnPlayerStartCustomAnimation(asker, animid, playerid);
			return 1;
		}
		case DIALOG_QUICK_LIST:
		{
		    if(!response) return 1;
		    new numkey = listitem+1;
		    PlayerPressCustomKey(playerid, numkey);
		    return 1;
		}
		case DIALOG_QUICK_DEL:
		{
		    if(!response) return ShowPlayerKeyList(playerid);
		    new numkey = listitem+1;
		    switch(numkey)
			{
				case 1: ConfigData[playerid][cfQuickN1T] = ConfigData[playerid][cfQuickN1] = 0;
				case 2: ConfigData[playerid][cfQuickN2T] = ConfigData[playerid][cfQuickN2] = 0;
				case 3: ConfigData[playerid][cfQuickN3T] = ConfigData[playerid][cfQuickN3] = 0;
				case 4: ConfigData[playerid][cfQuickN4T] = ConfigData[playerid][cfQuickN4] = 0;
				case 5: ConfigData[playerid][cfQuickN5T] = ConfigData[playerid][cfQuickN5] = 0;
				case 6: ConfigData[playerid][cfQuickN6T] = ConfigData[playerid][cfQuickN6] = 0;
				case 7: ConfigData[playerid][cfQuickN7T] = ConfigData[playerid][cfQuickN7] = 0;
				case 8: ConfigData[playerid][cfQuickN8T] = ConfigData[playerid][cfQuickN8] = 0;
				case 9: ConfigData[playerid][cfQuickN9T] = ConfigData[playerid][cfQuickN9] = 0;
			}
			format(string, sizeof(string), "** 已删除常用功能%d的设置", numkey);
			SendClientMessage(playerid, COLOR_WHITE, string);
		    return 1;
		}
		case DIALOG_QUICK_SET:
		{
		    if(!response) return 1;
		    new numkey = listitem+1,
				keytype = GetGVarInt("SKeyT", playerid),
				keyid = GetGVarInt("SKeyID", playerid);
			switch(keytype)
			{
			    case KEY_TYPE_NONE: keytype = keyid = 0;
			    case KEY_TYPE_IU:
			    {
			        if(!PlayerHaveItem(playerid, ITEM_USE, keyid)) return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你没有该物品,无法设定");
			    }
			    case KEY_TYPE_IEQ:
			    {
			        if(!PlayerHaveItem(playerid, ITEM_EQ, keyid)) return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你没有该物品,无法设定");
			    }
			}
			switch(numkey)
			{
			    case 1: ConfigData[playerid][cfQuickN1T] = keytype, ConfigData[playerid][cfQuickN1] = keyid;
			    case 2: ConfigData[playerid][cfQuickN2T] = keytype, ConfigData[playerid][cfQuickN2] = keyid;
			    case 3: ConfigData[playerid][cfQuickN3T] = keytype, ConfigData[playerid][cfQuickN3] = keyid;
			    case 4: ConfigData[playerid][cfQuickN4T] = keytype, ConfigData[playerid][cfQuickN4] = keyid;
			    case 5: ConfigData[playerid][cfQuickN5T] = keytype, ConfigData[playerid][cfQuickN5] = keyid;
			    case 6: ConfigData[playerid][cfQuickN6T] = keytype, ConfigData[playerid][cfQuickN6] = keyid;
			    case 7: ConfigData[playerid][cfQuickN7T] = keytype, ConfigData[playerid][cfQuickN7] = keyid;
			    case 8: ConfigData[playerid][cfQuickN8T] = keytype, ConfigData[playerid][cfQuickN8] = keyid;
			    case 9: ConfigData[playerid][cfQuickN9T] = keytype, ConfigData[playerid][cfQuickN9] = keyid;
			}
			format(string, sizeof(string), "** 已完成常用功能%d的设置,你可以按数字键盘上的'6'来确认与使用目前的常用功能", numkey);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SendClientMessage(playerid, COLOR_WHITE, "** 按数字键盘上的'4'则可以指定的常用功能");
			ShowPlayerKeyList(playerid);
		    return 1;
		}
		case DIALOG_WEB_BUYVEH_COLOR:
		{
			if(!response) return 1;
			new modelid = GetGVarInt("WBVeh", playerid),
				price = GetGVarInt("WBPrice", playerid),
				colorid, colorstr[32];
			switch(listitem)
			{
				case 0: {colorid = 0; format(colorstr, 32, "黑色");}
				case 1: {colorid = 1; format(colorstr, 32, ""#TEXT_WHITE"白色");}
				case 2: {colorid = 3; format(colorstr, 32, ""#TEXT_RED"红色");}
				case 3: {colorid = 183; format(colorstr, 32, ""#TEXT_ORANGE"橘色");}
				case 4: {colorid = 6; format(colorstr, 32, ""#TEXT_YELLOW"黄色");}
				case 5: {colorid = 137; format(colorstr, 32, ""#TEXT_FADEGREEN"浅绿色");}
				case 6: {colorid = 86; format(colorstr, 32, ""#TEXT_GREEN"绿色");}
				case 7: {colorid = 2; format(colorstr, 32, ""#TEXT_LIGHTBLUE"浅蓝色");}
				case 8: {colorid = 79; format(colorstr, 32, ""#TEXT_BLUE"蓝色");}
				case 9: {colorid = 211; format(colorstr, 32, ""#TEXT_PURPLE"紫色");}
				case 10: {colorid = 126; format(colorstr, 32, ""#TEXT_PINK"粉红色");}
				case 11: {colorid = 157; format(colorstr, 32, ""#TEXT_GRAD"银色");}
			}
			format(string, sizeof(string), ""#TEXT_WHITE"已选择购买: %s\n颜色:%s\n"#TEXT_WHITE"价格:$%d\n\n是否确认下单购买?", GetVehicleName(modelid), colorstr, price);
			ShowPlayerDialog(playerid, DIALOG_WEB_BUYVEH_CHECK, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"购买载具", string, "确认", "取消");
			SetGVarInt("WBColor", colorid, playerid);
			return 1;
		}
		case DIALOG_WEB_BUYVEH_CHECK:
		{
			if(!response) return 1;
			new modelid = GetGVarInt("WBVeh", playerid),
				price = GetGVarInt("WBPrice", playerid),
				time = GetGVarInt("WBDTime", playerid),
				colorid = GetGVarInt("WBColor", playerid), place, spawnid = -1,
				Float:vx, Float:vy, Float:vz, Float:vangle, buyveh;
			if(PlayerData[playerid][pBank] < price) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"购买载具", ""#TEXT_WHITE"购买失败,你的存款不足", "确认", "");
			if(!PlayerCanBuyVehicle(playerid)) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"购买载具", ""#TEXT_WHITE"购买失败,你无法再拥有更多载具了", "确认", "");

			PlayerData[playerid][pBank] -= price;
			GetPlayerPos_Out(playerid, vx, vy, vz);

			if(IsAPlane_M(modelid) || IsAHelicopter_M(modelid))
			{
				place = GetNearestAirport(vx, vy, vz);
				switch(place)
				{
					case 0:
					{
						spawnid = random(sizeof(LSAirWBSpawnPos));
						vx = LSAirWBSpawnPos[spawnid][0],
						vy = LSAirWBSpawnPos[spawnid][1],
						vz = LSAirWBSpawnPos[spawnid][2],
						vangle = LSAirWBSpawnPos[spawnid][3];
					}
					case 1:
					{
						spawnid = random(sizeof(SFAirWBSpawnPos));
						vx = SFAirWBSpawnPos[spawnid][0],
						vy = SFAirWBSpawnPos[spawnid][1],
						vz = SFAirWBSpawnPos[spawnid][2],
						vangle = SFAirWBSpawnPos[spawnid][3];
					}
					case 2:
					{
						spawnid = random(sizeof(LVAirWBSpawnPos));
						vx = LVAirWBSpawnPos[spawnid][0],
						vy = LVAirWBSpawnPos[spawnid][1],
						vz = LVAirWBSpawnPos[spawnid][2],
						vangle = LVAirWBSpawnPos[spawnid][3];
					}
				}
				format(string, sizeof(string), "机场");
			}
			else if(IsABoat_M(modelid))
			{
				place = GetNearestDock(vx, vy, vz);
				switch(place)
				{
					case 0:
					{
						spawnid = random(sizeof(LSDockWBSpawnPos));
						vx = LSDockWBSpawnPos[spawnid][0],
						vy = LSDockWBSpawnPos[spawnid][1],
						vz = LSDockWBSpawnPos[spawnid][2],
						vangle = LSDockWBSpawnPos[spawnid][3];
					}
					case 1:
					{
						spawnid = random(sizeof(SFDockWBSpawnPos));
						vx = SFDockWBSpawnPos[spawnid][0],
						vy = SFDockWBSpawnPos[spawnid][1],
						vz = SFDockWBSpawnPos[spawnid][2],
						vangle = SFDockWBSpawnPos[spawnid][3];
					}
					case 2:
					{
						spawnid = random(sizeof(LVDockWBSpawnPos));
						vx = LVDockWBSpawnPos[spawnid][0],
						vy = LVDockWBSpawnPos[spawnid][1],
						vz = LVDockWBSpawnPos[spawnid][2],
						vangle = LVDockWBSpawnPos[spawnid][3];
					}
				}
				format(string, sizeof(string), "港口");
			}
			else
			{
				GetNearestRoad(vx, vy, vz, vx, vy, vz, vangle);
				format(string, sizeof(string), "道路");
			}
			format(string, sizeof(string), ""#TEXT_WHITE"购买完成!\n购买费用$%d已从你的存款扣除\n你的%s将会在约%d分钟后送至离你目前位置最近的%s", price, GetVehicleName(modelid), time/60000, string);
			ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"购买载具", string, "确认", "");

			buyveh = CreateVehicleEx(modelid, vx, vy, vz, vangle, colorid, colorid, VTYPE_PLAYER, price);
			VehData[buyveh][vOwned] = 1;
			VehData[buyveh][vOwner] = PlayerData[playerid][pID];
			VehData[buyveh][vStatus] = VEH_UNDELIVERED;
			Log(moneylog, INFO, "s(%d)花费了$%d购买了载具%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, GetVehicleName(VehData[buyveh][vModel]), VehData[buyveh][vID]);
			Log(vehlog, INFO, "s(%d)花费了$%d购买了载具%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], price, GetVehicleName(VehData[buyveh][vModel]), VehData[buyveh][vID]);
			SetVehicleVirtualWorld(buyveh, 99);
			SetTimerEx("WebsiteVehicleDelivered", time, false, "ddfff", buyveh, playerid, vx, vy, vz);
			return 1;
		}
	}
	return 1;
}

stock ShowPlayerPoliceDutyMenu(playerid)
{
    new string[256], playername[MAX_PLAYER_NAME];
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    if(GetGVarInt("PoliceDuty", playerid) == 1)
    {
        ClearAllWeapon(playerid);
        SetPlayerArmour_Fix(playerid, 0.0);
        DeleteGVar("PoliceDuty", playerid);
        SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
        UpdatePlayerColor(playerid);
        format(string, sizeof(string), "** %s 将装备以及制服收起来了 **", playername);
		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
    }
    else
    {
		format(string, sizeof(string), "选择配戴装备\t内容\t需求阶级\n");
		format(string, sizeof(string), "%s基本装备\t9mm手枪、警棍以及轻型护甲\tR1\n", string);
		format(string, sizeof(string), "%s战斗装备\t沙漠之鹰、霰弹枪以及普通护甲\tR2\n", string);
		format(string, sizeof(string), "%s冲锋装备\t沙漠之鹰、MP5冲锋枪以及重型护甲\tR3\n", string);
		format(string, sizeof(string), "%s镇暴装备\t战斗霰弹枪、M4步枪以及超重型护甲\tR3\n", string);
		format(string, sizeof(string), "%s血量护甲\t恢复血量、护甲至满\tR3\n", string);
		ShowPlayerDialog(playerid, DIALOG_PD_DUTY, DIALOG_STYLE_TABLIST_HEADERS, "值勤", string, "开始值勤", "取消");
	}
}

stock ShowPlayerWantedList(playerid)
{
    new crlist[256], l;
	crlist[0] = EOS, l = 0;
	ForEachPlayer(i)
	{
		if(PlayerData[i][pWanted] == 0) { continue;}
		format(crlist, sizeof(crlist), "%s%s(%d)\t%d\t%s\n", crlist, PlayerData[i][pName], i, PlayerData[i][pWanted], PlayerData[i][pCrime]);
		SetGVarInt("DListID", i, l*1000+playerid);
		l++;
	}
	if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"警用资料库", ""#TEXT_WHITE"目前没有任何通缉犯", "确定", "");}
	format(crlist, sizeof(crlist), "通缉犯名称(ID)\t通缉等级\t罪行\n%s", crlist);
	ShowPlayerDialog(playerid, DIALOG_POLICE_TRACE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"警用资料库", crlist, "选择", "关闭");
	return 1;
}

stock ShowPlayerCompanyMenu(playerid)
{
    new string[128], header[64], company = PlayerData[playerid][pCompany], comid = CompanySqlIDToID(company);
	if(company != -1)
	{
		format(header, sizeof(header), "{%06x}%s", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
		format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n成员一览\n旗下事业\n地产一览\n企业载具\n管理企业\n辞职", CompanyData[comid][comCatalog]);
		ShowPlayerDialog(playerid, DIALOG_COMPANY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
	}
	else
	{
		ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "企业", ""#TEXT_WHITE"你目前还不属于任何企业\n前往政府大楼可以加入或自行创立企业", "确认", "");
	}
	return 1;
}

stock ShowPlayerGangMenu(playerid)
{
    new string[128], header[64], gang = PlayerData[playerid][pGang], gangid = GangSqlIDToID(gang);
	if(gang != -1)
	{
		format(header, sizeof(header), "{%06x}%s", GangData[gangid][gName], GangData[gangid][gShort]);
		format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n帮会成员\n帮会地盘\n帮会技能\n帮会地产\n帮会载具\n管理帮会\n离开帮会", GangData[gangid][gCatalog]);
		ShowPlayerDialog(playerid, DIALOG_GANG, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
	}
	else
	{
	    if(PlayerData[playerid][pDepartment] == DEPT_ARMY || PlayerData[playerid][pDepartment] == DEPT_ARMY) return SendClientMessage(playerid, COLOR_WHITE, "身为警察或军人无法加入或创立帮会");
		if(PlayerData[playerid][pLevel] < 15) SendClientMessage(playerid, COLOR_WHITE, "必须要达到等级15才能加入或创立帮会");
		else ShowPlayerDialog(playerid, DIALOG_GANG_NONE, DIALOG_STYLE_TABLIST_HEADERS, "帮会", ""#TEXT_WHITE"目前你不属于任何帮会\n帮会列表\n创立帮会", "选择", "关闭");
	}
	return 1;
}

stock ShowPlayerConfigMenu(playerid)
{
    new string[256];
    format(string, sizeof(string), ""#TEXT_WHITE"切换项目\t \n出生地点\n爆头/被击中音效开关\n右上量表显示\n存款显示\n左下饥饿与体力条显示\n底部信息显示\n时速表显示\n时间显示\n玩家血量显示\n设定战斗流派\n输入代码");
	ShowPlayerDialog(playerid, DIALOG_CONFIG, DIALOG_STYLE_TABLIST_HEADERS, "设定", string, "选择", "关闭");
	return 1;
}

stock ShowPlayerCompanyMediaMenu(playerid)
{
    new string[256], comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
	if(CompanyData[comid][comMedia] == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的企业已经没有媒体业了");
 	format(string, sizeof(string), ""#TEXT_WHITE"管理项目\t \n新增/移除负责人\n管理收益(目前:$%d)\t热度:%d\n管理广播电台\t在线听众:%d人\n管理电视频道\t在线观众:%d人\n"#TEXT_LIGHTRED"解散媒体业"
	, CompanyData[comid][comMediaEarn], CompanyData[comid][comMediaFame], GetRadioListeners(comid), GetTVAudiences(comid));
 	ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA, DIALOG_STYLE_TABLIST_HEADERS, "媒体业", string, "选择", "关闭");
	return 1;
}

stock ShowPlayerATMMenu(playerid)
{
    new string[128];
    format(string, sizeof(string), ""#TEXT_WHITE"帐户余额:$%d\n"#TEXT_FADEGREEN"存款\n"#TEXT_YELLOW"提款\n"#TEXT_FADEBLUE"汇款", PlayerData[playerid][pBank]);
	ShowPlayerDialog(playerid, DIALOG_ATM, DIALOG_STYLE_TABLIST_HEADERS, "自动柜员机", string, "选择", "离开");
	return 1;
}

stock ShowPlayerGPSMenu(playerid)
{
    ShowPlayerDialog(playerid, DIALOG_GPS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"GPS定位装置", "目录:\n搜寻最近地标\n查看附近地标\n自行输入坐标\n关闭目前的标记", "选择", "关闭");
}

PUBLIC:SetPlayerCreateCompany(playerid, comid)
{
	static string[144];
	GiveMoney(playerid, -110000);
    Log(moneylog, INFO, "%s(%d)花费了$%d成立新的企业%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], 110000, CompanyData[comid][comName], CompanyData[comid][comID]);
    Log(companylog, INFO, "%s(%d)花费了$%d成立新的企业%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], 110000, CompanyData[comid][comName], CompanyData[comid][comID]);
    CompanyData[comid][comFund] = 100000;
	PlayerData[playerid][pCompany] = CompanyData[comid][comID];
	AddCompanyMember(comid, PlayerData[playerid][pID], " ", MEMBER_JOINED, 5);
	format(string, sizeof(string), ""#TEXT_WHITE"你花费了"#TEXT_FADEGREEN"$110,000"#TEXT_WHITE"成立了属于你的企业{%06x}%s\n"#TEXT_WHITE"你可以在个人菜单打开企业菜单管理你的企业", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
	ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "创立企业", string, "确认", "");
	SetGVarInt("ComID", comid, playerid);
}

PUBLIC:SetPlayerCreateGang(playerid, gangid)
{
	static string[144];
	Log(ganglog, INFO, "%s(%d)成立新的帮会%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], GangData[gangid][gName], GangData[gangid][gID]);
	PlayerData[playerid][pGang] = GangData[gangid][gID];
	AddGangMember(gangid, PlayerData[playerid][pID], " ", MEMBER_JOINED, 5);
	UpdateGangZoneForPlayer(playerid);
	format(string, sizeof(string), ""#TEXT_WHITE"你成立了属于你的帮会{%06x}%s[%s]\n"#TEXT_WHITE"你可以在个人菜单打开帮会菜单管理你的帮会", GangData[gangid][gColor] >>> 8, GangData[gangid][gName], GangData[gangid][gShort]);
	ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "创立帮会", string, "确认", "");
}

PUBLIC:ShowSellingVeh(playerid, modelid, vwid)
{
	//先将Timer设为非存在编号 确保不会误kill
	//PlayerBuyingCarTimer[playerid] = -1;
    SetGVarInt("PlayerBuyingCarTimer", -1, playerid);
	new vehicleid;
	switch(GetGVarInt("PlayerBuyingCarPlace", playerid))
	{
		case VS_LV1:
		{
		    vehicleid = CreateVehicle(modelid,1263.4598,-57.9597,1002.4368,1.0579,0,0,3600);
			LinkVehicleToInterior(vehicleid, 18);
		}
		case VS_GROTTI:
		{
		    vehicleid = CreateVehicle(modelid,543.5699,-1283.7938,17.1822,285.5391,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_SIMEON:
		{
		    vehicleid = CreateVehicle(modelid,2125.8162,-1144.0739,24.6685,305.2328,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_WANG:
		{
		    vehicleid = CreateVehicle(modelid,-1949.3368,265.3922,35.3958,37.6358,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_SFBIKE:
		{
		    vehicleid = CreateVehicle(modelid,-2466.7380,780.6182,35.1093,37.5243,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_BISVEH_LS:
		{
		    vehicleid = CreateVehicle(modelid,1243.0492,-1818.4548,13.3468,272.6309,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_BISVEH_SF:
		{
		    vehicleid = CreateVehicle(modelid,-1560.9146,1197.0225,6.8907,133.3574,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_BISVEH_LV:
		{
		    vehicleid = CreateVehicle(modelid,2160.5066,1414.5129,10.7504,180.2392,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_LSMUSCLE:
		{
		    vehicleid = CreateVehicle(modelid,1945.8912,-2087.4897,13.6677,215.6913,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
		case VS_SF1:
		{
		    vehicleid = CreateVehicle(modelid,-2276.1025,203.1391,34.8689,179.4650,0,0,3600);
			LinkVehicleToInterior(vehicleid, 0);
		}
	}
	SetGVarInt("PlayerBuyingCarID", vehicleid, playerid);
	SetVehicleVirtualWorld(vehicleid, vwid);

	//车辆确定重生后我们把按键侦测再度开启 ((最好延迟一点 因为重生到stream看见会需要一点时间))
	SetPlayerTimerEx(playerid, "AllowVehicleSelect", 800, 0, "d", playerid);//改用玩家计时器
	//printf("ShowSellingVeh called");
}

PUBLIC:AllowVehicleSelect(playerid)
{
	SetGVarInt("PlayerBuyingCarAllow", 1, playerid);
}

public OnPlayerFinishedDownloading(playerid, virtualworld)//玩家更换世界编号后触发
{
	if(virtualworld == 0)
    {
        DeleteGVar("PlayerX", playerid);
	    DeleteGVar("PlayerY", playerid);
	    DeleteGVar("PlayerZ", playerid);
    }
    return 1;
}

stock SetBuyCarTimer(playerid, virtualworld)
{
	new tmptimer;
	switch(GetGVarInt("PlayerBuyingCarPlace", playerid))
	{
		case VS_LV1://LV卖车场1
		{//确认玩家是否在选择车辆
			//设置点延迟 不然和OnPlayerFinishedDownloading同时间运行可能也会有问题
			//PlayerBuyingCarTimer[playerid] = SetTimerEx("ShowSellingVeh", 300, 0, "ddd", playerid, LVCARSELL1DATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LVCARSELL1DATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);//改用玩家计时器
		}
		case VS_GROTTI: //Grotti
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, GROTTIDATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_SIMEON: //Simeon
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LSCARSELL1DATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_WANG: //WangCar
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, WANGCARDATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_SFBIKE: //SF Bike
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, SFBIKEDATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_BISVEH_LS, VS_BISVEH_SF, VS_BISVEH_LV:
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, BISVEHSELLDATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_LSMUSCLE: //LSMuscle
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, LSMUSCLEDATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
		case VS_SF1://SF卖车场1
		{
			tmptimer = SetPlayerTimerEx(playerid, "ShowSellingVeh", 300, 0, "ddd", playerid, SFCARSELL1DATA[GetGVarInt("PlayerBuyingCarNum", playerid)][csModel], virtualworld);
		}
	}
	SetGVarInt("PlayerBuyingCarTimer", tmptimer, playerid);
}

public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	if(GetGVarInt("Logged", playerid))
	{
		if(playerid == clickedplayerid) ShowPlayerMenu(playerid);
	}
	return 1;
}

PUBLIC:FuelChecker()
{
    for(new i = 1, j = GetVehiclePoolSize(); i <=j ; i++)//使用GetVehiclePoolSize获取最大车辆编号来增加效率
	{
	    static engine, lights, alarm, doors, bonnet, boot, objective;
	    GetVehicleParamsEx(i, engine, lights, alarm, doors, bonnet, boot, objective);
		if(engine == 1 && VehData[i][vFuel] > -1 && VehData[i][vType] != 0 && !IsABike(i))
		{
			if(VehData[i][vTurbo] > 3) VehData[i][vFuel] -= 2;//等级4与5的涡轮引擎将会增加油耗
			else VehData[i][vFuel] --;
		}
		else if(VehData[i][vFuel] < 0) SetVehicleParamsEx(i, 0, lights, alarm, doors, bonnet, boot, objective);
	}
}

PUBLIC:PlayerTimer(playerid)
{
    new string[144], i, k, j;
    if(GetGVarInt("Logged", playerid) == 0)
    {
        if(GetGVarInt("LogCount", playerid) > 1)
        {
	        new logcount = GetGVarInt("LogCount", playerid);
	        if(logcount == 1)
	        {
	            DeleteGVar("LogCount", playerid);
	            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_RED"停留过久", ""#TEXT_WHITE"因为你在登入注册画面停留太久而断线了\n若有任何问题请上官方论坛回报\n网址:"#TEXT_YELLOW"https://gta.sot.blue/bbs/", "确定", "");
	            return Kick(playerid);
	        }
	        else SetGVarInt("LogCount", logcount-1, playerid);
	    }
    }
    else if(GetGVarInt("Spawned", playerid) == 1)
    {
        new targetid, actorid, playername[MAX_PLAYER_NAME], pworld, Float:px, Float:py, Float:pz;
        if(PlayerData[playerid][pCantJoin] > 0) PlayerData[playerid][pCantJoin]--;
        else
		{
		    //SendClientMessage(playerid, COLOR_WHITE, "你又可以参与地盘战啦!");
			PlayerData[playerid][pCantJoin]=0;
  		}
        if(GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
        {
            new vehicleid = GetPlayerVehicleID(playerid);
            if(GetGVarInt("Taxi", vehicleid) == 1)
            {
	            if(GetGVarInt("TaxiCount", playerid) > 0)
	            {
	                new count = GetGVarInt("TaxiCount", playerid),
						cost = GetGVarInt("TaxiCost", playerid),
						driver = GetGVarInt("PTaxiDriver", playerid),
						fare2 = GetGVarInt("TaxiFare2", driver);
                    if(PlayerData[playerid][pCash] < cost)
					{
					    RemovePlayerFromVehicle_Fix(playerid);
					    return SendClientMessage(playerid, COLOR_WHITE, "你身上的现金不够支付车资!");
					}
	                if(count > 1)
	                {
	                    SetGVarInt("TaxiCount", count-1, playerid);
	                    format(string, sizeof(string), "~y~车费:~g~$%d", cost);
	                    GameTextForPlayer(playerid, string, 1000, 6);
	                    GameTextForPlayer(driver, string, 1000, 6);
	                }
	                else if(count == 1)
	                {
	                    SetGVarInt("TaxiCount", 15, playerid);
	                    SetGVarInt("TaxiCost", cost+fare2, playerid);
	                    format(string, sizeof(string), "~y~车费:~g~%d~w~+$%d", cost, fare2);
	                    GameTextForPlayer(playerid, string, 1000, 6);
	                    GameTextForPlayer(driver, string, 1000, 6);
	                }
	            }
	        }
		}
		else if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
            new vehicleid = GetPlayerVehicleID(playerid);
			if(VehData[vehicleid][vTurbo] > 0)
			{
			
				new turbocd = GetGVarInt("TurboCD", vehicleid);
				if(turbocd > 0) SetGVarInt("TurboCD", turbocd-1, vehicleid);
				else
				{
					new Float:speed = GetVehicleSpeed(vehicleid),
						Float:vx, Float:vy, Float:vz;
					if(speed > 0.0)
					{
						switch(VehData[vehicleid][vTurbo])
						{
							case 1:
							{
								if(speed < 130.0)
								{
									GetVehicleVelocity(vehicleid, vx, vy, vz);
									SetVehicleVelocity(vehicleid, vx*1.1, vy*1.1, vz*1.1);
								}
							}
							case 2:
							{
								if(speed < 130.0)
								{
									GetVehicleVelocity(vehicleid, vx, vy, vz);
									SetVehicleVelocity(vehicleid, vx*1.2, vy*1.2, vz*1.2);
								}
							}
							case 3:
							{
								if(speed < 160.0)
								{
									GetVehicleVelocity(vehicleid, vx, vy, vz);
									SetVehicleVelocity(vehicleid, vx*1.2, vy*1.2, vz*1.2);
								}
							}
							case 4:
							{
								if(speed < 160.0)
								{
									GetVehicleVelocity(vehicleid, vx, vy, vz);
									SetVehicleVelocity(vehicleid, vx*1.3, vy*1.3, vz*1.3);
								}
							}
							case 5:
							{
								if(speed < 200.0)
								{
									GetVehicleVelocity(vehicleid, vx, vy, vz);
									SetVehicleVelocity(vehicleid, vx*1.3, vy*1.3, vz*1.3);
								}
							}
						}
						SetGVarInt("TurboCD", 2, vehicleid);
					}
				}
			}
		}
        else if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
        {
            if(GetGVarInt("Mission", playerid) > 0)
            {
                switch(GetGVarInt("Mission", playerid))
                {
                    case 21:
                    {
                        new car[4];
                        car[0] = GetGVarInt("playermissioncar[0]", playerid);
                        car[1] = GetGVarInt("playermissioncar[1]", playerid);
                        car[2] = GetGVarInt("playermissioncar[2]", playerid);
                        car[3] = GetGVarInt("playermissioncar[3]", playerid);
                        new Float:vhp[4];
						new count;
						count = GetGVarInt("playermissioncount", playerid);
						for(i = 0; i < 4; i++)
						{
							if(car[i] == INVALID_VEHICLE_ID) continue;
			    			if(GetGVarInt("VehMission", car[i]) == 21)
						    {
		        				GetVehicleHealth(car[i], vhp[i]);
						        if(vhp[i] <= 250.0)
						        {
							    	DeleteGVar("VehMission", car[i]);
            						DeleteVehicle(car[i]);
       								format(string, sizeof(string), "%s 摧毁了一辆"#TEXT_YELLOW"目标车辆", PlayerData[playerid][pName]);
		        					SendMissionMessage(GetGVarInt("Mission", playerid), COLOR_WHITE, string);
             						SetGVarInt("playermissioncount", GetGVarInt("playermissioncount", playerid)+1, playerid);
   								}
	   						}
						}
      					if(count == 4)
           				{
               				UpdateGlobalMission(21, 3);
               			}
                    }
                }
            }
            if(GetPlayerDrunkLevel(playerid) > 25000)
            {
                ApplyAnimation(playerid, "ped", "walk_drunk", 4.1, 0, 1, 1, 0, 0, 1);
            }
            if(GetGVarInt("TiePrep", playerid) > 0)
		    {
				new ttimer = GetGVarInt("TiePrep", playerid);
				if(ttimer > 1) SetGVarInt("TiePrep", ttimer-1, playerid);
		        else if(ttimer == 1)
				{
					SendClientMessage(playerid, COLOR_WHITE, "束缚技能的有效时间已经结束");
					DeleteGVar("TiePrep", playerid);
				}
		    }
            if(GetGVarInt("Fishing", playerid) > 0)
		    {
		        new ftimer = GetGVarInt("Fishing", playerid);
				if(ftimer > 1) SetGVarInt("Fishing", ftimer-1, playerid);
		        else if(ftimer == 1) Fish(playerid);
		    }
		    else if(GetGVarInt("Digging", playerid) > 0)
		    {
		        new dtimer = GetGVarInt("Digging", playerid);
		        ApplyAnimationEx(playerid, "BASEBALL", "BAT_4", 1.5, 1, 0, 0, 1, 0, 1);
				if(dtimer > 1) SetGVarInt("Digging", dtimer-1, playerid);
		        else if(dtimer == 1) Dig(playerid);
		    }
		    else if(GetGVarInt("Hewing", playerid) > 0)
		    {
		        new htimer = GetGVarInt("Hewing", playerid),
					treeid = GetGVarInt("HewID", playerid);
				format(string, sizeof(string), "剩余木头:%d", LumberTree[treeid][trWood]);
                UpdateDynamic3DTextLabelText(TreeText[playerid], COLOR_YELLOWGREEN, string);
				if(LumberTree[treeid][trCreated] != 1 || LumberTree[treeid][trWood] < 1)
				{
				    SendClientMessage(playerid, COLOR_WHITE, "** 因为这棵树已经倒了,伐木动作已停止");
				    StopHewing(playerid);
				}
				else
				{
			        ApplyAnimationEx(playerid, "BASEBALL", "BAT_4", 1.5, 1, 0, 0, 1, 0, 1);
					if(htimer > 1) SetGVarInt("Hewing", htimer-1, playerid);
			        else if(htimer == 1) Hew(playerid);
			    }
		    }
		    if(IsPlayerConnected(GetPlayerTargetPlayer(playerid)))
		    {
		        targetid = GetPlayerTargetPlayer(playerid);
		        if(IsPlayerNPC(targetid))
		        {
		            if(!IsArmed(playerid))
		            {
			            if(PetData[playerid][GetGVarInt("CurrentPetID", playerid)][petNPC] == targetid)
			            {
			                if(GetGVarInt("PetCalled", playerid) == 1 && GetGVarInt("PetOwner", targetid) == playerid)
			                {
				                static header[48], petid, string2[256];
				                petid = GetGVarInt("CurrentPetID", playerid);
				                format(header, sizeof(header), ""#TEXT_YELLOW"%s", PetData[playerid][petid][petName]);
				                format(string2, sizeof(string2), "\t \t \t \n名称\t"#TEXT_YELLOW"%s\t"#TEXT_GREEN"点击更改\n"#TEXT_WHITE"好感度\t"#TEXT_PINK"%d\t\n"#TEXT_WHITE"生命值\t"#TEXT_FADEGREEN"%d\t\n"#TEXT_WHITE"饥饿值\t"#TEXT_FADEBLUE"%d\t\n能力与指令\n弃养"
								, PetData[playerid][petid][petName], floatround(PetData[playerid][petid][petLove]), floatround(FCNPC_GetHealth(PetData[playerid][petid][petNPC])), floatround(PetData[playerid][petid][petHunger]));
				                ShowPlayerDialog(playerid, DIALOG_PET_CHECK, DIALOG_STYLE_TABLIST_HEADERS, header, string2, "查看", "关闭");
				                SetGVarInt("DPetID", GetGVarInt("CurrentPetID", playerid), playerid);

				                UpdatePlayerMission(playerid, 14, 7);
			                }
			            }
			            else if(GetGVarInt("Animal", targetid) != 0 && GetGVarInt("Obedient", targetid) == 1 && GetGVarInt("Pet", targetid) != 1)
			            {
		                    ShowPlayerDialog(playerid, DIALOG_PET_RECRUIT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"收服", ""#TEXT_WHITE"这只动物已经被驯服\n是否收养成为宠物?", "确认", "取消");
		                    SetGVarInt("DDecideID", targetid, playerid);
		                }
		            }
	                if(GetGVarInt("PetAttack", playerid) == 1 && GetGVarInt("PetCalled", playerid) == 1)
			        {
			            new petid = GetGVarInt("CurrentPetID", playerid);
			            if(PetData[playerid][petid][petNPC] != targetid)
			            {
				            NPCToTarget(PetData[playerid][petid][petNPC], TARGET_NPC, targetid, 1, 0, 1);
					        DeleteGVar("PetAttack", playerid);
					    }
			        }
		        }
		        else
		        {
			        static targetname[MAX_PLAYER_NAME];
			        GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
			        GetPlayerName(targetid, targetname, MAX_PLAYER_NAME);
					if(GetPlayerWeapon(playerid) != 43 && GetPlayerWeapon(playerid) != 9 && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_SPRUNK && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_WINE && GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_SMOKE_CIGGY && GetPlayerSpecialAction(playerid)!=SPECIAL_ACTION_DRINK_BEER)
					{
		    			new igzid = GetPlayerGangZone(targetid);
			            new petid = GetGVarInt("CurrentPetID", playerid);
			            if(petid != targetid) //如果目标不是宠物
			            {
							if(GetGVarInt("PoliceDuty", playerid) == 0) //如果我没有警察上班
							{
		    					if(igzid != -1) //如果对方在安全区
		    					{
		    						if(GangZone[igzid][gzSafezone]) //目标在安全区 你瞄准
		    						{
		    						    ClearAnimationsEx(playerid);
		        						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安全区", "目标正在安全区,请不要违规", "确认", "");
		    						}
		 						}
 							}
   						}
					}
			        else if(GetGVarInt("PetAttack", playerid) == 1 && GetGVarInt("PetCalled", playerid) == 1)
			        {
			            new petid = GetGVarInt("CurrentPetID", playerid);
			            if(petid != targetid)
			            {
			                if(GetPlayerGangZone(targetid) != -1) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安全区", "目标正在安全区,请不要违规", "确认", "");
			                else if(GetPlayerGangZone(playerid) != -1) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"安全区", "你正在安全区,请不要违规", "确认", "");
				            NPCToTarget(PetData[playerid][petid][petNPC], TARGET_PLAYER, targetid, 1, 0, 1);
					        DeleteGVar("PetAttack", playerid);
					    }
			        }
					else if(GetGVarInt("PoliceDuty", playerid) == 1)
					{
					    if((PlayerData[targetid][pJail] > 0 || GetGVarInt("Cuffed", targetid) == 1) && !IsArmed(playerid))
					    {
				            GetPlayerPos(targetid, px, py, pz);
				            if(IsPlayerInRangeOfPointEx(playerid, 5.0, px, py, pz))
				            {
				                format(string, sizeof(string), ""#TEXT_WHITE"选择对%s进行的动作\n搜身\n上铐/解铐", targetname);
				                ShowPlayerDialog(playerid, DIALOG_POLICE_CRIMINAL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"犯人", string, "选择", "取消");
				                SetGVarInt("DDecideID", targetid, playerid);
				            }
					    }
					    else if(PlayerData[targetid][pWanted] > 0 && IsArmed(playerid))
					    {
					        new atimer = GetGVarInt("Arresting", targetid);
					        GetPlayerPos(targetid, px, py, pz);
				            if(IsPlayerInRangeOfPointEx(playerid, 10.0, px, py, pz))
				            {
						        if(GetGVarInt("Surr", targetid) == 1 || GetGVarInt("PTazzed", targetid) > 0 || GetPlayerHealth_Fix(targetid) < GetPlayerHealth_Fix(playerid))
						        {
						            if(atimer == 5)
						            {
						                PlayerCuffPlayer(playerid, targetid);
						                DeleteGVar("Arresting", targetid);
						            }
						            else
						            {
						                SetGVarInt("Arresting", atimer+1, targetid);
						                if(atimer == 3)
						                {
						                    format(string, sizeof(string), "** %s 正在尝试逮捕%s **", playername, targetname);
											SendRangeMessage(20.0, targetid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
						                }
						            }
						        }
						        else DeleteGVar("Arresting", targetid);
						    }
						    else
						    {
						        if(atimer > 0)
						        {
						            SendClientMessage(playerid, COLOR_WHITE, "** 该通缉犯距离你太远,逮捕中断");
						            DeleteGVar("Arresting", targetid);
						        }
						    }
					    }
					}
				}
		    }
		    else if(IsValidDynamicActor(GetPlayerTargetDynamicActor(playerid)))
		    {
		        actorid = GetPlayerTargetDynamicActor(playerid),
				pworld = GetPlayerVirtualWorld(playerid);

		        if(IsArmed(playerid))
				{
				    if(GetGVarInt("Animal", actorid) == 0)
				    {
					    if(actorid == AmmuClerk[pworld])
						{
							SendRangeActorMessage(25.0, AmmuClerk[pworld], "老板 说: 在你放下这玩意儿之前我不会卖你东西的", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		                }
						else if(actorid == TrevorNPC)
						{
							SendRangeActorMessage(25.0, TrevorNPC, "崔佛 说: 你最好在我对你做出什么事之前把那东西放下来!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		                }
		                else if(GetGVarInt("Cloning", actorid) == 1 || actorid == PrisonStaff || actorid == LSPDStaff || actorid == SFPDStaff || actorid == LVPDStaff1 || actorid == LVPDStaff2) {}
		                else
		                {
		                    if(ShookActor[actorid] < 99)
		                    {
		                        GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
								ShookActor[actorid] ++;
								if(ShookActor[actorid] == 2)
								{
								    format(string, sizeof(string), "** %s 正在持枪瞄准这个人导致他受到惊吓 **", playername);
									SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
									ApplyDynamicActorAnimation(actorid, "SHOP", "SHP_Rob_HandsUp", 4.1, 0, 0, 0, 0, 60000);
								}
								else if(ShookActor[actorid] == 6 && GetGVarInt("Clerk", actorid) == 1)
								{
								    GetPlayerPos(playerid, px, py, pz);
								    new robbed = GetGVarInt("RobbedStore", playerid),
										crime = SetPlayerCrime(playerid, CRIME_ROB, VICTIM_SHOP, 1, GetPlayerWeapon(playerid), px, py, pz);//抢劫罪行;
								    CrimeToWanted(playerid, crime);
									ApplyDynamicActorAnimation(actorid, "SHOP", "SHP_Rob_GiveCash", 4.1, 0, 0, 0, 0, 2000);
									SetTimerEx("Robbed", 2000, false, "ii", actorid, playerid);
									SetTimerEx("Robbable", 86400000, false, "i", actorid);//24小时后才能再抢
									SetGVarInt("RobbedStore", robbed+1, playerid);
									format(string, sizeof(string), "** %s 抢劫了这家店 **", playername);
									SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
									RecordData[playerid][prRobStore] ++;
								}
							}
							else
							{
							    if(GetGVarInt("Clerk", actorid) == 1)
							    {
							        switch(random(5))
							        {
								    	case 0: format(string, sizeof(string), "店员说: 饶了我吧,我刚刚才被抢过");
								    	case 1: format(string, sizeof(string), "店员说: 收银机已经空了,你还想要什么");
								    	case 2: format(string, sizeof(string), "店员说: 没有的东西就是没有,你要我怎么变出来");
								    	case 3: format(string, sizeof(string), "店员说: 钱都没了,下次请早吧");
								    	case 4: format(string, sizeof(string), "店员说: 够了够了,没钱了,今天的收入都已经被抢光光了");
								    }
									SendRangeMessage(20.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
								    ApplyDynamicActorAnimation(actorid, "SHOP", "SHP_Rob_HandsUp", 4.1, 0, 0, 0, 0, 60000);
								}
							}
						}
					}
				}
		        else
		        {
					if(actorid == LVMVClerk || actorid == LSMVClerk || actorid == SFMVClerk)
					{
						if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR)
						{
							ShowPlayerDialog(playerid, DIALOG_MVO_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, "辅导站",""#TEXT_WHITE"疲劳的一天,辛苦了\n服务菜单\n储物间", "确认", "离开");
						}
						else ShowPlayerDialog(playerid, DIALOG_MVO, DIALOG_STYLE_TABLIST_HEADERS, "辅导站",""#TEXT_WHITE"你好, 需要什么服务?\n个人载具报废\n申请成为辅导员", "确认", "离开");
					}
					else if(actorid == LSPotClerk || actorid == SFPotClerk || actorid == LVPotClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_POT, DIALOG_STYLE_TABLIST_HEADERS, "花市老板",""#TEXT_WHITE"你好\n种子购买\n园艺工具购买\n肥料与农药购买\n出售植物", "确认", "离开");
					}
					else if(actorid == LSPetClerk || actorid == SFPetClerk || actorid == LVPetClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_PET, DIALOG_STYLE_TABLIST_HEADERS, "宠物摊老板",""#TEXT_WHITE"喜欢动物吗?\n购买宠物", "确认", "离开");
					}
					else if(actorid == LVCarSellMan1)
					{
						ShowPlayerDialog(playerid, DIALOG_LVCARSELL1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"销售人员", ""#TEXT_WHITE"欢迎光临,请问需要什么服务?\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == SFCarSellMan1)
					{
						ShowPlayerDialog(playerid, DIALOG_SFCARSELL1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"销售人员", ""#TEXT_WHITE"欢迎光临,请问需要什么服务?\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == GrottiClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_GROTTI, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"销售人员", ""#TEXT_WHITE"您好,这里是Grotti奢华跑车中心,需要效劳吗??\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == SimeonNPC)
					{
						ShowPlayerDialog(playerid, DIALOG_SIMEON, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"西门", ""#TEXT_WHITE"朋友我能帮什么忙吗?\n订购载具", "选择", "离开");
		        	}
		        	else if(actorid == SFBikeClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_SFBIKE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"SF机车售场", ""#TEXT_WHITE"圣安地列斯州的顶级机车都能在这里找到\n订购载具", "选择", "离开");
		        	}
		        	else if(actorid == WangCarClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_WANGCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"道恩", ""#TEXT_WHITE"唷,来看车吗?\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == LSMuscleClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_LSMUSCLE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"销售人员", ""#TEXT_WHITE"最威猛的美式肌肉车都在这\n订购载具", "选择", "离开");
		        	}
		        	else if(actorid == BisVehClerk[0])
					{
						ShowPlayerDialog(playerid, DIALOG_BISVEHSELL_LS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"营业用车销售中心", ""#TEXT_WHITE"准备好来为你的组织添购新车了吗??\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == BisVehClerk[1])
					{
						ShowPlayerDialog(playerid, DIALOG_BISVEHSELL_SF, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"营业用车销售中心", ""#TEXT_WHITE"准备好来为你的组织添购新车了吗??\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == BisVehClerk[2])
					{
						ShowPlayerDialog(playerid, DIALOG_BISVEHSELL_LV, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"营业用车销售中心", ""#TEXT_WHITE"准备好来为你的组织添购新车了吗??\n订购载具", "是", "不了");
		        	}
		        	else if(actorid == LSCSJobClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"汽车销售商",""#TEXT_WHITE"\n接受工作\n签署合约(4小时)\n工作内容\n辞职", "选择", "离开");
						SetGVarInt("CarSellPlace", 1, playerid);
		        	}
		        	else if(actorid == SFCSJobClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"汽车销售商",""#TEXT_WHITE"\n接受工作\n签署合约(4小时)\n工作内容\n辞职", "选择", "离开");
						SetGVarInt("CarSellPlace", 2, playerid);
		        	}
		        	else if(actorid == LVCSJobClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_CARSELL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"汽车销售商",""#TEXT_WHITE"\n接受工作\n签署合约(4小时)\n工作内容\n辞职", "选择", "离开");
						SetGVarInt("CarSellPlace", 3, playerid);
		        	}
		        	else if(actorid == LSMGun || actorid == LVMGun)
					{
					    if(RecordData[playerid][prMEmmet] < 1)
				        {
				            ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"暗巷的陌生人", ""#TEXT_WHITE"走开,这里不是你这种小朋友该来的地方", "...", "");
				            return 1;
		                }
						ShowPlayerDialog(playerid, DIALOG_MGUN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"枪枝市场", ""#TEXT_WHITE"勿张扬,快快完事快快走人吧\n交易列表\n发起交易\n我的交易", "选择", "离开");
		        	}
		        	else if(actorid == SFMMat || actorid == LVMMat)
					{
						ShowPlayerDialog(playerid, DIALOG_MMAT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"材料市场", ""#TEXT_WHITE"各类材料开放交易\n交易列表\n发起交易\n我的交易", "选择", "离开");
		        	}
		        	else if(actorid == LSMFish || actorid == SFMFish || actorid == LVMFish)
					{
						ShowPlayerDialog(playerid, DIALOG_MFISH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"鱼市场", ""#TEXT_WHITE"有新鲜的渔获吗?\n钓客鱼只交易\n渔夫工作", "选择", "离开");
                        UpdatePlayerMission(playerid, 10, 2);
		        	}
		        	else if(actorid == MHunt[0] || actorid == MHunt[1] || actorid == MHunt[2])
					{
						ShowPlayerDialog(playerid, DIALOG_MHUNT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"狩猎市场", ""#TEXT_WHITE"打猎得来的收获都能在这里出售\n狩猎物交易列表", "选择", "离开");
		        	}
		        	else if(actorid == LumberClerk[0] || actorid == LumberClerk[1] || actorid == LumberClerk[2] || actorid == LumberClerk[3])
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_LUMBERJACK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEGREEN"伐木工", ""#TEXT_WHITE"小夥子,你来得正好,我们正缺人手\n取得最近林场位置\n贩售木头\n签署合约\n工作介绍\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == MinerClerk[0] || actorid == MinerClerk[1])
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_MINER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"矿工", ""#TEXT_WHITE"\n贩售矿产\n签署合约\n工作介绍\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == FVendorClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_FVENDOR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"餐车", ""#TEXT_WHITE"\n订购食材货物\n签署合约\n工作介绍\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == LSTowClerk || actorid == SFTowClerk || actorid == LVTowClerk)
					{
						ShowPlayerDialog(playerid, DIALOG_JOB_TOW, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_LIGHTBLUE"道路救援", ""#TEXT_WHITE"\n签署合约\n工作介绍\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == LSTrashClerk || actorid == SFTrashClerk || actorid == LVTrashClerk)
					{
					    ShowPlayerDialog(playerid, DIALOG_JOB_TRASH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"主管",""#TEXT_WHITE"\n签署合约(1小时)\n工作内容\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == TrailerClerk[0] || actorid == TrailerClerk[1] || actorid == TrailerClerk[2] || actorid == TrailerClerk[3] || actorid == TrailerClerk[4] || actorid == TrailerClerk[5])
					{
					    ShowPlayerDialog(playerid, DIALOG_JOB_TRAILER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"主管",""#TEXT_WHITE"\n签署合约(1小时)\n工作内容\n辞职", "选择", "离开");
		        	}
					else if(actorid == HunterClerk)
					{
					    ShowPlayerDialog(playerid, DIALOG_JOB_HUNTER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"狩猎委托长",""#TEXT_WHITE"\n接受委托\n查询生态数\n签署合约(1小时)\n工作内容\n辞职", "选择", "离开");
		        	}
		        	else if(actorid == FDManager1[pworld])
					{
					    ShowPlayerDialog(playerid, DIALOG_JOB_FD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"汉堡店经理",
							""#TEXT_WHITE"来打工吗?\n传单发送员\n外送员", "选择", "离开");
                        SetGVarInt("FDType", 1, playerid);
		        	}
		        	else if(actorid == FDManager2[pworld])
					{
					    ShowPlayerDialog(playerid, DIALOG_JOB_FD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"披萨店经理",
							""#TEXT_WHITE"来打工吗?\n传单发送员\n外送员", "选择", "离开");
						SetGVarInt("FDType", 2, playerid);
		        	}
		        	else if(actorid == CluckinClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_CHICKEN, 1);
						SendClientMessage(playerid, COLOR_FADE1, "鸡布偶装店员 说: 欢迎.好了你要什么??");
		        	}
		        	else if(actorid == PizzaClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_PIZZA, 1);
						SendClientMessage(playerid, COLOR_FADE1, "披萨店店员 说: 你想要点什么?");
		        	}
		        	else if(actorid == BurgerClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_BURGER, 1);
						SendClientMessage(playerid, COLOR_FADE1, "汉堡女店员 说: 欢迎光临 请问您想吃什么?");
						UpdatePlayerMission(playerid, 1, 7);//玩家完成任务1的stage6 给他stage7的条件
		        	}
		        	else if(actorid == DonutClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_DONUT, 1);
						SendClientMessage(playerid, COLOR_FADE1, "甜甜圈店厨师 说: 唷 想吃什么?");
		        	}
		        	else if(actorid == BarClerk[pworld] || actorid == StripClerk[pworld] || actorid == ClubClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_BAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"吧台",
						""#TEXT_WHITE"品项\t价钱\n啤酒\t$150\n红酒\t$150\n伏特加\t$170\n龙舌兰\t$170\n威士忌\t$170\n白兰地\t$170\n汽水\t$80", "这个", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "服务生 说: 想喝什么呢?");
		        	}
		        	else if(actorid == Striper1[pworld] || actorid == Striper2[pworld])
					{
						if(GetGVarInt("StripDacing", actorid) == 0)
						{
							ShowPlayerDialog(playerid, DIALOG_STRIPER, DIALOG_STYLE_MSGBOX, ""#TEXT_PINK"脱衣舞娘", ""#TEXT_WHITE"是否撒$500给脱衣舞娘?", "是", "否");
							SetGVarInt("TargetStriper", actorid, playerid);
		        		}
		        	}
		        	else if(actorid == ShopClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_247, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"超市店员",
						""#TEXT_WHITE"种类\n食品\n日常用品\n营养品\n扩充背包", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "超市店员 说: 欢迎光临,请问需要什么?");
		        	}
		        	else if(actorid == AmmuClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_AMMU, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", ""#TEXT_WHITE"如果想要自保的话,你来对地方了\n射击练习\n购买枪枝\n购买护甲", "选择", "离开");
						UpdatePlayerMission(playerid, 13, 3);
						UpdatePlayerMission(playerid, 16, 3);
		        	}
		        	else if(actorid == ToolClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_EQ, EQSHOP_TOOL);
						SendClientMessage(playerid, COLOR_FADE1, "工具行老板 说: 欢迎,来这边想买什么?");

						UpdatePlayerMission(playerid, 6, 3);
						UpdatePlayerMission(playerid, 9, 3);
		        	}
		        	else if(actorid == MobileClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_MOBILE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"电子用品商店", ""#TEXT_WHITE"您好,欢迎光临\n电子用品\n家用电器", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "店员 说: 欢迎光临!");
		        	}
		        	else if(actorid == AcademyStaff[0] || actorid == AcademyStaff[1])
					{
					    static classstr[512];
					    format(classstr, sizeof(classstr), ""#TEXT_WHITE"你好,这里是理工学院\n教授机械、信息与研发等相关知识的课程都在这里开班\n"#TEXT_YELLOW"课程表:\n");
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n机械工程学: 8:00~8:50 | 13:00~13:50 | 19:00~19:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n信息学: 9:00~9:50 | 14:00~14:50 | 20:00~20:50 [102教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n材料学: 10:00~10:50 | 15:00~15:50 | 21:00~21:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n\n在开课时间内到教室座位按Y键即可坐下来开始听课",classstr);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"理工学院", classstr, "确定", "");
					}
					else if(actorid == AcademyStaff[2] || actorid == AcademyStaff[3])
					{
					    static classstr[512];
					    format(classstr, sizeof(classstr), ""#TEXT_WHITE"你好,这里是文学院\n教授洞察与研发等相关知识的课程都在这里开班\n"#TEXT_YELLOW"课程表:\n");
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n观察学: 8:00~8:50 | 13:00~13:50 | 19:00~19:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n监定学(** 观察学时数需达3小时方可修习): 9:00~9:50 | 14:00~14:50 | 20:00~20:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n\n在开课时间内到教室座位按Y键即可坐下来开始听课",classstr);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"文学学", classstr, "确定", "");
						UpdatePlayerMission(playerid, 15, 3);
					}
					else if(actorid == AcademyStaff[4] || actorid == AcademyStaff[5])
					{
					    static classstr[512];
					    format(classstr, sizeof(classstr), ""#TEXT_WHITE"你好,这里是医学院\n教授医学与研发等相关知识的课程都在这里开班\n"#TEXT_YELLOW"课程表:\n");
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n基础医学: 8:00~8:50 | 13:00~13:50 | 19:00~19:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n进阶医学(** 基础医学时数需达3小时方可修习): 9:00~9:50 | 14:00~14:50 | 20:00~20:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n基础药学: 10:00~10:50 | 15:00~15:50 | 21:00~21:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n进阶药学(** 基础药学时数需达3小时方可修习): 11:00~11:50 | 16:00~16:50 | 22:00~22:50 [101教室]",classstr);
					    format(classstr, sizeof(classstr), "%s"#TEXT_WHITE"\n\n在开课时间内到教室座位按Y键即可坐下来开始听课",classstr);
						ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"医学院", classstr, "确定", "");
					}
					else if(actorid == GymTrainer[0])
					{
					    ShowPlayerDialog(playerid, DIALOG_GYM_LS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"健身房", ""#TEXT_WHITE"像蝴蝶般舞动,像蜜蜂般螫刺.你不能击中任何你看不到的东西.\n学习拳击(需健身练习度达120)\n进行二头弯举[$250]每次举起消耗1点体力\n进行杠铃卧推[$600]每次举起消耗2点体力\n租借飞轮[$500]每骑一段距离消耗1点体力\n租借跑步机[$500]每跑一段距离消耗1点体力", "选择", "离开");
					    SetGVarInt("Gym", 0, playerid);
					    UpdatePlayerMission(playerid, 16, 7);
					}
					else if(actorid == GymTrainer[1])
					{
					    ShowPlayerDialog(playerid, DIALOG_GYM_SF, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"道馆", ""#TEXT_WHITE"没有正义的力量是暴戾,没有力量的正义是空谈\n学习空手道(需健身练习度达90)\n进行二头弯举[$250]每次举起消耗1点体力\n进行杠铃卧推[$600]每次举起消耗2点体力\n租借飞轮[$500]每骑一段距离消耗1点体力\n租借跑步机[$500]每跑一段距离消耗1点体力", "选择", "离开");
					    SetGVarInt("Gym", 1, playerid);
					    UpdatePlayerMission(playerid, 16, 7);
					}
	    			else if(actorid == GymTrainer[2])
					{
					    ShowPlayerDialog(playerid, DIALOG_GYM_LV, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"健身房", ""#TEXT_WHITE"一拳一心,最大限度地发挥自己的力量\n学习泰拳(需健身练习度达180)\n进行二头弯举[$250]每次举起消耗1点体力\n进行杠铃卧推[$600]每次举起消耗2点体力\n租借飞轮[$500]每骑一段距离消耗1点体力\n租借跑步机[$500]每跑一段距离消耗1点体力", "选择", "离开");
					    SetGVarInt("Gym", 2, playerid);
					    UpdatePlayerMission(playerid, 16, 7);
					}
					else if(actorid == GymTrainer[3])
					{
					    ShowPlayerDialog(playerid, DIALOG_GYM_BEACH, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"海滩健身器材", ""#TEXT_WHITE"?!也来健身的吗?\n进行二头弯举[$250]每次举起消耗1点体力\n进行杠铃卧推[$600]每次举起消耗2点体力\n租借飞轮[$500]每骑一段距离消耗1点体力", "选择", "离开");
					    SetGVarInt("Gym", 3, playerid);
					    UpdatePlayerMission(playerid, 16, 7);
					}
					else if(actorid == GymTrainer[4])
					{
					    ShowPlayerDialog(playerid, DIALOG_GYM_PRISON, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"监狱健身器材", ""#TEXT_WHITE"\n进行二头弯举[$250]每次举起消耗1点体力\n进行杠铃卧推[$600]每次举起消耗2点体力\n租借飞轮[$500]每骑一段距离消耗1点体力\n租借跑步机[$500]每跑一段距离消耗1点体力", "选择", "离开");
					    SetGVarInt("Gym", 4, playerid);
					}
					else if(actorid == LSMCar || actorid == SFMCar)
					{
					    if(RecordData[playerid][prMSimeon] < 10)
				        {
				            return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"港口俄国佬", ""#TEXT_WHITE"你迷路了吗?\n我不是本地人也没办法告诉你怎么走", "...", "");
		                }
		                else
		                {
							ShowPlayerDialog(playerid, DIALOG_MCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"走私货港", ""#TEXT_WHITE"保持低调,海外的大门永远都为你敞开着\n交易列表", "选择", "离开");
						}
		        	}
		        	else if(actorid == LSPDStaff || actorid == SFPDStaff || actorid == LVPDStaff1 || actorid == LVPDStaff2)
					{
					    if(PlayerData[playerid][pDepartment] == DEPT_POLICE)
					    {
					        ShowPlayerDialog(playerid, DIALOG_PD_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"警局", ""#TEXT_WHITE"同仁你好\n值勤\n目前犯罪\n枪械执照审理\n服务菜单\n储物间", "选择", "离开");
					    }
					    else ShowPlayerDialog(playerid, DIALOG_PD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"警局", ""#TEXT_WHITE"需要帮忙吗?\n报案\n寻回失窃车\n申请枪械执照\n申请加入警队", "选择", "离开");
					}
					else if(actorid == PrisonStaff)
					{
					    if(PlayerData[playerid][pJail] > 0) ShowPlayerJailMenu(playerid);
						else if(PlayerData[playerid][pDepartment] == DEPT_POLICE)
					    {
					        ShowPlayerDialog(playerid, DIALOG_PRISON, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"监狱", ""#TEXT_WHITE"同仁你好\n值勤\n囚犯名单\n贩卖部\n储物间", "选择", "离开");
					    }
		        	}
		        	else if(actorid == HPStaff[0] || actorid == HPStaff[1] || actorid == HPStaff[2])
					{
					    if(PlayerData[playerid][pDepartment] == DEPT_MEDIC)
					    {
					        format(string, sizeof(string), ""#TEXT_WHITE"工作辛苦了\t\n上/下班\n预约病患清单\n运送药品货物\t还须%d秒\n合成药品\n服务菜单\n储物间", GetGVarInt("MedicMW"));
					        ShowPlayerDialog(playerid, DIALOG_HP_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"医院", string, "选择", "离开");
					    }
					    else ShowPlayerDialog(playerid, DIALOG_HP, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"医院", ""#TEXT_WHITE"你好,请选择需要的服务\n挂号治疗\n购买药品\n申请加入医疗部门", "选择", "离开");
					}
					else if(actorid == TrevorNPC)
					{
					    if(PlayerData[playerid][pLevel] < 25/* && RecordData[playerid][prKill] < 20*/)
					    {
					        ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"崔佛", ""#TEXT_WHITE"有点礼貌把视线移开\n你已经冒犯到我了", "...", "");
					    }
						else
						{
	                        ShowPlayerDialog(playerid, DIALOG_TREVOR_QUEST, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"崔佛", ""#TEXT_WHITE"噢!是你\n上次干得还不错", "...", "");
	                        SetGVarInt("TalkProgress", 10, playerid);
						}
		        	}
		        	else if(actorid == BincoClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_SKIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"服饰店员",
						""#TEXT_WHITE"选择要选购的造型种类\n平价\n休闲\n流行\n街头\n乡村", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "服饰店员 说: 欢迎!试衣间就在右手边");
						SetGVarInt("ClothesShop", CS_BINCO, playerid);
						UpdatePlayerMission(playerid, 3, 4);
		        	}
		        	else if(actorid == ZIPClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_SKIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"服饰店员",
						""#TEXT_WHITE"选择要选购的造型种类\n平价\n休闲\n流行\n街头\n乡村\n商业\n西装", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "服饰店员 说: 欢迎!试衣间就在右手边");
						SetGVarInt("ClothesShop", CS_ZIP, playerid);
						UpdatePlayerMission(playerid, 3, 4);
		        	}
		        	else if(actorid == VictimClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_SKIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"服饰店员",
						""#TEXT_WHITE"选择要选购的造型种类\n平价\n休闲\n流行\n街头\n乡村\n商业\n西装", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "服饰店员 说: 欢迎!试衣间就在右手边");
						SetGVarInt("ClothesShop", CS_VICTIM, playerid);
						UpdatePlayerMission(playerid, 3, 4);
		        	}
		        	else if(actorid == DDSClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_SKIN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"服饰店员",
						""#TEXT_WHITE"选择要选购的造型种类\n平价\n休闲\n流行\n街头\n乡村\n商业\n西装", "选择", "离开");
						SendClientMessage(playerid, COLOR_FADE1, "服饰店员 说: 欢迎!试衣间就在右手边");
						SetGVarInt("ClothesShop", CS_DDS, playerid);
						UpdatePlayerMission(playerid, 3, 4);
		        	}
		        	else if(actorid == CityHallClerk1)
					{
					    static gpsstr[1024];
						gpsstr[0] = EOS;
						for(i = k = 0, j = MAX_GPS; i < j; i++)
						{
						    if(GPSList[i][gpsCreated] == false){continue;}
							if(GPSList[i][gpsType] == GPS_JOB)
							{
								format(gpsstr, sizeof(gpsstr), "%s%s\n", gpsstr, GPSList[i][gpsName]);
								SetGVarInt("DListID", i, k*1000+playerid);
								k++;
							}
						}
						if(k == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "工作帮助", ""#TEXT_WHITE"没有任何可用的工作地点", "确认", "");}
						format(gpsstr, sizeof(gpsstr), "您好,需要工作地点指引的话,我可以帮助您\n%s", gpsstr);
						ShowPlayerDialog(playerid, DIALOG_GPS_NEAR2, DIALOG_STYLE_TABLIST_HEADERS, "工作帮助", gpsstr, "选择", "关闭");
		        	}
		        	else if(actorid == CityHallClerk2)
					{
					    if(PlayerData[playerid][pDepartment] == DEPT_ARMY || PlayerData[playerid][pDepartment] == DEPT_POLICE)
						{
							return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"企业帮助", ""#TEXT_WHITE"不好意思,目前军警部门的成员无法创立或加入企业喔", "确认", "");
						}
						if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) ShowPlayerDialog(playerid, DIALOG_CITYHALL_COMPANY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"企业帮助", ""#TEXT_WHITE"有关创业或加入企业相关事项欢迎找我\n企业列表\n创立企业", "选择", "离开");
					    else ShowPlayerDialog(playerid, DIALOG_CITYHALL_COMPANY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"企业帮助", ""#TEXT_WHITE"事业还顺利吗?\n企业列表", "选择", "离开");
					}
					else if(actorid == GovStaff)
					{
					    if(PlayerData[playerid][pDepartment] == DEPT_GOVERNMENT)
						{
							ShowPlayerDialog(playerid, DIALOG_CITYHALL_MEMBER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"州政府", ""#TEXT_WHITE"你好\n调整税与津贴\n管理各部门\n管理通缉规则\n管理入狱罚则\n发布公告\n储物间", "确认", "");
						}
					    else ShowPlayerDialog(playerid, DIALOG_CITYHALL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"州政府", ""#TEXT_WHITE"你好\n查询税与津贴\n查询目前通缉标准\n查询入狱罚则\n申请加入政府部门", "选择", "离开");
					}
					else if(actorid == LSDockClerk)
					{
					    ShowPlayerDialog(playerid, DIALOG_GOODS_SELL1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"出货口",""#TEXT_WHITE"\n贩卖货物", "选择", "离开");
					    SetGVarInt("GBNPC", 0, playerid);
		        	}
		        	else if(actorid == SFDockClerk)
					{
					    ShowPlayerDialog(playerid, DIALOG_GOODS_SELL1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"出货口",""#TEXT_WHITE"\n贩卖货物", "选择", "离开");
					    SetGVarInt("GBNPC", 1, playerid);
		        	}
		        	else if(actorid == LVDockClerk)
					{
					    ShowPlayerDialog(playerid, DIALOG_GOODS_SELL1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_SKYBLUE"出货口",""#TEXT_WHITE"\n贩卖货物", "选择", "离开");
					    SetGVarInt("GBNPC", 2, playerid);
		        	}
		        	else if(actorid == RCClerk)
					{
						ShowPlayerShopList(playerid, ITEM_EQ, EQSHOP_RC);
		        	}
		        	else if(actorid == SexClerk[pworld])
					{
						ShowPlayerShopList(playerid, ITEM_USE, USESHOP_SEX);
		        	}
					else if(actorid == FNTClerk[pworld])
					{
						ShowPlayerDialog(playerid, DIALOG_SHOP_FNT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEYELLOW"家具店员",
						""#TEXT_WHITE"您好,请选择家具种类\n桌子、椅子与沙发\n床与柜子\n灯具\n家用电器\n其他", "选择", "关闭");
		        	}
		        }
		    }
	    }
	    if(GetGVarInt("GFBuff", playerid) > 0)//家族帮会主动技
	    {
	        new gfbuff = GetGVarInt("GFBuff", playerid);
	        if(gfbuff > 1) SetGVarInt("GFBuff", gfbuff-1, playerid);
	        else
	        {
	            new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
	            if(GangData[gangid][gBoss] == PlayerData[playerid][pID])
	            {
		            if(PlayerData[playerid][pStamina] < 5.0)
		            {
		                SendClientMessage(playerid, COLOR_WHITE, "** 因为体力不足,教父主动技的效果结束了");
		                DeleteGVar("GFBuff", playerid);
		            }
		            else
		            {
		            	SetGVarInt("GFBuff", 10, playerid);
		            	PlayerData[playerid][pStamina] -= 5.0;
		            	SendClientMessage(playerid, COLOR_FADEGREEN, "** 你因为发动教父主动技的关系,消耗了5点体力");
		            	GetPlayerPos(playerid, px, py, pz);
		            	ForEachPlayer(p)
		            	{
		            	    if(PlayerData[playerid][pGang] != PlayerData[p][pGang]) continue;
		            	    if(IsPlayerInRangeOfPointEx(p, 30.0, px, py, pz))
		            	    {
		            	        SendClientMessage(playerid, COLOR_FADEGREEN, "** 因为首领的发动的增益,你恢复了10点生命值");
		            	        GiveHealth(p, 10.0);
		            	    }
		            	}
		            }
		        }
		        else
		        {
		            SendClientMessage(playerid, COLOR_WHITE, "** 你因为不再是帮会首领的关系,教父主动技的效果结束了");
		            DeleteGVar("GFBuff", playerid);
		        }
		    }
	    }

	    //让吃东西是逐渐恢复血量
	    if(GetGVarFloat("HPDelayed", playerid) > 0.0)
	    {
	        new Float:delayed = GetGVarFloat("HPDelayed", playerid);
	        if(delayed < 10.0)
	        {
	            GiveHealth(playerid, delayed);
	            DeleteGVar("HPDelayed", playerid);
	        }
	        else
	        {
		        GiveHealth(playerid, 10.0);
		        SetGVarFloat("HPDelayed", delayed-10.0, playerid);
		        if(GetPlayerHealth_Fix(playerid) >= PlayerData[playerid][pMaxHealth] + 100.0)
		        {
		            DeleteGVar("HPDelayed", playerid);
		        }
		    }
	    }
	    if(GetGVarInt("Healing", playerid) > 0)
	    {
	        new timer = GetGVarInt("Healing", playerid),
				healplayer = GetGVarInt("HealPlayer", playerid);
			GetPlayerPos(healplayer, px, py, pz);
			if(IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz))
	        {
				if(timer == 1) Heal(playerid);
				else
				{
				    GameTextForPlayer(playerid, "~w~治疗...", 1000, 3);
					GameTextForPlayer(healplayer, "~w~治疗...", 1000, 3);
					SetGVarInt("Healing", timer-1, playerid);
					ApplyAnimationEx(playerid, "bomber", "bom_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
				}
			}
			else
			{
			    StopHealing(playerid);
			    SendClientMessage(playerid, COLOR_WHITE, "你距离治疗目标太远,治疗中断");
			}
		}
	    if(PlayerData[playerid][pWanted] > 0 && GetGVarInt("Arrested", playerid) == 0)
	    {
    		if(PlayerData[playerid][pWantedCount] == 0) PlayerWantedDecrease(playerid);
			else PlayerData[playerid][pWantedCount] --;
		}
	    if(ConfigData[playerid][cfHud6] == 0)
	    {
			TextDrawShowForPlayer(playerid, YMD);
			TextDrawShowForPlayer(playerid, HMS);
		}
		if(GetGVarInt("pArena", playerid) > 0)
		{
		    new arena = GetGVarInt("pArena", playerid);
		    if(GetGVarInt("ArenaT", arena) > 0)
		    {
			    if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
			    {
			        switch(arena)
			        {
			            case ARENA_VEHICLE:
			            {
			                format(string, sizeof(string), "~w~时间: %d\n死亡: %d", GetGVarInt("ArenaT", arena), GetGVarInt("pArenaDeath", playerid));
							GameTextForPlayer(playerid, string, 1000, 4);
			            }
			            case ARENA_PLAYER1, ARENA_PLAYER2:
			            {
			                format(string, sizeof(string), "~w~时间: %d\n分数: %d/%d", GetGVarInt("ArenaT", arena), GetGVarInt("pArenaScore", playerid), GetGVarInt("ArenaHighest", arena));
							GameTextForPlayer(playerid, string, 1000, 4);
			            }
			        }
			    }
			    else
			    {
			        format(string, sizeof(string), "~w~%d", GetGVarInt("ArenaT", arena));
					GameTextForPlayer(playerid, string, 1000, 4);
			    }
			}
		}
		if(GetGVarInt("Eventing", playerid) == 1)
		{
		    new eventid = GetGVarInt("EventID", playerid);
		    if(Event[eventid][evStatus] == STATUS_STARTED)
		    {
		        if(GetGVarInt("EvHealing", playerid) > 0)
				{
				    new htimer = GetGVarInt("EvHealing", playerid);
				    if(htimer == 1)
				    {
						new giveplayerid = GetGVarInt("EvHealPlayer", playerid);
					    if(GetGVarInt("EvWounded", giveplayerid) == 1)
					    {
							DeleteGVar("EvHealPlayer", playerid);
							DeleteGVar("EvHealing", playerid);
							DeleteGVar("EvWounded", giveplayerid);
							SetPlayerHealth_Fix(giveplayerid, 50.0);
			  				ClearAnimationsEx(playerid);
			  				ClearAnimationsEx(giveplayerid);
							format(string, sizeof(string), "** 你被队友 %s 治疗了", PlayerData[playerid][pName]);
							SendClientMessage(giveplayerid, COLOR_WHITE, string);
			  			}
			  		}
		  			else
		  			{
		  			    SetGVarInt("EvHealing", htimer-1, playerid);
		  			    format(string, sizeof(string), "~w~%d", htimer-1);
		  			    GameTextForPlayer(playerid, string, 1000, 4);
		  			}
	  			}
	  			else
	  			{
	  			    if(GetGVarInt("EvWounded", playerid) == 1)
					{
						ApplyAnimationEx(playerid, "CRACK", "crckidle2", 4.1, 1, 0, 0, 1, 0, 1);
					}
				    switch(Event[eventid][evType])
				    {
				        case EVENT_VS:
						{
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n分数: %d/%d", Event[eventid][evTimer], GetGVarInt("EventScore", playerid), GetGVarInt("EventHScore", eventid));
							else format(string, sizeof(string), "~w~分数: %d/%d", GetGVarInt("EventScore", playerid), GetGVarInt("EventHScore", eventid));
							GameTextForPlayer(playerid, string, 1000, 4);
						}
						case EVENT_SVS:
						{
						    new teamid = GetGVarInt("EventTeam", playerid);
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n分数: %d/%d", Event[eventid][evTimer], GetGVarInt("TeamScore", teamid), GetGVarInt("EventHScore", eventid));
							else format(string, sizeof(string), "~w~分数: %d/%d", GetGVarInt("TeamScore", teamid), GetGVarInt("EventHScore", eventid));
							GameTextForPlayer(playerid, string, 1000, 4);
						}
				        case EVENT_TVS:
						{
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n分数:~b~ %d~w~:~r~%d", Event[eventid][evTimer], GetGVarInt("BlueScore", eventid), GetGVarInt("RedScore", eventid));
							else format(string, sizeof(string), "~w~分数:~b~ %d~w~:"#TEXT_RED"%d", GetGVarInt("BlueScore", eventid), GetGVarInt("RedScore", eventid));
							GameTextForPlayer(playerid, string, 1000, 4);
						}
						case EVENT_TDM:
						{
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n人数:~b~ %d~w~:~r~%d", Event[eventid][evTimer], GetGVarInt("BluePlayers", eventid), GetGVarInt("RedPlayers", eventid));
							else format(string, sizeof(string), "~w~人数:~b~ %d"#TEXT_WHITE":"#TEXT_RED"%d", GetGVarInt("BluePlayers", eventid), GetGVarInt("RedPlayers", eventid));
							GameTextForPlayer(playerid, string, 1000, 4);
						}
						case EVENT_DM:
						{
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n人数: %d", Event[eventid][evTimer], Event[eventid][evPlayers]);
							else format(string, sizeof(string), "~w~人数: %d", Event[eventid][evPlayers]);
							GameTextForPlayer(playerid, string, 1000, 4);
						}
						case EVENT_SDM:
						{
						    new teamid = GetGVarInt("EventTeam", playerid);
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n人数:~b~ %d~w~/%d"
							, Event[eventid][evTimer], GetGVarInt("EventTPlayers", teamid), Event[eventid][evPlayers]);
							else format(string, sizeof(string), "~w~人数:~b~ %d~w~/%d", GetGVarInt("EventTPlayers", teamid), Event[eventid][evPlayers]);
							GameTextForPlayer(playerid, string, 1000, 4);
						}
						case EVENT_SURVIVE:
						{
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n人数: %d", Event[eventid][evTimer], Event[eventid][evPlayers]);
							else format(string, sizeof(string), "~w~人数: %d", Event[eventid][evPlayers]);
							GameTextForPlayer(playerid, string, 1000, 4);
							if(GetGVarInt("EventZoneDB", playerid) == 3)
							{
							    GetPlayerPos(playerid, px, py, pz);
							    if(!(px > GetGVarFloat("EventZMinX", eventid) && px < GetGVarFloat("EventZMaxX", eventid) && py > GetGVarFloat("EventZMinY", eventid) && py < GetGVarFloat("EventZMaxY", eventid)))
							    {
							        GiveHealth(playerid, -5.0);
							    }//在活动范围外会持续减少生命
							}
							else SetGVarInt("EventZoneDB", GetGVarInt("EventZoneDB", playerid)+1, playerid);
						}
						case EVENT_SSUR:
						{
						    new teamid = GetGVarInt("EventTeam", playerid);
						    if(Event[eventid][evTimer] > 0) format(string, sizeof(string), "~w~%d\n人数:~b~ %d~w~/%d", Event[eventid][evTimer], GetGVarInt("EventTPlayers", teamid), Event[eventid][evPlayers]);
							else format(string, sizeof(string), "~w~人数:~b~ %d~w~/%d", GetGVarInt("EventTPlayers", teamid), Event[eventid][evPlayers]);
							GameTextForPlayer(playerid, string, 1000, 4);
							if(GetGVarInt("EventZoneDB", playerid) == 3)
							{
							    GetPlayerPos(playerid, px, py, pz);
							    if(!(px > GetGVarFloat("EventZMinX", eventid) && px < GetGVarFloat("EventZMaxX", eventid) && py > GetGVarFloat("EventZMinY", eventid) && py < GetGVarFloat("EventZMaxY", eventid)))
							    {
							        GiveHealth(playerid, -5.0);
							    }//在活动范围外会持续减少生命
							}
							else SetGVarInt("EventZoneDB", GetGVarInt("EventZoneDB", playerid)+1, playerid);
						}
				    }
				}
			}
			else if(Event[eventid][evStatus] == STATUS_WAITING)
			{
			    format(string, sizeof(string), "~w~%d", Event[eventid][evTimer]);
				GameTextForPlayer(playerid, string, 1000, 4);
			}
		}
		if(PlayerData[playerid][pBountyTime] > 0)
		{
		    PlayerData[playerid][pBountyTime] --;
		    if(PlayerData[playerid][pBountyTime] == 0)
		    {
		        SendClientMessage(playerid, COLOR_WHITE, "** 你已经逃离你的悬赏了");
		        format(string, sizeof(string), "<<悬赏>> %s 的悬赏时间已经截止,赏金已经归零", PlayerData[playerid][pName]);
		        SendBountyMessage(COLOR_WHITE, string);
		        ClearPlayerBounty(playerid);
		    }
		}
		if(GetGVarInt("PlayerTraceMW", playerid) == 1)
		{
		    PlayerTraceMatWar(playerid, GetGVarInt("PlayerTraceMWID", playerid));
		}
		if(GetGVarInt("PTazzed", playerid) > 0)
		{
		    new tztimer = GetGVarInt("PTazzed", playerid);
		    if(tztimer == 1)
		    {
		        if(GetGVarInt("Cuffed", playerid) == 0) TogglePlayerControllableEx(playerid, true);
			    ApplyAnimationEx(playerid, "Attractors", "Stepsit_out", 4.1, 0, 0, 0, 0, 0, 0);
		        DeleteGVar("PTazzed", playerid);
		        GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		        format(string, sizeof(string), "** %s 从麻痹状态恢复了 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    }
		    else SetGVarInt("PTazzed", tztimer-1, playerid);
		}
		if(GetGVarInt("PoliceTrace", playerid) == 1)
		{
		    new pttimer = GetGVarInt("PoliceTraceTimer", playerid);
		    if(pttimer == 0)
		    {
		    	PlayerTracePlayer(playerid, GetGVarInt("PoliceTraceID", playerid));
		    }
		    else SetGVarInt("PoliceTraceTimer", pttimer-1, playerid);
		}
	    if(GetGVarInt("PhoneRing", playerid) != 0)
		{
		    new pring = GetGVarInt("PhoneRing", playerid),
				caller = GetGVarInt("PhoneCaller", playerid),
				rung = GetGVarInt("PhoneRung", playerid);
		    if(caller == -1 || GetGVarInt("Logged", caller) == 0 || GetGVarInt("Calling", caller) != playerid)
			{
				PhoneHangUp(playerid);
			}
		    else
		    {
				if(pring > 1) SetGVarInt("PhoneRing", pring-1, playerid);
			    else if(pring == 1)
				{
					if(rung >= 15)
					{
						PhoneHangUp(playerid);
						format(string, sizeof(string), ""#TEXT_WHITE"拨号失败,%s 并未接通...", PlayerData[playerid][pName]);
						SendClientMessage(playerid, COLOR_WHITE, string);
						SendClientMessage(caller, COLOR_LIGHTRED, string);
					}
					else
					{
						SetGVarInt("PhoneRing", 6, playerid);
						SetGVarInt("PhoneRung", rung+1, playerid);
						if(ConfigData[playerid][cfPhoneMute] == 0) PlayerPlayGlobalSound(playerid, 20600);
						PlayerPlaySound(caller, 16001, 0.0, 0.0, 0.0);

					}
				}
			}
		}
		if(PlayerData[playerid][pJail] > 0)
		{
		    if(PlayerData[playerid][pJail] == 1) SetPlayerOutJail(playerid);
		    else PlayerData[playerid][pJail] --;
		    if(GetGVarInt("JailQK", playerid) > 0)
		    {
		    	SetGVarInt("JailQK", GetGVarInt("JailQK", playerid)-1, playerid);
		    }
		}
		if(GetGVarInt("CloneDmgTxt", playerid) > 0)
		{
		    SetGVarInt("CloneDmgTxt", GetGVarInt("CloneDmgTxt", playerid)-1, playerid);
		}
		if(GetGVarInt("PlayerAmlAttCD", playerid) > 0)
		{
		    SetGVarInt("PlayerAmlAttCD", GetGVarInt("PlayerAmlAttCD", playerid)-1, playerid);
		}
		if(GetGVarInt("VehInDCount", playerid) > 0)
		{
		    new vidcount = GetGVarInt("VehInDCount", playerid), vidveh = GetGVarInt("VehInDVeh", playerid);
		    if(vidcount == 1)
		    {
		        new Float:vehX = GetGVarFloat("VehInDX", playerid),
		            Float:vehY = GetGVarFloat("VehInDY", playerid),
		            Float:vehZ = GetGVarFloat("VehInDZ", playerid),
		            Float:vehA = GetGVarFloat("VehInDA", playerid);
		        SetVehiclePos(vidveh, vehX, vehY, vehZ);
			    SetVehicleZAngle(vidveh, vehA);
			    SetGVarInt("VehInDCount", 0, playerid);

			    SetGVarInt("GPS4", 1, playerid);
	    		SetGVarFloat("GPSVehX", vehX, playerid);
			    SetGVarFloat("GPSVehY", vehY, playerid);
			    SetGVarFloat("GPSVehZ", vehZ, playerid);
	    		SetPlayerMapIcon(playerid, 96, vehX, vehY, vehZ, 0, COLOR_GRAD1, MAPICON_GLOBAL_CHECKPOINT);
		    }
		    else SetGVarInt("VehInDCount", vidcount-1, playerid);
		}
		if(GetGVarInt("VehSvDCount", playerid) > 0)
		{
		    new svcount = GetGVarInt("VehSvDCount", playerid),
				svtype = GetGVarInt("VehSvDVeh", playerid), svveh;
		    if(svcount == 1)
		    {
		        new Float:vehX = GetGVarFloat("VehSvDX", playerid),
		            Float:vehY = GetGVarFloat("VehSvDY", playerid),
		            Float:vehZ = GetGVarFloat("VehSvDZ", playerid),
		            Float:vehA = GetGVarFloat("VehSvDA", playerid);
				switch(svtype)
				{
					case VSV_EMMET:
					{
					    svveh = CreateMissionVehicle(482, vehX, vehY, vehZ, vehA, -1, -1, VTYPE_SERVICE, 0);
					    switch(random(5))
					    {
					    	case 0: GiveVehicleItem(svveh, ITEM_WEAPON, 24, 100);
					    	case 1: GiveVehicleItem(svveh, ITEM_WEAPON, 25, 100);
					    	case 2: GiveVehicleItem(svveh, ITEM_WEAPON, 28, 300);
					    	case 3: GiveVehicleItem(svveh, ITEM_WEAPON, 29, 240);
					    	case 4: GiveVehicleItem(svveh, ITEM_WEAPON, 30, 180);
					    }
					    SendClientMessage(playerid, COLOR_WHITE, "** 装有武器的"#TEXT_FADEYELLOW"货车"#TEXT_WHITE"已经送达了,上去打开储物空间已领出车上的武器");
					}
				}
		        SetVehiclePos(svveh, vehX, vehY, vehZ);
			    SetVehicleZAngle(svveh, vehA);
			    SetGVarInt("VehSvDCount", 0, playerid);

			    SetGVarInt("GPS4", 1, playerid);
	    		SetGVarFloat("GPSVehX", vehX, playerid);
			    SetGVarFloat("GPSVehY", vehY, playerid);
			    SetGVarFloat("GPSVehZ", vehZ, playerid);
	    		SetPlayerMapIcon(playerid, 96, vehX, vehY, vehZ, 0, COLOR_FADEYELLOW, MAPICON_GLOBAL_CHECKPOINT);
		    }
		    else SetGVarInt("VehSvDCount", svcount-1, playerid);
		}
	    if(GetGVarInt("MTDHide", playerid) > 0)
	    {
	        new mtdh = GetGVarInt("MTDHide", playerid);
			if(mtdh > 1) SetGVarInt("MTDHide", mtdh-1, playerid);
	        else if(mtdh == 1)
			{
				PlayerTextDrawHide(playerid, MoneyChange[playerid]);
				SetGVarInt("MTDHide", 0, playerid);
			}
	    }
	    if(GetGVarInt("AttackingTurf", playerid) > 0)
	    {
	        new atkt = GetGVarInt("AttackingTurf", playerid),
				gzid = GetGVarInt("AtkTurfID", playerid);
			if(atkt > 1) SetGVarInt("AttackingTurf", atkt-1, playerid);
	        else if(atkt == 1)
			{
			    if(gzid == GetPlayerGangZone(playerid))
			    {
			        if(GangZone[gzid][gzStatus] == GZ_UNDERATK)
			        {
						GangZone[gzid][gzDefense] -= 15;
						SetGVarInt("AttackingTurf", 30, playerid);
					}
					else
					{
					    SendClientMessage(playerid, COLOR_YELLOW, "** 地盘战已经结束");
					    DeleteGVar("AttackingTurf", playerid);
					    HidePlayerTurfInfo(playerid);
					}
				}
				else
				{
				    SendClientMessage(playerid, COLOR_YELLOW, "** 因为离开地盘范围,你已经脱离了地盘战");
				    DeleteGVar("AttackingTurf", playerid);
				    HidePlayerTurfInfo(playerid);
				}
			}
			if(GetPausedTime(playerid) > 10)
			{
				SendClientMessage(playerid, COLOR_YELLOW, "** 因为挂机时间超过10秒,你已经脱离了地盘战,10分钟内无法参与地盘战");
				PlayerData[playerid][pCantJoin] = 600;

				DeleteGVar("AttackingTurf", playerid);
				HidePlayerTurfInfo(playerid);
			}
	    }
	    if(GetGVarInt("CheckingTurf", playerid) == 1)
	    {
	        UpdateRightTD(playerid);
	    }

        if(GetGVarInt("Partner", playerid) != -1)
        {
			new partid = GetGVarInt("Partner", playerid);
			if(IsPlayerInAnyVehicle(partid))
			{
			    new vehicleid = GetPlayerVehicleID(partid);
				GetVehiclePos(vehicleid, px, py, pz);
			}
			else {GetPlayerPos(partid, px, py, pz);}
			if(!IsPlayerInRangeOfPointEx(playerid, 20.0, px, py, pz))
			{
				SetGVarInt("Partner", -1, playerid);
				format(string, sizeof(string), " ** "#TEXT_RED"注意: "#TEXT_WHITE"你与你的伙伴"#TEXT_LIGHTGREEN"%s"#TEXT_WHITE"太远了,已经无法分工共享成果,但你依旧能自己完成剩下的工作", playername);
				SendClientMessage(partid, COLOR_WHITE, string);
			}
		}
		if(GetGVarInt("SpeVehCD", playerid) > 0)
		{
			SetGVarInt("SpeVehCD", GetGVarInt("SpeVehCD", playerid)-1, playerid);
	    }

        //QTE
		if(GetGVarInt("PlayerQTEing", playerid) == 1)
		{
	        if(GetGVarInt("PlayerQTETime", playerid) == 0)
			{
				FinishQTE(playerid);
				printf("PlayerQTETime = 0");
			}
	        else if(GetGVarInt("PlayerQTETime", playerid) > 0)
	        {
	            SetGVarInt("PlayerQTETime", GetGVarInt("PlayerQTETime", playerid)-1, playerid);
	            new maxq = GetGVarInt("PlayerQTENum", playerid), count, qtelist[144];
	            for(i = 0; i < maxq; i++)//依顺序把QTE列出来
				{
				    switch(GetGVarInt("PlayerQTE", i*1000+playerid))
					{
					    case 0: continue;
						case 1: {format(qtelist, sizeof(qtelist), "%s~<~", qtelist); count++;}
						case 2: {format(qtelist, sizeof(qtelist), "%s~>~", qtelist); count++;}
						case 3: {format(qtelist, sizeof(qtelist), "%s~u~", qtelist); count++;}
						case 4:	{format(qtelist, sizeof(qtelist), "%s~d~", qtelist); count++;}
					}
				}
				PlayerTextDrawSetString(playerid,QTEList[playerid],qtelist);
				format(string, sizeof(string), "%d 秒", GetGVarInt("PlayerQTETime", playerid));
	            PlayerTextDrawSetString(playerid,QTETime[playerid], string);
				format(string, sizeof(string), "%d/%d 剩余", count, maxq);
				PlayerTextDrawSetString(playerid,QTECount[playerid],string);
			}
		}
		//LV up
		if(PlayerData[playerid][pExp] >= ExpList[PlayerData[playerid][pLevel]+1][expAmount] && PlayerData[playerid][pLevel] < 119)
		{
		    PlayerLevelUp(playerid);
		}
		//Limit
		if(LimitData[playerid][plEatTime] > 300)
		{
		    LimitData[playerid][plEatTime] = 0;
		    if(LimitData[playerid][plEat] > 0) {LimitData[playerid][plEat] --;}
		}
		else
		{
			LimitData[playerid][plEatTime] ++;
		}
		if(LimitData[playerid][plCDSneak] > 0) {LimitData[playerid][plCDSneak] --;}
		if(LimitData[playerid][plCDTimeStop] > 0) {LimitData[playerid][plCDTimeStop] --;}
		if(LimitData[playerid][plCDCaptain] > 0) {LimitData[playerid][plCDCaptain] --;}
		if(LimitData[playerid][plCDOG] > 0) {LimitData[playerid][plCDOG] --;}
		if(LimitData[playerid][plCDGF] > 0) {LimitData[playerid][plCDGF] --;}
		if(LimitData[playerid][plCDBless] > 0) {LimitData[playerid][plCDBless] --;}
		if(LimitData[playerid][plCDTazz] > 0) {LimitData[playerid][plCDTazz] --;}
		if(LimitData[playerid][plMSweet] > 0) {LimitData[playerid][plMSweet] --;}
		if(LimitData[playerid][plMSimeon] > 0) {LimitData[playerid][plMSimeon] --;}
		if(LimitData[playerid][plMTrevor] > 0) {LimitData[playerid][plMTrevor] --;}
		if(LimitData[playerid][plMCesar] > 0) {LimitData[playerid][plMCesar] --;}
		if(LimitData[playerid][plMEmmet] > 0) {LimitData[playerid][plMEmmet] --;}
		if(LimitData[playerid][plHEmmet] > 0) {LimitData[playerid][plHEmmet] --;}
		if(LimitData[playerid][plMToreno] > 0) {LimitData[playerid][plMToreno] --;}
		if(LimitData[playerid][plMWoozie] > 0) {LimitData[playerid][plMWoozie] --;}
		if(LimitData[playerid][plJobFD] > 0) {LimitData[playerid][plJobFD] --;}
		if(LimitData[playerid][plCDBounty] > 0) {LimitData[playerid][plCDBounty] --;}
		//GPS
		if(GetGVarInt("GPS1", playerid) == 1)
		{
		    new plantid = GetGVarInt("GPSPlant", playerid);
		    if(IsPlayerInRangeOfPointEx(playerid, 10.0, PlantData[plantid][ptX], PlantData[plantid][ptY], PlantData[plantid][ptZ]))
			{
				RemovePlayerMapIcon(playerid, 98);
			    DeleteGVar("GPSPlant", playerid);
			    DeleteGVar("GPS1", playerid);
			    SendClientMessage(playerid, COLOR_WHITE, "到达目的地");
			}
		}
		if(GetGVarInt("GPS2", playerid) == 1)
		{
		    new Float:gpsx = GetGVarFloat("GPSX", playerid), Float:gpsy = GetGVarFloat("GPSY", playerid), Float:gpsz = GetGVarFloat("GPSZ", playerid),
				Float:distance = GetPlayerDistanceFromPointEx(playerid, gpsx, gpsy, gpsz);
			if(PlayerHaveItem(playerid, 2, 33) && GetPlayerInterior(playerid) == 0)
			{
			    format(string, sizeof(string), "GPS:%d米", floatround(distance));
			    PlayerTextDrawSetString(playerid, GPSTD[playerid], string);
			    PlayerTextDrawShow(playerid, GPSTD[playerid]);
			}
			if(distance < 15.0)
			{
				DisablePlayerGPS(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "到达目的地");
			}
		}
		else{PlayerTextDrawHide(playerid, GPSTD[playerid]);}

		if(GetGVarInt("GPS3", playerid) == 1)
		{
		    new Float:dx = GetGVarFloat("DeathX", playerid), Float:dy = GetGVarFloat("DeathY", playerid), Float:dz = GetGVarFloat("DeathZ", playerid),
				Float:ddis = GetPlayerDistanceFromPointEx(playerid, dx, dy, dz),
				dgtimer = GetGVarInt("DeathGPSTimer", playerid);
			if(ddis < 25.0 || dgtimer == 0)
			{
				RemovePlayerMapIcon(playerid, 97);
				DeleteGVar("DeathX", playerid);
    			DeleteGVar("DeathY", playerid);
    			DeleteGVar("DeathZ", playerid);
				DeleteGVar("GPS3", playerid);
			}
			else SetGVarInt("DeathGPSTimer", dgtimer-1, playerid);
		}

		if(GetGVarInt("GPS4", playerid) == 1)
		{
		    new Float:bx = GetGVarFloat("GPSVehX", playerid), Float:by = GetGVarFloat("GPSVehY", playerid), Float:bz = GetGVarFloat("GPSVehZ", playerid),
				Float:bdis = GetPlayerDistanceFromPointEx(playerid, bx, by, bz);
			if(bdis < 5.0)
			{
				RemovePlayerMapIcon(playerid, 96);
				DeleteGVar("GPSVehX", playerid);
    			DeleteGVar("GPSVehY", playerid);
    			DeleteGVar("GPSVehZ", playerid);
				DeleteGVar("GPS4", playerid);
			}
		}
		if(GetGVarInt("GPS5", playerid) > 0)
		{
		    new Float:gpsx = GetGVarFloat("GPSMX", playerid), Float:gpsy = GetGVarFloat("GPSMY", playerid), Float:gpsz = GetGVarFloat("GPSMZ", playerid),
				Float:distance = GetPlayerDistanceFromPointEx(playerid, gpsx, gpsy, gpsz);
			if(distance < 6.0)
			{
			    OnPlayerReachMissionGPS(playerid);
				DisablePlayerMissionGPS(playerid);
			}
		}
		if(GetGVarInt("Mission", playerid) > 0)
		{
			new mission = GetGVarInt("Mission", playerid);
			switch(mission)
			{
			    case 18://Sweet Spray Mission
			    {
			        if(GetPlayerWeapon(playerid) == 41 && GetGVarInt("Spraying", playerid) == 1)
			        {
			            new tagtarget = GetGVarInt("MTagTarget", mission),
							progress = GetGVarInt("MTagProgress", mission);
			            if(IsPlayerFacingPoint(playerid, 60.0, SweetM2TargetPos[tagtarget][0], SweetM2TargetPos[tagtarget][1], SweetM2TargetPos[tagtarget][2]-0.4))
			            {
			                new Float:nx, Float:ny, Float:nz, nearest;
			                if(progress < 2)
			                {
			                    ForEachNPC(n)
								{
									if(GetGVarInt("NPCTeam", n) == NTEAM_BALLAS && GetGVarInt("NPCTType", n) == TARGET_NONE)
									{
										FCNPC_GetPosition(n, nx, ny, nz);
										FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 10.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
										if(nearest == playerid)
										{
											switch(random(8))
											{
											    case 0: SendRangeNPCMessage(20.0, n, "巴拉斯成员说: 干什么?", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											    case 1: SendRangeNPCMessage(20.0, n, "巴拉斯成员说: 你跑错地盘了!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											    case 2: SendRangeNPCMessage(20.0, n, "巴拉斯成员说: 你惹错帮派了!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											    case 3: SendRangeNPCMessage(20.0, n, "巴拉斯成员说: 这里可是巴拉斯的地盘", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											    case 4: SendRangeNPCMessage(20.0, n, "巴拉斯成员说: 你找死是不是?", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											}
											NPCToTarget(n, TARGET_PLAYER, playerid, 1);
										}
									}
								}
			                    SetGVarInt("MTagProgress", progress+1, mission);
			                }
			                else
			                {
							    new newtag = CreateDynamicObject(18659, SweetM2TargetPos[tagtarget][0], SweetM2TargetPos[tagtarget][1], SweetM2TargetPos[tagtarget][2], SweetM2TargetPos[tagtarget][3], SweetM2TargetPos[tagtarget][4], SweetM2TargetPos[tagtarget][5]);
							    SetGVarInt("MSObject", mission, newtag);
							    format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"成功覆盖了一个"#TEXT_YELLOW"涂鸦", PlayerData[playerid][pName]);
			            		SendMissionMessage(mission, COLOR_WHITE, string);
			                    UpdateGlobalMission(18, 2);
			                }
			            }
			        }
			    }
			}
			if(GetGVarInt("MissionCount", mission) > 0) ShowPlayerRightTD(playerid, RTD_MSTIME);
   			else HidePlayerRightTD(playerid, RTD_MSTIME);
		}

		//questTD
		if(GetGVarInt("QuestTime", playerid) > 0)
		{
			SetGVarInt("QuestTime", GetGVarInt("QuestTime", playerid)-1, playerid);
			ShowPlayerRightTD(playerid, RTD_JOBTIME);
		}
		else
		{
		    if(GetGVarInt("Papering", playerid) != 0)
		    {
				SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"你没有在时间内送达所有传单,工作失败");
				SetGVarFloat("WorkDistance", 0.0, playerid);
				DeleteGVar("Papering", playerid);
				DeleteGVar("PaperPlace", playerid);
				DeleteGVar("PaperAmount", playerid);
				DeleteGVar("QuestTime", playerid);
				DeleteGVar("QuestSalary", playerid);
				RemovePlayerMapIcon(playerid, 0);
				ShowPTD(playerid, 1, 0);
			}
			else if(GetGVarInt("FoodDelivering", playerid) == 1)
		    {
		    	SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"你没有在时间内送达所有传单,工作失败");
				SetGVarFloat("WorkDistance", 0.0, playerid);
				DeleteGVar("FoodDelivering", playerid);
				DeleteGVar("FDTo", playerid);
				DeleteGVar("QuestTime", playerid);
				DisablePlayerCheckpoint(playerid);
				ShowPTD(playerid, 1, 0);
			}
		    HidePlayerRightTD(playerid, RTD_JOBTIME);
		}
		if(GetGVarInt("QuestSalary", playerid) > 0) ShowPlayerRightTD(playerid, RTD_JOBSALARY);
		else HidePlayerRightTD(playerid, RTD_JOBSALARY);
		//Range
		if(GetGVarInt("RangeTime", playerid) > 0)
		{
		    SetGVarInt("RangeTime", GetGVarInt("RangeTime", playerid)-1, playerid);
		    ShowPlayerRightTD(playerid, RTD_GUNTIME);
			ShowPlayerRightTD(playerid, RTD_GUNPT);
		}
		else
		{
		    if(GetGVarInt("RangeShooting", playerid) == 1)
		    {
		        StopRange(playerid);
		    }
		    HidePlayerRightTD(playerid, RTD_GUNTIME);
			HidePlayerRightTD(playerid, RTD_GUNPT);
		}
		//Gym
		if(GetGVarInt("FreeLifting", playerid) == 1 || GetGVarInt("BenchLifting", playerid) != 0)
		{
		    new Float:lift = GetGVarFloat("WeightLift", playerid);
         	if(lift > 30.0)
	        {
	            SetGVarFloat("WeightLift", lift-30.0, playerid);
	        }
	        ShowPlayerRightTD(playerid, RTD_GYMBAR);
			ShowPlayerRightTD(playerid, RTD_GYMCOUNT);
		}
		else if(GetGVarInt("GymBiking", playerid) != 0 || GetGVarInt("GymRunning", playerid) != 0)
		{
		    new Float:meter = GetGVarFloat("GymMeter", playerid);
         	meter = meter - 20.0;
	       	if(meter < 5.0)
	        {
	            meter = 0.0;
	            if(GetGVarInt("GymBiking", playerid) != 0)
	            {
	            	ApplyAnimation(playerid, "GYMNASIUM", "gym_bike_still", 1, 1, 0, 0, 1, 0, 1);
	            }
	            else if(GetGVarInt("GymRunning", playerid) != 0)
	            {
	            	FallOffTread(playerid);
	            }
	        }
	        SetGVarFloat("GymMeter", meter, playerid);
			ShowPlayerRightTD(playerid, RTD_GYMBAR);
			ShowPlayerRightTD(playerid, RTD_GYMDIST);
		}
		else
		{
			HidePlayerRightTD(playerid, RTD_GYMCOUNT);
			HidePlayerRightTD(playerid, RTD_GYMBAR);
			HidePlayerRightTD(playerid, RTD_GYMDIST);
		}
		//class
		if(GetGVarInt("Classing", playerid) > 0 && GetGVarInt("Concentration", playerid) > 0)
		{
		    new classid = GetGVarInt("Classing", playerid), randst = random(50), randpt = 1 + random(2);
		    ApplyAnimationEx(playerid, "PED", "SEAT_IDLE", 4.1, 1, 0, 0, 1, 0, 1);
		    if(GetGVarInt("ClassNap", playerid) == 1)
		    {
		        GameTextForPlayer(playerid, "~w~Z..Z..Z..", 1000, 3);
		    }
		    else
		    {
		        if(ClassList[classid][clsStarted] == 1)
		        {
		            GameTextForPlayer(playerid, "~w~...", 1000, 3);
	          		SetGVarInt("ClassMeter", GetGVarInt("ClassMeter", playerid)+1, playerid);
			        if(GetGVarInt("ClassMeter", playerid) == 60)
			        {
			            SetGVarInt("ClassMeter", 0, playerid);
			            if(PlayerData[playerid][pStamina] < 5.0)
						{
						    SetGVarInt("ClassNap", 1, playerid);
							SendClientMessage(playerid, COLOR_WHITE, "** 你因为没体力听课而睡着了...(按F键唤醒自己)");
							UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, "Z..Z..Z..");
						}
						else
						{
						    switch(classid)
				            {
				                case 1:RecordData[playerid][prClass1] ++;
				                case 2:RecordData[playerid][prClass2] ++;
				                case 3:RecordData[playerid][prClass3] ++;
				                case 4:RecordData[playerid][prClass4] ++;
				                case 5:RecordData[playerid][prClass5] ++;
				                case 6:RecordData[playerid][prClass6] ++;
				                case 7:RecordData[playerid][prClass7] ++;
				                case 8:RecordData[playerid][prClass8] ++;
				                case 9:RecordData[playerid][prClass9] ++;
				            }
						    switch(GetGVarInt("Concentration", playerid))
						    {
						        case 1:
						        {
						            switch(randst)
						            {
										case 0..20:
										{
										    SetGVarInt("ClassNap", 1, playerid);
										    SendClientMessage(playerid, COLOR_WHITE, "** Z..Z..Z..(按F键唤醒自己)");
										    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, "Z..Z..Z..");
										}
										case 21..25:
										{
										    GivePlayerPoint(playerid, ClassList[classid][clsPt1], 1);
										    format(string, sizeof(string), "** 你获得了 %s 1点", PtsList[ClassList[classid][clsPt1]][spName]);
										    SendClientMessage(playerid, COLOR_WHITE, string);
										}
									}
									PlayerData[playerid][pStamina] -= 0.5;
								}
								case 2:
						        {
						            switch(randst)
						            {
										case 0..10:
										{
										    SetGVarInt("ClassNap", 1, playerid);
										    SendClientMessage(playerid, COLOR_WHITE, "** Z..Z..Z..(按F键唤醒自己)");
										    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, "Z..Z..Z..");
										}
										case 11..25:
										{
										    GivePlayerPoint(playerid, ClassList[classid][clsPt1], 1);
										    format(string, sizeof(string), "** 你获得了 %s 1点", PtsList[ClassList[classid][clsPt1]][spName]);
										    SendClientMessage(playerid, COLOR_WHITE, string);
										}
									}
									PlayerData[playerid][pStamina] -= 1.0;
								}
								case 3:
						        {
						            switch(randst)
						            {
										case 0..2:
										{
										    SetGVarInt("ClassNap", 1, playerid);
										    SendClientMessage(playerid, COLOR_WHITE, "** Z..Z..Z..(按F键唤醒自己)");
										    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, "Z..Z..Z..");
										}
										case 3..35:
										{
										    GivePlayerPoint(playerid, ClassList[classid][clsPt1], randpt);
										    format(string, sizeof(string), "** 你获得了 %s %d点", PtsList[ClassList[classid][clsPt1]][spName], randpt);
										    SendClientMessage(playerid, COLOR_WHITE, string);
										}
										case 36..45:
										{
										    if(ClassList[classid][clsPt2] != 0)
										    {
											    GivePlayerPoint(playerid, ClassList[classid][clsPt2], randpt);
											    format(string, sizeof(string), "** 你获得了 %s %d点", PtsList[ClassList[classid][clsPt2]][spName], randpt);
											    SendClientMessage(playerid, COLOR_WHITE, string);
									 		}
										}
									}
									PlayerData[playerid][pStamina] -= 2.0;
								}
								case 4:
						        {
						            switch(randst)
						            {
										case 0..40:
										{
										    GivePlayerPoint(playerid, ClassList[classid][clsPt1], randpt);
										    format(string, sizeof(string), "** 你获得了 %s %d点", PtsList[ClassList[classid][clsPt1]][spName], randpt);
										    SendClientMessage(playerid, COLOR_WHITE, string);
										    if(ClassList[classid][clsPt2] != 0)
										    {
											    GivePlayerPoint(playerid, ClassList[classid][clsPt2], randpt);
											    format(string, sizeof(string), "** 你获得了 %s %d点", PtsList[ClassList[classid][clsPt2]][spName], randpt);
											    SendClientMessage(playerid, COLOR_WHITE, string);
									 		}
										}
									}
									PlayerData[playerid][pStamina] -= 3.0;
								}
							}
						}
					}
				}
			}
		}
		//Medicine
		if(SickData[playerid][scStamBuff] > 0) SickData[playerid][scStamBuff] --;
		if(SickData[playerid][scSickBuff] > 0) SickData[playerid][scSickBuff] --;
		//Stamina&&Hunger
		if(PlayerData[playerid][pHunger] > 100.0) PlayerData[playerid][pHunger] = 100.0;
		if(PlayerData[playerid][pStamina] > 100.0 + PlayerData[playerid][pMaxStamina]) PlayerData[playerid][pStamina] = 100.0 + PlayerData[playerid][pMaxStamina];
		//Monitor
		if(GetGVarInt("EMonitoring", playerid) == 1)
		{
		    new eid = GetGVarInt("EMEstate", playerid), Float:posx, Float:posy, Float:lookatx, Float:lookaty;
		    SetGVarInt("EMonitoring", 2, playerid);
		    SetPlayerVirtualWorld(playerid, 0);
		    SetPlayerInterior(playerid, 0);
		    GetXYInFrontOfPos(EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eA]-15.0, posx, posy, 4.0);
			SetPlayerCameraPos(playerid, posx, posy, EstateData[eid][eZ]+3.0);
			GetXYInFrontOfPos(EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eA], lookatx, lookaty, 1.0);
			SetPlayerCameraLookAt(playerid, lookatx, lookaty, EstateData[eid][eZ]);
		}
		//TV
		switch(GetGVarInt("WatchTV", playerid))
		{
		    case 1:
		    {
			    SetGVarInt("WatchTV", 2, playerid);
			    SetPlayerSwitchTVChannel(playerid, GetGVarInt("TVChannel", playerid));
			}
			case 3:
			{
			    SetGVarInt("WatchTV", 4, playerid);
			    PlayerWatchingPlayer(playerid, GetGVarInt("TVPlayer", playerid));
			}
			case 4:
			{
			    new watchid = GetGVarInt("TVPlayer", playerid);
			    format(string, sizeof(string), "~w~%s(%d)\n血量: %.1f 护甲:%.1f", PlayerData[watchid][pName], watchid, GetPlayerHealth_Fix(watchid), GetPlayerArmour_Fix(watchid));
				GameTextForPlayer(playerid, string, 1000, 4);
    			PlayerWatchingPlayer(playerid, watchid);
			}
		}

		//Crime
		for(i = 0, j = MAX_CRIMES; i < j; i++)
		{
		    if(Crime[playerid][i][crType] == CRIME_NONE) continue;
		    if(Crime[playerid][i][crTimer] == 0) ClearPlayerCrime(playerid, i);
		    else Crime[playerid][i][crTimer] --;
		}
        //HUD
        UpdatePlayerHPBar(playerid);

        if(ConfigData[playerid][cfHud2] == 0 && PlayerData[playerid][pWanted] == 0 && PlayerData[playerid][pReg] != 0 && GetGVarInt("pTmpWeb", playerid) == -1)
        {
			// 每个TextDraw动作都会发送网路消息 而且客户端也会进行TextDraw操作 非常消耗资源 所以做个确认呐
			if(GetGVarInt("pTmpBank", playerid) != PlayerData[playerid][pBank] || GetGVarInt("pTmpBankH", playerid) != -1){ // 银行存款变动
				format(string, sizeof(string),"$%08d", PlayerData[playerid][pBank]);//%0n 代表用n个0来填满没有数的位数
				PlayerTextDrawSetString(playerid, BankAmount[playerid],string);
				PlayerTextDrawShow(playerid, BankAmount[playerid]);
				SetGVarInt("pTmpBank", PlayerData[playerid][pBank], playerid);
				SetGVarInt("pTmpBankH", -1, playerid);
			}
		}
		else {
			if(GetGVarInt("pTmpBankH", playerid) != 1){
				PlayerTextDrawHide(playerid, BankAmount[playerid]);
			}
			SetGVarInt("pTmpBankH", 1, playerid);
		}

		if(GetGVarInt("pTmpSTDH", playerid) != -1)
		{
		    PlayerTextDrawShow(playerid, HPBarBack[playerid]);
			PlayerTextDrawShow(playerid, ARBarBack[playerid]);
			PlayerTextDrawShow(playerid, HPBar[playerid]);
			PlayerTextDrawShow(playerid, ARBar[playerid]);
			PlayerTextDrawShow(playerid, HPNum[playerid]);
			PlayerTextDrawShow(playerid, ARNum[playerid]);
			PlayerTextDrawShow(playerid, BankAmount[playerid]);
			PlayerTextDrawShow(playerid, HUDBack[playerid]);
			PlayerTextDrawShow(playerid, HUDStamIcon[playerid]);
			PlayerTextDrawShow(playerid, HUDHungerIcon[playerid]);
			PlayerTextDrawShow(playerid, HUDStamBarBack[playerid]);
			PlayerTextDrawShow(playerid, HUDHungerBarBack[playerid]);
			PlayerTextDrawShow(playerid, HUDExpBar[playerid]);
			PlayerTextDrawShow(playerid, HUDExpBarBack[playerid]);
			PlayerTextDrawShow(playerid, HUDName[playerid]);
			PlayerTextDrawShow(playerid, HUDLV[playerid]);
			PlayerTextDrawShow(playerid, HUDExp[playerid]);
			PlayerTextDrawShow(playerid, HUDHungerBar[playerid]);
			PlayerTextDrawShow(playerid, HUDStamBar[playerid]);
			PlayerTextDrawShow(playerid, HUDHungerAmount[playerid]);
			PlayerTextDrawShow(playerid, HUDStamAmount[playerid]);
			SetGVarInt("pTmpSTDH", -1, playerid);
		}

		if(ConfigData[playerid][cfHud4] == 1 || PlayerData[playerid][pReg] == 0)
        {
			if(GetGVarInt("pTmpHUDBackH", playerid) != 1){
				PlayerTextDrawHide(playerid, HUDBack[playerid]);
				PlayerTextDrawHide(playerid, HUDExpBarBack[playerid]);
				PlayerTextDrawHide(playerid, HUDName[playerid]);
				PlayerTextDrawHide(playerid, HUDLV[playerid]);
				PlayerTextDrawHide(playerid, HUDExp[playerid]);
				PlayerTextDrawHide(playerid, HUDExpBar[playerid]);

				SetGVarInt("pTmpHUDBackH", 1, playerid);
			}
		}
		else{
			new pTmpName[25];
			GetGVarString("pTmpName", pTmpName, 25, playerid);
			if(
				GetGVarInt("pTmpLv", playerid) != PlayerData[playerid][pLevel] ||
				strcmp(pTmpName, PlayerData[playerid][pName]) != 0 ||
				GetGVarInt("pTmpHUDBackH", playerid) != -1){
				PlayerTextDrawShow(playerid, HUDBack[playerid]);
				PlayerTextDrawShow(playerid, HUDExpBarBack[playerid]);

				format(string, sizeof(string),"%s",PlayerData[playerid][pName]);
				PlayerTextDrawSetString(playerid, HUDName[playerid],string);
				PlayerTextDrawShow(playerid, HUDName[playerid]);

				format(string, sizeof(string),"%d",PlayerData[playerid][pLevel]);
				PlayerTextDrawSetString(playerid, HUDLV[playerid],string);
				PlayerTextDrawShow(playerid, HUDLV[playerid]);
				SetPlayerScore(playerid, PlayerData[playerid][pLevel]);

				PlayerTextDrawShow(playerid, HUDExpBar[playerid]);
				PlayerTextDrawShow(playerid, HUDExp[playerid]);

				SetGVarInt("pTmpLv", PlayerData[playerid][pLevel], playerid);
				SetGVarString("pTmpName", PlayerData[playerid][pName], playerid);
				SetGVarInt("pTmpHUDBackH", -1, playerid);
			}
		}
		if(GetGVarInt("ModdingShop", playerid) == 1 || ConfigData[playerid][cfHud3] == 1 || PlayerData[playerid][pReg] == 0)
        {
			if(GetGVarInt("pTmpHUD3H", playerid) != 1){
				PlayerTextDrawHide(playerid, HUDStamIcon[playerid]);
				PlayerTextDrawHide(playerid, HUDHungerIcon[playerid]);
				PlayerTextDrawHide(playerid, HUDStamBarBack[playerid]);
				PlayerTextDrawHide(playerid, HUDHungerBarBack[playerid]);
				PlayerTextDrawHide(playerid, HUDHungerBar[playerid]);
				PlayerTextDrawHide(playerid, HUDStamBar[playerid]);
				PlayerTextDrawHide(playerid, HUDHungerAmount[playerid]);
				PlayerTextDrawHide(playerid, HUDStamAmount[playerid]);


				SetGVarInt("pTmpHUD3H", 1, playerid);
			}
	    }
		else
		{
			if(GetGVarFloat("pTmpHung", playerid) != PlayerData[playerid][pHunger] ||
			   GetGVarFloat("pTmpStam", playerid) != PlayerData[playerid][pStamina] ||
			   GetGVarInt("pTmpHUD3H", playerid) != -1){

				PlayerTextDrawShow(playerid, HUDStamIcon[playerid]);
				PlayerTextDrawShow(playerid, HUDHungerIcon[playerid]);
				PlayerTextDrawShow(playerid, HUDStamBarBack[playerid]);
				PlayerTextDrawShow(playerid, HUDHungerBarBack[playerid]);
				if(PlayerData[playerid][pHunger] > 100) PlayerTextDrawLetterSize(playerid, HUDHungerBar[playerid], 0.591665, -0.5 - 10.5);
				else PlayerTextDrawLetterSize(playerid, HUDHungerBar[playerid], 0.591665, -0.5 - (10.5*PlayerData[playerid][pHunger]/100));
				PlayerTextDrawShow(playerid, HUDHungerBar[playerid]);

				if(PlayerData[playerid][pStamina] > 100 + PlayerData[playerid][pMaxStamina]) PlayerTextDrawLetterSize(playerid, HUDStamBar[playerid], 0.591665, -0.5 - 10.5);
				else PlayerTextDrawLetterSize(playerid, HUDStamBar[playerid], 0.591665, -0.5 - (10.5*PlayerData[playerid][pStamina]/(100.0+PlayerData[playerid][pMaxStamina])));
				PlayerTextDrawShow(playerid, HUDStamBar[playerid]);

				format(string,sizeof(string),"%d", floatround(PlayerData[playerid][pHunger]));
				PlayerTextDrawSetString(playerid,HUDHungerAmount[playerid],string);
				PlayerTextDrawShow(playerid, HUDHungerAmount[playerid]);

				format(string,sizeof(string),"%d", floatround(PlayerData[playerid][pStamina]));
				PlayerTextDrawSetString(playerid,HUDStamAmount[playerid],string);
				PlayerTextDrawShow(playerid, HUDStamAmount[playerid]);

				SetGVarFloat("pTmpHung", PlayerData[playerid][pHunger], playerid);
				SetGVarFloat("pTmpStam", PlayerData[playerid][pStamina], playerid);
				SetGVarInt("pTmpHUD3H", -1, playerid);
			}
		}
	}
	else
	{
	    //HUD
		// 每个TextDraw动作都会发送网路消息 而且客户端也会进行TextDraw操作 非常消耗资源 所以做个确认呐
		if(GetGVarInt("pTmpSTDH", playerid) != 1){
			PlayerTextDrawHide(playerid, HPBarBack[playerid]);
			PlayerTextDrawHide(playerid, ARBarBack[playerid]);
			PlayerTextDrawHide(playerid, HPBar[playerid]);
			PlayerTextDrawHide(playerid, ARBar[playerid]);
			PlayerTextDrawHide(playerid, HPNum[playerid]);
			PlayerTextDrawHide(playerid, ARNum[playerid]);
			PlayerTextDrawHide(playerid, BankAmount[playerid]);
			PlayerTextDrawHide(playerid, HUDBack[playerid]);
			PlayerTextDrawHide(playerid, HUDStamIcon[playerid]);
			PlayerTextDrawHide(playerid, HUDHungerIcon[playerid]);
			PlayerTextDrawHide(playerid, HUDStamBarBack[playerid]);
			PlayerTextDrawHide(playerid, HUDHungerBarBack[playerid]);
			PlayerTextDrawHide(playerid, HUDExpBar[playerid]);
			PlayerTextDrawHide(playerid, HUDExpBarBack[playerid]);
			PlayerTextDrawHide(playerid, HUDName[playerid]);
			PlayerTextDrawHide(playerid, HUDLV[playerid]);
			PlayerTextDrawHide(playerid, HUDExp[playerid]);
			PlayerTextDrawHide(playerid, HUDHungerBar[playerid]);
			PlayerTextDrawHide(playerid, HUDStamBar[playerid]);
			PlayerTextDrawHide(playerid, HUDHungerAmount[playerid]);
			PlayerTextDrawHide(playerid, HUDStamAmount[playerid]);

			SetGVarInt("pTmpSTDH", 1, playerid);
		}
    }

    if(GetGVarInt("Dead", playerid) > 1)
    {
    	new count = GetGVarInt("Dead", playerid);
    	if(count < 10)
	    {
	        if(count == 2)
	        {
	            ShowPlayerCameraScene(playerid, SCENE_SKY);
			}
		    SetGVarInt("Dead", count+1, playerid);
			GameTextForPlayer(playerid, "~y~复活中", 500, 3);
	    }
	    else
	    {
	        DeleteGVar("Dead", playerid);
	        SetGVarInt("Cured", 1, playerid);
	        SetPlayerSceneToSpawn(playerid);
	    }
	}
    return 1;
}

PUBLIC:SpeedoUpdate(playerid)
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if(IsPlayerInAnyVehicle(playerid) && !IsABike(vehicleid) && GetGVarInt("ModdingShop", playerid) == 0)
	{
		new Float:hp, i, engine, lights, alarm, doors, bonnet, boot, objective,
			string[8];//数组(这里为字串用)的最大长度 要依照内容量来决定比较好哟 128以上是非常消耗资源的
		GetVehicleHealth(vehicleid, hp);
		GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);

		new Float:speednum = GetVehicleSpeed(vehicleid),
			speedd = floatround(speednum),
  			vehfuel = VehData[vehicleid][vFuel];
  		if(hp < 1000.0 + VehData[vehicleid][vArmour])
  		{
  		    if(SkillData[playerid][psFixVeh] == 5){SetVehicleHealth(vehicleid, hp + 2.0);}//修车技能LV5被动效果
	  		if(GetGVarInt("RaceVeh", playerid) == vehicleid && GetGVarInt("Racing", playerid) == STATUS_WAITING)//防止玩家在等待比赛开始时车辆被外力损毁
			{
				RepairVehicle(vehicleid);
			}
  		}
        if(engine == 0)
		{
			if(vehfuel < 100)
			{
			    new free = 0;
				for(i = 0; i < sizeof(GasStationPos); i ++)//加油
				{
				    if(IsPlayerInRangeOfPointEx(playerid,8.0,GasStationPos[i][0],GasStationPos[i][1],GasStationPos[i][2]) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
				    {
						VehData[vehicleid][vFuel] ++;
						if(IsATaxi(vehicleid) && VehData[vehicleid][vType] == VTYPE_COMPANY)
						{
						    if(PlayerData[playerid][pCompany] == VehData[vehicleid][vOwner] && CompanyData[CompanySqlIDToID(PlayerData[playerid][pCompany])][comTaxi] == 1) {free = 1;}
						    else {free = 0;}
						}
						else if(IsABus(vehicleid) && VehData[vehicleid][vType] == VTYPE_COMPANY)
						{
						    if(PlayerData[playerid][pCompany] == VehData[vehicleid][vOwner] && CompanyData[CompanySqlIDToID(PlayerData[playerid][pCompany])][comBus] == 1) {free = 1;}
						    else {free = 0;}
						}
						//计程车与客运业的运输载具加油免费
						else {free = 0;}
						if(free == 0)
                        {
							GiveMoney(playerid, -PriceData[prcGas]);
							Log(moneylog, INFO, "%s(%d)于加油站加油花费了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], PriceData[prcGas]);
							Department[DEPT_GOVERNMENT][dpFund] += PriceData[prcGas];
						}
						RecordData[playerid][prRefuels] ++;
				    }
				}
			}
		}
		else
		{
		    if(hp < 300.0)
		    {
		        if(VehData[vehicleid][vType] == VTYPE_RC)
			    {
			        SetPlayerExitRCVehicle(playerid);
			        SendClientMessage(playerid, COLOR_WHITE, "** 因为你的遥控玩具坏掉了所以不得不收回了");
			    }
			    else
			    {
			        SetVehicleParamsEx(vehicleid,0,lights,alarm,doors,bonnet,boot,objective);
		        	SendClientMessage(playerid, COLOR_WHITE, "** 你的载具因为过度损坏而停止运转了");
		        }
		    }
		}
  		if(VehData[vehicleid][vSpeedo] == 0)
  		{
  		    PlayerTextDrawHide(playerid, Speed2Back[playerid]);
			PlayerTextDrawHide(playerid, Speed2Speed[playerid]);
			PlayerTextDrawHide(playerid, Speed2Fuel[playerid]);
			PlayerTextDrawHide(playerid, Speed2Health[playerid]);
			PlayerTextDrawHide(playerid, Speed2SNum[playerid]);
			PlayerTextDrawHide(playerid, Speed2FNum[playerid]);
			PlayerTextDrawHide(playerid, Speed2HNum[playerid]);
			PlayerTextDrawHide(playerid, Speed2SText[playerid]);
			PlayerTextDrawHide(playerid, Speed2FText[playerid]);
			PlayerTextDrawHide(playerid, Speed2HText[playerid]);
			PlayerTextDrawHide(playerid, Speed2Lock[playerid]);
			PlayerTextDrawHide(playerid, Speed2Engine[playerid]);

			if(ConfigData[playerid][cfHud5] == 1)
			{
			    PlayerTextDrawHide(playerid, SpeedBack[playerid]);
		  		PlayerTextDrawHide(playerid, Speed[playerid]);
				PlayerTextDrawHide(playerid, SpeedText[playerid]);
				PlayerTextDrawHide(playerid, SpeedFuel1[playerid]);
				PlayerTextDrawHide(playerid, SpeedFuel2[playerid]);
				PlayerTextDrawHide(playerid, SpeedHealth[playerid]);
				PlayerTextDrawHide(playerid, SpeedEngine[playerid]);
				PlayerTextDrawHide(playerid, SpeedLock[playerid]);
				PlayerTextDrawHide(playerid, SpeedBarBack[0][playerid]);
				PlayerTextDrawHide(playerid, SpeedBarBack[1][playerid]);
				PlayerTextDrawHide(playerid, SpeedBarBack[2][playerid]);
				PlayerTextDrawHide(playerid, FuelBarBack[playerid]);
				PlayerTextDrawHide(playerid, FuelBar[playerid]);
				PlayerTextDrawHide(playerid, SpeedBar[playerid]);
				PlayerTextDrawHide(playerid, SpeedBeep[0][playerid]);
				PlayerTextDrawHide(playerid, SpeedBeep[1][playerid]);
				PlayerTextDrawHide(playerid, SpeedBeep[2][playerid]);
			}
			else
			{
				PlayerTextDrawShow(playerid, SpeedBack[playerid]);
				PlayerTextDrawShow(playerid, Speed[playerid]);
				PlayerTextDrawShow(playerid, SpeedText[playerid]);
				PlayerTextDrawShow(playerid, SpeedHealth[playerid]);
				PlayerTextDrawShow(playerid, SpeedEngine[playerid]);
				PlayerTextDrawShow(playerid, SpeedLock[playerid]);
				PlayerTextDrawShow(playerid, SpeedBarBack[0][playerid]);
				PlayerTextDrawShow(playerid, SpeedBarBack[1][playerid]);
				PlayerTextDrawShow(playerid, SpeedBarBack[2][playerid]);
				PlayerTextDrawShow(playerid, SpeedBar[playerid]);
				PlayerTextDrawShow(playerid, SpeedBeep[0][playerid]);
				PlayerTextDrawShow(playerid, SpeedBeep[1][playerid]);
				PlayerTextDrawShow(playerid, SpeedBeep[2][playerid]);

				if(hp < 450.0) PlayerTextDrawSetString(playerid,SpeedBeep[1][playerid],"mdl-1004:red");//由于是Float 所以任何数必须使用小数点来提高效率
				else PlayerTextDrawSetString(playerid,SpeedBeep[1][playerid],"mdl-1004:black");

				if(VehData[vehicleid][vLock] != 0) PlayerTextDrawSetString(playerid,SpeedBeep[2][playerid],"mdl-1004:red");
				else PlayerTextDrawSetString(playerid,SpeedBeep[2][playerid],"mdl-1004:black");

				format(string,sizeof(string),"%d",speedd);
				PlayerTextDrawSetString(playerid,Speed[playerid],string);
				if(speednum < SPEEDO1MAX) PlayerTextDrawTextSize(playerid, SpeedBar[playerid], 505.0 + (88.0 * (speednum/SPEEDO1MAX)), 21.5);//由于是Float 所以任何数必须使用小数点来提高效率
				else PlayerTextDrawTextSize(playerid, SpeedBar[playerid], 593.0, 21.5);//由于是Float 所以任何数必须使用小数点来提高效率
				if(VehData[vehicleid][vType] != VTYPE_NONE)//会耗油的车种才显示油量
				{
			  		if(vehfuel < 100) PlayerTextDrawLetterSize(playerid, FuelBar[playerid], 0.570833, -0.500000 - (8.4 * (float(vehfuel)/100)));
			  		else PlayerTextDrawLetterSize(playerid, FuelBar[playerid], 0.570833, -0.500000 - 8.4);
			  		PlayerTextDrawShow(playerid, SpeedFuel1[playerid]);
					PlayerTextDrawShow(playerid, SpeedFuel2[playerid]);
			    	PlayerTextDrawShow(playerid, FuelBarBack[playerid]);
					PlayerTextDrawShow(playerid, FuelBar[playerid]);
				}
				if(engine == 1) {PlayerTextDrawSetString(playerid,SpeedBeep[0][playerid],"mdl-1004:red");}
				else{PlayerTextDrawSetString(playerid,SpeedBeep[0][playerid],"mdl-1004:black");}
			}
		}
		else
		{
		    PlayerTextDrawHide(playerid, SpeedBack[playerid]);
	  		PlayerTextDrawHide(playerid, Speed[playerid]);
			PlayerTextDrawHide(playerid, SpeedText[playerid]);
			PlayerTextDrawHide(playerid, SpeedFuel1[playerid]);
			PlayerTextDrawHide(playerid, SpeedFuel2[playerid]);
			PlayerTextDrawHide(playerid, SpeedHealth[playerid]);
			PlayerTextDrawHide(playerid, SpeedEngine[playerid]);
			PlayerTextDrawHide(playerid, SpeedLock[playerid]);
			PlayerTextDrawHide(playerid, SpeedBarBack[0][playerid]);
			PlayerTextDrawHide(playerid, SpeedBarBack[1][playerid]);
			PlayerTextDrawHide(playerid, SpeedBarBack[2][playerid]);
			PlayerTextDrawHide(playerid, FuelBarBack[playerid]);
			PlayerTextDrawHide(playerid, FuelBar[playerid]);
			PlayerTextDrawHide(playerid, SpeedBar[playerid]);
			PlayerTextDrawHide(playerid, SpeedBeep[0][playerid]);
			PlayerTextDrawHide(playerid, SpeedBeep[1][playerid]);
			PlayerTextDrawHide(playerid, SpeedBeep[2][playerid]);

			if(ConfigData[playerid][cfHud5] == 1)
			{
			    PlayerTextDrawHide(playerid, Speed2Back[playerid]);
				PlayerTextDrawHide(playerid, Speed2Speed[playerid]);
				PlayerTextDrawHide(playerid, Speed2Fuel[playerid]);
				PlayerTextDrawHide(playerid, Speed2Health[playerid]);
				PlayerTextDrawHide(playerid, Speed2SNum[playerid]);
				PlayerTextDrawHide(playerid, Speed2FNum[playerid]);
				PlayerTextDrawHide(playerid, Speed2HNum[playerid]);
				PlayerTextDrawHide(playerid, Speed2SText[playerid]);
				PlayerTextDrawHide(playerid, Speed2FText[playerid]);
				PlayerTextDrawHide(playerid, Speed2HText[playerid]);
				PlayerTextDrawHide(playerid, Speed2Lock[playerid]);
				PlayerTextDrawHide(playerid, Speed2Engine[playerid]);
			}
			else
			{
			    switch(VehData[vehicleid][vSpeedo])
			    {
			        case 1://red
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0xFF99911E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0xFF4D40B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0xFF4D40B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0xFF4D40B4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
				    }
				    case 2://yellow
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0xFFE37E1E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0xFFD438B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0xFFD438B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0xFFD438B4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
				    }
				    case 3://green
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0xC6FF8A1E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0x97FF2AB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0x97FF2AB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0x97FF2AB4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
				    }
				    case 4://blue
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0x87BAFF1E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0x4B97FFB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0x4B97FFB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0x4B97FFB4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
				    }
				    case 5://purple
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0xD0A1FF1E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0xAD5BFFB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0xAD5BFFB4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0xAD5BFFB4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
				    }
				    case 6://pink
				    {
				        PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 0xFF85CC1E);
				        PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 0xFF41B0B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 0xFF41B0B4);
				        PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 0xFF41B0B4);
				        PlayerTextDrawColor(playerid, Speed2SNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HNum[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2SText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2FText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2HText[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Lock[playerid], 0xFFFFFFEB);
				        PlayerTextDrawColor(playerid, Speed2Engine[playerid], 0xFFFFFFEB);
			        }
			    }
			    PlayerTextDrawShow(playerid, Speed2Back[playerid]);
				PlayerTextDrawShow(playerid, Speed2Speed[playerid]);
				PlayerTextDrawShow(playerid, Speed2Fuel[playerid]);
				PlayerTextDrawShow(playerid, Speed2Health[playerid]);
				PlayerTextDrawShow(playerid, Speed2SNum[playerid]);
				PlayerTextDrawShow(playerid, Speed2FNum[playerid]);
				PlayerTextDrawShow(playerid, Speed2HNum[playerid]);
				PlayerTextDrawShow(playerid, Speed2SText[playerid]);
				PlayerTextDrawShow(playerid, Speed2FText[playerid]);
				PlayerTextDrawShow(playerid, Speed2HText[playerid]);
				PlayerTextDrawShow(playerid, Speed2Lock[playerid]);
				PlayerTextDrawShow(playerid, Speed2Engine[playerid]);

				if(VehData[vehicleid][vLock] != 0) {PlayerTextDrawSetString(playerid,Speed2Lock[playerid],"车锁:开启");}
				else {PlayerTextDrawSetString(playerid,Speed2Lock[playerid],"车锁:关闭");}

				if(engine == 1) {PlayerTextDrawSetString(playerid,Speed2Engine[playerid],"引擎:开启");}
				else {PlayerTextDrawSetString(playerid,Speed2Engine[playerid],"引擎:关闭");}

				format(string,sizeof(string),"%d",speedd);
				PlayerTextDrawSetString(playerid,Speed2SNum[playerid],string);
				format(string,sizeof(string),"%d",floatround(hp));
				PlayerTextDrawSetString(playerid,Speed2HNum[playerid],string);
				format(string,sizeof(string),"%d",vehfuel);
				PlayerTextDrawSetString(playerid,Speed2FNum[playerid],string);

				if(speednum < SPEEDO2MAX) PlayerTextDrawLetterSize(playerid, Speed2Speed[playerid], 0.600000, -0.5 - (11.5 * (speednum/SPEEDO2MAX)));
				else PlayerTextDrawLetterSize(playerid, Speed2Speed[playerid], 0.600000, -12.0);
				if(vehfuel < 100) PlayerTextDrawLetterSize(playerid, Speed2Fuel[playerid], 0.600000, -0.5 - (11.5 * (float(vehfuel)/100)));
				else PlayerTextDrawLetterSize(playerid, Speed2Fuel[playerid], 0.600000, -12.0);
		  		if(hp < 1000.0 + VehData[vehicleid][vArmour]) PlayerTextDrawLetterSize(playerid, Speed2Health[playerid], 0.600000, -0.5 - (11.5 * hp/(1000.0 + VehData[vehicleid][vArmour])));
				else PlayerTextDrawLetterSize(playerid, Speed2Health[playerid], 0.600000, -12.0);
			}
		}
	}
	else
	{
		PlayerTextDrawHide(playerid, SpeedBack[playerid]);
		PlayerTextDrawHide(playerid, Speed[playerid]);
		PlayerTextDrawHide(playerid, SpeedText[playerid]);
		PlayerTextDrawHide(playerid, SpeedFuel1[playerid]);
		PlayerTextDrawHide(playerid, SpeedFuel2[playerid]);
		PlayerTextDrawHide(playerid, SpeedHealth[playerid]);
		PlayerTextDrawHide(playerid, SpeedEngine[playerid]);
		PlayerTextDrawHide(playerid, SpeedLock[playerid]);
		PlayerTextDrawHide(playerid, SpeedBarBack[0][playerid]);
		PlayerTextDrawHide(playerid, SpeedBarBack[1][playerid]);
		PlayerTextDrawHide(playerid, SpeedBarBack[2][playerid]);
		PlayerTextDrawHide(playerid, FuelBarBack[playerid]);
		PlayerTextDrawHide(playerid, FuelBar[playerid]);
		PlayerTextDrawHide(playerid, SpeedBar[playerid]);
		PlayerTextDrawHide(playerid, SpeedBeep[0][playerid]);
		PlayerTextDrawHide(playerid, SpeedBeep[1][playerid]);
		PlayerTextDrawHide(playerid, SpeedBeep[2][playerid]);

		PlayerTextDrawHide(playerid, Speed2Back[playerid]);
		PlayerTextDrawHide(playerid, Speed2Speed[playerid]);
		PlayerTextDrawHide(playerid, Speed2Fuel[playerid]);
		PlayerTextDrawHide(playerid, Speed2Health[playerid]);
		PlayerTextDrawHide(playerid, Speed2SNum[playerid]);
		PlayerTextDrawHide(playerid, Speed2FNum[playerid]);
		PlayerTextDrawHide(playerid, Speed2HNum[playerid]);
		PlayerTextDrawHide(playerid, Speed2SText[playerid]);
		PlayerTextDrawHide(playerid, Speed2FText[playerid]);
		PlayerTextDrawHide(playerid, Speed2HText[playerid]);
		PlayerTextDrawHide(playerid, Speed2Lock[playerid]);
		PlayerTextDrawHide(playerid, Speed2Engine[playerid]);
	}
}


stock GiveMoney(playerid, amount)
{
	static string[144];
	static mstr[144];
    if(!IsPlayerConnected(playerid)) return;
	if(GetGVarInt("Logged", playerid) == 0) return;
	if(amount == 0) return;
	
	if(amount > 1000000)
	{
		format(mstr, sizeof(mstr), " [管理员] %s[%d] 的现金增加[%d] (注意!)", PlayerData[playerid][pName], playerid, amount);
		SendAdminMessage(COLOR_YELLOW, mstr);
	}
	
	ResetPlayerMoney(playerid);
	PlayerData[playerid][pCash] += amount;
    GivePlayerMoney(playerid, PlayerData[playerid][pCash]);
    if(amount > 0)
	{
		PlayerTextDrawColor(playerid, MoneyChange[playerid], -1);
		format(string,sizeof(string),"$+%d",amount);
		RecordData[playerid][prEarned] += amount;
	}
	else if(amount < 0)
	{
		PlayerTextDrawColor(playerid, MoneyChange[playerid], -16776961);
		format(string,sizeof(string),"$%d",amount);
		RecordData[playerid][prSpent] += amount;
	}
	PlayerTextDrawSetString(playerid,MoneyChange[playerid],string);
	SetGVarInt("MTDHide", 8, playerid);
	PlayerTextDrawHide(playerid, MoneyChange[playerid]);
	PlayerTextDrawShow(playerid, MoneyChange[playerid]);
}

PUBLIC:SaveData()
{
	print("<<保存服务器资料>>");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `vehicledata`", "SaveVehicleData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `playerdata`", "SaveAllPlayerData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `marketdata`", "SaveMarketData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `resourcedata`", "SaveResourceData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `pricedata`", "SavePriceData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `companydata`", "SaveCompanyData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `gangdata`", "SaveGangData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `estatedata`", "SaveEstateData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `gangzone`", "SaveGangZone");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `department`", "SaveDepartment");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `wantedrule`", "SaveWantedRule");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `objectdata`", "SaveObjectData");
    mysql_tquery(MYSQL_SESSION_A, "SELECT * FROM `giftdata`", "SaveGiftData");
    print("<<完成>>");
    //return 0;//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

PUBLIC:OnVehicleDataLoad()
{
    new engine, lights, alarm, doors, bonnet, boot, objective;
	for(new r = 1, c = cache_num_rows()+1; r < c; r++)//另外把条数代入变数 提高效率
	{//这里能读取刚才tquery的缓存
	//这里做循环读取 cache_num_rows 代表查询结果有多少条 相当于有多少台车在数据库
		new ORM:ormid = VehData[r][ORM_ID] = orm_create("vehicledata");
        //车辆产生后预设关掉引擎
		CreateVehicleData(ormid, r);
		orm_setkey(ormid, "id");//要记得设置一个key值 我们定为id
		orm_apply_cache(ormid, r-1);//将查询的缓存代入orm物件内

		orm_load(ormid, "CheckVehicleData", "d", r);

		//使用vID作为车辆ID 和MySQL数据ID 可以防止重复
		if(VehData[r][vPolice] == 1) AddStaticVehicleEx(VehData[r][vModel], VehData[r][vX], VehData[r][vY], VehData[r][vZ], VehData[r][vA], VehData[r][vColor1], VehData[r][vColor2], 60000, 1);
		else AddStaticVehicleEx(VehData[r][vModel], VehData[r][vX], VehData[r][vY], VehData[r][vZ], VehData[r][vA], VehData[r][vColor1], VehData[r][vColor2], 60000);
        LinkVehicleToInterior(r, VehData[r][vInt]);
    	SetVehicleVirtualWorld(r, VehData[r][vWorld]);
    	if(VehData[r][vStatus] == VEH_STOLEN || VehData[r][vStatus] == VEH_STORED || VehData[r][vStatus] == VEH_DESTROYED) {SetVehicleVirtualWorld(r, 99);}
		else if(VehData[r][vStatus] == VEH_UNDELIVERED)
		{
			SetVehicleVirtualWorld(r, 0);
			VehData[r][vStatus] = VEH_NORMAL;
		}
		if(!IsABike(r))
		{
			GetVehicleParamsEx(r, engine, lights, alarm, doors, bonnet, boot, objective);
			if(VehData[r][vTrunk] == 1) boot = 1;
			if(VehData[r][vHood] == 1) bonnet = 1;
			SetVehicleParamsEx(r, 0, lights, alarm, doors, bonnet, boot, objective);
			SetVehicleHealth(r, VehData[r][vHealth]);
			SetVehicleModifications(r);

			if(VehData[r][vPaintjob] != 3)
			{
				ChangeVehiclePaintjob(r, VehData[r][vPaintjob]);
			}

			if(isnull(VehData[r][vPlate]))
			{
				mysql_format(DEFAULT_SESSION, VehData[r][vPlate], 32, "%s%s%s-%d%d%d%d", Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], random(10), random(10), random(10), random(10));
			}
			SetVehiclePlate(r, VehData[r][vPlate]);

			if(VehData[r][vType] != 0) {UpdateVehicleDamageStatus(r, VehData[r][vPanelStat], VehData[r][vDoorStat], VehData[r][vLightStat], VehData[r][vTireStat]);}

			SetVehicleAttachment(r, ATTACH_PLATFORM);
			if(VehData[r][vTaxi] != 0) SetVehicleAttachment(r, ATTACH_TAXI);
			if(VehData[r][vPolice] != 0) SetVehicleAttachment(r, ATTACH_SIREN);
		}
		printf("数据第 %d 条 , 车辆编号 %d 顺利读取 , 油量:%d", r, VehData[r][vID], VehData[r][vFuel]);
	}

}

PUBLIC:CheckVehicleData(vehicleid)
{
    if(orm_errno(VehData[vehicleid][ORM_ID]) == ERROR_OK)
	{
     	LoadVehicleItem(vehicleid);
	}
	return 1;
}

PUBLIC:SaveVehicleData()
{
    static Hr, Min, Sec, r, panels, doors, lights, tires, Float:vhp;
	gettime(Hr, Min, Sec);
    for(r = 1; r <= GetVehiclePoolSize(); r++)
	{
	    if(VehData[r][vModel] == 0) continue;
		if(VehData[r][vType] != 0)
		{
		    GetVehicleHealth(r, vhp);
		    GetVehicleDamageStatus(r, panels, doors, lights, tires);
		    VehData[r][vPanelStat] = panels;
		    VehData[r][vDoorStat] = doors;
		    VehData[r][vLightStat] = lights;
		    VehData[r][vTireStat] = tires;
		    VehData[r][vHealth] = vhp;
		}
		SaveVehicleItem(r);
		orm_save(VehData[r][ORM_ID]);
	}
	printf("已储存载具资料, 共 %d 条[%02d:%02d:%02d]", r-1, Hr, Min, Sec);
    return 0;//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

stock LoadVehicleItem(vehicleid, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_ITEMS; i < y; i++)
	{
		VehicleItem[vehicleid][i] = EMPTY_VEHITEM;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `vehicleitem` WHERE `VehicleID`='%d'", VehData[vehicleid][vID]);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = VehicleItem[vehicleid][field][ORM_ID] = orm_create("vehicleitem");

		orm_addvar_int(ormid, VehicleItem[vehicleid][field][viID], "id");
		orm_addvar_int(ormid, VehicleItem[vehicleid][field][viType], "ItemType");
		orm_addvar_int(ormid, VehicleItem[vehicleid][field][viItemID], "ItemID");
		orm_addvar_int(ormid, VehicleItem[vehicleid][field][viVehicleID], "VehicleID");
		orm_addvar_int(ormid, VehicleItem[vehicleid][field][viCount], "Count");

		VehicleItem[vehicleid][field][viVehicleID] = VehData[vehicleid][vID];
		orm_setkey(ormid, "VehicleID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveVehicleItem(vehicleid, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(VehicleItem[vehicleid][l][viCount] > 0)
		{
			VehicleItem[vehicleid][l][viVehicleID] = VehData[vehicleid][vID];
			orm_save(VehicleItem[vehicleid][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(VehicleItem[vehicleid][l][ORM_ID]);
				VehicleItem[vehicleid][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(VehicleItem[vehicleid][l][ORM_ID] != ORM:0)
			{
				orm_delete(VehicleItem[vehicleid][l][ORM_ID]);
				orm_destroy(VehicleItem[vehicleid][l][ORM_ID]);
				VehicleItem[vehicleid][l] = EMPTY_VEHITEM;
			}
		}
	}
}

stock GiveVehicleItem(vehicleid, type, id, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, k = -1, j = MAX_ITEMS; l < j; l++)
	{
		if(VehicleItem[vehicleid][l][viType] == type && VehicleItem[vehicleid][l][viItemID] == id)
		{
		    VehicleItem[vehicleid][l][viCount] += count;
		    if(VehicleItem[vehicleid][l][viCount] < 1)
		    {
		        orm_delete(VehicleItem[vehicleid][l][ORM_ID]);
				orm_destroy(VehicleItem[vehicleid][l][ORM_ID]);
				VehicleItem[vehicleid][l] = EMPTY_VEHITEM;
			}
			k = -1;
			break;
		}
		else if(VehicleItem[vehicleid][l][viType] == ITEM_NONE)
		{
		    if(k == -1) k = l;
		}
	}
	if(k != -1)
	{
		if(count < 0) return 0;
		new ORM:ormid = VehicleItem[vehicleid][k][ORM_ID] = orm_create("vehicleitem");

	    orm_addvar_int(ormid, VehicleItem[vehicleid][k][viID], "id");
		orm_addvar_int(ormid, VehicleItem[vehicleid][k][viType], "ItemType");
		orm_addvar_int(ormid, VehicleItem[vehicleid][k][viItemID], "ItemID");
		orm_addvar_int(ormid, VehicleItem[vehicleid][k][viVehicleID], "VehicleID");
		orm_addvar_int(ormid, VehicleItem[vehicleid][k][viCount], "Count");
		orm_setkey(ormid, "id");

        VehicleItem[vehicleid][k][viVehicleID] = VehData[vehicleid][vID];
		VehicleItem[vehicleid][k][viType] = type;
		VehicleItem[vehicleid][k][viItemID] = id;
		VehicleItem[vehicleid][k][viCount] = count;

		orm_insert(VehicleItem[vehicleid][k][ORM_ID]);
	}
	return 1;
}

stock DeleteAllVehicleItems(vehicleid, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(VehicleItem[vehicleid][l][viVehicleID] == VehData[vehicleid][vID] && VehicleItem[vehicleid][l][viType] != ITEM_NONE)
		{
         	orm_delete(VehicleItem[vehicleid][l][ORM_ID]);
			orm_destroy(VehicleItem[vehicleid][l][ORM_ID]);
			VehicleItem[vehicleid][l] = EMPTY_VEHITEM;
		}
	}
  	return 1;
}

stock VehicleHaveItem(vehicleid, itemtype, itemid)
{
	static i, j;
	for(i = 0, j = MAX_ITEMS; i < j; i++)
	{
		if(VehicleItem[vehicleid][i][viType] != itemtype) continue;
		if(VehicleItem[vehicleid][i][viItemID] == itemid)
		{
			return VehicleItem[vehicleid][i][viCount];
		}
	}
	return 0;
}

stock GetVehicleSpace(vehicleid)
{
	if(IsACargoPlane(vehicleid)) return 5000;
	else if(IsACargoHeli(vehicleid)) return 4000;
	else if(IsAPlane(vehicleid)) return 100;
	else if(IsAHelicopter(vehicleid)) return 150;
	else if(IsATrailerTruck(vehicleid)) return 0;
	else if(IsATruck(vehicleid)) return 750;
	else if(IsAVan(vehicleid)) return 500;
	else if(IsACar(vehicleid)) return 250;
	else if(IsAMotorBike(vehicleid)) return 20;
	else if(GetVehicleModel(vehicleid) == 591) return 1000;
	else if(GetVehicleModel(vehicleid) == 435) return 1500;
	else return 0;
}

stock GetVehicleUsedSpace(vehicleid)
{
	static i, j, count;
    count = 0;
    for(i = 0, j = MAX_ITEMS; i < j; i++)
	{
		switch(VehicleItem[vehicleid][i][viType])
	    {
	        case ITEM_USE: count += ItemsList_USE[VehicleItem[vehicleid][i][viItemID]][iuSpace]*VehicleItem[vehicleid][i][viCount];
	        case ITEM_EQ: count += ItemsList_EQ[VehicleItem[vehicleid][i][viItemID]][ieqSpace]*VehicleItem[vehicleid][i][viCount];
	        case ITEM_WEAPON: count += WeaponsList[VehicleItem[vehicleid][i][viItemID]][wSpace];
	    }
	}
	return count;
}

stock IsVehicleHaveSpace(vehicleid)
{
	if(GetVehicleUsedSpace(vehicleid) > GetVehicleSpace(vehicleid)) return 1;
	else return 0;
}

PUBLIC:SaveAllPlayerData()
{
    static Hr, Min, Sec; // 多个static可以用逗号分开来增加效率哟
	gettime(Hr, Min, Sec);

    ForEachPlayer(i)
	{
		if(GetGVarInt("Logged", i) == 1)
		{
		    SavePlayerDatas(i);
		}
	}
	printf("已储存在线玩家资料, 共 %d 笔[%02d:%02d:%02d]", GetConnectedPlayers(), Hr, Min, Sec);
	//return 0;
	//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

static SavePlayerDatas(playerid, bool:disconnect = false)//原本是给离线保存用的 但现在有用计时器保存 所以要做点小改变哟
{
    SavePlayerData(playerid, disconnect);
	SaveLimitData(playerid, disconnect);
	SavePlayerItems(playerid, disconnect);
	SavePlayerPoints(playerid, disconnect);
	SaveSkillData(playerid, disconnect);
	SaveRecordData(playerid, disconnect);
	SaveWeaponData(playerid, disconnect);
	SaveConfigData(playerid, disconnect);
	SaveSickData(playerid, disconnect);
	SavePlayerPet(playerid, disconnect);
	SavePlayerLotto(playerid, disconnect);
	SaveMissionData(playerid, disconnect);
	SavePlayerGift(playerid, disconnect);
}

static SavePlayerData(playerid, bool:disconnect = false)
{
    new Float:px, Float:py, Float:pz, Float:pangle, pworld ,pint, Float:php, Float:par;
    if(GetGVarInt("Spawned", playerid) == 1 && GetGVarInt("Eventing", playerid) == 0 && GetGVarInt("pArena", playerid) == 0)
    {
	    php = GetPlayerHealth_Fix(playerid);
		par = GetPlayerArmour_Fix(playerid);
		if(php > 100.0 + PlayerData[playerid][pMaxHealth]) {PlayerData[playerid][pHealth] = 100.0 + PlayerData[playerid][pMaxHealth];}
		else if(php > 5.0) {PlayerData[playerid][pHealth] = php;}
		else {PlayerData[playerid][pHealth] = 10.0;}
		if(par > 100.0) PlayerData[playerid][pArmour] = 0.0;
		else PlayerData[playerid][pArmour] = par;
	}

    if(AllowSaveCoords(playerid))
	{
	    if(GetGVarFloat("PlayerX", playerid) == 0.0 && GetGVarFloat("PlayerY", playerid) == 0.0 && GetGVarFloat("PlayerZ", playerid) == 0.0)
		{
			GetPlayerPos(playerid, px, py, pz);
			GetPlayerFacingAngle(playerid, pangle);
			pworld = GetPlayerVirtualWorld(playerid);
			pint = GetPlayerInterior(playerid);
		}
		else
		{
		    px = GetGVarFloat("PlayerX", playerid);
		    py = GetGVarFloat("PlayerY", playerid);
		    pz = GetGVarFloat("PlayerZ", playerid);
		    GetPlayerFacingAngle(playerid, pangle);
		    pworld = pint = 0;
		}
		PlayerData[playerid][pX] = px;
		PlayerData[playerid][pY] = py;
		PlayerData[playerid][pZ] = pz;
		PlayerData[playerid][pAngle] = pangle;
		PlayerData[playerid][pWorld] = pworld;
		PlayerData[playerid][pInterior] = pint;
	}

	orm_update(PlayerData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(PlayerData[playerid][ORM_ID]);
	}
}

static SaveLimitData(playerid, bool:disconnect = false)
{
	orm_update(LimitData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(LimitData[playerid][ORM_ID]);
	}
}

static SaveSkillData(playerid, bool:disconnect = false)
{
	orm_update(SkillData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(SkillData[playerid][ORM_ID]);
	}
}

static SaveRecordData(playerid, bool:disconnect = false)
{
	orm_update(RecordData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(RecordData[playerid][ORM_ID]);
	}
}

static SaveWeaponData(playerid, bool:disconnect = false)
{
	new weapons[11][2], i;
	if(GetGVarInt("Spawned", playerid) == 1)
	{
		if(GetGVarInt("RangeShooting", playerid) == 0 && GetGVarInt("Eventing", playerid) == 0 && GetGVarInt("pArena", playerid) == 0)
		{
		    for(i = 0; i < 10; i++)
			{
			    GetPlayerWeaponData(playerid, i, weapons[i][0], weapons[i][1]);
			    if(weapons[i][1] > 9999) weapons[i][1] = 9999;
				else if(weapons[i][1] < 1) weapons[i][0] = weapons[i][1] = 0;
			}
			WeaponData[playerid][pwWeapon0] = weapons[0][0];
			WeaponData[playerid][pwAmmo0] = weapons[0][1];
			WeaponData[playerid][pwWeapon1] = weapons[1][0];
			WeaponData[playerid][pwAmmo1] = weapons[1][1];
			WeaponData[playerid][pwWeapon2] = weapons[2][0];
			WeaponData[playerid][pwAmmo2] = weapons[2][1];
			WeaponData[playerid][pwWeapon3] = weapons[3][0];
			WeaponData[playerid][pwAmmo3] = weapons[3][1];
			WeaponData[playerid][pwWeapon4] = weapons[4][0];
			WeaponData[playerid][pwAmmo4] = weapons[4][1];
			WeaponData[playerid][pwWeapon5] = weapons[5][0];
			WeaponData[playerid][pwAmmo5] = weapons[5][1];
			WeaponData[playerid][pwWeapon6] = weapons[6][0];
			WeaponData[playerid][pwAmmo6] = weapons[6][1];
			WeaponData[playerid][pwWeapon7] = weapons[7][0];
			WeaponData[playerid][pwAmmo7] = weapons[7][1];
			WeaponData[playerid][pwWeapon8] = weapons[8][0];
			WeaponData[playerid][pwAmmo8] = weapons[8][1];
			WeaponData[playerid][pwWeapon9] = weapons[9][0];
			WeaponData[playerid][pwAmmo9] = weapons[9][1];
			WeaponData[playerid][pwWeapon10] = weapons[10][0];
			WeaponData[playerid][pwAmmo10] = weapons[10][1];
		}
	}
	orm_update(WeaponData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(WeaponData[playerid][ORM_ID]);
	}
}

stock ClearAllWeapon(playerid)
{
    ResetPlayerWeapons(playerid);
    ClearPlayerExplosiveShell(playerid);
    WeaponData[playerid][pwWeapon0] =
	WeaponData[playerid][pwAmmo0] =
	WeaponData[playerid][pwWeapon1] =
	WeaponData[playerid][pwAmmo1] =
	WeaponData[playerid][pwWeapon2] =
	WeaponData[playerid][pwAmmo2] =
	WeaponData[playerid][pwWeapon3] =
	WeaponData[playerid][pwAmmo3] =
	WeaponData[playerid][pwWeapon4] =
	WeaponData[playerid][pwAmmo4] =
	WeaponData[playerid][pwWeapon5] =
	WeaponData[playerid][pwAmmo5] =
	WeaponData[playerid][pwWeapon6] =
	WeaponData[playerid][pwAmmo6] =
	WeaponData[playerid][pwWeapon7] =
	WeaponData[playerid][pwAmmo7] =
	WeaponData[playerid][pwWeapon8] =
	WeaponData[playerid][pwAmmo8] =
	WeaponData[playerid][pwWeapon9] =
	WeaponData[playerid][pwAmmo9] =
	WeaponData[playerid][pwWeapon10] =
	WeaponData[playerid][pwAmmo10] = 0;
}

static SaveConfigData(playerid, bool:disconnect = false)
{
	orm_update(ConfigData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(ConfigData[playerid][ORM_ID]);
	}
}

static SaveSickData(playerid, bool:disconnect = false)
{
	orm_update(SickData[playerid][ORM_ID]);
	if(disconnect)
	{
		orm_destroy(SickData[playerid][ORM_ID]);
	}
}

PUBLIC:SetServerRestart()
{
	static string[128];
	format(string, sizeof(string), "服务器重启中...");
    ForEachPlayer(i)
	{
		DisablePlayerCheckpoint(i);
		GameTextForPlayer(i, string, 4000, 5);
		TogglePlayerControllableEx(i,0);
	}
	SaveData();
	SetTimer("RestartServer", 4000, 0);
	//return 1;//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

public OnGameModeExit()
{
	static i, j;
	for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
	    if(VehData[i][vType] == VTYPE_MW || VehData[i][vType] == VTYPE_MISSION || VehData[i][vType] == VTYPE_ARENA)
	    {
	        DeleteVehicle(i);
	    }
	}
	for(i = 0, j = MAX_MATWARS; i < j; i++)
	{
	    if(MatWar[i][mwStatus] != 0) {EndMatWar(i);}
	}
	for(i = 0, j = MAX_PLAYERS; i < j; i++)
	{
	    if(IsPlayerNPC(i)) {DestroyNPC(i);}
	}
	return 1;
}
PUBLIC:RestartServer()
{
	GameModeExit();
}

PUBLIC:CreateVehicleData(ORM:ormid, vehicleid)
{
	orm_addvar_int(ormid, VehData[vehicleid][vID], "id"),
    orm_addvar_int(ormid, VehData[vehicleid][vOwned], "owned"),
	orm_addvar_string(ormid, VehData[vehicleid][vPlate], 32, "plate"),
    orm_addvar_int(ormid, VehData[vehicleid][vModel], "model"),
    orm_addvar_int(ormid, VehData[vehicleid][vPrice], "price"),
    orm_addvar_int(ormid, VehData[vehicleid][vColor1], "color1"),
    orm_addvar_int(ormid, VehData[vehicleid][vColor2], "color2"),
    orm_addvar_float(ormid, VehData[vehicleid][vX], "x"),
    orm_addvar_float(ormid, VehData[vehicleid][vY], "y"),
    orm_addvar_float(ormid, VehData[vehicleid][vZ], "z"),
    orm_addvar_float(ormid, VehData[vehicleid][vA], "a"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent0], "component0"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent1], "component1"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent2], "component2");
    orm_addvar_int(ormid, VehData[vehicleid][vComponent3], "component3"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent4], "component4"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent5], "component5"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent6], "component6"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent7], "component7"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent8], "component8"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent9], "component9"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent10], "component10"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent11], "component11"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent12], "component12"),
    orm_addvar_int(ormid, VehData[vehicleid][vComponent13], "component13"),
    orm_addvar_int(ormid, VehData[vehicleid][vPaintjob], "paintjob"),
    orm_addvar_int(ormid, VehData[vehicleid][vLock], "lock"),
    orm_addvar_int(ormid, VehData[vehicleid][vType], "type"),
    orm_addvar_int(ormid, VehData[vehicleid][vFuel], "fuel");
    orm_addvar_int(ormid, VehData[vehicleid][vWorld], "world");
    orm_addvar_int(ormid, VehData[vehicleid][vInt], "int");
    orm_addvar_int(ormid, VehData[vehicleid][vPanelStat], "panelstat");
    orm_addvar_int(ormid, VehData[vehicleid][vDoorStat], "doorstat");
    orm_addvar_int(ormid, VehData[vehicleid][vLightStat], "lightstat");
    orm_addvar_int(ormid, VehData[vehicleid][vTireStat], "tirestat");
    orm_addvar_float(ormid, VehData[vehicleid][vHealth], "health");
    orm_addvar_int(ormid, VehData[vehicleid][vLockLv1], "locklv1");
    orm_addvar_int(ormid, VehData[vehicleid][vLockLv2], "locklv2");
    orm_addvar_int(ormid, VehData[vehicleid][vLockAlarm], "lockalarm");
    orm_addvar_int(ormid, VehData[vehicleid][vNeon], "neon");
    orm_addvar_int(ormid, VehData[vehicleid][vSpike], "spike");
    orm_addvar_int(ormid, VehData[vehicleid][vTireUp], "tireupgraded");
    orm_addvar_int(ormid, VehData[vehicleid][vBodyUp], "bodyupgraded");
    orm_addvar_float(ormid, VehData[vehicleid][vArmour], "armor");
    orm_addvar_int(ormid, VehData[vehicleid][vSpeedo], "speedo");
    orm_addvar_int(ormid, VehData[vehicleid][vStatus], "status");
    orm_addvar_int(ormid, VehData[vehicleid][vLockLv3], "locklv3");
    orm_addvar_string(ormid, VehData[vehicleid][vLockPass], 24, "password");
    orm_addvar_int(ormid, VehData[vehicleid][vOwner], "owner");
    orm_addvar_int(ormid, VehData[vehicleid][vTrunk], "trunk");
    orm_addvar_int(ormid, VehData[vehicleid][vHood], "hood");
    orm_addvar_int(ormid, VehData[vehicleid][vTaxi], "taxi");
    orm_addvar_int(ormid, VehData[vehicleid][vPolice], "police");
    orm_addvar_int(ormid, VehData[vehicleid][vStoredEstate], "stored");
    orm_addvar_int(ormid, VehData[vehicleid][vDeductible], "deductible");
    orm_addvar_int(ormid, VehData[vehicleid][vDate], "date");
	orm_addvar_int(ormid, VehData[vehicleid][vTurbo], "turbo");
	//return 1;//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

PUBLIC:PlayerExitBuyCar(playerid)
{
	new delcar = GetGVarInt("PlayerBuyingCarID", playerid),//非常多个新数值 且全部可以在一开始代入预设数 我们用new以及用逗号来分开增加效率
		Float:tmpX = GetGVarFloat("SelectorX", playerid),
		Float:tmpY = GetGVarFloat("SelectorY", playerid),
		Float:tmpZ = GetGVarFloat("SelectorZ", playerid),
		tmpI = GetGVarInt("SelectorI", playerid),
		tmpW = GetGVarInt("SelectorW", playerid);

 	SetGVarInt("PlayerBuyingCarAllow", 0, playerid);

	//KillPlayerTimer(PlayerBuyingCarTimer[playerid]);//清除Timer(如果没有 刚好可以无效)
	KillPlayerTimer(GetGVarInt("PlayerBuyingCarTimer", playerid));//改用玩家计时器

	//PlayerBuyingCarTimer[playerid] = -1;
    SetGVarInt("PlayerBuyingCarTimer", -1, playerid);
	DestroyVehicle(delcar);

	//PlayerBuyingCarPlace[playerid] = 0;
	SetGVarInt("PlayerBuyingCarPlace", 0, playerid);
	SetGVarInt("PlayerBuyingCarNum", 0, playerid);

 	SetPlayerPos_Fix(playerid, tmpX, tmpY, tmpZ);
	SetPlayerVirtualWorld(playerid, tmpW);
	SetPlayerInterior(playerid, tmpI);
	SetCameraBehindPlayer(playerid);
	TogglePlayerControllableEx(playerid, 1);
	CancelSelectTextDraw(playerid);

	PlayerTextDrawHide(playerid, BCBox[playerid]);
	PlayerTextDrawHide(playerid, BCPreview[playerid]);
	PlayerTextDrawHide(playerid, BCName[playerid]);
	PlayerTextDrawHide(playerid, BCColorL[playerid]);
	PlayerTextDrawHide(playerid, BCColorR[playerid]);
	PlayerTextDrawHide(playerid, BCPrice[playerid]);
	PlayerTextDrawHide(playerid, BCRight[playerid]);
	PlayerTextDrawHide(playerid, BCLeft[playerid]);
	PlayerTextDrawHide(playerid, BCBuy[playerid]);
	PlayerTextDrawHide(playerid, BCExit[playerid]);
	return 1;
}

PUBLIC:ClearSpot(vehicleid, carplace, spawnid, playerid)
{
	if(VehData[vehicleid][vType] == VTYPE_PLAYER && VehData[vehicleid][vOwned] == 0)
	{
    	DeleteVehicle(vehicleid);
    	DeleteGVar("CSBuyer", vehicleid);
    	DeleteGVar("CSShop", vehicleid);
    }
    switch(carplace)
    {
    	case VS_LV1: {LVCarSell1Spawned[spawnid] = 0;}
    	case VS_GROTTI: {GrottiSpawned[spawnid] = 0;}
    	case VS_SIMEON: {LSCarSell1Spawned[spawnid] = 0;}
    	case VS_WANG: {WangCarSpawned[spawnid] = 0;}
    	case VS_SFBIKE: {SFBikeSpawned[spawnid] = 0;}
    	case VS_BISVEH_LS: {LSBisVehSellSpawned[spawnid] = 0;}
    	case VS_BISVEH_SF: {SFBisVehSellSpawned[spawnid] = 0;}
    	case VS_BISVEH_LV: {LVBisVehSellSpawned[spawnid] = 0;}
    	case VS_LSMUSCLE: {LSMuscleSpawned[spawnid] = 0;}
    	case VS_SF1: {SFCarSell1Spawned[spawnid] = 0;}
    }
    if(GetGVarInt("OrderedVehicle", playerid) == 1)
    {
    	DeleteGVar("OrderedVehicle", playerid);
    }
}

PUBLIC:SecondTimer()
{
	//Clock
	new Year, Month, Day, Hour, Minute, Second, string[144], i, j, ddef, playtimer;
	getdate(Year, Month, Day);
	gettime(Hour, Minute, Second);
	format(string, sizeof(string), "%04d-%02d-%02d", Year, Month, Day);
	TextDrawSetString(YMD, string);
	format(string, sizeof(string), "%02d:%02d:%02d", Hour, Minute, Second);
	TextDrawSetString(HMS, string);
	newhr = Hour;

    phone_second_timer(i);// phone

	if(GetGVarInt("MedicMW")) SetGVarInt("MedicMW", GetGVarInt("MedicMW")-1);//医疗部门的专属任务冷却时间
	new Float:tx, Float:ty, Float:tz, Float:ta;
	for(i = 0, j = sizeof(MissionsList); i < j; i++)
	{
	    if(GetGVarInt("MNPCStatus", MissionsList[i][msBoss]) == STATUS_FINISHED) continue;
	    if(GetGVarInt("MissionCount", i) > 1)
	    {
	        SetGVarInt("MissionCount", GetGVarInt("MissionCount", i)-1, i);
	    }
	    else if(GetGVarInt("MissionCount", i) == 1)
	    {
	        SetGVarInt("MissionCount", 0, i);
	        switch(GetGVarInt("MNPCStatus", MissionsList[i][msBoss]))
	        {
	        	case STATUS_WAITING:
		        {
		            SetGVarInt("MNPCStatus", STATUS_STARTED, MissionsList[i][msBoss]);
		            UpdateGlobalMission(i, 1);
		        }
		        case STATUS_STARTED:
		        {
					SendMissionMessage(i, COLOR_WHITE, ""#TEXT_RED"因为没有在时间内完成任务目标,任务失败!");
		            StopGlobalMission(i);
		        }
		    }
	    }
	}
	for(i = 0, j = MAX_GANGZONES; i < j; i++)
	{
	    if(GangZone[i][gzCreated] == 0) continue;
	    //地盘收益
	    if(GangZone[i][gzOwner] != GANG_ID_NONE)
	    {
	        if(GangZone[i][gzGainTimer] > 0) GangZone[i][gzGainTimer] --;
	        if(GangZone[i][gzGainTimer] == 0)
		    {
		        GangZone[i][gzGainTimer] = 600;//每十分钟增加
		        switch(GangZone[i][gzType])
		        {
		            case GZ_MONEY: if(GangZone[i][gzGain] < MAX_GZGAIN_MONEY) GangZone[i][gzGain] += 100;
		            case GZ_WOOD: if(GangZone[i][gzGain] < MAX_GZGAIN_WOOD) GangZone[i][gzGain] += 5;
		            case GZ_IRON: if(GangZone[i][gzGain] < MAX_GZGAIN_IRON) GangZone[i][gzGain] += 4;
		            case GZ_ROCK: if(GangZone[i][gzGain] < MAX_GZGAIN_ROCK) GangZone[i][gzGain] += 4;
		            case GZ_NITER: if(GangZone[i][gzGain] < MAX_GZGAIN_NITER) GangZone[i][gzGain] += 4;
	         	}
		    }
	    }
	    //其他部分
	    if(GangZone[i][gzStatus] == GZ_UNDERATK)
	    {
	        switch(GangZone[i][gzLevel])
	        {//利用寻找最近道路功能在地盘范围内的道路生成补血包与地雷
	            case 6:
	            {
			        if(GangZone[i][gzTimer2] < 60) GangZone[i][gzTimer2] ++;
			        else
			        {
						GetRandomRoadInZone(GangZone[i][gzMinX], GangZone[i][gzMinY], GangZone[i][gzMaxX], GangZone[i][gzMaxY], tx, ty, tz, ta);
						CreateDropItem(ITEM_HP, 1, 1, tx, ty, tz-0.5, 0, 120, 0, 0, 0, GangZone[i][gzOwner]);
						GangZone[i][gzTimer2] = 0;
			        }
			    }
			    case 7:
	            {
			        if(GangZone[i][gzTimer2] < 45) GangZone[i][gzTimer2] ++;
			        else
			        {
						GetRandomRoadInZone(GangZone[i][gzMinX], GangZone[i][gzMinY], GangZone[i][gzMaxX], GangZone[i][gzMaxY], tx, ty, tz, ta);
						switch(random(2))
						{
                        	case 0: CreateDropItem(ITEM_HP, 1, 1, tx, ty, tz-0.5, 0, 120, 0, 0, 0, GangZone[i][gzOwner]);
                        	case 1: CreateDropItem(ITEM_AR, 1, 1, tx, ty, tz-0.5, 0, 120, 0, 0, 0, GangZone[i][gzOwner]);
                        }
                        GangZone[i][gzTimer2] = 0;
			        }
			    }
			    case 8:
	            {
			        if(GangZone[i][gzTimer2] < 30) GangZone[i][gzTimer2] ++;
			        else
			        {
						GetRandomRoadInZone(GangZone[i][gzMinX], GangZone[i][gzMinY], GangZone[i][gzMaxX], GangZone[i][gzMaxY], tx, ty, tz, ta);
                        switch(random(2))
						{
                        	case 0: CreateDropItem(ITEM_HP, 1, 1, tx, ty, tz-0.5, 0, 120, 0, 0, 0, GangZone[i][gzOwner]);
                        	case 1: CreateDropItem(ITEM_AR, 1, 1, tx, ty, tz-0.5, 0, 120, 0, 0, 0, GangZone[i][gzOwner]);
                        }
                        GangZone[i][gzTimer2] = 0;
			        }
			    }
			}
	    }
	    if(GangZone[i][gzDefense] == 0)
	    {
	        if(GangZone[i][gzStatus] == GZ_UNDERATK)
	        {
				format(string, sizeof(string), "<<地盘战胜利>> "#TEXT_FADEGREEN"因为瓦解了地盘%s的防御度,帮会取得了地盘的控制权,所有成员获得经验值奖励!", GangZone[i][gzName]);
				SendGangMessage(GangZone[i][gzAttacker], COLOR_YELLOW, string);
				ForEachPlayer(p)
				{
				    if(PlayerData[p][pGang] == GangZone[i][gzAttacker])
				    {
				        GivePlayerExp(p, 1500, EXP_GANG);
				    }
				}
				format(string, sizeof(string), "<<地盘战战败>> "#TEXT_FADERED"因为地盘%s的防御度归零,帮会已失去地盘的控制权!", GangZone[i][gzName]);
				SendGangMessage(GangZone[i][gzOwner], COLOR_RED, string);
				Log(ganglog, INFO, "帮会%d顺利占领了帮会%d的地盘%s(%d)", GangZone[i][gzAttacker], GangZone[i][gzOwner], GangZone[i][gzName], GangZone[i][gzID]);
				GangZone[i][gzOwner] = GangZone[i][gzAttacker];
				GangZone[i][gzLevel] = 1;
				GangZone[i][gzDefense] = GetDefaultGangZoneDefense(1);
				GangWarEnd(i);
			}
		}
		else
		{
		    if(GangZone[i][gzTimer] > 0)
			{
			    if(GangZone[i][gzStatus] == GZ_UNDERATK)
	   			{
			    	if(GetAttackerInGangZone(i) == 0)
			    	{
	                	format(string, sizeof(string), "<<地盘战结束> 对地盘%s的进攻已经结束,原因:进攻方没有人了,地盘进入冷却状态,目前剩余防御度为%d", GangZone[i][gzName], GangZone[i][gzDefense]);
						SendGangMessage(GangZone[i][gzAttacker], COLOR_YELLOW, string);
			        	GangWarEnd(i);
	  				}
			    }
				GangZone[i][gzTimer] --;
   			}
			else
		    {
		        switch(GangZone[i][gzStatus])
		        {
		            case GZ_UNDERATK:
		            {
	                    format(string, sizeof(string), "<<地盘战结束> 对地盘%s的进攻已经结束,地盘进入冷却状态,目前剩余防御度为%d", GangZone[i][gzName], GangZone[i][gzDefense]);
						SendGangMessage(GangZone[i][gzAttacker], COLOR_YELLOW, string);
						format(string, sizeof(string), "<<地盘战结束>> "#TEXT_YELLOW"顺利守住了地盘%s,地盘进入冷却状态,目前剩余防御度为%d", GangZone[i][gzName], GangZone[i][gzDefense]);
						SendGangMessage(GangZone[i][gzOwner], COLOR_FADEGREEN, string);
						GangWarEnd(i);
						Log(ganglog, INFO, "帮会%d的地盘%s(%d)已经进入冷却", GangZone[i][gzOwner], GangZone[i][gzName], GangZone[i][gzID]);
					}
					case GZ_CD:
		            {
		                GangZone[i][gzTimer] = 1800;
				        GangZone[i][gzStatus] = GZ_NORMAL;
				        format(string, sizeof(string), "<<地盘> 地盘%s的冷却状态已经结束,恢复为正常状态,将可以被进攻且会开始渐渐恢复防御度", GangZone[i][gzName]);
						SendGangMessage(GangZone[i][gzOwner], COLOR_YELLOW, string);
						Log(ganglog, INFO, "帮会%d的地盘%s(%d)已经冷却结束", GangZone[i][gzOwner], GangZone[i][gzName], GangZone[i][gzID]);
				    }
				    case GZ_NORMAL:
		            {
		                ddef = GetDefaultGangZoneDefense(GangZone[i][gzLevel]);
		                GangZone[i][gzTimer] = 1800;
		                if(GangZone[i][gzDefense] < ddef)
		                {
					        GangZone[i][gzDefense] += 150;
					        if(GangZone[i][gzDefense] > ddef) GangZone[i][gzDefense] = ddef;
					    }
				    }
				}
			}
		}
	}
	for(i = 0, j = MAX_COMPANIES; i < j; i++)
	{
	    if(CompanyData[i][comRadioAir] > 0)//电台自动播放排程
	    {
	        if(CompanyData[i][comRadioAir] == 1)
	        {
	            PlayRadioNextTrack(i);
	        }
	        else CompanyData[i][comRadioAir] --;
	    }
	    if(GetGVarInt("RadioPlaying", i) > 0)
	    {
	        playtimer = GetGVarInt("RadioPlaying", i);
	        if(playtimer == 1)
	        {
	            DeleteGVar("RadioPlaying", i);
	            DeleteGVar("RadioTURL", i);
	        }
	        else SetGVarInt("RadioPlaying", playtimer-1, i);
	    }
	}
	for(i = 0, j = MAX_MATWARS; i < j; i++)
	{
	    if(MatWar[i][mwStatus] == 0) continue;
	    if(MatWar[i][mwTimer] > 0) MatWar[i][mwTimer] --;
	    else
	    {
	        switch(MatWar[i][mwType])
	        {
	            case MW_VEH:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的载具因为超过时间无人运送完成,所以已经被销毁,货物战争结束", MatWar[i][mwMatAmount], ItemsList_USE[MatWar[i][mwMatID]][iuName]);
					SendMatWarMessage(COLOR_WHITE, string);
					EndMatWar(i);
				}
	            case MW_DROP:
	            {
	                if(MatWar[i][mwStatus] == 1)
					{
						format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的空投物即将着陆", MatWar[i][mwMatAmount], ItemsList_USE[MatWar[i][mwMatID]][iuName]);
						SendMatWarMessage(COLOR_WHITE, string);
						MatBattleDrop(i);
					}
	                else
	                {
						format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的空投物因为超过时间无人运送完成,所以已经被销毁,货物战争结束", MatWar[i][mwMatAmount], ItemsList_USE[MatWar[i][mwMatID]][iuName]);
						SendMatWarMessage(COLOR_WHITE, string);
						EndMatWar(i);
					}
	            }
	            case MW_NPC:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的货物因为已经失去信号,货物战争结束", MatWar[i][mwMatAmount], ItemsList_USE[MatWar[i][mwMatID]][iuName]);
					SendMatWarMessage(COLOR_WHITE, string);
					EndMatWar(i);
				}
            }
		}
	}
	for(i = 0, j = MAX_HUNTQUESTS; i < j; i++)
	{
	    if(HuntQuest[i][hqCreated] == 0) continue;
		if(HuntQuest[i][hqStatus] == STATUS_STARTED)
	    {
	        if(GetGVarInt("HQMCount", i) > 0) SetGVarInt("HQMCount", GetGVarInt("HQMCount", i)-1, i);
	        else
			{
				if(HuntQuest[i][hqTime] > 0)
				{
					SetGVarInt("HQMCount", 60, i);
					HuntQuest[i][hqTime] --;
					UpdateHuntQuestTarget(i);
				}
				else HuntQuestEnd(i, 1);
			}
	    }
	}
	for(i = 0, j = MAX_DROPS; i < j; i++)
	{
        if(DropItem[i][idCreated] != 0)
        {
	    	if(GetGVarInt("IDDis", i) > 0)
	    	{
				if(GetGVarInt("IDDis", i) == 1) DeleteDropItem(i);
  				else SetGVarInt("IDDis", GetGVarInt("IDDis", i)-1, i);
	    	}
		}
	}
	for(i = 0, j = MAX_EVENTS; i < j; i++)
	{
	    if(Event[i][evStatus] == STATUS_WAITING)
	    {
	        if(Event[i][evTimer] == 0) EventStart(i);
	        else Event[i][evTimer] --;
	    }
	    else if(Event[i][evStatus] == STATUS_STARTED)
	    {
	        if(Event[i][evTimer] > 0)
	        {
		        if(Event[i][evTimer] == 1) EventEnd(i, 1);
		        else Event[i][evTimer] --;
		    }
		    switch(Event[i][evType])
		    {
		    	case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS:
		        {
		            if(Event[i][evType2] == 8)//动物大乱斗
		            {
			            if(Event[i][evTimer2] == 0)
			            {
							EventSwitchAnimal(i);
							Event[i][evTimer2] = 30;
						}
						else Event[i][evTimer2] --;
					}
				}
				case EVENT_SURVIVE://生存战
				{
				    if(GetGVarInt("ZoneDCount", i) < 10)
				    {
					    if(Event[i][evTimer2] == 0)
				        {
							EventZoneDecrease(i);
							Event[i][evTimer2] = 120;
						}
						else
						{
							Event[i][evTimer2] --;
							if(Event[i][evTimer2] == 90)
							{
								EventZoneDecrease_Prep(i);
								format(string, sizeof(string), "<<PvP活动>> 注意!"#TEXT_RED"活动范围"#TEXT_VIOLET"将在%d秒后缩减!请尽速往"#TEXT_WHITE"白色范围"#TEXT_VIOLET"内移动", Event[i][evTimer2]);
								SendEventMessage(i, COLOR_VIOLET, string);
							}
							else if(Event[i][evTimer2] == 60 || Event[i][evTimer2] == 30 || Event[i][evTimer2] == 10)
							{
								format(string, sizeof(string), "<<PvP活动>> 注意!"#TEXT_RED"活动范围"#TEXT_VIOLET"将在%d秒后缩减!请尽速往"#TEXT_WHITE"白色范围"#TEXT_VIOLET"内移动", Event[i][evTimer2]);
								SendEventMessage(i, COLOR_VIOLET, string);
							}
						}
					}
					if(Event[i][evTimer3] == 0)
				    {
						EventAirDrop(i);
						Event[i][evTimer3] = 150;
					}
					else Event[i][evTimer3] --;
				}
			}
	    }
	}
	for(new arena = ARENA_VEHICLE; arena <= ARENA_PLAYER2; arena++)
	{
		if(GetGVarInt("ArenaT", arena) > 0)
		{
		    new time = GetGVarInt("ArenaT", arena);
		    if(time > 1)
		    {
		        SetGVarInt("ArenaT", time-1, arena);
		    }
		    else
		    {
		        SetGVarInt("ArenaT", 0, arena);
				if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
				{
					ArenaResult(arena);
				}
				else
				{
				    ArenaStart(arena);
				}
		    }
		}
	}
}

PUBLIC:MinuteTimer()
{
	new Hour, Minute, Second, string[144];
	gettime(Hour, Minute, Second);
	if(oldhr < newhr || oldhr == 23 && newhr == 0)//ChangeHour
	{
		switch(newhr)
		{
		    case 0..4:SetWorldTime(2);
		    case 5,6:SetWorldTime(6);
		    case 7..17:SetWorldTime(newhr);
		    case 18:SetWorldTime(21);
			case 19..23:SetWorldTime(0);
		}
		if(newhr == 0) DayChange();
		else if(newhr == 21 && (GetWeekDay() == 2 || GetWeekDay() == 4 || GetWeekDay() == 6))
		{
		    new rand = random(sizeof(BigFootPos)),
				bigfoot = CreateNPC(25056, 0, 5000.0, 0.0, BigFootPos[rand][0], BigFootPos[rand][1], BigFootPos[rand][2], BigFootPos[rand][3], 0, 0);

		    SetGVarInt("BigFootNPC", bigfoot);
		    SetGVarInt("BigFootSpawned", 1);
		    SetGVarInt("BigFootMoved", 1);
		    SetGVarInt("Animal", 22, bigfoot);
		    SetTimer("MoveBigFoot", 60000, 0);
		}
		if(newhr == 6 || newhr == 12 || newhr == 18 || newhr == 0)
		{
			format(string, sizeof(string), "<<乐透>> "#TEXT_WHITE"乐透即将在5分钟后开奖,目前奖池奖金共有$%d,立即前往超市购买彩券吧!", PriceData[prcLotto]);
			SendClientMessageToAll(COLOR_FADEGREEN, string);
			SetTimer("StartLotto", 300000, false);
		}
		if(newhr == 2 || newhr == 14)
		{
		    SendClientMessageToAll(COLOR_FADEGREEN, "** 野生资源即将在3分钟后刷新");
		    SetTimer("ResourceGrow", 180000, false);
		}
		NewHour();
		CheckProp();
		RefreshSystemHuntQuest();
		new i, j;
		for(i = 0, j = sizeof(ClassList); i < j; i++)
		{
		    if((newhr == ClassList[i][clsTime1] || newhr == ClassList[i][clsTime2] || newhr == ClassList[i][clsTime3]) && Minute < 30)
		    {
		        StartClass(i);
		    }
		}
	}

	static Float:recover, rand, k, j, ftype, ftimer, earn;
	for(k = 0, j = MAX_ESTATES; k < j; k++)
	{
	    if(EstateData[k][eType] == ESTATE_FACTORY)
	    {
	    	if(EstateData[k][eSwitch] == 1)
	    	{
	    	    ftype = EstateData[k][eType2];
	    	    if(EstateData[k][eProdTime] > 0)
	    	    {
	    	        if(EstateData[k][eProdTime] == 1)//生产完成
	    	        {
	    	            GiveEstateItem(k, -1, ITEM_USE, FactoryList[ftype][efProd], FactoryList[ftype][efProdAmount]);
	    	            EstateData[k][eProdTime] = 0;
	    	        }
	    	        else EstateData[k][eProdTime] --;
	    	    }
	    	    else
	    	    {
	    	        if(EstateHaveItem(k, ITEM_USE, FactoryList[ftype][efMat]) > 0)
	    	        {
	    	            GiveEstateItem(k, -1, ITEM_USE, FactoryList[ftype][efMat], -1);
	    	            if(EstateData[k][eUpgrade3] == 1) EstateData[k][eProdTime] = FactoryList[ftype][efProdTime]/2;
						else EstateData[k][eProdTime] = FactoryList[ftype][efProdTime];
	    	        }
	    	        else EstateData[k][eSwitch] = 0;
	    	    }
	    	}
	    }
	}
	for(k = 0, j = MAX_COMPANIES; k < j; k++)
	{
	    //媒体业收入
	    if(CompanyData[k][comMedia] == 0) continue;
	    ftimer = GetGVarInt("FameTimer", k), earn = 0;
	    if(ftimer == 0)
	    {
			ftimer = 15;
			CompanyData[k][comMediaFame] += GetRadioListeners(k) + GetTVAudiences(k)*3 - 2;
			if(CompanyData[k][comMediaFame] < 0) CompanyData[k][comMediaFame] = 0;
			else if(CompanyData[k][comMediaFame] > 100) CompanyData[k][comMediaFame] = 100;
			switch(CompanyData[k][comMediaFame])
			{
			    case 0..15: earn = 0;
			    case 16..35: earn = 10;
			    case 36..50: earn = 20;
			    case 51..60: earn = 40;
			    case 61..70: earn = 60;
			    case 71..80: earn = 100;
			    case 81..90: earn = 140;
			    case 91..95: earn = 180;
			    case 96..100: earn = 200;
			}
			if(earn > 0)
			{
				CompanyData[k][comMediaEarn] += earn;
				format(string, sizeof(string), "<<媒体业收入>> 媒体业获得了热度收益$%d,目前媒体业热度为%d/100", earn, CompanyData[k][comMediaFame]);
				SendCompanyMessage(CompanyData[k][comID], COLOR_YELLOW, string);
			}
		}
		else SetGVarInt("FameTimer", ftimer-1, k);
	}
	//Hunger&Stamina
	ForEachPlayer(i)
	{
		if(GetGVarInt("Spawned", i) == 1)
		{
		    if(GetPlayerHealth_Fix(i) < 12.0)
		    {
		        if(SickData[i][scHealth] == 0)
			    {
					if(GetGVarInt("SickMeter1", i) < 10){SetGVarInt("SickMeter1", GetGVarInt("SickMeter1", i)+1, i);}
				    else
				    {
				        rand = random(8);
				        DeleteGVar("SickMeter1", i);
				        switch(rand)
				        {
				            case 0:
				            {
					            SickData[i][scHealth] = 1;
					            SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你生命值太低而得了"#TEXT_YELLOW"破伤风"#TEXT_LIGHTRED",每分钟有机率会失去1点生命");
				            }
				            case 1:
				            {
					            SickData[i][scHealth] = 2;
					            SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你生命值太低而得了"#TEXT_YELLOW"蜂窝性组织炎"#TEXT_LIGHTRED",每分钟有机率会失去2点生命");
				            }
				            case 2:
				            {
					            SickData[i][scHealth] = 3;
					            SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你生命值太低而得了"#TEXT_YELLOW"细菌感染"#TEXT_LIGHTRED",每分钟有机率会失去3点生命");
				            }
				        }
				    }
				}
			}
			if(PlayerData[i][pHunger] > 0.0) {PlayerData[i][pHunger] -= 0.4;}//总计每5分钟损失2.0饥饿
			else
			{
			    PlayerData[i][pHunger] = 0.0;
			    if(SickData[i][scHunger] == 0)
			    {
			        if(GetGVarInt("SickMeter2", i) < 10){SetGVarInt("SickMeter2", GetGVarInt("SickMeter2", i)+1, i);}
					else
					{
						rand = random(6);
						DeleteGVar("SickMeter2", i);
						switch(rand)
						{
						    case 0:
						    {
						        SickData[i][scHunger] = 1;
						        SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你饥饿太久了而得了"#TEXT_YELLOW"健康流失"#TEXT_LIGHTRED",每分钟会失去2点生命");
						    }
						    case 1:
						    {
						        SickData[i][scHunger] = 2;
						        SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你饥饿太久了而得了"#TEXT_YELLOW"体力流失"#TEXT_LIGHTRED",每分钟会失去2点生命");
						    }
						    case 2:
						    {
						        SickData[i][scHunger] = 3;
						        SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你饥饿太久了而得了"#TEXT_YELLOW"厌食症"#TEXT_LIGHTRED",饮食不会恢复任何饥饿值跟生命值");
						    }
						}
					}
				}
			}

			if(PlayerData[i][pStamina] < 100.0 + PlayerData[i][pMaxStamina])
			{
			    recover = 0.0;
			    switch(SkillData[i][psRecover])
			    {
					case 0:{recover = 0.25;}//4分钟恢复1点
					case 1:{recover = 0.3;}
					case 2:{recover = 0.35;}
					case 3:{recover = 0.4;}
					case 4:{recover = 0.45;}
					default:{recover = 0.5;}
				}
				if(SickData[i][scStamBuff] > 0){recover = recover*1.5;}
				if(GetGVarInt("Laying", i) == 1){recover = recover*1.5;}
				PlayerData[i][pStamina] += recover;
				if(PlayerData[i][pStamina] < 2.0 && SickData[i][scStamina] == 0)
				{
				    new tired = GetGVarInt("SickMeter3", i);
				    if(tired >= 15)
				    {
				        rand = random(2);
				        switch(rand)
					    {
					        case 0:
					        {
						        SickData[i][scStamina] = 1;
						        SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你过度疲劳而得了"#TEXT_YELLOW"小感冒"#TEXT_LIGHTRED",每分钟会失去1点生命");
							}
							case 1:
					        {
						        SickData[i][scStamina] = 2;
						        SendClientMessage(i, COLOR_LIGHTRED, "** 生病: 因为你饥饿太久了而"#TEXT_YELLOW"发烧"#TEXT_LIGHTRED"了,每分钟会失去2点生命且感觉头晕目眩");
							}
						}
				        DeleteGVar("SickMeter3", i);
				    }
				    else SetGVarInt("SickMeter3", tired+1, i);
				}
			}

			if(SickData[i][scSickBuff] == 0)
			{
			    if(GetPlayerHealth_Fix(i) > 5.0)
			    {
			        rand = random(2);
			        switch(SickData[i][scHealth])
				    {
				        case 1:
				        {
					        if(rand == 0)
					        {
					            GiveHealth(i, -1.0);
								SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"破伤风"#TEXT_LIGHTRED"而失去1点生命");
							}
						}
						case 2:
				        {
					        if(rand == 0)
					        {
					            GiveHealth(i, -2.0);
								SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"蜂窝性组织炎"#TEXT_LIGHTRED"而失去2点生命");
							}
						}
						case 3:
				        {
					        if(rand == 0)
					        {
					            GiveHealth(i, -3.0);
								SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"细菌感染"#TEXT_LIGHTRED"而失去3点生命");
							}
						}
					}
				}
				switch(SickData[i][scHunger])
				{
					case 1:
					{
						GiveHealth(i, -2.0);
						SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"健康流失"#TEXT_LIGHTRED"而失去2点生命");
					}
					case 2:
					{
						if(PlayerData[i][pStamina] > 0)
						{
							PlayerData[i][pStamina] -= 1.0;
							SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为"#TEXT_YELLOW"体力流失"#TEXT_LIGHTRED"而失去1点体力");
						}
					}
				}
				switch(SickData[i][scStamina])
				{
					case 1:
					{
						GiveHealth(i, -1.0);
						SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"小感冒"#TEXT_LIGHTRED"而失去1点生命");
					}
					case 2:
					{
						GiveHealth(i, -2.0);
						SendClientMessage(i, COLOR_LIGHTRED, "** 疾病: 你因为疾病"#TEXT_YELLOW"发烧"#TEXT_LIGHTRED"而失去2点生命,且感觉头晕目眩");
						SetPlayerDrunkLevel(i, 2000);
					}
				}
			}
			if(LimitData[i][plContract] > 0) {LimitData[i][plContract] --;}
			if(oldhr == 23 && newhr == 0)//换日
			{
				RecordData[i][prLogDays] ++;
			}
			//重置玩家所有上限}
		}
	}
	for(k = 0, j = sizeof(PlantData); k < j; k++)
	{
	    if(PlantData[k][ptPlantID] != 0)
	    {
	    	PlantGrow(k);
	    }
	}
	oldhr = Hour;
	//return 1;//如果不需要回传值的函数不用回传也可以的哟 增加效率
}

PUBLIC:DayChange()
{
    for(new i = 0; i < sizeof(GasStationPos); i ++)//加油站重置
	{
	    if(GasStationFilled[i] == 1)
	    {
	        GasStationFilled[0] = 0;
	    }
	}
	ForEachPlayer(p)
	{
	    LimitData[p][plCarSellCount] = 0;
	}
	ResetSystemDeal();
	ResetGoodBuyer();
}

PUBLIC:LevelChecker()
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pLevel] >= 6)
		{
		    if(RecordData[i][prMSweet] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_SWEET, "你是新来的小夥子?打给我,我这有工作给你");
		        RecordData[i][prMSweet] = 0;
		    }
		    else if(RecordData[i][prMSimeon] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_SIMEON, "你刚到镇上对吧?打给我西门,我这有不错的赚钱机会");
		        RecordData[i][prMSimeon] = 0;
		    }
		}
		if(PlayerData[i][pLevel] >= 10)
		{
		    if(RecordData[i][prMTrevor] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_TREVOR, "打给我!如果你对肮脏活有兴趣的话...");
		        RecordData[i][prMTrevor] = 0;
		    }
		}
		if(PlayerData[i][pLevel] >= 12)
		{
		    if(RecordData[i][prMCesar] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_CESAR, "嘿兄弟,你的名声渐渐传开了,打给我我这边可能有你可以解决的活");
		        RecordData[i][prMCesar] = 0;
		    }
		}
		if(PlayerData[i][pLevel] >= 20)
		{
		    if(RecordData[i][prMEmmet] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_EMMET, "小子,需要枪或是工作机会?打给我就对了");
		        RecordData[i][prMEmmet] = 0;
		    }
		    else if(RecordData[i][prMWoozie] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_WOOZIE, "越来越多人知道你了,以你的能力搞不好能解决我这里棘手的事,如果有兴趣的话就连络我,酬劳绝对不会少");
		        RecordData[i][prMWoozie] = 0;
		    }
		}
		if(PlayerData[i][pLevel] >= 30)
		{
		    if(RecordData[i][prMToreno] == -1)
		    {
		        SendPlayerTextMsg_NPC(i, MNPC_TORENO, "孩子,我欣赏你的才能,打给我,我这里有些高报酬的特别活正适合你");
		        RecordData[i][prMToreno] = 0;
		    }
		}
	}
}

public OnDynamicActorStreamIn(actorid, forplayerid)
{
	// Force Sync
	SetDynamicActorPos(actorid, GetGVarFloat("dAtrX", actorid), GetGVarFloat("dAtrY", actorid), GetGVarFloat("dAtrZ", actorid));

    new
    pworld = GetPlayerVirtualWorld(forplayerid);
	if(pworld <= 5)
	{
		if(actorid == Striper1[pworld] || actorid == Striper2[pworld])
		{
		    if(GetGVarInt("StripDacing", pworld) == 0)
		    {
				new paid = GetGVarInt("StripPaid", pworld);
				switch(paid)
				{
			    	case 0 .. 5: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_a", 4.1, 1, 0, 0, 0, 0);
			    	case 6 .. 10: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_b", 4.1, 1, 0, 0, 0, 0);
			    	default: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_c", 4.1, 1, 0, 0, 0, 0);
				}
			}
		}
	}
    return 1;
}

PUBLIC:UnFreeze(playerid)
{
    if(GetGVarInt("Cuffed", playerid) == 0)
    {
		TogglePlayerControllableEx(playerid,1);
	}
}

PUBLIC:UnLoad(playerid)
{
	new vehicleid = GetPlayerVehicleID(playerid), trailerid = GetVehicleTrailer(vehicleid);
    SetVehicleToRespawn(trailerid);
	TogglePlayerControllableEx(playerid,1);
	ShowPTD(playerid, 1, 1);
}

stock SendRangeMessage(Float:range, playerid, const string[], color1, color2, color3, color4, color5)
{
	if(GetGVarInt("Logged", playerid) && GetPlayerState(playerid) != PLAYER_STATE_SPECTATING && GetGVarInt("Eventing", playerid) == 0)
	{
		static Float:px, Float:py, Float:pz, Float:distance, pworld;
		GetPlayerPos(playerid, px, py, pz);
		pworld = GetPlayerVirtualWorld(playerid);
        ForEachPlayer(i)
		{
			if(GetPlayerVirtualWorld(i) == pworld)
		    {
				distance = GetPlayerDistanceFromPoint(i, px, py, pz);//不用Ex,让Spectate的玩家看得到环境消息以及对话内容
				if(distance < range/16.0) SendClientMessage(i, color1, string);
				else if(distance < range/8.0) SendClientMessage(i, color2, string);
				else if(distance < range/4.0) SendClientMessage(i, color3, string);
				else if(distance < range/2.0) SendClientMessage(i, color4, string);
				else if(distance < range) SendClientMessage(i, color5, string);
			}
		}
	}
	return 1;
}

stock SendRangeActorMessage(Float:range, actorid, const string[], color1, color2, color3, color4, color5)
{
	if(IsValidDynamicActor(actorid))
	{
		static Float:px, Float:py, Float:pz, Float:distance, pworld;
		GetDynamicActorPos(actorid, px, py, pz);
		pworld = GetDynamicActorVirtualWorld(actorid);
        ForEachPlayer(i)
		{
		    if(GetPlayerVirtualWorld(i) == pworld)
		    {
				distance = GetPlayerDistanceFromPoint(i, px, py, pz);
				if(distance < range/16.0) SendClientMessage(i, color1, string);
				else if(distance < range/8.0) SendClientMessage(i, color2, string);
				else if(distance < range/4.0) SendClientMessage(i, color3, string);
				else if(distance < range/2.0) SendClientMessage(i, color4, string);
				else if(distance < range) SendClientMessage(i, color5, string);
			}
		}
	}
	return 1;
}

stock SendRangeNPCMessage(Float:range, npcid, const string[], color1, color2, color3, color4, color5)
{
	if(IsPlayerNPC(npcid))
	{
		static Float:px, Float:py, Float:pz, Float:distance, pworld;
		FCNPC_GetPosition(npcid, px, py, pz);
		pworld = FCNPC_GetVirtualWorld(npcid);
        ForEachPlayer(i)
		{
		    if(GetPlayerVirtualWorld(i) == pworld)
		    {
				distance = GetPlayerDistanceFromPointEx(i, px, py, pz);
				if(distance < range/16.0) SendClientMessage(i, color1, string);
				else if(distance < range/8.0) SendClientMessage(i, color2, string);
				else if(distance < range/4.0) SendClientMessage(i, color3, string);
				else if(distance < range/2.0) SendClientMessage(i, color4, string);
				else if(distance < range) SendClientMessage(i, color5, string);
			}
		}
	}
	return 1;
}

stock SendRangeVehicleMessage(Float:range, vehicleid, const string[], color1, color2, color3, color4, color5)
{
	if(VehData[vehicleid][vModel] != 0)
	{
		static Float:px, Float:py, Float:pz, Float:distance, pworld;
		GetVehiclePos(vehicleid, px, py, pz);
		pworld = GetVehicleVirtualWorld(vehicleid);
        ForEachPlayer(i)
		{
		    if(GetPlayerVirtualWorld(i) == pworld)
		    {
				distance = GetPlayerDistanceFromPointEx(i, px, py, pz);
				if(distance < range/16.0) SendClientMessage(i, color1, string);
				else if(distance < range/8.0) SendClientMessage(i, color2, string);
				else if(distance < range/4.0) SendClientMessage(i, color3, string);
				else if(distance < range/2.0) SendClientMessage(i, color4, string);
				else if(distance < range) SendClientMessage(i, color5, string);
			}
		}
	}
	return 1;
}

PUBLIC:Robbable(actorid)
{
    ShookActor[actorid] = 0;
    ClearDynamicActorAnimations(actorid);
}

PUBLIC:Robbed(actorid, playerid)
{
	static Float:ax, Float:ay, Float:az, Float:aa, world, rand;
	GetDynamicActorPos(actorid, ax, ay, az);
	GetDynamicActorFacingAngle(actorid, aa);
	world = GetDynamicActorVirtualWorld(actorid);
	rand = 500 + random(2500);
    ApplyDynamicActorAnimation(actorid, "SHOP", "SHP_Rob_HandsUp", 4.1, 0, 0, 0, 0, 60000);
    GetXYInFrontOfPos(ax, ay, aa, ax, ay, 2.5);
    CreateDropItem(ITEM_CASH, 1, rand, ax, ay, az, world, 120);
    PlayerData[playerid][pRobbed] += rand;
    ShookActor[actorid] = 99;
}

PUBLIC:CreateAllPlayerTextDraw(playerid)
{
	new tmptimer, i;
	
	Background[playerid] = CreatePlayerTextDraw(playerid, -4.000000, -1.000000, "mdl-5000:backv");
	PlayerTextDrawFont(playerid, Background[playerid], 4);
	PlayerTextDrawLetterSize(playerid, Background[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, Background[playerid], 646.500000, 454.000000);
	PlayerTextDrawSetOutline(playerid, Background[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Background[playerid], 0);
	PlayerTextDrawAlignment(playerid, Background[playerid], 1);
	PlayerTextDrawColor(playerid, Background[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Background[playerid], 125);
	PlayerTextDrawBoxColor(playerid, Background[playerid], 255);
	PlayerTextDrawUseBox(playerid, Background[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Background[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Background[playerid], 0);
    //HUD
	DefaultTD[playerid] = CreatePlayerTextDraw(playerid, 0.000000, 0.000000, "_");
	HUDBack[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 424.000000, "_");
	PlayerTextDrawLetterSize(playerid, HUDBack[playerid], 0.600000, 2.599992);
	PlayerTextDrawTextSize(playerid, HUDBack[playerid], 298.500000, 640.000000);
	PlayerTextDrawAlignment(playerid, HUDBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, HUDBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, HUDBack[playerid], 1);

    HPBarBack[playerid] = CreatePlayerTextDraw(playerid, 546.000000, 64.000000, "_");
	PlayerTextDrawLetterSize(playerid, HPBarBack[playerid], 0.187500, 1.000000);
	PlayerTextDrawTextSize(playerid, HPBarBack[playerid], 608.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, HPBarBack[playerid], 1);
	PlayerTextDrawBoxColor(playerid, HPBarBack[playerid], 255);
	PlayerTextDrawUseBox(playerid, HPBarBack[playerid], 1);

	HPBar[playerid] = CreatePlayerTextDraw(playerid, 547.000000, 65.000000, "_");
	PlayerTextDrawLetterSize(playerid, HPBar[playerid], 0.187500, 0.799998);
	PlayerTextDrawTextSize(playerid, HPBar[playerid], 543.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, HPBar[playerid], 1);
	PlayerTextDrawBoxColor(playerid, HPBar[playerid], 0xB8FF00FF);
	PlayerTextDrawUseBox(playerid, HPBar[playerid], 1);

	ARBarBack[playerid] = CreatePlayerTextDraw(playerid, 546.000000, 45.000000, "_");
	PlayerTextDrawLetterSize(playerid, ARBarBack[playerid], 0.187500, 1.000000);
	PlayerTextDrawTextSize(playerid, ARBarBack[playerid], 608.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, ARBarBack[playerid], 1);
	PlayerTextDrawBoxColor(playerid, ARBarBack[playerid], 255);
	PlayerTextDrawUseBox(playerid, ARBarBack[playerid], 1);

	ARBar[playerid] = CreatePlayerTextDraw(playerid, 547.000000, 46.000000, "_");
	PlayerTextDrawLetterSize(playerid, ARBar[playerid], 0.187500, 0.799998);
	PlayerTextDrawTextSize(playerid, ARBar[playerid], 543.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, ARBar[playerid], 1);
	PlayerTextDrawBoxColor(playerid, ARBar[playerid], -2016478465);
	PlayerTextDrawUseBox(playerid, ARBar[playerid], 1);

	HPNum[playerid] = CreatePlayerTextDraw(playerid, 545.000000, 60.000000, "100");
	PlayerTextDrawFont(playerid, HPNum[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HPNum[playerid], 0.237499, 1.649999);
	PlayerTextDrawSetOutline(playerid, HPNum[playerid], 0);
	PlayerTextDrawSetShadow(playerid, HPNum[playerid], 1);
	PlayerTextDrawAlignment(playerid, HPNum[playerid], 1);
	PlayerTextDrawColor(playerid, HPNum[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, HPNum[playerid], 255);

	ARNum[playerid] = CreatePlayerTextDraw(playerid, 545.000000, 41.000000, "100");
	PlayerTextDrawFont(playerid, ARNum[playerid], 2);
	PlayerTextDrawLetterSize(playerid, ARNum[playerid], 0.237499, 1.649999);
	PlayerTextDrawSetOutline(playerid, ARNum[playerid], 0);
	PlayerTextDrawSetShadow(playerid, ARNum[playerid], 1);
	PlayerTextDrawAlignment(playerid, ARNum[playerid], 1);
	PlayerTextDrawColor(playerid, ARNum[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, ARNum[playerid], 255);

	HUDName[playerid] = CreatePlayerTextDraw(playerid, 6.000000, 426.000000, "名称");
	PlayerTextDrawFont(playerid, HUDName[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDName[playerid], 0.383332, 2.000000);
	PlayerTextDrawSetOutline(playerid, HUDName[playerid], 1);
	PlayerTextDrawAlignment(playerid, HUDName[playerid], 1);
	PlayerTextDrawColor(playerid, HUDName[playerid], -1);
	PlayerTextDrawSetProportional(playerid, HUDName[playerid], 1);

	HUDExpBarBack[playerid] = CreatePlayerTextDraw(playerid, 241.000000, 428.000000, "_");
	PlayerTextDrawFont(playerid, HUDExpBarBack[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDExpBarBack[playerid], 0.600000, 1.699980);
	PlayerTextDrawTextSize(playerid, HUDExpBarBack[playerid], 400.000000, 159.500000);
	PlayerTextDrawAlignment(playerid, HUDExpBarBack[playerid], 1);
	PlayerTextDrawBoxColor(playerid, HUDExpBarBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, HUDExpBarBack[playerid], 1);

	HUDExpBar[playerid] = CreatePlayerTextDraw(playerid, 241.000000, 429.000000, "_");
	PlayerTextDrawFont(playerid, HUDExpBar[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDExpBar[playerid], 0.600000, 1.449980);
	PlayerTextDrawTextSize(playerid, HUDExpBar[playerid], 399.000000, 68.000000);
	PlayerTextDrawAlignment(playerid, HUDExpBar[playerid], 1);
	PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_WHITE);
	PlayerTextDrawUseBox(playerid, HUDExpBar[playerid], 1);

	HUDLV[playerid] = CreatePlayerTextDraw(playerid, 241.000000, 426.000000, "60");
	PlayerTextDrawFont(playerid, HUDLV[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HUDLV[playerid], 0.320832, 1.850000);
	PlayerTextDrawSetOutline(playerid, HUDLV[playerid], 1);
	PlayerTextDrawAlignment(playerid, HUDLV[playerid], 1);
	PlayerTextDrawColor(playerid, HUDLV[playerid], -1);
	PlayerTextDrawSetProportional(playerid, HUDLV[playerid], 1);

	HUDExp[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 428.000000, "0/0");
	PlayerTextDrawFont(playerid, HUDExp[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HUDExp[playerid], 0.237499, 1.450000);
	PlayerTextDrawSetOutline(playerid, HUDExp[playerid], 1);
	PlayerTextDrawAlignment(playerid, HUDExp[playerid], 2);
	PlayerTextDrawColor(playerid, HUDExp[playerid], -1);
	PlayerTextDrawSetProportional(playerid, HUDExp[playerid], 1);

	HUDHungerBarBack[playerid] = CreatePlayerTextDraw(playerid, 16.000000, 327.000000, "_");
	PlayerTextDrawFont(playerid, HUDHungerBarBack[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDHungerBarBack[playerid], 0.600000, 10.300003);
	PlayerTextDrawTextSize(playerid, HUDHungerBarBack[playerid], 282.000000, 9.500000);
	PlayerTextDrawAlignment(playerid, HUDHungerBarBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, HUDHungerBarBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, HUDHungerBarBack[playerid], 1);

	HUDHungerBar[playerid] = CreatePlayerTextDraw(playerid, 16.000000, 423.000000, "_");
	PlayerTextDrawFont(playerid, HUDHungerBar[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDHungerBar[playerid], 0.591665, -11.050025);
	PlayerTextDrawTextSize(playerid, HUDHungerBar[playerid], 281.000000, 7.000000);
	PlayerTextDrawAlignment(playerid, HUDHungerBar[playerid], 2);
	PlayerTextDrawBoxColor(playerid, HUDHungerBar[playerid], COLOR_DARKYELLOWGREEN);
	PlayerTextDrawUseBox(playerid, HUDHungerBar[playerid], 1);

	HUDStamBarBack[playerid] = CreatePlayerTextDraw(playerid, 124.000000, 327.000000, "_");
	PlayerTextDrawFont(playerid, HUDStamBarBack[playerid], 1);
	PlayerTextDrawLetterSize(playerid, HUDStamBarBack[playerid], 0.600000, 10.300003);
	PlayerTextDrawTextSize(playerid, HUDStamBarBack[playerid], 282.000000, 9.500000);
	PlayerTextDrawAlignment(playerid, HUDStamBarBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, HUDStamBarBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, HUDStamBarBack[playerid], 1);

	HUDStamBar[playerid] = CreatePlayerTextDraw(playerid, 124.000000, 423.000000, "_");
	PlayerTextDrawFont(playerid, HUDStamBar[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HUDStamBar[playerid], 0.591665, -11.050025);
	PlayerTextDrawTextSize(playerid, HUDStamBar[playerid], 281.000000, 7.000000);
	PlayerTextDrawAlignment(playerid, HUDStamBar[playerid], 2);
	PlayerTextDrawBoxColor(playerid, HUDStamBar[playerid], COLOR_RED);
	PlayerTextDrawUseBox(playerid, HUDStamBar[playerid], 1);

	HUDHungerIcon[playerid] = CreatePlayerTextDraw(playerid, 8.000000, 304.000000, "mdl-1014:hungericon");
	PlayerTextDrawFont(playerid, HUDHungerIcon[playerid], 4);
	PlayerTextDrawLetterSize(playerid, HUDHungerIcon[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, HUDHungerIcon[playerid], 15.000000, 16.000000);

	HUDStamIcon[playerid] = CreatePlayerTextDraw(playerid, 116.000000, 304.000000, "mdl-1014:hpicon");
	PlayerTextDrawFont(playerid, HUDStamIcon[playerid], 4);
	PlayerTextDrawLetterSize(playerid, HUDStamIcon[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, HUDStamIcon[playerid], 15.000000, 16.000000);

	HUDHungerAmount[playerid] = CreatePlayerTextDraw(playerid, 16.000000, 408.000000, "100");
	PlayerTextDrawFont(playerid, HUDHungerAmount[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HUDHungerAmount[playerid], 0.158333, 1.350000);
	PlayerTextDrawSetOutline(playerid, HUDHungerAmount[playerid], 1);
	PlayerTextDrawAlignment(playerid, HUDHungerAmount[playerid], 2);
	PlayerTextDrawColor(playerid, HUDHungerAmount[playerid], -1);
	PlayerTextDrawSetProportional(playerid, HUDHungerAmount[playerid], 1);

	HUDStamAmount[playerid] = CreatePlayerTextDraw(playerid, 124.500000, 408.000000, "100");
	PlayerTextDrawFont(playerid, HUDStamAmount[playerid], 2);
	PlayerTextDrawLetterSize(playerid, HUDStamAmount[playerid], 0.158333, 1.350000);
	PlayerTextDrawSetOutline(playerid, HUDStamAmount[playerid], 1);
	PlayerTextDrawAlignment(playerid, HUDStamAmount[playerid], 2);
	PlayerTextDrawColor(playerid, HUDStamAmount[playerid], -1);
	PlayerTextDrawSetProportional(playerid, HUDStamAmount[playerid], 1);

    //Speedo
    SpeedBack[playerid] = CreatePlayerTextDraw(playerid, 550.000000, 314.000000, "_");
	PlayerTextDrawLetterSize(playerid, SpeedBack[playerid], 0.600000, 2.149981);
	PlayerTextDrawTextSize(playerid, SpeedBack[playerid], 131.000000, 89.000000);
	PlayerTextDrawAlignment(playerid, SpeedBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, SpeedBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, SpeedBack[playerid], 1);

	Speed[playerid] = CreatePlayerTextDraw(playerid, 556.000000, 337.000000, "100");
	PlayerTextDrawFont(playerid, Speed[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed[playerid], 0.554166, 4.500007);
	PlayerTextDrawTextSize(playerid, Speed[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, Speed[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Speed[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed[playerid], 3);
	PlayerTextDrawColor(playerid, Speed[playerid], -1);

	SpeedText[playerid] = CreatePlayerTextDraw(playerid, 556.000000, 371.000000, "km/h");
	PlayerTextDrawFont(playerid, SpeedText[playerid], 2);
	PlayerTextDrawLetterSize(playerid, SpeedText[playerid], 0.345833, 2.099999);
	PlayerTextDrawTextSize(playerid, SpeedText[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, SpeedText[playerid], 1);
	PlayerTextDrawSetShadow(playerid, SpeedText[playerid], 0);
	PlayerTextDrawAlignment(playerid, SpeedText[playerid], 1);
	PlayerTextDrawColor(playerid, SpeedText[playerid], -1);

	SpeedFuel1[playerid] = CreatePlayerTextDraw(playerid, 607.000000, 291.000000, "F");
	PlayerTextDrawFont(playerid, SpeedFuel1[playerid], 2);
	PlayerTextDrawLetterSize(playerid, SpeedFuel1[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, SpeedFuel1[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, SpeedFuel1[playerid], 1);
	PlayerTextDrawSetShadow(playerid, SpeedFuel1[playerid], 0);
	PlayerTextDrawAlignment(playerid, SpeedFuel1[playerid], 1);
	PlayerTextDrawColor(playerid, SpeedFuel1[playerid], -1);

	SpeedFuel2[playerid] = CreatePlayerTextDraw(playerid, 607.000000, 390.000000, "E");
	PlayerTextDrawFont(playerid, SpeedFuel2[playerid], 2);
	PlayerTextDrawLetterSize(playerid, SpeedFuel2[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, SpeedFuel2[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, SpeedFuel2[playerid], 1);
	PlayerTextDrawSetShadow(playerid, SpeedFuel2[playerid], 0);
	PlayerTextDrawAlignment(playerid, SpeedFuel2[playerid], 1);
	PlayerTextDrawColor(playerid, SpeedFuel2[playerid], -1);

	SpeedEngine[playerid] = CreatePlayerTextDraw(playerid, 507.000000, 315.000000, "mdl-1004:engine");
	PlayerTextDrawFont(playerid, SpeedEngine[playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedEngine[playerid], 16.000000, 16.000000);

	SpeedHealth[playerid] = CreatePlayerTextDraw(playerid, 537.000000, 316.000000, "mdl-1004:danger");
	PlayerTextDrawFont(playerid, SpeedHealth[playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedHealth[playerid], 16.000000, 16.000000);

 	SpeedLock[playerid] = CreatePlayerTextDraw(playerid, 567.000000, 317.000000, "mdl-1004:lock");
	PlayerTextDrawFont(playerid, SpeedLock[playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedLock[playerid], 16.000000, 16.000000);

 	SpeedBeep[0][playerid] = CreatePlayerTextDraw(playerid, 524.000000, 320.000000, "mdl-1004:black");
	PlayerTextDrawFont(playerid, SpeedBeep[0][playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedBeep[0][playerid], 8.000000, 8.000000);

    SpeedBeep[1][playerid] = CreatePlayerTextDraw(playerid, 554.000000, 320.000000, "mdl-1004:black");
	PlayerTextDrawFont(playerid, SpeedBeep[1][playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedBeep[1][playerid], 8.000000, 8.000000);

	SpeedBeep[2][playerid] = CreatePlayerTextDraw(playerid, 584.000000, 320.000000, "mdl-1004:black");
	PlayerTextDrawFont(playerid, SpeedBeep[2][playerid], 4);
	PlayerTextDrawTextSize(playerid, SpeedBeep[2][playerid], 8.000000, 8.000000);

	SpeedBarBack[0][playerid] = CreatePlayerTextDraw(playerid, 507.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, SpeedBarBack[0][playerid], 0.741666, -0.400018);
	PlayerTextDrawTextSize(playerid, SpeedBarBack[0][playerid], 551.000000, 86.500000);
	PlayerTextDrawAlignment(playerid, SpeedBarBack[0][playerid], 1);
	PlayerTextDrawBoxColor(playerid, SpeedBarBack[0][playerid], -1);
	PlayerTextDrawUseBox(playerid, SpeedBarBack[0][playerid], 1);

	SpeedBarBack[1][playerid] = CreatePlayerTextDraw(playerid, 577.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, SpeedBarBack[1][playerid], 0.741666, -0.400018);
	PlayerTextDrawTextSize(playerid, SpeedBarBack[1][playerid], 551.000000, 86.500000);
	PlayerTextDrawAlignment(playerid, SpeedBarBack[1][playerid], 1);
	PlayerTextDrawBoxColor(playerid, SpeedBarBack[1][playerid], -2686721);
	PlayerTextDrawUseBox(playerid, SpeedBarBack[1][playerid], 1);

	SpeedBarBack[2][playerid] = CreatePlayerTextDraw(playerid, 599.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, SpeedBarBack[2][playerid], 0.741666, -0.400018);
	PlayerTextDrawTextSize(playerid, SpeedBarBack[2][playerid], 573.500000, 80.000000);
	PlayerTextDrawAlignment(playerid, SpeedBarBack[2][playerid], 1);
	PlayerTextDrawBoxColor(playerid, SpeedBarBack[2][playerid], -1962934017);
	PlayerTextDrawUseBox(playerid, SpeedBarBack[2][playerid], 1);

	SpeedBar[playerid] = CreatePlayerTextDraw(playerid, 509.000000, 395.000000, "_");
	PlayerTextDrawLetterSize(playerid, SpeedBar[playerid], 0.741666, 0.799982);
	PlayerTextDrawTextSize(playerid, SpeedBar[playerid], 505.000000, 21.500000);//minimal
	PlayerTextDrawAlignment(playerid, SpeedBar[playerid], 1);
	PlayerTextDrawBoxColor(playerid, SpeedBar[playerid], 852308735);
	PlayerTextDrawUseBox(playerid, SpeedBar[playerid], 1);

	//Speedo2
	Speed2Back[playerid] = CreatePlayerTextDraw(playerid, 564.000000, 297.000000, "_");
	PlayerTextDrawLetterSize(playerid, Speed2Back[playerid], 0.600000, 13.600015);
	PlayerTextDrawTextSize(playerid, Speed2Back[playerid], 308.500000, 130.000000);
	PlayerTextDrawAlignment(playerid, Speed2Back[playerid], 2);
	PlayerTextDrawBoxColor(playerid, Speed2Back[playerid], 2094792779);
	PlayerTextDrawUseBox(playerid, Speed2Back[playerid], 1);

	Speed2Speed[playerid] = CreatePlayerTextDraw(playerid, 564.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, Speed2Speed[playerid], 0.600000, -12.050023);
	PlayerTextDrawTextSize(playerid, Speed2Speed[playerid], 298.500000, 49.000000);
	PlayerTextDrawAlignment(playerid, Speed2Speed[playerid], 2);
	PlayerTextDrawBoxColor(playerid, Speed2Speed[playerid], 1560215702);
	PlayerTextDrawUseBox(playerid, Speed2Speed[playerid], 1);

	Speed2Health[playerid] = CreatePlayerTextDraw(playerid, 523.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, Speed2Health[playerid], 0.600000, -12.050023);
	PlayerTextDrawTextSize(playerid, Speed2Health[playerid], 298.500000, 11.500000);
	PlayerTextDrawAlignment(playerid, Speed2Health[playerid], 2);
	PlayerTextDrawBoxColor(playerid, Speed2Health[playerid], 1560215702);
	PlayerTextDrawUseBox(playerid, Speed2Health[playerid], 1);

	Speed2Fuel[playerid] = CreatePlayerTextDraw(playerid, 605.000000, 407.000000, "_");
	PlayerTextDrawLetterSize(playerid, Speed2Fuel[playerid], 0.600000, -12.050023);
	PlayerTextDrawTextSize(playerid, Speed2Fuel[playerid], 298.500000, 11.500000);
	PlayerTextDrawSetShadow(playerid, Speed2Fuel[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2Fuel[playerid], 2);
	PlayerTextDrawBoxColor(playerid, Speed2Fuel[playerid], 1560215702);
	PlayerTextDrawUseBox(playerid, Speed2Fuel[playerid], 1);

	Speed2SNum[playerid] = CreatePlayerTextDraw(playerid, 564.000000, 341.000000, "100");
	PlayerTextDrawFont(playerid, Speed2SNum[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2SNum[playerid], 0.645833, 4.399999);
	PlayerTextDrawSetOutline(playerid, Speed2SNum[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2SNum[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2SNum[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2SNum[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2SNum[playerid], 1);

	Speed2SText[playerid] = CreatePlayerTextDraw(playerid, 564.000000, 374.000000, "KM/H");
	PlayerTextDrawFont(playerid, Speed2SText[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2SText[playerid], 0.275000, 2.449999);
	PlayerTextDrawSetOutline(playerid, Speed2SText[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2SText[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2SText[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2SText[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2SText[playerid], 1);

	Speed2FNum[playerid] = CreatePlayerTextDraw(playerid, 605.000000, 389.000000, "100");
	PlayerTextDrawFont(playerid, Speed2FNum[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2FNum[playerid], 0.208333, 1.600000);
	PlayerTextDrawSetOutline(playerid, Speed2FNum[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2FNum[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2FNum[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2FNum[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2FNum[playerid], 1);

	Speed2HNum[playerid] = CreatePlayerTextDraw(playerid, 523.000000, 392.000000, "2000");
	PlayerTextDrawFont(playerid, Speed2HNum[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2HNum[playerid], 0.141667, 1.300000);
	PlayerTextDrawSetOutline(playerid, Speed2HNum[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2HNum[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2HNum[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2HNum[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2HNum[playerid], 1);

	Speed2FText[playerid] = CreatePlayerTextDraw(playerid, 605.000000, 299.000000, "F");
	PlayerTextDrawFont(playerid, Speed2FText[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2FText[playerid], 0.391666, 2.050000);
	PlayerTextDrawSetOutline(playerid, Speed2FText[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2FText[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2FText[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2FText[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2FText[playerid], 1);

	Speed2HText[playerid] = CreatePlayerTextDraw(playerid, 523.000000, 299.000000, "HP");
	PlayerTextDrawFont(playerid, Speed2HText[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2HText[playerid], 0.254167, 1.750000);
	PlayerTextDrawSetOutline(playerid, Speed2HText[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2HText[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2HText[playerid], 2);
	PlayerTextDrawColor(playerid, Speed2HText[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2HText[playerid], 1);

	Speed2Lock[playerid] = CreatePlayerTextDraw(playerid, 499.000000, 406.000000, "车锁:关闭");
	PlayerTextDrawFont(playerid, Speed2Lock[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2Lock[playerid], 0.229167, 1.500000);
	PlayerTextDrawSetOutline(playerid, Speed2Lock[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2Lock[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2Lock[playerid], 1);
	PlayerTextDrawColor(playerid, Speed2Lock[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2Lock[playerid], 1);

	Speed2Engine[playerid] = CreatePlayerTextDraw(playerid, 629.000000, 406.000000, "引擎:关闭");
	PlayerTextDrawFont(playerid, Speed2Engine[playerid], 2);
	PlayerTextDrawLetterSize(playerid, Speed2Engine[playerid], 0.229167, 1.500000);
	PlayerTextDrawSetOutline(playerid, Speed2Engine[playerid], 0);
	PlayerTextDrawSetShadow(playerid, Speed2Engine[playerid], 0);
	PlayerTextDrawAlignment(playerid, Speed2Engine[playerid], 3);
	PlayerTextDrawColor(playerid, Speed2Engine[playerid], -721437697);
	PlayerTextDrawSetProportional(playerid, Speed2Engine[playerid], 1);

	FuelBarBack[playerid] = CreatePlayerTextDraw(playerid, 614.000000, 314.000000, "_");
	PlayerTextDrawLetterSize(playerid, FuelBarBack[playerid], 0.570833, 8.149993);
	PlayerTextDrawTextSize(playerid, FuelBarBack[playerid], 298.500000, 19.500000);
	PlayerTextDrawAlignment(playerid, FuelBarBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, FuelBarBack[playerid], -1);
	PlayerTextDrawUseBox(playerid, FuelBarBack[playerid], 1);

	FuelBar[playerid] = CreatePlayerTextDraw(playerid, 614.000000, 391.000000, "_");
	PlayerTextDrawLetterSize(playerid, FuelBar[playerid], 0.570833, -0.500000);
	PlayerTextDrawTextSize(playerid, FuelBar[playerid], 297.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, FuelBar[playerid], 2);
	PlayerTextDrawBoxColor(playerid, FuelBar[playerid], -16776961);
	PlayerTextDrawUseBox(playerid, FuelBar[playerid], 1);

	tmptimer = SetPlayerTimerEx(playerid, "SpeedoUpdate", 1000, true, "i", playerid);//改用玩家计时器
	SetGVarInt("playertimer[1]", tmptimer, playerid);

    //Info Textdraw
    InfoBack[playerid] = CreatePlayerTextDraw(playerid, 318.000000, 100.000000, "_");
    PlayerTextDrawLetterSize(playerid, InfoBack[playerid], 0.866666, 28.149839);
    PlayerTextDrawTextSize(playerid, InfoBack[playerid], 303.500000, 346.500000);
    PlayerTextDrawAlignment(playerid, InfoBack[playerid], 2);
    PlayerTextDrawBoxColor(playerid, InfoBack[playerid], 135);
	PlayerTextDrawUseBox(playerid, InfoBack[playerid], 1);

	InfoText1[playerid] = CreatePlayerTextDraw(playerid, 486.000000, 84.000000, "的信息");
	PlayerTextDrawFont(playerid, InfoText1[playerid], 0);
	PlayerTextDrawLetterSize(playerid, InfoText1[playerid], 0.783333, 4.599997);
	PlayerTextDrawTextSize(playerid, InfoText1[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, InfoText1[playerid], 1);
	PlayerTextDrawAlignment(playerid, InfoText1[playerid], 3);
	PlayerTextDrawColor(playerid, InfoText1[playerid], -1);

	InfoLB[playerid] = CreatePlayerTextDraw(playerid, 184.000000, 333.000000, "信息");
	PlayerTextDrawFont(playerid, InfoLB[playerid], 2);
	PlayerTextDrawLetterSize(playerid, InfoLB[playerid], 0.258332, 1.750000);
	PlayerTextDrawTextSize(playerid, InfoLB[playerid], 16.500000, 69.500000);
	PlayerTextDrawSetOutline(playerid, InfoLB[playerid], 1);
	PlayerTextDrawAlignment(playerid, InfoLB[playerid], 2);
	PlayerTextDrawColor(playerid, InfoLB[playerid], -1);
	PlayerTextDrawBoxColor(playerid, InfoLB[playerid], 200);
	PlayerTextDrawUseBox(playerid, InfoLB[playerid], 1);
	PlayerTextDrawSetProportional(playerid, InfoLB[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, InfoLB[playerid], 1);

	InfoRB[playerid] = CreatePlayerTextDraw(playerid, 452.000000, 333.000000, "关闭");
	PlayerTextDrawFont(playerid, InfoRB[playerid], 2);
	PlayerTextDrawLetterSize(playerid, InfoRB[playerid], 0.258332, 1.750000);
	PlayerTextDrawTextSize(playerid, InfoRB[playerid], 16.500000, 69.500000);
	PlayerTextDrawSetOutline(playerid, InfoRB[playerid], 1);
	PlayerTextDrawAlignment(playerid, InfoRB[playerid], 2);
	PlayerTextDrawColor(playerid, InfoRB[playerid], -1);
	PlayerTextDrawBoxColor(playerid, InfoRB[playerid], 200);
	PlayerTextDrawUseBox(playerid, InfoRB[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, InfoRB[playerid], 1);

	//BuyCar
	BCBox[playerid] = CreatePlayerTextDraw(playerid, 551.000000, 295.000000, "_");
	PlayerTextDrawFont(playerid, BCBox[playerid], 2);
	PlayerTextDrawLetterSize(playerid, BCBox[playerid], 0.600000, 14.000016);
	PlayerTextDrawTextSize(playerid, BCBox[playerid], 306.500000, 133.000000);
	PlayerTextDrawAlignment(playerid, BCBox[playerid], 2);
	PlayerTextDrawColor(playerid, BCBox[playerid], -1);
	PlayerTextDrawBoxColor(playerid, BCBox[playerid], 135);
	PlayerTextDrawUseBox(playerid, BCBox[playerid], 1);

	BCPreview[playerid] = CreatePlayerTextDraw(playerid, 531.000000, 248.000000, "_");
	PlayerTextDrawFont(playerid, BCPreview[playerid], 5);
	PlayerTextDrawLetterSize(playerid, BCPreview[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, BCPreview[playerid], 120.000000, 131.500000);
	PlayerTextDrawAlignment(playerid, BCPreview[playerid], 1);
	PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], 405);
	PlayerTextDrawSetPreviewRot(playerid, BCPreview[playerid], -10.000000, 0.000000, -20.000000, 1.000000);
	PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 1, 1);
	PlayerTextDrawUseBox(playerid, BCPreview[playerid], 0);
	PlayerTextDrawBackgroundColor(playerid, BCPreview[playerid], 0);

	BCName[playerid] = CreatePlayerTextDraw(playerid, 511.000000, 299.000000, "Sentinel");
	PlayerTextDrawFont(playerid, BCName[playerid], 2);
	PlayerTextDrawLetterSize(playerid, BCName[playerid], 0.370833, 3.199998);
	PlayerTextDrawTextSize(playerid, BCName[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, BCName[playerid], 1);
	PlayerTextDrawAlignment(playerid, BCName[playerid], 2);
	PlayerTextDrawColor(playerid, BCName[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, BCName[playerid], 255);

	BCPrice[playerid] = CreatePlayerTextDraw(playerid, 488.000000, 336.000000, "价格:1000000");
	PlayerTextDrawFont(playerid, BCPrice[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCPrice[playerid], 0.329166, 1.700000);
	PlayerTextDrawTextSize(playerid, BCPrice[playerid], 400.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, BCPrice[playerid], 1);
	PlayerTextDrawColor(playerid, BCPrice[playerid], -1);

	BCLeft[playerid] = CreatePlayerTextDraw(playerid, 484.000000, 376.000000, "<<");
	PlayerTextDrawFont(playerid, BCLeft[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCLeft[playerid], 0.260832, 1.649999);
	PlayerTextDrawTextSize(playerid, BCLeft[playerid], 522.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, BCLeft[playerid], 1);
	PlayerTextDrawColor(playerid, BCLeft[playerid], -1);
	PlayerTextDrawSetSelectable(playerid, BCLeft[playerid], 1);

	BCRight[playerid] = CreatePlayerTextDraw(playerid, 579.000000, 376.000000, ">>");
	PlayerTextDrawFont(playerid, BCRight[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCRight[playerid], 0.260832, 1.649999);
	PlayerTextDrawTextSize(playerid, BCRight[playerid], 617.500000, 17.000000);
	PlayerTextDrawAlignment(playerid, BCRight[playerid], 1);
	PlayerTextDrawColor(playerid, BCRight[playerid], -1);
	PlayerTextDrawSetSelectable(playerid, BCRight[playerid], 1);

	BCColorL[playerid] = CreatePlayerTextDraw(playerid, 484.000000, 355.000000, "<颜色");
	PlayerTextDrawFont(playerid, BCColorL[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCColorL[playerid], 0.260832, 1.649999);
	PlayerTextDrawTextSize(playerid, BCColorL[playerid], 523.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, BCColorL[playerid], 1);
	PlayerTextDrawColor(playerid, BCColorL[playerid], -1);
	PlayerTextDrawSetSelectable(playerid, BCColorL[playerid], 1);

	BCColorR[playerid] = CreatePlayerTextDraw(playerid, 578.000000, 354.000000, "颜色>");
	PlayerTextDrawFont(playerid, BCColorR[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCColorR[playerid], 0.260832, 1.649999);
	PlayerTextDrawTextSize(playerid, BCColorR[playerid], 617.000000, 9.500000);
	PlayerTextDrawAlignment(playerid, BCColorR[playerid], 1);
	PlayerTextDrawColor(playerid, BCColorR[playerid], -1);
	PlayerTextDrawSetSelectable(playerid, BCColorR[playerid], 1);

	BCBuy[playerid] = CreatePlayerTextDraw(playerid, 598.000000, 401.000000, "购买");
	PlayerTextDrawFont(playerid, BCBuy[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCBuy[playerid], 0.420832, 1.799998);
	PlayerTextDrawTextSize(playerid, BCBuy[playerid], 32.500000, 32.500000);
	PlayerTextDrawSetOutline(playerid, BCBuy[playerid], 1);
	PlayerTextDrawAlignment(playerid, BCBuy[playerid], 2);
	PlayerTextDrawColor(playerid, BCBuy[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, BCBuy[playerid], 255);
	PlayerTextDrawBoxColor(playerid, BCBuy[playerid], -741092547);
	PlayerTextDrawUseBox(playerid, BCBuy[playerid], 1);
	PlayerTextDrawSetProportional(playerid, BCBuy[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, BCBuy[playerid], 1);

	BCExit[playerid] = CreatePlayerTextDraw(playerid, 504.000000, 401.000000, "关闭");
	PlayerTextDrawFont(playerid, BCExit[playerid], 1);
	PlayerTextDrawLetterSize(playerid, BCExit[playerid], 0.420832, 1.799998);
	PlayerTextDrawTextSize(playerid, BCExit[playerid], 32.500000, 32.500000);
	PlayerTextDrawSetOutline(playerid, BCExit[playerid], 1);
	PlayerTextDrawAlignment(playerid, BCExit[playerid], 2);
	PlayerTextDrawColor(playerid, BCExit[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, BCExit[playerid], 255);
	PlayerTextDrawBoxColor(playerid, BCExit[playerid], -741092547);
	PlayerTextDrawUseBox(playerid, BCExit[playerid], 1);
	PlayerTextDrawSetProportional(playerid, BCExit[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, BCExit[playerid], 1);

	BankAmount[playerid] = CreatePlayerTextDraw(playerid, 608.000000, 99.000000, "$00000000");
	PlayerTextDrawFont(playerid, BankAmount[playerid], 3);
	PlayerTextDrawLetterSize(playerid, BankAmount[playerid], 0.550000, 2.100000);
	PlayerTextDrawSetOutline(playerid, BankAmount[playerid], 2);
	PlayerTextDrawSetShadow(playerid, BankAmount[playerid], 0);
	PlayerTextDrawAlignment(playerid, BankAmount[playerid], 3);
	PlayerTextDrawColor(playerid, BankAmount[playerid], -771817217);
	PlayerTextDrawSetProportional(playerid, BankAmount[playerid], 1);

	MoneyChange[playerid] = CreatePlayerTextDraw(playerid, 493.000000, 80.000000, "+$0");
	PlayerTextDrawFont(playerid, MoneyChange[playerid], 3);
	PlayerTextDrawLetterSize(playerid, MoneyChange[playerid], 0.337500, 1.649999);
	PlayerTextDrawSetOutline(playerid, MoneyChange[playerid], 1);
	PlayerTextDrawAlignment(playerid, MoneyChange[playerid], 3);
	PlayerTextDrawColor(playerid, MoneyChange[playerid], -1);
	PlayerTextDrawSetProportional(playerid, MoneyChange[playerid], 1);

	BankChange[playerid] = CreatePlayerTextDraw(playerid, 493.000000, 101.000000, "-$0");
	PlayerTextDrawFont(playerid, BankChange[playerid], 3);
	PlayerTextDrawLetterSize(playerid, BankChange[playerid], 0.337500, 1.649999);
	PlayerTextDrawSetOutline(playerid, BankChange[playerid], 1);
	PlayerTextDrawAlignment(playerid, BankChange[playerid], 3);
	PlayerTextDrawColor(playerid, BankChange[playerid], -16776961);
	PlayerTextDrawSetProportional(playerid, BankChange[playerid], 1);

	//QTE

	QTEBack[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 169.000000, "_");
	PlayerTextDrawLetterSize(playerid, QTEBack[playerid], 0.600000, 10.300003);
	PlayerTextDrawTextSize(playerid, QTEBack[playerid], 272.000000, 644.000000);
	PlayerTextDrawAlignment(playerid, QTEBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, QTEBack[playerid], 190);
	PlayerTextDrawUseBox(playerid, QTEBack[playerid], 1);

	QTECancel[playerid] = CreatePlayerTextDraw(playerid, 198.000000, 363.000000, "取消");
	PlayerTextDrawFont(playerid, QTECancel[playerid], 1);
	PlayerTextDrawLetterSize(playerid, QTECancel[playerid], 0.483332, 3.199998);
	PlayerTextDrawTextSize(playerid, QTECancel[playerid], 16.000000, 60.500000);
	PlayerTextDrawSetOutline(playerid, QTECancel[playerid], 1);
	PlayerTextDrawAlignment(playerid, QTECancel[playerid], 2);
	PlayerTextDrawColor(playerid, QTECancel[playerid], -1);
	PlayerTextDrawBoxColor(playerid, QTECancel[playerid], 200);
	PlayerTextDrawUseBox(playerid, QTECancel[playerid], 1);
	PlayerTextDrawSetProportional(playerid, QTECancel[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, QTECancel[playerid], 1);

	QTEWhite[playerid] = CreatePlayerTextDraw(playerid, 7.000000, 181.000000, "ld_beat:cring");
	PlayerTextDrawFont(playerid, QTEWhite[playerid], 4);
	PlayerTextDrawLetterSize(playerid, QTEWhite[playerid], 1.491672, 2.999999);
	PlayerTextDrawTextSize(playerid, QTEWhite[playerid], 60.000000, 70.500000);

	QTEList[playerid] = CreatePlayerTextDraw(playerid, 25.000000, 199.000000, "_");
	PlayerTextDrawLetterSize(playerid, QTEList[playerid], 0.733331, 3.649996);
	PlayerTextDrawTextSize(playerid, QTEList[playerid], 400.000000, 17.000000);
	PlayerTextDrawAlignment(playerid, QTEList[playerid], 1);
	PlayerTextDrawSetProportional(playerid, QTEList[playerid], 1);

	QTETime[playerid] = CreatePlayerTextDraw(playerid, 25.000000, 175.000000, "100_Seconds");
	PlayerTextDrawFont(playerid, QTETime[playerid], 1);
	PlayerTextDrawLetterSize(playerid, QTETime[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, QTETime[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, QTETime[playerid], 1);
	PlayerTextDrawAlignment(playerid, QTETime[playerid], 1);
	PlayerTextDrawColor(playerid, QTETime[playerid], -1);
	PlayerTextDrawSetProportional(playerid, QTETime[playerid], 1);

	QTECount[playerid] = CreatePlayerTextDraw(playerid, 25.000000, 239.000000, "8/8 Remaining");
	PlayerTextDrawFont(playerid, QTECount[playerid], 1);
	PlayerTextDrawLetterSize(playerid, QTECount[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, QTECount[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, QTECount[playerid], 1);
	PlayerTextDrawAlignment(playerid, QTECount[playerid], 1);
	PlayerTextDrawColor(playerid, QTECount[playerid], -1);
	PlayerTextDrawSetProportional(playerid, QTECount[playerid], 1);

	QTEPadBack[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 291.000000, "_");
	PlayerTextDrawLetterSize(playerid, QTEPadBack[playerid], 0.600000, 12.000000);
	PlayerTextDrawTextSize(playerid, QTEPadBack[playerid], 447.500000, 122.500000);
	PlayerTextDrawAlignment(playerid, QTEPadBack[playerid], 2);
	PlayerTextDrawBoxColor(playerid, QTEPadBack[playerid], 190);
	PlayerTextDrawUseBox(playerid, QTEPadBack[playerid], 1);

	QTERB[playerid] = CreatePlayerTextDraw(playerid, 350.000000, 330.000000, "~>~");
	PlayerTextDrawLetterSize(playerid, QTERB[playerid], 0.258332, 3.999996);
	PlayerTextDrawTextSize(playerid, QTERB[playerid], 376.000000, 38.500000);
	PlayerTextDrawAlignment(playerid, QTERB[playerid], 1);
	PlayerTextDrawColor(playerid, QTERB[playerid], -1);
	PlayerTextDrawSetSelectable(playerid, QTERB[playerid], 1);

	QTEDB[playerid] = CreatePlayerTextDraw(playerid, 307.000000, 353.000000, "~d~");
	PlayerTextDrawLetterSize(playerid, QTEDB[playerid], 0.258332, 3.999996);
	PlayerTextDrawTextSize(playerid, QTEDB[playerid], 334.500000, 36.500000);
	PlayerTextDrawAlignment(playerid, QTEDB[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, QTEDB[playerid], 1);

	QTELB[playerid] = CreatePlayerTextDraw(playerid, 263.000000, 330.000000, "~<~");
	PlayerTextDrawLetterSize(playerid, QTELB[playerid], 0.258332, 3.999996);
	PlayerTextDrawTextSize(playerid, QTELB[playerid], 290.000000, 36.500000);
	PlayerTextDrawAlignment(playerid, QTELB[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, QTELB[playerid], 1);

	QTEUB[playerid] = CreatePlayerTextDraw(playerid, 307.000000, 303.000000, "~u~");
	PlayerTextDrawLetterSize(playerid, QTEUB[playerid], 0.258332, 3.999996);
	PlayerTextDrawTextSize(playerid, QTEUB[playerid], 333.500000, 36.500000);
	PlayerTextDrawAlignment(playerid, QTEUB[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, QTEUB[playerid], 1);

	PTDBox[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 150.000000, "_");
	PlayerTextDrawLetterSize(playerid, PTDBox[playerid], 0.600000, 12.650012);
	PlayerTextDrawTextSize(playerid, PTDBox[playerid], 308.500000, 678.000000);
	PlayerTextDrawAlignment(playerid, PTDBox[playerid], 2);
	PlayerTextDrawBoxColor(playerid, PTDBox[playerid], 135);
	PlayerTextDrawUseBox(playerid, PTDBox[playerid], 1);

	PTDText[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 179.000000, ""#TEXT_YELLOW"Quest_Passed");
	PlayerTextDrawFont(playerid, PTDText[playerid], 3);
	PlayerTextDrawLetterSize(playerid, PTDText[playerid], 1.050000, 4.099998);
	PlayerTextDrawAlignment(playerid, PTDText[playerid], 2);
	PlayerTextDrawColor(playerid, PTDText[playerid], -1);

	PreviewTD[playerid] = CreatePlayerTextDraw(playerid, 250.000000, 18.000000, "_");
	PlayerTextDrawFont(playerid, PreviewTD[playerid], 5);
	PlayerTextDrawTextSize(playerid, PreviewTD[playerid], 150.000000, 150.000000);
	PlayerTextDrawBackgroundColor(playerid, PreviewTD[playerid], 0);
	PlayerTextDrawSetPreviewModel(playerid, PreviewTD[playerid], 400);
	PlayerTextDrawSetPreviewRot(playerid, PreviewTD[playerid], -3.000000, 0.000000, -27.000000, 1.0);
	PlayerTextDrawSetPreviewVehCol(playerid, PreviewTD[playerid], 1, 1);

	//GPS
	GPSTD[playerid] = CreatePlayerTextDraw(playerid, 71.000000, 307.000000, "GPS:0米");
	PlayerTextDrawFont(playerid, GPSTD[playerid], 1);
	PlayerTextDrawLetterSize(playerid, GPSTD[playerid], 0.216667, 1.350000);
	PlayerTextDrawTextSize(playerid, GPSTD[playerid], 129.500000, 78.000000);
	PlayerTextDrawSetOutline(playerid, GPSTD[playerid], 0);
	PlayerTextDrawSetShadow(playerid, GPSTD[playerid], 0);
	PlayerTextDrawAlignment(playerid, GPSTD[playerid], 2);
	PlayerTextDrawColor(playerid, GPSTD[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, GPSTD[playerid], 255);
	PlayerTextDrawBoxColor(playerid, GPSTD[playerid], 140);
	PlayerTextDrawUseBox(playerid, GPSTD[playerid], 1);
	PlayerTextDrawSetProportional(playerid, GPSTD[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, GPSTD[playerid], 0);

	//Target Down
	xtarget[playerid] = CreatePlayerTextDraw(playerid, 336.000000, 174.000000, "X");
	PlayerTextDrawFont(playerid, xtarget[playerid], 2);
	PlayerTextDrawLetterSize(playerid, xtarget[playerid], 0.250000, 1.050000);
	PlayerTextDrawTextSize(playerid, xtarget[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetShadow(playerid, xtarget[playerid], 0);
	PlayerTextDrawAlignment(playerid, xtarget[playerid], 1);
	PlayerTextDrawColor(playerid, xtarget[playerid], -1);
	PlayerTextDrawSetProportional(playerid, xtarget[playerid], 1);

	//Skin Shop
	SkinBuy[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 391.000000, "购买");
	PlayerTextDrawFont(playerid, SkinBuy[playerid], 2);
	PlayerTextDrawLetterSize(playerid, SkinBuy[playerid], 0.399999, 1.650000);
	PlayerTextDrawTextSize(playerid, SkinBuy[playerid], 19.500000, 90.500000);
	PlayerTextDrawSetOutline(playerid, SkinBuy[playerid], 1);
	PlayerTextDrawSetShadow(playerid, SkinBuy[playerid], 0);
	PlayerTextDrawAlignment(playerid, SkinBuy[playerid], 2);
	PlayerTextDrawColor(playerid, SkinBuy[playerid], -1);
	PlayerTextDrawBoxColor(playerid, SkinBuy[playerid], 200);
	PlayerTextDrawUseBox(playerid, SkinBuy[playerid], 1);
	PlayerTextDrawSetProportional(playerid, SkinBuy[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, SkinBuy[playerid], 1);

	SkinExit[playerid] = CreatePlayerTextDraw(playerid, 561.000000, 391.000000, "关闭");
	PlayerTextDrawFont(playerid, SkinExit[playerid], 2);
	PlayerTextDrawLetterSize(playerid, SkinExit[playerid], 0.399999, 1.650000);
	PlayerTextDrawTextSize(playerid, SkinExit[playerid], 19.500000, 90.500000);
	PlayerTextDrawSetOutline(playerid, SkinExit[playerid], 1);
	PlayerTextDrawSetShadow(playerid, SkinExit[playerid], 0);
	PlayerTextDrawAlignment(playerid, SkinExit[playerid], 2);
	PlayerTextDrawColor(playerid, SkinExit[playerid], -1);
	PlayerTextDrawBoxColor(playerid, SkinExit[playerid], 200);
	PlayerTextDrawUseBox(playerid, SkinExit[playerid], 1);
	PlayerTextDrawSetProportional(playerid, SkinExit[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, SkinExit[playerid], 1);

	SkinLeft[playerid] = CreatePlayerTextDraw(playerid, 200.000000, 354.000000, "ld_beat:left");
	PlayerTextDrawFont(playerid, SkinLeft[playerid], 4);
	PlayerTextDrawLetterSize(playerid, SkinLeft[playerid], 0.399999, 1.650000);
	PlayerTextDrawTextSize(playerid, SkinLeft[playerid], 20.500000, 27.000000);
	PlayerTextDrawAlignment(playerid, SkinLeft[playerid], 2);
	PlayerTextDrawColor(playerid, SkinLeft[playerid], -1);
	PlayerTextDrawUseBox(playerid, SkinLeft[playerid], 1);
	PlayerTextDrawSetProportional(playerid, SkinLeft[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, SkinLeft[playerid], 1);

	SkinRight[playerid] = CreatePlayerTextDraw(playerid, 423.000000, 354.000000, "ld_beat:right");
	PlayerTextDrawFont(playerid, SkinRight[playerid], 4);
	PlayerTextDrawLetterSize(playerid, SkinRight[playerid], 0.399999, 1.650000);
	PlayerTextDrawTextSize(playerid, SkinRight[playerid], 20.500000, 27.000000);
	PlayerTextDrawAlignment(playerid, SkinRight[playerid], 2);
	PlayerTextDrawColor(playerid, SkinRight[playerid], -1);
	PlayerTextDrawUseBox(playerid, SkinRight[playerid], 1);
	PlayerTextDrawSetProportional(playerid, SkinRight[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, SkinRight[playerid], 1);

	SkinPrice[playerid] = CreatePlayerTextDraw(playerid, 320.000000, 355.000000, "$0");
	PlayerTextDrawFont(playerid, SkinPrice[playerid], 1);
	PlayerTextDrawLetterSize(playerid, SkinPrice[playerid], 0.600000, 2.000000);
	PlayerTextDrawTextSize(playerid, SkinPrice[playerid], 400.000000, 17.000000);
	PlayerTextDrawSetOutline(playerid, SkinPrice[playerid], 1);
	PlayerTextDrawAlignment(playerid, SkinPrice[playerid], 2);
	PlayerTextDrawColor(playerid, SkinPrice[playerid], -1);
	PlayerTextDrawUseBox(playerid, SkinPrice[playerid], 0);
	PlayerTextDrawSetProportional(playerid, SkinPrice[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, SkinPrice[playerid], 0);

	//Vehicle Color
	ColorEnter[playerid] = CreatePlayerTextDraw(playerid, 66.000000, 258.000000, "选择");
	PlayerTextDrawFont(playerid, ColorEnter[playerid], 1);
	PlayerTextDrawLetterSize(playerid, ColorEnter[playerid], 0.466666, 1.949999);
	PlayerTextDrawTextSize(playerid, ColorEnter[playerid], 9.000000, 87.500000);
	PlayerTextDrawSetOutline(playerid, ColorEnter[playerid], 1);
	PlayerTextDrawSetShadow(playerid, ColorEnter[playerid], 0);
	PlayerTextDrawAlignment(playerid, ColorEnter[playerid], 2);
	PlayerTextDrawColor(playerid, ColorEnter[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, ColorEnter[playerid], 255);
	PlayerTextDrawBoxColor(playerid, ColorEnter[playerid], 200);
	PlayerTextDrawUseBox(playerid, ColorEnter[playerid], 1);
	PlayerTextDrawSetProportional(playerid, ColorEnter[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, ColorEnter[playerid], 1);

	Color1T[playerid] = CreatePlayerTextDraw(playerid, 66.000000, 213.000000, "颜色1");
	PlayerTextDrawFont(playerid, Color1T[playerid], 1);
	PlayerTextDrawLetterSize(playerid, Color1T[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color1T[playerid], 400.000000, 30.000000);
	PlayerTextDrawSetOutline(playerid, Color1T[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color1T[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color1T[playerid], 2);
	PlayerTextDrawColor(playerid, Color1T[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color1T[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color1T[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color1T[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color1T[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color1T[playerid], 0);

	Color2T[playerid] = CreatePlayerTextDraw(playerid, 67.000000, 233.000000, "颜色2");
	PlayerTextDrawFont(playerid, Color2T[playerid], 1);
	PlayerTextDrawLetterSize(playerid, Color2T[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color2T[playerid], 400.000000, 30.000000);
	PlayerTextDrawSetOutline(playerid, Color2T[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color2T[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color2T[playerid], 2);
	PlayerTextDrawColor(playerid, Color2T[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color2T[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color2T[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color2T[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color2T[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color2T[playerid], 0);

	Color1L[playerid] = CreatePlayerTextDraw(playerid, 19.000000, 213.000000, "ld_beat:left");
	PlayerTextDrawFont(playerid, Color1L[playerid], 4);
	PlayerTextDrawLetterSize(playerid, Color1L[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color1L[playerid], 21.000000, 13.500000);
	PlayerTextDrawSetOutline(playerid, Color1L[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color1L[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color1L[playerid], 2);
	PlayerTextDrawColor(playerid, Color1L[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color1L[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color1L[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color1L[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color1L[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color1L[playerid], 1);

	Color2L[playerid] = CreatePlayerTextDraw(playerid, 19.000000, 232.000000, "ld_beat:left");
	PlayerTextDrawFont(playerid, Color2L[playerid], 4);
	PlayerTextDrawLetterSize(playerid, Color2L[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color2L[playerid], 21.000000, 13.500000);
	PlayerTextDrawSetOutline(playerid, Color2L[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color2L[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color2L[playerid], 2);
	PlayerTextDrawColor(playerid, Color2L[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color2L[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color2L[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color2L[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color2L[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color2L[playerid], 1);

	Color1R[playerid] = CreatePlayerTextDraw(playerid, 94.000000, 213.000000, "ld_beat:right");
	PlayerTextDrawFont(playerid, Color1R[playerid], 4);
	PlayerTextDrawLetterSize(playerid, Color1R[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color1R[playerid], 21.000000, 13.500000);
	PlayerTextDrawSetOutline(playerid, Color1R[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color1R[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color1R[playerid], 2);
	PlayerTextDrawColor(playerid, Color1R[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color1R[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color1R[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color1R[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color1R[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color1R[playerid], 1);

	Color2R[playerid] = CreatePlayerTextDraw(playerid, 94.000000, 232.000000, "ld_beat:right");
	PlayerTextDrawFont(playerid, Color2R[playerid], 4);
	PlayerTextDrawLetterSize(playerid, Color2R[playerid], 0.308333, 1.300000);
	PlayerTextDrawTextSize(playerid, Color2R[playerid], 21.000000, 13.500000);
	PlayerTextDrawSetOutline(playerid, Color2R[playerid], 1);
	PlayerTextDrawSetShadow(playerid, Color2R[playerid], 0);
	PlayerTextDrawAlignment(playerid, Color2R[playerid], 2);
	PlayerTextDrawColor(playerid, Color2R[playerid], -1);
	PlayerTextDrawBackgroundColor(playerid, Color2R[playerid], 255);
	PlayerTextDrawBoxColor(playerid, Color2R[playerid], 50);
	PlayerTextDrawUseBox(playerid, Color2R[playerid], 0);
	PlayerTextDrawSetProportional(playerid, Color2R[playerid], 1);
	PlayerTextDrawSetSelectable(playerid, Color2R[playerid], 1);

	//Right TD
	for(i = 0; i < MAX_RTD; i++)
	{
		RTDH[i][playerid] = CreatePlayerTextDraw(playerid, 496.000000, 203.000000+(20.0*i), "_");
		PlayerTextDrawFont(playerid, RTDH[i][playerid], 1);
		PlayerTextDrawLetterSize(playerid, RTDH[i][playerid], 0.300000, 1.450000);
		PlayerTextDrawTextSize(playerid, RTDH[i][playerid], 604.500000, 17.000000);
		PlayerTextDrawSetOutline(playerid, RTDH[i][playerid], 1);
		PlayerTextDrawSetShadow(playerid, RTDH[i][playerid], 0);
		PlayerTextDrawAlignment(playerid, RTDH[i][playerid], 1);
		PlayerTextDrawColor(playerid, RTDH[i][playerid], -1);
		PlayerTextDrawBackgroundColor(playerid, RTDH[i][playerid], 255);
		PlayerTextDrawBoxColor(playerid, RTDH[i][playerid], 149);
		PlayerTextDrawUseBox(playerid, RTDH[i][playerid], 1);
		PlayerTextDrawSetProportional(playerid, RTDH[i][playerid], 1);
		PlayerTextDrawSetSelectable(playerid, RTDH[i][playerid], 0);

		RTDBar[i][playerid] = CreatePlayerTextDraw(playerid, 544.000000, 204.000000+(20.0*i), "_");
		PlayerTextDrawFont(playerid, RTDBar[i][playerid], 1);
		PlayerTextDrawLetterSize(playerid, RTDBar[i][playerid], 0.212500, 1.150000);
		PlayerTextDrawTextSize(playerid, RTDBar[i][playerid], 603.500000, 327.500000);
		PlayerTextDrawSetOutline(playerid, RTDBar[i][playerid], 1);
		PlayerTextDrawSetShadow(playerid, RTDBar[i][playerid], 0);
		PlayerTextDrawAlignment(playerid, RTDBar[i][playerid], 1);
		PlayerTextDrawColor(playerid, RTDBar[i][playerid], -1);
		PlayerTextDrawBackgroundColor(playerid, RTDBar[i][playerid], 255);
		PlayerTextDrawBoxColor(playerid, RTDBar[i][playerid], -70);
		PlayerTextDrawUseBox(playerid, RTDBar[i][playerid], 1);
		PlayerTextDrawSetProportional(playerid, RTDBar[i][playerid], 1);
		PlayerTextDrawSetSelectable(playerid, RTDBar[i][playerid], 0);

		RTDT[i][playerid] = CreatePlayerTextDraw(playerid, 604.000000, 200.000000+(20.0*i), "100");
		PlayerTextDrawFont(playerid, RTDT[i][playerid], 2);
		PlayerTextDrawLetterSize(playerid, RTDT[i][playerid], 0.300000, 1.900000);
		PlayerTextDrawTextSize(playerid, RTDT[i][playerid], -399.000000, 368.500000);
		PlayerTextDrawSetOutline(playerid, RTDT[i][playerid], 1);
		PlayerTextDrawSetShadow(playerid, RTDT[i][playerid], 0);
		PlayerTextDrawAlignment(playerid, RTDT[i][playerid], 3);
		PlayerTextDrawColor(playerid, RTDT[i][playerid], -1);
		PlayerTextDrawBackgroundColor(playerid, RTDT[i][playerid], 255);
		PlayerTextDrawBoxColor(playerid, RTDT[i][playerid], 149);
		PlayerTextDrawUseBox(playerid, RTDT[i][playerid], 0);
		PlayerTextDrawSetProportional(playerid, RTDT[i][playerid], 1);
		PlayerTextDrawSetSelectable(playerid, RTDT[i][playerid], 0);
	}
	return 1;
}

PUBLIC:CreateQTE(playerid, num, second)
{
	new rand, i;
	for(i = 0; i < num; i++)
	{
		rand = random(4);
		switch(rand)
		{
			case 0: SetGVarInt("PlayerQTE", 1, i*1000+playerid);//左
			case 1: SetGVarInt("PlayerQTE", 2, i*1000+playerid);//右
			case 2: SetGVarInt("PlayerQTE", 3, i*1000+playerid);//上
			case 3: SetGVarInt("PlayerQTE", 4, i*1000+playerid);//下
		}

	}
	SetGVarInt("PlayerQTENum", num, playerid);
	SetGVarInt("PlayerQTETime", second, playerid);
	SetGVarInt("PlayerQTEMaxTime", second, playerid);
	SetGVarInt("PlayerQTEProgress", 0, playerid);
	SetGVarInt("PlayerQTEing", 1, playerid);
	SetGVarInt("PlayerQTEWrong", 0, playerid);
	PlayerTextDrawShow(playerid,QTEBack[playerid]);
	PlayerTextDrawShow(playerid,QTEWhite[playerid]);
	PlayerTextDrawShow(playerid,QTETime[playerid]);
	PlayerTextDrawShow(playerid,QTECount[playerid]);
	PlayerTextDrawShow(playerid,QTEPadBack[playerid]);
	PlayerTextDrawShow(playerid,QTERB[playerid]);
	PlayerTextDrawShow(playerid,QTELB[playerid]);
	PlayerTextDrawShow(playerid,QTEUB[playerid]);
	PlayerTextDrawShow(playerid,QTEDB[playerid]);
	PlayerTextDrawShow(playerid,QTEList[playerid]);
	PlayerTextDrawShow(playerid,QTECancel[playerid]);
	SelectTextDraw(playerid, COLOR_FADERED);
	return 1;
}

PUBLIC:FinishQTE(playerid)
{
	new string[144], i, qtime, qprogress, qsuccess, num, qwrong, playername[MAX_PLAYER_NAME], rand, fail;

	num = GetGVarInt("PlayerQTENum", playerid),
	qtime = GetGVarInt("PlayerQTETime", playerid),
	qwrong = GetGVarInt("PlayerQTEWrong", playerid),
	qprogress = GetGVarInt("PlayerQTEProgress", playerid);
	qsuccess = GetGVarInt("PlayerQTESuccess", playerid);
	for(i = 0; i < num; i++)
	{
    	SetGVarInt("PlayerQTE", 0, i*1000+playerid);
	}
	SetGVarInt("PlayerQTEing", 0, playerid);
	SetGVarInt("PlayerQTETime", 0, playerid);
	SetGVarInt("PlayerQTEMaxTime", 0, playerid);
	SetGVarInt("PlayerQTENum", 0, playerid);
	SetGVarInt("PlayerQTEWrong", 0, playerid);
	SetGVarInt("PlayerQTEProgress", 0, playerid);
	SetGVarInt("PlayerQTESuccess", 0, playerid);
	PlayerTextDrawHide(playerid,QTEBack[playerid]);
    PlayerTextDrawHide(playerid,QTEWhite[playerid]);
    PlayerTextDrawHide(playerid,QTETime[playerid]);
    PlayerTextDrawHide(playerid,QTECount[playerid]);
    PlayerTextDrawHide(playerid,QTEPadBack[playerid]);
    PlayerTextDrawHide(playerid,QTERB[playerid]);
    PlayerTextDrawHide(playerid,QTELB[playerid]);
    PlayerTextDrawHide(playerid,QTEUB[playerid]);
    PlayerTextDrawHide(playerid,QTEDB[playerid]);
    PlayerTextDrawHide(playerid,QTEList[playerid]);
    PlayerTextDrawHide(playerid,QTECancel[playerid]);

	printf("progress:%d/%d time:%d wrong:%d success:%d", qprogress, num, qtime, qwrong, qsuccess);
	GetPlayerName(playerid, playername, sizeof(playername));
	switch(GetGVarInt("Unlocking", playerid))
	{
		case 1:
		{
		    new stealveh = GetGVarInt("PickVeh", playerid);
		    if(qtime > 0 && qsuccess == 1 && qwrong < 3)
		    {
		        if(VehData[stealveh][vLockLv1] == 1 && GetGVarInt("LockEx", playerid) < 1)
		        {
		            format(string, sizeof(string), "** "TEXT_LIGHTGREEN"顺利解开车门,"#TEXT_YELLOW"但必须再突破这台车上的防盗锁");
		            SendClientMessage(playerid, COLOR_YELLOW, string);
		            SetGVarInt("LockEx", 1, playerid);
		            SetGVarInt("Unlocking", 1, playerid);
		    		SetGVarInt("PickVeh", stealveh, playerid);
		    		if(SkillData[playerid][psUnlock] > 3){CreateQTE(playerid, 15, 15);}
		            else {CreateQTE(playerid, 25, 15);}
		            return 1;
		        }
		        else if(VehData[stealveh][vLockLv2] == 1 && GetGVarInt("LockEx", playerid) < 2)
		        {
		            if(SkillData[playerid][psUnlock] < 4)
		            {
			            SendClientMessage(playerid, COLOR_WHITE, "这台车上装有电子锁,以目前的技能等级无法解开");
		                DeleteGVar("LockEx", playerid);
		                ClearAnimationsEx(playerid);
						DeleteGVar("PickVeh", playerid);
						DeleteGVar("Unlocking", playerid);
		            }
		            else
		            {
			            format(string, sizeof(string), "** "TEXT_LIGHTGREEN"顺利解开车门,"#TEXT_LIGHTBLUE"但必须再突破这台车上的电子锁");
			            SendClientMessage(playerid, COLOR_YELLOW, string);
			            SetGVarInt("LockEx", 2, playerid);
			            SetGVarInt("Unlocking", 1, playerid);
		    			SetGVarInt("PickVeh", stealveh, playerid);
		    			if(SkillData[playerid][psUnlock] == 4) {CreateQTE(playerid, 40, 25);}
			            else {CreateQTE(playerid, 30, 25);}
			            return 1;
			        }
		        }
		        else
		        {
			        SetVehicleLock(playerid, stealveh, 0);
			        format(string, sizeof(string), "** "TEXT_LIGHTGREEN"你顺利解开这台 %s 的车门了", GetVehicleName(GetVehicleModel(stealveh)));
			        SendClientMessage(playerid, COLOR_YELLOW, string);
			        rand = random(100);
			        switch(SkillData[playerid][psUnlock])
			        {
			            case 2:{ if(0 < rand < 40){ fail = 1; }}
			            case 3:{ if(0 < rand < 20){ fail = 1; }}
			            case 4:{ if(0 < rand < 10){ fail = 1; }}
			            case 5:{ if(0 < rand < 5){ fail = 1; }}
			        }
			        if(fail == 1)
					{
						format(string, sizeof(string), "** %s 误触了车子的警报 **", playername);
				   		SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				   		SendClientMessage(playerid, COLOR_RED, "** 但不小心触发了警报");
					}
					rand = random(3);
					if(rand == 0)
					{
					    GivePlayerPoint(playerid, 2, 3);
					    format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"机械知识"#TEXT_LIGHTBLUE"3点");
						SendClientMessage(playerid, COLOR_WHITE, string);
					}

					DeleteGVar("LockEx", playerid);
					ClearAnimationsEx(playerid);
					DeleteGVar("PickVeh", playerid);
					DeleteGVar("Unlocking", playerid);
				}
		    }
		    else
		    {
			    new engine, lights, alarm, doors, bonnet, boot, objective;
			    GetVehicleParamsEx(stealveh, engine, lights, alarm, doors, bonnet, boot, objective);
			    SetVehicleParamsEx(stealveh, engine, lights, 1, doors, bonnet, boot, objective);
			    SetTimerEx("StopAlarm", 180000, 0, "d", stealveh);
			    format(string, sizeof(string), "** %s 偷车失败,误触了车子的警报 **", playername);
			    SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    format(string, sizeof(string), "** "TEXT_RED"你失败了,误触了这台车的警报", GetVehicleName(GetVehicleModel(stealveh)));
			    SendClientMessage(playerid, COLOR_YELLOW, string);
			    DeleteGVar("LockEx", playerid);
				ClearAnimationsEx(playerid);
				DeleteGVar("PickVeh", playerid);
				DeleteGVar("Unlocking", playerid);
			}
		}
		case 2:
		{
		    new stealveh = GetGVarInt("WireVeh", playerid), engine, lights, alarm, doors, bonnet, boot, objective;
			GetVehicleParamsEx(stealveh, engine, lights, alarm, doors, bonnet, boot, objective);
		    if(qtime > 0 && qsuccess == 1 && qwrong < 3)
		    {
		        SetVehicleParamsEx(stealveh, 1, lights, alarm, doors, bonnet, boot, objective);
		        GameTextForPlayer(playerid, "~w~引擎:_~g~开启", 3000, 3);
		        rand = random(100);
		        switch(SkillData[playerid][psUnlock])
		        {
		            case 2:{ if(0 < rand < 40){ fail = 1; }}
		            case 3:{ if(0 < rand < 20){ fail = 1; }}
		            case 4:{ if(0 < rand < 10){ fail = 1; }}
		            case 5:{ if(0 < rand < 5){ fail = 1; }}
		        }
		        if(fail == 1)
				{
					format(string, sizeof(string), "** %s 误触了车子的警报 **", playername);
			   		SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			   		SendClientMessage(playerid, COLOR_RED, "** 你不小心触发了警报");
				}

				if(rand == 0)
				{
					GivePlayerPoint(playerid, 2, 4);
					format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"机械知识"#TEXT_LIGHTBLUE"4点");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
    			format(string, sizeof(string), "** "TEXT_LIGHTGREEN"你顺利发动这台 %s 的引擎了", GetVehicleName(GetVehicleModel(stealveh)));
				RecordData[playerid][prStealVehs] ++;
				rand = random(3);
		    }
		    else
		    {
				SetVehicleParamsEx(stealveh, engine, lights, 1, doors, bonnet, boot, objective);
				SetPlayerTimerEx(playerid, "StopAlarm", 180000, 0, "d", stealveh);
				format(string, sizeof(string), "** %s 偷车失败,误触了车子的警报 **", playername);
				SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				format(string, sizeof(string), "** "TEXT_RED"你失败了,误触了这台车的警报", GetVehicleName(GetVehicleModel(stealveh)));
			}
			ClearAnimationsEx(playerid);
			SendClientMessage(playerid, COLOR_YELLOW, string);
		    DeleteGVar("WireVeh", playerid);
		    DeleteGVar("Unlocking", playerid);
		}
		case 3:
		{
		    new pickeid = GetGVarInt("PickEstate", playerid);
		    if(qtime > 0 && qsuccess == 1 && qwrong < 3)
		    {
				EstateData[pickeid][eLocked] = 0;
				PlayerEnterEstate(playerid, pickeid);
				rand = random(3);
				if(rand == 0)
				{
					GivePlayerPoint(playerid, 2, 5);
					format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"机械知识"#TEXT_LIGHTBLUE"5点");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				format(string, sizeof(string), "** %s 解开了这个地产的门锁 **", playername);
			   	SendRangeMessage(5.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				format(string, sizeof(string), "** "TEXT_LIGHTGREEN"你顺利解开这栋%s的门锁了,接下来10秒钟所有人都可以进入这个地产", EstateData[pickeid][eName]);
				SetGVarInt("ERammed", 1, pickeid);
				ApplyAnimationEx(playerid, "BOMBER", "BOMB_PLANT", 4.1, 0, 0, 0, 0, 0, 0);
				SetTimerEx("UnRam", 10000, 0, "i", pickeid);
		    }
		    else
		    {
			   	format(string, sizeof(string), "** "TEXT_RED"你失败了,没有解开这个地产的门锁");
			}
			ClearAnimationsEx(playerid);
			SendClientMessage(playerid, COLOR_YELLOW, string);
		    DeleteGVar("PickEstate", playerid);
		    DeleteGVar("Unlocking", playerid);
		}
		default:
		{
			if(qtime > 0 && qsuccess == 1) {format(string, sizeof(string), " QTE结束!在剩 %d 秒时完成, 失误 %d 次", qtime, qwrong);}
			else {format(string, sizeof(string), " QTE结束!结束时完成 %d/%d 个, 失误 %d 次", qprogress, num, qwrong);}
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
	}
	CancelSelectTextDraw(playerid);
	return 1;
}

PUBLIC:PlayerUseItem_USE(playerid, chosed)
{
	static string[144], playername[MAX_PLAYER_NAME];
	//Check Conditions
	if(GetGVarInt("Using", playerid) != 0) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前你正在使用其他道具");}
	new Float:php = GetPlayerHealth_Fix(playerid);
	if(ItemsList_USE[chosed][iuType] == IU_USE)//Use Item
	{
	    if(chosed == 33)
		{
			return SendClientMessage(playerid, COLOR_WHITE, "错误: 此道具没有直接的使用用途");
		}//如果是鱼饵 鱼类 材料类或植物则只供查看不会使用
		else if(chosed == 32)
		{
			if(php >= 75) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前你的状态还不需要使用OK绷");}
		}
		else if(chosed == 33)
		{
			return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前你没有生病");
		}
		else if(chosed == 91)
		{
			if(php >= 30) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前你的状态还不需要使用绷带");}
		}
		else if(96 < chosed < 100 && SickData[playerid][scHealth] == 0 && SickData[playerid][scHunger] == 0 && SickData[playerid][scStamina] == 0)
		{
			 return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前你没有生病");
		}
		else if(chosed == 303)
		{
			if(!CA_IsPlayerFacingWater(playerid, 4.0, 20.0)) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在水域旁才能投掷瓶中信");}
		}
	}
	else if(ItemsList_USE[chosed][iuType] == IU_MAT || ItemsList_USE[chosed][iuType] == IU_FISH || ItemsList_USE[chosed][iuType] == IU_FMAT || ItemsList_USE[chosed][iuType] == IU_WATER)
	{
	    return SendClientMessage(playerid, COLOR_WHITE, "错误: 此道具没有直接的使用用途");
	}
	else if(ItemsList_USE[chosed][iuType] == IU_SEED)//Seed
	{
		if(!PlayerCanPlant(playerid)) { return SendClientMessage(playerid, COLOR_WHITE, "错误: 你无法再种更多植物了");}
	}
	else if(ItemsList_USE[chosed][iuType] == IU_FUEL)//Fuel
	{
		new vehicleid = GetNearestVehicle(playerid);
		if(vehicleid == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你附近没有任何车辆可以补充燃料");
	}
    else if(ItemsList_USE[chosed][iuType] == IU_ARMOR)//Armor
	{
		new Float:ar = GetPlayerArmour_Fix(playerid);
		if(ar > 90) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上已经有穿护甲了");
	}
	//Check Completed

	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	if(ItemsList_USE[chosed][iuType] == IU_FOOD)//Food
	{
	    UpdatePlayerMission(playerid, 1, 8);
	    if(PlayerData[playerid][pHunger] > 95.0)
	    {
	  		if(LimitData[playerid][plEat] == 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "注意: 你已经吃饱了,如果再吃下去身体将会无法消化");
			}
			if(LimitData[playerid][plEat] == 6)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你在短时间内饮食太多次,虽然你已经吃下了但身体已经无法消化营养");
				format(string, sizeof(string), "** %s 看起来面有难色地吃了他的%s **", playername, ItemsList_USE[chosed][iuName]);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				return LimitData[playerid][plEat] ++;
			}
			if(LimitData[playerid][plEat] == 7)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你已经吃不下了,再吃下去可能会吐出来");
				format(string, sizeof(string), "** %s 脸色铁青的吃了他的%s **", playername, ItemsList_USE[chosed][iuName]);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				return LimitData[playerid][plEat] ++;
			}
			if(LimitData[playerid][plEat] >= 8)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你吃太多身体受不了呕吐了");
				format(string, sizeof(string), "** %s 吃了又吐了他的%s **", playername, ItemsList_USE[chosed][iuName]);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				if(GetGVarInt("Animating", playerid) == 0) ApplyAnimationEx(playerid, "FOOD", "EAT_Vomit_P" , 4.1, 0, 0, 0, 0, 0, 1);
				PlayerPlayGlobalSound(playerid, 32201);
				if(php > 20) GiveHealth(playerid, -5.0);
				return LimitData[playerid][plEat] = 8;
			}
			if(chosed != 17 && chosed != 18 && chosed != 19 && chosed != 20) RecordData[playerid][prEat] ++;
		}
		format(string, sizeof(string), "** %s 正在享用他的%s **", playername, ItemsList_USE[chosed][iuName]);
		if(GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK && GetGVarInt("Animating", playerid) == 0) ApplyAnimation(playerid, "FOOD", "EAT_BURGER" , 4.1, 0, 0, 0, 0, 0, 1);
	}
	else {format(string, sizeof(string), "** %s 正在使用%s ", playername, ItemsList_USE[chosed][iuName]);}


	if(ItemsList_USE[chosed][iuType] == IU_TICKET || chosed == 320 || chosed == 321)
	{
	    OnPlayerUseItem_USE(playerid, chosed);
	}
	else if(ItemsList_USE[chosed][iuType] == IU_SEED || ItemsList_USE[chosed][iuType] == IU_POT || ItemsList_USE[chosed][iuType] == IU_OBJECT)
	{
		if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_WHITE, "你必须在步行状态才可以使用这个道具");
	    OnPlayerUseItem_USE(playerid, chosed);
	}
	else
	{
	    if((ItemsList_USE[chosed][iuType] == IU_WEAPON || chosed == 146) && (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)) return SendClientMessage(playerid, COLOR_WHITE, "你必须在步行状态才可以使用这个道具");
		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		SetPlayerTimerEx(playerid, "OnPlayerUseItem_USE", 1500, false, "id", playerid, chosed);//道具延迟生效 改用玩家计时器
		SetGVarInt("Using", chosed, playerid);
		if(GetGVarInt("InstantUse", playerid) == 0 && GetGVarInt("KeyUse", playerid) == 0) ShowPlayerBagMenu(playerid);
		DeleteGVar("KeyUse", playerid);
	}
	return 1;
}

PUBLIC:OnPlayerUseItem_USE(playerid, chosed)
{
    DeleteGVar("Using", playerid);
    SetGVarInt("DDecideItem", chosed, playerid);
	new Float:php, string[144], Float:px, Float:py, Float:pz, notused;
	if(ItemsList_USE[chosed][iuType] == IU_FOOD)
	{
	    php = GetPlayerHealth_Fix(playerid);
	    if(SickData[playerid][scHunger] == 3)
	    {
			ApplyAnimationEx(playerid, "FOOD", "EAT_Vomit_P" , 4.1, 0, 0, 0, 0, 0, 1);
			SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"你因为厌食症而吃不下食物");
			if(GetGVarInt("InstantUse", playerid) == 1) DeleteGVar("InstantUse", playerid);
			else GivePlayerItem(playerid, 1, chosed, -1);
			return 1;
		}
		else if(PlayerData[playerid][pHunger] > 95.0 && php > 99.0+PlayerData[playerid][pMaxHealth])
		{
			LimitData[playerid][plEat] ++;
		}
	}
	else if(ItemsList_USE[chosed][iuType] == IU_SEED)
	{
		new Float:depth, Float:playerdepth, pworld;
		CA_IsPlayerInWater(playerid, depth, playerdepth);
		if(depth > 2.0 && playerdepth > 2.0)
		{
		    GetPlayerPos(playerid, px, py, pz);
		    pworld = GetPlayerVirtualWorld(playerid);
		    CreateDropItem(ITEM_USE, chosed, 1, px, py, pz, pworld);
			SendClientMessage(playerid, COLOR_WHITE, "错误: 你在水中使用了种子,现在种子掉到了水里面");
			if(GetGVarInt("InstantUse", playerid) == 1) DeleteGVar("InstantUse", playerid);
			else GivePlayerItem(playerid, 1, chosed, -1);
			return 1;
		}
	}

	if(ItemsList_USE[chosed][iuType] == IU_POT || ItemsList_USE[chosed][iuType] == IU_OBJECT)
	{
	    if(!PlayerCanPlaceObject(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法放置物件");
		new objlist, tmpobj;
		objlist = ItemsList_USE[chosed][iuObject];
		GetPlayerPos(playerid, px, py, pz);
		GetXYInFrontOfPlayer(playerid, px, py, 5.0);
		tmpobj = CreateObject(ObjectList[objlist][oObjID], px, py, pz, 0.0, 0.0, 0.0);
		EditObject_Fix(playerid, tmpobj);
		SetGVarInt("EditMode", SELECT_BUILD, playerid);
		SetGVarInt("EditItem", chosed, playerid);
		SetGVarInt("EditObject", objlist, playerid);
		SetGVarInt("EditObjID", tmpobj, playerid);
		SendClientMessage(playerid, COLOR_WHITE, "你可以拖拉移动这个物件,按住空白键可以移动视角,按Esc将会取消放置,按确定则将会将物件放置在指定位置");
	}
	else
	{
		switch(chosed)
		{
		    case 1:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份铃铛儿童号,恢复生命20点,饥饿35点");
				GiveHealth_Delayed(playerid, 20.0);
				PlayerData[playerid][pHunger] += 35.0;
			}
			case 2:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份叮当炸鸡号,吃完后将恢复生命25点,饥饿40点");
	 			GiveHealth_Delayed(playerid, 25.0);
				PlayerData[playerid][pHunger] += 40.0;
		    }
			case 3:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份豪华炸鸡桶,吃完后将恢复生命25点,饥饿60点");
				GiveHealth_Delayed(playerid, 25.0);
				PlayerData[playerid][pHunger] += 60.0;
			}
		 	case 4:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份黄金分享鸡,吃完后将恢复生命50点,饥饿100点");
				GiveHealth_Delayed(playerid, 50.0);
				PlayerData[playerid][pHunger] += 100.0;
			}
			case 5:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份小披萨,吃完后将恢复生命20点,饥饿35点");
				GiveHealth_Delayed(playerid, 20.0);
				PlayerData[playerid][pHunger] += 35.0;
			}
			case 6:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份披萨组合,吃完后将恢复生命20点,饥饿50点");
				GiveHealth_Delayed(playerid, 20.0);
				PlayerData[playerid][pHunger] += 50.0;
			}
			case 7:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份巨无霸披萨,吃完后将恢复生命25点,饥饿65点");
				GiveHealth_Delayed(playerid, 25.0);
				PlayerData[playerid][pHunger] += 65.0;
			}
			case 8:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份叮当合作优惠,吃完后将恢复生命50点,饥饿100点");
				GiveHealth_Delayed(playerid, 50.0);
				PlayerData[playerid][pHunger] += 100.0;
			}
			case 9:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份一号小卡拉鸡,吃完后将恢复生命25点,饥饿30点");
				GiveHealth_Delayed(playerid, 25.0);
				PlayerData[playerid][pHunger] += 30.0;
			}
			case 10:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份二号双层牛肉堡,吃完后将恢复生命25点,饥饿40点");
				GiveHealth_Delayed(playerid, 25.0);
				PlayerData[playerid][pHunger] += 40.0;
			}
			case 11:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份三号四层红牛堡,吃完后将恢复生命30点,饥饿50点");
				GiveHealth_Delayed(playerid, 30.0);
				PlayerData[playerid][pHunger] += 50.0;
			}
			case 12:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一份四号全家优惠,吃完后将恢复生命50点,饥饿100点");
				GiveHealth_Delayed(playerid, 50.0);
				PlayerData[playerid][pHunger] += 100.0;
			}
			case 13:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个草莓甜甜圈,吃完后将恢复生命10点,饥饿15点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 14:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个巧克力甜甜圈,吃完后将恢复生命10点,饥饿15点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 15:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个原味甜甜圈,吃完后将恢复生命10点,饥饿15点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 16:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了甜甜圈盒,获得了4个甜甜圈跟1个美式咖啡");
				for(new i = 0; i < 4; i++)
				{
				    new rand = random(3);
					switch(rand)
					{
						case 0: GivePlayerItem(playerid, 1, 13, 1);
						case 1: GivePlayerItem(playerid, 1, 14, 1);
						case 2: GivePlayerItem(playerid, 1, 15, 1);
					}
				}
				GivePlayerItem(playerid, 1, 17, 1);
			}
			case 17:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯美式咖啡,恢复体力5点,饥饿1点");
				PlayerData[playerid][pStamina] += 5.0;
				PlayerData[playerid][pHunger] += 1.0;
			}
			case 18:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯拿铁,恢复体力5点,饥饿2点");
				PlayerData[playerid][pStamina] += 5.0;
				PlayerData[playerid][pHunger] += 2.0;
			}
			case 19:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯卡布奇诺,恢复体力4点,饥饿3点");
				PlayerData[playerid][pStamina] += 4.0;
				PlayerData[playerid][pHunger] += 3.0;
			}
			case 20:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯黑咖啡,恢复体力6点");
				PlayerData[playerid][pStamina] += 6.0;
			}
			case 21:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯可乐,恢复生命15点,饥饿5点");
				GiveHealth_Delayed(playerid, 15.0);
				PlayerData[playerid][pHunger] += 5.0;
			}
			case 22:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯红茶,恢复生命10点,饥饿7点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pHunger] += 7.0;
			}
			case 23:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯汽水,恢复生命5点,饥饿10点");
				GiveHealth_Delayed(playerid, 5.0);
				PlayerData[playerid][pHunger] += 10.0;
			}
			case 24:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一杯沙士,恢复生命8点,饥饿8点");
				GiveHealth_Delayed(playerid, 8.0);
				PlayerData[playerid][pHunger] += 8.0;
			}
			case 25:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个鲔鱼罐头,恢复生命8点,饥饿15点");
				GiveHealth_Delayed(playerid, 8.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 26:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个吐司面包,恢复生命5点,饥饿20点");
				GiveHealth_Delayed(playerid, 5.0);
				PlayerData[playerid][pHunger] += 20.0;
			}
			case 27:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个御饭团,恢复生命5点,饥饿15点");
				GiveHealth_Delayed(playerid, 5.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 28:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个微波汉堡,恢复生命7点,饥饿18点");
				GiveHealth_Delayed(playerid, 7.0);
				PlayerData[playerid][pHunger] += 18.0;
			}
			case 29:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个乐活洋芋片,恢复生命15点,饥饿10点");
				GiveHealth_Delayed(playerid, 15.0);
				PlayerData[playerid][pHunger] += 10.0;
			}
			case 30:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个拿丘司玉米片,恢复生命12点,饥饿12点");
				GiveHealth_Delayed(playerid, 12.0);
				PlayerData[playerid][pHunger] += 12.0;
			}
			case 31:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个皮可起司球,恢复生命18点,饥饿8点");
				GiveHealth_Delayed(playerid, 18.0);
				PlayerData[playerid][pHunger] += 8.0;
			}
			case 32:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了1个OK绷,生命恢复到75点");
				SetPlayerHealth_Fix(playerid, 75.0);
			}
			case 34:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一瓶蛮牛,30分钟内恢体力恢复量增加1.5倍");
				SickData[playerid][scStamBuff] = 1800;
			}
	  		case 35:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你喝了一瓶红牛,1小时内体力恢复量增加1.5倍");
				SickData[playerid][scStamBuff] = 3600;
			}
			case 36:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了维他命,30分钟内将停止因疾病造成的负面效果");
				SickData[playerid][scSickBuff] = 1800;
			}
			case 37:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了抗生素,1小时内将停止因疾病造成的负面效果");
				SickData[playerid][scSickBuff] = 1800;
			}
			case 45:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 打开了鱼饵包,获得了30个鱼饵");
				GivePlayerItem(playerid, 1, 33, 30);

				UpdatePlayerMission(playerid, 9, 8);
			}
			case 64:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了密盆草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(1, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 65:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了百合花种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(2, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 66:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了木盆草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(3, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 67:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了圣诞红种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(4, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 68:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了小椰子种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(5, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 69:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了硬草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(6, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 77:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了斯兰种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(7, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 78:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了巨型仙人掌种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(8, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 79:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了散叶仙人掌种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(9, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 85:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个生兽肉,恢复生命2点,饥饿4点");
				GiveHealth_Delayed(playerid, 2.0);
				PlayerData[playerid][pHunger] += 4.0;
			}
			case 91:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了1个手工绷带,生命恢复到30点");
				SetPlayerHealth_Fix(playerid, 30.0);
			}
			case 101..103:
			{
				new found;
			    for(new i, j = MAX_PLANTS; i < j; i++)
				{
				   	if(IsPlayerInRangeOfPointEx(playerid, 1.5, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]))
					{
						if(PlantData[i][ptFirtile] > 0)
						{
						    return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个植物不需要施肥");
						    //GivePlayerItem(playerid, 1, chosed, 1);
						}
						new plantid = PlantData[i][ptPlantID];
			    		format(string, sizeof(string), "** 你为"#TEXT_LIGHTGREEN" %s "#TEXT_WHITE"施肥了", PlantList[plantid][ptName]);
			    		if(chosed == 101) {PlantData[i][ptFirtile] = 30;}
			    		else if(chosed == 102) {PlantData[i][ptFirtile] = 120;}
			    		else if(chosed == 103) {PlantData[i][ptFirtile] = 720;}
			    		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
			    		UpdatePlantData(i);
			    		found = 1;
			    		break;
			    	}
				}
				if(found == 0)
				{
				    //GivePlayerItem(playerid, 1, chosed, 1);
				    return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有植物来施肥");
				}
			}
			case 107:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了小红花种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(10, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 108:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了马草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(11, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 109:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了二回树种子,你的植物将会在这里长大");
	           	GetPlayerPos(playerid, px, py, pz);
				CreatePlant(12, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 110:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了绿色药草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(13, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 111:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了黄色药草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(14, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 112:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了白色药草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(15, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 113:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了红色药草种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(16, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 97:
			{
			    new rand = random(2);
			    if(SickData[playerid][scHealth] > 0)
			    {
			        if(rand == 0)
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了绿色药品,治疗了因为生命过低引发的疾病,并恢复了生命至50点");
						SickData[playerid][scHealth] = 0;
					}
					else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了绿色药品,但是疾病并未治好,生命恢复至50点");
				}
				else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了绿色药品,生命恢复至50点");

	            if(GetPlayerHealth_Fix(playerid) < 50.0){SetPlayerHealth_Fix(playerid, 50.0);}
			}
			case 98:
			{
			    new rand = random(2);
			    if(SickData[playerid][scStamina] > 0)
			    {
			        if(rand == 0)
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了白色药品,治疗了因体力不足引发的疾病,并恢复了体力至20点");
						SickData[playerid][scStamina] = 0;
					}
					else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了白色药品,但是疾病并未治好,恢复了体力至20点");
				}
				else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了白色药品,恢复了体力至20点");

	            if(PlayerData[playerid][pStamina] < 20.0){PlayerData[playerid][pStamina] = 20.0;}
			}
			case 99:
			{
			    new rand = random(2);
			    if(SickData[playerid][scHunger] > 0)
			    {
			        if(rand == 0)
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了黄色药品,治疗了因体力不足引发的疾病,恢复了饥饿值至25点");
						SickData[playerid][scHunger] = 0;
					}
					else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了黄色药品,但是疾病并未治好,恢复了饥饿值至25点");
				}
				else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了黄色药品,治疗了因饥饿引发的疾病,并恢复了饥饿值至25点");

	            if(PlayerData[playerid][pHunger] < 25.0){PlayerData[playerid][pHunger] = 25.0;}
			}
			case 96:
			{
			    //GetPlayerHealth(playerid, php);
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了肾上腺素,生命恢复到50点");
	            if(GetPlayerHealth_Fix(playerid) < 50.0){SetPlayerHealth_Fix(playerid, 50.0);}
			}
			case 100:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了医疗包,完完全全恢复了生命");
	            SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
			}
			case 115:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗蛋,恢复生命5点,饥饿5点");
				GiveHealth_Delayed(playerid, 5.0);
				PlayerData[playerid][pHunger] += 5.0;
			}
			case 116:
			{
				new rand = random(sizeof(AnimalsList)), tmptimer;
				if(rand > 0)
				{
					SetPlayerSkin_Fix(playerid, AnimalsList[rand][amlModel]);
					SetGVarInt("PlayerAnimal", rand, playerid);
					tmptimer = SetPlayerTimerEx(playerid, "ReturnToHuman", 900000, 0, "i", playerid);
					SetGVarInt("RTHTimer", tmptimer, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了迷幻仙人掌,感觉"#TEXT_RED"好像"#TEXT_RED"怪怪的....");
				}
				else format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了迷幻仙人掌,尝起来很怪的植物");
			}
			case 118:
			{
			    new rand = 1000 + 4000;
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了肮脏的手提箱,发现里面装着现金$%d", rand);
				GiveMoney(playerid, rand);
				Log(moneylog, INFO, "%s(%d)打开了肮脏的手提箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], rand);
			}
			case 119:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你点着了香烟,按 鼠标左键 能吸食");
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_SMOKE_CIGGY);
				DeleteGVar("Smoking", playerid);
			}
			case 120:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个熟兽肉,恢复生命15点,饥饿15点");
				GiveHealth_Delayed(playerid, 15.0);
				PlayerData[playerid][pHunger] += 15.0;
			}
			case 121:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个田鸡肉,恢复生命4点,饥饿6点");
				GiveHealth_Delayed(playerid, 4.0);
				PlayerData[playerid][pHunger] += 6.0;
			}
			case 122:
			{
				format(string, sizeof(string), ""#TEXT_FADEGREEN"有毒!: 你吃到了未处理的蟾蜍肉,损失生命30点!");
				GiveHealth(playerid, -30.0);
			}
			case 123:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个熟鱼肉,恢复生命10点,饥饿10点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pHunger] += 10.0;
			}
			case 124:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个熟鱼肉,恢复生命20点,饥饿20点");
				GiveHealth_Delayed(playerid, 20.0);
				PlayerData[playerid][pHunger] += 20.0;
			}
			case 125:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一个熟鱼肉,恢复生命40点,饥饿40点");
				GiveHealth_Delayed(playerid, 40.0);
				PlayerData[playerid][pHunger] += 40.0;
			}
			case 126:
			{
				format(string, sizeof(string), ""#TEXT_FADEGREEN"有毒!: 你吃到了未处理的河豚肉,损失生命60点!");
				GiveHealth(playerid, -60.0);
			}
			case 131:
			{
			    switch(random(5))
			    {
			        case 0:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$10,000的财宝以及经验值1000点!");
						GiveMoney(playerid, 10000);
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 10000);
						GivePlayerExp(playerid, 1000, EXP_ITEM);
					}
					case 1:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$5,000的财宝以及经验值1000点!");
						GiveMoney(playerid, 5000);
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 5000);
						GivePlayerExp(playerid, 1000, EXP_ITEM);
					}
					case 2:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$7,500的财宝以及经验值1000点!");
						GiveMoney(playerid, 7500);
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 7500);
						GivePlayerExp(playerid, 1000, EXP_ITEM);
					}
					case 3:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$2,000的财宝以及经验值3200点!");
						GiveMoney(playerid, 2000);
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 2000);
						GivePlayerExp(playerid, 3200, EXP_ITEM);
					}
					case 4:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面空空如也!");
					}
				}
			}
			case 319:
			{
			    switch(random(4))
			    {
			        case 0:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$25,000的财宝");
						GiveMoney(playerid, 25000);
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 25000);
					}
					case 1:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着很多弹药的沙漠之鹰");
						GivePlayerWeapon(playerid, 24, 900);
					}
					case 2:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面装着价值$15,000的财宝");
						Log(moneylog, INFO, "%s(%d)打开了宝藏箱获得了现金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 15000);
						GiveMoney(playerid, 15000);
					}
					case 3:
			        {
						format(string, sizeof(string), ""#TEXT_WHITE"确认: 你打开了宝藏箱,发现里面空空如也!");
					}
				}
			}
			case 132:
			{
			    new vehicleid = GetNearestVehicle(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了燃料罐,为载具%s补充了20燃料", GetVehicleName(GetVehicleModel(vehicleid)));
				if(VehData[vehicleid][vFuel] + 20 > 100) VehData[vehicleid][vFuel] = 100;
				else VehData[vehicleid][vFuel] += 20;
			}
			case 133:
			{
			    new vehicleid = GetNearestVehicle(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了燃料罐,为载具%s补充了50燃料", GetVehicleName(GetVehicleModel(vehicleid)));
				if(VehData[vehicleid][vFuel] + 50 > 100) VehData[vehicleid][vFuel] = 100;
				else VehData[vehicleid][vFuel] += 50;
			}
			case 134:
			{
			    new vehicleid = GetNearestVehicle(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了燃料罐,为载具%s补充了100燃料", GetVehicleName(GetVehicleModel(vehicleid)));
				if(VehData[vehicleid][vFuel] +100 > 100) VehData[vehicleid][vFuel] = 100;
				else VehData[vehicleid][vFuel] += 100;
			}
			case 135:
			{
			    new Float:ar = GetPlayerArmour_Fix(playerid);
			    if(ar < 20)
			    {
			        SetPlayerArmour_Fix(playerid, 20.0);
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你穿上了轻型护甲");
			}
			case 136:
			{
			    new Float:ar = GetPlayerArmour_Fix(playerid);
			    if(ar < 50)
			    {
			        SetPlayerArmour_Fix(playerid, 50.0);
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你穿上了普通护甲");
			}
			case 137:
			{
			    new Float:ar = GetPlayerArmour_Fix(playerid);
			    if(ar < 80)
			    {
			        SetPlayerArmour_Fix(playerid, 80.0);
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你穿上了重型护甲");
			}
			case 138:
			{
			    new Float:ar = GetPlayerArmour_Fix(playerid);
			    if(ar < 100)
			    {
			        SetPlayerArmour_Fix(playerid, 100.0);
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你穿上了超重型护甲");
			}
			case 159:
			{
			    if(PlayerHaveItem(playerid, 1, 70) > 9)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 但水已经装到满出来了");
				}
				else
				{
				    GivePlayerItem(playerid, 1, 70, 10-PlayerHaveItem(playerid, 1, 70));
					format(string, sizeof(string), ""#TEXT_WHITE"完成: 你补充了身上的水桶");
				}
			}
			case 160:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一根热狗,恢复了生命15点,饥饿20点");
				GiveHealth_Delayed(playerid, 15.0);
				PlayerData[playerid][pHunger] += 20.0;
			}
			case 161:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一盒冰淇淋,恢复了生命20点,饥饿10点");
				GiveHealth_Delayed(playerid, 20.0);
				PlayerData[playerid][pHunger] += 10.0;
			}
			case 313:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗苹果,恢复了生命9点,饥饿12点");
				GiveHealth_Delayed(playerid, 9.0);
				PlayerData[playerid][pHunger] += 12.0;
			}
			case 314:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗青苹果,恢复了生命6点,饥饿14点");
				GiveHealth_Delayed(playerid, 6.0);
				PlayerData[playerid][pHunger] += 14.0;
			}
			case 315:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗橘子,恢复了生命8点,饥饿10点");
				GiveHealth_Delayed(playerid, 8.0);
				PlayerData[playerid][pHunger] += 10.0;
			}
			case 316:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗番茄,恢复了生命10点,体力10点");
				GiveHealth_Delayed(playerid, 10.0);
				PlayerData[playerid][pStamina] += 10.0;
			}
			case 317:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你吃了一颗香蕉,恢复了生命15点,体力6点");
				GiveHealth_Delayed(playerid, 15.0);
				PlayerData[playerid][pStamina] += 6.0;
			}
			case 149:
			{
			    new rand = random(9), gunid, ammo;
			    switch(rand)
			    {
			        case 0: gunid = 24, ammo = 150;
			        case 1: gunid = 25, ammo = 100;
			        case 2: gunid = 27, ammo = 75;
			        case 3: gunid = 28, ammo = 500;
			        case 4: gunid = 29, ammo = 400;
			        case 5: gunid = 30, ammo = 300;
			        case 6: gunid = 31, ammo = 200;
			        case 7: gunid = 33, ammo = 100;
			        case 8: gunid = 34, ammo = 50;
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你拿到了%s以及弹药%d发", WeaponsList[gunid][wName], ammo);
				GivePlayerWeapon(playerid, gunid, ammo);
			}
	        case 150:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你获得了50火药");
				GivePlayerItem(playerid, 1, 90, 50);
			}
			case 151:
			{
			    new itemid;
			    switch(random(3))
			    {
			        case 0: itemid = 97;
			        case 1: itemid = 98;
			        case 2: itemid = 99;
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你拿到了%s5个", ItemsList_USE[itemid][iuName]);
				GivePlayerItem(playerid, 1, itemid, 5);
			}
			case 152:
			{
			    new itemid;
			    switch(random(50))
			    {
			        case 0: itemid = 200;
			        case 1: itemid = 201;
			        case 2: itemid = 203;
			        case 3: itemid = 224;
			        case 4: itemid = 225;
			        case 5: itemid = 226;
			        case 6: itemid = 227;
			        case 7: itemid = 230;
			        case 8: itemid = 231;
			        case 9: itemid = 232;
			        case 10: itemid = 233;
			        case 11: itemid = 234;
			        case 12: itemid = 235;
			        case 13: itemid = 236;
			        case 14: itemid = 237;
			        case 15: itemid = 238;
			        case 16: itemid = 239;
			        case 17: itemid = 240;
			        case 18: itemid = 241;
			        case 19: itemid = 242;
			        case 20: itemid = 251;
			        case 21: itemid = 252;
			        case 22: itemid = 253;
			        case 23: itemid = 254;
			        case 24: itemid = 255;
			        case 25: itemid = 256;
			        case 26: itemid = 257;
			        case 27: itemid = 258;
			        case 28: itemid = 261;
			        case 29: itemid = 262;
			        case 30: itemid = 267;
			        case 31: itemid = 268;
			        case 32: itemid = 269;
			        case 33: itemid = 270;
			        case 34: itemid = 271;
			        case 35: itemid = 272;
			        case 36: itemid = 273;
			        case 37: itemid = 274;
			        case 38: itemid = 275;
			        case 39: itemid = 276;
			        case 40: itemid = 277;
			        case 41: itemid = 278;
			        case 42: itemid = 279;
			        case 43: itemid = 280;
			        case 44: itemid = 281;
			        case 45: itemid = 282;
			        case 46: itemid = 283;
			        case 47: itemid = 284;
			        case 48: itemid = 285;
			        case 49: itemid = 286;
			    }
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你获得了 %s 一个", ItemsList_USE[itemid][iuName]);
				GivePlayerItem(playerid, 1, itemid, 1);
			}
			case 153..157:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"错误: 这个货物没有直接的用途");
				notused = 1;
			}
			case 163:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了紫色棒棒");
				GivePlayerWeapon(playerid, 10, 1);
			}
			case 164:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了棒棒");
				GivePlayerWeapon(playerid, 11, 1);
			}
			case 165:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了按摩棒");
				GivePlayerWeapon(playerid, 12, 1);
			}
			case 166:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了银色按摩棒");
				GivePlayerWeapon(playerid, 13, 1);
			}
			case 167:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了主宰者重装,注意: 死亡或是下线后将会消失");
				GivePlayerArmourSuit(playerid, 1);
			}
			case 169:
			{
			    if(PlayerHaveWeapon(playerid, 24) == 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有沙漠之鹰手枪才能使用这个道具");
					notused = 1;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发手枪爆裂子弹");
					GivePlayerExplosiveShell(playerid, 24, 10);
				}
			}
			case 170:
			{
			    if(PlayerHaveWeapon(playerid, 27) == 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有战斗霰弹枪才能使用这个道具");
					notused = 1;

				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发霰弹枪爆裂子弹");
					GivePlayerExplosiveShell(playerid, 27, 10);
				}
			}
			case 171:
			{
			    if(PlayerHaveWeapon(playerid, 34) == 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有狙击枪枪才能使用这个道具");
					notused = 1;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发狙击枪爆裂子弹");
					GivePlayerExplosiveShell(playerid, 34, 10);
				}
			}
			case 306:
			{
			    if(PlayerHaveWeapon(playerid, 22) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了17发9mm手枪子弹");
					GivePlayerWeapon(playerid, 22, 17);
				}
				else if(PlayerHaveWeapon(playerid, 23) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了17发9mm手枪子弹");
					GivePlayerWeapon(playerid, 23, 17);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有9mm手枪才能使用这个道具");
					notused = 1;
				}
			}
			case 307:
			{
			    if(PlayerHaveWeapon(playerid, 28) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了30发冲锋枪子弹");
					GivePlayerWeapon(playerid, 28, 30);
				}
				else if(PlayerHaveWeapon(playerid, 29) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了30发冲锋枪子弹");
					GivePlayerWeapon(playerid, 29, 30);
				}
				else if(PlayerHaveWeapon(playerid, 32) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了30发冲锋枪子弹");
					GivePlayerWeapon(playerid, 32, 30);
				}
				else
				{
                    format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有冲锋枪才能使用这个道具");
					notused = 1;
				}
			}
			case 308:
			{
			    if(PlayerHaveWeapon(playerid, 25) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发霰弹");
					GivePlayerWeapon(playerid, 25, 10);
				}
				else if(PlayerHaveWeapon(playerid, 26) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发霰弹");
					GivePlayerWeapon(playerid, 26, 10);
				}
				else if(PlayerHaveWeapon(playerid, 27) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发霰弹");
					GivePlayerWeapon(playerid, 27, 10);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有霰弹枪才能使用这个道具");
					notused = 1;
				}
			}
			case 309:
			{
			    if(PlayerHaveWeapon(playerid, 24) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了7发重手枪子弹");
					GivePlayerWeapon(playerid, 24, 7);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有沙漠之鹰才能使用这个道具");
					notused = 1;
				}
			}
			case 310:
			{
			    if(PlayerHaveWeapon(playerid, 30) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了30发步枪子弹");
					GivePlayerWeapon(playerid, 30, 30);
				}
				else if(PlayerHaveWeapon(playerid, 31) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了30发步枪子弹");
					GivePlayerWeapon(playerid, 31, 30);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有步枪才能使用这个道具");
					notused = 1;
				}
			}
			case 311:
			{
			    if(PlayerHaveWeapon(playerid, 33) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发来福枪子弹");
					GivePlayerWeapon(playerid, 33, 10);
				}
				else if(PlayerHaveWeapon(playerid, 34) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了10发来福枪子弹");
					GivePlayerWeapon(playerid, 34, 10);
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有来福枪才能使用这个道具");
					notused = 1;
				}
			}
			case 312:
			{
			    if(PlayerHaveWeapon(playerid, 35) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了5发火箭弹");
					GivePlayerWeapon(playerid, 35, 5);
				}
				else if(PlayerHaveWeapon(playerid, 36) > 0)
				{
					format(string, sizeof(string), ""#TEXT_WHITE"确认: 你装填了5发火箭弹");
					GivePlayerWeapon(playerid, 36, 5);
				}
				else
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"错误: 你必须要有火箭筒才能使用这个道具");
					notused = 1;
				}
			}
			case 172:
			{
	            format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了警用基本装备");
	            GivePlayerWeapon(playerid, 24, 240);
	            GivePlayerWeapon(playerid, 41, 500);
	            GivePlayerWeapon(playerid, 3, 1);
				SetPlayerArmour_Fix(playerid, 20.0);
			}
			case 173:
			{
	            format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了警用战斗装备");
	            GivePlayerWeapon(playerid, 24, 240);
	            GivePlayerWeapon(playerid, 25, 50);
				SetPlayerArmour_Fix(playerid, 50.0);
			}
			case 174:
			{
	            format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了警用冲锋装备");
	            GivePlayerWeapon(playerid, 24, 240);
	            GivePlayerWeapon(playerid, 29, 500);
				SetPlayerArmour_Fix(playerid, 80.0);
			}
			case 175:
			{
	            format(string, sizeof(string), ""#TEXT_WHITE"确认: 你使用了警用镇暴装备");
	            GivePlayerWeapon(playerid, 27, 100);
	            GivePlayerWeapon(playerid, 31, 650);
				SetPlayerArmour_Fix(playerid, 100.0);
			}
			case 176:
			{
			    if(PlayerLotto[playerid][0][lotNum] > 0)
				{
				    ShowPlayerDialog(playerid, DIALOG_LOTTO, DIALOG_STYLE_INPUT, "乐透彩券", ""#TEXT_WHITE"你已经参与了这次乐透开奖\n再次使用彩券将会更改已选的6个号码\n输入6个号码以继续,否则请选择取消", "确认", "取消");
				}
				else
				{
				    ShowPlayerDialog(playerid, DIALOG_LOTTO, DIALOG_STYLE_INPUT, "乐透彩券", ""#TEXT_WHITE"请输入6个号码,确认后将参与下一次开奖\n"#TEXT_YELLOW"注意: 只有在乐透开奖期间在线上才能参与开奖", "确认", "取消");
				}
	      		notused = 1;//尚未使用掉道具,等到在Dialog确认使用后再扣除
	      		format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用乐透彩券");
			}
			case 177:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(ItemsList_EQ); i < j; i++)
				{
				    if(ItemsList_EQ[i][ieqType] == IEQ_SKINX && !PlayerHaveItem(playerid, 2, i))
				    {
				        format(strlist, sizeof(strlist), "%s%s\t%s\t%d\t%d\n", strlist, ItemsList_EQ[i][ieqName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
				    }
				}
				if(l == 0){return ShowPlayerDialog(playerid, DIALOG_TICKET_THROW, DIALOG_STYLE_MSGBOX, ""#TEXT_VIOLET"特殊造型兑换券", ""#TEXT_WHITE"你已经拥有所有特殊造型了\n要丢掉这张券吗?", "确定", "取消");}
				format(strlist, sizeof(strlist), "造型名称\n%s", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_SKIN1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_VIOLET"特殊造型兑换券", strlist, "兑换", "关闭");
				notused = 1;//尚未使用掉道具,等到在Dialog确认使用后再扣除
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用特殊造型兑换券");
			}
			case 178:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(ItemsList_EQ); i < j; i++)
				{
				    if(ItemsList_EQ[i][ieqType] == IEQ_SKINX && !PlayerHaveItem(playerid, 2, i))
				    {
				        format(strlist, sizeof(strlist), "%s%s\n", strlist, ItemsList_EQ[i][ieqName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
				    }
				}
				if(l == 0){return ShowPlayerDialog(playerid, DIALOG_TICKET_THROW, DIALOG_STYLE_MSGBOX, ""#TEXT_VIOLET"特殊造型抽奖券", ""#TEXT_WHITE"你已经拥有所有特殊造型了\n要丢掉这张券吗?", "确定", "取消");}
				format(strlist, sizeof(strlist), ""#TEXT_WHITE"可能抽到的造型:\n%s\n要开始抽奖吗?", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_SKIN2, DIALOG_STYLE_MSGBOX, ""#TEXT_VIOLET"特殊造型抽奖券", strlist, "开始", "关闭");
				SetGVarInt("DListAmount", l, playerid);
				notused = 1;//尚未使用掉道具,等到在Dialog确认使用后再扣除
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用特殊造型抽奖券");
			}
			case 179:
			{
			    new strlist[144];
			    format(strlist, sizeof(strlist), ""#TEXT_WHITE"选择要兑换50点的知识点\n机械知识\n信息知识\n研发知识\n医学知识\n洞察知识");
			    ShowPlayerDialog(playerid, DIALOG_TICKET_PT1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEBLUE"50点一般知识兑换券", strlist, "兑换", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用50点一般知识兑换券");
			    notused = 1;
			}
			case 180:
			{
			    new strlist[144];
			    format(strlist, sizeof(strlist), ""#TEXT_WHITE"选择要兑换100点的知识点\n机械知识\n信息知识\n研发知识\n医学知识\n洞察知识");
			    ShowPlayerDialog(playerid, DIALOG_TICKET_PT2, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEBLUE"100点一般知识兑换券", strlist, "兑换", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用100点一般知识兑换券");
			    notused = 1;
			}
			case 181:
			{
			    new strlist[512];
			    format(strlist, sizeof(strlist), ""#TEXT_WHITE"选择要兑换500点的武器技能\n手枪熟练度\n沙漠之鹰手枪熟练度\n霰弹枪熟练度\n短管霰弹熟练度\n战斗霰弹枪熟练度\n乌兹冲锋枪熟练度\nMP5冲锋枪熟练度\nAK47步枪熟练度\nM4步枪熟练度\n来福枪熟练度");
			    ShowPlayerDialog(playerid, DIALOG_TICKET_PT3, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEBLUE"500点武器技能兑换券", strlist, "兑换", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 500点武器技能兑换券");
			    notused = 1;
			}
			case 182:
			{
			    new strlist[512];
			    format(strlist, sizeof(strlist), ""#TEXT_WHITE"选择要兑换999点的武器技能\n手枪熟练度\n沙漠之鹰手枪熟练度\n霰弹枪熟练度\n短管霰弹熟练度\n战斗霰弹枪熟练度\n乌兹冲锋枪熟练度\nMP5冲锋枪熟练度\nAK47步枪熟练度\nM4步枪熟练度\n来福枪熟练度");
			    ShowPlayerDialog(playerid, DIALOG_TICKET_PT4, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEBLUE"999点武器技能兑换券", strlist, "兑换", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用999点武器技能兑换券");
			    notused = 1;
			}
			case 183..185:
			{
			    return format(string, sizeof(string), ""#TEXT_WHITE"这张兑换券将会在购买载具时生效,你可以前往适用的车商订购载具来使用这张券");
			}
			case 186:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(AnimalsList); i < j; i++)
				{
				    if(AnimalsList[i][amlType] == ANIMAL_NONE) continue;
				    if(AnimalsList[i][amlType] == ANIMAL_DOG_S || AnimalsList[i][amlType] == ANIMAL_DOG_M || AnimalsList[i][amlType] == ANIMAL_DOG_L || AnimalsList[i][amlType] == ANIMAL_CAT)
				    {
				        format(strlist, sizeof(strlist), "%s%s\n", strlist, AnimalsList[i][amlName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
				    }
				}
				format(strlist, sizeof(strlist), "品种\n%s", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_PET1, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADERED"猫狗宠物兑换券", strlist, "选择", "关闭");
				SetGVarInt("DListAmount", l, playerid);
				notused = 1;
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用猫狗宠物兑换券");
			}
			case 187:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(AnimalsList); i < j; i++)
				{
				    if(AnimalsList[i][amlType] == ANIMAL_NONE || AnimalsList[i][amlType] == ANIMAL_BIGFOOT) continue;
				    format(strlist, sizeof(strlist), "%s%s\n", strlist, AnimalsList[i][amlName]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				format(strlist, sizeof(strlist), ""#TEXT_WHITE"可能抽到的动物\n%s\n要开始抽奖吗?", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_PET2, DIALOG_STYLE_MSGBOX, ""#TEXT_FADERED"宠物抽奖券", strlist, "开始", "关闭");
				SetGVarInt("DListAmount", l, playerid);
				notused = 1;
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用宠物抽奖券");
			}
			case 188:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(AnimalsList); i < j; i++)
				{
				    if(AnimalsList[i][amlType] == ANIMAL_NONE) continue;
				    if(AnimalsList[i][amlType] == ANIMAL_WOLF || AnimalsList[i][amlType] == ANIMAL_BEAR || AnimalsList[i][amlType] == ANIMAL_GATOR)
				    {
				        format(strlist, sizeof(strlist), "%s%s\n", strlist, AnimalsList[i][amlName]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
				    }
				}
				format(strlist, sizeof(strlist), "品种\n%s", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_PET3, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADERED"猛禽宠物兑换券", strlist, "选择", "关闭");
				notused = 1;
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用猛禽宠物兑换券");
			}
			case 189:
			{
			    new strlist[512], l;
			    for(new i, j = sizeof(AnimalsList); i < j; i++)
				{
				    if(AnimalsList[i][amlType] == ANIMAL_NONE || AnimalsList[i][amlType] == ANIMAL_BIGFOOT) continue;
				    format(strlist, sizeof(strlist), "%s%s\n", strlist, AnimalsList[i][amlName]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				format(strlist, sizeof(strlist), "品种\n%s", strlist);
				ShowPlayerDialog(playerid, DIALOG_TICKET_PET4, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADERED"爱心满满宠物兑换券", strlist, "选择", "关闭");
				SetGVarInt("DListAmount", l, playerid);
				notused = 1;
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用爱心满满宠物兑换券");
			}
			case 190:
			{
			    return SendClientMessage(playerid, COLOR_WHITE, "这张兑换券将会在购买地产时生效,你可以前往想要兑换的地产选择购买来使用这张券");
			}
			case 191:
			{
			    return SendClientMessage(playerid, COLOR_WHITE, "这张兑换券将会在为地产更改内装时生效,你可以前往想要装潢的地产内选项选择装潢->修改内装来使用这张券");
			}
			case 192:
			{
			    ShowPlayerDialog(playerid, DIALOG_TICKET_BAG1, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"100背包空间兑换券", ""#TEXT_WHITE"确认要扩充100格背包空间吗?", "确认", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用100背包空间兑换券");
			    notused = 1;
			}
			case 302:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了喷漆罐");
				GivePlayerWeapon(playerid, 41, 1000);
			}
			case 303:
			{
			    ShowPlayerDialog(playerid, DIALOG_BLETTER, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"瓶中信", ""#TEXT_WHITE"请输入要写在瓶中信上的内容\n** 捡到瓶中信的人将会知道信是谁写的", "投掷", "关闭");
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 正在使用瓶中信");
			    notused = 1;
			}
			case 304:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了樱花树种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(17, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
			case 318:
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了相机");
				GivePlayerWeapon(playerid, 43, 100);
			}
			case 320:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){ return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); }
		        SetGVarInt("SelectMode", SELECT_PLANT_POISON, playerid);
				SelectObject_Fix(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请点击你要下毒的植物,按住空白键可以移动视角,按ESC键结束");
				notused = 1;
		    }
		    case 321:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){ return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); }
		        SetGVarInt("SelectMode", SELECT_PLANT_CURE, playerid);
				SelectObject_Fix(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请点击你要解毒的植物,按住空白键可以移动视角,按ESC键结束");
				notused = 1;
		    }
		    case 322:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"确认: 使用了林檎树种子,你的植物将会在这里长大");
	            GetPlayerPos(playerid, px, py, pz);
				CreatePlant(18, playerid, px, py, pz, GetPlayerVirtualWorld(playerid));
				RecordData[playerid][prPlant] ++;
			}
		}
		SendClientMessage(playerid, COLOR_WHITE, string);
		if(GetGVarInt("InstantUse", playerid) == 1 || notused == 1) DeleteGVar("InstantUse", playerid);
		else
		{
			GivePlayerItem(playerid, 1, chosed, -1);
		}
	}

	if(ItemsList_USE[chosed][iuType] == IU_SEED) UpdatePlayerMission(playerid, 7, 2);
	return 1;
}

PUBLIC:OnPlayerUseItem_EQ(playerid, chosed)
{
	new string[144], playername[MAX_PLAYER_NAME];
	GetPlayerName(playerid, playername, sizeof(playername));
	if(ItemsList_EQ[chosed][ieqType] == IEQ_SKIN || ItemsList_EQ[chosed][ieqType] == IEQ_SKINX)
	{
	    if(IsPlayerInAnyVehicle(playerid))
	    {
	        SendClientMessage(playerid, COLOR_WHITE, "错误: 在载具上无法更换你的造型");
			SendClientMessage(playerid, COLOR_WHITE, string);
            return;
	    }
	    if(GetGVarInt("PlayerAnimal", playerid) > 0)
	    {
	        SendClientMessage(playerid, COLOR_WHITE, "错误: 在这个状态无法更换你的造型");
            return;
	    }
	    SetPlayerSkin_Fix(playerid, ItemsList_EQ[chosed][ieqAltID]);
	    PlayerData[playerid][pSkin] = ItemsList_EQ[chosed][ieqAltID];
	    SendClientMessage(playerid, COLOR_WHITE, "完成: 变换造型完成");
	}
	else
	{
		switch(chosed)
		{//选择装备ID
		    case 2,36:
		    {
            	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        if(!CA_IsPlayerFacingWater(playerid, 4.0, 12.0)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须靠近水域才能钓鱼");  return; }
		        if(GetGVarInt("Fishing", playerid) != 0 || GetGVarInt("Digging", playerid) != 0 || GetGVarInt("Hewing", playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在进行其他动作");  return;}
		        if(!IsPlayerHaveSpace(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间再放任何东西了");  return;}
		        if(!PlayerCanUseHands(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");  return;}
		        //TogglePlayerControllableEx(playerid, 0);
	    		if(GetGVarInt("MoonLake") ==1 && IsPlayerInRangeOfPointEx(playerid, 100.0, -77.2126, -571.0111, 2.1385))
	    		{
	    		    if(PlayerHaveItem(playerid, ITEM_USE, 33) < 10){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你的鱼饵不足以献给梦月潭");  return; }
	    		    format(string, sizeof(string), "** %s 虔诚的献上供品向梦月潭开始祈祷 **", playername);
				    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    SendClientMessage(playerid, COLOR_WHITE, "你献上了10个鱼饵开始向梦月潭祈祷,请耐心等待鱼上钩.按"#TEXT_YELLOW"回车键"#TEXT_WHITE"可以收起钓竿");
				    GivePlayerItem(playerid, 1, 33, -10);
				    SetGVarInt("Fishing", 15, playerid);
				    SetGVarInt("FishEx", 1, playerid);

	    		}
	    		else
	    		{
	    		    if(PlayerHaveItem(playerid, ITEM_USE, 33) == 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有鱼饵可以钓鱼");  return; }
	    		    format(string, sizeof(string), "** %s 正在钓鱼 **", playername);
				    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    SendClientMessage(playerid, COLOR_WHITE, "你消耗了一个鱼饵开始钓鱼,请耐心等待鱼上钩.按\n"#TEXT_YELLOW"回车键"#TEXT_WHITE"可以收起钓竿");
				    GivePlayerItem(playerid, 1, 33, -1);
				    SetGVarInt("Fishing", 18, playerid);
				    SetGVarInt("FishEx", 0, playerid);
				}
				ApplyAnimationEx(playerid, "SAMP", "FishingIdle", 3.0,1,0,0,1,0,1);
	    		SetPlayerAttachedObject(playerid, 7, 18632, 5, 0.1, 0, 0, 0, 0, 0, 1.0, 1.0, 1.0);
				SetGVarInt("Fish", 0, playerid);
			    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_SANDYELLOW, "钓鱼中...");
		    }

		    case 25:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        if(CA_IsPlayerFacingWater(playerid, 3.0, 3.0))
		        {
	                GivePlayerItem(playerid, 1, 70, 10-PlayerHaveItem(playerid, 1, 70));
	                format(string, sizeof(string), "** %s 取水装满了水桶 **", playername);
			    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			   		SendClientMessage(playerid, COLOR_WHITE, "完成: 你的水桶装满了");
			   		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);

			   		UpdatePlayerMission(playerid, 7, 3);
			   	}
				else
				{
				    if(!PlayerHaveItem(playerid, 1, 70))
					{
						SendClientMessage(playerid, COLOR_WHITE, "错误: 你的水桶是空的,可以到有水的地方装满");
                        return ;
					}
					SetGVarInt("SelectMode", SELECT_PLANT_WATER, playerid);
					SelectObject_Fix(playerid);
					SendClientMessage(playerid, COLOR_WHITE, "请点击你要浇的植物,按住空白键可以移动视角,按ESC键结束");
				}
				return;
		    }
		    case 26:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        SetGVarInt("SelectMode", SELECT_PLANT_HARVEST, playerid);
				SelectObject_Fix(playerid);
				SendClientMessage(playerid, COLOR_WHITE, "请点击你要收割的植物,按住空白键可以移动视角,按ESC键结束");
				return ;
		    }
		    case 27:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        if(CA_IsPlayerFacingWater(playerid, 3.0, 3.0))
		        {
	                GivePlayerItem(playerid, 1, 70, 20-PlayerHaveItem(playerid, 1, 70));
	                format(string, sizeof(string), "** %s 取水装满了浇水桶 **", playername);
			    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			   		SendClientMessage(playerid, COLOR_WHITE, "完成: 你的浇水桶装满了");
			   		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);

			   		UpdatePlayerMission(playerid, 7, 3);
			   	}
				else
				{
				    if(!PlayerHaveItem(playerid, 1, 70))
					{
						SendClientMessage(playerid, COLOR_WHITE, "错误: 你的浇水桶是空的,可以到有水的地方装满");
                        return ;
					}
					SetGVarInt("SelectMode", SELECT_PLANT_WATER, playerid);
					SelectObject_Fix(playerid);
					SendClientMessage(playerid, COLOR_WHITE, "请点击你要浇的植物,按住空白键可以移动视角,按ESC键结束");
				}

		    }
			case 33:
		    {
		        if(GetPlayerInterior(playerid) != 0)
		        {
		            SendClientMessage(playerid, COLOR_WHITE, "错误: 这里接收不到GPS信号");
                    return ;
				}
		        ShowPlayerGPSMenu(playerid);
				return ;
		    }
		    case 42,43:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
          		if(!PlayerCanUseHands(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用"); return; }
		        if(GetGVarInt("Fishing", playerid) != 0 || GetGVarInt("Digging", playerid) != 0 || GetGVarInt("Hewing", playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在进行其他动作"); return; }
		        if(PlayerData[playerid][pStamina] < 1.0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力进行挖掘了"); return; }
		        if(GetPlayerVirtualWorld(playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 这里不能进行挖掘"); return; }
		        //TogglePlayerControllableEx(playerid, 0);
	    		SetPlayerAttachedObject(playerid, 7, -1012, 6, 0.0569, 0.0399, 0.1289, 173.2000, 179.0999, -178.4998, 1.0000, 1.0000, 1.0000, 0xFFFFFFFF, 0xFFFFFFFF);
	    		format(string, sizeof(string), "** %s 正在挖采 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    SendClientMessage(playerid, COLOR_WHITE, "你开始在这里进行挖掘,挖到的收获将会掉落在你身旁.按"#TEXT_YELLOW"回车键"#TEXT_WHITE"停止动作,挖采动作会逐渐消耗你的体力");
			    SetGVarInt("Digging", 5, playerid);
			    SetGVarInt("DigType", 1, playerid);
			    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_SANDYELLOW, "采集中...");
			    Streamer_ToggleIdleUpdate(playerid, 1);

			    UpdatePlayerMission(playerid, 11, 8);
		    }
		    case 44:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        if(!PlayerCanUseHands(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用"); return; }
		        if(GetGVarInt("Fishing", playerid) != 0 || GetGVarInt("Digging", playerid) != 0 || GetGVarInt("Hewing", playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在进行其他动作"); return; }
		        if(PlayerData[playerid][pStamina] < 1.0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力进行挖掘了"); return; }
		        if(GetPlayerVirtualWorld(playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 这里不能进行挖掘"); return; }
		        //TogglePlayerControllableEx(playerid, 0);
		        ApplyAnimationEx(playerid, "BASEBALL", "BAT_4", 1.5, 1, 0, 0, 1, 0, 1);
	    		SetPlayerAttachedObject(playerid, 7, 19631, 6, 0.0909, 0.0269, 0.1289, -93.3999, 83.8000, -3.6999, 1.0000, 1.0000, 1.0000, 0xFFFFFFFF, 0xFFFFFFFF);
	    		format(string, sizeof(string), "** %s 正在挖采 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    SendClientMessage(playerid, COLOR_WHITE, "你开始在这里进行挖掘,挖到的收获将会掉落在你身旁.按"#TEXT_YELLOW"回车键"#TEXT_WHITE"停止动作,挖采动作会逐渐消耗你的体力");
			    SetGVarInt("Digging", 10, playerid);
			    SetGVarInt("DigType", 2, playerid);
			    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_SANDYELLOW, "采集中...");
			    Streamer_ToggleIdleUpdate(playerid, 1);

			    UpdatePlayerMission(playerid, 11, 8);
		    }
		    case 45,46:
		    {
		        if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态"); return; }
		        if(!PlayerCanUseHands(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用"); return; }
		        if(GetGVarInt("Fishing", playerid) != 0 || GetGVarInt("Digging", playerid) != 0 || GetGVarInt("Hewing", playerid) != 0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你正在进行其他动作"); return; }
		        if(PlayerData[playerid][pStamina] < 1.0){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没体力进行砍伐了了"); return; }
		    	new found;
				for(new i, j = MAX_TREES; i < j; i++)
				{
					if(LumberTree[i][trCreated] != 1) continue;
					if(GetPlayerDistanceFromPointEx(playerid, LumberTree[i][trX], LumberTree[i][trY], LumberTree[i][trZ]) < 3.5)
					{
					    SetPlayerLookAt(playerid, LumberTree[i][trX], LumberTree[i][trY]);
					    SetGVarInt("Hewing", 2, playerid);
			    		SetGVarInt("HewID", i, playerid);
			    		TreeText[playerid] = CreateDynamic3DTextLabel(" ", COLOR_WHITE, LumberTree[i][trX], LumberTree[i][trY], LumberTree[i][trZ], 10.0, _, _, _, 0, 0, playerid);
						found = 1;
						break;
					}
				}
				if(found == 0) { SendClientMessage(playerid, COLOR_WHITE, "错误: 你附近没有任何可以砍伐的树"); return; }
				ApplyAnimationEx(playerid, "BASEBALL", "BAT_4", 1.5, 1, 0, 0, 1, 0, 1);
	    		SetPlayerAttachedObject(playerid, 7, -1011, 6, 0.0909, 0.0269, 0.1289, -93.3999, 83.8000, 180.6999, 1.0000, 1.0000, 1.0000, 0xFFFFFFFF, 0xFFFFFFFF);
	    		format(string, sizeof(string), "** %s 正在伐木 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始伐木了,你将会从这棵树上砍伐到木头.按"#TEXT_YELLOW"回车键"#TEXT_WHITE"停止动作,挖采动作会逐渐消耗你的体力");
			    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_SANDYELLOW, "伐木中...");
			    Streamer_ToggleIdleUpdate(playerid, 1);

			    UpdatePlayerMission(playerid, 11, 5);
			}
		    case 51:
		    {
		        format(string, sizeof(string), "** %s 拿出了工具箱 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		        ShowPlayerDialog(playerid, DIALOG_TOOLBOX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"工具箱", "选择要使用的工具\n修车工具\n橇车锁工具\n短路点火工具\n解地产门锁工具", "选择", "关闭");
		    }
		    case 203:
		    {
		        new book[512], page, i, k;
		        page = GetGVarInt("Page", playerid);
		        format(string, sizeof(string), "** %s 正在看书 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);

			    for(new j = sizeof(ItemsList_USE[]); i < j; i++)
				{
					if(ItemsList_USE[i][iuType] != IU_MAT) continue;
					if(k <= page)
					{
						k ++;
						continue;
					}
					else
					{
					    k = i;
					    break;
					}
				}
				if(k <= page)
				{
				    format(book, sizeof(book), ""#TEXT_FADEYELLOW"已到页尾,请再翻至页首");
				    ShowPlayerDialog(playerid, DIALOG_BOOK_MAT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"材料之书", book, "页首", "关闭");
				    SetGVarInt("Page", 0, playerid);
				}
				else
				{
					format(book, sizeof(book), ""#TEXT_FADEYELLOW"%s\n%s", ItemsList_USE[i][iuName], ItemsList_USE[i][iuDes]);
					ShowPlayerDialog(playerid, DIALOG_BOOK_MAT, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"材料之书", book, "下一页", "关闭");
				}
		    }
		    case 204:
		    {
		        new book[1024], slot1[32], slot2[32], slot3[32], i, j, page;
		        SetGVarInt("Page", page, playerid);

		        format(string, sizeof(string), "** %s 正在看书 **", playername);
			    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);

			    for(i = 0, j = sizeof(MixList); i < j; i++)
				{
					if(MixList[i][mxReqDrug] == 1 || MixList[i][mxReqArm] == 1) continue;
					if(MixList[i][mxType] == 1 && MixList[i][mxReqFire] == 0)
					{
					    if(MixList[i][mxSlot1] != 0) format(slot1, sizeof(slot1), " [A]%s*%d", ItemsList_USE[MixList[i][mxSlot1]][iuName], MixList[i][mxSlot1A]);
					    else format(slot1, sizeof(slot1), " ");
					    if(MixList[i][mxSlot2] != 0) format(slot2, sizeof(slot2), " [B]%s*%d", ItemsList_USE[MixList[i][mxSlot2]][iuName], MixList[i][mxSlot2A]);
					    else format(slot2, sizeof(slot2), " ");
					    if(MixList[i][mxSlot3] != 0) format(slot3, sizeof(slot3), " [C]%s*%d", ItemsList_USE[MixList[i][mxSlot3]][iuName], MixList[i][mxSlot3A]);
					    else format(slot3, sizeof(slot3), " ");

						format(book, sizeof(book), "%s%s\t%s\t%s\t%s\n", book, slot1, slot2, slot3, ItemsList_USE[MixList[i][mxResult]][iuName]);
					}
				}
				format(book, sizeof(book), ""#TEXT_FADERED"栏位A\t"#TEXT_LIGHTYELLOW"栏位B\t"#TEXT_FADEBLUE"栏位C\t"#TEXT_WHITE"结果\n%s", book);
				ShowPlayerDialog(playerid, DIALOG_BOOK_MIX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_FADEGREEN"组合之章", book, "下一页", "关闭");
		    }
		    case 4:
		    {
		        new Float:depth, Float:playerdepth;
		    	CA_IsPlayerInWater(playerid, depth, playerdepth);
			    if(depth > 2.0 && playerdepth > 2.0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在水中无法使用背包");
                    return;
				}
				if(!PlayerCanUseHands(playerid))
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
                    return;
				}
				if(PlayerData[playerid][pJail] > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手机被扣押了");
                    return;
				}
		        ShowPlayerPhoneMenu(playerid);
		        format(string, sizeof(string), "** %s 拿出了手机 **", playername);
			    SendRangeMessage(8.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    }
		    case 280:
			{
			    if(GetGVarInt("UsingRC", playerid) > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在使用遥控玩具");
                    return;
				}
				if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0 || GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法使用遥控玩具");
                    return;
				}
				SetPlayerEnterRCVehicle(playerid, 1);
				format(string, sizeof(string), "** %s 正在驾驶遥控直升机 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始操控遥控直升机,打开载具面板可以退出操控,操控期间如果你的角色死亡你将会强制退出操控模式");
			}
		    case 281:
			{
			    if(GetGVarInt("UsingRC", playerid) > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在使用遥控玩具");
                    return;
				}
				if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0 || GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法使用遥控玩具");
                    return;
				}
				SetPlayerEnterRCVehicle(playerid, 2);
				format(string, sizeof(string), "** %s 正在驾驶遥控玩具车 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始操控遥控玩具车,打开载具面板可以退出操控,操控期间如果你的角色死亡你将会强制退出操控模式");
			}
			case 282:
			{
			    if(GetGVarInt("UsingRC", playerid) > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在使用遥控玩具");
                    return;
				}
				if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0 || GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法使用遥控玩具");
                    return;
				}
				SetPlayerEnterRCVehicle(playerid, 3);
				format(string, sizeof(string), "** %s 正在驾驶遥控飞机 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始操控遥控飞机,打开载具面板可以退出操控,操控期间如果你的角色死亡你将会强制退出操控模式");
			}
			case 283:
			{
			    if(GetGVarInt("UsingRC", playerid) > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在使用遥控玩具");
                    return;
				}
				if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0 || GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法使用遥控玩具");
                    return;
				}
				SetPlayerEnterRCVehicle(playerid, 4);
				format(string, sizeof(string), "** %s 正在驾驶遥控坦克车 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始操控遥控坦克车,打开载具面板可以退出操控,操控期间如果你的角色死亡你将会强制退出操控模式");
			}
			case 284:
			{
			    if(GetGVarInt("UsingRC", playerid) > 0)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在使用遥控玩具");
                    return;
				}
				if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0 || GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
				{
					SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里无法使用遥控玩具");
                    return;
				}
				SetPlayerEnterRCVehicle(playerid, 5);
				format(string, sizeof(string), "** %s 正在驾驶空拍机 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				SendClientMessage(playerid, COLOR_WHITE, "你开始操控空拍机,打开载具面板可以与媒体连线或是退出操控,操控期间如果你的角色死亡你将会强制退出操控模式");
			}
			case 285:
			{
			    if(GetGVarInt("Filming", playerid) == CAMERA_PLAYER || GetGVarInt("Filming", playerid) == CAMERA_SET) ShowPlayerDialog(playerid, DIALOG_CAMERA_PLAYER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"摄影机设定", "摄影中,若你属于媒体业的成员,你的企业可以将你拍摄的画面播映到电视频道上\n结束摄影\n切换摄影角度", "选择", "关闭");
				else if(GetGVarInt("Filming", playerid) == CAMERA_VEHICLE) SendClientMessage(playerid, COLOR_WHITE, "** 你目前已经在使用空拍机了");
				else
				{
				    format(string, sizeof(string), "** %s 拿出了摄影机 **", playername);
					SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					ShowPlayerDialog(playerid, DIALOG_CAMERA_PLAYER, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"摄影机设定", "开始摄影后,你的企业可以将你拍摄的画面播映到电视频道上\n开始摄影", "选择", "关闭");
				}
			}
			case 287:
			{
			    format(string, sizeof(string), "** %s 正在组装折叠单车 **", playername);
				SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_LOOP", 4.1, 1, 0, 0, 0, 0, 1);
				SetPlayerTimerEx(playerid, "SetLittleBike", 10000, 0, "i", playerid);
			}
		}
	}
	//if(PlayerItems_EQ[playerid][slot][ieqBroke] < ItemsList_EQ[chosed][ieqMaxBroke]) {PlayerItems_EQ[playerid][slot][ieqBroke] += 1;}
}

stock ClearItems_EQ(playerid, itemslot)
{
	PlayerItems_EQ[playerid][itemslot][ieqID] =
	PlayerItems_EQ[playerid][itemslot][ieqItemID] =
	PlayerItems_EQ[playerid][itemslot][ieqBroke] = 0;
}

PUBLIC:ClearTDCD(playerid)
{
	SetGVarInt("TPCD", 0, playerid);
	SetGVarInt("IEEing", 0, playerid);
}

PUBLIC:ClearIEEing(playerid)
{
	SetGVarInt("IEEing", 0, playerid);
}

PUBLIC:PutJailAgain(playerid)
{
	SetPlayerInJail(playerid, PlayerData[playerid][pJail], PlayerData[playerid][pJailRoom]);
}

PUBLIC:OutJailAgain(playerid)
{
	SetPlayerPos_Fix(playerid, 30.0304,320.6720,6.3080);
	SetPlayerFacingAngle(playerid, 244.6074);
}

stock OnPlayerExitTP(playerid, tpid, tptype, tptypeID)
{
	#pragma unused tpid
	if(GetGVarInt("EMonitoring", playerid) == 1) return false;
	switch(tptype)
	{
	    case ESTATE_NONE:
	    {
	        switch(tptypeID)
	        {
	            case TP_POLICE_ONLY:
	            {
		            if(PlayerData[playerid][pJail] > 0)
		            {
		                SendClientMessage(playerid, COLOR_WHITE, "这里是管制区域,非授权人员无法通过");
		                return false;
		            }
	            }
	            case TP_PRISON_ONLY:
	            {
	                if(PlayerData[playerid][pDepartment] == DEPT_POLICE || (PlayerData[playerid][pJail] > 0 && GetGVarInt("JailQK", playerid) == 0)) {}
		            else
		            {
		                SendClientMessage(playerid, COLOR_WHITE, "这里是管制区域,非授权人员无法通过");
		                return false;
		            }
	            }
	            case TP_ARENA_VEHICLE, TP_ARENA_PLAYER1, TP_ARENA_PLAYER2:
		        {
		            if(GetGVarInt("pArena", playerid) > 0)
		            {
		                new arena = GetGVarInt("pArena", playerid);
		                if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
		                {
		            		ShowPlayerDialog(playerid, DIALOG_ARENA_LEAVE, DIALOG_STYLE_MSGBOX, "离开竞技场", ""#TEXT_WHITE"竞技已经开始,现在离开的话将不会返还赌金\n确认要离开吗?", "确认", "取消");
		            	}
		            	else
		            	{
		            	    ShowPlayerDialog(playerid, DIALOG_ARENA_LEAVE, DIALOG_STYLE_MSGBOX, "离开竞技场", ""#TEXT_WHITE"确认要离开竞技场吗?", "确认", "取消");
		            	}
		            	return false;
		            }
		        }
	        }
	    }
	    case ESTATE_SUITE,ESTATE_HOUSE,ESTATE_OFFICE,ESTATE_CLUBHOUSE,ESTATE_WAREHOUSE,ESTATE_FACTORY,ESTATE_HANGAR,ESTATE_BOATYARD:
	    {
			if(IsPlayerEstate(playerid, tptypeID) || IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) || IsGangEstate(PlayerData[playerid][pGang], tptypeID)
			|| (PlayerData[playerid][pRenting] == 1 && PlayerData[playerid][pRentID] == EstateData[tptypeID][eID]))
			{
	            SetGVarInt("IEEEstateID", tptypeID, playerid);
	            static l, estr[256], etype;
				l = 0, estr[0] = EOS, etype = EstateData[tptypeID][eType];

                format(estr, sizeof(estr), "%s"#TEXT_WHITE"离开这里\n", estr);
				SetGVarInt("DListID", ES_EXIT, l*1000+playerid);
				l++;

				if(IsPlayerEstate(playerid, tptypeID) || IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) || IsGangEstate(PlayerData[playerid][pGang], tptypeID))
				{
					if(GetEstateSpace(tptypeID) > 0 && etype != ESTATE_FACTORY)
					{
						format(estr, sizeof(estr), "%s"#TEXT_YELLOW"存取物品[空间:%d/%d]\n", estr, GetEstateUsedSpace(tptypeID), GetEstateSpace(tptypeID));
						SetGVarInt("DListID", ES_STORE, l*1000+playerid);
						l++;
					}

					if(GetEstateVehicleSpace(tptypeID) > 0)
					{
						if(etype == ESTATE_HANGAR)
						{
						    format(estr, sizeof(estr), "%s"#TEXT_WHITE"从目前机库[%d/%d]选择载具\n", estr, GetEstateStoredVehicles(tptypeID), GetEstateVehicleSpace(tptypeID));
							SetGVarInt("DListID", ES_HANGAR, l*1000+playerid);
						    l++;
						}
						else
						{
							format(estr, sizeof(estr), "%s"#TEXT_WHITE"查看车库[%d/%d]\n", estr, GetEstateStoredVehicles(tptypeID), GetEstateVehicleSpace(tptypeID));
							SetGVarInt("DListID", ES_GARAGE, l*1000+playerid);
						    l++;
						}
					}
				}

    			format(estr, sizeof(estr), "%s"#TEXT_WHITE"查看访客\n", estr);
				SetGVarInt("DListID", ES_VISITOR, l*1000+playerid);
				l++;

				format(estr, sizeof(estr), "%s"#TEXT_WHITE"门口监视器\n", estr);
				SetGVarInt("DListID", ES_MONITOR, l*1000+playerid);
				l++;

    			if(etype == ESTATE_SUITE || etype == ESTATE_HOUSE || etype == ESTATE_OFFICE || etype == ESTATE_CLUBHOUSE)
				{
					format(estr, sizeof(estr), "%s"#TEXT_WHITE"设为重生点\n", estr);
					SetGVarInt("DListID", ES_SPAWN, l*1000+playerid);
					l++;
				}

				if(PlayerCanSetEstate(playerid, tptypeID))
				{
				    if(etype == ESTATE_FACTORY)
					{
					    new ftype = EstateData[tptypeID][eType2];
      					if(ftype != FACTORY_NONE)
						{
						    if(EstateData[tptypeID][eProdTime] > 0)
						    {
						        format(estr, sizeof(estr), "%s"#TEXT_WHITE"管理生产线"#TEXT_YELLOW"(运作中..."#TEXT_WHITE" |"#TEXT_FADEGREEN"产品:%d"#TEXT_WHITE"|"#TEXT_YELLOW"原料:%d)\n",
								estr, EstateHaveItem(tptypeID, 1, FactoryList[ftype][efProd]), EstateHaveItem(tptypeID, 1, FactoryList[ftype][efMat]));
						    }
						    else
						    {
								format(estr, sizeof(estr), "%s"#TEXT_WHITE"管理生产线"#TEXT_YELLOW"("#TEXT_FADEGREEN"产品:%d"#TEXT_WHITE"|"#TEXT_YELLOW"原料:%d)\n",
								estr, EstateHaveItem(tptypeID, 1, FactoryList[ftype][efProd]), EstateHaveItem(tptypeID, 1, FactoryList[ftype][efMat]));
							}
						}
      					else {format(estr, sizeof(estr), "%s"#TEXT_YELLOW"设定工厂\n", estr);}
						SetGVarInt("DListID", ES_FACTORY, l*1000+playerid);
						l++;
					}

				    if(EstateData[tptypeID][eLocked] == 1) format(estr, sizeof(estr), "%s"#TEXT_FADEGREEN"解锁\n", estr);
				    else format(estr, sizeof(estr), "%s"#TEXT_RED"上锁\n", estr);
					SetGVarInt("DListID", ES_LOCK, l*1000+playerid);
					l++;

				    if(etype == ESTATE_HOUSE || etype == ESTATE_OFFICE || etype == ESTATE_CLUBHOUSE || etype == ESTATE_HANGAR)
				    {
					    format(estr, sizeof(estr), "%s"#TEXT_WHITE"装潢\n", estr, EstateData[tptypeID][ePrice]/2);
						SetGVarInt("DListID", ES_UPGRADE, l*1000+playerid);
						l++;
					}

					if(EstateData[tptypeID][ePassOn] == 1) format(estr, sizeof(estr), "%s"#TEXT_FADERED"取消密码锁\n", estr);
					else format(estr, sizeof(estr), "%s"#TEXT_WHITE"设定密码锁\n", estr);
					SetGVarInt("DListID", ES_SETPASS, l*1000+playerid);
					l++;

					if(etype == ESTATE_HOUSE)
					{
					    if(EstateData[tptypeID][eRentable] == 1) format(estr, sizeof(estr), "%s"#TEXT_YELLOW"取消开放租屋(目前租金:$%d/hr)\n", estr, EstateData[tptypeID][eRent]);
					    else format(estr, sizeof(estr), "%s"#TEXT_FADEGREEN"开放租屋\n", estr);
						SetGVarInt("DListID", ES_RENT, l*1000+playerid);
						l++;
					}

					format(estr, sizeof(estr), "%s"#TEXT_FADEBLUE"改名\n", estr);
					SetGVarInt("DListID", ES_NAME, l*1000+playerid);
					l++;

				    format(estr, sizeof(estr), "%s"#TEXT_LIGHTRED"出售地产[$%d]\n", estr, EstateData[tptypeID][ePrice]/2);
					SetGVarInt("DListID", ES_SELL, l*1000+playerid);
					l++;
				}
				if(PlayerData[playerid][pRenting] == 1 && PlayerData[playerid][pRentID] == EstateData[tptypeID][eID])
				{
				    format(estr, sizeof(estr), "%s"#TEXT_LIGHTRED"退租\n", estr);
					SetGVarInt("DListID", ES_UNRENT, l*1000+playerid);
					l++;
				}

			    format(estr, sizeof(estr), ""#TEXT_WHITE"%s\n%s", EstateData[tptypeID][eName], estr);
    			ShowPlayerDialog(playerid, DIALOG_ESTATE_SETTING, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"地产菜单", estr, "选择", "关闭");
	            return false;
	        }
	    }
	}
	//进出使用冷却时间 来防止玩家消耗资源
	if(GetGVarInt("TPCD", playerid) != 0)
	{
		SendClientMessage(playerid, COLOR_LIGHTRED, "「提示」 进出冷却中,请稍等一会再出去.");
		return false;//return 0来防止进入
	}
	PlayerExitTP(playerid);
	return true;
}


stock PlayerExitTP(playerid)
{
    if(GetGVarInt("ViewEstate", playerid) == 1) DeleteGVar("ViewEstate", playerid);
	TogglePlayerControllableEx(playerid, 0, 1);
	GameTextForPlayer(playerid, "~w~加载...", 2000, 3);
	SetPlayerTimerEx(playerid, "UnFreeze", 3000, 0, "i", playerid);
	//SetPlayerTimerEx(playerid, func[], interval, repeating, const format[], {Float,_}:...);
	SetPlayerTimerEx(playerid, "ClearTDCD", 3000, false, "d", playerid);//设置冷却时间为3秒
	SetGVarInt("TPCD", 1, playerid);
    SetGVarInt("IEEing", 1, playerid);
	DeleteGVar("PlayerX", playerid);
	DeleteGVar("PlayerY", playerid);
	DeleteGVar("PlayerZ", playerid);
}

stock OnPlayerEnterTP(playerid, tpid, tptype, tptypeID)
{
	#pragma unused tpid
    static string[144], header[32], Float:px, Float:py, Float:pz;
	GetPlayerPos(playerid, px, py, pz);
	SetPlayerPos_Fix(playerid, px, py, pz);
 	//进出使用冷却时间 来防止玩家消耗资源
	if(GetGVarInt("TPCD", playerid) != 0)
	{
		SendClientMessage(playerid, COLOR_WHITE, "进出冷却中,请稍等一会再进入");
		return false;//return false来防止进入
	}

	if(GetGVarInt("EUpgrading", tptypeID) == 1)
	{
		SendClientMessage(playerid, COLOR_WHITE, "这个地产正在改建或装潢中,请稍等一会再进入");
		return false;
	}
	if(GetGVarInt("ERammed", tptypeID) == 0)
	{
		switch(tptype)
		{
		    case ESTATE_NONE:
		    {
		        switch(tptypeID)
		        {
		            case TP_POLICE_ONLY:
		            {
			            if(PlayerData[playerid][pDepartment] != DEPT_POLICE)
			            {
			                SendClientMessage(playerid, COLOR_WHITE, "这里是管制区域,非授权人员无法通过");
			                return false;
			            }
		            }
		            case TP_ARENA_VEHICLE:
		            {
						new status[32], arena[512];
						switch(GetGVarInt("ArenaS", ARENA_VEHICLE))
						{
						    case STATUS_FINISHED: format(status, 32, ""#TEXT_FADEGREEN"尚未开始(%d/10组)", 10-GetGVarInt("ArenaP", ARENA_VEHICLE));
						    case STATUS_STARTED: format(status, 32, ""#TEXT_RED"已开始,剩余%d秒结束", GetGVarInt("ArenaT", ARENA_VEHICLE));
						}
		                format(arena, sizeof(arena), ""#TEXT_WHITE"载具竞技场\n状态: %s"#TEXT_WHITE"\n在这里可以与其他玩家进行载具间的较量\n里面提供各种的特殊竞技用载具\n\
						参加时所有参赛者皆需要下$500~$5,000不等的赌金\n于时间结束时死亡次数最少的玩家们将平分所有赌金\n每场竞技时间为5分钟\n\n确认要参加吗?", status);
		            	ShowPlayerDialog(playerid, DIALOG_ARENA_VEHICLE, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"载具竞技场", arena, "参加", "取消");
		            	return false;
		            }
		            case TP_ARENA_PLAYER1:
		            {
						new status[32], arena[512];
						switch(GetGVarInt("ArenaS", ARENA_PLAYER1))
						{
						    case STATUS_FINISHED: format(status, 32, ""#TEXT_FADEGREEN"尚未开始(%d/20人)", 20-GetGVarInt("ArenaP", ARENA_PLAYER1));
						    case STATUS_STARTED: format(status, 32, ""#TEXT_RED"已开始,剩余%d秒结束", GetGVarInt("ArenaT", ARENA_PLAYER1));
						}
		                format(arena, sizeof(arena), ""#TEXT_WHITE"玩家竞技场(禁用道具、技能)\n状态: %s"#TEXT_WHITE"\n在这里可以与其他玩家进行枪械间的对决\n里面提供的武器包括: 沙漠之鹰、霰弹枪、乌兹以及AK47\n\
						"#TEXT_YELLOW"在里面将无法使用背包、宠物与技能(武器熟练度除外)、生命与护甲统一为100\n"#TEXT_WHITE"参加时所有参赛者皆需要下$500~$5,000不等的赌金\n于时间结束时击杀数最多的所有玩家将平分赌金\n每场竞技时间为5分钟\n\n确认要参加吗?", status);
		            	ShowPlayerDialog(playerid, DIALOG_ARENA_PLAYER1, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"玩家竞技场", arena, "参加", "取消");
		            	return false;
		            }
		            case TP_ARENA_PLAYER2:
		            {
						new status[32], arena[512];
						switch(GetGVarInt("ArenaS", ARENA_PLAYER2))
						{
						    case STATUS_FINISHED: format(status, 32, ""#TEXT_FADEGREEN"尚未开始(%d/20人)", 20-GetGVarInt("ArenaP", ARENA_PLAYER2));
						    case STATUS_STARTED: format(status, 32, ""#TEXT_RED"已开始,剩余%d秒结束", GetGVarInt("ArenaT", ARENA_PLAYER2));
						}
		                format(arena, sizeof(arena), ""#TEXT_WHITE"玩家竞技场(无限制)\n状态: %s"#TEXT_WHITE"\n在这里可以与其他玩家进行枪械间的对决\n里面提供的武器包括: 沙漠之鹰、霰弹枪、乌兹以及AK47\n\
						在里面技能、道具以及宠物的使用不会受到任何限制\n适合展现训练成果或挑战高强度对手的挑战者\n"#TEXT_WHITE"参加时所有参赛者皆需要下$500~$5,000不等的赌金\n于时间结束时击杀数最多的所有玩家将平分所有赌金\n每场竞技时间为5分钟\n\n确认要参加吗?", status);
		            	ShowPlayerDialog(playerid, DIALOG_ARENA_PLAYER2, DIALOG_STYLE_MSGBOX, ""#TEXT_YELLOW"玩家竞技场", arena, "参加", "取消");
		            	return false;
		            }
		        }
		    }
		    case ESTATE_SUITE:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsPlayerEstate(playerid, tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "关闭");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别人的套房,你可以:\n按门铃");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间套房待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_HOUSE:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsPlayerEstate(playerid, tptypeID) && !(PlayerData[playerid][pRenting] == 1 && PlayerData[playerid][pRentID] == EstateData[tptypeID][eID]))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别人的房屋,你可以:\n按门铃");
			            	if(EstateData[tptypeID][eRentable] == 1)
			            	{
			            	    format(string, sizeof(string), "%s\n租屋(每小时$%d)", string, EstateData[tptypeID][eRent]);
			            	}
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这栋房屋待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_WAREHOUSE:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) && !IsGangEstate(PlayerData[playerid][pGang], tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别的组织的仓库,你可以:\n请求进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间仓库待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_HANGAR:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) && !IsGangEstate(PlayerData[playerid][pGang], tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别的组织的机库,你可以:\n请求进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间机库待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_FACTORY:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) && !IsGangEstate(PlayerData[playerid][pGang], tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别的组织的工厂,你可以:\n请求进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间工厂待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_OFFICE:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别的企业的办公室,你可以:\n请求进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间办公室待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		    case ESTATE_CLUBHOUSE:
		    {
		        format(header, sizeof(header), ""#TEXT_WHITE"%s", EstateData[tptypeID][eName]);
		        if(!IsGangEstate(PlayerData[playerid][pGang], tptypeID))
		        {
		            if(EstateData[tptypeID][eOwnerType] != ESTATE_OWNER_NONE)
		            {
		                if(EstateData[tptypeID][ePassOn] == 1)
		                {
		                    format(string, sizeof(string), ""#TEXT_WHITE"这个地产设有密码,访客必须输入密码才能进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_PASS, DIALOG_STYLE_PASSWORD, header, string, "确认", "取消");
		                }
		                else
		                {
			            	format(string, sizeof(string), ""#TEXT_WHITE"这里是别的帮会的会所,你可以:\n请求进入");
			            	ShowPlayerDialog(playerid, DIALOG_ESTATE_VISIT, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
			            }
		            }
		            else
		            {
		            	format(string, sizeof(string), ""#TEXT_WHITE"这间会所待售中,你可以:\n购买这里 "#TEXT_FADEGREEN"$%d\n预览\n内装简介", EstateData[tptypeID][ePrice]);
		            	ShowPlayerDialog(playerid, DIALOG_ESTATE_BUY, DIALOG_STYLE_TABLIST_HEADERS, header, string, "选择", "关闭");
		            }
		            SetGVarInt("IEEEstateID", tptypeID, playerid);
		            return false;
		        }
		    }
		}
	}
	else
	{
	    format(string, sizeof(string), "** %s 从破坏的门进入了 **", PlayerData[playerid][pName]);
		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	}
	PlayerEnterTP(playerid, tptype, tptypeID);
	return true;
}

stock PlayerEnterTP(playerid, tptype, tptypeID)
{
    static Float:px, Float:py, Float:pz, string[144];
	GetPlayerPos(playerid, px, py, pz);
	SetGVarFloat("PlayerX", px, playerid),
	SetGVarFloat("PlayerY", py, playerid),
	SetGVarFloat("PlayerZ", pz, playerid);

    TogglePlayerControllableEx(playerid, 0, 1);
	GameTextForPlayer(playerid, "~w~加载...", 2000, 3);
	SetPlayerTimerEx(playerid, "UnFreeze", 3000, 0, "i", playerid);

	//SetPlayerTimerEx(playerid, func[], interval, repeating, const format[], {Float,_}:...);
	SetPlayerTimerEx(playerid, "ClearTDCD", 3000, false, "d", playerid);//设置冷却时间为3秒
	SetGVarInt("TPCD", 1, playerid);
	SetGVarInt("IEEing", 1, playerid);

	if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)
	{
	    new raceid = GetGVarInt("RaceID", playerid);
	    PlayerLeaveRace(playerid, raceid);
		SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"你因为在比赛时进入其他地方,失去了比赛资格!");
	}

	if(GetGVarInt("PlayerMW", playerid) == 1)
	{
	    new mwid = GetGVarInt("PlayerMWID", playerid),
			mwitemid = MatWar[mwid][mwMatID];
		if(tptype == 0)
		{
		    if(((tptypeID == TP_POLICE || tptypeID == TP_POLICE_ONLY) && PlayerData[playerid][pDepartment] == DEPT_POLICE)
	 		|| (tptypeID == TP_GOV && PlayerData[playerid][pDepartment] == DEPT_GOVERNMENT) || (tptypeID == TP_COUNSELOR && PlayerData[playerid][pDepartment] == DEPT_COUNSELOR))
		    {//当身为部门的玩家成功运送了部门专属货物至部门基地
				if(ItemsList_USE[mwitemid][iuSpace]*MatWar[mwid][mwMatAmount] > GetDeptRemainingSpace(PlayerData[playerid][pDepartment]))
				{
					SendClientMessage(playerid, COLOR_WHITE, "** 你的部门储物间没空间装下这个货物战争货物,请腾出空间");
				}
				else
				{
				    format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的空投物已经被运送完毕,这个货物战争结束", MatWar[mwid][mwMatAmount], ItemsList_USE[mwitemid][iuName]);
					SendMatWarMessage(COLOR_WHITE, string);
					DeptLoadMatWar(playerid, PlayerData[playerid][pDepartment], mwid);
					DeleteGVar("PlayerMWID", playerid);
					DeleteGVar("PlayerMW", playerid);
				}
			}
			else SendClientMessage(playerid, COLOR_WHITE, "你身上尚有货物战争的货物,请在时间内送至属于你的组织的地产");
		}
		else
		{
			if(IsCompanyEstate(PlayerData[playerid][pCompany], tptypeID) || IsGangEstate(PlayerData[playerid][pGang], tptypeID))
			{
				if(ItemsList_USE[mwitemid][iuSpace]*MatWar[mwid][mwMatAmount] > GetEstateRemainingSpace(tptypeID))
				{
					SendClientMessage(playerid, COLOR_WHITE, "** 这个地产没空间装下这个货物战争货物,请寻找其他地产");
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"装着%d个"#TEXT_YELLOW"%s"#TEXT_WHITE"的空投物已经被运送完毕,这个货物战争结束", MatWar[mwid][mwMatAmount], ItemsList_USE[mwitemid][iuName]);
					SendMatWarMessage(COLOR_WHITE, string);
					EstateLoadMatWar(playerid, tptypeID, mwid);
					DeleteGVar("PlayerMWID", playerid);
					DeleteGVar("PlayerMW", playerid);
				}
			}
			else SendClientMessage(playerid, COLOR_WHITE, "你身上尚有货物战争的货物,请在时间内送至属于你的组织的地产");
		}
	}
	if(tptype == 0)
	{
	    switch(tptypeID)
	    {
	        case TP_247:
			{
				UpdatePlayerMission(playerid, 1, 3);//玩家完成任务1的stage2(进入便利商店) 给他stage3的条件
				UpdatePlayerMission(playerid, 9, 6);
			}
	        case TP_BURGER: UpdatePlayerMission(playerid, 1, 6);//玩家完成任务1的stage5(进入便利商店) 给他stage6的条件
	        case TP_SKIN: UpdatePlayerMission(playerid, 3, 3);
	        case TP_3C: UpdatePlayerMission(playerid, 4, 3);
	        case TP_GOV: UpdatePlayerMission(playerid, 5, 3);
		}
	}
}

PUBLIC:Fish(playerid)
{
	if(GetGVarInt("Fishing", playerid) > 0)
	{
	    if(!CA_IsPlayerFacingWater(playerid, 4.0, 12.0))
		{
		    SendClientMessage(playerid, COLOR_WHITE, "钓鱼错误: 你离水域太远了");
		    StopFishing(playerid);
            return;
		}
		ApplyAnimationEx(playerid, "SAMP", "FishingIdle", 3.0,1,0,0,1,0,1);
		if(GetGVarInt("Fish", playerid) == 0)
		{
			if(GetGVarInt("FishEx", playerid) == 1)
			{
			    SetGVarInt("Fishing", 15, playerid);
			    new rand = random(500);
				switch(rand)
				{
				    case 0 .. 50:{ SendClientMessage(playerid, COLOR_WHITE, "仍没有动静,请继续等待"); }
				    case 51 .. 80:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 4, playerid);//黄金分享鸡
					}
					case 81 .. 110:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 8, playerid);//叮当合作优惠
					}
					case 111 .. 140:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 12, playerid);//四号全家优惠
					}
					case 141 .. 170:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 16, playerid);//甜甜圈盒
					}
					case 171 .. 200:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 20, playerid);//黑咖啡
					}
					case 201 .. 230:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 35, playerid);//红牛
					}
					case 231 .. 280:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 45, playerid);//鱼饵包
					}
					case 281 .. 300:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 116, playerid);//迷幻仙人掌
					}
				    case 301 .. 330:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 138, playerid);//超重型护甲
					}
					case 331 .. 360:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 163, playerid);//紫色棒棒
					}
					case 361 .. 390:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -1, playerid);//背包空间5格
					}
					case 391 .. 410:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -2, playerid);//背包空间10格
					}
					case 411 .. 420:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -3, playerid);//背包空间20格
					}
					case 421 .. 425:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -4, playerid);//背包空间50格
					}
					case 426:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -5, playerid);//稀有知识点
					}
					case 427 .. 430:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 167, playerid);//主宰者重装
					}
					case 431 .. 435:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 178, playerid);//特殊造型抽奖券
					}
					case 436 .. 440:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 179, playerid);//50点一般知识兑换券
					}
					case 441 .. 443:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 180, playerid);//100点一般知识兑换券
					}
					case 444 .. 448:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 187, playerid);//宠物抽奖券
					}
					case 449 .. 451:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 288, playerid);//圣诞树
					}
					case 452:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 289, playerid);//礼物盒
					}
					case 453:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 290, playerid);//礼物盒
					}
					case 454:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 291, playerid);//礼物盒
					}
					case 455:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 292, playerid);//礼物盒
					}
					case 456:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 293, playerid);//礼物盒
					}
					case 457 .. 479:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -6, playerid);//瓶中信
					}
					case 480 .. 499:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 152, playerid);//家具货物
					}
				}
	        }
	        else
	        {
	      		SetGVarInt("Fishing", 18, playerid);
	      		new rand = random(700);
				switch(rand)
				{
				    case 0 .. 450:{ SendClientMessage(playerid, COLOR_WHITE, "仍没有动静,请继续等待"); }
				    case 451 .. 465:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 57, playerid);//海蟑螂
					    SetPlayerTimerEx(playerid, "DisFish", 60000, false, "i", playerid);
					}
					case 466 .. 481:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 2, playerid);//垃圾
					}
					case 482 .. 484:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 61, playerid);//旗鱼
					    SetPlayerTimerEx(playerid, "DisFish", 2500, false, "i", playerid);
					}
					case 485 .. 488:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 46, playerid);//腔棘鱼
					    SetPlayerTimerEx(playerid, "DisFish", 3000, false, "i", playerid);
					}
					case 489 .. 510:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 59, playerid);//虱目鱼
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 511 .. 525:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 60, playerid);//沙丁鱼
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 526 .. 532:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 62, playerid);//海星
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 533 .. 549:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 63, playerid);//鲂鱼
					    SetPlayerTimerEx(playerid, "DisFish", 7000, false, "i", playerid);
					}
				    case 550 .. 565:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 56, playerid);//水蚤
					    SetPlayerTimerEx(playerid, "DisFish", 60000, false, "i", playerid);
					}
					case 566 .. 581:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 2, playerid);//垃圾
					}
					case 582:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 3, playerid);//皮夹
					}
					case 583:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 46, playerid);//龙鱼
					    SetPlayerTimerEx(playerid, "DisFish", 3500, false, "i", playerid);
					}
					case 584 .. 597:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 47, playerid);//将鱼
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 598 .. 611:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 48, playerid);//鲤鱼
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 612 .. 633:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 49, playerid);//锦鲤
					    SetPlayerTimerEx(playerid, "DisFish", 6000, false, "i", playerid);
					}
					case 634 .. 640:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 50, playerid);//赤
					    SetPlayerTimerEx(playerid, "DisFish", 7000, false, "i", playerid);
					}
					case 641 .. 645:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 51, playerid);//巨骨舌鱼
					    SetPlayerTimerEx(playerid, "DisFish", 5000, false, "i", playerid);
					}
					case 646 .. 658:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 52, playerid);//青蛙
					    SetPlayerTimerEx(playerid, "DisFish", 7000, false, "i", playerid);
					}
					case 659 .. 665:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 53, playerid);//蟾蜍
					    SetPlayerTimerEx(playerid, "DisFish", 7000, false, "i", playerid);
					}
					case 666 .. 677:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 54, playerid);//吴郭鱼
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 678 .. 686:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", 55, playerid);//河豚
					    SetPlayerTimerEx(playerid, "DisFish", 8000, false, "i", playerid);
					}
					case 687 .. 699:
				    {
				    	SendClientMessage(playerid, COLOR_WHITE, "注意: 浮标好像下沉了,立即按回车键把钓竿收起来查看");
					    SetGVarInt("Fish", -6, playerid);//瓶中信
					}
				}
			}
		}
	}
}


PUBLIC:DisFish(playerid)
{
    if(GetGVarInt("Fishing", playerid) != 0 && GetGVarInt("Fish", playerid) != 0)
	{
		SetGVarInt("Fish", 1, playerid);//鱼落空
	}
}

PUBLIC:Hint()
{
    new rand = random(sizeof(hintStrs));
	SendClientMessageToAll(COLOR_WHITE, hintStrs[rand]);
}

PUBLIC:Weather()
{
    new hrs, mins, secs, tiempo;
	gettime(hrs, mins, secs), tiempo = GetGVarInt("Tiempo");
	switch(tiempo)
	{
		case 1 .. 6,10,11,13,14,17,18://晴天
		{
			switch(hrs)//时间
			{
				case 3 .. 5://清晨
				{
					switch(random(5))
					{
						case 0 .. 3: tiempo = 9;//有高机率起雾
						case 4 .. 6: {}//或保持晴天
					}
				}
				default:
				{
					switch(random(5))
					{
						case 0 .. 2: {}//继续晴天
						case 3,4: tiempo = -2;//变为阴天
					}
				}
			}
		}
		case 7,12,15,20://阴天
		{
			switch(hrs)//时间
			{
				case 3 .. 5://清晨
				{
					switch(random(10))
					{
						case 0 .. 4: tiempo = 9;//有高机率起雾
						case 5 .. 7: tiempo = -3;//下雨
						case 8 .. 9: {}//保持阴天
					}
				}
				case 18 .. 23, 0 .. 2://夜间
				{
					switch(random(10))
					{
						case 0 .. 3: tiempo = -3;//下雨
						case 4 .. 8: {}//保持阴天
						case 9: tiempo = -1;//放晴
					}
				}
				default://日间
				{
					switch(random(10))
					{
						case 0 .. 2: tiempo = -3;//下雨
						case 3 .. 6: {}//保持阴天
						case 7 .. 9: tiempo = -1;//放晴
					}
				}
			}
		}
		case 8,16://雨天
		{
			switch(random(10))
			{
				case 0 .. 2: {}//保持下雨
				case 3 .. 6: tiempo = 4;//放晴(小晴)
				case 7 .. 9: tiempo = 9;//起雾
			}
		}
		default: tiempo = random(21);//初始与其他(沙尘暴与大雾)天气就做随机变化
	}

	switch(tiempo)
	{
		case -1://晴天代号
		{
			switch(random(12))
			{
				case 0: tiempo = 1;
				case 1: tiempo = 2;
				case 2: tiempo = 3;
				case 3: tiempo = 4;
				case 4: tiempo = 5;
				case 5: tiempo = 6;
				case 6: tiempo = 10;
				case 7: tiempo = 11;
				case 8: tiempo = 13;
				case 9: tiempo = 14;
				case 10: tiempo = 17;
				case 11: tiempo = 18;
			}
		}
		case -2://阴天代号
		{
			switch(random(4))
			{
				case 0: tiempo = 7;
				case 1: tiempo = 12;
				case 2: tiempo = 15;
				case 3: tiempo = 20;
			}
		}
		case -3://雨天代号
		{
			switch(random(2))
			{
				case 0: tiempo = 8;
				case 1: tiempo = 16;
			}
		}
	}
	SetWeather(tiempo);
	SetGVarInt("Tiempo", tiempo);
	SetTimer("Weather", (18+random(36))*100000, false);
	printf("Weather changed(%d)", tiempo);
}

public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{
    if(IsPlayerNPC(playerid)) return 0;

	new Float:ar = GetPlayerArmour_Fix(playerid),
		Float:hp = GetPlayerHealth_Fix(playerid);
	if(GetGVarInt("pInv", playerid) == 1) return 0;
	if(issuerid != INVALID_PLAYER_ID) return 0;
	
/*	new gzid = GetPlayerGangZone(playerid);
	if(gzid != -1)
	{
	    if(GangZone[gzid][gzSafezone]) return 0;
	}*/
	
	if(ar == 0.0 || weaponid == 53 || weaponid == 54){SetPlayerHealth_Fix(playerid, hp-amount);}
	else
	{
		if(ar-amount < 0.0)
		{
			SetPlayerArmour_Fix(playerid, 0.0);
			SetPlayerHealth_Fix(playerid, hp+(ar-amount));
		}
		else
		{
			SetPlayerArmour_Fix(playerid, ar-amount);
			SetPlayerHealth_Fix(playerid, hp);
		}
	}
	//printf("Take = issuer:%d player:%d weapon:%d damage:%f part:%d", playerid, issuerid, weaponid, amount, bodypart);
	UpdatePlayerHPBar(playerid);
    return 1;
}


public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
    if(IsPlayerNPC(damagedid)) return 0;

	new Float:chit, Float:px, Float:py, Float:pz,
	Float:ar = GetPlayerArmour_Fix(damagedid),
	Float:hp = GetPlayerHealth_Fix(damagedid),
	Float:damage = amount;
	if(GetGVarInt("pInv", damagedid) == 1) return 0;
    if(damagedid != INVALID_PLAYER_ID)
    {
        if(GetPlayerTeam(damagedid) != NO_TEAM)
        {
            if(GetPlayerTeam(damagedid) == GetPlayerTeam(playerid)) return 0;//相同小队不会伤害到彼此
        }
        
/*		new gzid = GetPlayerGangZone(playerid);
		if(gzid != -1)
		{
	    	if(GangZone[gzid][gzSafezone]) return 0;
		}
        */
        GetPlayerPos(damagedid, px, py, pz);
        if(GetGVarInt("Eventing", damagedid) == 0 && GetGVarInt("pArena", damagedid) == 0)
        {
            if(GetGVarInt("AttackingTurf", playerid) > 0 && PlayerData[damagedid][pGang] != GANG_ID_NONE) {}
            else if(PlayerData[damagedid][pWanted] > 0 || PlayerData[damagedid][pJail] > 0) {}
			else
			{
				if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) < 50.0)
				{
				    new Float:caused = GetGVarFloat("pCausedDmg", playerid);
				    if(caused < 40.0) SetGVarFloat("pCausedDmg", caused+amount, playerid);
	            	else
					{
					    DeleteGVar("pCausedDmg", playerid);
						SetPlayerCrime(playerid, CRIME_HIT, VICTIM_PLAYER, damagedid, weaponid, px, py, pz);//伤害罪行
					}
	            }
	        }
        }
        if(GetGVarInt("SkillFrozen", damagedid) == 1)
        {
            new Float:stopdam = GetGVarFloat("FrozenDamage", damagedid);
            switch(SkillData[playerid][psTimeStop])
            {
                case 1, 2: SetGVarFloat("FrozenDamage", stopdam + 3.0, damagedid);
                case 3 .. 5: SetGVarFloat("FrozenDamage", stopdam + 5.0, damagedid);
            }
            SetPlayerArmour_Fix(damagedid, ar);
			SetPlayerHealth_Fix(damagedid, hp);
			return 1;
        }
        if(GetGVarInt("PlayerAnimal", playerid) > 0 && GetGVarInt("PlayerAmlAttCD", playerid) == 0)
		{
		    new animalid = GetGVarInt("PlayerAnimal", playerid);
			if(hp > 0)
			{
			    ApplyAnimation(damagedid, "ped","gas_cwr", 4.1, 1, 1, 1, 0, 1000, 1);
				if(animalid != 22) ApplyAnimation(playerid, "ped", "jump_launch", 4.1, 0, 0, 0, 0, 0, 1);//如果不是大脚就采取扑咬动作
				SetGVarInt("PlayerAmlAttCD", 3, playerid);
				CountDamage(playerid, damagedid, weaponid, bodypart, damage, chit);
				GiveHealth(playerid, damage*0.5);
			}
		}
		else if(GetGVarInt("TiePrep", playerid) > 0 && GetPlayerWeapon(playerid) == 0)
		{
		    if(GetPlayerState(damagedid) == PLAYER_STATE_ONFOOT)
		    {
		        PlayerTiePlayer(playerid, damagedid);
		    }
		}
        else
        {
            if(GetGVarInt("PetCalled", damagedid) == 1)//宠物护主
			{
				new Float:ax, Float:ay, Float:az,
				petid = GetGVarInt("CurrentPetID", damagedid);
				FCNPC_GetPosition(PetData[damagedid][petid][petNPC], ax, ay, az);
				if(GetPlayerDistanceFromPointEx(damagedid, ax, ay, az) < 50.0 && FCNPC_GetHealth(PetData[damagedid][petid][petNPC]) > 0.0 && GetGVarInt("NPCStay", PetData[damagedid][petid][petNPC]) == 0)
				{
			    	if(CanPetUseSkill(damagedid, petid, PET_SKILL_ATK))
					{
						NPCToTarget(PetData[damagedid][petid][petNPC], TARGET_PLAYER, playerid, 1);
					}
				}
			}
			if(ConfigData[damagedid][cfHitSound] == 0) PlayerPlaySound(damagedid, 1135, 0.0, 0.0, 0.0);
			CountDamage(playerid, damagedid, weaponid, bodypart, damage, chit);
		}
	}
	if(ar == 0.0){SetPlayerHealth_Fix(damagedid, hp-(damage+chit));}
	else
	{
		if(ar-damage < 0.0)
		{
			SetPlayerArmour_Fix(damagedid, 0.0);
			SetPlayerHealth_Fix(damagedid, hp+(ar-damage)-chit);
		}
		else
		{
			SetPlayerArmour_Fix(damagedid, ar-damage);
			SetPlayerHealth_Fix(damagedid, hp-chit);
		}
	}
	//printf("Give = issuer:%d player:%d weapon:%d damage:%f part:%d", playerid, damagedid, weaponid, damage, bodypart);
	UpdatePlayerHPBar(damagedid);
    return 1;
}

stock CountDamage(issuerid, damagedid, weaponid, bodypart, &Float:damage, &Float:chit)
{
    //伤害因身体部位不同而有差异
	if(weaponid < 52)
	{
		new Float:distance, Float:hp, Float:leech;
		if(IsPlayerNPC(issuerid) && GetGVarInt("Animal", issuerid) > 0)
		{
		    new animalid = GetGVarInt("Animal", issuerid);
	    	damage = AnimalsList[animalid][amlAttack];
		}
		else if(GetGVarInt("PlayerAnimal", issuerid) > 0)
		{
		    new animalid = GetGVarInt("PlayerAnimal", issuerid);
		    damage = AnimalsList[animalid][amlAttack];
		}
		else
		{
			damage = 0.0, chit = 0.0;
			switch(bodypart)
			{
				case 3://肚子
				{
					damage = WeaponsList[weaponid][wDamage]*0.8;
				}
				case 4://胯下
				{
					damage = WeaponsList[weaponid][wDamage]*1.2;
				}
				case 5 .. 8://四肢
				{
					damage = WeaponsList[weaponid][wDamage]*0.5;
				}
				case 9://头
				{
					damage = WeaponsList[weaponid][wDamage]*2.0;
					GameTextForPlayer(issuerid, "~r~爆头!", 1000, 6);
					if(ConfigData[issuerid][cfHitSound] == 0) PlayerPlaySound(issuerid,17802,0,0,0);
					//爆击能力额外伤害
					if(GetGVarInt("pArena", issuerid) != ARENA_PLAYER1)
					{
						switch(SkillData[issuerid][psCHit])
						{
							case 0: {chit = 1.0;}
							case 1: {chit = 5.0;}
							case 2: {chit = 10.0;}
							case 3: {chit = 20.0;}
							case 4: {chit = 30.0;}
							case 5: {chit = 40.0;}
							case 6: {chit = 50.0;}
							case 7: {chit = 60.0;}
							case 8: {chit = 80.0;}
						}
					}
				}
			}
		}
		//帮会首领被动加成(后援会)
		if(GetGVarInt("GangStar", issuerid) > 1.0 && GetGVarInt("pArena", issuerid) != ARENA_PLAYER1)
		{
			damage = damage*GetGVarInt("GangStar", issuerid);
		}
		//计算因距离减免的伤害
		if(weaponid != 34)
		{
			new Float:px, Float:py, Float:pz;
			GetPlayerPos(damagedid, px, py, pz);
			distance = GetPlayerDistanceFromPointEx(issuerid, px, py, pz);
			if(15.0 < distance < 45.0) damage = damage*0.95;
			else if(45.0 < distance < 90.0) damage = damage*0.75;
			else if(90.0 < distance < 150.0) damage = damage*0.4;
			else if(150.0 < distance) damage = damage*0.1;
		}
		//耐打能力伤害减免
		if(GetGVarInt("pArena", damagedid) != ARENA_PLAYER1)
		{
			switch(SkillData[damagedid][psDef])
			{
				case 1: {chit = chit*0.95; damage = damage*0.95;}
				case 2: {chit = chit*0.9; damage = damage*0.9;}
				case 3: {chit = chit*0.85; damage = damage*0.85;}
				case 4: {chit = chit*0.8; damage = damage*0.8;}
				case 5: {chit = chit*0.75; damage = damage*0.75;}
				case 6: {chit = chit*0.7; damage = damage*0.7;}
				case 7: {chit = chit*0.6; damage = damage*0.6;}
				case 8: {chit = chit*0.5; damage = damage*0.5;}
			}
		}
		//护甲套装减免
		switch(GetGVarInt("ArmourSuit", damagedid) > 0)
		{
			case ARMOUR_JUGGER://主宰者重装
			{
				damage = damage*0.9;//90%减免
				chit = chit*0.5;//50%暴击减免
			}
			case ARMOUR_BOPS://黑甲重装
			{
				damage = damage*0.8;//80%减免
			}
		}
		//吸血能力吸血
		if(SkillData[issuerid][psLeech] > 0 && GetGVarInt("pArena", issuerid) != ARENA_PLAYER1)
		{
			switch(SkillData[issuerid][psLeech])
			{
				case 1: {leech = damage*0.25;}
				case 2: {leech = damage*0.5;}
				case 3: {leech = damage*0.75;}
				case 4: {leech = damage*1.0;}
				case 5: {leech = damage*1.5;}
			}
			hp = GetPlayerHealth_Fix(issuerid);
			if(hp + leech > 100.0 + PlayerData[issuerid][pMaxHealth]) {SetPlayerHealth_Fix(issuerid, 100.0 + PlayerData[issuerid][pMaxHealth]);}
			else {SetPlayerHealth_Fix(issuerid, hp+leech);}
			UpdatePlayerHPBar(issuerid);
		}
	}
}

stock ShowPTD(playerid, type, pass)
{
	static string[48];
	switch(type)
	{
	    case 0:
		{
		    if(pass == 0){format(string, sizeof(string), "~r~任务失败");}
			else
			{
				format(string, sizeof(string), "~y~任务成功");
			}
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);

		}
		case 1:
		{
		    if(pass == 0){format(string, sizeof(string), "~r~工作失败");}
			else
			{
				format(string, sizeof(string), "~y~工作完成");
	            RecordData[playerid][prJobClear] ++;
			}
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);

		}
		case 2:
		{
		    if(pass == 0){format(string, sizeof(string), "~r~任务失败");}
			else
			{
				format(string, sizeof(string), "~y~任务成功");
				RecordData[playerid][prQuestClear] ++;
			}
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);
		}
		case 3:
		{
		    switch(pass)
		    {
		        case 1: {format(string, sizeof(string), "~y~第一名");}
		        case 2: {format(string, sizeof(string), "~b~第二名");}
		        case 3: {format(string, sizeof(string), "~r~第三名");}
		        case 4..10: {format(string, sizeof(string), "~w~第%d名", pass);}
		    }
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);
		}
		case 4:
		{
		    if(pass == 0){format(string, sizeof(string), "~r~运输失败");}
			else
			{
				format(string, sizeof(string), "~y~运输完成");
				RecordData[playerid][prMatWar] ++;
			}
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);
		}
		case 5:
		{
		    if(pass == 1){format(string, sizeof(string), "~r~战败");}
			{
				format(string, sizeof(string), "~y~胜利");
			}
			PlayerTextDrawSetString(playerid,PTDText[playerid],string);
	   		PlayerTextDrawShow(playerid,PTDText[playerid]);
	   		PlayerTextDrawShow(playerid,PTDBox[playerid]);
		}
	}
	PlayerPlaySound(playerid,1131,0.0,0.0,0.0);
	SetTimerEx("HidePTD", 4000, 0, "i", playerid);
}

PUBLIC:HidePTD(playerid)
{
	PlayerTextDrawHide(playerid,PTDText[playerid]);
   	PlayerTextDrawHide(playerid,PTDBox[playerid]);
}

stock CreateObjectData(id, owner, Float:ox, Float:oy, Float:oz, Float:rx, Float:ry, Float:rz, interior, world, infinity=0)
{
    static i, j, k;
    for(i = 0, k = -1, j = MAX_PLAYER_OBJECTS; i < j; i++)
	{
		if(ObjectData[i][oObjectID] == 0)
		{
			new ORM:ormid = ObjectData[i][ORM_ID] = orm_create("objectdata", MYSQL_SESSION_A);
			orm_addvar_int(ormid, ObjectData[i][oID], "id"),
			orm_addvar_int(ormid, ObjectData[i][oOwner], "owner"),
			orm_addvar_int(ormid, ObjectData[i][oObjectID], "objectID"),
			orm_addvar_float(ormid, ObjectData[i][oX], "x"),
			orm_addvar_float(ormid, ObjectData[i][oY], "y"),
			orm_addvar_float(ormid, ObjectData[i][oZ], "z");
			orm_addvar_float(ormid, ObjectData[i][oRX], "rx"),
			orm_addvar_float(ormid, ObjectData[i][oRY], "ry"),
			orm_addvar_float(ormid, ObjectData[i][oRZ], "rz");
			orm_addvar_int(ormid, ObjectData[i][oInterior], "interior"),
			orm_addvar_int(ormid, ObjectData[i][oWorld], "world");
			orm_addvar_float(ormid, ObjectData[i][oHealth], "health");
			orm_addvar_int(ormid, ObjectData[i][oExpire], "expire");
			orm_addvar_string(ormid, ObjectData[i][oPass], 24, "password");
			orm_addvar_int(ormid, ObjectData[i][oInfinity], "infinity");

			orm_setkey(ormid, "id");
			ObjectData[i][oOwner] = PlayerData[owner][pID],
			ObjectData[i][oObjectID] = id;
			ObjectData[i][oX] = ox,
			ObjectData[i][oY] = oy,
			ObjectData[i][oZ] = oz,
			ObjectData[i][oRX] = rx,
			ObjectData[i][oRY] = ry,
			ObjectData[i][oRZ] = rz,
			ObjectData[i][oHealth] = ObjectList[id][oMaxHealth];
			ObjectData[i][oInterior] = interior,
			ObjectData[i][oWorld] = world,
			ObjectData[i][oExpire] = gettime() + ObjectList[id][oLast];//目前TimeStamp + 保存时长(秒)  = 过期时间(TimeStamp)
			ObjectData[i][oInfinity] = infinity;
			ObjectData[i][oObject] = CreateDynamicObject(ObjectList[id][oObjID], ox, oy, oz, rx, ry, rz, world, interior);
			//SetDynamicObjectMaterial(ObjectData[i][oObject], 0, -1, "none", "none", 0xFFFFFFFF);
			mysql_format(DEFAULT_SESSION, ObjectData[i][oPass], 24, "null_pass");
		    orm_save(ormid);

			ForEachPlayer(p)
			{
				if(GetPlayerDistanceFromPointEx(p, ox, oy, oz) < 50.0)
				{
					Streamer_Update(p);
				}
			}
			SetGVarInt("ObjectData", 1, ObjectData[i][oObject]);
	    	SetGVarInt("ObjectDataID", i, ObjectData[i][oObject]);
			return i;
		}
	}
	return k;
}

PUBLIC:LoadObjectData()
{
	static r, c;
	for(r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = ObjectData[r][ORM_ID] = orm_create("objectdata", MYSQL_SESSION_A);
		orm_addvar_int(ormid, ObjectData[r][oID], "id"),
		orm_addvar_int(ormid, ObjectData[r][oOwner], "owner"),
		orm_addvar_int(ormid, ObjectData[r][oObjectID], "objectID"),
		orm_addvar_float(ormid, ObjectData[r][oX], "x"),
		orm_addvar_float(ormid, ObjectData[r][oY], "y"),
		orm_addvar_float(ormid, ObjectData[r][oZ], "z");
		orm_addvar_float(ormid, ObjectData[r][oRX], "rx"),
		orm_addvar_float(ormid, ObjectData[r][oRY], "ry"),
		orm_addvar_float(ormid, ObjectData[r][oRZ], "rz");
		orm_addvar_int(ormid, ObjectData[r][oInterior], "interior"),
		orm_addvar_int(ormid, ObjectData[r][oWorld], "world");
		orm_addvar_float(ormid, ObjectData[r][oHealth], "health");
		orm_addvar_int(ormid, ObjectData[r][oExpire], "expire");
        orm_addvar_string(ormid, ObjectData[r][oPass], 24, "password");
        orm_addvar_int(ormid, ObjectData[r][oInfinity], "infinity");

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
		orm_load(ormid, "CheckObjectData", "d", r);
	}
	printf("已读取物件资料, 共 %d 条", r);
}

PUBLIC:CheckObjectData(id)
{
	if(orm_errno(ObjectData[id][ORM_ID]) == ERROR_OK)
	{
	    //LoadObjectItem(id);
	    ObjectData[id][oObject] = CreateDynamicObject(ObjectList[ObjectData[id][oObjectID]][oObjID], ObjectData[id][oX], ObjectData[id][oY], ObjectData[id][oZ], ObjectData[id][oRX], ObjectData[id][oRY], ObjectData[id][oRZ], ObjectData[id][oWorld], ObjectData[id][oInterior]);
	    //SetDynamicObjectMaterial(ObjectData[id][oObject], 0, -1, "none", "none", 0xFFFFFFFF);
	    SetGVarInt("ObjectData", 1, ObjectData[id][oObject]);
	    SetGVarInt("ObjectDataID", id, ObjectData[id][oObject]);
	}
	return 1;
}

PUBLIC:SaveObjectData()
{
    static Hr, Min, Sec, r, TimeStamp;
	TimeStamp = gettime(Hr, Min, Sec);
    for(r = 0; r < cache_num_rows(); r++)
	{
	    if(ObjectData[r][oInfinity] == 0 && (ObjectData[r][oExpire] < TimeStamp || ObjectData[r][oHealth] < 1.0)) DeleteObjectData(r);//过期就删除
		else
		{
		    //SaveObjectItem(r);
			orm_save(ObjectData[r][ORM_ID]);
		}
	}
	printf("已储存物件资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

stock PlayerHaveObject(playerid)
{
    static i, j, k;
	for(i = k = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
	{
		if(ObjectData[i][oOwner] == PlayerData[playerid][pID]) {k++;}
	}
	return k;
}

stock DeleteObjectData(id)
{
	if(ObjectList[ObjectData[id][oObjectID]][oType] == OBJ_SPEAKER)
	{
	    ForEachPlayer(i)
	    {
			if(GetGVarInt("UsingRadio", i) == 0 && GetGVarInt("UsingSpeaker", i) == 1 && GetGVarInt("SpeakerID", i) == id)
			{
				StopAudioStreamForPlayer(i);
			}
	    }
	}
	if(ObjectData[id][oObjectID] > 0/* && DeleteAllObjectItems(id)*/)
	{
		printf("物件编号 %d 已被删除", ObjectData[id][oID]);
		orm_delete(ObjectData[id][ORM_ID]);
		orm_destroy(ObjectData[id][ORM_ID]);
		DestroyDynamicObject(ObjectData[id][oObject]);
	}
	DeleteGVar("ObjectData", ObjectData[id][oObject]);
	DeleteGVar("ObjectDataID", ObjectData[id][oObject]);
	ObjectData[id][oID] =
	ObjectData[id][oOwner] =
	ObjectData[id][oObjectID] =
	ObjectData[id][oInterior] =
	ObjectData[id][oWorld] = 0;
	ObjectData[id][oX] =
	ObjectData[id][oY] =
	ObjectData[id][oZ] =
	ObjectData[id][oRX] =
	ObjectData[id][oRY] =
	ObjectData[id][oRZ] =
	ObjectData[id][oHealth] = 0.0;
	ObjectData[id][ORM_ID] = ORM:0;
}

stock OpenObjectDoor(objectid)
{
    MoveDynamicObject(ObjectData[objectid][oObject], ObjectData[objectid][oX], ObjectData[objectid][oY], ObjectData[objectid][oZ]+0.001, 0.25, ObjectData[objectid][oRX], ObjectData[objectid][oRY], ObjectData[objectid][oRZ]-90.0);
    SetGVarInt("ObjectDoor", 1, objectid);
}

stock CloseObjectDoor(objectid)
{
    MoveDynamicObject(ObjectData[objectid][oObject], ObjectData[objectid][oX], ObjectData[objectid][oY], ObjectData[objectid][oZ]-0.001, 0.25, ObjectData[objectid][oRX], ObjectData[objectid][oRY], ObjectData[objectid][oRZ]);
    DeleteGVar("ObjectDoor", objectid);
}
/*
stock LoadObjectItem(id, MySQL:Session = DEFAULT_SESSION)
{
	static i, y, query[128], field, rows;
    for(i = 0, y = MAX_ITEMS; i < y; i++)
	{
		ObjectItem[id][i] = EMPTY_OBJITEM;
	}

	CheckDatabaseConnecting(Session);
	mysql_format(Session, query, sizeof(query), "SELECT * FROM `objectitem` WHERE `ObjectID`='%d'", id);
	new Cache:c_query = mysql_query(Session, query);

	for(field = 0, rows = cache_num_rows(); field < rows; field++)
	{
		new ORM:ormid = ObjectItem[id][field][ORM_ID] = orm_create("objectitem");

		orm_addvar_int(ormid, ObjectItem[id][field][oiID], "id");
		orm_addvar_int(ormid, ObjectItem[id][field][oiType], "ItemType");
		orm_addvar_int(ormid, ObjectItem[id][field][oiItemID], "ItemID");
		orm_addvar_int(ormid, ObjectItem[id][field][oiObjectID], "ObjectID");
		orm_addvar_int(ormid, ObjectItem[id][field][oiCount], "Count");

		ObjectItem[id][field][oiObjectID] = ObjectData[id][oID];
		orm_setkey(ormid, "ObjectID");
		orm_apply_cache(ormid, field);
		orm_setkey(ormid, "id");

		orm_apply_cache(ormid, field);
	}
	cache_delete(c_query);
}

stock SaveObjectItem(id, bool:unload = false, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(ObjectItem[id][l][oiCount] > 0)
		{
			ObjectItem[id][l][oiObjectID] = ObjectData[id][oID];
			orm_save(ObjectItem[id][l][ORM_ID]);
			if(unload)
			{
				orm_destroy(ObjectItem[id][l][ORM_ID]);
				ObjectItem[id][l][ORM_ID] = ORM:0;
			}
		}
		else
		{
			if(ObjectItem[id][l][ORM_ID] != ORM:0)
			{
				orm_delete(ObjectItem[id][l][ORM_ID]);
				orm_destroy(ObjectItem[id][l][ORM_ID]);
				ObjectItem[id][l] = EMPTY_OBJITEM;
			}
		}
	}
}

stock GiveObjectItem(id, type, itemid, count, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

	static l, j, k;
	for(l = 0, k = -1, j = MAX_ITEMS; l < j; l++)
	{
		if(ObjectItem[id][l][oiType] == type && ObjectItem[id][l][oiItemID] == itemid)
		{
		    ObjectItem[id][l][oiCount] += count;
		    if(ObjectItem[id][l][oiCount] < 1)
		    {
		        orm_delete(ObjectItem[id][l][ORM_ID]);
				orm_destroy(ObjectItem[id][l][ORM_ID]);
				ObjectItem[id][l] = EMPTY_OBJITEM;
			}
			k = -1;
			break;
		}
		else if(ObjectItem[id][l][oiType] == ITEM_NONE)
		{
		    if(k == -1) k = l;
		}
	}
	if(k != -1)
	{
		if(count < 0) return 0;
		new ORM:ormid = ObjectItem[id][k][ORM_ID] = orm_create("objectitem");

	    orm_addvar_int(ormid, ObjectItem[id][k][oiID], "id");
		orm_addvar_int(ormid, ObjectItem[id][k][oiType], "ItemType");
		orm_addvar_int(ormid, ObjectItem[id][k][oiItemID], "ItemID");
		orm_addvar_int(ormid, ObjectItem[id][k][oiObjectID], "ObjectID");
		orm_addvar_int(ormid, ObjectItem[id][k][oiCount], "Count");
		orm_setkey(ormid, "id");

        ObjectItem[id][k][oiDeptID] = id;
		ObjectItem[id][k][oiType] = type;
		ObjectItem[id][k][oiItemID] = itemid;
		ObjectItem[id][k][oiCount] = count;
        ObjectItem[id][k][oiObjectID] = ObjectData[id][oID];

		orm_insert(DeptItem[id][k][ORM_ID]);
	}
	return 1;
}

stock DeleteAllObjectItems(id, MySQL:Session = DEFAULT_SESSION)
{
	CheckDatabaseConnecting(Session);

    static l, j;
	for(l = 0, j = MAX_ITEMS; l < j; l++)
	{
		if(ObjectItem[id][l][oiObjectID] == id && ObjectItem[id][l][oiType] != ITEM_NONE)
		{
         	orm_delete(ObjectItem[id][l][ORM_ID]);
			orm_destroy(ObjectItem[id][l][ORM_ID]);
			ObjectItem[id][l] = EMPTY_OBJITEM;
		}
	}
  	return 1;
}

stock ObjectHaveItem(id, itemtype, itemid)
{
	static i, j;
	for(i = 0, j = MAX_ITEMS; i < j; i++)
	{
		if(ObjectItem[id][i][oiType] != itemtype) continue;
		if(ObjectItem[id][i][oiItemID] == itemid)
		{
			return ObjectItem[id][i][oiCount];
		}
	}
	return 0;
}

stock GetObjectSpace(id)
{
	switch(ObjectList[ObjectData[id][oObjectID]][oType])
	{
		case OBJ_STORE_SMALL: return 250;
		case OBJ_STORE_MID: return 500;
		case OBJ_STORE_LARGE: return 1000;
		default: return 0;
	}
	return 0;
}

stock GetObjectUsedSpace(id)
{
	static i, j, m;
    for(i = m = 0, j = MAX_ITEMS; i < j; i++)
	{
	    switch(ObjectItem[id][i][oiType])
	    {
	        case ITEM_NONE: continue;
	        case ITEM_USE: m += ItemsList_USE[ObjectItem[id][i][oiItemID]][iuSpace]*ObjectItem[id][i][oiCount];
	        case ITEM_EQ: m += ItemsList_EQ[ObjectItem[id][i][oiItemID]][ieqSpace]*ObjectItem[id][i][oiCount];
	        case ITEM_WEAPON: m += WeaponsList[ObjectItem[id][i][oiItemID]][wSpace];
	    }
	}
	return m;
}

stock GetObjectRemainingSpace(id)
{
	return GetObjectSpace(id) - GetObjectUsedSpace(id);
}
*/
stock CreatePlant(plant, owner, Float:ptx, Float:pty, Float:ptz, world=0)
{
    static string[144], i, j, k;
	k = -1;
    for(i = 0, j = MAX_PLANTS; i < j; i++)
	{
		if(PlantData[i][ptPlantID] == 0)
		{
			new ORM:ormid = PlantData[i][ORM_ID] = orm_create("plantdata", MYSQL_SESSION_A);
			orm_addvar_int(ormid, PlantData[i][ptID], "id"),
			orm_addvar_int(ormid, PlantData[i][ptOwner], "owner"),
			orm_addvar_int(ormid, PlantData[i][ptPlantID], "plantID"),
			orm_addvar_int(ormid, PlantData[i][ptWater], "water"),
			orm_addvar_int(ormid, PlantData[i][ptFirtile], "firtile"),
			orm_addvar_int(ormid, PlantData[i][ptGrowth], "growth"),
			orm_addvar_int(ormid, PlantData[i][ptHealth], "health"),
			orm_addvar_int(ormid, PlantData[i][ptSick], "sick"),
			orm_addvar_float(ormid, PlantData[i][ptX], "x"),
			orm_addvar_float(ormid, PlantData[i][ptY], "y"),
			orm_addvar_float(ormid, PlantData[i][ptZ], "z");
			orm_addvar_int(ormid, PlantData[i][ptWorld], "world");
			orm_setkey(ormid, "id");
			PlantData[i][ptOwner] = PlayerData[owner][pID];
			PlantData[i][ptGrowth] = 0;
			PlantData[i][ptPlantID] = plant;
			PlantData[i][ptWater] = 480;
			PlantData[i][ptFirtile] = PlantData[i][ptSick] = PlantData[i][ptHealth] = 0;
			PlantData[i][ptX] = ptx;
			PlantData[i][ptY] = pty;
			PlantData[i][ptZ] = ptz;
			PlantData[i][ptWorld] = world;
			PlantData[i][ptObject] = CreateDynamicObject(2203, ptx, pty, ptz-0.82, 0.0000, 0.0000, 0.0000, world);
		    orm_save(ormid);
		    format(string, sizeof(string), "%s", PlantList[plant][ptName]);
			PlantData[i][ptText] = CreateDynamic3DTextLabel(string, COLOR_LIGHTGREEN, ptx, pty, ptz, 5.0, _, _, 0, world);

			ForEachPlayer(p)
			{
				//玩家与植物距离50.0
				if(GetPlayerDistanceFromPointEx(p, ptx, pty, ptz) < 50.0)
				{
					//就更新该玩家的streamer物件(对于植物的坐标)
					Streamer_UpdateEx(p, ptx, pty, ptz);
					//Streamer_Update(p); // 亦可只更新玩家
				}
			}
			return i;
		}
	}
	return k;
}

PUBLIC:LoadPlantData()
{
	static r, c;
	for(r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = PlantData[r][ORM_ID] = orm_create("plantdata", MYSQL_SESSION_A);

        orm_addvar_int(ormid, PlantData[r][ptID], "id"),
		orm_addvar_int(ormid, PlantData[r][ptOwner], "owner"),
		orm_addvar_int(ormid, PlantData[r][ptPlantID], "plantID"),
		orm_addvar_int(ormid, PlantData[r][ptWater], "water"),
		orm_addvar_int(ormid, PlantData[r][ptFirtile], "firtile"),
		orm_addvar_int(ormid, PlantData[r][ptGrowth], "growth"),
		orm_addvar_int(ormid, PlantData[r][ptHealth], "health"),
		orm_addvar_int(ormid, PlantData[r][ptSick], "sick"),
		orm_addvar_float(ormid, PlantData[r][ptX], "x"),
		orm_addvar_float(ormid, PlantData[r][ptY], "y"),
		orm_addvar_float(ormid, PlantData[r][ptZ], "z");
		orm_addvar_int(ormid, PlantData[r][ptWorld], "world");

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
		orm_load(ormid, "CheckPlantData", "d", r);
	}
	printf("已读取植物资料, 共 %d 条", r);
}

PUBLIC:CheckPlantData(id)
{
    static string[144];
	if(orm_errno(PlantData[id][ORM_ID]) == ERROR_OK)
	{
	    PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
		format(string, sizeof(string), "%s", PlantList[PlantData[id][ptPlantID]][ptName]);
		PlantData[id][ptText] = CreateDynamic3DTextLabel(string, COLOR_LIGHTGREEN, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ], 5.0, _, _, 0, PlantData[id][ptWorld]);
		UpdatePlantData(id);
	}
	return 1;
}

stock PlantGrow(id)
{
	if(PlantData[id][ptPlantID] != 0)
	{
	    static pid;
	    pid = PlantData[id][ptPlantID];
	    if(PlantData[id][ptFirtile] > 0){PlantData[id][ptFirtile] -= 1;}

	    if(GetWeatherStatus(GetGVarInt("Tiempo")) == WEATHER_RAINY && PlantData[id][ptWater] > 2) {PlantData[id][ptWater] = 0;}
	    else if(PlantData[id][ptWater] < 15000){PlantData[id][ptWater] ++;}

	    if(PlantData[id][ptHealth] == 2) {PlantData[id][ptGrowth] -= 1;}
	    else if(PlantData[id][ptGrowth] < PlantList[pid][ptMaxGrowth] && PlantData[id][ptHealth] == 0)
		{
		    if(PlantData[id][ptFirtile] > 0){PlantData[id][ptGrowth] += 2;}
			else {PlantData[id][ptGrowth] ++;}
		}
	    UpdatePlantData(id);
	}
}

PUBLIC:UpdatePlantData(id)
{
	if(PlantData[id][ptPlantID] != 0)
	{
	    new string[144], stat[24],
			growth = PlantData[id][ptGrowth],
		    pid = PlantData[id][ptPlantID],
		    water = PlantData[id][ptWater];
	    if(PlantData[id][ptGrowth] < 0) DeletePlant(id);
	    else
	    {
		    switch(PlantData[id][ptPlantID])
		    {
			    case 1://密盆草
				{
				    if(growth < 90)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(90 <= growth <= 600)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2241, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.51, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(600 < growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2195, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.53, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 240)
						{
						    if(water > 2400) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 2://百合
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2251, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.15, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
		                if(water > 60)
						{
						    if(water > 1440) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 3://木盆草
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2252, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.78, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
		    			if(water > 120)
						{
						    if(water > 1440) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 4://圣诞红
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(40 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2253, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.74, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 90)
						{
						    if(water > 1440) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 5://小椰子
				{
				    if(growth < 120)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(120 <= growth <= 1200)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2001, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.02, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1200 < growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2011, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.02, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 240)
						{
						    if(water > 2400) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 6://硬草
				{
				    if(growth < 40)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(40 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2811, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.08, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 180)
						{
						    if(water > 1800) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 7://斯兰
				{
				    if(growth < 15)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(15 <= growth < 300)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(859, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.3, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(300 <= growth < 720)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(860, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.3, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(720 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(862, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.3, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
		    			if(water > 1200)
						{
						    if(water > 12000) {DeletePlant(id); }
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 8://巨型仙人掌
				{
				    if(growth < 60)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(60 <= growth < 480)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(651, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.11, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(480 <= growth < 1440)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(650, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.28, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1440 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(653, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.49, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 1200)
						{
						    if(water > 12000) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 9://散叶仙人掌
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth < 360)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(863, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.19, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(360 <= growth < 1500)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(754, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.98, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1500 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(753, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.08, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 1200)
						{
						    if(water > 12000) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 10://小红花
				{
				    if(growth < 40)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(40 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2245, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.809, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 60)
						{
						    if(water > 1440) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 11://马草
				{
				    if(growth < 40)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(40 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2240, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.559, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 60)
						{
						    if(water > 1440) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 12://二回树
				{
				    if(growth < 40)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(40 <= growth < 360)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2241, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.842, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(360 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2010, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.008, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 300)
						{
						    if(water > 3000) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 13://绿色药草
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth < 480)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(19839, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.011, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(480 <= growth < 1440)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(827, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.004, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1440 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(823, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.02, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 480)
						{
						    if(water > 4800) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 14://黄色药草
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth < 480)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(19837, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.99, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(480 <= growth < 720)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(820, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.447, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(720 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(856, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.868, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 480)
						{
						    if(water > 4800) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
	            case 15://白色药草
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth < 480)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(19838, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.985, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(480 <= growth < 1080)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(806, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]+0.09, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1080 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(855, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]+0.27, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 480)
						{
						    if(water > 4800) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 16://红色药草
				{
				    if(growth < 30)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(30 <= growth < 120)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(19837, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.052, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(120 <= growth < 480)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(818, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.142, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(480 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(819, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.113, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 480)
						{
						    if(water > 4800) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 17://樱花树
				{
				    if(growth < 360)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(360 <= growth < 1440)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(765, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.520, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1440 <= growth < 2180)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(894, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.520, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(2180 <= growth < 3600)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(769, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.520, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(3600 <= growth < 6000)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(-1030, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.200, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(6000 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(-1031, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.200, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 360)
						{
						    if(water > 3600) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
				case 18://林檎树
				{
				    if(growth < 360)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(2203, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.82, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(360 <= growth < 1440)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(893, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.520, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(1440 <= growth < 2180)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(782, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-0.750, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(2180 <= growth < 3600)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(776, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.520, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(3600 <= growth < 6000)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(767, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.200, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
					}
					else if(6000 <= growth)
				    {
				        DestroyDynamicObject(PlantData[id][ptObject]);
						PlantData[id][ptObject] = CreateDynamicObject(656, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]-1.200, 0.0000, 0.0000, 0.0000, PlantData[id][ptWorld]);
						new fruit = GetGVarInt("tFruit", id);
						if(fruit == 30)
						{
						    DeleteGVar("tFruit", id);
						    switch(random(5))
						    {
						        case 0: CreateDropItem(ITEM_USE, 313, 1+random(1), PlantData[id][ptX]+4.0, PlantData[id][ptY], PlantData[id][ptZ], PlantData[id][ptWorld], 3600);
						        case 1: CreateDropItem(ITEM_USE, 314, 1+random(1), PlantData[id][ptX]+4.0, PlantData[id][ptY], PlantData[id][ptZ], PlantData[id][ptWorld], 3600);
						        case 2: CreateDropItem(ITEM_USE, 315, 1+random(1), PlantData[id][ptX]+4.0, PlantData[id][ptY], PlantData[id][ptZ], PlantData[id][ptWorld], 3600);
						        case 3: CreateDropItem(ITEM_USE, 316, 1+random(1), PlantData[id][ptX]+4.0, PlantData[id][ptY], PlantData[id][ptZ], PlantData[id][ptWorld], 3600);
						        case 4: CreateDropItem(ITEM_USE, 317, 1+random(1), PlantData[id][ptX]+4.0, PlantData[id][ptY], PlantData[id][ptZ], PlantData[id][ptWorld], 3600);
						    }
						}
						else SetGVarInt("tFruit", fruit+1, id);
					}
					if(PlantData[id][ptHealth] == 2){}
					else
					{
						if(water > 360)
						{
						    if(water > 3600) {DeletePlant(id); return;}
							else {PlantData[id][ptHealth] = 1;}
						}
						else {PlantData[id][ptHealth] = 0;}
					}
				}
			}
	     	orm_update(PlantData[id][ORM_ID]);

		    if(PlantData[id][ptHealth] == 1) format(stat, sizeof(stat), ""#TEXT_YELLOW"缺水");
		    else if(PlantData[id][ptHealth] == 2) format(stat, sizeof(stat), ""#TEXT_RED"中毒");
		    else if(PlantData[id][ptGrowth] >= PlantList[pid][ptMaxGrowth]) format(stat, sizeof(stat), ""#TEXT_FADEGREEN"可收成");
		    else if(PlantData[id][ptFirtile] > 0) format(stat, sizeof(stat), ""#TEXT_ORANGE"已施肥");
		    else format(stat, sizeof(stat), "健康");

		    format(string, sizeof(string), "%s的%s\n成熟度:%d/%d\n状态:%s", GetPlayerSqlName(PlantData[id][ptOwner]), PlantList[pid][ptName], PlantData[id][ptGrowth], PlantList[pid][ptMaxGrowth], stat);
			UpdateDynamic3DTextLabelText(PlantData[id][ptText], COLOR_LIGHTGREEN, string);

			ForEachPlayer(p)
			{
				//玩家与植物距离50.0
				if(GetPlayerDistanceFromPointEx(p, PlantData[id][ptX], PlantData[id][ptY], PlantData[id][ptZ]) < 50.0)
				{
					//就更新该玩家的streamer物件(对于植物的坐标)
					//Streamer_UpdateEx(p, ptx, pty, ptz);
					Streamer_Update(p); // 亦可只更新玩家
				}
			}
		}
	}
}


static PlayerHavePlant(playerid)
{
    new i, j, k;
	for(i = k = 0, j = MAX_PLANTS; i < j; i++)
	{
		if(PlantData[i][ptOwner] == PlayerData[playerid][pID]) {k++;}
	}
	return k;
}

static DeletePlant(id)
{
	if(PlantData[id][ptPlantID] != 0)
	{
		printf("植物编号 %d 已被删除", PlantData[id][ptID]);
		orm_delete(PlantData[id][ORM_ID]);
		orm_destroy(PlantData[id][ORM_ID]);
		DestroyDynamicObject(PlantData[id][ptObject]);
		DestroyDynamic3DTextLabel(PlantData[id][ptText]);
	}
	PlantData[id][ptID] =
	PlantData[id][ptOwner] =
	PlantData[id][ptWater] =
	PlantData[id][ptFirtile] =
	PlantData[id][ptPlantID] =
	PlantData[id][ptGrowth] =
	PlantData[id][ptHealth] =
	PlantData[id][ptSick] =
	PlantData[id][ptWorld] =
	PlantData[id][ptObject] = 0;
	PlantData[id][ptX] =
	PlantData[id][ptY] =
	PlantData[id][ptZ] = 0.0;
	PlantData[id][ORM_ID] = ORM:0;
	DeleteGVar("tPlant", id);
}

static PlayerCanSetVehicle(playerid, vehicleid)
{
    if(VehData[vehicleid][vType] == VTYPE_PLAYER && PlayerData[playerid][pID] == VehData[vehicleid][vOwner])
	{
		return 1;
	}
	else if(VehData[vehicleid][vType] == VTYPE_COMPANY && PlayerData[playerid][pCompany] == VehData[vehicleid][vOwner])
	{
	    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
	    if(GetPlayerCompanyRank(playerid) == CompanyData[comid][comVehR] || CompanyData[comid][comCEO] == PlayerData[playerid][pID])
	    {
			return 1;
		}
	}
	else if(VehData[vehicleid][vType] == VTYPE_GANG && PlayerData[playerid][pGang] == VehData[vehicleid][vOwner])
	{
		new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
	    if(GetPlayerGangRank(playerid) == GangData[gangid][gVehR] || GangData[gangid][gBoss] == PlayerData[playerid][pID])
	    {
			return 1;
		}
	}
	else if(VehData[vehicleid][vType] == VTYPE_DEPARTMENT && PlayerData[playerid][pDepartment] == VehData[vehicleid][vOwner])
	{
	    if(PlayerData[playerid][pDeptRank] > 3)
	    {
			return 1;
		}
	}
	return 0;
}

static IsPlayerVehicle(playerid, vehicleid)
{
    if(VehData[vehicleid][vOwned] == 1 && VehData[vehicleid][vType] == VTYPE_PLAYER && PlayerData[playerid][pID] == VehData[vehicleid][vOwner])
	{
		return 1;
	}
	else if(VehData[vehicleid][vType] == VTYPE_RENT && GetGVarInt("RentCar", playerid) == vehicleid)
	{
		return 1;
	}
	return 0;
}

static IsCompanyVehicle(comsqlid, vehicleid)
{
    if(VehData[vehicleid][vOwned] == 1 && VehData[vehicleid][vType] == VTYPE_COMPANY && comsqlid == VehData[vehicleid][vOwner])
	{
		return 1;
	}
	return 0;
}

static IsGangVehicle(gangsqlid, vehicleid)
{
    if(VehData[vehicleid][vOwned] == 1 && VehData[vehicleid][vType] == VTYPE_GANG && gangsqlid == VehData[vehicleid][vOwner])
	{
		return 1;
	}
	return 0;
}

static IsDepartmentVehicle(dptid, vehicleid)
{
    if(VehData[vehicleid][vOwned] == 1 && VehData[vehicleid][vType] == VTYPE_DEPARTMENT && dptid == VehData[vehicleid][vOwner])
	{
		return 1;
	}
	return 0;
}

public OnVehicleDamageStatusUpdate(vehicleid, playerid)
{
	if(VehData[vehicleid][vType] != 0)
	{
	    new panels, doors, lights, tires, Float:vhp;
	    GetVehicleHealth(vehicleid, vhp);
	    GetVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
	    if(VehData[vehicleid][vTireUp] == 1 && tires != 0)
	    {
	        tires = 0;
	        UpdateVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
	    }
	    if(VehData[vehicleid][vBodyUp] == 1 && vhp > 500.0)
	    {
	        panels = doors = lights = 0;
	        UpdateVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
	    }
	    VehData[vehicleid][vPanelStat] = panels;
	    VehData[vehicleid][vDoorStat] = doors;
	    VehData[vehicleid][vLightStat] = lights;
	    VehData[vehicleid][vTireStat] = tires;
	    if(vhp > 300.0) {VehData[vehicleid][vHealth] = vhp;}
	    else {VehData[vehicleid][vHealth] = 300.0;}
	}
    return 1;
}

PUBLIC:SaveVehicleComponents(vehicleid)
{
	new slot[14], i;
	for(i = 0; i < 14; i++)
	{
	    slot[i] = GetVehicleComponentInSlot(vehicleid, i);
	}
	if(slot[0] > 0) VehData[vehicleid][vComponent0] = slot[0];
	if(slot[1] > 0) VehData[vehicleid][vComponent1] = slot[1];
	if(slot[2] > 0) VehData[vehicleid][vComponent2] = slot[2];
	if(slot[3] > 0) VehData[vehicleid][vComponent3] = slot[3];
	if(slot[4] > 0) VehData[vehicleid][vComponent4] = slot[4];
	if(slot[5] > 0) VehData[vehicleid][vComponent5] = slot[5];
	if(slot[6] > 0) VehData[vehicleid][vComponent6] = slot[6];
	if(slot[7] > 0) VehData[vehicleid][vComponent7] = slot[7];
	if(slot[8] > 0) VehData[vehicleid][vComponent8] = slot[8];
	if(slot[9] > 0) VehData[vehicleid][vComponent9] = slot[9];
	if(slot[10] > 0) VehData[vehicleid][vComponent10] = slot[10];
	if(slot[11] > 0) VehData[vehicleid][vComponent11] = slot[11];
	if(slot[12] > 0) VehData[vehicleid][vComponent12] = slot[12];
	if(slot[13] > 0) VehData[vehicleid][vComponent13] = slot[13];
	orm_save(VehData[vehicleid][ORM_ID]);
}

PUBLIC:SetVehicleModifications(id)
{
	if(VehData[id][vComponent0] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent0]);
	}
	if(VehData[id][vComponent1] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent1]);
	}
	if(VehData[id][vComponent2] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent2]);
	}
	if(VehData[id][vComponent3] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent3]);
	}
	if(VehData[id][vComponent4] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent4]);
	}
	if(VehData[id][vComponent5] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent5]);
	}
	if(VehData[id][vComponent6] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent6]);
	}
	if(VehData[id][vComponent7] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent7]);
	}
	if(VehData[id][vComponent8] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent8]);
	}
	if(VehData[id][vComponent9] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent9]);
	}
	if(VehData[id][vComponent10] > 0)
	{
	  	AddVehicleComponent(id, VehData[id][vComponent10]);
	}
	if(VehData[id][vComponent11] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent11]);
	}
	if(VehData[id][vComponent12] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent12]);
	}
	if(VehData[id][vComponent13] > 0)
	{
		AddVehicleComponent(id, VehData[id][vComponent13]);
	}
}

stock VehicleHaveComponent(vehicleid, component)
{
	if(VehData[vehicleid][vComponent0] == component) return 1;
	else if(VehData[vehicleid][vComponent1] == component) return 1;
	else if(VehData[vehicleid][vComponent2] == component) return 1;
	else if(VehData[vehicleid][vComponent3] == component) return 1;
	else if(VehData[vehicleid][vComponent4] == component) return 1;
	else if(VehData[vehicleid][vComponent5] == component) return 1;
	else if(VehData[vehicleid][vComponent6] == component) return 1;
	else if(VehData[vehicleid][vComponent7] == component) return 1;
	else if(VehData[vehicleid][vComponent8] == component) return 1;
	else if(VehData[vehicleid][vComponent9] == component) return 1;
	else if(VehData[vehicleid][vComponent10] == component) return 1;
	else if(VehData[vehicleid][vComponent11] == component) return 1;
	else if(VehData[vehicleid][vComponent12] == component) return 1;
	else if(VehData[vehicleid][vComponent13] == component) return 1;
	return 0;
}

PUBLIC:ClearVehicleComponents(id)
{
    RemoveVehicleComponent(id, VehData[id][vComponent0]);
    RemoveVehicleComponent(id, VehData[id][vComponent1]);
    RemoveVehicleComponent(id, VehData[id][vComponent2]);
    RemoveVehicleComponent(id, VehData[id][vComponent3]);
    RemoveVehicleComponent(id, VehData[id][vComponent4]);
    RemoveVehicleComponent(id, VehData[id][vComponent5]);
    RemoveVehicleComponent(id, VehData[id][vComponent6]);
    RemoveVehicleComponent(id, VehData[id][vComponent7]);
    RemoveVehicleComponent(id, VehData[id][vComponent8]);
    RemoveVehicleComponent(id, VehData[id][vComponent9]);
    RemoveVehicleComponent(id, VehData[id][vComponent10]);
    RemoveVehicleComponent(id, VehData[id][vComponent11]);
    RemoveVehicleComponent(id, VehData[id][vComponent12]);
    RemoveVehicleComponent(id, VehData[id][vComponent13]);
	VehData[id][vComponent0] = VehData[id][vComponent1] = VehData[id][vComponent2] = VehData[id][vComponent3] =
	VehData[id][vComponent4] = VehData[id][vComponent5] = VehData[id][vComponent6] = VehData[id][vComponent7] =
	VehData[id][vComponent8] = VehData[id][vComponent9] = VehData[id][vComponent10] = VehData[id][vComponent11] =
	VehData[id][vComponent12] = VehData[id][vComponent13] = 0;
	orm_save(VehData[id][ORM_ID]);
}

public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	new string[144];
	if(GetGVarInt("AddingGZ", playerid) == 1)
	{
	    SetGVarFloat("GZMinX", fX, playerid);
	    SetGVarFloat("GZMinY", fY, playerid);
	    SetGVarInt("AddingGZ", 2, playerid);
	    SetPlayerCheckpoint(playerid, fX, fY, fZ, 5.0);
	    SendClientMessage(playerid, COLOR_WHITE, "** 已标记西南位置,接着请标记地盘的东北边缘");
	}
	else if(GetGVarInt("AddingGZ", playerid) == 2)
	{
	    new type, name[24], level, Float:minx, Float:miny, Float:maxx, Float:maxy, gzid;
	    type = GetGVarInt("GZType", playerid);
	    GetGVarString("GZName", name, sizeof(name), playerid);
	    level = GetGVarInt("GZLevel", playerid);
	    minx = GetGVarFloat("GZMinX", playerid);
	    miny = GetGVarFloat("GZMinY", playerid);
	    if(minx > fX)//修正大小颠倒
		{
			maxx = minx;
			minx = fX;
		}
		else maxx = fX;
		if(miny > fY)
		{
			maxy = miny;
			miny = fY;
		}
		else maxy = fY;
	    gzid = CreateGangZone(type, name, minx, miny, maxx, maxy, level);
	    DeleteGVar("AddingGZ", playerid);
	    DisablePlayerCheckpoint(playerid);
	    format(string, sizeof(string), "** 已增加新的帮会地盘%s,编号为:%d,等级为%d", name, gzid, level);
	    SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else
	{
	    CA_FindZ_For2DCoord(fX, fY, fZ);
	    SetPlayerGPS(playerid, fX, fY, fZ);
		SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_VIOLET"你在暂停画面标记的坐标已为你记录在雷达地图上");
		AskShareMap(playerid);
	}
    return 1;
}

stock AskShareMap(playerid)
{
    if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid),
	        check = 0;
		ForEachPlayer(i)
		{
			if(GetPlayerVehicleID(i) == vehicleid && i != playerid){ check = 1;}
		}
		if(check == 1){return ShowPlayerDialog(playerid, DIALOG_SHAREMAP_VEH, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"分享坐标", ""#TEXT_WHITE"你要将标记的坐标分享给同车的乘客吗?", "好", "不");}
	}
	if(GetPlayerTeam(playerid) != NO_TEAM)
    {
        return ShowPlayerDialog(playerid, DIALOG_SHAREMAP_TEAM, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"分享坐标", ""#TEXT_WHITE"你要将标记的坐标分享给小队的队员吗?", "好", "不");
    }
    return 1;
}

PUBLIC:LoadResourceData()
{
    new ORM:ormid = ResourceData[ORM_ID] = orm_create("resourcedata", MYSQL_SESSION_A);

    orm_addvar_int(ormid, ResourceData[rID], "id"),
    orm_addvar_int(ormid, ResourceData[rWood], "wood"),
    orm_addvar_int(ormid, ResourceData[rHerbYellow], "herb_yellow"),
    orm_addvar_int(ormid, ResourceData[rHerbGreen], "herb_green"),
    orm_addvar_int(ormid, ResourceData[rHerbWhite], "herb_white"),
    orm_addvar_int(ormid, ResourceData[rHerbRed], "herb_red"),
    orm_addvar_int(ormid, ResourceData[rHSeedYellow], "hs_yellow"),
    orm_addvar_int(ormid, ResourceData[rHSeedGreen], "hs_green"),
    orm_addvar_int(ormid, ResourceData[rHSeedWhite], "hs_white"),
    orm_addvar_int(ormid, ResourceData[rHSeedRed], "hs_red"),
    orm_addvar_int(ormid, ResourceData[rIron], "iron"),
    orm_addvar_int(ormid, ResourceData[rRock], "rock"),
    orm_addvar_int(ormid, ResourceData[rNiter], "niter"),
    orm_addvar_int(ormid, ResourceData[rGold], "gold"),
    orm_addvar_int(ormid, ResourceData[rFiber], "fiber"),
    orm_addvar_int(ormid, ResourceData[aFox], "fox"),
    orm_addvar_int(ormid, ResourceData[aBear], "bear"),
    orm_addvar_int(ormid, ResourceData[aWolf], "wolf"),
    orm_addvar_int(ormid, ResourceData[aPanda], "panda"),
    orm_addvar_int(ormid, ResourceData[aChicken], "chicken"),
    orm_addvar_int(ormid, ResourceData[aPig], "pig"),
    orm_addvar_int(ormid, ResourceData[aSheep], "sheep"),
    orm_addvar_int(ormid, ResourceData[aDog], "dog"),
    orm_addvar_int(ormid, ResourceData[aCat], "cat"),
    orm_addvar_int(ormid, ResourceData[fCod], "cod"),
    orm_addvar_int(ormid, ResourceData[fSaury], "saury"),
    orm_addvar_int(ormid, ResourceData[fHerring], "herring"),
    orm_addvar_int(ormid, ResourceData[fSardine], "sardine"),
    orm_addvar_int(ormid, ResourceData[fSwordFish], "swordfish"),
    orm_addvar_int(ormid, ResourceData[fMackerel], "mackerel"),
    orm_addvar_int(ormid, ResourceData[fSquid], "squid"),
    orm_addvar_int(ormid, ResourceData[fTuna], "tuna"),
    orm_addvar_int(ormid, ResourceData[rSeedF], "seed_f"),
    orm_addvar_int(ormid, ResourceData[rSeedD], "seed_d"),
    orm_addvar_int(ormid, ResourceData[rFruit], "fruit"),
    orm_addvar_int(ormid, ResourceData[fGoldenCarp], "goldencarp"),
    orm_addvar_int(ormid, ResourceData[fPiranha], "piranha"),
    orm_addvar_int(ormid, ResourceData[fPomfret], "pomfret"),
    orm_addvar_int(ormid, ResourceData[fSnapper], "snapper"),
    orm_addvar_int(ormid, ResourceData[fTuskfin], "tuskfin"),
    orm_addvar_int(ormid, ResourceData[aGator], "gator");
    orm_apply_cache(ormid, 0);
	orm_setkey(ormid, "id");
	orm_load(ormid, "CreateResource");
}

PUBLIC:CreateResource()
{
	static i, j, k, rand;

	if(ResourceData[rHerbGreen] < 20) j = ResourceData[rHerbGreen];
	else j = 20;
	for(i = 0; i < j; i++){CreateRandPosResource(42); k++;}

	if(ResourceData[rHerbYellow] < 20) j = ResourceData[rHerbGreen];
	else j = 20;
	for(i = 0; i < j; i++){CreateRandPosResource(43); k++;}

	if(ResourceData[rHerbWhite] < 20) j = ResourceData[rHerbGreen];
	else j = 20;
	for(i = 0; i < j; i++){CreateRandPosResource(44); k++;}

	if(ResourceData[rHerbRed] < 20) j = ResourceData[rHerbGreen];
	else j = 20;
	for(i = 0; i < j; i++){CreateRandPosResource(114); k++;}

	if(ResourceData[rHSeedYellow] < MAX_RESOURCE_SPAWN) j = ResourceData[rHerbGreen];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++){CreateRandPosResource(110); k++;}

	if(ResourceData[rHSeedGreen] < MAX_RESOURCE_SPAWN) j = ResourceData[rHerbGreen];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++){CreateRandPosResource(111); k++;}

	if(ResourceData[rHSeedWhite] < MAX_RESOURCE_SPAWN) j = ResourceData[rHerbGreen];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++){CreateRandPosResource(112); k++;}

	if(ResourceData[rHSeedRed] < MAX_RESOURCE_SPAWN) j = ResourceData[rHerbGreen];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++){CreateRandPosResource(113); k++;}

	if(ResourceData[rFiber] < 100) j = ResourceData[rFiber];
	else j = 100;
	for(i = 0; i < j; i++){CreateRandPosResource(86); k++;}

	if(ResourceData[rSeedF] < MAX_RESOURCE_SPAWN) j = ResourceData[rSeedF];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++)
	{
	    rand = random(11);
		switch(rand)
		{
			case 0:CreateRandPosResource(64);
			case 1:CreateRandPosResource(65);
			case 2:CreateRandPosResource(66);
			case 3:CreateRandPosResource(67);
			case 4:CreateRandPosResource(68);
			case 5:CreateRandPosResource(69);
			case 6:CreateRandPosResource(107);
			case 7:CreateRandPosResource(108);
			case 8:CreateRandPosResource(109);
			case 9:CreateRandPosResource(304);
			case 10:CreateRandPosResource(322);
		}
		k++;
	}

	if(ResourceData[rSeedD] < MAX_RESOURCE_SPAWN) j = ResourceData[rSeedD];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++)
	{
	    rand = random(3);
		switch(rand)
		{
			case 0:CreateRandPosResource(77);
			case 1:CreateRandPosResource(78);
			case 2:CreateRandPosResource(79);
		}
		k++;
	}

	if(ResourceData[rFruit] < MAX_RESOURCE_SPAWN) j = ResourceData[rFruit];
	else j = MAX_RESOURCE_SPAWN;
	for(i = 0; i < j; i++)
	{
	    rand = random(5);
		switch(rand)
		{
			case 0:CreateRandPosResource(313);
			case 1:CreateRandPosResource(314);
			case 2:CreateRandPosResource(315);
			case 3:CreateRandPosResource(316);
			case 4:CreateRandPosResource(317);
		}
		k++;
	}
	printf("产生了%d个资源Pickup", k);


	if(ResourceData[aDog] < MAX_ANIMAL_SPAWN) j = ResourceData[aDog];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)
	{
	    rand = 1+random(11);
		if(CreateRandPosAnimal(rand)) k++;
	}
	printf("产生了%d个野生狗NPC,总共有%d个", k, ResourceData[aDog]);

	if(ResourceData[aCat] < 20) j = ResourceData[aCat];
	else j = 20;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(13)) k++;
	printf("产生了%d个野生猫NPC,总共有%d个", k, ResourceData[aCat]);

	if(ResourceData[aFox] < MAX_ANIMAL_SPAWN) j = ResourceData[aFox];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(14)) k++;
	printf("产生了%d个野生狐狸NPC,总共有%d个", k, ResourceData[aFox]);

	if(ResourceData[aBear] < MAX_ANIMAL_SPAWN) j = ResourceData[aBear];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(15)) k++;
	printf("产生了%d个野生熊NPC,总共有%d个", k, ResourceData[aBear]);

	if(ResourceData[aWolf] < MAX_ANIMAL_SPAWN) j = ResourceData[aWolf];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(16)) k++;
	printf("产生了%d个野生狼NPC,总共有%d个", k, ResourceData[aWolf]);

	if(ResourceData[aPig] < MAX_ANIMAL_SPAWN) j = ResourceData[aPig];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(17)) k++;
	printf("产生了%d个野生猪NPC,总共有%d个", k, ResourceData[aPig]);

	if(ResourceData[aChicken] < MAX_ANIMAL_SPAWN) j = ResourceData[aChicken];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(18)) k++;
	printf("产生了%d个野生鸡NPC,总共有%d个", k, ResourceData[aChicken]);

	if(ResourceData[aSheep] < MAX_ANIMAL_SPAWN) j = ResourceData[aSheep];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(19)) k++;
	printf("产生了%d个野生绵羊NPC,总共有%d个", k, ResourceData[aSheep]);

	if(ResourceData[aPanda] < MAX_ANIMAL_SPAWN) j = ResourceData[aPanda];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(20)) k++;
	printf("产生了%d个野生熊猫NPC,总共有%d个", k, ResourceData[aPanda]);

	if(ResourceData[aGator] < MAX_ANIMAL_SPAWN) j = ResourceData[aGator];
	else j = MAX_ANIMAL_SPAWN;
	for(i = k = 0; i < j; i++)if(CreateRandPosAnimal(23)) k++;
	printf("产生了%d个野生鳄鱼NPC,总共有%d个", k, ResourceData[aGator]);

	if(ResourceData[rWood] < MAX_TREE_SPAWN) j = ResourceData[rWood];
	else j = MAX_TREE_SPAWN;
	for(i = k = 0; i < j; i++){CreateRandPosTree(); k++;}
	printf("产生了%d个可伐树Object,总共有%d个", k, ResourceData[rWood]);
	
	new string[144];
    //Admin Pass
	//format(string, sizeof(string), "rcon_password %s", GenerateRandomPassword(32));
	//printf("此次RCON密码为:%s", string);
	
	SendRconCommand(string);
	SendRconCommand("password 0");
}

PUBLIC:ResourceGrow()
{
    if(ResourceData[rWood] < 2000) ResourceData[rWood] += 20;
    if(ResourceData[rHerbYellow] < 20) ResourceData[rHerbYellow] += 5;
    if(ResourceData[rHerbGreen] < 15) ResourceData[rHerbGreen] += 5;
    if(ResourceData[rHerbWhite] < 20) ResourceData[rHerbWhite] += 5;
    if(ResourceData[rHerbRed] < 30) ResourceData[rHerbRed] += 5;
    if(ResourceData[rHSeedYellow] < 50) ResourceData[rHSeedYellow] += 25;
    if(ResourceData[rHSeedGreen] < 50) ResourceData[rHSeedGreen] += 10;
    if(ResourceData[rHSeedWhite] < 50) ResourceData[rHSeedWhite] += 25;
    if(ResourceData[rHSeedRed] < 50) ResourceData[rHSeedRed] += 25;
    if(ResourceData[rIron] < 4000) ResourceData[rIron] += 200;
    if(ResourceData[rRock] < 5000) ResourceData[rRock] += 300;
    if(ResourceData[rNiter] < 6000) ResourceData[rNiter] += 100;
    if(ResourceData[rGold] < 200) ResourceData[rGold] += 5;
    if(ResourceData[rFiber] < 90) ResourceData[rFiber] += 30;
    if(ResourceData[aFox] < 6000) ResourceData[aFox] += 50;
    if(ResourceData[aBear] < 4500) ResourceData[aBear] += 40;
    if(ResourceData[aWolf] < 5500) ResourceData[aWolf] += 55;
    if(ResourceData[aPanda] < 5) ResourceData[aPanda] += 1;
    if(ResourceData[aChicken] < 3000) ResourceData[aChicken] += 60;
    if(ResourceData[aPig] < 3000) ResourceData[aPig] += 60;
    if(ResourceData[aSheep] < 2550) ResourceData[aSheep] += 55;
    if(ResourceData[aDog] < 30) ResourceData[aDog] += 1;
    if(ResourceData[aCat] < 20) ResourceData[aCat] += 1;
    if(ResourceData[aGator] < 30) ResourceData[aGator] += 5;
    if(ResourceData[fCod] < 3000) ResourceData[fCod] += 100;
    if(ResourceData[fSaury] < 3000) ResourceData[fSaury] += 120;
    if(ResourceData[fHerring] < 3000) ResourceData[fHerring] += 150;
    if(ResourceData[fSardine] < 5000) ResourceData[fSardine] += 200;
    if(ResourceData[fSwordFish] < 2000) ResourceData[fSwordFish] += 50;
    if(ResourceData[fMackerel] < 2500) ResourceData[fMackerel] += 100;
    if(ResourceData[fSquid] < 3000) ResourceData[fSquid] += 150;
    if(ResourceData[fTuna] < 4000) ResourceData[fTuna] += 100;
    if(ResourceData[rSeedF] < 50) ResourceData[rSeedF] += 25;
    if(ResourceData[rSeedD] < 50) ResourceData[rSeedD] += 25;
    if(ResourceData[rFruit] < 50) ResourceData[rSeedF] += 50;
    if(ResourceData[fGoldenCarp] < 50) ResourceData[fGoldenCarp] += 5;
    if(ResourceData[fPiranha] < 50) ResourceData[fPiranha] += 5;
    if(ResourceData[fPomfret] < 150) ResourceData[fPomfret] += 10;
    if(ResourceData[fSnapper] < 100) ResourceData[fSnapper] += 15;
    if(ResourceData[fTuskfin] < 200) ResourceData[fTuskfin] += 20;
    RespawnResource();
}

PUBLIC:RespawnResource()
{
	static i, j;
	for(i = 0, j = MAX_PLAYERS; i < j; i++)
	{
	    if(!IsPlayerNPC(i)) continue;
	    if(GetGVarInt("Animal", i) > 0 && GetGVarInt("Pet", i) == 0)
	    {
	        DestroyNPC(i);
	        DeleteGVar("Animal", i);
	    }
	}
	for(i = 0, j = sizeof(DropItem); i < j; i++)
	{
	    if(DropItem[i][idCreated] == 1 && DropItem[i][idRes] == 1)
	    {
	        DeleteDropItem(i);
	    }
	}
	for(i = 0, j = MAX_TREES; i < j; i++)
	{
	    if(LumberTree[i][trCreated] != 0)
	    {
	        DeleteLumberTree(i);
	    }
	}
    CreateResource();
}

PUBLIC:SaveResourceData()
{
	static Hr, Min, Sec;
	gettime(Hr, Min, Sec);
	orm_save(ResourceData[ORM_ID]);
	printf("已储存资源资料[%02d:%02d:%02d]", Hr, Min, Sec);
}

PUBLIC:LoadPriceData()
{
    new ORM:ormid = PriceData[ORM_ID] = orm_create("pricedata", MYSQL_SESSION_A);

    orm_addvar_int(ormid, PriceData[prcID], "id"),
    orm_addvar_int(ormid, PriceData[prcGas], "gas"),
    orm_addvar_int(ormid, PriceData[prcCod], "cod"),
    orm_addvar_int(ormid, PriceData[prcSaury], "saury"),
    orm_addvar_int(ormid, PriceData[prcHerring], "herring"),
    orm_addvar_int(ormid, PriceData[prcSardine], "sardine"),
    orm_addvar_int(ormid, PriceData[prcSwordFish], "swordfish"),
    orm_addvar_int(ormid, PriceData[prcMackerel], "mackerel"),
    orm_addvar_int(ormid, PriceData[prcSquid], "squid"),
    orm_addvar_int(ormid, PriceData[prcTuna], "tuna"),
    orm_addvar_int(ormid, PriceData[prcGoldenCarp], "goldencarp"),
    orm_addvar_int(ormid, PriceData[prcPiranha], "piranha"),
    orm_addvar_int(ormid, PriceData[prcPomfret], "pomfret"),
    orm_addvar_int(ormid, PriceData[prcSnapper], "snapper"),
    orm_addvar_int(ormid, PriceData[prcTuskfin], "tuskfin"),
    orm_addvar_int(ormid, PriceData[prcElec], "elec"),
    orm_addvar_int(ormid, PriceData[prcRock], "rock"),
    orm_addvar_int(ormid, PriceData[prcIron], "iron"),
    orm_addvar_int(ormid, PriceData[prcNiter], "niter"),
    orm_addvar_int(ormid, PriceData[prcWood], "wood"),
    orm_addvar_int(ormid, PriceData[prcWelfare], "welfare"),
    orm_addvar_float(ormid, PriceData[prcTax], "tax"),
    orm_addvar_int(ormid, PriceData[prcLotto], "lotto");

    orm_apply_cache(ormid, 0);
	orm_setkey(ormid, "id");
	orm_load(ormid, "ApplyPriceData");
}

PUBLIC:ApplyPriceData()
{
	new string[144];
	for(new i = 0; i < sizeof(GasStationPos); i++)//GasStation
	{
	    format(string,sizeof(string),"加油站\n目前油价[每1公升"#TEXT_YELLOW"%d"#TEXT_WHITE"元]\n"#TEXT_RED"**"#TEXT_WHITE"请熄火加油"#TEXT_RED"**\n"#TEXT_BLUEGREEN"按Y可以使用贩卖机", PriceData[prcGas]);
	    GasText[i] = CreateDynamic3DTextLabel(string, COLOR_WHITE, GasStationPos[i][0], GasStationPos[i][1], GasStationPos[i][2], 60.0, _, _, 0, 0);
	    CreateGPS("加油站", GasStationPos[i][0], GasStationPos[i][1], GasStationPos[i][2]);
	}
}

PUBLIC:SavePriceData()
{
	static Hr, Min, Sec;
	gettime(Hr, Min, Sec);
	orm_save(PriceData[ORM_ID]);
	printf("已储存价格资料[%02d:%02d:%02d]", Hr, Min, Sec);
}

PUBLIC:LoadWantedRule()
{
    new ORM:ormid = WantedRule[ORM_ID] = orm_create("wantedrule", MYSQL_SESSION_A);

    orm_addvar_int(ormid, WantedRule[wrID], "id"),
    orm_addvar_int(ormid, WantedRule[wrHitMin], "Hit_Min"),
    orm_addvar_int(ormid, WantedRule[wrHitMax], "Hit_Max"),
    orm_addvar_int(ormid, WantedRule[wrHitSMin], "HitS_Min"),
    orm_addvar_int(ormid, WantedRule[wrHitSMax], "HitS_Max"),
    orm_addvar_int(ormid, WantedRule[wrKillMin], "Kill_Min"),
    orm_addvar_int(ormid, WantedRule[wrKillMax], "Kill_Max"),
    orm_addvar_int(ormid, WantedRule[wrDestroyMin], "Destroy_Min"),
    orm_addvar_int(ormid, WantedRule[wrDestroyMax], "Destroy_Max"),
    orm_addvar_int(ormid, WantedRule[wrRobMin], "Rob_Min"),
    orm_addvar_int(ormid, WantedRule[wrRobMax], "Rob_Max"),
    orm_addvar_int(ormid, WantedRule[wrStealMin], "Steal_Min"),
    orm_addvar_int(ormid, WantedRule[wrStealMax], "Steal_Max"),
    orm_addvar_int(ormid, WantedRule[wrGunMin], "Gun_Min"),
    orm_addvar_int(ormid, WantedRule[wrGunMax], "Gun_Max"),
    orm_addvar_int(ormid, WantedRule[wrHijackMin], "Hijack_Min"),
    orm_addvar_int(ormid, WantedRule[wrHijackMax], "Hijack_Max"),

    orm_apply_cache(ormid, 0);
	orm_setkey(ormid, "id");
	orm_load(ormid);
}

PUBLIC:SaveWantedRule()
{
	static Hr, Min, Sec;
	gettime(Hr, Min, Sec);
	orm_save(WantedRule[ORM_ID]);
}

PUBLIC:LoadWantedList()
{
	for(new r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = WantedList[r][ORM_ID] = orm_create("wantedlist", MYSQL_SESSION_A);

        orm_addvar_int(ormid, WantedList[r][wtID], "id"),
		orm_addvar_int(ormid, WantedList[r][wtJailTime], "JailTime"),
		orm_addvar_int(ormid, WantedList[r][wtFine], "Fine"),
		orm_addvar_int(ormid, WantedList[r][wtDisTime], "DisTime"),

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
	}
}

PUBLIC:SaveWantedList()
{
	static r;
    for(r = 0; r < 6; r++)
	{
		orm_save(WantedList[r][ORM_ID]);
	}
}

stock CreateDeal(type, id, amount, price, poster)
{
    for(new l = 0, j = MAX_DEALS; l < j; l++)
	{
		if(MarketData[l][mType] == MARKET_NONE)
		{
			new ORM:ormid = MarketData[l][ORM_ID] = orm_create("marketdata", MYSQL_SESSION_A);

	        orm_addvar_int(ormid, MarketData[l][mID], "id"),
			orm_addvar_int(ormid, MarketData[l][mType], "type"),
			orm_addvar_int(ormid, MarketData[l][mStuffID], "stuffID"),
			orm_addvar_int(ormid, MarketData[l][mAmount], "amount"),
			orm_addvar_int(ormid, MarketData[l][mPrice], "price"),
			orm_addvar_int(ormid, MarketData[l][mPoster], "poster"),
			orm_addvar_int(ormid, MarketData[l][mTime], "time");
			orm_addvar_int(ormid, MarketData[l][mSold], "sold");
			orm_addvar_int(ormid, MarketData[l][mSeller], "seller");
			orm_setkey(ormid, "id");

			MarketData[l][mType] = type;
			MarketData[l][mStuffID] = id;
			MarketData[l][mAmount] = amount;
			MarketData[l][mPrice] = price;
			MarketData[l][mPoster] = poster;
			orm_save(ormid);
			return l;
		}
	}
	return -1;
}

PUBLIC:LoadMarketData()
{
	for(new r = 0, c = cache_num_rows(); r < c; r++)
	{
		new ORM:ormid = MarketData[r][ORM_ID] = orm_create("marketdata", MYSQL_SESSION_A);

        orm_addvar_int(ormid, MarketData[r][mID], "id"),
		orm_addvar_int(ormid, MarketData[r][mType], "type"),
		orm_addvar_int(ormid, MarketData[r][mStuffID], "stuffID"),
		orm_addvar_int(ormid, MarketData[r][mAmount], "amount"),
		orm_addvar_int(ormid, MarketData[r][mPrice], "price"),
		orm_addvar_int(ormid, MarketData[r][mPoster], "poster"),
		orm_addvar_int(ormid, MarketData[r][mTime], "time");
		orm_addvar_int(ormid, MarketData[r][mSold], "sold");
		orm_addvar_int(ormid, MarketData[r][mSeller], "seller");

		orm_setkey(ormid, "id");
		orm_apply_cache(ormid, r);
	}
}

PUBLIC:SaveMarketData()
{
	static Hr, Min, Sec, r;
	gettime(Hr, Min, Sec);
    for(r = 0; r < MAX_DEALS; r++)
	{
		if(MarketData[r][mType] != MARKET_NONE)
		{
		    orm_save(MarketData[r][ORM_ID]);
		}
	}
	printf("已储存市场资料, 共 %d 条[%02d:%02d:%02d]", r, Hr, Min, Sec);
}

stock DeleteDeal(id)
{
	orm_delete(MarketData[id][ORM_ID]);
	MarketData[id][mID] =
	MarketData[id][mType] =
	MarketData[id][mStuffID] =
	MarketData[id][mAmount] =
	MarketData[id][mPrice] =
	MarketData[id][mPoster] =
	MarketData[id][mTime] =
	MarketData[id][mSeller] =
	MarketData[id][mSold] = 0;
	MarketData[id][ORM_ID] = ORM:0;
}

PUBLIC:CreateSystemDeal(type)
{
    new randid, sid, randamount, randprice;
	switch(type)
	{
		case MARKET_CAR:
		{
		    randid = random(7);
			switch(randid)
			{
			    case 0:
			    {
			        randamount = random(sizeof(LVCARSELL1DATA));
	                sid = LVCARSELL1DATA[randamount][csModel];
	                randprice = GetVehiclePrice(LVCARSELL1DATA[randamount][csModel])/100;
	            }
	            case 1:
			    {
			        randamount = random(sizeof(GROTTIDATA));
	                sid = GROTTIDATA[randamount][csModel];
	                randprice = GetVehiclePrice(GROTTIDATA[randamount][csModel])/100;
	            }
	            case 2:
			    {
			        randamount = random(sizeof(LSCARSELL1DATA));
	                sid = LSCARSELL1DATA[randamount][csModel];
	                randprice = GetVehiclePrice(LSCARSELL1DATA[randamount][csModel])/100;
	            }
	            case 3:
			    {
			        randamount = random(sizeof(WANGCARDATA));
	                sid = WANGCARDATA[randamount][csModel];
	                randprice = GetVehiclePrice(WANGCARDATA[randamount][csModel])/100;
	            }
	            case 4:
			    {
			        randamount = random(sizeof(SFBIKEDATA));
	                sid = SFBIKEDATA[randamount][csModel];
	                randprice = GetVehiclePrice(SFBIKEDATA[randamount][csModel])/100;
	            }
	            case 5:
			    {
			        randamount = random(sizeof(LSMUSCLEDATA));
	                sid = LSMUSCLEDATA[randamount][csModel];
	                randprice = GetVehiclePrice(LSMUSCLEDATA[randamount][csModel])/100;
	            }
	            case 6:
			    {
			        randamount = random(sizeof(SFCARSELL1DATA));
	                sid = SFCARSELL1DATA[randamount][csModel];
	                randprice = GetVehiclePrice(SFCARSELL1DATA[randamount][csModel])/100;
	            }
	        }
	        CreateDeal(MARKET_CAR, sid, 1, randprice, 0);
	    }
	    case MARKET_MAT:
	    {
	        randid = random(8);
		    switch(randid)
		    {
		        case 0:
		        {
					sid = 39;
					randamount = 5 + random(25);
					randprice = randamount*8 + random(200);
				}
				case 1://硝石
		        {
					sid = 88;
					randamount = 5 + random(25);
					randprice = randamount*15 + random(200);
				}
				case 2://铁矿
		        {
					sid = 87;
					randamount = 5 + random(25);
					randprice = randamount*12 + random(300);
				}
				case 3://纤维
		        {
					sid = 86;
					randamount = 5 + random(25);
					randprice = randamount*10 + random(250);
				}
				case 4://石材
		        {
					sid = 41;
					randamount = 5 + random(25);
					randprice = randamount*6 + random(150);
				}
				case 5:
		        {
					sid = 43;
					randamount = 1 + random(9);
					randprice = randamount*80 + random(50);
				}
				case 6:
		        {
					sid = 42;
					randamount = 1 + random(9);
					randprice = randamount*90 + random(50);
				}
				case 7:
		        {
					sid = 44;
					randamount = 1 + random(9);
					randprice = randamount*70 + random(50);
				}
			}
			CreateDeal(MARKET_MAT, sid, randamount, randprice, 0);
		}
		case MARKET_GUN:
		{
	        randid = random(10);
		    switch(randid)
		    {
		        case 0:
		        {
					sid = 22;
					randamount = 50 + random(150);
					randprice = 150 + randamount*2 - random(200);
				}
				case 1:
		        {
					sid = 24;
					randamount = 50 + random(150);
					randprice = 200 + randamount*3 - random(200);
				}
				case 2:
		        {
					sid = 25;
					randamount = 25 + random(75);
					randprice = 300 + randamount*4 - random(300);
				}
				case 3:
		        {
					sid = 27;
					randamount = 25 + random(75);
					randprice = 500 + randamount*4 - random(400);
				}
				case 4:
		        {
					sid = 28;
					randamount = 100 + random(300);
					randprice = 250 + randamount*3 - random(200);
				}
				case 5:
		        {
					sid = 29;
					randamount = 100 + random(300);
					randprice = 400 + randamount*3 - random(300);
				}
				case 6:
		        {
					sid = 30;
					randamount = 100 + random(600);
					randprice = 400 + randamount*3 - random(400);
				}
				case 7:
		        {
					sid = 31;
					randamount = 100 + random(600);
					randprice = 600 + randamount*3 - random(400);
				}
				case 8:
		        {
					sid = 33;
					randamount = 10 + random(40);
					randprice = 300 + randamount*5 - random(300);
				}
				case 9:
		        {
					sid = 34;
					randamount = 10 + random(40);
					randprice = 500 + randamount*5 - random(500);
				}
			}
			CreateDeal(MARKET_GUN, sid, randamount, randprice, 0);
		}
		/*case MARKET_FISH:
		{
		    randid = random(14);
		    switch(randid)
		    {
		        case 0:
		        {
					sid = 46;
					randamount = 1 + random(4);
				}
				case 1:
		        {
					sid = 47;
					randamount = 1 + random(4);
				}
				case 2:
		        {
					sid = 48;
					randamount = 1 + random(4);
				}
				case 3:
		        {
					sid = 49;
					randamount = 1 + random(4);
				}
				case 4:
		        {
					sid = 50;
					randamount = 1 + random(4);
				}
				case 5:
		        {
					sid = 51;
					randamount = 1 + random(4);
				}
				case 6:
		        {
					sid = 54;
					randamount = 1 + random(4);
				}
				case 7:
		        {
					sid = 55;
					randamount = 1 + random(4);
				}
				case 8:
		        {
					sid = 58;
					randamount = 1 + random(4);
				}
				case 9:
		        {
					sid = 59;
					randamount = 1 + random(4);
				}
				case 10:
		        {
					sid = 60;
					randamount = 1 + random(4);
				}
				case 11:
		        {
					sid = 61;
					randamount = 1 + random(4);
				}
				case 12:
		        {
					sid = 62;
					randamount = 1 + random(4);
				}
				case 13:
		        {
					sid = 63;
					randamount = 1 + random(4);
				}
			}
			CreateDeal(MARKET_FISH, sid, randamount, ItemsList_USE[sid][iuPrice]*randamount, 0);
		}
		case MARKET_PLANT:
		{
		    randid = random(12);
		    switch(randid)
		    {
		        case 0:
		        {
					sid = 71;
					randamount = 1 + random(4);
				}
				case 1:
		        {
					sid = 72;
					randamount = 1 + random(4);
				}
				case 2:
		        {
					sid = 73;
					randamount = 1 + random(4);
				}
				case 3:
		        {
					sid = 74;
					randamount = 1 + random(4);
				}
				case 4:
		        {
					sid = 75;
					randamount = 1 + random(4);
				}
				case 5:
		        {
					sid = 76;
					randamount = 1 + random(4);
				}
				case 6:
		        {
					sid = 80;
					randamount = 1 + random(4);
				}
				case 7:
		        {
					sid = 81;
					randamount = 1 + random(4);
				}
				case 8:
		        {
					sid = 82;
					randamount = 1 + random(4);
				}
				case 9:
		        {
					sid = 104;
					randamount = 1 + random(4);
				}
				case 10:
		        {
					sid = 105;
					randamount = 1 + random(4);
				}
				case 11:
		        {
					sid = 106;
					randamount = 1 + random(4);
				}
			}
			CreateDeal(MARKET_PLANT, sid, randamount, ItemsList_USE[sid][iuPrice]*randamount, 0);
		}*/
		case MARKET_HUNT:
	    {
	        randid = random(7);
		    switch(randid)
		    {
		        case 0://兽皮
		        {
					sid = 83;
					randamount = 1 + random(9);
					randprice = randamount*25 + random(200);
				}
				case 1://兽毛
		        {
					sid = 84;
					randamount = 1 + random(9);
					randprice = randamount*20 + random(150);
				}
				case 2://兽肉
		        {
					sid = 85;
					randamount = 1 + random(9);
					randprice = randamount*15 + random(100);
				}
				case 3://狐狸皮草
		        {
					sid = 127;
					randamount = 1 + random(4);
					randprice = randamount*250;
				}
				case 4://熊掌
		        {
					sid = 128;
					randamount = 1 + random(4);
					randprice = randamount*750;
				}
				case 5://狼牙
		        {
					sid = 129;
					randamount = 1 + random(4);
					randprice = randamount*500;
				}
				case 6://羊毛
		        {
					sid = 130;
					randamount = 1 + random(4);
					randprice = randamount*40;
				}
				case 7://鳄鱼皮
		        {
					sid = 158;
					randamount = 1 + random(4);
					randprice = randamount*800;
				}
			}
			CreateDeal(MARKET_HUNT, sid, randamount, randprice, 0);
		}
	}
}

PUBLIC:ResetSystemDeal()//重设并建立系统交易(能让玩家通过完成来赚钱)
{
	static r, c, l;
    for(r = 0, c = MAX_DEALS; r < c; r++)
	{
	    if(MarketData[r][mPoster] == 0 && MarketData[r][mType] != MARKET_NONE)//如果不是无效交易且张贴者为0(系统)的话就删除
	    {
	        DeleteDeal(r);
	    }
	}
	for(l = 0; l < 10; l++)
	{
	    CreateSystemDeal(MARKET_GUN);
		CreateSystemDeal(MARKET_MAT);
		//CreateSystemDeal(MARKET_PLANT);
		CreateSystemDeal(MARKET_HUNT);
	}
	for(l = 0; l < 20; l++)
	{
  		CreateSystemDeal(MARKET_FISH);
	}
    for(l = 0; l < 15; l++)
	{
		CreateSystemDeal(MARKET_CAR);
	}
	PriceData[prcCod] = random(30) + 10;
	PriceData[prcSaury] = random(20) + 20;
	PriceData[prcHerring] = random(20) + 15;
	PriceData[prcSardine] = random(15) + 5;
	PriceData[prcSwordFish] = random(30) + 20;
	PriceData[prcMackerel] = random(15) + 5;
	PriceData[prcSquid] = random(28) + 2;
	PriceData[prcTuna] = random(25) + 15;
	PriceData[prcGoldenCarp] = random(200) + 200;
	PriceData[prcPiranha] = random(200) + 150;
	PriceData[prcPomfret] = random(100) + 100;
	PriceData[prcSnapper] = random(150) + 50;
	PriceData[prcTuskfin] = random(100) + 50;
	PriceData[prcWood] = random(4) + 6;
	PriceData[prcRock] = random(3) + 3;
	PriceData[prcIron] = random(5) + 10;
	PriceData[prcNiter] = random(10) + 12;
}

stock CreateRandGoodBuyer()
{
	new i, j, id;
    for(i = 0, id = -1, j = MAX_GOODBUYERS; i < j; i++)
    {
        if(GoodBuyer[i][gbBuyerID] == 0)
        {
            id = i;
            break;
        }
    }
    if(id != -1)
    {
        GoodBuyer[id][gbBuyerID] = 1+random(sizeof(BuyersList)-1);
        switch(random(3))
        {
            case 0: GoodBuyer[id][gbGoodID] = BuyersList[GoodBuyer[id][gbBuyerID]][gbGood1];
            case 1: GoodBuyer[id][gbGoodID] = BuyersList[GoodBuyer[id][gbBuyerID]][gbGood2];
            case 2: GoodBuyer[id][gbGoodID] = BuyersList[GoodBuyer[id][gbBuyerID]][gbGood3];
        }
        GoodBuyer[id][gbGoodPrice] = ItemsList_USE[GoodBuyer[id][gbGoodID]][iuPrice];
        GoodBuyer[id][gbGoodAmount] = 250+random(150);
    }
    return id;
}

stock DeleteGoodBuyer(id)
{
    GoodBuyer[id][gbBuyerID] =
    GoodBuyer[id][gbGoodID] =
    GoodBuyer[id][gbGoodPrice] =
    GoodBuyer[id][gbGoodAmount] = 0;
    DeleteGVar("GBPlace", id);
}

PUBLIC:ResetGoodBuyer()
{
	new i, j, id;
    for(i = 0, j = MAX_GOODBUYERS; i < j; i++)
	{
	    if(GoodBuyer[i][gbBuyerID] != 0)
	    {
	        DeleteGoodBuyer(i);
	    }
	}
	for(i = 0; i < 9; i++)
	{
	    id = CreateRandGoodBuyer();
	    SetGVarInt("GBPlace", random(3), id);
	}
}

stock CreateBottleLetter(senderid, const text[])
{
	new i, j, k;
    for(i = 0, j = MAX_BLETTERS, k = -1; i < j; i++)
	{
		if(BottleLetter[i][btlCreated] == 0) {if(k == -1) k = i;}
		if(BottleLetter[i][btlOwner] == PlayerData[senderid][pID])
		{
		    BottleLetter[i][btlOwner] = PlayerData[senderid][pID];
		    BottleLetter[i][btlCreated] = 1;
		    format(BottleLetter[i][btlText], 64, "%s", text);
		    k = -1;
		    return i;
		}
	}
	if(k != -1)
	{
	    BottleLetter[k][btlCreated] = 1;
	    BottleLetter[k][btlOwner] = PlayerData[senderid][pID];
	    format(BottleLetter[k][btlText], 64, "%s", text);
	}
	return k;
}

stock DeleteBottleLetter(id)
{
    BottleLetter[id][btlCreated] = 0;
}

PUBLIC:StopTalk(playerid)
{
    ClearAnimationsEx(playerid);
}

stock CreateDropItem(type, id, amount, Float:ix, Float:iy, Float:iz, world, distime=600, resource=0, picktime=0, mwid=0, forgang=GANG_ID_NONE)
{
	static pickupid, i, j;
	for(i = 0, j = MAX_DROPS; i < j; i++)
	{
	    if(DropItem[i][idCreated] == 1) continue;
	    switch(type)
	    {
	        case ITEM_USE:
			{
				if(ItemsList_USE[id][iuModel] == 0) pickupid = 19198;
				else pickupid = ItemsList_USE[id][iuModel];
			}
			case ITEM_EQ:
			{
				if(ItemsList_EQ[id][ieqModel] == 0) pickupid = 19198;
				else pickupid = ItemsList_EQ[id][ieqModel];
			}
			case ITEM_WEAPON: pickupid = WeaponsList[id][wModel];
			case ITEM_SKILLPT: pickupid = 1239;
			case ITEM_CASH:
			{
				if(amount < 5000) pickupid = 1212;
				else pickupid = 1550;
			}
			case ITEM_MW:
			{
				if(ItemsList_USE[id][iuModel] == 0) pickupid = 19198;
				else pickupid = ItemsList_USE[id][iuModel];
			}
			case ITEM_HP: pickupid = 1240;
			case ITEM_AR: pickupid = 1242;
            case ITEM_BOMB, ITEM_BURY: pickupid = 1007;
            case ITEM_MS: pickupid = 1279;
		}
		DropItem[i][idCreated] = 1;
		DropItem[i][idType] = type;
		if(amount < 0) amount = 0;
		DropItem[i][idAmount] = amount;
		DropItem[i][idItemID] = id;
		DropItem[i][idX] = ix + (0.1*random(20)) - (0.1*random(20));
		DropItem[i][idY] = iy + (0.1*random(20)) - (0.1*random(20));
		DropItem[i][idZ] = iz;
		DropItem[i][idWorld] = world;
		DropItem[i][idPickup] = CreateDynamicPickup(pickupid, 1, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ], DropItem[i][idWorld]);
		DropItem[i][idRes] = resource;
		DropItem[i][idMatWar] = mwid;
		DropItem[i][idText] = CreateDynamic3DTextLabel(" ", COLOR_WHITE, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ], 5.0, _, _, _, DropItem[i][idWorld]);
		if(picktime > 0)
		{
		    DropItem[i][idPickable] = 0;
			SetTimerEx("DropPickable", 1000*picktime, false, "d", i);
		}
		else DropPickable(i);

		if(distime > 0)
		{
		    SetGVarInt("IDDis", distime, i);
		}

		if(forgang == GANG_ID_NONE)
		{
		    DeleteGVar("IDFGang", i);
		    DeleteGVar("IDFGangID", i);
		}
		else
		{
		    SetGVarInt("IDFGang", 1, i);
		    SetGVarInt("IDFGangID", forgang, i);
		}
		return i;
	}
	return -1;
}

PUBLIC:DropPickable(id)
{
	new string[144];
    if(id > -1 && DropItem[id][idCreated] == 1)
	{
	    switch(DropItem[id][idType])
		{
			case ITEM_USE:
			{
				format(string, sizeof(string), ""#TEXT_LIGHTYELLOW"道具: "#TEXT_WHITE"%s"#TEXT_LIGHTYELLOW"\n数量: "#TEXT_WHITE"%d"#TEXT_LIGHTYELLOW"\n按F键捡拾",
				ItemsList_USE[DropItem[id][idItemID]][iuName], DropItem[id][idAmount]);
			}
			case ITEM_EQ:
			{
				format(string, sizeof(string), ""#TEXT_LIGHTYELLOW"道具: "#TEXT_WHITE"%s"#TEXT_LIGHTYELLOW"\n数量: "#TEXT_WHITE"1"#TEXT_LIGHTYELLOW"\n按F键捡拾",
				ItemsList_EQ[DropItem[id][idItemID]][ieqName]);
			}
			case ITEM_WEAPON:
			{
				format(string, sizeof(string), ""#TEXT_ORANGE"武器: "#TEXT_WHITE"%s"#TEXT_LIGHTYELLOW"\n弹药: "#TEXT_WHITE"%d"#TEXT_LIGHTYELLOW"\n按F键捡拾",
				WeaponsList[DropItem[id][idItemID]][wName], DropItem[id][idAmount]);
			}
			case ITEM_SKILLPT:
			{
				format(string, sizeof(string), ""#TEXT_SKYBLUE"技能点: "#TEXT_WHITE"%s"#TEXT_LIGHTYELLOW"\n数量: "#TEXT_WHITE"%d"#TEXT_LIGHTYELLOW"\n按F键捡拾",
				PtsList[DropItem[id][idItemID]][spName], DropItem[id][idAmount]);
			}
			case ITEM_CASH:
			{
				format(string, sizeof(string), ""#TEXT_FADEGREEN"现金: "#TEXT_FADEGREEN"$%d"#TEXT_LIGHTYELLOW"\n按F键捡拾", DropItem[id][idAmount]);
			}
			case ITEM_MW:
			{
				format(string, sizeof(string), ""#TEXT_LIGHTYELLOW"战争货物: "#TEXT_WHITE"%s"#TEXT_LIGHTYELLOW"\n数量: "#TEXT_WHITE"%d"#TEXT_LIGHTYELLOW"\n按F键捡拾",
				ItemsList_USE[DropItem[id][idItemID]][iuName], DropItem[id][idAmount]);
			}
			case ITEM_HP:
			{
				format(string, sizeof(string), ""#TEXT_FADEGREEN"补血包"#TEXT_LIGHTYELLOW"\n按F键捡拾");
			}
			case ITEM_AR:
			{
				format(string, sizeof(string), ""#TEXT_WHITE"护甲"#TEXT_LIGHTYELLOW"\n按F键捡拾");
			}
			/*case ITEM_BOMB:
			{
				if(GetGVarInt("IDFGang", id) == 1 && GetGVarInt("IDFGangID", id) != PlayerData[playerid][pGang]) break;
				format(string, sizeof(string), ""#TEXT_FADERED"地雷!!");
				SetTimerEx("LandMineExplode", 1500, false, "i", id);
			}*/
			case ITEM_MS:
			{
				format(string, sizeof(string), ""#TEXT_YELLOW"任务包裹"#TEXT_LIGHTYELLOW"\n按F键捡拾");
			}
			case ITEM_BURY:
			{
				format(string, sizeof(string), ""#TEXT_YELLOW"?.!");
			}
		}
		UpdateDynamic3DTextLabelText(DropItem[id][idText], COLOR_WHITE, string);
		DropItem[id][idPickable] = 1;
	}
}

PUBLIC:DeleteDropItem(id)
{
	if(id > -1 && DropItem[id][idCreated] == 1)
	{
	    DestroyDynamicPickup(DropItem[id][idPickup]);
	    DestroyDynamic3DTextLabel(DropItem[id][idText]);
	    DropItem[id][idPickup] =
		DropItem[id][idCreated] =
		DropItem[id][idType] =
		DropItem[id][idAmount] =
		DropItem[id][idItemID] =
		DropItem[id][idRes] =
		DropItem[id][idPickable] =
		DropItem[id][idWorld] = 0;
		DropItem[id][idX] =
		DropItem[id][idY] =
		DropItem[id][idZ] = 0.0;
		DeleteGVar("IDFGang", id);
		DeleteGVar("IDFGangID", id);
		DeleteGVar("Treasure", id);
		DeleteGVar("IDDis", id);
		ForEachPlayer(i)
		{
		    if(GetGVarInt("PickedDropID", i) == id)
			{
				DeleteGVar("PickedDropID", i);
			}
		}
	}
}

stock CreateAirDrop(type, id, amount, Float:tx, Float:ty, Float:tz, world, Float:speed=5.0, spawndrop=1, matwar=0)
{
	static Float:toz;//目标地面Z坐标
	for(new i = 0; i < MAX_AIRDROPS; i++)
	{
	    if(AirDrop[i][edCreated] == 1) continue;
		AirDrop[i][edCreated] = 1;
		AirDrop[i][edType] = type;
		AirDrop[i][edAmount] = amount;
		AirDrop[i][edItemID] = id;
		AirDrop[i][edX] = tx;
		AirDrop[i][edY] = ty;
		CA_FindZ_For2DCoord(tx, ty, toz);
		AirDrop[i][edZ] = toz+0.5;
		AirDrop[i][edSpeed] = speed;
		AirDrop[i][edWorld] = world;
		AirDrop[i][edSpawnDrop] = spawndrop;
		AirDrop[i][edMatWar] = matwar;
		if(type == ITEM_BOMB)//轰炸弹
		{
		    AirDrop[i][edObjectID] = CreateDynamicObject(1636, tx, ty, tz, 0.0, 0.0, 0.0);
			MoveDynamicObject(AirDrop[i][edObjectID], tx, ty, toz+0.5, speed);
		}
		else
		{
			AirDrop[i][edObjectID] = CreateDynamicObject(18849, tx, ty, tz, 0.0, 0.0, 0.0);
			MoveDynamicObject(AirDrop[i][edObjectID], tx, ty, toz+7.0, speed);
		}
		return i;
	}
	return -1;
}

PUBLIC:DeleteAirDrop(id)
{
	if(id > -1 && AirDrop[id][edCreated] == 1)
	{
	    DestroyDynamicObject(AirDrop[id][edObjectID]);
	    AirDrop[id][edCreated] =
		AirDrop[id][edType] =
		AirDrop[id][edAmount] =
		AirDrop[id][edItemID] =
		AirDrop[id][edWorld] =
		AirDrop[id][edObjectID] =
		AirDrop[id][edSpawnDrop] = 0;
		AirDrop[id][edSpeed] =
		AirDrop[id][edX] =
		AirDrop[id][edY] =
		AirDrop[id][edZ] = 0.0;
	}
}

stock StopDigging(playerid)
{
	static string[144], playername[MAX_PLAYER_NAME];
    DeleteGVar("Digging", playerid);
    DeleteGVar("DigType", playerid);
	//TogglePlayerControllableEx(playerid, 1);
	ClearAnimationsEx(playerid);
	RemovePlayerAttachedObject(playerid, 7);
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	format(string, sizeof(string), "** %s 收起了工具 **", playername);
	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
	Streamer_ToggleIdleUpdate(playerid, 0);
}

PUBLIC:Dig(playerid)
{
	new rand, Float:px, Float:py, Float:pz, pworld, result, string[145];
	rand = random(50);
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
	{
	    StopDigging(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你不在步行状态");
        return;
	}
	if(PlayerData[playerid][pStamina] < 2.0)
	{
	    StopDigging(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你因为你体力不足停止了挖采");
        return;
	}
	GetPlayerPos(playerid, px, py, pz);
	pworld = GetPlayerVirtualWorld(playerid);
	if(GetGVarInt("DigType", playerid) == 1)
	{
	    PlayerData[playerid][pStamina] -= 2.0;
	    SetGVarInt("Digging", 4, playerid);
        if(IsPlayerInMineZone(playerid))
        {
		    switch(rand)
		    {
		        case 6 .. 20:
				{
				    if(ResourceData[rRock] > 0)
				    {
						CreateDropItem(ITEM_USE, 41, 1, px, py, pz, pworld, 900, 0, 5);
						SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了石材...");
						ResourceData[rRock] --;
						result = 1;
					}
				}
				case 21 .. 33:
				{
        			if(ResourceData[rIron] > 0)
				    {
						CreateDropItem(ITEM_USE, 87, 1, px, py, pz, pworld, 900, 0, 5);
						SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了铁矿...");
						ResourceData[rIron] --;
						result = 1;
					}
				}
				case 34 .. 49:
				{
				    if(ResourceData[rNiter] > 0)
				    {
						CreateDropItem(ITEM_USE, 88, 1, px, py, pz, pworld, 900, 0, 5);
						SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了硝石...");
						ResourceData[rNiter] --;
						result = 1;
					}
				}
			}
		}
		else if(IsPlayerInForestZone(playerid))
		{
			switch(rand)
		    {
		        case 0 .. 20:
				{
					CreateDropItem(ITEM_USE, 324, 1, px, py, pz, pworld, 300, 0, 5);
					SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了黏土...");
					result = 1;
				}
			}
		}
		if(result == 0)
		{
		    for(new i = 0, j = MAX_DROPS; i < j ; i++)
		    {
		        if(DropItem[i][idCreated] == 0) continue;
		        if(DropItem[i][idType] == ITEM_BURY && DropItem[i][idWorld] == pworld)
				{
		        	if(GetPlayerDistanceFromPoint(playerid, DropItem[i][idX], DropItem[i][idY], DropItem[i][idZ]) < 15.0)
		        	{
		        	    CreateDropItem(ITEM_USE, DropItem[i][idItemID], DropItem[i][idAmount], px, py, pz, pworld);
		        	    format(string, sizeof(string), "** 发掘: 挖到了%s...", ItemsList_USE[DropItem[i][idItemID]][iuName]);
		        	    SendClientMessage(playerid, COLOR_YELLOW, string);
		        	    //if(GetGVarInt("Treasure", i) == TREA_BURY) SetGVarInt("Treasure", TREA_BURY, found);
               			DeleteDropItem(i);
						result = 1;
						break;
		        	}
		        }
		    }
		}
		if(result == 0) { SendClientMessage(playerid, COLOR_WHITE, "目前还未挖到东西,继续挖掘中..."); }
	}
	else if(GetGVarInt("DigType", playerid) == 2)
	{
	    PlayerData[playerid][pStamina] -= 2.0;
	    SetGVarInt("Digging", 2, playerid);
	    if(IsPlayerInMineZone(playerid))
        {
		    switch(rand)
		    {
		        case 16 .. 35:
				{
					if(ResourceData[rRock] > 0)
				    {
						CreateDropItem(ITEM_USE, 41, 1, px, py, pz, pworld, 900, 0, 5);
						SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了石材...");
						ResourceData[rRock] --;
						result = 1;

					}
				}
				case 36 .. 49:
				{
					if(ResourceData[rIron] > 0)
				    {
						CreateDropItem(ITEM_USE, 87, 1, px, py, pz, pworld, 900, 0, 5);
						SendClientMessage(playerid, COLOR_WHITE, "发掘: 挖到了铁矿...");
						ResourceData[rIron] --;
						result = 1;
					}
				}
			}
		}
		if(result == 0) { SendClientMessage(playerid, COLOR_WHITE, "目前还未挖到东西,继续挖掘中..."); }
	}
}

stock StopHewing(playerid)
{
	static string[144], playername[MAX_PLAYER_NAME];
	if(GetGVarInt("Hewing", playerid) > 0)
	{
	    DeleteGVar("Hewing", playerid);
	    DeleteGVar("HewID", playerid);
		//TogglePlayerControllableEx(playerid, 1);
		ClearAnimationsEx(playerid);
		RemovePlayerAttachedObject(playerid, 7);
		GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		format(string, sizeof(string), "** %s 收起了工具 **", playername);
		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
		DestroyDynamic3DTextLabel(TreeText[playerid]);
		Streamer_ToggleIdleUpdate(playerid, 0);
	}
}

PUBLIC:Hew(playerid)
{
	static treeid, Float:px, Float:py, Float:pz, pworld;
	treeid = GetGVarInt("HewID", playerid);
	if(PlayerData[playerid][pStamina] < 1.0)
	{
	    StopHewing(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你因为你体力不足停止了砍伐");
        return;
	}
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
	{
	    StopHewing(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你不在步行状态");
        return;
	}
	if(GetPlayerDistanceFromPointEx(playerid, LumberTree[treeid][trX], LumberTree[treeid][trY], LumberTree[treeid][trZ]) > 4.0)
	{
	    StopHewing(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "** 你离正在砍伐的树太远了,无法继续砍伐");
        return;
	}

	GetPlayerPos(playerid, px, py, pz);
	pworld = GetPlayerVirtualWorld(playerid);
	CreateDropItem(ITEM_USE, 39, 1, px, py, pz, pworld, 600, 0, 5);
	SendClientMessage(playerid, COLOR_WHITE, "伐木: 砍伐到了木头...");

	PlayerData[playerid][pStamina] -= 0.5;
	SetGVarInt("Hewing", 2, playerid);
	LumberTree[treeid][trWood] --;
	if(LumberTree[treeid][trWood] < 1 && LumberTree[treeid][trCreated] == 1)
	{
		SendClientMessage(playerid, COLOR_WHITE, "你砍倒了这棵树");
		LumberTreeDown(treeid);
		StopHewing(playerid);
		GivePlayerExp(playerid, 50, EXP_HEW);
		RecordData[playerid][prLumber] ++;
		return;
	}
}

PUBLIC:DeleteVehicle(vehicleid)
{
	if(GetVehicleModel(vehicleid) > 0)
	{
		DeleteAllVehicleItems(vehicleid);
		RemoveAllVehicleAttachment(vehicleid);
	    orm_delete(VehData[vehicleid][ORM_ID]);
	    VehData[vehicleid] = EMPTY_VEHDATA;
	    DestroyVehicle(vehicleid);
	}
	DeleteGVar("VehMW", vehicleid);
	DeleteGVar("VehMWLoaded", vehicleid);
	DeleteGVar("VehMission", vehicleid);
	DeleteGVar("TempRV", vehicleid);
	DeleteGVar("VUnStreamDel", vehicleid);
 	DeleteGVar("CSShop", vehicleid);
	DeleteGVar("CSBuyer", vehicleid);
	DeleteGVar("CSSpawn", vehicleid);
	DeleteGVar("SpeVeh", vehicleid);
	DeleteGVar("SpeVehA", vehicleid);
	DeleteGVar("vArenaP", vehicleid);
}

PUBLIC:FixVeh(playerid, fixveh)
{
	new Float:vhp, string[144], rand, Float:vx, Float:vy, Float:vz;
	DeleteGVar("FixVeh", playerid);
	if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT && GetGVarInt("Spawned", playerid) == 1)
	{
	    GetVehiclePos(fixveh, vx, vy, vz);
	    if(GetPlayerDistanceFromPoint(playerid, vx, vy, vz) > 8.0) {SendClientMessage(playerid, COLOR_WHITE, "你离车太远了,修车失败"); return; }
		GetVehicleHealth(fixveh, vhp);
	    switch(SkillData[playerid][psFixVeh])
		{
			case 1:
			{
				vhp = vhp + 100.0;
				format(string, sizeof(string), "** "TEXT_WHITE"你耗费了"TEXT_BLUEGREEN"5"TEXT_WHITE"点体力修理了这台"#TEXT_YELLOW" %s "TEXT_WHITE",让这台车恢复了100点生命", GetVehicleName(GetVehicleModel(fixveh)));
			}
			case 2:
			{
				vhp = vhp + 200.0;
				format(string, sizeof(string), "** "TEXT_WHITE"你耗费了"TEXT_BLUEGREEN"5"TEXT_WHITE"点体力修理了这台"#TEXT_YELLOW" %s "TEXT_WHITE",让这台车恢复了200点生命", GetVehicleName(GetVehicleModel(fixveh)));
			}
			case 3:
			{
				vhp = vhp + 300.0;
				format(string, sizeof(string), "** "TEXT_WHITE"你耗费了"TEXT_BLUEGREEN"5"TEXT_WHITE"点体力修理了这台"#TEXT_YELLOW" %s "TEXT_WHITE",让这台车恢复了300点生命", GetVehicleName(GetVehicleModel(fixveh)));
			}
			case 4:
			{
			    vhp = vhp + 500.0;
				format(string, sizeof(string), "** "TEXT_WHITE"你耗费了"TEXT_BLUEGREEN"5"TEXT_WHITE"点体力修理了这台"#TEXT_YELLOW" %s "TEXT_WHITE",让这台车恢复了500点生命", GetVehicleName(GetVehicleModel(fixveh)));
			}
			case 5:
			{
				vhp = vhp + 1000.0;
				format(string, sizeof(string), "** "TEXT_WHITE"你耗费了"TEXT_BLUEGREEN"5"TEXT_WHITE"点体力修理了这台"#TEXT_YELLOW" %s "TEXT_WHITE",让这台车恢复了1000点生命", GetVehicleName(GetVehicleModel(fixveh)));
			}
		}
	 	SetVehicleHealth(fixveh, vhp);
	  	if(vhp >= 1000.0 + VehData[fixveh][vArmour])
		{
			RepairVehicle(fixveh);
			SetVehicleHealth(fixveh, 1000.0 + VehData[fixveh][vArmour]);
		}
		SendClientMessage(playerid, COLOR_YELLOW, string);
	 	rand = random(3);
		if(rand == 0)
		{
		    GivePlayerPoint(playerid, 2, 4);
		    format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"机械知识"#TEXT_LIGHTBLUE"4点");
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "你中断修车的进行了");
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
	ClearAnimationsEx(playerid);
}

PUBLIC:StopAlarm(vehicleid)
{
    static engine, lights, alarm, doors, bonnet, boot, objective;
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	if(alarm == 1)
	{
		SetVehicleParamsEx(vehicleid, engine, lights, 0, doors, bonnet, boot, objective);
	}
}

PUBLIC:OnPlayerActivateSkill(playerid, activated)
{
	static string[144], playername[MAX_PLAYER_NAME];
	if(GetGVarInt("pArena", playerid) == ARENA_PLAYER1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 在这里禁止使用技能");
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	switch(activated)
	{
	    case 1 .. 3:
	    {
	        if(!PlayerHaveItem(playerid, 2, 51)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须有工具箱");
	    	format(string, sizeof(string), "** %s 拿出了工具箱 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	        ShowPlayerDialog(playerid, DIALOG_TOOLBOX, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"工具箱", "选择要使用的工具\n修车工具\n橇车锁工具\n短路点火工具\n解门锁工具", "选择", "关闭");
	    }
	    case 4:
	    {
	        if(SkillData[playerid][psSneak] == 0)
			{
				return SendClientMessage(playerid, COLOR_WHITE, "错误: 技能等级不足");
			}
         	if(LimitData[playerid][plCDSneak] > 0)
			{
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDSneak]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}
         	ForEachPlayer(i)
	        {
				ShowPlayerNameTagForPlayer(i, playerid, false);
			}
			SetPlayerSkin_Fix(playerid, 25039);
			format(string, sizeof(string), "** %s 发动了潜行技能 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    SetGVarInt("Hiding", 1, playerid);
			switch(SkillData[playerid][psSneak])
			{
				case 2:
			    {
					SetPlayerTimerEx(playerid, "UnHide", 10000, 0, "i", playerid);
					LimitData[playerid][plCDSneak] = 7200;
					format(string, sizeof(string), ""#TEXT_WHITE"你发动了潜行技能,你将维持隐形状态10秒");
				}
				case 3:
			    {
					SetPlayerTimerEx(playerid, "UnHide", 15000, 0, "i", playerid);
					LimitData[playerid][plCDSneak] = 3600;
					format(string, sizeof(string), ""#TEXT_WHITE"你发动了潜行技能,你将维持隐形状态15秒");
				}
				default:
			    {
					SetPlayerTimerEx(playerid, "UnHide", 5000, 0, "i", playerid);
					LimitData[playerid][plCDSneak] = 7200;
					format(string, sizeof(string), ""#TEXT_WHITE"你发动了潜行技能,你将维持隐形状态5秒");
				}
			}
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
		case 5:
		{
		    if(SkillData[playerid][psHeal] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 技能等级不足");}
			if(PlayerData[playerid][pStamina] < 10.0){ return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
			if(GetGVarInt("Healing", playerid) > 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 你目前正在治疗别人");}
			ShowPlayerDialog(playerid, DIALOG_HEAL, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"治疗", ""#TEXT_WHITE"请输入要治疗的玩家名称或ID", "确认", "关闭");
		}
		case 6:
		{
		    if(SkillData[playerid][psSearch] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 技能等级不足");}
			if(PlayerData[playerid][pStamina] < 2.0){ return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");}
			ShowPlayerDialog(playerid, DIALOG_SEARCH, DIALOG_STYLE_LIST, ""#TEXT_WHITE"搜索", ""#TEXT_WHITE"寻找玩家\n寻找载具", "选择", "关闭");
		}
		case 7:
		{
		    if(SkillData[playerid][psObserve] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 技能等级不足");}
			ShowPlayerDialog(playerid, DIALOG_OBSERVE, DIALOG_STYLE_LIST, ""#TEXT_WHITE"观察", ""#TEXT_WHITE"观察掉落物\n观察可采资源\n观察野生动物\n观察鱼类资源\n观察地盘", "选择", "关闭");
		}
		case 8:
		{
		    if(SkillData[playerid][psTimeStop] == 0){return SendClientMessage(playerid, COLOR_WHITE, "错误: 技能等级不足");}
            if(LimitData[playerid][plCDTimeStop] > 0)
            {
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDTimeStop]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}
            static Float:px, Float:py, Float:pz;
            GetPlayerPos(playerid, px, py, pz);
	        ForEachPlayer(i)
	        {
				if(GetPlayerDistanceFromPointEx(i, px, py, pz) < 20.0 && i != playerid)
				{
				    TogglePlayerControllableEx(i, 0);
				    SetGVarInt("SkillFrozen", 1, i);
				    SetPlayerTimerEx(playerid, "UnSkillFrozen", 5000, 0, "i", i);
				    format(string, sizeof(string), ""#TEXT_WHITE"你中了%s的THE WORLD!,五秒内无法行动", playername);
					SendClientMessage(playerid, COLOR_WHITE, string);
					UpdateDynamic3DTextLabelText(PlayerStatus[i], COLOR_YELLOW, "被定身");
				}
			}
			format(string, sizeof(string), "** %s(%d) 大叫: "#TEXT_LIGHTYELLOW"THE WORLD!", playername, playerid);
			SendRangeMessage(40.0, playerid, string, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_WHITE, COLOR_GRAD1);
            switch(SkillData[playerid][psTimeStop])
			{
			    case 1: LimitData[playerid][plCDTimeStop] = 129600;
				case 2: LimitData[playerid][plCDTimeStop] = 108000;
				case 3: LimitData[playerid][plCDTimeStop] = 86400;
				case 4: LimitData[playerid][plCDTimeStop] = 64800;
				case 5: LimitData[playerid][plCDTimeStop] = 43200;
			}
			format(string, sizeof(string), ""#TEXT_WHITE"你发动了THE WORLD!,冻结了身边所有人,期间你对目标造成的伤害将在效果结束后一次造成");
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
		case 9:
		{
      		PlayerAttackTurf(playerid);
		}
		case 10:
		{
		    static gangid, Float:px, Float:py, Float:pz, pickupid;
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(PlayerData[playerid][pID] != GangData[gangid][gBoss]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    if(GangData[gangid][gType] != GANG_BIKER) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法使用这个类型的技能");
      		if(LimitData[playerid][plCDCaptain] > 0)
      		{
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDCaptain]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}
      		if(PlayerData[playerid][pStamina] < 10.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
      		if(!IsAMotorBike(GetPlayerVehicleID(playerid))) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在机车上");

            GetPlayerPos(playerid, px, py, pz);
            GetXYInFrontOfPlayer(playerid, px, py, 8.0);
      		PlayerData[playerid][pStamina] -= 10.0;
      		LimitData[playerid][plCDCaptain] = 20;
      		format(string, sizeof(string), "** 首领%s发动了开路技能,进入"#TEXT_BLUE"开路蓝圈"#TEXT_FADEYELLOW"可以恢复生命与修复机车", playername);
		    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADEYELLOW, string);
      		pickupid = CreateDynamicPickup(19947, 14, px, py, pz, GetPlayerVirtualWorld(playerid));
      		SetGVarInt("MCCP", 1, pickupid);
      		SetGVarInt("MCID", PlayerData[playerid][pGang], pickupid);
      		SetTimerEx("DestroyMCCP", 15000, 0, "d", pickupid);
		}
		case 11:
		{
		    static gangid;
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(PlayerData[playerid][pID] != GangData[gangid][gBoss]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    if(GangData[gangid][gType] != GANG_FAMILY) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法使用这个类型的技能");
      		if(PlayerData[playerid][pStamina] < 5.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
      		if(GetGVarInt("GFBuff", playerid) > 0)
      		{
      		    DeleteGVar("GFBuff", playerid);
				SendClientMessage(playerid, COLOR_WHITE, "你停止发动了教父主动技");
      		}
      		else
			{
			    SetGVarInt("GFBuff", 10, playerid);
			    format(string, sizeof(string), "** 首领%s发动了教父技能,只要与首领保持在一定的范围内每10秒就会恢复生命", playername);
		    	SendGangMessage(PlayerData[playerid][pGang], COLOR_FADEYELLOW, string);
		    }
      	}
      	case 12:
		{
		    static gangid, gzid;
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    gangid = GangSqlIDToID(PlayerData[playerid][pGang]),
			gzid = GetPlayerGangZone(playerid);
		    if(PlayerData[playerid][pID] != GangData[gangid][gBoss]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    if(GangData[gangid][gType] != GANG_OG) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法使用这个类型的技能");
		    if(GangZone[gzid][gzSafezone]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这是安全区");
      		if(LimitData[playerid][plCDOG] > 0)
      		{
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDOG]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}
      		if(PlayerData[playerid][pStamina] < 25.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
      		if(gzid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在属于自己帮会的地盘内");
      		if(GangZone[gzid][gzOwner] != PlayerData[playerid][pGang]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不在属于自己帮会的地盘内");

      		PlayerData[playerid][pStamina] -= 25.0;
      		LimitData[playerid][plCDOG] = 30;
			SendClientMessage(playerid, COLOR_WHITE, "你消耗了25点体力发动了OG主动技,与你待在同一个地盘的成员都会立即恢复50点生命");
      		ForEachPlayer(i)
      		{
      		    if(PlayerData[playerid][pGang] != PlayerData[i][pGang]) continue;
      		    if(GetPlayerGangZone(i) == gzid)
      		    {
      		        GiveHealth(i, 50.0);
					SendClientMessage(i, COLOR_WHITE, "因为首领使用了首领技能,与他在同一个地盘的你恢复了50点生命");
      		    }
      		}
      		format(string, sizeof(string), "** %s 激励了他的帮会成员,使其恢复生命 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
      	}
      	case 13:
		{
		    static gangid;
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
		    if(PlayerData[playerid][pID] != GangData[gangid][gBoss]) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会首领");
		    if(GangData[gangid][gType] != GANG_RELIGION) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的帮会无法使用这个类型的技能");
      		if(LimitData[playerid][plCDBless] > 0)
      		{
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDBless]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}
      		if(PlayerData[playerid][pStamina] < 25.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");

      		PlayerData[playerid][pStamina] -= 25.0;
      		LimitData[playerid][plCDBless] = 120;
      		SetGVarInt("BlessedGang", 1, PlayerData[playerid][pGang]);
      		SetTimerEx("GangBlessEnd", 20000, 0, "d", PlayerData[playerid][pGang]);
			SendClientMessage(playerid, COLOR_WHITE, "你消耗了25点体力发动了神主动技,在30秒内所有死亡的成员会在死后于原地复活");
      		format(string, sizeof(string), "** 首领%s发动了神技能,在30秒内所有死亡的成员会在死后于原地复活", playername);
		    SendGangMessage(PlayerData[playerid][pGang], COLOR_FADEYELLOW, string);
		    format(string, sizeof(string), "** %s 正在施法展现神 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
      	}
		case 14:
		{
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是帮会成员");
		    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态");
		    if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有手绑人");
		    if(PlayerData[playerid][pStamina] < 5.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
		    if(GetGVarInt("TiePrep", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经发动这个技能了");
		    SetGVarInt("TiePrep", 15, playerid);
		    PlayerData[playerid][pStamina] -= 5.0;
		    SendClientMessage(playerid, COLOR_WHITE, "你发动了束缚技能,下一个被你用拳头攻击到的玩家将会被你绑住双手");
		    format(string, sizeof(string), "** %s 拿出了绳子准备用来绑人的样子 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		}
		case 15:
		{
		    if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是警察");
		    if(PlayerData[playerid][pStamina] < 5.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");
		    static i, j, l, liststr[1024];
		    PlayerData[playerid][pStamina] -= 5.0;
		    format(string, sizeof(string), "** %s 正在调查这附近的犯罪痕迹 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			SendClientMessage(playerid, COLOR_WHITE, "你消耗了5点体力开始调查这里的任何犯罪痕迹,如果有发现任何线索,你可以选择将其通报给同仁");

			liststr[0] = EOS, l = 0;
			ForEachPlayer(p)
			{
				for(i = 0, j = MAX_CRIMES; i < j; i++)
				{
					if(Crime[p][i][crType] == CRIME_NONE) { continue;}
					if(GetPlayerDistanceFromPointEx(playerid, Crime[p][i][crX], Crime[p][i][crY], Crime[p][i][crZ]) < 60.0)
					{
						format(liststr, sizeof(liststr), "%s%s\t%s\t%s\n", liststr, PlayerData[p][pName], GetCrimeVictimName(p, i), GetCrimeTypeName(Crime[p][i][crType]));
						SetGVarInt("DListID", p, l*1000+playerid);
						SetGVarInt("DListID2", i, l*1000+playerid);
						l++;
					}
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"调查", ""#TEXT_WHITE"附近没有找到任何犯罪线索", "确定", "");}
			format(liststr, sizeof(liststr), "加害者\t受害者\t行为\n%s", liststr);
			ShowPlayerDialog(playerid, DIALOG_DETECT, DIALOG_STYLE_TABLIST_HEADERS, "调查", liststr, "通报", "关闭");
		}
		case 16:
		{
		    if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是警察");
		    if(GetGVarInt("Tazzing", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经装填了电击子弹");
		    if(LimitData[playerid][plCDTazz] > 0)
		    {
			    format(string, sizeof(string), ""#TEXT_WHITE"错误: 技能冷却中,剩余%d秒", LimitData[playerid][plCDTazz]);
			 	return SendClientMessage(playerid, COLOR_WHITE, string);
			}

		    if(PlayerHaveWeapon(playerid, 22) > 0) GivePlayerWeapon(playerid, 22, 1);
			else if(PlayerHaveWeapon(playerid, 23) > 0) GivePlayerWeapon(playerid, 23, 1);
			else if(PlayerHaveWeapon(playerid, 24) > 0) GivePlayerWeapon(playerid, 24, 1);
			else return SendClientMessage(playerid, COLOR_WHITE, "错误: 你身上没有手枪可以装填电击子弹");

		    format(string, sizeof(string), "** %s 装填了一发电击子弹 **", playername);
		    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		    {
			    ApplyAnimationEx(playerid, "COLT45", "COLT45_RELOAD", 4.1, 0, 0, 0, 0, 0, 0);
			}
			SendClientMessage(playerid, COLOR_WHITE, "你使用了电击技能,下一发使用手枪攻击到的目标将会被电击");
		    SetGVarInt("Tazzing", 1, playerid);
		}
		case 17:
		{
		    if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是警察");
		    if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在执勤中才能使用这个技能");
		    if(PlayerData[playerid][pStamina] < 50.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");

			new ramid = GetNearestEstate(playerid, 10.0);
			if(ramid == -1) return SendClientMessage(playerid, COLOR_WHITE, "错误: 附近没有任何地产");
			if(GetGVarInt("ERammed", ramid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "这个地产的门已经被破坏过了");

			PlayerData[playerid][pStamina] -= 50.0;
			SetGVarInt("ERammed", 1, ramid);
			ApplyAnimationEx(playerid, "POLICE", "DOOR_KICK", 4.1, 0, 0, 0, 0, 0, 0);
			SetTimerEx("UnRam", 120000, 0, "i", ramid);
			format(string, sizeof(string), "** %s 破坏了这个地产的门 **", playername);
		    SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    format(string, sizeof(string), ""#TEXT_WHITE"你消耗50点体力破坏了地产 %s 的门,接下来120秒内所有人都可以自由进入里面", EstateData[ramid][eName]);
		    SendClientMessage(playerid, COLOR_WHITE, string);
		}
		case 18:
		{
			static stingerid, Float:px, Float:py, Float:pz, Float:pangle, world, vehicleid;
		    if(GetGVarInt("UsingStinger", playerid) == 1)
		    {
		        stingerid = GetGVarInt("StingerID", playerid);
		        if(GetPlayerDistanceFromPointEx(playerid, Stinger[stingerid][stgX], Stinger[stingerid][stgY], Stinger[stingerid][stgZ]) > 10.0)
		        {
					SendClientMessage(playerid, COLOR_WHITE, "你已经先放置了一个钉刺,你必须前往收回才能再放置新的,已为你标记"#TEXT_VIOLET"钉刺"#TEXT_WHITE"的位置");
		            SetPlayerGPS(playerid, Stinger[stingerid][stgX], Stinger[stingerid][stgY], Stinger[stingerid][stgZ]);
		            return 1;
		        }
		        DestroyStinger(stingerid);
		        DeleteGVar("UsingStinger", playerid);
		        SendClientMessage(playerid, COLOR_WHITE, "** 已经收回了放置的钉刺");
		    }
		    else
		    {
		        if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是警察");
		    	if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在执勤中才能使用这个技能");
		        if(PlayerData[playerid][pStamina] < 2.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");

				world = GetPlayerVirtualWorld(playerid);
				if(IsPlayerInAnyVehicle(playerid))
				{
				    vehicleid = GetPlayerVehicleID(playerid);
				    GetVehiclePos(vehicleid, px, py, pz);
					GetVehicleZAngle(vehicleid, pangle);
                    GetXYBehindPos(px, py, pangle, px, py, 6.0);
                    stingerid = CreateStinger(px, py, pz-0.5, pangle+90.0, world);
				}
				else
				{
				    GetPlayerPos(playerid, px, py, pz);
					GetPlayerFacingAngle(playerid, pangle);
					stingerid = CreateStinger(px, py, pz-0.8, pangle+90.0, world);
				}

				if(stingerid > -1)
				{
				    PlayerData[playerid][pStamina] -= 2.0;
				    format(string, sizeof(string), ""#TEXT_WHITE"已消耗2点体力放置钉刺,再次使用这个技能会收回已放置的钉刺");
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetGVarInt("UsingStinger", 1, playerid);
					SetGVarInt("StingerID", stingerid, playerid);
				}
				else SendClientMessage(playerid, COLOR_WHITE, "错误: 钉刺的总数量数量已达上限");
			}
		}
		case 19:
		{
			static blockid, Float:px, Float:py, Float:pz, Float:pangle, world;
		    if(GetGVarInt("UsingBlock", playerid) == 1)
		    {
		        blockid = GetGVarInt("BlockID", playerid);
		        if(GetPlayerDistanceFromPointEx(playerid, RoadBlock[blockid][rbX], RoadBlock[blockid][rbY], RoadBlock[blockid][rbZ]) > 10.0)
		        {
					SendClientMessage(playerid, COLOR_WHITE, "你已经先放置了一个路障,你必须前往收回才能再放置新的,已为你标记"#TEXT_VIOLET"路障"#TEXT_WHITE"的位置");
		            SetPlayerGPS(playerid, RoadBlock[blockid][rbX], RoadBlock[blockid][rbY], RoadBlock[blockid][rbZ]);
		            return 1;
		        }
		        DestroyRoadBlock(blockid);
		        DeleteGVar("UsingBlock", playerid);
		        SendClientMessage(playerid, COLOR_WHITE, "** 已经收回了放置的路障");
		    }
		    else
		    {
		        if(PlayerData[playerid][pDepartment] != DEPT_POLICE) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你不是警察");
		    	if(GetGVarInt("PoliceDuty", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在执勤中才能使用这个技能");
		        if(PlayerData[playerid][pStamina] < 2.0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的体力不足");

				world = GetPlayerVirtualWorld(playerid);
				if(IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你必须在步行状态才能设置路障");
				GetPlayerPos(playerid, px, py, pz);
				GetPlayerFacingAngle(playerid, pangle);
				blockid = CreateRoadBlock(px, py, pz, pangle, world);

				if(blockid > -1)
				{
				    PlayerData[playerid][pStamina] -= 2.0;
				    format(string, sizeof(string), ""#TEXT_WHITE"已消耗2点体力放置路障,再次使用这个技能会收回已放置的路障");
					SendClientMessage(playerid, COLOR_WHITE, string);
					SetGVarInt("UsingBlock", 1, playerid);
					SetGVarInt("BlockID", blockid, playerid);
				}
				else SendClientMessage(playerid, COLOR_WHITE, "错误: 路障的总数量数量已达上限");
			}
		}
	}
	return 1;
}

PUBLIC:UnRam(eid)
{
    DeleteGVar("ERammed", eid);
}

PUBLIC:GangBlessEnd(gsqlid)
{
	DeleteGVar("BlessedGang", gsqlid);
}

PUBLIC:DestroyMCCP(pickupid)
{
	if(GetGVarInt("MCCP", pickupid) == 1)
	{
		DestroyDynamicPickup(pickupid);
	}
}

PUBLIC:UnHide(playerid)
{
	if(GetGVarInt("Spawned", playerid) == 1)
	{
	    ForEachPlayer(i)
		{
		    if(ConfigData[i][cfNameTag] == 0 || Event[GetGVarInt("EventID", i)][evType] != EVENT_SURVIVE)
		    {
				ShowPlayerNameTagForPlayer(i, playerid, true);
			}
		}
		UpdatePlayerColor(playerid);
		if(GetGVarInt("Spawned", playerid) == 1)
		{
			if(GetGVarInt("ArmourSuit", playerid) == ARMOUR_JUGGER) SetPlayerSkin_Fix(playerid, 25058);
			else if(GetGVarInt("ArmourSuit", playerid) == ARMOUR_BOPS) SetPlayerSkin_Fix(playerid, 25103);
			else if(GetGVarInt("PlayerAnimal", playerid) > 0) SetPlayerSkin_Fix(playerid, AnimalsList[GetGVarInt("PlayerAnimal", playerid)][amlModel]);
			else SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
		}
	 	DeleteGVar("Hiding", playerid);
	}
}

PUBLIC:Heal(playerid)
{
	static string[144], playername[MAX_PLAYER_NAME], giveplayerid, giveplayer[MAX_PLAYER_NAME],
			Float:px, Float:py, Float:pz, rand1, rand2, rand3, randpt, Float:healamount;
	giveplayerid = GetGVarInt("HealPlayer", playerid);
	if(GetGVarInt("Healing", playerid) > 0)
	{
		if(GetGVarInt("Spawned", giveplayerid) == 1)
		{
		    GetPlayerPos(giveplayerid, px, py, pz);
		    GetPlayerName(giveplayerid, giveplayer, MAX_PLAYER_NAME);
		    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	        if(IsPlayerInRangeOfPointEx(playerid, 8.0, px, py, pz))
	        {
			    switch(SkillData[playerid][psHeal])
				{
					case 1:
					{
						healamount = 20.0;
						rand1 = random(10);
						rand2 = random(5);
						rand3 = random(3);
					}
					case 2:
					{
						healamount = 40.0;
						rand1 = random(8);
						rand2 = random(4);
						rand3 = random(3);
					}
					case 3:
					{
						healamount = 60.0;
						rand1 = random(6);
						rand2 = random(3);
						rand3 = random(2);
					}
					case 4:
					{
						healamount = 80.0;
						rand1 = random(4);
						rand2 = random(2);
						rand3 = random(2);
					}
					case 5:
					{
						healamount = 100.0;
						rand1 = random(2);
						rand2 = 0;
						rand3 = 0;
					}
			  	}
			  	format(string, sizeof(string), "** 治疗完成: 你治疗了 %s,使他恢复了%d点生命", giveplayer, floatround(healamount));
				SendClientMessage(playerid, COLOR_NURSEPINK, string);
				format(string, sizeof(string), "** 治疗完成: %s 治疗了你,使你恢复了%d点生命", playername, floatround(healamount));
				SendClientMessage(giveplayerid, COLOR_NURSEPINK, string);
				GiveHealth(giveplayerid, healamount);
				randpt = random(4);
				if(randpt == 0)
				{
					GivePlayerPoint(playerid, 5, 2);
					format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"医学知识"#TEXT_LIGHTBLUE"2点");
					SendClientMessage(playerid, COLOR_WHITE, string);
				}
				if(SickData[giveplayerid][scHealth] > 0)
				{
					if(rand1 == 0)
					{
						switch(SickData[giveplayerid][scHealth])
						{
					     	case 1:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"破伤风"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 2:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"蜂窝性组织炎"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 3:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"细菌感染"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 4:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"偶发性休克"#TEXT_NURSEPINK"被%s治好了", playername);
						}
						SendClientMessage(giveplayerid, COLOR_NURSEPINK, string);
						SickData[giveplayerid][scHealth] = 0;
					}
				}
				if(SickData[giveplayerid][scHunger] > 0)
				{
				    if(rand2 == 0)
					{
						switch(SickData[giveplayerid][scHunger])
						{
					     	case 1:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"健康流失"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 2:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"体力流失"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 3:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"厌食症"#TEXT_NURSEPINK"被%s治好了", playername);
						}
						SendClientMessage(giveplayerid, COLOR_NURSEPINK, string);
						SickData[giveplayerid][scHunger] = 0;
					}
				}
				if(SickData[giveplayerid][scStamina] > 0)
				{
				    if(rand3 == 0)
					{
						switch(SickData[giveplayerid][scStamina])
						{
					     	case 1:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"小感冒"#TEXT_NURSEPINK"被%s治好了", playername);
					     	case 2:format(string, sizeof(string), "** 疾病治K: 你的"#TEXT_LIGHTRED"发烧"#TEXT_NURSEPINK"被%s治好了", playername);
						}
						SendClientMessage(giveplayerid, COLOR_NURSEPINK, string);
						SickData[giveplayerid][scStamina] = 0;
					}
				}
			}
			else
			{
			    PlayerData[playerid][pStamina] += 10.0;
				SendClientMessage(playerid, COLOR_WHITE, "治疗错误: 你治疗的对象离你太远了");
			}
		}
		GameTextForPlayer(playerid, "_", 1000, 3);
		GameTextForPlayer(giveplayerid, "_", 1000, 3);
		UpdateDynamic3DTextLabelText(PlayerStatus[giveplayerid], COLOR_WHITE, " ");
	}
	DeleteGVar("HealPlayer", playerid);
	DeleteGVar("Healing", playerid);
  	ClearAnimationsEx(playerid);
  	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
}

stock StopHealing(playerid)
{
    new giveplayerid = GetGVarInt("HealPlayer", playerid);
    DeleteGVar("HealPlayer", playerid);
    DeleteGVar("Healing", playerid);
    PlayerData[playerid][pStamina] += 10.0;
	ClearAnimationsEx(playerid);
	GameTextForPlayer(playerid, "_", 1000, 3);
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
	if(IsPlayerConnected(giveplayerid))
	{
		GameTextForPlayer(giveplayerid, "_", 1000, 3);
		UpdateDynamic3DTextLabelText(PlayerStatus[giveplayerid], COLOR_WHITE, " ");
	}
}

PUBLIC:UnSkillFrozen(playerid)
{
    static string[144];
	if(GetGVarInt("SkillFrozen", playerid) == 1)
	{
	    new Float:damage = GetGVarFloat("FrozenDamage", playerid);
		TogglePlayerControllableEx(playerid, 1);
		GiveHealth(playerid, -damage);
		format(string, sizeof(string), "** THE WORLD!效果结束,期间你受到了 %d 点伤害", floatround(damage));
		SendClientMessage(playerid, COLOR_FADEYELLOW, string);
		DeleteGVar("SkillFrozen", playerid);
		DeleteGVar("FrozenDamage", playerid);
		UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
	}
}

static UpdatePlayerHPBar(playerid)
{
	if(ConfigData[playerid][cfHud1] == 0 && PlayerData[playerid][pReg] != 0)
	{
		new string[8],
	    Float:pBarHp = GetPlayerHealth_Fix(playerid),
	    Float:pBarAr = GetPlayerArmour_Fix(playerid);

		if(GetGVarFloat("pTmpHP", playerid) != pBarHp || GetGVarFloat("pTmpAR", playerid) != pBarAr || GetGVarInt("pBarS", playerid) == 0)
		{
			if(pBarHp < 0.0) format(string,sizeof(string),"0",floatround(pBarHp));
			else format(string,sizeof(string),"%d",floatround(pBarHp));
			PlayerTextDrawSetString(playerid,HPNum[playerid],string);

			format(string,sizeof(string),"%d",floatround(pBarAr));
			PlayerTextDrawSetString(playerid,ARNum[playerid],string);

			if(pBarHp > 100.0+PlayerData[playerid][pMaxHealth]) PlayerTextDrawTextSize(playerid, HPBar[playerid], 543.000000 + 64.0, 17.000000);
			else if(pBarHp < 0.0) PlayerTextDrawTextSize(playerid, HPBar[playerid], 543.000000, 17.000000);
			else PlayerTextDrawTextSize(playerid, HPBar[playerid], 543.000000 + (64.0*pBarHp/(100.0+PlayerData[playerid][pMaxHealth])), 17.000000);

			if(pBarAr > 100.0) PlayerTextDrawTextSize(playerid, ARBar[playerid], 543.000000 + 64.0, 17.000000);
			else PlayerTextDrawTextSize(playerid, ARBar[playerid], 543.000000 + (64.0*pBarAr/100.0), 17.000000);

			switch(floatround(pBarHp))
			{
				case 0..20: PlayerTextDrawBoxColor(playerid, HPBar[playerid], 0xE40000FF);
				case 21..50: PlayerTextDrawBoxColor(playerid, HPBar[playerid], 0xFFEE00FF);
				default: PlayerTextDrawBoxColor(playerid, HPBar[playerid], 0xB8FF00FF);
			}
			if(pBarAr > 0.0)
			{
				PlayerTextDrawShow(playerid, ARBarBack[playerid]);
				PlayerTextDrawShow(playerid, ARBar[playerid]);
				PlayerTextDrawShow(playerid, ARNum[playerid]);
			}
			else
			{
				PlayerTextDrawHide(playerid, ARBarBack[playerid]);
				PlayerTextDrawHide(playerid, ARBar[playerid]);
				PlayerTextDrawHide(playerid, ARNum[playerid]);
			}

			PlayerTextDrawShow(playerid, HPBarBack[playerid]);
			PlayerTextDrawShow(playerid, HPBar[playerid]);
			PlayerTextDrawShow(playerid, HPNum[playerid]);

			SetGVarFloat("pTmpHP", pBarHp, playerid);
			SetGVarFloat("pTmpAR", pBarAr, playerid);

			SetGVarInt("pBarS", 1, playerid);
		}
	}
	else
	{
		PlayerTextDrawHide(playerid, HPBarBack[playerid]);
		PlayerTextDrawHide(playerid, ARBarBack[playerid]);
		PlayerTextDrawHide(playerid, HPBar[playerid]);
		PlayerTextDrawHide(playerid, ARBar[playerid]);
		PlayerTextDrawHide(playerid, HPNum[playerid]);
		PlayerTextDrawHide(playerid, ARNum[playerid]);
	}
}

stock UpdatePlayerExpBar(playerid)
{
	new maxexp = ExpList[PlayerData[playerid][pLevel]+1][expAmount],
		curexp = PlayerData[playerid][pExp],
		startexp = curexp - ExpList[PlayerData[playerid][pLevel]][expAmount],
		toexp = ExpList[PlayerData[playerid][pLevel]+1][expAmount] - ExpList[PlayerData[playerid][pLevel]][expAmount],
		string[32];
	if(PlayerData[playerid][pLevel] < 120)
	{
		switch(PlayerData[playerid][pLevel])
		{
			case 0..19: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_WHITE);
			case 21..30: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_FADEGREEN);
			case 31..40: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_FADEBLUE);
			case 41..50: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_VIOLET);
			case 51..60: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_LIGHTRED);
			case 61..70: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_LIGHTYELLOW);
			case 71..80: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_ORANGE);
			case 81..90: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_PINKRED);
			case 91..100: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_YELLOW);
			default: PlayerTextDrawBoxColor(playerid, HUDExpBar[playerid], COLOR_SKYBLUE);
		}
		if(curexp < maxexp) PlayerTextDrawTextSize(playerid, HUDExpBar[playerid], 238.000000 + (161.0*float(startexp)/float(toexp)) , 68.000000);
		else PlayerTextDrawTextSize(playerid, HUDExpBar[playerid], 238.000000 + 161.0 , 68.000000);

		format(string, sizeof(string),"%d/%d", curexp, maxexp);
		PlayerTextDrawSetString(playerid, HUDExp[playerid], string);
	}
	else
	{
		PlayerTextDrawTextSize(playerid, HUDExpBar[playerid], 399.000000 , 68.000000);
		format(string,sizeof(string),"%d", curexp);
	}
	PlayerTextDrawShow(playerid, HUDExp[playerid]);
	PlayerTextDrawShow(playerid, HUDExpBar[playerid]);
}

PUBLIC:SpawnTarget(rangeid)
{
	static Float:randx, Float:randy, randtype, section, Float:randspeed;
	if(GetGVarInt("RangeStarted", rangeid) == 1)
	{
	    randx = float(random(15));
	    randy = float(random(12));
	    randspeed = float(random(20))/5;
	    randtype = random(2);
	    section = GetGVarInt("RangeSection", rangeid);
	    if(section == 9) SetGVarInt("RangeSection", 0, rangeid);
	    else SetGVarInt("RangeSection", section+1, rangeid);
	    section = GetGVarInt("RangeSection", rangeid);
	    DestroyDynamicObject(TargetObject[rangeid][section][6]);
	    DestroyDynamicObject(TargetObject[rangeid][section][5]);
	    DestroyDynamicObject(TargetObject[rangeid][section][4]);
	    DestroyDynamicObject(TargetObject[rangeid][section][3]);
	    DestroyDynamicObject(TargetObject[rangeid][section][2]);
	    DestroyDynamicObject(TargetObject[rangeid][section][1]);
	    DestroyDynamicObject(TargetObject[rangeid][section][0]);
	    switch(randtype)
	    {
	        case 0://移动
	        {
	            TargetObject[rangeid][section][6] = CreateDynamicObject(3018, 284.9114, -18.4585+randy, 1004.3925, 0.0000, 0.0000, 0.0000, rangeid); //target_rleg
				TargetObject[rangeid][section][5] = CreateDynamicObject(3019, 284.9005, -18.4585+randy, 1004.3985, 0.0000, 0.0000, 0.0000, rangeid); //target_lleg
				TargetObject[rangeid][section][4] = CreateDynamicObject(3020, 284.8928, -18.4585+randy, 1004.3701, 0.0000, 0.0000, 0.0000, rangeid); //target_ltorso
				TargetObject[rangeid][section][3] = CreateDynamicObject(3021, 284.8810, -18.4585+randy, 1004.3569, 0.0000, 0.0000, 0.0000, rangeid); //target_rtorso
				TargetObject[rangeid][section][2] = CreateDynamicObject(3022, 284.8663, -18.4585+randy, 1004.3410, 0.0000, 0.0000, 0.0000, rangeid); //target_rarm
				TargetObject[rangeid][section][1] = CreateDynamicObject(3023, 284.8789, -18.4585+randy, 1004.3754, 0.0000, 0.0000, 0.0000, rangeid); //target_larm
				TargetObject[rangeid][section][0] = CreateDynamicObject(3024, 284.8568, -18.4585+randy, 1004.3604, 0.0000, 0.0000, 0.0000, rangeid); //target_head
				MoveDynamicObject(TargetObject[rangeid][section][6], 304.9114, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][5], 304.9005, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][4], 304.8928, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][3], 304.8810, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][2], 304.8663, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][1], 304.8789, -18.4585+randy, 1004.3925, randspeed);
				MoveDynamicObject(TargetObject[rangeid][section][0], 304.8568, -18.4585+randy, 1004.3925, randspeed);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][6]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][5]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][4]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][3]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][2]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][1]);
				SetGVarInt("TargetPt", 3, TargetObject[rangeid][section][0]);
			}
			case 1:
			{
			    TargetObject[rangeid][section][6] = CreateDynamicObject(3018, 284.9114+randx, -18.4585+randy, 1004.3925, 0.0000, 0.0000, 0.0000, rangeid); //target_rleg
				TargetObject[rangeid][section][5] = CreateDynamicObject(3019, 284.9005+randx, -18.4585+randy, 1004.3985, 0.0000, 0.0000, 0.0000, rangeid); //target_lleg
				TargetObject[rangeid][section][4] = CreateDynamicObject(3020, 284.8928+randx, -18.4585+randy, 1004.3701, 0.0000, 0.0000, 0.0000, rangeid); //target_ltorso
				TargetObject[rangeid][section][3] = CreateDynamicObject(3021, 284.8810+randx, -18.4585+randy, 1004.3569, 0.0000, 0.0000, 0.0000, rangeid); //target_rtorso
				TargetObject[rangeid][section][2] = CreateDynamicObject(3022, 284.8663+randx, -18.4585+randy, 1004.3410, 0.0000, 0.0000, 0.0000, rangeid); //target_rarm
				TargetObject[rangeid][section][1] = CreateDynamicObject(3023, 284.8789+randx, -18.4585+randy, 1004.3754, 0.0000, 0.0000, 0.0000, rangeid); //target_larm
				TargetObject[rangeid][section][0] = CreateDynamicObject(3024, 284.8568+randx, -18.4585+randy, 1004.3604, 0.0000, 0.0000, 0.0000, rangeid); //target_head
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][6]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][5]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][4]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][3]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][2]);
				SetGVarInt("TargetPt", 1, TargetObject[rangeid][section][1]);
				SetGVarInt("TargetPt", 2, TargetObject[rangeid][section][0]);
			}
		}
		SetTimerEx("SpawnTarget", 8000, 0, "i", rangeid);
	}
	else
	{
		for(new i = 0; i < 9; i++)
		{
		    DestroyDynamicObject(TargetObject[rangeid][i][6]);
		    DestroyDynamicObject(TargetObject[rangeid][i][5]);
		    DestroyDynamicObject(TargetObject[rangeid][i][4]);
		    DestroyDynamicObject(TargetObject[rangeid][i][3]);
		    DestroyDynamicObject(TargetObject[rangeid][i][2]);
		    DestroyDynamicObject(TargetObject[rangeid][i][1]);
		    DestroyDynamicObject(TargetObject[rangeid][i][0]);
	 	}
	}
}

stock StopRange(playerid)
{
    static string[144], i, k, pworld, Float:px, Float:py, Float:pz, seat, pt, playername[MAX_PLAYER_NAME];
	if(GetGVarInt("RangeShooting", playerid) == 1)
	{
		pworld = GetPlayerVirtualWorld(playerid), pt = GetGVarInt("RangePt", playerid);
		px = GetGVarFloat("RangeX", playerid), py = GetGVarFloat("RangeY", playerid), pz = GetGVarFloat("RangeZ", playerid);
		seat = GetGVarInt("RangeSeat", playerid);
		SetPlayerPos_Fix(playerid, px, py, pz);
		pworld = GetPlayerVirtualWorld(playerid);
		switch(pt)
		{
		    case 0: {GivePlayerCurrentWeaponSkill(playerid, 0);}
			case 1..20: {GivePlayerCurrentWeaponSkill(playerid, 1);}
			case 21..30: {GivePlayerCurrentWeaponSkill(playerid, 2);}
			case 31..50: {GivePlayerCurrentWeaponSkill(playerid, 4);}
			case 51..60: {GivePlayerCurrentWeaponSkill(playerid, 6);}
			case 61..70: {GivePlayerCurrentWeaponSkill(playerid, 8);}
			case 71..80: {GivePlayerCurrentWeaponSkill(playerid, 12);}
			case 81..90: {GivePlayerCurrentWeaponSkill(playerid, 16);}
			case 91..100: {GivePlayerCurrentWeaponSkill(playerid, 20);}
			case 101..120: {GivePlayerCurrentWeaponSkill(playerid, 25);}
			case 121..150: {GivePlayerCurrentWeaponSkill(playerid, 30);}
			case 151..180: {GivePlayerCurrentWeaponSkill(playerid, 40);}
			case 181..200: {GivePlayerCurrentWeaponSkill(playerid, 50);}
			case 201..400: {GivePlayerCurrentWeaponSkill(playerid, 75);}
			case 401..600: {GivePlayerCurrentWeaponSkill(playerid, 100);}
			case 601..1000: {GivePlayerCurrentWeaponSkill(playerid, 999);}
		}
		ResetPlayerWeapons(playerid);
		GivePlayerDataWeapons(playerid);
		format(string, sizeof(string), ""#TEXT_WHITE"射击练习结束.最后得分为 %d 分", pt);
		SendClientMessage(playerid, COLOR_WHITE, string);
		if(pt > 80)
		{
		    new exp = 350;
		    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		    format(string, sizeof(string), "** %s 在射击练习达到了"#TEXT_WHITE" %d "#TEXT_LIGHTBLUE"分 **", playername, pt);
			SendRangeMessage(30.0, playerid, string, COLOR_LIGHTBLUE, COLOR_LIGHTBLUE, COLOR_LIGHTBLUE, COLOR_LIGHTBLUE, COLOR_LIGHTBLUE);
			GivePlayerExp(playerid, exp, EXP_SHOOTRANGE);
		}
		GivePlayerPoint(playerid, 8, pt);
		RecordData[playerid][prRange] += pt;
		RangeSpace[pworld][seat] = 0;
		SetGVarInt("RangeShooting", 0, playerid);
		SetGVarInt("RangePt", 0, playerid);
		SetGVarInt("RangeTime", 0, playerid);
		UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
		for(i = k = 0; i < 7; i ++)
		{
			if(RangeSpace[pworld][i] == 1)
			{
				k = 1;
				break;
			}
		}
		if(GetGVarInt("RangeStarted", pworld) == 1 && k == 0)//当靶场都没有人就停止靶子重生
		{
			SetGVarInt("RangeStarted", 0, pworld);
			SpawnTarget(pworld);
		}

		UpdatePlayerMission(playerid, 16, 6);

		// 关闭玩家Streamer闲置更新 (for performance)
		Streamer_ToggleIdleUpdate(playerid, 0);
	}
}

static GivePlayerDataWeapons(playerid)
{
    if(WeaponData[playerid][pwAmmo1] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon1], WeaponData[playerid][pwAmmo1]);}
	if(WeaponData[playerid][pwAmmo2] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon2], WeaponData[playerid][pwAmmo2]);}
	if(WeaponData[playerid][pwAmmo3] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon3], WeaponData[playerid][pwAmmo3]);}
	if(WeaponData[playerid][pwAmmo4] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon4], WeaponData[playerid][pwAmmo4]);}
	if(WeaponData[playerid][pwAmmo5] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon5], WeaponData[playerid][pwAmmo5]);}
	if(WeaponData[playerid][pwAmmo6] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon6], WeaponData[playerid][pwAmmo6]);}
	if(WeaponData[playerid][pwAmmo7] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon7], WeaponData[playerid][pwAmmo7]);}
	if(WeaponData[playerid][pwAmmo8] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon8], WeaponData[playerid][pwAmmo8]);}
	if(WeaponData[playerid][pwAmmo9] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon9], WeaponData[playerid][pwAmmo9]);}
	if(WeaponData[playerid][pwAmmo10] > 0){GivePlayerWeapon(playerid, WeaponData[playerid][pwWeapon10], WeaponData[playerid][pwAmmo10]);}
}

public OnPlayerShootDynamicObject(playerid, weaponid, objectid, Float:x, Float:y, Float:z)
{
    OnPlayerWeaponShot(playerid, weaponid, 99, objectid, x, y, z);
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
    static string[144], point, targetpt, rand;
    switch(hittype)
    {
        case 99:
        {
            GetDynamicObjectPos(hitid, fX, fY, fZ);
		    if(GetGVarInt("RangeShooting", playerid) == 1)
			{
		        targetpt = GetGVarInt("TargetPt", hitid);
				point = GetGVarInt("RangePt", playerid) + targetpt;
				SetGVarInt("RangePt", point, playerid);
				format(string, sizeof(string), "射击中...\n分数:%d", point);
				UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_LIGHTRED, string);
				format(string, sizeof(string), "%d", point);
			    UpdateRightTD(playerid);
			}
			else if(GetGVarInt("ObjectData", hitid) == 1)
			{
				new oid = GetGVarInt("ObjectDataID", hitid);
				if(ObjectData[oid][oInfinity] == 0)
				{
					if(ObjectData[oid][oHealth] - WeaponsList[weaponid][wDamage] > 0.0)
					{
					    ObjectData[oid][oHealth] -= WeaponsList[weaponid][wDamage];
					}
					else
					{
					    new object = ObjectData[oid][oObjectID];
						format(string, sizeof(string), "** %s 摧毁了这个 %s **", PlayerData[playerid][pName], ObjectList[ObjectData[oid][oObjectID]][oName]);
			    		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    		CreateDropItem(ObjectList[object][oItemType], ObjectList[object][oItemID], 1, ObjectData[oid][oX], ObjectData[oid][oY], ObjectData[oid][oZ], ObjectData[oid][oWorld], 300);
			    		DeleteObjectData(oid);
					}
				}
			}
	    }
	    case BULLET_HIT_TYPE_PLAYER:
        {
            GetPlayerPos(hitid, fX, fY, fZ);
            if(GetGVarInt("Tazzing", playerid) == 1)
            {
				if(weaponid == 22 || weaponid == 23 || weaponid == 24)
				{
	                rand = random(2);
	                if(rand == 0) ApplyAnimationEx(hitid, "KNIFE", "knife_hit_3", 4.1, 0, 1, 1, 1, 1, 1);
	                else ApplyAnimationEx(hitid, "CRACK", "crckdeth1", 4.1, 1, 0, 0, 1, 0, 1);
	                TogglePlayerControllableEx(hitid, false);
	                SetGVarInt("PTazzed", 30, hitid);
	                format(string, sizeof(string), "** %s 被电击,全身麻痹暂时无法行动 **", PlayerData[hitid][pName]);
			    	SendRangeMessage(20.0, hitid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    	format(string, sizeof(string), "** 你被电击弹击中麻痹了,接下来有大约30秒的时间无法移动");
			    	SendClientMessage(hitid, COLOR_WHITE, string);
			    	if(IsPlayerInAnyVehicle(hitid)) RemovePlayerFromVehicle_Fix(hitid);
			    	if(PlayerData[hitid][pWanted] > 0)
			    	{
				    	format(string, sizeof(string), "** 你使用电击枪击中通缉犯%s了,你可以在他无法行动时持续"#TEXT_FADEGREEN"瞄准"#TEXT_FADEBLUE"他来将他逮捕上铐", PlayerData[hitid][pName]);
				    	SendClientMessage(playerid, COLOR_FADEBLUE, string);
				    }
				}
            }
	    }
   		case BULLET_HIT_TYPE_VEHICLE:
        {
            GetVehiclePos(hitid, fX, fY, fZ);
       		/*if(GetPlayerDistanceFromPointEx(playerid, fX, fY, fZ) < 50.0)
			{
            	SetPlayerCrime(playerid, CRIME_HIT, VICTIM_VEHICLE, hitid, weaponid, fX, fY, fZ);//破坏载具罪行
            }*/
            if(GetGVarInt("Tazzing", playerid) == 1)
            {
                if(weaponid == 22 || weaponid == 23 || weaponid == 24)
				{
	                new vtazz = GetGVarInt("VTazzed", hitid),
						engine, lights, alarm, doors, bonnet, boot, objective;
	                if(vtazz == 2)
	                {
	                    GetVehicleParamsEx(hitid, engine, lights, alarm, doors, bonnet, boot, objective);
	                    SetVehicleParamsEx(hitid, 0, lights, alarm, doors, bonnet, boot, objective);
	                    if(engine == 1)
	                    {
		                    format(string, sizeof(string), "** 因为这个载具被多发电击弹打中而影响到回路,引擎熄火了 **");
				    		SendRangeVehicleMessage(20.0, hitid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
				    		DeleteGVar("VTazzed", hitid);
				    	}
	                }
	                else SetGVarInt("VTazzed", vtazz+1, hitid);
	            }
            }
            if(VehData[hitid][vType] == VTYPE_MISSION)
            {
                new Float:hp;
                if(GetGVarInt("Mission", playerid) == GetGVarInt("VehMission", hitid))
                {
		            GetVehicleHealth(hitid, hp);
			        SetVehicleHealth(hitid, hp - WeaponsList[weaponid][wDamage]);
			        switch(GetGVarInt("Mission", playerid))
			        {
			            case 21:
			            {
			                new Float:nx, Float:ny, Float:nz, nearest;
			                ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_SIMEON && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(10))
										{
											case 0: SendRangeNPCMessage(20.0, n, "保安说: 有人在破坏老板的车!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "保安说: 你他妈在干什么!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "保安说: 给我住手!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "保安说: 你这下有得赔了!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}
										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
			            }
			            case 24:
			            {
			                new Float:nx, Float:ny, Float:nz, nearest;
			                ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_LOST && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(10))
										{
											case 0: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 你死定了!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 没有人可以乱动男人的机车!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 兄弟们!给我教训他!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "摩托帮成员说: 你要跟失落摩托车帮开战?", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}

										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
			            }
			            case 35:
			            {
			                new Float:nx, Float:ny, Float:nz, nearest;
			                ForEachNPC(n)
							{
								if(GetGVarInt("NPCTeam", n) == NTEAM_DANANG && GetGVarInt("NPCTType", n) == TARGET_NONE)
								{
									FCNPC_GetPosition(n, nx, ny, nz);
									FCNPC_GetClosestEntityInBetween(n, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
									if(nearest == playerid)
									{
										switch(random(10))
										{
											case 0: SendRangeNPCMessage(20.0, n, "越南帮成员说: 有人来抢货了!做掉他!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 1: SendRangeNPCMessage(20.0, n, "越南帮成员说: 这家伙是三合会派来的人!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 2: SendRangeNPCMessage(20.0, n, "越南帮成员说: 有人发现我们了!快干掉他!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
											case 3: SendRangeNPCMessage(20.0, n, "越南帮成员说: 越南帮你们是惹不起的!", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
										}

										NPCToTarget(n, TARGET_PLAYER, playerid, 1);
									}
								}
							}
			            }
			        }
			    }
		    }
	    }
	}
	//explosive shell
	if(IsPlayerUsingExplosiveShell(playerid, weaponid))
	{
	    switch(weaponid)
	    {
	        case 24: SetGVarInt("ExShellDEA", GetGVarInt("ExShellDEA", playerid)-1, playerid);
	        case 27: SetGVarInt("ExShellCShot", GetGVarInt("ExShellCShot", playerid)-1, playerid);
	        case 34: SetGVarInt("ExShellSnipe", GetGVarInt("ExShellSnipe", playerid)-1, playerid);
	        case 38: SetGVarInt("ExShellMini", GetGVarInt("ExShellMini", playerid)-1, playerid);
	    }
		CreateExplosion(fX, fY, fZ, 12, 1.0);
	}
	if(GetGVarInt("Tazzing", playerid) == 1)
	{
		DeleteGVar("Tazzing", playerid);
		LimitData[playerid][plCDTazz] = 5;
	}
	return 1;
}

stock GivePlayerCurrentWeaponSkill(playerid, amount)
{
	static string[144], gunid;
	if(amount > 0 && GetPlayerState(playerid) != PLAYER_STATE_DRIVER)
	{
    	gunid = GetPlayerWeapon(playerid);
	    switch(gunid)
	    {
	    	case 22:
	        {
	        	if(SkillData[playerid][psPistol] < 999)
	            {
	                SkillData[playerid][psPistol] += amount;
	            	SetPlayerSkillLevel(playerid, 0, SkillData[playerid][psPistol]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的手枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
	        case 24:
	        {
	            if(SkillData[playerid][psDEA] < 999)
	            {
	                SkillData[playerid][psDEA] += amount;
	            	SetPlayerSkillLevel(playerid, 2, SkillData[playerid][psDEA]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的沙漠之鹰手枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	           	}
			}
			case 25:
	   		{
	            if(SkillData[playerid][psShotgun] < 999)
	            {
	               	SkillData[playerid][psShotgun] += amount;
	          		SetPlayerSkillLevel(playerid, 3, SkillData[playerid][psShotgun]);
	          		format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的霰弹枪熟练度上升了%d", amount);
	          		SendClientMessage(playerid, COLOR_WHITE, string);
	           	}
			}
			case 26:
	   		{
	            if(SkillData[playerid][psSawn] < 999)
	            {
	               	SkillData[playerid][psSawn] += amount;
	          		SetPlayerSkillLevel(playerid, 4, SkillData[playerid][psSawn]);
	          		format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的短管霰弹熟练度上升了%d", amount);
	          		SendClientMessage(playerid, COLOR_WHITE, string);
	           	}
			}
			case 27:
	   		{
	            if(SkillData[playerid][psSpas] < 999)
	            {
	               	SkillData[playerid][psSpas] += amount;
	          		SetPlayerSkillLevel(playerid, 5, SkillData[playerid][psSpas]);
	          		format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的战斗霰弹枪熟练度上升了%d", amount);
	          		SendClientMessage(playerid, COLOR_WHITE, string);
	           	}
			}
			case 28,32:
	   		{
	            if(SkillData[playerid][psUZI] < 999)
	            {
	               	SkillData[playerid][psUZI] += amount;
	          		SetPlayerSkillLevel(playerid, 6, SkillData[playerid][psUZI]);
	          		format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的乌兹冲锋枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
			case 29:
	        {
	            if(SkillData[playerid][psMP5] < 999)
	            {
	                SkillData[playerid][psMP5] += amount;
	            	SetPlayerSkillLevel(playerid, 7, SkillData[playerid][psMP5]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的MP5冲锋枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
			case 30:
	        {
	            if(SkillData[playerid][psAK] < 999)
	            {
	                SkillData[playerid][psAK] += amount;
	            	SetPlayerSkillLevel(playerid, 8, SkillData[playerid][psAK]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的AK47步枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
			case 31:
	        {
	            if(SkillData[playerid][psM4] < 999)
	            {
	                SkillData[playerid][psM4] += amount;
	            	SetPlayerSkillLevel(playerid, 9, SkillData[playerid][psM4]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的M4步枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
			case 33,34:
	        {
	            if(SkillData[playerid][psSniper] < 999)
	            {
	                SkillData[playerid][psSniper] += amount;
	            	SetPlayerSkillLevel(playerid, 10, SkillData[playerid][psSniper]);
	            	format(string, sizeof(string), ""#TEXT_WHITE"武器技能提升,你的来福枪熟练度上升了%d", amount);
	            	SendClientMessage(playerid, COLOR_WHITE, string);
	            }
			}
		}
	}
}

public OnPlayerGiveDamageDynamicActor(playerid, actorid, Float: amount, weaponid, bodypart)
{
	if(GetGVarInt("Cloning", actorid) == 1)
    {
        new cloned = GetGVarInt("ClonePlayer", actorid);
        if(GetGVarInt("Spawned", cloned) == 1)
        {
	        OnPlayerGiveDamage(playerid, cloned, amount, weaponid, bodypart);
	     	if(GetGVarInt("CloneDmgTxt", cloned) == 0)
			{
				SendClientMessage(playerid, COLOR_WHITE, "你正在被攻击,请离开遥控玩具回避");
	     		SetGVarInt("CloneDmgTxt", 5, cloned);
	     	}
	     }
    }
    return 1;
}

PUBLIC:LiftDown(playerid)
{
	new count;
	count = GetGVarInt("LiftCount", playerid);
	if(GetGVarInt("FreeLifting", playerid) == 1)
	{
	    ApplyAnimationEx(playerid, "freeweights", "gym_free_down", 1, 0, 0, 0, 0, 0, 1);
	    SetGVarInt("LiftCount", count+1, playerid);
		UpdateRightTD(playerid);
	}
	else if(GetGVarInt("BenchLifting", playerid) > 0)
	{
	    ApplyAnimationEx(playerid, "benchpress", "gym_bp_down", 1, 0, 0, 0, 1, 0, 1);
	    SetGVarInt("LiftCount", count+1, playerid);
	    UpdateRightTD(playerid);
	}
	DeleteGVar("LiftingUp", playerid);
}

PUBLIC:FallOffTread(playerid)
{
	if(GetGVarInt("GymRunning", playerid) != 0)
	{
		static string[144], playername[MAX_PLAYER_NAME], count;
		GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
		format(string, sizeof(string), "** %s 从跑步机上摔下来了 **", playername);
		SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		ApplyAnimation(playerid, "gymnasium", "gym_tread_falloff", 1, 0, 0, 0, 1, 0, 1);
	    switch(GetGVarInt("GymRunning", playerid))
		{
			case 1:{SetGVarInt("LSRun", 0);}
			case 2:{SetGVarInt("SFRun", 0);}
			case 3:{SetGVarInt("LVRun", 0);}
			case 4:{SetGVarInt("PrisonRun1", 0);}
			case 5:{SetGVarInt("PrisonRun2", 0);}
		}
		count = GetGVarInt("GymDistance", playerid);
		format(string, sizeof(string), ""#TEXT_WHITE"你结束了体力练习,体力练习度上升了%d", count);
		SendClientMessage(playerid, COLOR_WHITE, string);
	    GivePlayerPoint(playerid, 11, count);
     	SetTimerEx("GymEnd", 2000, false, "i", playerid);
		DeleteGVar("GymMeter", playerid);
		DeleteGVar("GymDistance", playerid);
		DeleteGVar("GymRunning", playerid);
		DeleteGVar("GymBiking", playerid);
		GivePlayerExp(playerid, count/4, EXP_GYM);
	}
}


PUBLIC:GymEnd(playerid)
{
  	if(GetGVarInt("GymRunning", playerid) > 0 || GetGVarInt("GymBiking", playerid) > 0)
	{
        static string[144], count;
	    switch(GetGVarInt("GymRunning", playerid))
		{
			case 1:{SetGVarInt("LSRun", 0);}
			case 2:{SetGVarInt("SFRun", 0);}
			case 3:{SetGVarInt("LVRun", 0);}
			case 4:{SetGVarInt("PrisonRun1", 0);}
			case 5:{SetGVarInt("PrisonRun2", 0);}
		}
		switch(GetGVarInt("GymBiking", playerid))
		{
			case 1:{SetGVarInt("LSBike", 0);}
			case 2:{SetGVarInt("SFBike", 0);}
			case 3:{SetGVarInt("LVBike", 0);}
			case 4:{SetGVarInt("BeachBike", 0);}
			case 5:{SetGVarInt("PrisonBike", 0);}
		}
	    count = GetGVarInt("GymDistance", playerid);
		format(string, sizeof(string), ""#TEXT_WHITE"你结束了体力练习,体力练习度上升了%d", count);
		SendClientMessage(playerid, COLOR_WHITE, string);
	    GivePlayerPoint(playerid, 11, count);
	    GivePlayerExp(playerid, count/4, EXP_GYM);
	}
	ClearAnimationsEx(playerid);
	TogglePlayerControllableEx(playerid, 1);
	DeleteGVar("GymMeter", playerid);
	DeleteGVar("GymDistance", playerid);
	DeleteGVar("GymRunning", playerid);
	DeleteGVar("GymBiking", playerid);
	SetCameraBehindPlayer(playerid);

	UpdatePlayerMission(playerid, 16, 8);
}

PUBLIC:LiftEnd(playerid)
{
	new string[144];
	if(GetGVarInt("BenchLifting", playerid) > 0 || GetGVarInt("FreeLifting", playerid) > 0)
	{
	    new count = GetGVarInt("LiftCount", playerid);
	    ClearAnimationsEx(playerid);
		TogglePlayerControllableEx(playerid, 1);
		if(GetGVarInt("BenchLifting", playerid) > 0)
		{
		    GivePlayerPoint(playerid, 9, count*2);
		    format(string,sizeof(string), ""#TEXT_WHITE"你结束了健身练习了,健身练习度上升了%d", count*2);
		}
		else
		{
		    GivePlayerPoint(playerid, 9, count);
		    format(string,sizeof(string), ""#TEXT_WHITE"你结束了健身练习了,健身练习度上升了%d", count);
		}
	    SendClientMessage(playerid, COLOR_WHITE, string);
	    RecordData[playerid][prGym] += count;
	    DeleteGVar("LiftCount", playerid);
	    DeleteGVar("WeightLift", playerid);
	    DeleteGVar("BenchLifting", playerid);
	    DeleteGVar("FreeLifting", playerid);
	    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
	    SetCameraBehindPlayer(playerid);
	    GivePlayerExp(playerid, count, EXP_GYM);
	}
	UpdatePlayerMission(playerid, 16, 8);
}

static StartClass(classid)
{
	new profactor1, profactor2;
	switch(ClassList[classid][clsRoom])
	{
	    case 1:
	    {
	        profactor1 = _CreateDynamicActor(ClassList[classid][clsProf],568.4384,580.7067,892.0447,90.1934);
	        profactor2 = _CreateDynamicActor(ClassList[classid][clsProf],568.4384,580.7067,892.0447,90.1934);
	    }
	    case 2:
	    {
	        profactor1 = _CreateDynamicActor(ClassList[classid][clsProf],526.3267,571.0142,892.0447,335.0305);
	        profactor2 = _CreateDynamicActor(ClassList[classid][clsProf],526.3267,571.0142,892.0447,335.0305);
	    }
	}
	switch(ClassList[classid][clsAcademy])
	{
	    case 1:
	    {
	        SetDynamicActorVirtualWorld(profactor1, 1);
	        SetDynamicActorVirtualWorld(profactor2, 2);
	        SetGVarInt("ClassID", classid, 1);
	    }
	    case 2:
	    {
	        SetDynamicActorVirtualWorld(profactor1, 3);
	        SetDynamicActorVirtualWorld(profactor2, 4);
	        SetGVarInt("ClassID", classid, 2);
	    }
	    case 3:
	    {
	        SetDynamicActorVirtualWorld(profactor1, 5);
	        SetDynamicActorVirtualWorld(profactor2, 6);
	        SetGVarInt("ClassID", classid, 3);
	    }
	}
	SetTimerEx("ProfSpeak", 15000, 0, "i", profactor1);
	SetTimerEx("ProfSpeak", 15000, 0, "i", profactor2);

	SetGVarInt("Prof1", profactor1, classid);
	SetGVarInt("Prof2", profactor2, classid);
	ClassList[classid][clsStarted] = 1;
	SetTimerEx("EndClass", ClassList[classid][clsLength]*60000, 0, "i", classid);
}

PUBLIC:EndClass(classid)
{
	static profactor1, profactor2;
	if(ClassList[classid][clsStarted] == 1)
	{
		profactor1 = GetGVarInt("Prof1", classid);
		profactor2 = GetGVarInt("Prof2", classid);
		SendRangeActorMessage(25.0, profactor1, "教授 说: 这次的课程就先到这里,各位同学下次再见", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		SendRangeActorMessage(25.0, profactor2, "教授 说: 这次的课程就先到这里,各位同学下次再见", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		DestroyDynamicActor(profactor1);
		DestroyDynamicActor(profactor2);
		ForEachPlayer(i)
		{
		    if(GetGVarInt("Classing", i) == classid) LeaveClass(i);
		}
		SetGVarInt("ClassID", 0, ClassList[classid][clsAcademy]);
	    ClassList[classid][clsStarted] = 0;
	}
}

stock LeaveClass(playerid)
{
    new string[144], playername[MAX_PLAYER_NAME];
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    if(GetGVarInt("PCRoom", playerid) == 1)
    {
    	CSeat1Occupied[GetGVarInt("PCWorld", playerid)][GetGVarInt("PCSeat", playerid)] = 0;
    	if(GetGVarInt("Spawned", playerid) == 1)
    	{
	    	format(string, sizeof(string), "** %s 起身了 **", playername);
	  		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	  		ApplyAnimationEx(playerid, "PED", "SEAT_UP", 4.1, 0, 0, 0, 0, 0, 1);
	  	}
    }
    else if(GetGVarInt("PCRoom", playerid) == 2)
    {
   		CSeat2Occupied[GetGVarInt("PCWorld", playerid)][GetGVarInt("PCSeat", playerid)] = 0;
   		if(GetGVarInt("Spawned", playerid) == 1)
    	{
	   		format(string, sizeof(string), "** %s 起身了 **", playername);
	  		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	  		ApplyAnimationEx(playerid, "PED", "SEAT_UP", 4.1, 0, 0, 0, 0, 0, 1);
	  	}
    }
    DeleteGVar("PCRoom", playerid);
    DeleteGVar("PCSeat", playerid);
    DeleteGVar("PCWorld", playerid);
    if(GetGVarInt("Classing", playerid) > 0 && GetGVarInt("Concentration", playerid) > 0)
    {
	    DeleteGVar("Classing", playerid);
	    DeleteGVar("Concentration", playerid);
	    DeleteGVar("ClassMeter", playerid);
		SendClientMessage(playerid, COLOR_WHITE, "你结束听课,从座位起身了");
	    GameTextForPlayer(playerid, "~w~结束听课", 1000, 3);
	}
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
}

PUBLIC:ProfSpeak(actorid)
{
	static rand, string[144];
	if(IsValidDynamicActor(actorid))
	{
	    ApplyDynamicActorAnimation(actorid, "PED", "IDLE_CHAT", 4.1, 1, 0, 0, 0, 0);
		rand = random(8);
		switch(rand)
		{
		    case 0: format(string, sizeof(string), "教授 说: 因为这样...... 所以才会....");
		    case 1: format(string, sizeof(string), "教授 说: 这个原理是....");
		    case 2: format(string, sizeof(string), "教授 说: 接着这个部分要说的是...");
		    case 3: format(string, sizeof(string), "教授 说: 不要忘记了,因为这个....");
		    case 4: format(string, sizeof(string), "教授 说: 这个原因呢,是因为....");
		    case 5: format(string, sizeof(string), "教授 说: 这部分要这样才能....");
		    case 6: format(string, sizeof(string), "教授 说: 好,接着是下一个部分....");
		    case 7: format(string, sizeof(string), "教授 说: 这个部分同学们理解了吗?接着换下个主题....");
		}
		SendRangeActorMessage(25.0, actorid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		SetTimerEx("ProfSpeak", 15000, 0, "i", actorid);
	}
}

stock OnPlayerChangeWeapon(playerid, oldweapon, newweapon)
{
    #pragma unused oldweapon, newweapon

	SetPlayerWeaponColored(playerid);
}

stock SetPlayerWeaponColored(playerid)
{
    new color, attach, coldat, weaponid = GetPlayerWeapon(playerid);
	switch(weaponid)
	{
		case 22: coldat = WeaponData[playerid][pw9mmCol];
		case 24: coldat = WeaponData[playerid][pwDEACol];
		case 25: coldat = WeaponData[playerid][pwShotgunCol];
		case 26: coldat = WeaponData[playerid][pwSawnCol];
		case 27: coldat = WeaponData[playerid][pwSpasCol];
		case 28: coldat = WeaponData[playerid][pwUZICol];
		case 29: coldat = WeaponData[playerid][pwMP5Col];
		case 30: coldat = WeaponData[playerid][pwAK47Col];
		case 31: coldat = WeaponData[playerid][pwM4Col];
		case 32: coldat = WeaponData[playerid][pwTec9Col];
		case 33: coldat = WeaponData[playerid][pwRifleCol];
		case 34: coldat = WeaponData[playerid][pwSniperCol];
	}
	switch(coldat)
	{
		case 1:{attach = 1; color = 0xFF373737;}
		case 2:{attach = 1; color = 0xFF00BFFF;}
		case 3:{attach = 1; color = 0xFF808000;}
		case 4:{attach = 1; color = 0xFFB22222;}
		case 5:{attach = 1; color = 0xFFFF6984;}
		case 6:{attach = 1; color = 0xFFFFD700;}
	}
	if(attach == 1)
	{
	    switch(weaponid)
	    {
	        case 22,24,26,32: SetPlayerAttachedObject(playerid, 9, WeaponsList[weaponid][wModel], 6, -0.0030, -0.0029, -0.0020, 0.0000, 0.0000, 0.0000, 1.0260, 1.0980, 1.0200, color, color);
			case 25,27,30,31,33,34: SetPlayerAttachedObject(playerid, 9, WeaponsList[weaponid][wModel], 6, -0.0080, -0.0050, -0.0040, 0.0000, 0.5000, 0.7000, 1.0340, 1.1470, 1.0820, color, color);
			default: SetPlayerAttachedObject(playerid, 9, WeaponsList[weaponid][wModel], 6, -0.0030, -0.0029, -0.0040, 0.0000, 0.0000, 0.0000, 1.0260, 1.0980, 1.0200, color, color);

		}
	}
	else {RemovePlayerAttachedObject(playerid, 9);}
}


stock SendQuestPlayersMessage(questid, const string[])
{
    ForEachPlayer(i)
	{
		if(GetGVarInt("Questing", i) == questid)
		{
			SendClientMessage(i, COLOR_WHITE, string);
		}
	}
}

PUBLIC:GymRunStart(playerid)
{
	ApplyAnimation(playerid, "gymnasium", "gym_tread_sprint", 1, 1, 0, 0, 1, 0, 1);
}

PUBLIC:GiveBenchObj(playerid)
{
	static benchid;
	benchid = GetGVarInt("BenchLifting", playerid);
	switch(benchid)
	{
     	case 1: DestroyDynamicObject(LSBell);
        case 2: DestroyDynamicObject(SFBell);
        case 3: DestroyDynamicObject(LVBell1);
        case 4: DestroyDynamicObject(LVBell2);
        case 5: DestroyDynamicObject(BeachBell);
    }
    SetPlayerAttachedObject(playerid, 8, 2913, 6, 0.0000, 0.0000, -0.1750, 0.0000, 0.0000, 0.0000, 1.0000, 1.0000, 1.0000, 0xFFFFFFFF, 0xFFFFFFFF);
}

PUBLIC:RemoveGymObj(playerid)
{
    static benchid;
	benchid = GetGVarInt("BenchLifting", playerid);
	switch(benchid)
	{
     	case 1: LSBell = CreateDynamicObject(2913, 774.42907715, 1.88309872, 1000.68834229, 0.00000000, 270.00000000, 87.99966431);
        case 2: SFBell = CreateDynamicObject(2913, 765.85528564, -48.86857224, 1000.64093018, 0.00000000, 89.49993896, 0.00000000);
        case 3: LVBell1 = CreateDynamicObject(2913, 765.34039307, -59.18271637, 1000.63793945, 0.00000000, 89.49993896, 181.25012207);
        case 4: LVBell2 = CreateDynamicObject(2913, 768.1105, -58.9997, 1000.6553, -2.4999, 90.3000, 0.3999);
        case 5: BeachBell = CreateDynamicObject(2913, 654.3904, -1863.5407, 5.3082, 0.0000, -89.8000, 0.0000);
    }
    RemovePlayerAttachedObject(playerid, 8);
    RemovePlayerAttachedObject(playerid, 7);
}


PUBLIC:ReturnToHuman(playerid)
{
	if(GetGVarInt("Spawned", playerid) == 1 && GetGVarInt("PlayerAnimal", playerid) > ANIMAL_NONE)
	{
	    DeleteGVar("PlayerAnimal", playerid);
	    SendClientMessage(playerid, COLOR_PINK, "** 你变回人类了!");
	    SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
	    KillTimer(GetGVarInt("RTHTimer", playerid));
	}
}

PUBLIC:Peyote()
{
    CreateRandPosResource(116);
    SetTimer("Peyote",3600000*3,0);
}

PUBLIC:Robot()
{
	static rand;
	rand = 3+random(2);
    CreateRandPosResource(117, rand);
    SetTimer("Robot",3600000,0);
}

PUBLIC:DirtyCash()
{
    CreateRandPosResource(118, 1, 1);
    SetTimer("DirtyCash",3600000,0);
}

PUBLIC:BuryTreasure()
{
    new drop = CreateRandPosResource(319, 1, 1);
    SetTimer("BuryTreasure", 3600000, 0);
    printf("%f %f %f", DropItem[drop][idX], DropItem[drop][idY], DropItem[drop][idZ]);
}

PUBLIC:PetTimer(playerid, petid)
{
	if(GetGVarInt("Pet", PetData[playerid][petid][petNPC]) == 1)
	{
	    static Float:ax, Float:ay, Float:az, ownerid, string[144];
	    ownerid = GetGVarInt("PetOwner", PetData[playerid][petid][petNPC]);
	    FCNPC_GetPosition(PetData[playerid][petid][petNPC], ax, ay, az);
	    if(!GetGVarInt("NPCStay", PetData[playerid][petid][petNPC]) && FCNPC_GetHealth(PetData[playerid][petid][petNPC]) > 0.0)
	    {
			static rand;
	        switch(AnimalsList[PetData[playerid][petid][petAnimal]][amlType])
	        {
	            case ANIMAL_DOG_S, ANIMAL_DOG_M, ANIMAL_DOG_L:
	            {
	                rand = random(3);
	                switch(rand)
	                {
		        		case 0:
		        		{
							format(string, sizeof(string), "%s : 汪汪!", PetData[playerid][petid][petName]);
							SendRangeNPCMessage(35.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
						}
		        		case 1:
						{
							format(string, sizeof(string), "%s : 汪!", PetData[playerid][petid][petName]);
							SendRangeNPCMessage(25.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
						}
		        	}
		        }
		        case ANIMAL_CAT:
	            {
	                rand = random(5);
	                switch(rand)
	                {
		        		case 0:
		        		{
							format(string, sizeof(string), "%s : 喵...", PetData[playerid][petid][petName]);
							SendRangeNPCMessage(8.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
						}
		        		case 1..4:
						{
						    if(PetData[playerid][petid][petHunger] < 50.0)
						    {
								format(string, sizeof(string), "%s : 喵~!", PetData[playerid][petid][petName]);
								SendRangeNPCMessage(15.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
							}
						}
		        	}
		        }
		        case ANIMAL_CHICKEN:
	            {
	                rand = random(2);
	                switch(rand)
	                {
		        		case 0:
		        		{
							format(string, sizeof(string), "%s : 咕咕咕..", PetData[playerid][petid][petName]);
							SendRangeNPCMessage(5.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
						}
		        	}
		        }
		        case ANIMAL_SHEEP:
	            {
	                rand = random(3);
	                switch(rand)
	                {
		        		case 0:
		        		{
							format(string, sizeof(string), "%s : 咩", PetData[playerid][petid][petName]);
							SendRangeNPCMessage(10.0, PetData[playerid][petid][petNPC], string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
						}
		        	}
		        }
		    }
		}
	    if(PetData[playerid][petid][petLove] < 100.0 && GetPlayerDistanceFromPointEx(ownerid, ax, ay, az) < 30.0)
		{
			PetData[playerid][petid][petLove] += 0.2;
		}

    	if(PetData[playerid][petid][petHunger] > 0.0){PetData[playerid][petid][petHunger] -= 1.0;}

	    if(FCNPC_GetHealth(PetData[playerid][petid][petNPC]) + 2.0 > 100.0){FCNPC_SetHealth(PetData[playerid][petid][petNPC], 100.0);}
		else if(FCNPC_GetHealth(PetData[playerid][petid][petNPC]) > 0.0){FCNPC_GiveHealth(PetData[playerid][petid][petNPC], 2.0);}
		else
		{
		    if(PetData[playerid][petid][petDying] > 30)
		    {
		        format(string, sizeof(string), "** 你的宠物"#TEXT_WHITE"%s"#TEXT_PINK"伤重死亡了", PetData[playerid][petid][petName]);
		        SendClientMessage(ownerid, COLOR_PINK, string);
		        Log(petlog, INFO, "%s(%d)的宠物%s(%d)死亡了", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
		        DeletePlayerPet(playerid, petid);
		        DestroyNPC(PetData[playerid][petid][petNPC]);
		    }
		    else
		    {
		        PetData[playerid][petid][petDying] ++;
		        format(string, sizeof(string), "** 你的宠物"#TEXT_WHITE"%s"#TEXT_PINK"正处于濒死状态,你必须牺牲自己50点生命治疗,否则过不久将会死亡", PetData[playerid][petid][petName]);
		        SendClientMessage(ownerid, COLOR_PINK, string);
		        SendClientMessage(ownerid, COLOR_PINK, "** 治疗宠物: "#TEXT_YELLOW"前往濒死宠物身旁按F治疗!");
		        ApplyAnimation(PetData[playerid][petid][petNPC], "crack", "crckidle2", 4.1, 1, 0, 0, 0, 0);
		    }

		}
		PetData[playerid][petid][petHealth] = FCNPC_GetHealth(PetData[playerid][petid][petNPC]);
	    FCNPC_SetHealth(PetData[playerid][petid][petNPC], PetData[playerid][petid][petHealth] );

	    if(PetData[playerid][petid][petEggTime] > 0) PetData[playerid][petid][petEggTime] --;
	}
}

PUBLIC:MoveBigFoot()
{
	if(GetGVarInt("BigFootSpawned"))
	{
	    static npcid, moved, rand;
	    npcid = GetGVarInt("BigFootNPC");
	    if(FCNPC_GetHealth(npcid) > 0.0 && IsPlayerNPC(npcid) && GetGVarInt("Animal", npcid) == 22)
		{
		    moved = GetGVarInt("BigFootMoved");
		    SetGVarInt("BigFootMoved", moved + 1);
		    SendRangeNPCMessage(40.0, npcid, "???: 嗷吼吼吼..... ", COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
			switch(GetGVarInt("BigFootMoved"))
			{
			    case 20, 40, 60, 80, 100:
			    {
			        if(!FCNPC_IsAttacking(npcid))
			        {
				        DestroyNPC(npcid);
				        DeleteGVar("Animal", npcid);
				        rand = random(sizeof(BigFootPos));
				        npcid = CreateNPC(25056, 0, 2000.0, 0.0, BigFootPos[rand][0], BigFootPos[rand][1], BigFootPos[rand][2], BigFootPos[rand][3], 0, 0);
					    FCNPC_SetHealth(npcid, 2000.0);
                        SetGVarInt("Animal", 22, npcid);
					    SetTimer("MoveBigFoot", 60000, 0);
					}
				}
				case 120 .. 130:
				{
				    DeleteGVar("BigFootSpawned");
					DeleteGVar("BigFootNPC");
					DeleteGVar("BigFootMoved");
					DeleteGVar("Animal", npcid);
					FCNPC_Destroy(npcid);
			    }
			    default:
			    {
			        rand = random(2);
			        if(rand == 0)
			        {
				        new foundid = GetNearestAnimal_NPC(npcid, 2000.0);
						if(foundid != -1)
						{
				            NPCToTarget(npcid, TARGET_NPC, foundid);
				        }
				    }
				    else
				    {
				        new foundid = GetNearestDrop_NPC(npcid, 2000.0);
						if(foundid != -1)
						{
				            NPCToTarget(npcid, TARGET_DROP, foundid);
				        }
				    }
				    SetTimer("MoveBigFoot", 60000, 0);
				}
			}
	    }
	    else
	    {
         	DeleteGVar("BigFootSpawned");
			DeleteGVar("BigFootNPC");
			DeleteGVar("BigFootMoved");
		}
	}
}

PUBLIC:StripStop(actorid)
{
    static paid;
	if(GetGVarInt("StripDacing", actorid) == 1)
	{
		paid = GetGVarInt("StripPaid", actorid);
		switch(paid)
		{
		    case 0 .. 3: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_a", 4.1, 1, 0, 0, 0, 0);
		    case 4 .. 7: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_b", 4.1, 1, 0, 0, 0, 0);
		    default: ApplyDynamicActorAnimation(actorid, "strip", "str_loop_c", 4.1, 1, 0, 0, 0, 0);
		}
	}
	DeleteGVar("StripDacing", actorid);
}

public OnPlayerStreamIn(playerid, forplayerid)
{
    if(GetGVarInt("Hiding", playerid) == 1 || ConfigData[forplayerid][cfNameTag] == 1
	|| (GetGVarInt("Eventing", playerid) == 1 && Event[GetGVarInt("EventID", playerid)][evType] == EVENT_SURVIVE))
    {
        ShowPlayerNameTagForPlayer(forplayerid, playerid, false);
    }
    else
    {
        ShowPlayerNameTagForPlayer(forplayerid, playerid, true);
    }
    SetPlayerDefaultColorForPlayer(playerid, forplayerid);
    return 1;
}

stock ShowNameTagForPlayer(playerid, show)
{
    ForEachPlayer(i)
	{
		ShowPlayerNameTagForPlayer(playerid, i, show);
	}
}

public OnObjectMoved(objectid)
{
	if(objectid == FerrisWheelObjects[10])
    {
		SetTimer("RotateFerrisWheel", FERRIS_WHEEL_WAIT_TIME, false);
	}
}

public OnDynamicObjectMoved(objectid)
{
	new i, j;
	for(i = 0, j = MAX_AIRDROPS; i < j; i++)
	{
		if(AirDrop[i][edCreated])
		{
			if(objectid == AirDrop[i][edObjectID])
			{
				if(AirDrop[i][edSpawnDrop] == 1)
				{
					if(AirDrop[i][edType] == ITEM_BOMB)
					{
						switch(AirDrop[i][edItemID])
						{
							case 0: CreateExplosion(AirDrop[i][edX], AirDrop[i][edY], AirDrop[i][edZ], 6, 15.0);//大型轰炸
							case 1: CreateExplosion(AirDrop[i][edX], AirDrop[i][edY], AirDrop[i][edZ], 12, 5.0);//大型轰炸
						}
					}
					else CreateDropItem(AirDrop[i][edType], AirDrop[i][edItemID], AirDrop[i][edAmount], AirDrop[i][edX], AirDrop[i][edY], AirDrop[i][edZ], AirDrop[i][edWorld], 900, 0, 0, AirDrop[i][edMatWar]);
				}
				DeleteAirDrop(i);
				break;
			}
		}
	}
}

PUBLIC:RotateFerrisWheel()
{
    FerrisWheelAngle += 36.0;
    if(FerrisWheelAngle>=360.0)FerrisWheelAngle = 0;
    if(FerrisWheelAlternate)FerrisWheelAlternate = 0;
    else FerrisWheelAlternate = 1;
    new Float:FerrisWheelModZPos = 0.0;
    if(FerrisWheelAlternate)FerrisWheelModZPos= 0.05;
    MoveObject(FerrisWheelObjects[10],389.7734,-2028.4688,22.0+FerrisWheelModZPos,FERRIS_WHEEL_SPEED,0.0,FerrisWheelAngle,90.0);
}

public OnPlayerEditObject(playerid, playerobject, objectid, response, Float:fX, Float:fY, Float:fZ, Float:fRotX, Float:fRotY, Float:fRotZ)
{
    static string[144], mode, objlist, itemid, objdata, dymobj;
    mode = GetGVarInt("EditMode", playerid);
    if(mode == SELECT_BUILD)
    {
        switch(response)
        {
            case EDIT_RESPONSE_UPDATE:
            {
                if(GetPlayerSurfingObjectID(playerid) == objectid)
                {//避免玩家站在正在编辑中的物件来飞行移动
                	DeleteGVar("EditObject", playerid);
	                DeleteGVar("EditItem", playerid);
	                DeleteGVar("EditMode", playerid);
	                CancelEdit(playerid);
	                DestroyObject(objectid);
					SendClientMessage(playerid, COLOR_WHITE, "不可以站在正在编辑的物件上");
                }
            }
            case EDIT_RESPONSE_CANCEL:
            {
                DestroyObject(objectid);
                DeleteGVar("EditObject", playerid);
                DeleteGVar("EditItem", playerid);
                DeleteGVar("EditMode", playerid);
            }
            case EDIT_RESPONSE_FINAL:
            {
		        objlist = GetGVarInt("EditObject", playerid),
				itemid = GetGVarInt("EditItem", playerid);
		        if(GetPlayerDistanceFromPointEx(playerid, fX, fY, fZ) > 15.0)
		        {
		            DestroyObject(objectid);
	                DeleteGVar("EditObject", playerid);
	                DeleteGVar("EditItem", playerid);
	                DeleteGVar("EditMode", playerid);
					SendClientMessage(playerid, COLOR_WHITE, "你距离放置位置太远了");
                    return;
		        }
		        CreateObjectData(objlist, playerid, fX, fY, fZ, fRotX, fRotY, fRotZ, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid));
		        GivePlayerItem(playerid, ITEM_USE, itemid, -1);
		        if(PlayerHaveItem(playerid, ITEM_USE, itemid) > 0)
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"已顺利放置 %s,你身上还有%d个", ObjectList[objlist][oName], PlayerHaveItem(playerid, ITEM_USE, itemid));
		        	SendClientMessage(playerid, COLOR_WHITE, string);
		        	SetObjectPos(objectid, fX, fY, fZ);
                	SetObjectRot(objectid, fRotX, fRotY, fRotZ);
		        	EditObject_Fix(playerid, objectid);
		        }
		        else
		        {
		            format(string, sizeof(string), ""#TEXT_WHITE"已顺利放置 %s", ObjectList[objlist][oName]);
		        	SendClientMessage(playerid, COLOR_WHITE, string);
		        	CancelEdit(playerid);
		        	DestroyObject(objectid);
		        	DeleteGVar("EditObject", playerid);
	                DeleteGVar("EditItem", playerid);
	                DeleteGVar("EditMode", playerid);
		        }
		        format(string, sizeof(string), "** %s 放置了一个 %s **", PlayerData[playerid][pName], ObjectList[objlist][oName]);
		    	SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    }
		}
    }
	else if(mode == SELECT_MOVE)
    {
        objdata = GetGVarInt("EditObjData", playerid);
        dymobj = GetGVarInt("EditDymObj", playerid);
        switch(response)
        {
            case EDIT_RESPONSE_UPDATE:
            {
                if(GetPlayerSurfingObjectID(playerid) == objectid)
                {
                    CancelEdit(playerid);
                    DestroyObject(objectid);
	                SetDynamicObjectPos(dymobj, ObjectData[objdata][oX], ObjectData[objdata][oY], ObjectData[objdata][oZ]);
	                SetDynamicObjectRot(dymobj, ObjectData[objdata][oRX], ObjectData[objdata][oRY], ObjectData[objdata][oRZ]);
	                Streamer_Update(playerid);
	                DeleteGVar("EditObjData", playerid);
	                DeleteGVar("EditObject", playerid);
	                DeleteGVar("EditMode", playerid);
					SendClientMessage(playerid, COLOR_WHITE, "不可以站在正在编辑的物件上");
                }
            }
            case EDIT_RESPONSE_CANCEL:
            {
                DestroyObject(objectid);
                SetDynamicObjectPos(dymobj, ObjectData[objdata][oX], ObjectData[objdata][oY], ObjectData[objdata][oZ]);
                SetDynamicObjectRot(dymobj, ObjectData[objdata][oRX], ObjectData[objdata][oRY], ObjectData[objdata][oRZ]);
                Streamer_Update(playerid);
                DeleteGVar("EditObjData", playerid);
                DeleteGVar("EditObject", playerid);
                DeleteGVar("EditMode", playerid);
            }
            case EDIT_RESPONSE_FINAL:
            {
                if(GetPlayerDistanceFromPointEx(playerid, fX, fY, fZ) > 15.0)
		        {
		            DestroyObject(objectid);
	                SetDynamicObjectPos(dymobj, ObjectData[objdata][oX], ObjectData[objdata][oY], ObjectData[objdata][oZ]);
	                SetDynamicObjectRot(dymobj, ObjectData[objdata][oRX], ObjectData[objdata][oRY], ObjectData[objdata][oRZ]);
	                Streamer_Update(playerid);
	                DeleteGVar("EditObjData", playerid);
	                DeleteGVar("EditObject", playerid);
	                DeleteGVar("EditMode", playerid);
					SendClientMessage(playerid, COLOR_WHITE, "你距离放置位置太远了");
                    return;
	            }
                DestroyObject(objectid);
                objlist = GetGVarInt("EditObject", playerid);
                SetDynamicObjectPos(dymobj, fX, fY, fZ);
                SetDynamicObjectRot(dymobj, fRotX, fRotY, fRotZ);
                Streamer_Update(playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"%s移动完成", ObjectList[objlist][oName]);
				SendClientMessage(playerid, COLOR_WHITE, string);
                format(string, sizeof(string), "** %s 移动了这个 %s **", PlayerData[playerid][pName], ObjectList[objlist][oName]);
		    	SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    	ObjectData[objdata][oX] = fX,
		    	ObjectData[objdata][oY] = fY,
		    	ObjectData[objdata][oZ] = fZ,
		    	ObjectData[objdata][oRX] = fRotX,
		    	ObjectData[objdata][oRY] = fRotY,
		    	ObjectData[objdata][oRZ] = fRotZ;
		    	DeleteGVar("EditObjData", playerid);
		    	DeleteGVar("EditObject", playerid);
		    	DeleteGVar("EditMode", playerid);
		    }
		}
	}
}

public OnPlayerSelectDynamicObject(playerid, objectid, modelid, Float:x, Float:y, Float:z)
{
	static string[144], playername[MAX_PLAYER_NAME], plantid, mode;
    mode = GetGVarInt("SelectMode", playerid);
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    switch(mode)
    {
        case SELECT_MOVE:
        {
            if(GetGVarInt("ObjectData", objectid) == 0)
            {
                SendClientMessage(playerid, COLOR_WHITE, "这个不是可选取的物件");
                return ;
            }
            
            new chosed = GetGVarInt("ObjectDataID", objectid),
            	object = ObjectData[chosed][oObjectID], Year, Month, Day, Hour, Minute, Second;
            	
            if(ObjectData[chosed][oOwner] != PlayerData[playerid][pID])
            {
                SendClientMessage(playerid, COLOR_WHITE, "这个不是属于你的物件");
                return ;
            }
			TimestampToDate(ObjectData[chosed][oExpire], Year, Month, Day, Hour, Minute, Second, 8);
			format(string, sizeof(string), ""#TEXT_WHITE"已选择 %s\n移动\n设定开关\n保养(延长有效期限,目前为:%04d/%02d/%02d %02d:%02d:%02d)\n收回\n破坏\n设定密码", ObjectList[object][oName], Year, Month, Day, Hour, Minute, Second);
			ShowPlayerDialog(playerid, DIALOG_OBJECT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "物件", string, "选择", "返回");
			SetGVarInt("DDecideID", chosed, playerid);
			DeleteGVar("SelectMode", playerid);
			CancelEdit(playerid);
        }
		case SELECT_DELETE:
        {
            if(GetGVarInt("ObjectData", objectid) == 0)
            {
                SendClientMessage(playerid, COLOR_WHITE, "这个不是可选取的物件");
				return ;
            }
            new chosed = GetGVarInt("ObjectDataID", objectid);
            DeleteObjectData(chosed);
			format(string, sizeof(string), "已删除物件ID:%d", chosed);
			SendClientMessage(playerid, COLOR_WHITE, string);
			DeleteGVar("SelectMode", playerid);
			CancelEdit(playerid);
        }
	    case SELECT_PLANT_WATER:
	    {
	        for(new i = 0, j = MAX_PLANTS; i < j; i++)
			{
				if(objectid == PlantData[i][ptObject])
				{
					if(!PlayerHaveItem(playerid, 1, 70))
					{
						SendClientMessage(playerid, COLOR_WHITE, "你的水桶已经空了");
						DeleteGVar("SelectMode", playerid);
	    				CancelEdit(playerid);
                        return ;
					}
					if(GetPlayerDistanceFromPointEx(playerid, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]) > 8.0)
					{
						SendClientMessage(playerid, COLOR_WHITE, "你离这个植物太远了");
                        return ;
					}
					UpdatePlayerMission(playerid, 7, 4);
					if(PlantData[i][ptWater] < 30)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这个植物目前不需要浇水");
                        return ;
					}
					plantid = PlantData[i][ptPlantID];
					format(string, sizeof(string), "** %s 正在为植物浇水 **", playername);
			    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    	format(string, sizeof(string), "你为%s浇了水", PlantList[plantid][ptName]);
		    		SendClientMessage(playerid, COLOR_WHITE, string);
		    		PlantData[i][ptWater] = 0;
		    		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
		    		GivePlayerItem(playerid, 1, 70, -1);
		    		UpdatePlantData(i);
					GivePlayerExp(playerid, 30, EXP_PLANT);
			  		RecordData[playerid][prWater] ++;
			  		return;
			    }
			}
		}
		case SELECT_PLANT_HARVEST:
		{
			static Float:px, Float:py, Float:pz, pworld;
			for(new i = 0, j = MAX_PLANTS; i < j; i++)
			{
	   			if(objectid == PlantData[i][ptObject])
				{
					plantid = PlantData[i][ptPlantID];
					pworld = GetPlayerVirtualWorld(playerid);
					GetPlayerPos(playerid, px, py, pz);
					if(GetPlayerDistanceFromPointEx(playerid, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]) > 8.0)
					{
						SendClientMessage(playerid, COLOR_WHITE, "你离这个植物太远了");
                        return ;
					}
					if(PlantData[i][ptOwner] != PlayerData[playerid][pID])
					{
						SendClientMessage(playerid, COLOR_WHITE, "这不是你的植物");
                        return ;
					}
					if(PlantData[i][ptGrowth] < PlantList[plantid][ptMaxGrowth])
					{
						ShowPlayerDialog(playerid, DIALOG_PLANT_DELETE, DIALOG_STYLE_MSGBOX, "植物", ""#TEXT_WHITE"这个植物尚未成熟,如果现在就将其挖起会使它死亡\n确认要舍弃这个植物吗?", "选择", "关闭");
						SetGVarInt("DDecideID", i, playerid);
                        return ;
					}
			    	if(PlantList[plantid][ptType] == 4)
			    	{
			    		format(string, sizeof(string), "** %s 把他的植物收成了 **", playername);
			    		SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    			format(string, sizeof(string), "你把了你的%s做成材料了", PlantList[plantid][ptName]);
		    		}
		    		else
		    		{
		 			    if(!IsPlayerHaveSpace(playerid)){ SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有空间再放任何东西了"); return; }
		 			    UpdatePlayerMission(playerid, 8, 2);
		 			    format(string, sizeof(string), "** %s 把他的植物收入背包了 **", playername);
		    			SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		    			format(string, sizeof(string), "你把了你的%s收入背包了", PlantList[plantid][ptName]);
		  			}
		  			SendClientMessage(playerid, COLOR_WHITE, string);
		    		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
		    		switch(plantid)
		    		{
		    			case 1: GivePlayerItem(playerid, 1, 71, 1);//盆栽
		    			case 2: GivePlayerItem(playerid, 1, 72, 1);
		    			case 3: GivePlayerItem(playerid, 1, 73, 1);
		    			case 4: GivePlayerItem(playerid, 1, 74, 1);
		    			case 5: GivePlayerItem(playerid, 1, 75, 1);
		    			case 6: GivePlayerItem(playerid, 1, 76, 1);
		    			case 7: GivePlayerItem(playerid, 1, 80, 1);
		    			case 8: GivePlayerItem(playerid, 1, 81, 1);
		    			case 9: GivePlayerItem(playerid, 1, 82, 1);
		    			case 10: GivePlayerItem(playerid, 1, 104, 1);
		    			case 11: GivePlayerItem(playerid, 1, 105, 1);
		    			case 12: GivePlayerItem(playerid, 1, 106, 1);
		    			case 13:
		    			{
							CreateDropItem(ITEM_USE, 42, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 42, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 42, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 42, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 42, 4, px, py, pz, pworld);
						}
						case 14:
		    			{
							CreateDropItem(ITEM_USE, 43, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 43, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 43, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 43, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 43, 4, px, py, pz, pworld);
						}
						case 15:
		    			{
							CreateDropItem(ITEM_USE, 44, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 44, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 44, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 44, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 44, 4, px, py, pz, pworld);
						}
						case 16:
		    			{
							CreateDropItem(ITEM_USE, 114, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 114, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 114, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 114, 4, px, py, pz, pworld);
							CreateDropItem(ITEM_USE, 114, 4, px, py, pz, pworld);
						}
						case 17: GivePlayerItem(playerid, 1, 305, 1);
		    		}
		    		DeletePlant(i);
		    		GivePlayerExp(playerid, 150, EXP_PLANT);
		    		//DeleteGVar("SelectMode", playerid);
					//CancelEdit(playerid);
					return;
				}
			}
		}
		case SELECT_PLANT_POISON:
	    {
	        for(new i = 0, j = MAX_PLANTS; i < j; i++)
			{
				if(objectid == PlantData[i][ptObject])
				{
					if(!PlayerHaveItem(playerid, 1, 320))
					{
						SendClientMessage(playerid, COLOR_WHITE, "你的巴拉刈已经用完了");
						DeleteGVar("SelectMode", playerid);
	    				CancelEdit(playerid);
                        return ;
					}
					if(GetPlayerDistanceFromPointEx(playerid, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]) > 8.0)
					{
						SendClientMessage(playerid, COLOR_WHITE, "你离这个植物太远了");
                        return ;
					}
					if(PlantData[i][ptHealth] == 2)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这个植物已经被下毒了");
                        return ;
					}
					plantid = PlantData[i][ptPlantID];
					format(string, sizeof(string), "** %s 正在对植物洒农药 **", playername);
			    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    	format(string, sizeof(string), "你对这%s下了毒,使其开始倒退生长", PlantList[plantid][ptName]);
		    		SendClientMessage(playerid, COLOR_WHITE, string);

		    		PlantData[i][ptHealth] = 2;
		    		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
		    		GivePlayerItem(playerid, 1, 320, -1);
		    		UpdatePlantData(i);
		    		return;
			    }
			}
		}
		case SELECT_PLANT_CURE:
	    {
	        for(new i = 0, j = MAX_PLANTS; i < j; i++)
			{
				if(objectid == PlantData[i][ptObject])
				{
					if(!PlayerHaveItem(playerid, 1, 321))
					{
						SendClientMessage(playerid, COLOR_WHITE, "你的百草兴已经用完了");
						DeleteGVar("SelectMode", playerid);
	    				CancelEdit(playerid);
                        return ;
					}
					if(GetPlayerDistanceFromPointEx(playerid, PlantData[i][ptX], PlantData[i][ptY], PlantData[i][ptZ]) > 8.0)
					{
						SendClientMessage(playerid, COLOR_WHITE, "你离这个植物太远了");
                        return ;
					}
					if(PlantData[i][ptHealth] != 2)
					{
						SendClientMessage(playerid, COLOR_WHITE, "这个植物没有中毒");
                        return ;
					}
					plantid = PlantData[i][ptPlantID];
					format(string, sizeof(string), "** %s 正在对植物施放解药 **", playername);
			    	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			    	format(string, sizeof(string), "你对这%s使用百草兴,解除了其所中的毒", PlantList[plantid][ptName]);
		    		SendClientMessage(playerid, COLOR_WHITE, string);

		    		PlantData[i][ptHealth] = 0;
		    		ApplyAnimationEx(playerid, "BOMBER", "BOM_PLANT_2IDLE", 4.1, 0, 0, 0, 0, 0, 1);
		    		GivePlayerItem(playerid, 1, 321, -1);
		    		UpdatePlantData(i);
		    		return;
			    }
			}
		}
	}
}

PUBLIC:RaceCount(raceid)
{
	static string[144];
	if(RaceData[raceid][rtStatus] == STATUS_WAITING)
	{
	    static racetype[32], count;
	    RaceData[raceid][rtCount] -= 1;
	    count = RaceData[raceid][rtCount];
	    switch(count)
	    {
	        case 60,30:
	        {
				switch(RaceData[raceid][rtType])
				{
					case RACE_ROAD_A: format(racetype, sizeof(racetype), "陆(海)上赛道[指定载具]");
					case RACE_ROAD_C: format(racetype, sizeof(racetype), "陆(海)上赛道[自备载具]");
					case RACE_AIR_A: format(racetype, sizeof(racetype), "空中赛道[指定机具]");
					case RACE_AIR_C: format(racetype, sizeof(racetype), "空中上赛道[自备机具]");
					case RACE_LAP_A: format(racetype, sizeof(racetype), "环状赛道[指定载具]");
					case RACE_LAP_C: format(racetype, sizeof(racetype), "环状赛道[自备载具]");
				}
		    	format(string, sizeof(string), "<<竞速>> "#TEXT_SKYBLUE"赛道 %s 将在 %d 秒后开始,到达集合地点按Y可以参赛,竞速类型: "#TEXT_YELLOW" %s", RaceData[raceid][rtName], count, racetype);
		    	SendClientMessageToAll(COLOR_PINK, string);
		    }
		    case 1..10:
		    {
		        ForEachPlayer(i)
		        {
		            if(GetGVarInt("Racing", i) == STATUS_WAITING && GetGVarInt("RaceID", i) == raceid)
		            {
		                format(string, sizeof(string), "~g~%d", count);
						GameTextForPlayer(i, string, 800, 3);
						PlayerPlaySound(i, 1056, 0.0, 0.0, 0.0);
					}
				}
			}
			case 0:
			{
			    KillTimer(RaceData[raceid][rtCountTimer]);
				RaceData[raceid][rtCount] = 0;
			    if(RaceData[raceid][rtRacers] == 0)
			    {
			        format(string, sizeof(string), "<<竞速>> "#TEXT_SKYBLUE"赛道 %s 因为无人参与所以已经自动结束了", RaceData[raceid][rtName]);
		    		SendClientMessageToAll(COLOR_PINK, string);
		    		RaceEnd(raceid);
		    	}
		    	else
		    	{
					RaceStart(raceid);
				}
				UpdateRaceInfo(raceid);
			}
		}
		RaceData[raceid][rtCountTimer] = SetTimerEx("RaceCount", 1000, 0, "d", raceid);
	}
}

PUBLIC:RaceStart(raceid)
{
	if(RaceData[raceid][rtStatus] == STATUS_WAITING)
	{
	    static ticker, hours, mins, secs;
	    ticker = GetTickCount();
		gettime(hours, mins, secs);
		RaceData[raceid][rtStatus] = STATUS_STARTED;
		RaceData[raceid][rtStartTime] = ticker;
		UpdateRaceInfo(raceid);
		static vehicleid, engine, lights, alarm, doors, bonnet, boot, objective;
		ForEachPlayer(i)
		{
			if(GetGVarInt("Racing", i) != STATUS_FINISHED && GetGVarInt("RaceID", i) == raceid)
			{
				GameTextForPlayer(i, "~r~GO!", 800, 3);
				PlayerPlaySound(i, 1057, 0.0, 0.0, 0.0);
				TogglePlayerControllableEx(i, 1);
				SetPlayerArmedWeapon(i, 0);
				SetGVarInt("RaceCPTime", 120, i);
				SetGVarInt("Racing", STATUS_STARTED, i);
				SetGVarInt("NowRCP", 0, i);
				UpdatePlayerColor(i);
				SetRCP(i);
			    vehicleid = GetPlayerVehicleID(i);
			    GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			    if(hours > 18 || hours < 6) lights = 1;
				SetVehicleParamsEx(vehicleid, 1, lights, alarm, doors, bonnet, boot, objective);
				SetTimerEx("RaceCPCount", 1000, 0, "i", i);

				SetGVarInt("RaceCPMs", 0, i);
				ShowPlayerRightTD(i, RTD_RACETIME);
				ShowPlayerRightTD(i, RTD_RACECOUNT);
				ShowPlayerRightTD(i, RTD_RACECP);
			}
		}
	}
}

static SetRCP(playerid)
{
	if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)
	{
	    static raceid, rcp;
	    raceid = GetGVarInt("RaceID", playerid);
	    rcp = GetGVarInt("NowRCP", playerid);
	    switch(RaceData[raceid][rtType])
		{
			case RACE_ROAD_A, RACE_ROAD_C:
			{
				if(RaceData[raceid][rtMaxCP] == rcp + 1)
				{
					SetPlayerRaceCheckpoint(playerid, 1, RCPData[raceid][rcp][rcpX], RCPData[raceid][rcp][rcpY], RCPData[raceid][rcp][rcpZ], RCPData[raceid][rcp+1][rcpX], RCPData[raceid][rcp+1][rcpY], RCPData[raceid][rcp+1][rcpZ], 15.0);
				}
				else
				{
				    SetPlayerRaceCheckpoint(playerid, 0, RCPData[raceid][rcp][rcpX], RCPData[raceid][rcp][rcpY], RCPData[raceid][rcp][rcpZ], RCPData[raceid][rcp+1][rcpX], RCPData[raceid][rcp+1][rcpY], RCPData[raceid][rcp+1][rcpZ], 12.0);
				}
			}
			case RACE_AIR_A, RACE_AIR_C:
			{
				if(RaceData[raceid][rtMaxCP] == rcp + 1)
				{
					SetPlayerRaceCheckpoint(playerid, 4, RCPData[raceid][rcp][rcpX], RCPData[raceid][rcp][rcpY], RCPData[raceid][rcp][rcpZ], RCPData[raceid][rcp+1][rcpX], RCPData[raceid][rcp+1][rcpY], RCPData[raceid][rcp+1][rcpZ], 12.0);
				}
				else
				{
				    SetPlayerRaceCheckpoint(playerid, 3, RCPData[raceid][rcp][rcpX], RCPData[raceid][rcp][rcpY], RCPData[raceid][rcp][rcpZ], RCPData[raceid][rcp+1][rcpX], RCPData[raceid][rcp+1][rcpY], RCPData[raceid][rcp+1][rcpZ], 12.0);
				}
			}
		}
	}
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	static string[144];
	if(GetGVarInt("Mission", playerid) > 0)
	{
	    new mission = GetGVarInt("Mission", playerid);
	    if(IsPlayerInAnyVehicle(playerid))
	    {
	        new vehicleid = GetPlayerVehicleID(playerid);
	        if(GetGVarInt("VehMission", vehicleid) == mission)
	        {
		        switch(mission)
		        {
		            case 33:
		            {
		                if(GetGVarInt("MSVehLoaded", vehicleid) == 1)
						{
						    new target = GetGVarInt("MSVehTarget", vehicleid), Float:px, Float:py, Float:pz;
							DestroyDynamicObject(GetGVarInt("MSTargetObject", target));
							DisablePlayerRaceCheckpoint(playerid);
							GetVehiclePos(vehicleid, px, py, pz);
							CreateAirDrop(ITEM_USE, 1, 1, px, py, pz-1.0, 0, 12.0, 0);
							PlayerPlaySound(playerid, 11200, 0.0, 0.0, 0.0);
              				format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"运送了一个补给物资", PlayerData[playerid][pName]);
							SendMissionMessage(mission, COLOR_WHITE, string);
							SetVehicleParamsForPlayer(vehicleid, playerid, 0, 0);

							DeleteGVar("MSVehTarget", vehicleid);
							DeleteGVar("MSVehLoaded", vehicleid);
							SetGVarInt("VUnStreamDel", 1, vehicleid);
							UpdateGlobalMission(33, 3);
						}
					}
	            }
	        }
	    }
	}
    else if(GetGVarInt("Racing", playerid) != STATUS_FINISHED)
	{
        //SendClientMessage(playerid, COLOR_FADEGREEN, "!=STATUS_完成");
        
        
	    static raceid, rcp;
	    raceid = GetGVarInt("RaceID", playerid);
	    rcp = GetGVarInt("NowRCP", playerid);
	    if(RaceData[raceid][rtStatus] == STATUS_STARTED && GetPlayerState(playerid) == 2 && GetGVarInt("RaceVeh", playerid) == GetPlayerVehicleID(playerid))
	    {
	        //SendClientMessage(playerid, COLOR_FADEGREEN, "=STATUS_开始");
	        
	        static hours, minutes, seconds, miliseconds, finishtime, pos;
	        finishtime = GetTickCount() - RaceData[raceid][rtStartTime];
		    MilisecondToHMS(finishtime, hours, minutes, seconds, miliseconds);

	        DisablePlayerRaceCheckpoint(playerid);
	        PlayerPlaySound(playerid, 1137, 0.0, 0.0, 0.0);
		    if(rcp + 1 == RaceData[raceid][rtMaxCP])
		    {
                //SendClientMessage(playerid, COLOR_FADEGREEN, "破纪录");
                
		        new exp = 500, price = 1500;
				RecordData[playerid][prRace] ++;
		        if(RaceData[raceid][rtFinishedRacers] == 0)
		        {
		            RaceData[raceid][rtFirstFinishedTime] = finishtime;
		            if(RaceData[raceid][rtFirstFinishedTime] < RaceData[raceid][rtFastestTime])
		            {
		                RaceData[raceid][rtFastestTime] = finishtime;
		                RaceData[raceid][rtFastestRacer] = PlayerData[playerid][pID];
		                SendClientMessage(playerid, COLOR_FADEGREEN, "<<"#TEXT_YELLOW"刷新纪录"#TEXT_FADEGREEN">> 刷新了这个赛道的历史纪录!");
		            }
		        }
		        RaceData[raceid][rtFinishedRacers] += 1;
		        pos = RaceData[raceid][rtFinishedRacers];
		        format(string, sizeof(string), "<<竞速>> "#TEXT_YELLOW"你的时间"#TEXT_FADEGREEN"%02d:%02d:%02d.%03d"#TEXT_YELLOW"完成了比赛,名次为"#TEXT_PINK"第%d名", hours, minutes, seconds, miliseconds, pos);
		        SendClientMessage(playerid, COLOR_PINK, string);
		        ShowPTD(playerid, 3, pos);
		        if(pos > 1)
		        {
		            finishtime = finishtime - RaceData[raceid][rtFirstFinishedTime];
		            MilisecondToHMS(finishtime, hours, minutes, seconds, miliseconds);
		            format(string, sizeof(string), "** 你与第一名相差了"#TEXT_FADEGREEN"%d.%03d秒", seconds, miliseconds);
		        	SendClientMessage(playerid, COLOR_ORANGE, string);
		        }
		        GiveMoney(playerid, price*(RaceData[raceid][rtRacers]+1-pos));
		        Log(moneylog, INFO, "%s(%d)完成竞速获得了奖金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], price*(RaceData[raceid][rtRacers]+1-pos));
		        GivePlayerExp(playerid, exp, EXP_RACE);
		        PlayerLeaveRace(playerid, raceid);
		    }
		    else
		    {
		        //SendClientMessage(playerid, COLOR_FADEGREEN, "下一点");
		        
		        SetGVarInt("RaceCPTime", 120, playerid);
		        SetGVarInt("NowRCP", rcp+1, playerid);
		        SetRCP(playerid);
				SetGVarInt("RaceCPMs", finishtime, playerid);
				UpdateRightTD(playerid);
		    }
		}
	}
	return 1;
}

public OnPlayerLeaveRaceCheckpoint(playerid)
{
	return 1;
}

PUBLIC:RaceEndCount(raceid)
{
    static string[144];
	if(RaceData[raceid][rtStatus] == STATUS_STARTED)
	{
	    static count;
	    RaceData[raceid][rtCount] -= 1;
	    count = RaceData[raceid][rtCount];
	    switch(count)
	    {
	        case 0:
	        {
	            KillTimer(RaceData[raceid][rtCountTimer]);
				RaceEnd(raceid);
			    RaceData[raceid][rtCount] = 0;
		    	format(string, sizeof(string), "<<竞速>> "#TEXT_SKYBLUE"赛道 %s 的比赛已经结束!", RaceData[raceid][rtName]);
		    	SendClientMessageToAll(COLOR_PINK, string);
		    }
		    default:
		    {
		        ForEachPlayer(i)
		        {
		            if(GetGVarInt("Racing", i) == STATUS_STARTED && GetGVarInt("RaceID", i) == raceid)
		            {
		                format(string, sizeof(string), ""#TEXT_WHITE"%d", count);
						GameTextForPlayer(i, string, 900, 3);
						PlayerPlaySound(i, 1056, 0.0, 0.0, 0.0);
					}
				}
			}
		}
		RaceData[raceid][rtCountTimer] = SetTimerEx("RaceEndCount", 1000, 0, "d", raceid);
	}
}

static RaceEnd(raceid)
{
	//static string[144];
	SaveRaceData(raceid);
	if(RaceData[raceid][rtStatus] != STATUS_FINISHED)
	{
	    RaceData[raceid][rtStatus] = STATUS_FINISHED;
	    RaceData[raceid][rtCountTimer] =
	    RaceData[raceid][rtCount] =
	    RaceData[raceid][rtRacers] =
	    RaceData[raceid][rtStartTime] =
	    RaceData[raceid][rtFirstFinishedTime] =
	    RaceData[raceid][rtFinishedRacers] = 0;
        UpdateRaceInfo(raceid);
	    ForEachPlayer(i)
		{
		    if(GetGVarInt("Racing", i) != STATUS_FINISHED && GetGVarInt("RaceID", i) == raceid)
		    {
		        PlayerLeaveRace(i, raceid);
			}
		}
	}
}

static SetPlayerInRacePos(playerid, raceid)
{
    static string[144], Float:px, Float:py, Float:pz, vehicleid, i, j;
	if(RaceData[raceid][rtStatus] == STATUS_FINISHED)
	{
	    PrepareRace(raceid);
	}
    SetGVarInt("Racing", STATUS_WAITING, playerid);
	SetGVarInt("RaceID", raceid, playerid);
	SetGVarInt("NowRCP", 0, playerid);
	vehicleid = GetPlayerVehicleID(playerid);
	SetGVarInt("RV", 1, vehicleid);
	RaceData[raceid][rtRacers] += 1;
	UpdateRaceInfo(raceid);
	switch(RaceData[raceid][rtRacers])
	{
		case 1:
		{
			SetVehiclePos(vehicleid, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z]);
			SetVehicleZAngle(vehicleid, RaceData[raceid][rtStartPos1A]);
		}
		case 2:
		{
			SetVehiclePos(vehicleid, RaceData[raceid][rtStartPos2X], RaceData[raceid][rtStartPos2Y], RaceData[raceid][rtStartPos2Z]);
			SetVehicleZAngle(vehicleid, RaceData[raceid][rtStartPos2A]);
		}
		case 3,5,7,9:
		{
			GetXYBehindPos(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1A], px, py, 4.0*RaceData[raceid][rtRacers]-1/2);
			SetVehiclePos(vehicleid, px, py, RaceData[raceid][rtStartPos1Z]+1.0);
			SetVehicleZAngle(vehicleid, RaceData[raceid][rtStartPos1A]);
		}
		case 4,6,8,10:
		{
			GetXYBehindPos(RaceData[raceid][rtStartPos2X], RaceData[raceid][rtStartPos2Y], RaceData[raceid][rtStartPos2A], px, py, 4.0*RaceData[raceid][rtRacers]/2);
			SetVehiclePos(vehicleid, px, py, RaceData[raceid][rtStartPos2Z]+1.0);
			SetVehicleZAngle(vehicleid, RaceData[raceid][rtStartPos2A]);
		}
	}

	GetPlayerPos(playerid, px, py, pz);
	for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
	    if(IsVehicleOccupied(i)) continue;
		if(GetVehicleDistanceFromPoint(i, px, py, pz) < 5.0 && GetGVarInt("RV", i) == 0)
		{
		    SetVehicleToRespawn(i);
		}
	}
	TogglePlayerControllableEx(playerid, 0);
	SetCameraBehindPlayer(playerid);
 	ForEachPlayer(p)
	{
		if(GetGVarInt("Racing", p) == STATUS_WAITING && GetGVarInt("RaceID", p) == raceid)
		{
   			format(string, sizeof(string), "<<竞速>> "#TEXT_ORANGE" %s 加入了比赛", PlayerData[playerid][pName]);
			SendClientMessage(p, COLOR_PINK, string);
		}
	}
}

static PlayerLeaveRace(playerid, raceid)
{
	new string[144];
    DeleteGVar("Racing", playerid);
	DeleteGVar("RaceID", playerid);
	DeleteGVar("NowRCP", playerid);
	DisablePlayerRaceCheckpoint(playerid);
	HidePlayerRightTD(playerid, RTD_RACECOUNT);
	HidePlayerRightTD(playerid, RTD_RACETIME);
	HidePlayerRightTD(playerid, RTD_RACECP);
	if(RaceData[raceid][rtStatus] != STATUS_FINISHED)
	{
		if(GetGVarInt("RaceVeh", playerid) != 0)
		{
		    new raceveh = GetGVarInt("RaceVeh", playerid);
		    if(!PlayerCanSetVehicle(playerid, raceveh)) VehData[raceveh][vLock] = 0;
			if(GetGVarInt("TempRV", raceveh) == 1)
			{
				new engine, lights, alarm, doors, bonnet, boot, objective;
			    GetVehicleParamsEx(raceveh, engine, lights, alarm, doors, bonnet, boot, objective);
				SetVehicleParamsEx(raceveh, engine, lights, alarm, 1, bonnet, boot, objective);
				DestroyVehicle(raceveh);
				RemovePlayerFromVehicle_Fix(playerid);
				TogglePlayerControllableEx(playerid, 0);
				SetPlayerTimerEx(playerid, "UnFreeze", 500, 0, "i", playerid);
			}
			DeleteGVar("RaceVeh", playerid);
			DeleteGVar("RV", raceveh);
		}
		UpdatePlayerColor(playerid);
		RaceData[raceid][rtRacers] -= 1;
		if(RaceData[raceid][rtRacers] < 1)
		{
		    format(string, sizeof(string), "<<竞速>> "#TEXT_SKYBLUE"赛道 %s 的比赛已经结束!", RaceData[raceid][rtName]);
			SendClientMessageToAll(COLOR_PINK, string);
		    RaceEnd(raceid);
		}
	}
}

PUBLIC:RaceLeaveCount(playerid)
{
	new raceid, string[128],
	leavecount = GetGVarInt("RaceLeaveCount", playerid);
	if(GetGVarInt("Racing", playerid) == STATUS_STARTED)
	{
		if(leavecount > 0)
		{
			raceid = GetGVarInt("RaceID", playerid);
			SetGVarInt("RaceLeaveCount", leavecount-1, playerid);
			switch(leavecount)
			{
				case 1:
				{
					PlayerLeaveRace(playerid, raceid);
					SendClientMessage(playerid, COLOR_WHITE, ""#TEXT_RED"你因为离开比赛载具而被取消资格");
				}
				default:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"你必须在%d秒内回到你的比赛载具,否则将失败比赛资格!", GetGVarInt("RaceLeaveCount", playerid));
					SendClientMessage(playerid, COLOR_WHITE, string);
					PlayerPlaySound(playerid, 1056, 0.0, 0.0, 0.0);
				}
			}
			SetTimerEx("RaceLeaveCount", 1000, 0, "i", playerid);
		}
	}
}

PUBLIC:VendCheck(playerid)
{
    if(GetPlayerAnimationIndex(playerid) == 1660)
    {
        GiveMoney(playerid, -VENDPRICE);
        SetTimerEx("VendRecover", 2500, false, "d", playerid);
    }
}

PUBLIC:VendRecover(playerid)
{
	PlayerData[playerid][pHunger] += 5.0;
	GiveHealth(playerid, 15.0);
}

PUBLIC:RaceCPCount(playerid)
{
	if(GetGVarInt("Racing", playerid) == STATUS_STARTED)
	{
		new
		count = GetGVarInt("RaceCPTime", playerid),
		raceid = GetGVarInt("RaceID", playerid);
		switch(count)
		{
		    case 0:
		    {
		        PlayerLeaveRace(playerid, raceid);
				SendClientMessage(playerid, COLOR_ORANGE, "** 你因为超过时间而未到检查点而失去资格");
			}
			case 1..10:
			{
				PlayerPlaySound(playerid, 1056, 0.0, 0.0, 0.0);
			}
		}
		SetGVarInt("RaceCPTime", count-1, playerid);
		SetTimerEx("RaceCPCount", 1000, 0, "i", playerid);
		UpdateRightTD(playerid);
	}
}

PUBLIC:PrepareRace(raceid)
{
	if(RaceData[raceid][rtStatus] == STATUS_FINISHED)
	{
	    RaceData[raceid][rtStatus] = STATUS_WAITING;
	    RaceData[raceid][rtCount] = 61;
	    RaceData[raceid][rtCountTimer] = SetTimerEx("RaceCount", 1000, 0, "d", raceid);
	    LoadRaceCheckPoints(raceid);
	    UpdateRaceInfo(raceid);
	}
}

static UpdateRaceInfo(raceid)
{
	new string[144];
	if(RaceData[raceid][rtType] > RACE_NONE)
	{
		switch(RaceData[raceid][rtStatus])
		{
		    case STATUS_FINISHED:
		    {
		        DestroyDynamicMapIcon(RaceData[raceid][rtMapIcon]);
			 	RaceData[raceid][rtMapIcon] = CreateDynamicMapIcon(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 53, -1, 0, 0, -1, 200.0, MAPICON_LOCAL_CHECKPOINT);
			 	DestroyDynamic3DTextLabel(RaceData[raceid][rt3DText]);
				format(string, sizeof(string), ""#TEXT_PINK"<<"#TEXT_YELLOW"%s"#TEXT_PINK">>\n"#TEXT_WHITE"人数: 1-%d\n"#TEXT_YELLOW"按Y键加入竞速", RaceData[raceid][rtName], RaceData[raceid][rtMaxRacers]);
			    RaceData[raceid][rt3DText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 60.0);
			    DeleteGPS(RaceData[raceid][rtGPS]);
			 	RaceData[raceid][rtGPS] = CreateGPS(RaceData[raceid][rtName], RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], GPS_RACE);
			}
			case STATUS_STARTED:
		    {
		        DestroyDynamicMapIcon(RaceData[raceid][rtMapIcon]);
			 	RaceData[raceid][rtMapIcon] = CreateDynamicMapIcon(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 53, -1, 0, 0, -1, 200.0, MAPICON_LOCAL);
			 	DestroyDynamic3DTextLabel(RaceData[raceid][rt3DText]);
				format(string, sizeof(string), ""#TEXT_PINK"<<"#TEXT_YELLOW"%s"#TEXT_PINK">>\n"#TEXT_WHITE"人数: 1-%d\n"#TEXT_LIGHTRED"比赛进行中", RaceData[raceid][rtName], RaceData[raceid][rtMaxRacers]);
			    RaceData[raceid][rt3DText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 60.0);
			    DeleteGPS(RaceData[raceid][rtGPS]);
			 	RaceData[raceid][rtGPS] = CreateGPS(RaceData[raceid][rtName], RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], GPS_RACE);
			}
			case STATUS_WAITING:
		    {
		        DestroyDynamicMapIcon(RaceData[raceid][rtMapIcon]);
			 	RaceData[raceid][rtMapIcon] = CreateDynamicMapIcon(RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 53, -1, 0, 0, -1, 6000.0, MAPICON_GLOBAL_CHECKPOINT);
			 	DestroyDynamic3DTextLabel(RaceData[raceid][rt3DText]);
				format(string, sizeof(string), ""#TEXT_PINK"<<"#TEXT_YELLOW"%s"#TEXT_PINK">>\n"#TEXT_WHITE"目前人数: %d/%d\n"#TEXT_FADEGREEN"按Y键加入竞速", RaceData[raceid][rtName], RaceData[raceid][rtRacers], RaceData[raceid][rtMaxRacers]);
			    RaceData[raceid][rt3DText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], 60.0);
			    DeleteGPS(RaceData[raceid][rtGPS]);
			 	RaceData[raceid][rtGPS] = CreateGPS(RaceData[raceid][rtName], RaceData[raceid][rtStartPos1X], RaceData[raceid][rtStartPos1Y], RaceData[raceid][rtStartPos1Z], GPS_RACE);
			}
		}
	}
}


stock GetPlayerSqlName(sqlid)
{
	new query[128], name[MAX_PLAYER_NAME];
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `name` FROM `playerdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index(0, 0, name);
    cache_delete(c_query);
    return name;
}

stock GetPlayerSqlLevel(sqlid)
{
	new query[128], level;
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `level` FROM `playerdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index_int(0, 0, level);
    cache_delete(c_query);
    return level;
}

stock GetPlayerSqlCompany(sqlid)
{
	new query[128], company;
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `company` FROM `playerdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index_int(0, 0, company);
    cache_delete(c_query);
    return company;
}

stock GetPlayerSqlDept(sqlid)
{
	new query[128], dpid;
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `department` FROM `playerdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index_int(0, 0, dpid);
    cache_delete(c_query);
    return dpid;
}

stock GetPlayerSqlGang(sqlid)
{
	new query[128], gang;
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `gang` FROM `playerdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index_int(0, 0, gang);
    cache_delete(c_query);
    return gang;
}

stock GetCompanySqlName(sqlid)
{
	new query[128], name[MAX_PLAYER_NAME];
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `Name` FROM `companydata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index(0, 0, name);
    cache_delete(c_query);
    return name;
}

stock GetGangSqlName(sqlid)
{
	new query[128], name[MAX_PLAYER_NAME];
    mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT `Name` FROM `gangdata` WHERE `id`='%d'", sqlid);
    new Cache:c_query = mysql_query(MYSQL_SESSION_A, query);
    cache_get_value_index(0, 0, name);
    cache_delete(c_query);
    return name;
}

static ShowXTarget(playerid)
{
	if(GetPlayerWeapon(playerid) == 34 || GetPlayerWeapon(playerid) == 35 || GetPlayerWeapon(playerid) == 36){}
    else
    {
        PlayerTextDrawShow(playerid, xtarget[playerid]);
    }
    SetPlayerTimerEx(playerid, "HideXTarget", 800, false, "i", playerid);
}

PUBLIC:HideXTarget(playerid)
{
    PlayerTextDrawHide(playerid, xtarget[playerid]);
}

stock ShowPlayerChatMenu(playerid)
{
	new string[256], l;

    format(string, sizeof(string), "%s "#TEXT_SKYBLUE"世界频道(/o)\n", string);
	SetGVarInt("DListID", CHAT_ALL, l*1000+playerid);
 	l++;

 	if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR || PlayerData[playerid][pLevel] < 15)
 	{
	    format(string, sizeof(string), "%s "#TEXT_PINKRED"新手频道(/n)\n", string);
		SetGVarInt("DListID", CHAT_NEWBIE, l*1000+playerid);
	 	l++;
	}

    if(GetPlayerTeam(playerid) != NO_TEAM)
    {
	    format(string, sizeof(string), "%s "#TEXT_LIGHTBLUE"小队频道(/t)\n", string);
		SetGVarInt("DListID", CHAT_TEAM, l*1000+playerid);
	 	l++;
	}

	if(PlayerData[playerid][pDepartment] > 0)
    {
	    format(string, sizeof(string), "%s "#TEXT_FADEBLUE"部门频道(/d)\n", string);
		SetGVarInt("DListID", CHAT_DEPT, l*1000+playerid);
	 	l++;

	 	format(string, sizeof(string), "%s "#TEXT_YELLOW"政府频道(/gov)\n", string);
		SetGVarInt("DListID", CHAT_DEPT_ALL, l*1000+playerid);
	 	l++;
	}

	if(PlayerData[playerid][pCompany] != COMPANY_ID_NONE)
    {
	    format(string, sizeof(string), "%s "#TEXT_BLUEGREEN"企业频道(/c)\n", string);
		SetGVarInt("DListID", CHAT_COMPANY, l*1000+playerid);
	 	l++;
	}

	if(PlayerData[playerid][pGang] != GANG_ID_NONE)
    {
	    format(string, sizeof(string), "%s "#TEXT_LIGHTRED"帮会频道(/g)\n", string);
		SetGVarInt("DListID", CHAT_GANG, l*1000+playerid);
	 	l++;
	}

	format(string, sizeof(string), "%s "#TEXT_SANDYELLOW"动作消息(/me)\n", string);
	SetGVarInt("DListID", CHAT_RANGE, l*1000+playerid);
 	l++;

 	format(string, sizeof(string), "%s "#TEXT_WHITE"周围呼喊(/s)\n", string);
	SetGVarInt("DListID", CHAT_SHOUT, l*1000+playerid);
 	l++;

 	ShowPlayerDialog(playerid, DIALOG_CHAT, DIALOG_STYLE_LIST, "聊天频道", string, "选择", "取消");
 	UpdatePlayerMission(playerid, 2, 3);
}

stock ShowPlayerRegMenu(playerid, step=0)
{
	new string[768], Float:camX, Float:camY;
	switch(step)
	{
	    case 0:
	    {
	        ClearChatbox(playerid, 10);
	        format(string, sizeof(string), ""#TEXT_WHITE"亲爱的"#TEXT_FADEGREEN"%s"#TEXT_WHITE":\n欢迎来到"#TEXT_YELLOW"圣安地列斯州"#TEXT_WHITE"!在我们开始进行导览之前\n我们得先了解一下关于你的角色的背景\n按下"#TEXT_YELLOW"确认键"#TEXT_WHITE"让我们开始吧!", PlayerData[playerid][pName]);
	        ShowPlayerDialog(playerid, DIALOG_REGINFO, DIALOG_STYLE_MSGBOX, "完成个人资料", string, "确认", "");

	        SetPlayerSkin_Fix(playerid, 250);
	        SetPlayerVirtualWorld(playerid, 100 + playerid);
	        SetPlayerInterior(playerid, 1);
		    SetPlayerPos_Fix(playerid, 1.7510,26.5699,1199.5938);
		    SetPlayerFacingAngle(playerid, 357.3862);
		    GetXYInFrontOfPos(1.7510,26.5699, 357.3862, camX, camY, 4.0);
		    SetPlayerCameraPos(playerid, camX, camY, 1199.5938);
		    SetPlayerCameraLookAt(playerid, 1.7510,26.5699,1199.5938);
	    }
	    case 1:
	    {
	        ShowPlayerDialog(playerid, DIALOG_REGINFO1, DIALOG_STYLE_TABLIST_HEADERS, "完成个人资料", ""#TEXT_WHITE"日后将会在哪个"#TEXT_SKYBLUE"城市"#TEXT_WHITE"定居?\n洛圣都(LS)\n圣费耶洛(SF)\n拉斯维托拉斯(LV)", "确认", "");
	    }
	    case 2:
	    {
	        format(string, sizeof(string), ""#TEXT_WHITE"你的"#TEXT_VIOLET"专精领域"#TEXT_WHITE"在于?\n");
	        format(string, sizeof(string), "%s射击领域: 受过一定的枪械训练,让你所有的"#TEXT_YELLOW"枪械专精度"#TEXT_WHITE"都从"#TEXT_YELLOW"500"#TEXT_WHITE"/999开始\n", string);
	        format(string, sizeof(string), "%s机械领域: 起始拥有100点"#TEXT_FADEBLUE"机械知识"#TEXT_WHITE",足够学习基本的"#TEXT_FADEBLUE"修车"#TEXT_WHITE"以及"#TEXT_FADEBLUE"开锁"#TEXT_WHITE"能力\n", string);
	        format(string, sizeof(string), "%s洞察领域: 起始拥有50点"#TEXT_FADEGREEN"洞察知识"#TEXT_WHITE",足够学习基本的"#TEXT_FADEGREEN"搜索"#TEXT_WHITE"以及"#TEXT_FADEGREEN"观察"#TEXT_WHITE"能力\n", string);
	        format(string, sizeof(string), "%s医学领域: 起始拥有120点"#TEXT_NURSEPINK"医疗知识"#TEXT_WHITE",足够学习基本的"#TEXT_NURSEPINK"治疗"#TEXT_WHITE"能力\n", string);
	        format(string, sizeof(string), "%s研发领域: 起始拥有50点"#TEXT_BROWN"研发知识"#TEXT_WHITE",足够学习基本的"#TEXT_BROWN"制枪"#TEXT_WHITE"能力\n", string);
	        format(string, sizeof(string), "%s健身领域: 起始"#TEXT_ORANGE"耐打能力"#TEXT_WHITE"为等级2以及"#TEXT_ORANGE"耐久能力"#TEXT_WHITE"为等级1,降低你受到的伤害且拥有更多的体力\n", string);
	        ShowPlayerDialog(playerid, DIALOG_REGINFO2, DIALOG_STYLE_TABLIST_HEADERS, "完成个人资料", string, "确认", "返回");
	    }
	    case 3:
	    {
		    SetGVarInt("PlayerBuyingSkin", 1, playerid);
			TogglePlayerControllableEx(playerid, 0);
		    SetGVarInt("SelectedSkin", 0, playerid);
            SetPlayerVirtualWorld(playerid, 100 + playerid);
	        SetPlayerInterior(playerid, 1);
		    SetPlayerPos_Fix(playerid, 1.7510,26.5699,1199.5938);
		    SetPlayerFacingAngle(playerid, 357.3862);
		    GetXYInFrontOfPos(1.7510,26.5699, 357.3862, camX, camY, 4.0);
		    SetPlayerCameraPos(playerid, camX, camY, 1199.5938);
		    SetPlayerCameraLookAt(playerid, 1.7510,26.5699,1199.5938);

		    SetGVarInt("SkinType", 7, playerid);
		    SetPlayerSkin_Fix(playerid, ItemsList_EQ[SkinShop_Newbie[0][0]][ieqAltID]);
		    SendClientMessage(playerid, COLOR_YELLOW, " 接下来请选择自己角色的造型样貌,选定之后请按"#TEXT_WHITE"Select键");
		    PlayerTextDrawShow(playerid, SkinBuy[playerid]);
		    PlayerTextDrawShow(playerid, SkinExit[playerid]);
			PlayerTextDrawShow(playerid, SkinLeft[playerid]);
			PlayerTextDrawShow(playerid, SkinRight[playerid]);
			SelectTextDraw(playerid, COLOR_FADERED);
	    }
	    case 4:
	    {
	        HideBuySkinTextDraw(playerid);
	        DeleteGVar("PlayerBuyingSkin", playerid);
	        ShowPlayerDialog(playerid, DIALOG_REGINFO3, DIALOG_STYLE_MSGBOX, "完成个人资料", ""#TEXT_WHITE"那么角色背景确认就到这边告一段落\n接下来即将展开"#TEXT_YELLOW"圣安地列斯州"#TEXT_WHITE"的导览\n准备好了吗?", "是", "否");
	    }
	}
	SetGVarInt("RegStep", step, playerid);
	return 1;
}

stock ShowPlayerAnimSetting(playerid)
{
    ShowPlayerDialog(playerid, DIALOG_ANIM_SET1, DIALOG_STYLE_TABLIST_HEADERS, "动作", ""#TEXT_WHITE"请选择要设定的动作种类\n单次动作\n持续动作\n互动动作\n跳舞动作", "选择", "取消");
}

stock ShowPlayerKeyList(playerid, setting=0)
{
	new string[512], action[32], keytype, keyid;
	for(new i = 1; i <= 9; i++)
	{
	    switch(i)
	    {
	        case 1: keytype = ConfigData[playerid][cfQuickN1T], keyid = ConfigData[playerid][cfQuickN1];
	        case 2: keytype = ConfigData[playerid][cfQuickN2T], keyid = ConfigData[playerid][cfQuickN2];
	        case 3: keytype = ConfigData[playerid][cfQuickN3T], keyid = ConfigData[playerid][cfQuickN3];
	        case 4: keytype = ConfigData[playerid][cfQuickN4T], keyid = ConfigData[playerid][cfQuickN4];
	        case 5: keytype = ConfigData[playerid][cfQuickN5T], keyid = ConfigData[playerid][cfQuickN5];
	        case 6: keytype = ConfigData[playerid][cfQuickN6T], keyid = ConfigData[playerid][cfQuickN6];
	        case 7: keytype = ConfigData[playerid][cfQuickN7T], keyid = ConfigData[playerid][cfQuickN7];
	        case 8: keytype = ConfigData[playerid][cfQuickN8T], keyid = ConfigData[playerid][cfQuickN8];
	        case 9: keytype = ConfigData[playerid][cfQuickN9T], keyid = ConfigData[playerid][cfQuickN9];
	    }
	    switch(keytype)
	    {
	        case KEY_TYPE_NONE: format(action, sizeof(action), "无");
	        case KEY_TYPE_IU: format(action, sizeof(action), "%s(剩余:%d个)", ItemsList_USE[keyid][iuName], PlayerHaveItem(playerid, ITEM_USE, keyid));
	        case KEY_TYPE_IEQ: format(action, sizeof(action), "%s", ItemsList_EQ[keyid][ieqName]);
			case KEY_TYPE_ACTIVE: format(action, sizeof(action), "主动技:%s", ActiveList[keyid][actName]);
			case KEY_TYPE_ANIM: format(action, sizeof(action), "动作:%s", AnimList[keyid][anmName]);
	    }
	    format(string, sizeof(string), "%s功能%d\t%s\n", string, i, action);
	}
	if(setting == 1)//设定
	{
		format(string, sizeof(string), ""#TEXT_WHITE"请选择要设定的功能栏位\t \n%s", string);
		ShowPlayerDialog(playerid, DIALOG_QUICK_SET, DIALOG_STYLE_TABLIST_HEADERS, "设定常用功能", string, "设定", "取消");
	}
	else if(setting == 2)//删除
	{
		format(string, sizeof(string), " \t \n%s", string);
		ShowPlayerDialog(playerid, DIALOG_QUICK_DEL, DIALOG_STYLE_TABLIST_HEADERS, "删除常用功能", string, "删除", "关闭");
	}
    else
    {
        format(string, sizeof(string), " \t \n%s", string);
		ShowPlayerDialog(playerid, DIALOG_QUICK_LIST, DIALOG_STYLE_TABLIST_HEADERS, "常用功能", string, "使用", "关闭");
    }
    return 1;
}

stock PlayerPressCustomKey(playerid, numkey)
{
	if(GetGVarInt("Spawned", playerid))
	{
		new keytype, keyid;
		switch(numkey)
		{
		    case 1: keytype = ConfigData[playerid][cfQuickN1T], keyid = ConfigData[playerid][cfQuickN1];
		    case 2: keytype = ConfigData[playerid][cfQuickN2T], keyid = ConfigData[playerid][cfQuickN2];
		    case 3: keytype = ConfigData[playerid][cfQuickN3T], keyid = ConfigData[playerid][cfQuickN3];
		    case 4: keytype = ConfigData[playerid][cfQuickN4T], keyid = ConfigData[playerid][cfQuickN4];
		    case 5: keytype = ConfigData[playerid][cfQuickN5T], keyid = ConfigData[playerid][cfQuickN5];
		    case 6: keytype = ConfigData[playerid][cfQuickN6T], keyid = ConfigData[playerid][cfQuickN6];
		    case 7: keytype = ConfigData[playerid][cfQuickN7T], keyid = ConfigData[playerid][cfQuickN7];
		    case 8: keytype = ConfigData[playerid][cfQuickN8T], keyid = ConfigData[playerid][cfQuickN8];
		    case 9: keytype = ConfigData[playerid][cfQuickN9T], keyid = ConfigData[playerid][cfQuickN9];
		}
		switch(keytype)
		{
		    case KEY_TYPE_NONE: return 0;
		    case KEY_TYPE_IU:
		    {
		        if(!PlayerHaveItem(playerid, ITEM_USE, keyid))
		        {
		            return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经没有该物品了");
		        }
		        SetGVarInt("KeyUse", 1, playerid);
		        PlayerUseItem_USE(playerid, keyid);
		    }
		    case KEY_TYPE_IEQ:
		    {
		        if(!PlayerHaveItem(playerid, ITEM_EQ, keyid))
		        {
		            return SendClientMessage(playerid, COLOR_WHITE, "** 错误: 你已经没有该物品了");
		        }
		        OnPlayerUseItem_EQ(playerid, keyid);
		    }
		    case KEY_TYPE_ACTIVE: OnPlayerActivateSkill(playerid, keyid);
			case KEY_TYPE_ANIM: OnPlayerUseCustomAnimation(playerid, keyid);
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "** 错误: 目前无法使用该动作");
	return 1;
}

stock OnPlayerUseCustomAnimation(playerid, animid)
{
	if(PlayerCanUseAnim(playerid))
	{
		switch(AnimList[animid][anmType])
		{
			case ANIM_NORMAL, ANIM_LOOP, ANIM_DANCE: OnPlayerStartCustomAnimation(playerid, animid);
			case ANIM_INTER:
			{
				new Float:px, Float:py, Float:pz, l, liststr[512];
				ForEachPlayer(p)
				{
					if(playerid == p || !PlayerCanUseAnim(p)) continue;
					GetPlayerPos(p, px, py, pz);
					if(GetPlayerDistanceFromPointEx(playerid, px, py, pz) < 6.0)
					{
						format(liststr, sizeof(liststr), "%s%s(%d)\n", liststr, PlayerData[p][pName], p);
						SetGVarInt("DListID", p, l*1000+playerid);
						l++;
					}
				}
				if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"动作", ""#TEXT_WHITE"你附近没有任何玩家可以互动", "确定", "");
				format(liststr, sizeof(liststr), ""#TEXT_WHITE"选择互动玩家\n%s", liststr);
				ShowPlayerDialog(playerid, DIALOG_ANIM_ASK, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"动作", liststr, "选择", "返回");
				SetGVarInt("DDecideID", animid, playerid);
			}
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "目前状态无法使用动作");
	return 1;
}

stock OnPlayerStartCustomAnimation(playerid, animid, toplayer=INVALID_PLAYER_ID)
{
	if(PlayerCanUseAnim(playerid))
	{
		switch(AnimList[animid][anmType])
		{
		    case ANIM_NORMAL:
			{
				ApplyAnimationEx(playerid, AnimList[animid][anmLibA], AnimList[animid][anmFileA], 4.1, 0, 0, 0, 0, 0, 1);
			}
			case ANIM_LOOP:
			{
				if(animid == 64) SetPlayerSpecialAction(playerid, SPECIAL_ACTION_HANDSUP);//投降
				else ApplyAnimationEx(playerid, AnimList[animid][anmLibA], AnimList[animid][anmFileA], 4.1, 1, 0, 0, 0, 0, 1);
				SetGVarInt("pCAnim", animid, playerid);
				SendClientMessage(playerid, COLOR_WHITE, "按F键可以结束动作");
			}
			case ANIM_INTER:
			{
			    if(toplayer != INVALID_PLAYER_ID || !PlayerCanUseAnim(toplayer))
			    {
					new Float:px, Float:py, Float:pz, Float:pangle;
					GetPlayerPos(playerid, px, py, pz);
					GetPlayerFacingAngle(playerid, pangle);
					GetXYInFrontOfPos(px, py, pangle, px, py, 1.0);
					SetPlayerPos(toplayer, px, py, pz);
					SetPlayerFacingAngle(toplayer, pangle+180.0);
					ApplyAnimationEx(playerid, AnimList[animid][anmLibA], AnimList[animid][anmFileA], 4.1, 0, 0, 0, 0, 0, 1);
					ApplyAnimationEx(toplayer, AnimList[animid][anmLibB], AnimList[animid][anmFileB], 4.1, 0, 0, 0, 0, 0, 1);
			    }
				else SendClientMessage(playerid, COLOR_WHITE, "目前无法与对方使用动作");
			}
			case ANIM_DANCE:
			{
			    switch(animid)
			    {
			        case 82: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE1), SetGVarInt("pCAnim", animid, playerid);
			        case 83: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE2), SetGVarInt("pCAnim", animid, playerid);
			        case 84: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE3), SetGVarInt("pCAnim", animid, playerid);
			        case 85: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE4), SetGVarInt("pCAnim", animid, playerid);
			    }
				SendClientMessage(playerid, COLOR_WHITE, "按F键可以结束跳舞,使用方向键可以做出不同的舞步");
			}
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "目前状态无法使用动作");
}

PUBLIC:StopPlayerCustomAnimation(playerid, toplayer)
{
	DeleteGVar("pCAnim", playerid);
	ClearAnimationsEx(playerid);
	if(toplayer != INVALID_PLAYER_ID)
	{
		DeleteGVar("pCAnim", toplayer);
		ClearAnimationsEx(toplayer);
	}
}

stock ShowPlayerMenu(playerid)
{
	if(GetGVarInt("Logged", playerid) == 1)
	{
		new string[256], l;

	    if(PlayerData[playerid][pJail] > 0)
	    {
		    format(string, sizeof(string), "%s 服刑中\t剩余时间:%d秒\n", string, PlayerData[playerid][pJail]);
			SetGVarInt("DListID", PMENU_JAIL, l*1000+playerid);
		 	l++;
		}

		if(PlayerData[playerid][pWanted] > 0)
	    {
		    format(string, sizeof(string), "%s 被通缉中\t通缉等级:%d\n", string, PlayerData[playerid][pWanted]);
			SetGVarInt("DListID", PMENU_WANTED, l*1000+playerid);
		 	l++;
		}

	    format(string, sizeof(string), "%s 背包\t容量:%d/%d\n", string, GetPlayerUsedSpace(playerid), PlayerData[playerid][pBag]);
		SetGVarInt("DListID", PMENU_BAG, l*1000+playerid);
	 	l++;

		if(GetPlayerUnpassedMission(playerid) > 0)
		{
	        format(string, sizeof(string), "%s 任务(%d)\n", string, GetPlayerUnpassedMission(playerid));
			SetGVarInt("DListID", PMENU_MISSION, l*1000+playerid);
		 	l++;
		}

	 	format(string, sizeof(string), "%s 信息\n", string);
		SetGVarInt("DListID", PMENU_INFO, l*1000+playerid);
	 	l++;

	 	format(string, sizeof(string), "%s 资产\n", string);
		SetGVarInt("DListID", PMENU_PROP, l*1000+playerid);
	 	l++;

	 	if(PlayerData[playerid][pDepartment] != 0)
	 	{
	 	    switch(PlayerData[playerid][pDepartment])
		    {
		        case DEPT_POLICE: format(string, sizeof(string), "%s 治安部门\n", string);
		        case DEPT_MEDIC: format(string, sizeof(string), "%s 医疗部门\n", string);
		        case DEPT_GOVERNMENT: format(string, sizeof(string), "%s 政府部门\n", string);
		        case DEPT_ARMY: format(string, sizeof(string), "%s 军事部门\n", string);
		        case DEPT_COUNSELOR: format(string, sizeof(string), "%s 辅导部门\n", string);
		    }
			SetGVarInt("DListID", PMENU_DEPT, l*1000+playerid);
		 	l++;
		}

	 	if(PlayerData[playerid][pCompany] != COMPANY_ID_NONE && PlayerData[playerid][pDepartment] != DEPT_POLICE && PlayerData[playerid][pDepartment] != DEPT_ARMY)
	 	{
	 	    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		 	format(string, sizeof(string), "%s 企业\t%s\n", string, CompanyData[comid][comName]);
			SetGVarInt("DListID", PMENU_COMPANY, l*1000+playerid);
		 	l++;
		}

		if(PlayerData[playerid][pLevel] > 14 && PlayerData[playerid][pDepartment] != DEPT_POLICE && PlayerData[playerid][pDepartment] != DEPT_ARMY)
		{
		    if(PlayerData[playerid][pGang] != GANG_ID_NONE)
		    {
		        new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
				format(string, sizeof(string), "%s 帮会\t%s\n", string, GangData[gangid][gName]);
			}
			else format(string, sizeof(string), "%s 帮会\n", string);
			SetGVarInt("DListID", PMENU_GANG, l*1000+playerid);
		 	l++;
		}

		if(GetGVarInt("Eventing", playerid) == 0 && GetGVarInt("pArena", playerid) == 0)
		{
			if(GetPlayerTeam(playerid) == NO_TEAM) format(string, sizeof(string), "%s 小队\n", string);
			else format(string, sizeof(string), "%s 小队\t%s\n", string, Team[GetPlayerTeam(playerid)][tName]);
			SetGVarInt("DListID", PMENU_TEAM, l*1000+playerid);
		 	l++;
		}

	 	format(string, sizeof(string), "%s 技能\n", string);
		SetGVarInt("DListID", PMENU_SKILL, l*1000+playerid);
	 	l++;

	 	format(string, sizeof(string), "%s 合成\n", string);
		SetGVarInt("DListID", PMENU_MIX, l*1000+playerid);
	 	l++;

		format(string, sizeof(string), "%s 动作\n", string);
		SetGVarInt("DListID", PMENU_ANIM, l*1000+playerid);
	 	l++;

        format(string, sizeof(string), "%s 奖励(%d)\n", string, PlayerHaveGift(playerid));
		SetGVarInt("DListID", PMENU_GIFT, l*1000+playerid);
	 	l++;

	 	format(string, sizeof(string), "%s 帮助\n", string);
		SetGVarInt("DListID", PMENU_HELP, l*1000+playerid);
	 	l++;

	 	format(string, sizeof(string), "%s 设定\n", string);
		SetGVarInt("DListID", PMENU_CONFIG, l*1000+playerid);
	 	l++;

	    format(string, sizeof(string), ""#TEXT_WHITE"%s\t \n%s", PlayerData[playerid][pName], string);
	    ShowPlayerDialog(playerid, DIALOG_CLICKME, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"个人菜单", string, "选择", "关闭");
	}
	return 1;
}

stock ShowPlayerMissionMenu(playerid)
{
    new i, j, k, l, string[512], smallstr[32];
	for(i = l = 0, j = MAX_MISSIONS; i < j; i++)
	{
	    if(MissionData[playerid][i][msMissionID] == 0) continue;
	    if(MissionData[playerid][i][msPassed] == 0)
		{
		    k = MissionData[playerid][i][msMissionID];
		    switch(MissionsList[k][msType])
		    {
		        case MISSION_TUTORIAL: format(smallstr, 32, "教学");
		        case MISSION_DAILY: format(smallstr, 32, "每日任务");
		        case MISSION_GLOBAL: format(smallstr, 32, "任务");
		        default: format(smallstr, 32, "任务");
            }
		    format(string, sizeof(string), "%s%s\t%s\t$%d %dExp\n", string, MissionsList[k][msTitle], smallstr, MissionsList[k][msMoney], MissionsList[k][msExp]);
			SetGVarInt("DListID", i, l*1000+playerid);
			l++;
		}
	}
	if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务清单", ""#TEXT_WHITE"你目前没有任何任务", "确认", "");
	format(string, sizeof(string), "任务名称\t类型\t奖励\n%s", string);
	ShowPlayerDialog(playerid, DIALOG_MISSION, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"任务清单", string, "选择", "关闭");
	return 1;
}

stock ShowPlayerGiftMenu(playerid)
{
    new i, j, k, l, string[2048], itemname[64], Year, Month, Day, Hour, Minute, Second;
	for(i = l = 0, j = MAX_PLAYER_GIFTS; i < j; i++)
	{
		if(PlayerGift[playerid][i][pgPlayerID] == PlayerData[playerid][pID])
		{
		    k = PlayerGift[playerid][i][pgItemID];
		    switch(PlayerGift[playerid][i][pgItemType])
		    {
				case ITEM_USE: format(itemname, 64, "%s", ItemsList_USE[k][iuName]);
				case ITEM_EQ: format(itemname, 64, "%s", ItemsList_EQ[k][ieqName]);
				case ITEM_CASH: format(itemname, 64, "礼金$");
				case ITEM_WEAPON: format(itemname, 64, "%s", WeaponsList[k][wName]);
				case ITEM_SKILLPT: format(itemname, 64, "%s", PtsList[k][spName]);
		        default: continue;
			}
			TimestampToDate(PlayerGift[playerid][i][pgExpire], Year, Month, Day, Hour, Minute, Second, 8);
			format(string, sizeof(string), "%s%s\t%s\t%d\t%04d/%02d/%02d %02d:%02d:%02d\n", string, PlayerGift[playerid][i][pgTitle], itemname, PlayerGift[playerid][i][pgAmount], Year, Month, Day, Hour, Minute, Second);
			SetGVarInt("DListID", i, l*1000+playerid);
			l++;
		}
	}
	if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"奖励", ""#TEXT_WHITE"你目前没有任何奖励可以领取", "确认", "");
	format(string, sizeof(string), "标题\t礼品\t数量\t领取期限\n%s", string);
	ShowPlayerDialog(playerid, DIALOG_GIFT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"奖励", string, "选择", "关闭");
	return 1;
}

stock ShowPlayerHelpMenu(playerid)
{
    return ShowPlayerDialog(playerid, DIALOG_HELP, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"帮助", " \n说明\n回报问题", "选择", "关闭");
}

stock ShowPlayerPhoneMenu(playerid)
{
	new string[144], switchtxt[24], switchtxt2[24], caller;
	if(GetGVarInt("Spawned", playerid) == 0) return SendClientMessage(playerid, COLOR_WHITE, "目前状态无法使用手机");
	Phone_Open(playerid);
	if(GetGVarInt("PhoneRing", playerid) > 0)
	{
	    caller = GetGVarInt("PhoneCaller", playerid);
	    format(string, sizeof(string), ""#TEXT_WHITE"来自%s的来电\n"#TEXT_FADEGREEN"接通\n"#TEXT_RED"挂断", PlayerData[caller][pName]);
		ShowPlayerDialog(playerid, DIALOG_PHONE_CALLED, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"手机", string, "选择", "关闭");
	}
	else if(GetGVarInt("Calling", playerid) != -1)
	{
	    caller = GetGVarInt("Calling", playerid);
	    if(GetGVarInt("PhoneSpeaker", playerid) == 1) format(switchtxt, sizeof(switchtxt), ""#TEXT_WHITE"取消扩音");
		else format(switchtxt, sizeof(switchtxt), ""#TEXT_YELLOW"扩音");
		format(string, sizeof(string), ""#TEXT_WHITE"正在与%s连线中...\n%s\n"#TEXT_RED"挂断", PlayerData[caller][pName], switchtxt);
		ShowPlayerDialog(playerid, DIALOG_PHONE_CALLED, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"手机", string, "选择", "关闭");
	}
	else
	{
	    if(ConfigData[playerid][cfPhoneOff] == 1) format(switchtxt, sizeof(switchtxt), ""#TEXT_LIGHTRED"飞行模式");
		else format(switchtxt, sizeof(switchtxt), ""#TEXT_FADEGREEN"信号良好");
		if(ConfigData[playerid][cfPhoneMute] == 1) format(switchtxt2, sizeof(switchtxt2), ""#TEXT_WHITE"静音");
		else format(switchtxt2, sizeof(switchtxt2), ""#TEXT_WHITE"铃声");
		format(string, sizeof(string), ""#TEXT_WHITE"状态:%s\t%s\n联络人\n短信\n收音机\n活动清单\n设定\n取消通话动作/OBJ", switchtxt, switchtxt2);
		ShowPlayerDialog(playerid, DIALOG_PHONE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"手机", string, "选择", "关闭");
	}
	return 1;
}

stock ShowPlayerContactMenu(playerid, booth=0)
{
    new phonestr[1024], l;

	if(GetGVarInt("Eventing", playerid) == 0)
	{
		format(phonestr, sizeof(phonestr), "%s紧急服务\n", phonestr);
		SetGVarInt("DListID", CONTACT_911, l*1000+playerid);
  		l++;

		if(PlayerData[playerid][pCompany] != -1 || PlayerData[playerid][pGang] != -1 || PlayerData[playerid][pDepartment] > 0)
		{
			format(phonestr, sizeof(phonestr), "%s联合物流\n", phonestr);
			SetGVarInt("DListID", CONTACT_GOODS, l*1000+playerid);
			l++;
		}

		format(phonestr, sizeof(phonestr), "%s道路救援\n", phonestr);
		SetGVarInt("DListID", CONTACT_TOW, l*1000+playerid);
		l++;

		format(phonestr, sizeof(phonestr), "%s速食外送\n", phonestr);
		SetGVarInt("DListID", CONTACT_FD, l*1000+playerid);
		l++;

		format(phonestr, sizeof(phonestr), "%s呼叫计程车\n", phonestr);
		SetGVarInt("DListID", CONTACT_TAXI, l*1000+playerid);
		l++;

        format(phonestr, sizeof(phonestr), "%s广告供应商\n", phonestr);
		SetGVarInt("DListID", CONTACT_AD, l*1000+playerid);
		l++;

		format(phonestr, sizeof(phonestr), "%s摩斯姆通保险\n", phonestr);
		SetGVarInt("DListID", CONTACT_INSURE, l*1000+playerid);
		l++;

		if(booth == 1 && PlayerData[playerid][pLevel] > 14)
		{
			format(phonestr, sizeof(phonestr), "%s悬赏事务所\n", phonestr);
			SetGVarInt("DListID", CONTACT_BOUNTY, l*1000+playerid);
			l++;
		}

		if(RecordData[playerid][prMSimeon] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s西门(Simeon)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_SIMEON, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMSweet] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s斯威特(Sweet)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_SWEET, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMTrevor] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s崔佛(Trevor)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_TREVOR, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMCesar] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s西萨(Cesar)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_CESAR, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMEmmet] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s埃米特(Emmet)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_EMMET, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMWoozie] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s吴梓穆(Woozie)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_WOOZIE, l*1000+playerid);
			l++;
		}
		if(RecordData[playerid][prMToreno] > -1)
		{
		    format(phonestr, sizeof(phonestr), "%s托雷诺(Toreno)\n", phonestr);
			SetGVarInt("DListID", CONTACT_MNPC, l*1000+playerid);
			SetGVarInt("DListID2", MNPC_TORENO, l*1000+playerid);
			l++;
		}
	}

	if(booth == 0)
	{
		ForEachPlayer(p)
		{
			if(!PlayerHaveItem(p, 2, 4) || playerid == p) continue;
			if(ConfigData[p][cfPhoneOff] == 0)
			{
	            format(phonestr, sizeof(phonestr), "%s%s(%d)\n", phonestr, PlayerData[p][pName], p);
				SetGVarInt("DListID", CONTACT_PLAYER, l*1000+playerid);
				SetGVarInt("DListID2", p, l*1000+playerid);
				l++;
			}
		}
	}
	format(phonestr, sizeof(phonestr), ""#TEXT_WHITE"请选择联络人\n%s", phonestr);
    ShowPlayerDialog(playerid, DIALOG_PHONE_CONTACT, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"拨号", phonestr, "选择", "返回");
}

stock ShowPlayerPropertyMenu(playerid)
{
	new string[144];
	format(string, sizeof(string), ""#TEXT_WHITE"项目\t"#TEXT_WHITE"数量\n载具\t%d\n地产\t%d\n宠物\t%d\n植物\t%d\n物件\t%d", PlayerHaveVehicle(playerid), PlayerHaveEstate(playerid), PlayerHavePet(playerid), PlayerHavePlant(playerid), PlayerHaveObject(playerid));
	ShowPlayerDialog(playerid, DIALOG_CLICKME_PROPERTY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"资产", string, "选择", "关闭");
	SetGVarInt("DDecidePlayer", playerid, playerid);
	SetGVarInt("CheckProp", 0, playerid);
	return 1;
}

stock ShowPlayerBuyVehMenu(playerid, vehicleid)
{
	new dialog[256];
    if(PlayerHaveItem(playerid, ITEM_USE, 184) && GetGVarInt("CSShop", vehicleid) == VS_WANG)
	{
		SetGVarInt("UsingVTicket", 184, playerid);
		format(dialog, sizeof(dialog), ""#TEXT_WHITE"要使用 %s 兑换这台%s吗?\n"#TEXT_FADEGREEN"兑换给自己\n"#TEXT_SKYBLUE"兑换给企业\n"#TEXT_YELLOW"兑换给帮会\n"#TEXT_WHITE"兑换给所属部门", ItemsList_USE[184][iuName], GetVehicleName(GetVehicleModel(vehicleid)));
		ShowPlayerDialog(playerid, DIALOG_BUYCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买这个载具", dialog, "确定", "离开");
		SetGVarInt("BuyingCar", vehicleid, playerid);
	}
	else if(PlayerHaveItem(playerid, ITEM_USE, 185) && GetGVarInt("CSShop", vehicleid) == VS_SFBIKE)
	{
	    SetGVarInt("UsingVTicket", 185, playerid);
		format(dialog, sizeof(dialog), ""#TEXT_WHITE"要使用 %s 兑换这台%s吗?\n"#TEXT_FADEGREEN"兑换给自己\n"#TEXT_SKYBLUE"兑换给企业\n"#TEXT_YELLOW"兑换给帮会\n"#TEXT_WHITE"兑换给所属部门", ItemsList_USE[184][iuName], GetVehicleName(GetVehicleModel(vehicleid)));
		ShowPlayerDialog(playerid, DIALOG_BUYCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买这个载具", dialog, "确定", "离开");
		SetGVarInt("BuyingCar", vehicleid, playerid);
	}
	else if(PlayerHaveItem(playerid, ITEM_USE, 183) && GetGVarInt("CSShop", vehicleid) > VS_NONE)
	{
	    SetGVarInt("UsingVTicket", 183, playerid);
		format(dialog, sizeof(dialog), ""#TEXT_WHITE"要使用 %s 兑换这台%s吗?\n"#TEXT_FADEGREEN"兑换给自己\n"#TEXT_SKYBLUE"兑换给企业\n"#TEXT_YELLOW"兑换给帮会\n"#TEXT_WHITE"兑换给所属部门", ItemsList_USE[184][iuName], GetVehicleName(GetVehicleModel(vehicleid)));
		ShowPlayerDialog(playerid, DIALOG_BUYCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买这个载具", dialog, "确定", "离开");
		SetGVarInt("BuyingCar", vehicleid, playerid);
	}
	else
	{
	    SetGVarInt("UsingVTicket", 0, playerid);
		format(dialog, sizeof(dialog), ""#TEXT_WHITE"购买这台%s需花费金钱"#TEXT_FADEGREEN"$%d"#TEXT_WHITE",确定要购买吗?\n"#TEXT_FADEGREEN"购买给自己\n"#TEXT_SKYBLUE"购买给企业\n"#TEXT_YELLOW"购买给帮会\n"#TEXT_WHITE"购买给所属部门", GetVehicleName(GetVehicleModel(vehicleid)), VehData[vehicleid][vPrice]);
		ShowPlayerDialog(playerid, DIALOG_BUYCAR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买这个载具", dialog, "确定", "离开");
		SetGVarInt("BuyingCar", vehicleid, playerid);
	}
}

stock ShowPlayerJailMenu(playerid)
{
	new string[144];
	if(GetGVarInt("JailQKing", playerid) > 0) format(string, sizeof(string), ""#TEXT_YELLOW"结束放风");
	else if(GetGVarInt("JailQK", playerid) == 0) format(string, sizeof(string), ""#TEXT_FADEGREEN"开始放风");
	else format(string, sizeof(string), "放风(还需%d秒)", GetGVarInt("JailQK", playerid));
	format(string, sizeof(string), ""#TEXT_WHITE"距释放时间:%d秒\n购买食物\n%s\n请求假释", PlayerData[playerid][pJail], string);
	ShowPlayerDialog(playerid, DIALOG_JAIL, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"监狱", string, "选择", "关闭");
	return 1;
}

stock ShowPlayerWantedMenu(playerid)
{
	new string[144];
	if(PlayerData[playerid][pWanted] > 0)
	{
		format(string, sizeof(string), ""#TEXT_WHITE"目前通缉等级:"#TEXT_YELLOW"%d星\n弃械投降\n查看刑度", PlayerData[playerid][pWanted]);
		ShowPlayerDialog(playerid, DIALOG_WANTED, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"被通缉中", string, "选择", "关闭");
	}
	return 1;
}

stock ShowPlayerDepartmentMenu(playerid)
{
    new string[144];
    switch(PlayerData[playerid][pDepartment])
    {
        case DEPT_POLICE:
		{
			format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n查看在线同仁\n查看警用技能\n查询警用载具\n查询警方据点\n发布通缉令\n管理\n离开警队", Department[PlayerData[playerid][pDepartment]][dpCatalog]);
			ShowPlayerDialog(playerid, DIALOG_POLICE, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"治安部门", string, "选择", "关闭");
		}
        case DEPT_MEDIC:
		{
			format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n查看在线成员\n查询医用载具\n查询各大据点\n管理\n离开医疗部门", Department[PlayerData[playerid][pDepartment]][dpCatalog]);
			ShowPlayerDialog(playerid, DIALOG_MEDIC, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"医疗部门", string, "选择", "关闭");
		}
        case DEPT_COUNSELOR:
		{
			format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n取得新手玩家位置\n查看在线成员\n查询辅导员专用载具\n查询各大辅导站\n管理\n离开辅导部门", Department[PlayerData[playerid][pDepartment]][dpCatalog]);
			ShowPlayerDialog(playerid, DIALOG_COUNSELOR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"辅导部门", string, "选择", "关闭");
		}
        case DEPT_GOVERNMENT:
		{
			format(string, sizeof(string), ""#TEXT_WHITE"公告:%s\n查看在线成员\n查询政府专用载具\n查询政府据点\n管理\n离开政府部门", Department[PlayerData[playerid][pDepartment]][dpCatalog]);
			ShowPlayerDialog(playerid, DIALOG_GOV, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"政府部门", string, "选择", "关闭");
		}
    }
    return 1;
}

stock ShowPlayerInfoMenu(playerid)
{
	new string[324], comstr[24], gangstr[32], deptstr[24];
    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]),
        gangid = GangSqlIDToID(PlayerData[playerid][pGang]);

    if(PlayerData[playerid][pCompany] == COMPANY_ID_NONE) format(comstr, sizeof(comstr), "无");
    else format(comstr, sizeof(comstr), "%s", CompanyData[comid][comName]);
    if(PlayerData[playerid][pGang] == GANG_ID_NONE) format(gangstr, sizeof(gangstr), "无");
    else format(gangstr, sizeof(gangstr), "%s[%s]", GangData[gangid][gName], GangData[gangid][gShort]);
    switch(PlayerData[playerid][pDepartment])
    {
        case DEPT_POLICE: format(deptstr, sizeof(deptstr), "治安部门(阶级%d)", PlayerData[playerid][pDeptRank]);
        case DEPT_MEDIC: format(deptstr, sizeof(deptstr), "医疗部门(阶级%d)", PlayerData[playerid][pDeptRank]);
        case DEPT_GOVERNMENT: format(deptstr, sizeof(deptstr), "政府部门(阶级%d)", PlayerData[playerid][pDeptRank]);
        case DEPT_ARMY: format(deptstr, sizeof(deptstr), "军事部门(阶级%d)", PlayerData[playerid][pDeptRank]);
        case DEPT_COUNSELOR: format(deptstr, sizeof(deptstr), "辅导部门(阶级%d)", PlayerData[playerid][pDeptRank]);
    	default: format(deptstr, sizeof(deptstr), "无");
    }

	format(string, sizeof(string), ""#TEXT_WHITE"%s\t\n", PlayerData[playerid][pName]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"头衔:\t%s\n", string, GetPlayerTitle(playerid));
	format(string, sizeof(string), "%s"#TEXT_WHITE"等级:\t%d\n", string, PlayerData[playerid][pLevel]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"经验值:\t%d/%d\n", string, PlayerData[playerid][pExp], ExpList[PlayerData[playerid][pLevel]+1][expAmount]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"现金:\t"#TEXT_FADEGREEN"$%d\n", string, PlayerData[playerid][pCash]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"存款:\t$%d\n", string, PlayerData[playerid][pBank]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"工作:\t%s\n", string, GetJobName(playerid));
	format(string, sizeof(string), "%s"#TEXT_WHITE"所属公部门:\t%s\n", string, deptstr);
	format(string, sizeof(string), "%s"#TEXT_WHITE"所属企业:\t%s(ID:%d)\n", string, comstr, PlayerData[playerid][pCompany]);
	format(string, sizeof(string), "%s"#TEXT_WHITE"所属帮会:\t%s(ID:%d)\n", string, gangstr, PlayerData[playerid][pGang]);
	format(string, sizeof(string), "%s"#TEXT_YELLOW"游玩履历\t", string);
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"个人资料", string, "确认", "关闭");
	return 1;
}

stock ShowPlayerRecordMenu(playerid)
{
	new string[1024];
	format(string, sizeof(string), ""#TEXT_WHITE"%s\t\n", PlayerData[playerid][pName]);
	format(string, sizeof(string), "%s登入天数:\t%d天\n", string, RecordData[playerid][prLogDays]);
	format(string, sizeof(string), "%s击杀数:\t%d\n", string, RecordData[playerid][prKill]);
	format(string, sizeof(string), "%s死亡数:\t%d\n", string, RecordData[playerid][prDeath]);
	format(string, sizeof(string), "%s总收入:\t$%d\n", string, RecordData[playerid][prEarned]);
	format(string, sizeof(string), "%s总支出:\t$%d\n", string, RecordData[playerid][prSpent]);
	format(string, sizeof(string), "%s竞速次数:\t%d次\n", string, RecordData[playerid][prRace]);
	format(string, sizeof(string), "%s钓过的鱼:\t%d只\n", string, RecordData[playerid][prFishes]);
	format(string, sizeof(string), "%s狩猎数量:\t%d只\n", string, RecordData[playerid][prHunt]);
	format(string, sizeof(string), "%s射击练习总得分:\t%d\n", string, RecordData[playerid][prRange]);
	format(string, sizeof(string), "%s饮食次数:\t%d次\n", string, RecordData[playerid][prEat]);
	format(string, sizeof(string), "%s种植次数:\t%d次\n", string, RecordData[playerid][prPlant]);
	format(string, sizeof(string), "%s浇水次数:\t%d次\n", string, RecordData[playerid][prWater]);
	format(string, sizeof(string), "%s砍伐过的树:\t%d棵\n", string, RecordData[playerid][prLumber]);
	format(string, sizeof(string), "%s总加油量:\t%d\n", string, RecordData[playerid][prRefuels]);
	format(string, sizeof(string), "%s买过的载具:\t%d\n", string, RecordData[playerid][prBuyVeh]);
	format(string, sizeof(string), "%s货物战争胜利次数:\t%d次\n", string, RecordData[playerid][prMatWar]);
	format(string, sizeof(string), "%s \n", string);
	format(string, sizeof(string), "%s机械工程学总时数:\t%d分钟\n", string, RecordData[playerid][prClass1]);
	format(string, sizeof(string), "%s信息学总时数:\t%d分钟\n", string, RecordData[playerid][prClass2]);
	format(string, sizeof(string), "%s材料学总时数:\t%d分钟\n", string, RecordData[playerid][prClass3]);
	format(string, sizeof(string), "%s观察学总时数:\t%d分钟\n", string, RecordData[playerid][prClass4]);
	format(string, sizeof(string), "%s监定学修习总时数:\t%d分钟\n", string, RecordData[playerid][prClass5]);
	format(string, sizeof(string), "%s基础医学总时数:\t%d分钟\n", string, RecordData[playerid][prClass6]);
	format(string, sizeof(string), "%s进阶医学总时数:\t%d分钟\n", string, RecordData[playerid][prClass7]);
	format(string, sizeof(string), "%s基础药学总时数:\t%d分钟\n", string, RecordData[playerid][prClass8]);
	format(string, sizeof(string), "%s进阶药学总时数:\t%d分钟\n", string, RecordData[playerid][prClass9]);
	format(string, sizeof(string), "%s \n", string);
	format(string, sizeof(string), "%s垃圾车工作次数:\t%d次\n", string, RecordData[playerid][prJTrash]);
	format(string, sizeof(string), "%s运送油罐次数:\t%d次\n", string, RecordData[playerid][prJGas]);
	format(string, sizeof(string), "%s运送货柜次数:\t%d次\n", string, RecordData[playerid][prJRoadDeliver]);
	format(string, sizeof(string), "%s运送传单次数:\t%d次\n", string, RecordData[playerid][prJAds]);
	format(string, sizeof(string), "%s外送次数:\t%d次\n", string, RecordData[playerid][prJFD]);
	format(string, sizeof(string), "%s销售车辆次数:\t%d次\n", string, RecordData[playerid][prCarSellJob]);
	format(string, sizeof(string), "%s捕捞鱼的数量:\t%d尾\n", string, RecordData[playerid][prFisher]);
	format(string, sizeof(string), "%s计程车总载客量:\t%d次\n", string, RecordData[playerid][prTaxi]);
	format(string, sizeof(string), "%s \n", string);
	format(string, sizeof(string), "%s鱼市场出售次数:\t%d次\n", string, RecordData[playerid][prMFish]);
	format(string, sizeof(string), "%s材料市场出售次数:\t%d次\n", string, RecordData[playerid][prMMat]);
	format(string, sizeof(string), "%s枪械市场出售次数:\t%d次\n", string, RecordData[playerid][prMGun]);
	format(string, sizeof(string), "%s花市出售次数:\t%d次\n", string, RecordData[playerid][prMPlant]);
	format(string, sizeof(string), "%s狩猎市场出售次数:\t%d次\n", string, RecordData[playerid][prMHunt]);
	format(string, sizeof(string), "%s \n", string);
	format(string, sizeof(string), "%s累计通缉等级:\t%d\n", string, RecordData[playerid][prAllWanted]);
	format(string, sizeof(string), "%s入狱次数:\t%d次\n", string, RecordData[playerid][prJail]);
	format(string, sizeof(string), "%s窃取车辆次数:\t%d次\n", string, RecordData[playerid][prStealVehs]);
	format(string, sizeof(string), "%s抢劫过的商店:\t%d家\n", string, RecordData[playerid][prRobStore]);
	format(string, sizeof(string), "%s \n", string);
	format(string, sizeof(string), "%s斯威特任务完成次数:\t%d次\n", string, RecordData[playerid][prMSweet]);
	format(string, sizeof(string), "%s西门任务完成次数:\t%d次\n", string, RecordData[playerid][prMSimeon]);
	format(string, sizeof(string), "%s崔佛任务完成次数:\t%d次\n", string, RecordData[playerid][prMTrevor]);
	format(string, sizeof(string), "%s西萨任务完成次数:\t%d次\n", string, RecordData[playerid][prMCesar]);
	format(string, sizeof(string), "%s埃米特任务完成次数:\t%d次\n", string, RecordData[playerid][prMEmmet]);
	format(string, sizeof(string), "%s托雷诺任务完成次数:\t%d次\n", string, RecordData[playerid][prMToreno]);
	format(string, sizeof(string), "%s吴梓穆任务完成次数:\t%d次\n", string, RecordData[playerid][prMWoozie]);
	ShowPlayerDialog(playerid, DIALOG_INFO_RECORD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"游玩履历", string, "确认", "关闭");
	return 1;
}

stock ShowPlayerSkillMenu(playerid)
{
	ShowPlayerDialog(playerid, DIALOG_SKILL, DIALOG_STYLE_TABLIST_HEADERS, "我的技能", "列表\n技能等级\n技能点数\n主动技\n重置技能\n武器熟练度", "选择", "关闭");
	UpdatePlayerMission(playerid, 15, 5);
	return 1;
}

stock ShowPlayerMixMenu(playerid)
{
	new slot1, slot2, slot3, amount1, amount2, amount3, string[144];
    if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你没有手合成东西");
    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_WHITE, "只能在步行时进行合成");
	amount1 = GetGVarInt("MixAmount1", playerid),
	amount2 = GetGVarInt("MixAmount2", playerid),
	amount3 = GetGVarInt("MixAmount3", playerid);
	if(amount1 == 0) DeleteGVar("MixSlot1", playerid);
	if(amount2 == 0) DeleteGVar("MixSlot2", playerid);
	if(amount3 == 0) DeleteGVar("MixSlot3", playerid);
	slot1 = GetGVarInt("MixSlot1", playerid),
	slot2 = GetGVarInt("MixSlot2", playerid),
	slot3 = GetGVarInt("MixSlot3", playerid);
	format(string, sizeof(string), "栏位\t材料\t数量\nA\t%s\t%d\nB\t%s\t%d\nC\t%s\t%d\n开始合成\n查看目前可合成项目", ItemsList_USE[slot1][iuName], amount1, ItemsList_USE[slot2][iuName], amount2, ItemsList_USE[slot3][iuName], amount3);
	ShowPlayerDialog(playerid, DIALOG_MIX, DIALOG_STYLE_TABLIST_HEADERS, "合成", string, "选择", "关闭");

	UpdatePlayerMission(playerid, 12, 3);
	UpdatePlayerMission(playerid, 12, 4);
	UpdatePlayerMission(playerid, 12, 7);
	return 1;
}

stock ShowPlayerMixList(playerid, page)
{
	new string[768], slot1[32], slot2[32], slot3[32], i, j, k, l, more, fire, pass[3];
	if(page < 0) page = 0;
	if(IsPlayerCloseToFire(playerid)) fire = 1;
	else fire = 0;
	string[0] = EOS;
	SetGVarInt("Page", page, playerid);
	for(i = k = l = more = 0, j = sizeof(MixList); i < j; i++)
	{
		if((SkillData[playerid][psArm] < MixList[i][mxReqArm]) || (SkillData[playerid][psDrug] < MixList[i][mxReqDrug])) continue;
		if(MixList[i][mxReqFire] == 1 && fire == 0) continue;
		pass[0] = pass[1] = pass[2] = 0;
		if((PlayerHaveItem(playerid, ITEM_USE, MixList[i][mxSlot1]) >= MixList[i][mxSlot1A]))
		{
		    pass[0] = 1;
		    SetGVarInt("MixSlot1", MixList[i][mxSlot1], playerid);
		    SetGVarInt("MixAmount1", MixList[i][mxSlot1A], playerid);
		}
		if((PlayerHaveItem(playerid, ITEM_USE, MixList[i][mxSlot2]) >= MixList[i][mxSlot2A]))
		{
		    pass[1] = 1;
		    SetGVarInt("MixSlot2", MixList[i][mxSlot2], playerid);
		    SetGVarInt("MixAmount2", MixList[i][mxSlot2A], playerid);
		}
		if((PlayerHaveItem(playerid, ITEM_USE, MixList[i][mxSlot3]) >= MixList[i][mxSlot3A]))
		{
		    pass[2] = 1;
		    SetGVarInt("MixSlot3", MixList[i][mxSlot3], playerid);
		    SetGVarInt("MixAmount3", MixList[i][mxSlot3A], playerid);
		}
		if(pass[0] == 1 && pass[1] == 1 && pass[2] == 1)
		{
			if(MixList[i][mxSlot1] > 0) format(slot1, sizeof(slot1), " [A]%s*%d", ItemsList_USE[MixList[i][mxSlot1]][iuName], MixList[i][mxSlot1A]);
			else format(slot1, sizeof(slot1), " ");
			if(MixList[i][mxSlot2] > 0) format(slot2, sizeof(slot2), " [B]%s*%d", ItemsList_USE[MixList[i][mxSlot2]][iuName], MixList[i][mxSlot2A]);
			else format(slot2, sizeof(slot2), " ");
			if(MixList[i][mxSlot3] > 0) format(slot3, sizeof(slot3), " [C]%s*%d", ItemsList_USE[MixList[i][mxSlot3]][iuName], MixList[i][mxSlot3A]);
			else format(slot3, sizeof(slot3), " ");

			if(page*10 <= k < (page+1)*10)
			{//在页面容纳数量范围内就纪录至string
				switch(MixList[i][mxType])
				{
			    	case 1: format(string, sizeof(string), "%s%s\t%s\t%s\t%s\n", string, slot1, slot2, slot3, ItemsList_USE[MixList[i][mxResult]][iuName]);
			    	case 2: format(string, sizeof(string), "%s%s\t%s\t%s\t%s\n", string, slot1, slot2, slot3, ItemsList_EQ[MixList[i][mxResult]][ieqName]);
			    	case 3: format(string, sizeof(string), "%s%s\t%s\t%s\t%s\n", string, slot1, slot2, slot3, WeaponsList[MixList[i][mxResult]][wName]);
			    }
			    SetGVarInt("DListID", i, l*1000+playerid);
			    l++;
				DeleteGVar("MixSlot1", playerid),
				DeleteGVar("MixSlot2", playerid),
				DeleteGVar("MixSlot3", playerid),
				DeleteGVar("MixAmount1", playerid),
				DeleteGVar("MixAmount2", playerid),
				DeleteGVar("MixAmount3", playerid);
			}
			else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
		    k++;
		}
	}
	if(l == 0)
	{
		ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "合成列表", ""#TEXT_WHITE"目前你没有任何可以合成的东西", "确认", "");
	}
	else
	{
		if(page > 0)
		{
		    format(string, sizeof(string), "%s上一页\n", string);
			SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
			l++;
		}
		if(more == 1)
		{
		    format(string, sizeof(string), "%s下一页\n", string);
			SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
			l++;
		}
		format(string, sizeof(string), ""#TEXT_FADERED"栏位A\t"#TEXT_LIGHTYELLOW"栏位B\t"#TEXT_FADEBLUE"栏位C\t"#TEXT_WHITE"结果\n%s", string);
		ShowPlayerDialog(playerid, DIALOG_MIX_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "合成列表", string, "选择", "关闭");
	}

	DeleteGVar("MixSlot1", playerid),
	DeleteGVar("MixSlot2", playerid),
	DeleteGVar("MixSlot3", playerid),
	DeleteGVar("MixAmount1", playerid),
	DeleteGVar("MixAmount2", playerid),
	DeleteGVar("MixAmount3", playerid);
	return 1;
}

stock ShowPlayerGunCustomMenu(playerid, gunid)
{
	new string[256];
    if(gunid != 22 && !PlayerHaveItem(playerid, ITEM_EQ, 286)) return SendClientMessage(playerid, COLOR_WHITE, "你必须拥有枪械执照才能购买这把枪枝");
	if(gunid == 22) format(string, sizeof(string), ""#TEXT_WHITE"选择购买项目\n购买%s枪枝 [$%d]\n购买弹药%d发 [$%d]\n枪枝涂装\n加装消音管 [$500]", WeaponsList[gunid][wName], WeaponsList[gunid][wPrice], AmmosList[WeaponsList[gunid][wAmmo]][amAmount], AmmosList[WeaponsList[gunid][wAmmo]][amPrice]);
	else format(string, sizeof(string), ""#TEXT_WHITE"选择购买项目\n购买%s枪枝 [$%d]\n购买弹药%d发 [$%d]\n枪枝涂装", WeaponsList[gunid][wName], WeaponsList[gunid][wPrice], AmmosList[WeaponsList[gunid][wAmmo]][amAmount], AmmosList[WeaponsList[gunid][wAmmo]][amPrice]);
	ShowPlayerDialog(playerid, DIALOG_AMMU_BUY_GUN, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"武装国度", string, "选择", "离开");
	SetGVarInt("DDecideID", gunid, playerid);
	return 1;
}

stock ShowPlayerItemStoreMenu(playerid, type, id, page)
{
	new string[512], i, j, k, l, item, more;
	if(page < 0) page = 0;
	SetGVarInt("Page", page, playerid);
	switch(type)
	{
	    case 1:
	    {
            for(i = l = k = 0, j = MAX_ITEMS; i < j; i++)
			{
				if(VehicleItem[id][i][viType] == ITEM_NONE) continue;
				item = VehicleItem[id][i][viItemID];
				if(page*10 <= k < (page+1)*10)
				{
					switch(VehicleItem[id][i][viType])
					{
						case ITEM_WEAPON:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, WeaponsList[item][wName], VehicleItem[id][i][viCount], WeaponsList[item][wSpace]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_USE:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_USE[item][iuName], VehicleItem[id][i][viCount], ItemsList_USE[item][iuSpace]*VehicleItem[id][i][viCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_EQ:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_EQ[item][ieqName], VehicleItem[id][i][viCount], ItemsList_EQ[item][ieqSpace]*VehicleItem[id][i][viCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
				}
				else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取出道具", ""#TEXT_WHITE"这个载具的储物空间没有任何道具", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "名称\t数量\t占用空间\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_VSTORE_LOAD, DIALOG_STYLE_TABLIST_HEADERS, "取出道具", string, "选择", "关闭");
		}
		case 2:
	    {
            for(i = l = k = 0, j = MAX_ITEMS; i < j; i++)
			{
				if(EstateItem[id][i][eiType] == ITEM_NONE) continue;
				item = EstateItem[id][i][eiItemID];
				if(page*10 <= k < (page+1)*10)
				{
					switch(EstateItem[id][i][eiType])
					{
						case ITEM_WEAPON:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, WeaponsList[item][wName], EstateItem[id][i][eiCount], WeaponsList[item][wSpace]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_USE:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_USE[item][iuName], EstateItem[id][i][eiCount], ItemsList_USE[item][iuSpace]*EstateItem[id][i][eiCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_EQ:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_EQ[item][ieqName], EstateItem[id][i][eiCount], ItemsList_EQ[item][ieqSpace]*EstateItem[id][i][eiCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
				}
				else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取出道具", ""#TEXT_WHITE"储物空间没有任何道具", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "名称\t数量\t占用空间\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_LOAD, DIALOG_STYLE_TABLIST_HEADERS, "取出道具", string, "选择", "关闭");
		}
	    case 3:
	    {
            for(i = l = k = 0, j = MAX_ITEMS; i < j; i++)
			{
				if(DeptItem[id][i][diType] == ITEM_NONE) continue;
				item = DeptItem[id][i][diItemID];
				if(page*10 <= k < (page+1)*10)
				{
					switch(DeptItem[id][i][diType])
					{
						case ITEM_WEAPON:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, WeaponsList[item][wName], DeptItem[id][i][diCount], WeaponsList[item][wSpace]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_USE:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_USE[item][iuName], DeptItem[id][i][diCount], ItemsList_USE[item][iuSpace]*DeptItem[id][i][diCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
						case ITEM_EQ:
						{
							format(string, sizeof(string), "%s%s\t%d\t%d\n", string, ItemsList_EQ[item][ieqName], DeptItem[id][i][diCount], ItemsList_EQ[item][ieqSpace]*DeptItem[id][i][diCount]);
							SetGVarInt("DListID", i, l*1000+playerid);
							l++;
						}
					}
				}
				else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"取出道具", ""#TEXT_WHITE"储物空间没有任何道具", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "名称\t数量\t占用空间\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_LOAD, DIALOG_STYLE_TABLIST_HEADERS, "取出道具", string, "选择", "关闭");
		}
	}
	return 1;
}

stock ShowPlayerPropertyList(playerid, checkid, type, page)
{
	new string[768], string2[32], i, j, k, l, more;
	if(page < 0) page = 0;
	SetGVarInt("Page", page, playerid);
	switch(type)
	{
	    case 0:
	    {
	        for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
			{
   				if(VehData[i][vType] != VTYPE_PLAYER) continue;
				if(VehData[i][vOwner] == PlayerData[checkid][pID])
				{
				    if(page*10 <= k < (page+1)*10)
					{
						switch(VehData[i][vStatus])
						{
						    case VEH_NORMAL:
							{
								if(VehData[i][vLock] == 0) format(string2, sizeof(string2), ""#TEXT_FADEGREEN"未上锁");
								else format(string2, sizeof(string2), ""#TEXT_FADEGREEN"已上锁");
							}
						    case VEH_STOLEN: format(string2, sizeof(string2), ""#TEXT_YELLOW"失窃");
						    case VEH_DESTROYED: format(string2, sizeof(string2), ""#TEXT_RED"毁坏");
						    case VEH_STORED: format(string2, sizeof(string2), ""#TEXT_LIGHTBLUE"已储藏");
						}
						format(string, sizeof(string), "%s%s(%d)\t%s\t%s\n", string, GetVehicleName(VehData[i][vModel]), i, VehData[i][vPlate], string2);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					else if(l >= 10) {more = 1; break;}
					k++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"我的载具", ""#TEXT_WHITE"你没有任何载具", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "名称\t车牌\t状态\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_VEH, DIALOG_STYLE_TABLIST_HEADERS, "我的载具", string, "查看", "取消");
	    }
	    case 1:
	    {
	        new elecbill;
	        for(j = MAX_ESTATES; i < j; i++)
			{
				if(EstateData[i][eOwnerType] != ESTATE_OWNER_PLAYER){continue;}
				if(EstateData[i][eOwnerID] == PlayerData[checkid][pID])
				{
				    if(page*10 <= k < (page+1)*10)
					{
					    switch(EstateData[i][eType])
					    {
					        case ESTATE_HOUSE:
							{
								format(string2, sizeof(string2), "房屋");
								elecbill = PriceData[prcElec]*60;
							}
                            case ESTATE_SUITE:
							{
								format(string2, sizeof(string2), "套房");
								elecbill = PriceData[prcElec]*60;
							}
					    }
						format(string, sizeof(string), "%s%s(%d)\t%s\t$%d\t$%d\n", string, EstateData[i][eName], i, string2, EstateData[i][ePrice], elecbill);
						SetGVarInt("DListID", i, k*1000+playerid);
						l++;
					}
					else if(l >= 10) {more = 1; break;}
					k++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "地产一览", ""#TEXT_WHITE"你没有任何地产", "确认", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "地产名称\t种类\t价值\t每小时电费\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_PLAYER_ESTATE, DIALOG_STYLE_TABLIST_HEADERS, "地产一览", string, "管理", "关闭");
	    }
	    case 2:
		{
			new petid = GetGVarInt("CurrentPetID", checkid), animalid;
			for(j = MAX_PETS; i < j; i++)
			{
				if(PetData[checkid][i][petOwner] != PlayerData[checkid][pID] || PetData[checkid][i][petAnimal] == 0) { continue;}
				if(page*10 <= k < (page+1)*10)
				{
					animalid = PetData[checkid][i][petAnimal];
					if(petid == i && GetGVarInt("PetCalled", checkid) == 1) {format(string, sizeof(string), "%s"#TEXT_YELLOW"%s/%s\t%d\t%d	%d\n", string, PetData[checkid][i][petName], AnimalsList[animalid][amlName], floatround(PetData[checkid][i][petLove]), floatround(PetData[checkid][i][petHunger]), floatround(PetData[checkid][i][petHealth]));}
					else {format(string, sizeof(string), "%s%s(%s)\t%d\t%d	%d\n", string, PetData[checkid][i][petName], AnimalsList[animalid][amlName], floatround(PetData[checkid][i][petLove]), floatround(PetData[checkid][i][petHunger]), floatround(PetData[checkid][i][petHealth]));}
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(l >= 10) {more = 1; break;}
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"宠物", ""#TEXT_WHITE"你没有任何宠物", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "名称(品种)\t好感度\t饥饿值	生命值\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_PET, DIALOG_STYLE_TABLIST_HEADERS, "宠物", string, "呼叫/收回", "关闭");

			UpdatePlayerMission(playerid, 14, 5);
		}
		case 3:
		{
		    new plantid;
			for(j = MAX_PLANTS; i < j; i++)
			{
				if(PlantData[i][ptOwner] != PlayerData[checkid][pID]) { continue;} //检查是否是自己的
				if(page*10 <= k < (page+1)*10)
				{
					plantid = PlantData[i][ptPlantID];
					format(string, sizeof(string), "%s%s(%d)\t%d/%d\t点击查询位置\n", string, PlantList[plantid][ptName], i, PlantData[i][ptGrowth], PlantList[plantid][ptMaxGrowth]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(l >= 10) {more = 1; break;}
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "我的植物", ""#TEXT_WHITE"你没有任何植物", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "品种\t成熟度\t\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_PLANT_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "我的植物", string, "选择", "关闭");
		}
		case 4:
		{
		    new objectid, Year, Month, Day, Hour, Minute, Second;
		    if(GetGVarInt("CheckProp", playerid) == 0)
			{
			    format(string, sizeof(string), "%s直接通过点击选取\n", string);
				SetGVarInt("DListID", -3, l*1000+playerid);
				l++;

			    format(string, sizeof(string), "%s保养所有拥有物件\n", string);
				SetGVarInt("DListID", -4, l*1000+playerid);
				l++;
			}
			for(j = MAX_PLAYER_OBJECTS; i < j; i++)
			{
				if(ObjectData[i][oOwner] != PlayerData[checkid][pID]) { continue;}
				if(page*10 <= k < (page+1)*10)
				{
					objectid = ObjectData[i][oObjectID];
					TimestampToDate(ObjectData[i][oExpire], Year, Month, Day, Hour, Minute, Second, 8);
					format(string, sizeof(string), "%s%s(%d)\t%d\t%04d/%02d/%02d %02d:%02d:%02d\n", string, ObjectList[objectid][oName], i, floatround(ObjectData[i][oHealth]), Year, Month, Day, Hour, Minute, Second);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(l >= 10) {more = 1; break;}
				k++;
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "物件", ""#TEXT_WHITE"你没有任何物件", "确定", "");}
			if(page > 0)
			{
			    format(string, sizeof(string), "%s上一页\n", string);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
			    format(string, sizeof(string), "%s下一页\n", string);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(string, sizeof(string), "物件(ID)\t耐久度\t有效期限\n%s", string);
			ShowPlayerDialog(playerid, DIALOG_OBJECT, DIALOG_STYLE_TABLIST_HEADERS, "物件", string, "选择", "关闭");
		}
	}
	return 1;
}

stock ShowPlayerCompanyRadioList(playerid, comid, page)
{
	new i, j, k, l, trackstr[512], typestr[32], hrs, mins, secs, more;
	if(page < 0) page = 0;
	SetGVarInt("Page", page, playerid);
	for(j = MAX_PLAYLISTS; i < j; i++)
	{
		if(RadioTrack[comid][i][rdType] == RADIO_NONE) continue;
		if(page*10 <= k < (page+1)*10)
		{
			switch(RadioTrack[comid][i][rdType])
			{
				case RADIO_MUSIC: format(typestr, sizeof(typestr), "音乐");
				case RADIO_TEXT: format(typestr, sizeof(typestr), "纯消息");
				case RADIO_SPACE: format(typestr, sizeof(typestr), "间隔");
			}
			SecondToHMS(RadioTrack[comid][i][rdLength], hrs, mins, secs);
			if(CompanyData[comid][comRadioAir] > 0 && CompanyData[comid][comRadioTrack] == i) format(trackstr, sizeof(trackstr), "%s"#TEXT_YELLOW"%s(%d)\t%s\t%02d:%02d\n", trackstr, RadioTrack[comid][i][rdTitle], i, typestr, mins, secs);
			else format(trackstr, sizeof(trackstr), "%s"#TEXT_WHITE"%s(%d)\t%s\t%02d:%02d\n", trackstr, RadioTrack[comid][i][rdTitle], i, typestr, mins, secs);
			SetGVarInt("DListID", i, l*1000+playerid);
			l++;
		}
		else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
		k++;
	}
	if(l == 0){return ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_MAX, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"播放排程", ""#TEXT_WHITE"目前尚未有任何播放排程被建立\n现在建立新的排程吗?", "确定", "取消");}
	if(page > 0)
	{
	    format(trackstr, sizeof(trackstr), "%s上一页\n", trackstr);
		SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
		l++;
	}
	if(more == 1)
	{
	    format(trackstr, sizeof(trackstr), "%s下一页\n", trackstr);
		SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
		l++;
	}
	format(trackstr, sizeof(trackstr), "标题\t种类\t长度\n%s", trackstr);
	ShowPlayerDialog(playerid, DIALOG_COMPANY_MEDIA_RADIO_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"播放排程", trackstr, "选择", "取消");
	return 1;
}


stock ShowPlayerGangTurfList(playerid, gangid, page)
{
	new GList[512], rssstr[16], status[32], i, j, k, l, more;
	if(page < 0) page = 0;
	SetGVarInt("Page", page, playerid);
	for(i = k = l = 0, j = MAX_GANGZONES; i < j; i++)
	{
		if(GangZone[i][gzCreated] != 1){continue;}
		if(GangZone[i][gzOwner] == GangData[gangid][gID])
		{
			switch(GangZone[i][gzType])
			{
				case GZ_MONEY: format(rssstr, sizeof(rssstr), "保护费$%d", GangZone[i][gzGain]);
			    case GZ_WOOD: format(rssstr, sizeof(rssstr), "木材%d个", GangZone[i][gzGain]);
				case GZ_IRON: format(rssstr, sizeof(rssstr), "铁矿%d个", GangZone[i][gzGain]);
				case GZ_NITER: format(rssstr, sizeof(rssstr), "硝石%d个", GangZone[i][gzGain]);
				case GZ_ROCK: format(rssstr, sizeof(rssstr), "石材%d个", GangZone[i][gzGain]);
			}
			switch(GangZone[i][gzStatus])
			{
			    case GZ_NORMAL: format(status, sizeof(status), ""#TEXT_FADEGREEN"正常");
			    case GZ_UNDERATK: format(status, sizeof(status), ""#TEXT_RED"遭受攻击");
			    case GZ_CD: format(status, sizeof(status), ""#TEXT_LIGHTBLUE"冷却中");
			}
			if(page*10 <= k < (page+1)*10)
			{//在页面容纳数量范围内就纪录至string
				format(GList, sizeof(GList), "%s%s(%s)\t%d\t%d\t%s\n", GList, GangZone[i][gzName], status, GangZone[i][gzLevel], GangZone[i][gzDefense], rssstr);
			    SetGVarInt("DListID", i, l*1000+playerid);
			    l++;
			}
			else if(l >= 10) {more = 1; break;}//超过单页容纳数量就停止回圈
			k++;
		}
	}

	if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "地盘一览", ""#TEXT_WHITE"目前没有任何地盘", "确认", "");}
	if(page > 0)
	{
	    format(GList, sizeof(GList), "%s上一页\n", GList);
		SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
		l++;
	}
	if(more == 1)
	{
	    format(GList, sizeof(GList), "%s下一页\n", GList);
		SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
		l++;
	}
	format(GList, sizeof(GList), "地盘名称\t等级\t防御度\t收益\n%s", GList);
	ShowPlayerDialog(playerid, DIALOG_GANG_TURF, DIALOG_STYLE_TABLIST_HEADERS, "地盘一览", GList, "管理", "关闭");
	return 1;
}

stock ShowPlayerGPSList(playerid, category, page)
{
	new gpsstr[512], i, j, k, l, more, Float:gpsdis;
	if(page < 0) page = 0;
	SetGVarInt("Page", page, playerid);
	for(j = MAX_GPS; i < j; i++)
	{
		if(GPSList[i][gpsCreated] == false){continue;}
		switch(category)
		{
			case 1: if(GPSList[i][gpsType] != GPS_SHOP){continue;}
			case 2: if(GPSList[i][gpsType] != GPS_VEH){continue;}
			case 3: if(GPSList[i][gpsType] != GPS_JOB){continue;}
			case 4: if(GPSList[i][gpsType] != GPS_SPOT){continue;}
			case 5: if(GPSList[i][gpsType] != GPS_FUNCTION){continue;}
			case 6: if(GPSList[i][gpsType] != GPS_COLLEGE){continue;}
			case 7: if(GPSList[i][gpsType] != GPS_GOODS){continue;}
			case 8: if(GPSList[i][gpsType] != GPS_RACE){continue;}
			case 9: if(GPSList[i][gpsType] != GPS_PROP_SUITE){continue;}
			case 10: if(GPSList[i][gpsType] != GPS_PROP_HOUSE){continue;}
			case 11: if(GPSList[i][gpsType] != GPS_PROP_CLUBHOUSE){continue;}
			case 12: if(GPSList[i][gpsType] != GPS_PROP_OFFICE){continue;}
			case 13: if(GPSList[i][gpsType] != GPS_PROP_WAREHOUSE){continue;}
			case 14: if(GPSList[i][gpsType] != GPS_PROP_HANGAR){continue;}
			case 15: if(GPSList[i][gpsType] != GPS_PROP_BOATYARD){continue;}
			case 16: if(GPSList[i][gpsType] != GPS_PROP_FACTORY){continue;}
		}
		if(GetPlayerDistanceFromPointEx(playerid, GPSList[i][gpsX], GPSList[i][gpsY], GPSList[i][gpsZ]) < 1500.0)
		{
			if(page*10 <= k < (page+1)*10)
			{
				gpsdis = GetPlayerDistanceFromPointEx(playerid, GPSList[i][gpsX], GPSList[i][gpsY], GPSList[i][gpsZ]);
				format(gpsstr, sizeof(gpsstr), "%s%s\t\t%dm\n", gpsstr, GPSList[i][gpsName], floatround(gpsdis));
				SetGVarInt("DListID", i, l*1000+playerid);
			    l++;
			}
			else if(l >= 10) {more = 1; break;}
			k++;
		}
	}
	if(l == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "GPS定位装置", ""#TEXT_WHITE"附近没有任何地标", "确认", "");
	if(page > 0)
	{
	    format(gpsstr, sizeof(gpsstr), "%s上一页\n", gpsstr);
		SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
		l++;
	}
	if(more == 1)
	{
	    format(gpsstr, sizeof(gpsstr), "%s下一页\n", gpsstr);
		SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
		l++;
	}
	format(gpsstr, sizeof(gpsstr), "地点\t\t距离\n%s", gpsstr);
	ShowPlayerDialog(playerid, DIALOG_GPS_NEAR, DIALOG_STYLE_TABLIST_HEADERS, "GPS定位装置", gpsstr, "选择", "关闭");
	SetGVarInt("DDecideType", category, playerid);
	return 1;
}

stock GetPlayerTitle(playerid)
{
	new titlestr[64];
	switch(PlayerData[playerid][pTitle])
	{
	    case TITLE_NONE:
		{
		    if(PlayerData[playerid][pLevel] < 15) format(titlestr, sizeof(titlestr), ""#TEXT_LIGHTORANGE"新手");
			else format(titlestr, sizeof(titlestr), ""#TEXT_WHITE"平民");
		}
	    case TITLE_COMPANY:
		{
			if(PlayerData[playerid][pCompany] != -1)
			{
			    new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
			    if(CompanyData[comid][comCEO] == PlayerData[playerid][pID]) format(titlestr, sizeof(titlestr), "{%06x}%s的CEO", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
			    else format(titlestr, sizeof(titlestr), "{%06x}%s", CompanyData[comid][comColor] >>> 8, CompanyData[comid][comName]);
			}
			else format(titlestr, sizeof(titlestr), ""#TEXT_WHITE"平民");
		}
		case TITLE_GANG:
		{
			if(PlayerData[playerid][pGang] != -1)
			{
			    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
			    if(GangData[gangid][gBoss] == PlayerData[playerid][pID]) format(titlestr, sizeof(titlestr), "{%06x}%s", GangData[gangid][gColor] >>> 8, GangData[gangid][gShort]);
			    else format(titlestr, sizeof(titlestr), "{%06x}%s", GangData[gangid][gColor] >>> 8, GangData[gangid][gShort]);
			}
			else format(titlestr, sizeof(titlestr), ""#TEXT_WHITE"平民");
		}
		case TITLE_GANG_FULL:
		{
			if(PlayerData[playerid][pGang] != -1)
			{
			    new gangid = GangSqlIDToID(PlayerData[playerid][pGang]);
			    if(GangData[gangid][gBoss] == PlayerData[playerid][pID]) format(titlestr, sizeof(titlestr), "{%06x}%s首领", GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
			    else format(titlestr, sizeof(titlestr), "{%06x}%s", GangData[gangid][gColor] >>> 8, GangData[gangid][gName]);
			}
			else format(titlestr, sizeof(titlestr), ""#TEXT_WHITE"平民");
		}
		case TITLE_DEPARTMENT:
		{
		    switch(PlayerData[playerid][pDepartment])
		    {
		        case DEPT_POLICE:
				{
					if(PlayerData[playerid][pDeptRank] == 5) format(titlestr, sizeof(titlestr), ""#TEXT_BLUE"警长");
					else format(titlestr, sizeof(titlestr), ""#TEXT_BLUE"警察");
				}
		        case DEPT_MEDIC:
				{
					if(PlayerData[playerid][pDeptRank] == 5) format(titlestr, sizeof(titlestr), ""#TEXT_NURSEPINK"院长");
					else format(titlestr, sizeof(titlestr), ""#TEXT_NURSEPINK"医生");
				}
		        case DEPT_GOVERNMENT:
				{
					if(PlayerData[playerid][pDeptRank] == 5)  format(titlestr, sizeof(titlestr), ""#TEXT_GRAD"州长");
					else format(titlestr, sizeof(titlestr), ""#TEXT_GRAD"政府官员");
				}
		        case DEPT_ARMY:
				{
					if(PlayerData[playerid][pDeptRank] == 5) format(titlestr, sizeof(titlestr), ""#TEXT_FADEGREEN"统帅");
					else format(titlestr, sizeof(titlestr), ""#TEXT_FADEGREEN"军人");
				}
		        case DEPT_COUNSELOR:
				{
					if(PlayerData[playerid][pDeptRank] == 5) format(titlestr, sizeof(titlestr), ""#TEXT_PINKRED"辅导长");
					else format(titlestr, sizeof(titlestr), ""#TEXT_PINKRED"辅导员");
				}
		        default: format(titlestr, sizeof(titlestr), ""#TEXT_WHITE"平民");
		    }
		}
	}
	return titlestr;
}

stock GetJobName(playerid)
{
	new jobstr[32];
	switch(PlayerData[playerid][pJob])
	{
	    case JOB_TRASH: format(jobstr, sizeof(jobstr), "垃圾清洁工");
	    case JOB_TRUCK: format(jobstr, sizeof(jobstr), "联结车驾驶");
	    case JOB_PAPER: format(jobstr, sizeof(jobstr), "传单发送员");
	    case JOB_SWEEPER: format(jobstr, sizeof(jobstr), "洗地工人");
	    case JOB_TOW: format(jobstr, sizeof(jobstr), "道路救援");
	    case JOB_FISHER: format(jobstr, sizeof(jobstr), "渔夫");
	    case JOB_HOUSESELL: format(jobstr, sizeof(jobstr), "房屋销售员");
	    case JOB_CARSELL: format(jobstr, sizeof(jobstr), "汽车销售员");
	    case JOB_MINER: format(jobstr, sizeof(jobstr), "矿工");
	    case JOB_LUMBERJACK: format(jobstr, sizeof(jobstr), "伐木工");
	    case JOB_FD: format(jobstr, sizeof(jobstr), "外送员");
	    case JOB_FVENDOR: format(jobstr, sizeof(jobstr), "餐车经营");
		case JOB_HUNTER: format(jobstr, sizeof(jobstr), "猎人");
	    default: format(jobstr, sizeof(jobstr), "无");
	}
	return jobstr;
}

PUBLIC:SeaTreasure()
{
	new string[144], rand, drop;
	rand = random(sizeof(TreasureList));
	switch(TreasureList[rand][trType])
	{
	    case TREA_SEA:
	    {
			format(string, sizeof(string), ""#TEXT_SKYBLUE"<<宝藏>>"#TEXT_YELLOW"在"#TEXT_PINK" %s "#TEXT_YELLOW"的海域发现了传说中的"#TEXT_SKYBLUE"海底宝藏", TreasureList[rand][trLocation]);
			SendClientMessageToAll(COLOR_WHITE, string);
			SendClientMessageToAll(COLOR_WHITE, ""#TEXT_SKYBLUE"<<宝藏>>"#TEXT_FADERED"找到潜藏在海中的宝藏箱,宝藏内可能藏着十分有价值的财宝!");
			drop = CreateDropItem(ITEM_USE, TreasureList[rand][trItemID], 1, TreasureList[rand][trX], TreasureList[rand][trY], TreasureList[rand][trZ], 0, 3600);
		}
	}
	SetTimer("SeaTreasure", 1800000, 0);
	SetGVarInt("Treasure", TreasureList[rand][trType], drop);
}

stock PlayerHaveVehicle(playerid)
{
    new i, j, amount;
    for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
    {
        if(VehData[i][vType] != VTYPE_PLAYER) continue;
        if(VehData[i][vOwner] == PlayerData[playerid][pID]) amount ++;
	}
	return amount;
}

stock CompanyHaveVehicle(csqlid)
{
    new i, j, amount;
    for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
    {
        if(VehData[i][vType] != VTYPE_COMPANY) continue;
        if(VehData[i][vOwner] == csqlid) amount ++;
	}
	return amount;
}

stock GangHaveVehicle(gsqlid)
{
    new i, j, amount;
    for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
    {
        if(VehData[i][vType] != VTYPE_GANG) continue;
        if(VehData[i][vOwner] == gsqlid) amount ++;
	}
	return amount;
}

stock PlayerHaveEstate(playerid)
{
    new i, j, amount;
    for(i = 0, j = MAX_ESTATES; i < j ; i++)
    {
        if(EstateData[i][eOwnerType] != ESTATE_OWNER_PLAYER) continue;
        if(EstateData[i][eOwnerID] == PlayerData[playerid][pID]) amount ++;
	}
	return amount;
}

stock SendTeamMessage(teamid, color, const string[])
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 1) continue;
		if(GetPlayerTeam(i) == teamid)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendCompanyMessage(comsqlid, color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pCompany] == comsqlid)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendGangMessage(gangsqlid, color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pGang] == gangsqlid)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendDeptMessage(dpid, color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pDepartment] == dpid)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendAllDeptMessage(color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pDepartment] > 0)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendNewbieMessage(color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pDepartment] == DEPT_COUNSELOR || PlayerData[i][pLevel] < 15)
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock SendAdminMessage(color, const string[])
{
    ForEachPlayer(i)
	{
		if(PlayerData[i][pAdmin] > 0)
		{
			SendClientMessage(i, color, string);
		}
	}
}

static SetPlayerJoinTeam(playerid, teamid)
{
    new string[144];
    if(GetGVarInt("Eventing", playerid) == 1) return 0;
	if(Team[teamid][tCreated] == 1)
	{
	    PutPlayerToTeam(playerid, teamid);
	    format(string, sizeof(string), "<<小队>> 新队员 %s 已经加入小队", PlayerData[playerid][pName]);
	    SendTeamMessage(teamid, COLOR_LIGHTBLUE, string);
	    Team[teamid][tMembers] += 1;
		UpdatePlayerColor(playerid);
	}
	return 1;
}

static SetPlayerLeaveTeam(playerid)
{
    if(GetGVarInt("Eventing", playerid) == 1) return 0;
	new pteam = GetPlayerTeam(playerid), string[144];

	if(pteam != NO_TEAM && Team[pteam][tCreated] == 1)
	{
		PutPlayerToTeam(playerid, NO_TEAM);
	    Team[pteam][tMembers] -= 1;
	    if(Team[pteam][tLeader] == playerid || Team[pteam][tMembers] <= 0)
	    {
			if(Team[pteam][tLeader] == playerid){
				format(string, sizeof(string), "<<小队>> "#TEXT_YELLOW"队长 %s 已经离开小队,小队将会被解散", PlayerData[playerid][pName]);
			}else{
				format(string, sizeof(string), "<<小队>> "#TEXT_YELLOW"小队已经无人,小队将会被解散");
			}
	        SendTeamMessage(pteam, COLOR_LIGHTBLUE, string);
	        DisbandTeam(pteam);
	    }
	    else
	    {
	        format(string, sizeof(string), "<<小队>> 队员 %s 已经离开小队", PlayerData[playerid][pName]);
	        SendTeamMessage(pteam, COLOR_LIGHTBLUE, string);
	    }
	}
	UpdatePlayerColor(playerid);
	return 1;
}

static DisbandTeam(teamid)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 1) continue;
	    if(GetPlayerTeam(i) == teamid)
	    {
	        SetPlayerLeaveTeam(i);
	    }
	}
	if(Team[teamid][tCreated])
	{
	    Team[teamid][tCreated] =
		Team[teamid][tPublic] =
		Team[teamid][tMembers] = 0;
		Team[teamid][tLeader] = INVALID_PLAYER_ID;
	}
}

static StopFishing(playerid)
{
    new string[144], playername[MAX_PLAYER_NAME], rand,
	fish = GetGVarInt("Fish", playerid);
	switch(fish)
	{
	    case -1:
		{
		    if(PlayerData[playerid][pBag]+5 > GetPlayerBagLimit(playerid))
		    {
		        format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个皮夹,捡到了里面的 "#TEXT_GREEN"$250");
				GiveMoney(playerid, 250);
				Log(moneylog, INFO, "%s(%d)钓鱼钓到了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 250);
		    }
		    else
		    {
				PlayerData[playerid][pBag] += 5;
				format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"钓到了背包空间5格", rand);
			}
		}
        case -2:
		{
		    if(PlayerData[playerid][pBag]+10 > GetPlayerBagLimit(playerid))
		    {
		        format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个皮夹,捡到了里面的 "#TEXT_GREEN"$500");
				GiveMoney(playerid, 500);
				Log(moneylog, INFO, "%s(%d)钓鱼钓到了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 500);
		    }
		    else
		    {
				PlayerData[playerid][pBag] += 10;
				format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"钓到了背包空间10格", rand);
			}
		}
		case -3:
		{
		    if(PlayerData[playerid][pBag]+20 > GetPlayerBagLimit(playerid))
		    {
		        format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个皮夹,捡到了里面的 "#TEXT_GREEN"$1000");
				GiveMoney(playerid, 1000);
				Log(moneylog, INFO, "%s(%d)钓鱼钓到了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 1000);
		    }
		    else
		    {
				PlayerData[playerid][pBag] += 20;
				format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"钓到了背包空间20格", rand);
			}
		}
		case -4:
		{
		    if(PlayerData[playerid][pBag]+50 > GetPlayerBagLimit(playerid))
		    {
		        format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个皮夹,捡到了里面的 "#TEXT_GREEN"$2500");
				GiveMoney(playerid, 2500);
				Log(moneylog, INFO, "%s(%d)钓鱼钓到了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], 2500);
		    }
		    else
		    {
				PlayerData[playerid][pBag] += 50;
				format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"钓到了背包空间50格", rand);
			}
		}
		case -5:
		{
			GivePlayerPoint(playerid, 6, 1);
			format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"钓到了稀有技能点1点", rand);
		}
		case -6:
		{
		    new i, j, k;
		    for(i = 0, j = MAX_BLETTERS, k = 0; i < j; i++)
		    {
		        if(BottleLetter[i][btlCreated] == 1)
		        {
		            SetGVarInt("DListID", i, k*1000+playerid);
		            k++;
		        }
		    }
		    if(k > 0)
		    {
		        j = random(k),
				i = GetGVarInt("DListID", j*1000+playerid);
			    if(GetGVarInt("FishEx", playerid) == 1)
			    {
			        format(string, sizeof(string), "梦月潭精灵: %s钓到了%s所写的瓶中信,信上写: %s", PlayerData[playerid][pName], GetPlayerSqlName(BottleLetter[i][btlOwner]), BottleLetter[i][btlText]);
			        SendClientMessageToAll(COLOR_VIOLET, string);
			    }
			    format(string, sizeof(string), ""#TEXT_YELLOW"** 结果: "#TEXT_WHITE"钓到了瓶中信:"#TEXT_FADEYELLOW" %s From:%s", BottleLetter[i][btlText], GetPlayerSqlName(BottleLetter[i][btlOwner]));
			    DeleteBottleLetter(i);
			}
			else
			{
				format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个空的瓶中信");
			}
			GivePlayerItem(playerid, ITEM_USE, 303, 1);
		}
		case 0: {format(string, sizeof(string), ""#TEXT_WHITE"** 结果: "#TEXT_WHITE"你什么都没钓到就收起钓竿了");}
		case 1: {format(string, sizeof(string), ""#TEXT_RED"** 结果: "#TEXT_WHITE"钓到的鱼已经吃掉鱼饵游走了,什么都没钓到");}
		case 2: {format(string, sizeof(string), ""#TEXT_RED"** 结果: "#TEXT_WHITE"你钓到了一个"#TEXT_RED"垃圾");}
		case 3:
		{
			rand = 1000 + random(2000);
			format(string, sizeof(string), ""#TEXT_GREEN"** 结果: "#TEXT_WHITE"你钓到了一个皮夹,捡到了里面的 "#TEXT_GREEN"$%d", rand);
			GiveMoney(playerid, rand);
			Log(moneylog, INFO, "%s(%d)钓鱼钓到了$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], rand);
		}
		default:
		{
		    new exp = 50;
			format(string, sizeof(string), ""#TEXT_SKYBLUE"** 结果: "#TEXT_WHITE"你钓到了"#TEXT_SKYBLUE"%s,"#TEXT_WHITE"打开背包可以查看你的收获", ItemsList_USE[fish][iuName]);
			GivePlayerItem(playerid, 1, fish, 1);
			RecordData[playerid][prFishes] ++;
			GivePlayerExp(playerid, exp, EXP_FISH);
		}
	}
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof(string), "%s\n"#TEXT_WHITE"是否要继续钓鱼?\n目前还有%d个鱼饵", string, PlayerHaveItem(playerid, ITEM_USE, 33));
	if(fish != 0 && PlayerHaveItem(playerid, ITEM_USE, 33) > 0) ShowPlayerDialog(playerid, DIALOG_FISH, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"钓鱼", string, "继续", "取消");

	SetGVarInt("Fishing", 0, playerid);
	//TogglePlayerControllableEx(playerid, 1);
	ApplyAnimationEx(playerid, "SWORD", "sword_block", 4.1, 0, 0, 0, 0, 0, 1);
	RemovePlayerAttachedObject(playerid, 7);
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	SendClientMessage(playerid, COLOR_WHITE, "你将钓竿收起来了");
	format(string, sizeof(string), "** %s 收起了钓竿 **", playername);
	SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");

	UpdatePlayerMission(playerid, 9, 9);
}

stock SetVehiclePlate(vehicleid, plate[])
{
	new text[32], model = GetVehicleModel(vehicleid);
    if(model == 462 || model == 448){format(text, 32, ""#TEXT_DARKGREEN"%s", plate);}
	else if(model == 420 || model == 438){format(text, 32, ""#TEXT_RED"%s", plate);}
	else if(IsATrailerTruck(vehicleid) || model == 437){format(text, 32, ""#TEXT_DARKGREEN"%s", plate);}
	else if(IsACar(vehicleid)){format(text, 32, ""#TEXT_BLACK"%s", plate);}
	else if(IsAMotorBike(vehicleid)){format(text, 32, ""#TEXT_RED"%s", plate);}
	SetVehicleNumberPlate(vehicleid, text);
}

PUBLIC:PlayerExitBuySkin(playerid)
{
	new Float:tmpX = GetGVarFloat("SelectorX", playerid),
		Float:tmpY = GetGVarFloat("SelectorY", playerid),
		Float:tmpZ = GetGVarFloat("SelectorZ", playerid),
		tmpI = GetGVarInt("SelectorI", playerid),
		tmpW = GetGVarInt("SelectorW", playerid);
	SetGVarInt("PlayerBuyingSkin", 0, playerid);
    SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
 	SetPlayerPos_Fix(playerid, tmpX, tmpY, tmpZ);
	SetPlayerVirtualWorld(playerid, tmpW);
	SetPlayerInterior(playerid, tmpI);
	SetCameraBehindPlayer(playerid);
	TogglePlayerControllableEx(playerid, 1);

	HideBuySkinTextDraw(playerid);
	return 1;
}

stock HideBuySkinTextDraw(playerid)
{
    CancelSelectTextDraw(playerid);

	PlayerTextDrawHide(playerid, SkinBuy[playerid]);
	PlayerTextDrawHide(playerid, SkinExit[playerid]);
	PlayerTextDrawHide(playerid, SkinLeft[playerid]);
	PlayerTextDrawHide(playerid, SkinRight[playerid]);
	PlayerTextDrawHide(playerid, SkinPrice[playerid]);
}

static PayCheck(playerid)
{
	new string[144];
	if(LimitData[playerid][plPayCheck] > 0)
	{
		format(string, sizeof(string), "<<薪资>> 你工作所得的薪水"#TEXT_WHITE"$%d"#TEXT_FADEGREEN"已经汇入你的银行帐户", LimitData[playerid][plPayCheck]);
		SendClientMessage(playerid, COLOR_FADEGREEN, string);
		PlayerData[playerid][pBank] += LimitData[playerid][plPayCheck];
		Log(moneylog, INFO, "%s(%d)获得了工作薪资$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], LimitData[playerid][plPayCheck]);
		LimitData[playerid][plPayCheck] = 0;
	}
}

static PayTax(playerid)
{
	new string[144], rent, rentid,
	Float:tax = PriceData[prcTax],
	amount = floatround(float(PlayerData[playerid][pCash] + PlayerData[playerid][pBank])*tax),
	welfare = PriceData[prcWelfare];

	if(PlayerData[playerid][pCash] + PlayerData[playerid][pBank] > 10000 && PlayerData[playerid][pLevel] > 15)
	{
		format(string, sizeof(string), "<<课税> 目前税率为%.5f,已从你的总财产收取$%d的税金", tax, amount);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		if(PlayerData[playerid][pBank] > 0) PlayerData[playerid][pBank] -= amount;
		else GiveMoney(playerid, -amount);
		Department[DEPT_GOVERNMENT][dpFund] += amount;
		Log(moneylog, INFO, "%s(%d)支付了税金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
		Log(deptlog, INFO, "%s(%d)缴纳了$%d的税金给国库", PlayerData[playerid][pName], PlayerData[playerid][pID], amount);
	}
	if(welfare > 0 && welfare < Department[DEPT_GOVERNMENT][dpFund])
	{
	    format(string, sizeof(string), "<<福利津贴> 你收到了来自政府的福利津贴$%d", welfare);
		SendClientMessage(playerid, COLOR_FADEGREEN, string);
		PlayerData[playerid][pBank] += welfare;
		Log(moneylog, INFO, "%s(%d)获得了政府津贴$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], welfare);
		Log(deptlog, INFO, "%s(%d)获得了来自国库的津贴$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], welfare);
		Department[DEPT_GOVERNMENT][dpFund] -= welfare;
	}
	if(PlayerData[playerid][pRenting] == 1)
	{
	    rentid = EstateSqlIDToID(PlayerData[playerid][pRentID]);
	    rent = EstateData[rentid][eRent];
	    if(EstateData[rentid][eRentable] == 0 || EstateData[rentid][eOwnerType] == ESTATE_OWNER_NONE)
		{
		    format(string, sizeof(string), "<<租屋处通知> 你的租屋处 %s 已经不开放出租,你无法再进入该地产内", EstateData[rentid][eName]);
			SendClientMessage(playerid, COLOR_FADERED, string);
			PlayerData[playerid][pRenting] = 0;
		}
		else if(PlayerData[playerid][pCash] + PlayerData[playerid][pBank] < rent)
		{
		    format(string, sizeof(string), "<<租屋处通知> 你付不起租屋处 %s 的租金 $%d,你无法再进入该地产内", EstateData[rentid][eName], rent);
			SendClientMessage(playerid, COLOR_FADERED, string);
			PlayerData[playerid][pRenting] = 0;
		}
		else
		{
		    format(string, sizeof(string), "<<租屋处通知> 租屋处 %s 的租金 $%d 已从你的存款扣除", EstateData[rentid][eName], rent);
			SendClientMessage(playerid, COLOR_YELLOW, string);
		    PlayerData[playerid][pBank] -= rent;
		    Log(moneylog, INFO, "%s(%d)支付了地产%s(%d)的房租$%d(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[rentid][eName], EstateData[rentid][eID], rent);
		    EstateData[rentid][eMoney] += rent;
		}
	}
}

stock NewHour()
{
    new string[144], estates, bill, i, j, a, b, income1, income2;
    income1 = income2 = 0;
    ForEachPlayer(p)
    {
        if(GetGVarInt("Logged", p) == 0) continue;
        DateProp(p);
        PayCheck(p);
		PayTax(p);
		estates = PlayerHaveEstate(p);
		if(estates > 0)
		{
			bill = estates*60*PriceData[prcElec];
			if(PlayerData[p][pCash] + PlayerData[p][pBank] < bill)
			{
			    if(LimitData[p][plEstateDebt] == 12)
			    {
					for(i = 0, j = MAX_ESTATES; i < j; i++)
					{
					    if(EstateData[i][eOwnerType] != ESTATE_OWNER_PLAYER) continue;
					    if(EstateData[i][eOwnerID] == PlayerData[p][pID])
					    {
					        format(string, sizeof(string), "<<地产法拍通知>> 你因为长期欠缴帐单,你失去了地产%s的所有权", EstateData[i][eName]);
							SendPlayerTextMsg_NPC(p, 0, string);
							format(string, sizeof(string), "<<法拍公告>> 地产%s因地主长期欠缴电费而被法拍了", EstateData[i][eName]);
							SendClientMessageToAll(COLOR_GREEN, string);
							Log(estatelog, INFO, "地产%s(%d)因地主长期欠缴电费而被法拍了", EstateData[i][eName], EstateData[i][eID]);
							income2 += EstateData[i][ePrice]/2;
					        DeleteEstateOwner(i);
					    }
					}
			    }
			    else
			    {
				    LimitData[p][plEstateDebt] ++;
				    format(string, sizeof(string), "<<负债通知>> 你因为无法支付电费帐单$%d,你拥有的地产将暂时失去部分功能,如果长期欠缴帐单,你的地产将会强制被法拍", bill);
					SendPlayerTextMsg_NPC(p, 0, string);
				}
			}
			else
			{
			    if(PlayerData[p][pBank] > 0)
			    {
					PlayerData[p][pBank] -= bill;
					format(string, sizeof(string), "<<帐单>> "#TEXT_WHITE"你的地产用电帐单"#TEXT_FADERED"$%d"#TEXT_WHITE"已从银行帐户扣除", bill);
					Log(moneylog, INFO, "%s(%d)支付了地产帐单共$%d(存款)", PlayerData[p][pName], PlayerData[p][pID], bill);
				}
				else
				{
				    GiveMoney(p, -bill);
					format(string, sizeof(string), "<<帐单>> "#TEXT_WHITE"你的地产用电帐单"#TEXT_FADERED"$%d"#TEXT_WHITE"已从现金扣除", bill);
					Log(moneylog, INFO, "%s(%d)支付了地产帐单共$%d", PlayerData[p][pName], PlayerData[p][pID], bill);
				}
				SendClientMessage(p, COLOR_FADERED, string);
				LimitData[p][plEstateDebt] = 0;
				income1 += bill;
			}
		}
	}

	new collect = GetGVarInt("CGECollect");//每四小时向企业与帮会收电费
	if(collect < 4) SetGVarInt("CGECollect", collect+1);
	else
	{
	    DeleteGVar("CGECollect");
		for(i = 0, j = MAX_COMPANIES; i < j; i++)
		{
		    if(CompanyData[i][comCreated] == 0) continue;
		    if(GetCompanyEstates(i) > 0)
		    {
				bill = GetCompanyEstatesBill(i);
				if(CompanyData[i][comFund] < bill)
				{
				    if(GetGVarInt("ComEDebt", i) == 12)
				    {
						for(a = 0, b = MAX_ESTATES; a < b; a++)
						{
						    if(EstateData[a][eOwnerType] != ESTATE_OWNER_COMPANY) continue;
						    if(EstateData[a][eOwnerID] == CompanyData[i][comID])
						    {
						        format(string, sizeof(string), "<<地产法拍通知>> 企业因为长期欠缴帐单,失去了地产的所有权", EstateData[a][eName]);
						        ForEachPlayer(k)
						        {
						            if(PlayerData[k][pCompany] == CompanyData[i][comID]) SendPlayerTextMsg_NPC(k, 0, string);
								}
								format(string, sizeof(string), "<<法拍公告>> 地产%s因地主长期欠缴电费而被法拍了", EstateData[a][eName]);
								SendClientMessageToAll(COLOR_GREEN, string);
								Log(estatelog, INFO, "地产%s(%d)因地主长期欠缴电费而被法拍了", EstateData[a][eName], EstateData[a][eID]);
								Log(companylog, INFO, "企业%s(%d)的地产%s(%d)因长期欠缴电费而被法拍了", CompanyData[i][comName], CompanyData[i][comID], EstateData[a][eName], EstateData[a][eID]);
								income2 += EstateData[i][ePrice]/2;
						        DeleteEstateOwner(a);
						    }
						}
				    }
				    else
				    {
					    SetGVarInt("ComEDebt", GetGVarInt("ComEDebt", i)+1, i);
					    format(string, sizeof(string), "<<帐单通知>> 企业因为资金不足无法支付电费帐单$%d,若拖欠超过%d小时企业将失去地产所有权", bill, 12-GetGVarInt("ComEDebt", i));
					    ForEachPlayer(k)
						{
						    if(PlayerData[k][pCompany] == CompanyData[i][comID]) SendPlayerTextMsg_NPC(k, 0, string);
						}
						SendCompanyMessage(CompanyData[i][comID], COLOR_FADERED, string);
					}
				}
				else
				{
				    CompanyData[i][comFund] -= bill;
					format(string, sizeof(string), "<<企业帐单>> "#TEXT_WHITE"企业地产用电帐单"#TEXT_FADERED"$%d"#TEXT_WHITE"已从企业资金扣除", bill);
					SendCompanyMessage(CompanyData[i][comID], COLOR_BLUEGREEN, string);
					Log(companylog, INFO, "企业%s(%d)用资金支付了地产电费$%d", CompanyData[i][comName], CompanyData[i][comID], bill);
					income1 += bill;
				}
		    }
		}
		for(i = 0, j = MAX_GANGS; i < j; i++)
		{
		    if(GangData[i][gCreated] == 0) continue;
		    if(GetGangEstates(i) > 0)
		    {
				bill = GetGangEstatesBill(i);
				if(GangData[i][gFund] < bill)
				{
				    if(GetGVarInt("GangEDebt", i) == 12)
				    {
						for(a = 0, b = MAX_ESTATES; a < b; a++)
						{
						    if(EstateData[a][eOwnerType] != ESTATE_OWNER_GANG) continue;
						    if(EstateData[a][eOwnerID] == GangData[i][gID])
						    {
						        format(string, sizeof(string), "<<地产法拍通知>> 帮会因为长期欠缴帐单,失去了地产%s的所有权", EstateData[a][eName]);
								ForEachPlayer(k)
						        {
						            if(PlayerData[k][pGang] == GangData[i][gID]) SendPlayerTextMsg_NPC(k, 0, string);
								}
								format(string, sizeof(string), "<<法拍公告>> 地产%s因地主长期欠缴电费而被法拍了", EstateData[a][eName]);
								SendClientMessageToAll(COLOR_GREEN, string);
								Log(estatelog, INFO, "地产%s(%d)因地主长期欠缴电费而被法拍了", EstateData[a][eName], EstateData[a][eID]);
								Log(ganglog, INFO, "帮会%s(%d)的地产%s(%d)因长期欠缴电费而被法拍了", GangData[i][gName], GangData[i][gID], EstateData[a][eName], EstateData[a][eID]);
								income2 += EstateData[i][ePrice]/2;
						        DeleteEstateOwner(a);
						    }
						}
				    }
				    else
				    {
					    SetGVarInt("GangEDebt", GetGVarInt("GangEDebt", i)+1, i);
					    format(string, sizeof(string), "<<帐单通知>> 帮会因为资金不足无法支付电费帐单$%d,若拖欠超过%d小时帮会将失去地产所有权", bill, 12-GetGVarInt("GangEDebt", i));
					    ForEachPlayer(k)
						{
						    if(PlayerData[k][pGang] == GangData[i][gID]) SendPlayerTextMsg_NPC(k, 0, string);
						}
					}
				}
				else
				{
				    GangData[i][gFund] -= bill;
					format(string, sizeof(string), "<<帮会帐单>> "#TEXT_WHITE"帮会地产用电帐单"#TEXT_FADERED"$%d"#TEXT_WHITE"已从帮会资金扣除", bill);
					SendGangMessage(GangData[i][gID], COLOR_FADERED, string);
					Log(ganglog, INFO, "帮会%s(%d)用资金支付了地产电费$%d", GangData[i][gName], GangData[i][gID], bill);
					income1 += bill;
				}
		    }
		}
	}
	Department[DEPT_GOVERNMENT][dpFund] += income1;
	format(string, sizeof(string), "<<部门>> 本次各地产电费收入为国库增加 $%d 资金", income1);
	SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
	Log(deptlog, INFO, "国库增加了来自地产电费的收入共$%d", income1);
	if(income2 > 0)
	{
	    Department[DEPT_GOVERNMENT][dpFund] += income2;
		format(string, sizeof(string), "<<部门>> 本次法拍的地产为国库增加 $%d 资金", income2);
		SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
		Log(deptlog, INFO, "国库增加了来自地产法拍的收入共$%d", income2);
	}
}

stock SetPlayerGPS(playerid, Float:gx, Float:gy, Float:gz)
{
    SetPlayerMapIcon(playerid, 99, gx, gy, gz, 0, COLOR_PURPLE, MAPICON_GLOBAL_CHECKPOINT);
	SetGVarFloat("GPSX", gx, playerid);
	SetGVarFloat("GPSY", gy, playerid);
	SetGVarFloat("GPSZ", gz, playerid);
	SetGVarInt("GPS2", 1, playerid);
}

stock DisablePlayerGPS(playerid)
{
    RemovePlayerMapIcon(playerid, 99);
	DeleteGVar("GPSX", playerid);
	DeleteGVar("GPSY", playerid);
	DeleteGVar("GPSZ", playerid);
	DeleteGVar("GPS2", playerid);
}

PUBLIC:Fisherman(playerid)
{
	if(GetGVarInt("Fishering", playerid))
	{
		new check,
		vehicleid = GetGVarInt("FisherBoat", vehicleid),
		Float:px = GetGVarFloat("FisherX", playerid),
		Float:py = GetGVarFloat("FisherY", playerid),
		Float:pz = GetGVarFloat("FisherZ", playerid),
		rand = random(100);
		if(GetVehicleDistanceFromPoint(vehicleid, px, py, pz) < 15.0)
		{
            GetPlayerPos(playerid, px, py, pz);
            SetGVarFloat("FisherX", px, playerid);
			SetGVarFloat("FisherY", py, playerid);
			SetGVarFloat("FisherZ", pz, playerid);
		    if(GetPlayerTotalFisheries(playerid) < 150)
		    {
		        SetTimerEx("Fisherman", (5+random(10))*1000, 0, "i", playerid);
			    if(IsPlayerOnSWOcean(playerid))
				{
				    switch(rand)
				    {
						case 0..10:
						{
							if(ResourceData[fCod] > 0)//鳕鱼
							{
								ResourceData[fCod] --;
								Fishery[playerid][fsCod] ++;
								check = 1;
							}
						}
						case 11..20:
						{
						    if(ResourceData[fSaury] > 0)//秋刀鱼
							{
								ResourceData[fSaury] --;
								Fishery[playerid][fsSaury] ++;
							}
						}
						case 21..30:
						{
						    if(ResourceData[fHerring] > 0)//鲱鱼
							{
								ResourceData[fHerring] --;
								Fishery[playerid][fsHerring] ++;
							}
						}
						case 31..40:
						{
						    if(ResourceData[fSardine] > 0)//沙丁鱼
							{
								ResourceData[fSardine] --;
								Fishery[playerid][fsSardine] ++;
							}
						}
						case 41..50:
						{
						    if(ResourceData[fMackerel] > 0)//鲭鱼
							{
								ResourceData[fMackerel] --;
								Fishery[playerid][fsMackerel] ++;
							}
						}
						case 51..60:
						{
						    if(ResourceData[fTuna] > 0)//鲔鱼
							{
								ResourceData[fTuna] --;
								Fishery[playerid][fsTuna] ++;
							}
						}
						case 61..65:
						{
						    if(ResourceData[fPomfret] > 0)//大白鲳
							{
								ResourceData[fPomfret] --;
								Fishery[playerid][fsPomfret] ++;
							}
						}
						case 66..70:
						{
						    if(ResourceData[fSnapper] > 0)//长尾鸟
							{
								ResourceData[fSnapper] --;
								Fishery[playerid][fsSnapper] ++;
							}
						}
					}
				}
				else if(IsPlayerOnSEOcean(playerid))
				{
				    switch(rand)
				    {
						case 0..10:
						{
							if(ResourceData[fSwordFish] > 0)//旗鱼
							{
								ResourceData[fSwordFish] --;
								Fishery[playerid][fsSwordFish] ++;
							}
						}
						case 11..20:
						{
						    if(ResourceData[fHerring] > 0)//鲱鱼
							{
								ResourceData[fHerring] --;
								Fishery[playerid][fsHerring] ++;
							}
						}
						case 21..30:
						{
						    if(ResourceData[fSardine] > 0)//沙丁鱼
							{
								ResourceData[fSardine] --;
								Fishery[playerid][fsSardine] ++;
							}
						}
						case 31..40:
						{
						    if(ResourceData[fMackerel] > 0)//鲭鱼
							{
								ResourceData[fMackerel] --;
								Fishery[playerid][fsMackerel] ++;
							}
						}
						case 41..50:
						{
						    if(ResourceData[fTuna] > 0)//鲔鱼
							{
								ResourceData[fTuna] --;
								Fishery[playerid][fsTuna] ++;
							}
						}
						case 51..55:
						{
						    if(ResourceData[fTuskfin] > 0)//四齿鱼
							{
								ResourceData[fTuskfin] --;
								Fishery[playerid][fsTuskfin] ++;
							}
						}

					}
				}
				else if(IsPlayerOnInnerOcean(playerid))
				{
				    switch(rand)
				    {
						case 0..10:
						{
							if(ResourceData[fSquid] > 0)//鱿鱼
							{
								ResourceData[fSquid] --;
								Fishery[playerid][fsSquid] ++;
							}
						}
						case 11..20:
						{
						    if(ResourceData[fHerring] > 0)//鲱鱼
							{
								ResourceData[fHerring] --;
								Fishery[playerid][fsHerring] ++;
							}
						}
						case 21..30:
						{
						    if(ResourceData[fSardine] > 0)//沙丁鱼
							{
								ResourceData[fSardine] --;
								Fishery[playerid][fsSardine] ++;
							}
						}
						case 31..40:
						{
						    if(ResourceData[fMackerel] > 0)//鲭鱼
							{
								ResourceData[fMackerel] --;
								Fishery[playerid][fsMackerel] ++;
							}
						}
						case 41..50:
						{
						    if(ResourceData[fTuna] > 0)//鲔鱼
							{
								ResourceData[fTuna] --;
								Fishery[playerid][fsTuna] ++;
							}
						}
					}
				}
				else if(IsPlayerOnOcean(playerid))
				{
				    switch(rand)
				    {
						case 0..10:
						{
						    if(ResourceData[fHerring] > 0)//鲱鱼
							{
								ResourceData[fHerring] --;
								Fishery[playerid][fsHerring] ++;
							}
						}
						case 11..20:
						{
						    if(ResourceData[fSardine] > 0)//沙丁鱼
							{
								ResourceData[fSardine] --;
								Fishery[playerid][fsSardine] ++;
							}
						}
						case 21..30:
						{
						    if(ResourceData[fMackerel] > 0)//鲭鱼
							{
								ResourceData[fMackerel] --;
								Fishery[playerid][fsMackerel] ++;
							}
						}
						case 31..40:
						{
						    if(ResourceData[fTuna] > 0)//鲔鱼
							{
								ResourceData[fTuna] --;
								Fishery[playerid][fsTuna] ++;
							}
						}
						case 41:
						{
						    if(ResourceData[fGoldenCarp] > 0)//金鳗鱼
							{
								ResourceData[fGoldenCarp] --;
								Fishery[playerid][fsGoldenCarp] ++;
							}
						}
					}
				}
				else if(IsPlayerOnSwamp(playerid))
				{
				    switch(rand)
				    {
						case 0..10:
						{
						    if(ResourceData[fPiranha] > 0)//食人鱼
							{
								ResourceData[fPiranha] --;
								Fishery[playerid][fsPiranha] ++;
							}
						}
					}
				}
				if(check == 1) RecordData[playerid][prFisher] ++;
			}
		}
		else
		{
		    SetGVarInt("Fishering", 0, playerid);
		    DeleteGVar("FisherBoat", playerid);
		    SendClientMessage(playerid, COLOR_WHITE, "** 你的船因为移动太远,渔网已经被收了起来");
		}
    }
	UpdatePlayerVehText(playerid);
}

stock GetPlayerTotalFisheries(playerid)
{
	new
    total = Fishery[playerid][fsCod] +
            Fishery[playerid][fsSaury] +
            Fishery[playerid][fsHerring] +
            Fishery[playerid][fsSardine] +
            Fishery[playerid][fsSwordFish] +
            Fishery[playerid][fsMackerel] +
            Fishery[playerid][fsSquid] +
            Fishery[playerid][fsTuna] +
			Fishery[playerid][fsGoldenCarp] +
			Fishery[playerid][fsPiranha] +
			Fishery[playerid][fsPomfret] +
			Fishery[playerid][fsSnapper] +
			Fishery[playerid][fsTuskfin];
    return total;
}

stock GetPlayerFisheriesValue(playerid)
{
	new
    total = Fishery[playerid][fsCod]*PriceData[prcCod] +
			Fishery[playerid][fsSaury]*PriceData[prcSaury] +
			Fishery[playerid][fsHerring]*PriceData[prcHerring] +
			Fishery[playerid][fsSardine]*PriceData[prcSardine] +
			Fishery[playerid][fsSwordFish]*PriceData[prcSwordFish] +
			Fishery[playerid][fsMackerel]*PriceData[prcMackerel] +
			Fishery[playerid][fsSquid]*PriceData[prcSquid] +
			Fishery[playerid][fsTuna]*PriceData[prcTuna] +
			Fishery[playerid][fsGoldenCarp]*PriceData[prcGoldenCarp] +
			Fishery[playerid][fsPiranha]*PriceData[prcPiranha] +
			Fishery[playerid][fsPomfret]*PriceData[prcPomfret] +
			Fishery[playerid][fsSnapper]*PriceData[prcSnapper] +
		 	Fishery[playerid][fsTuskfin]*PriceData[prcTuskfin];
    return total;
}

static UpdatePlayerVehText(playerid)
{
	new string[144], playername[MAX_PLAYER_NAME],
	vehicleid = GetPlayerVehicleID(playerid);
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);

	if(GetGVarInt("Fishering", playerid) == 1)
	{
	    format(string, sizeof(string), ""TEXT_BLUEGREEN"%s的渔网\n"#TEXT_WHITE"收获: "TEXT_BLUEGREEN"%d"#TEXT_WHITE"/150", playername, GetPlayerTotalFisheries(playerid));
	    UpdateDynamic3DTextLabelText(PlayerVehText[playerid], COLOR_WHITE, string);
	}
	else if(GetGVarInt("FVendoring", playerid) == 1)
	{
	    format(string, sizeof(string), ""TEXT_YELLOW"%s的热狗车\n"#TEXT_WHITE"每份售价: "TEXT_FADEGREEN"$%d\n"#TEXT_YELLOW"按Y键购买热狗", playername, GetGVarInt("FVPrice", vehicleid));
	    UpdateDynamic3DTextLabelText(PlayerVehText[playerid], COLOR_WHITE, string);
	}
	else if(GetGVarInt("FVendoring", playerid) == 2)
	{
	    format(string, sizeof(string), ""TEXT_PINK"%s的冰淇淋车\n"#TEXT_WHITE"每份售价: "TEXT_FADEGREEN"$%d\n"#TEXT_PINK"按Y键购买冰淇淋", playername, GetGVarInt("FVPrice", vehicleid));
	    UpdateDynamic3DTextLabelText(PlayerVehText[playerid], COLOR_WHITE, string);
	}
	else
	{
	    UpdateDynamic3DTextLabelText(PlayerVehText[playerid], COLOR_WHITE, " ");
	}
}

static CreateVehicleEx(modelid, Float:vx, Float:vy, Float:vz, Float:vangle, color1, color2, vtype, vprice)
{
	new vehicleid = AddStaticVehicleEx(modelid, vx, vy, vz, vangle, color1, color2, 60000);
    new ORM: ormid = VehData[vehicleid][ORM_ID] = orm_create("vehicledata", MYSQL_SESSION_A);

	CreateVehicleData(ormid, vehicleid);

    VehData[vehicleid][vModel] = modelid,
    VehData[vehicleid][vX] = vx,
    VehData[vehicleid][vY] = vy,
    VehData[vehicleid][vZ] = vz,
    VehData[vehicleid][vA] = vangle,
    VehData[vehicleid][vColor1] = color1,
    VehData[vehicleid][vColor2] = color1,
    VehData[vehicleid][vFuel] = 100;
    VehData[vehicleid][vType] = vtype;
    VehData[vehicleid][vOwned] = 0;
    VehData[vehicleid][vPrice] = vprice;
    VehData[vehicleid][vDate] = getdate();
    VehData[vehicleid][vArmour] = VehList[modelid-400][voArmor];
	VehData[vehicleid][vTurbo] = 0;
    LinkVehicleToInterior(vehicleid, 0);
    SetVehicleVirtualWorld(vehicleid, 0);
    VehData[vehicleid][vHealth] = 1000.0;
    VehData[vehicleid][vPaintjob] = 3;
    mysql_format(DEFAULT_SESSION, VehData[vehicleid][vPlate], 32, "%s%s%s-%d%d%d%d", Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], Letters[random(sizeof(Letters))], random(10), random(10), random(10), random(10));
    SetVehiclePlate(vehicleid, VehData[vehicleid][vPlate]);
    orm_setkey(ormid, "id");
    orm_insert(ormid);
    return vehicleid;
}

static CreateMissionVehicle(modelid, Float:vx, Float:vy, Float:vz, Float:vangle, color1, color2, vtype, vprice)
{
	new vehicleid = AddStaticVehicleEx(modelid, vx, vy, vz, vangle, color1, color2, 60000);

    VehData[vehicleid][vModel] = modelid,
    VehData[vehicleid][vX] = vx,
    VehData[vehicleid][vY] = vy,
    VehData[vehicleid][vZ] = vz,
    VehData[vehicleid][vA] = vangle,
    VehData[vehicleid][vColor1] = color1,
    VehData[vehicleid][vColor2] = color1,
    VehData[vehicleid][vFuel] = 100;
    VehData[vehicleid][vType] = vtype;
    printf("VehData[%d][vType] = %d", vehicleid, vtype);
    VehData[vehicleid][vOwned] = 0;
    VehData[vehicleid][vPrice] = vprice;
    VehData[vehicleid][vDate] = getdate();
    VehData[vehicleid][vArmour] = VehList[modelid-400][voArmor];
	VehData[vehicleid][vTurbo] = 0;
    LinkVehicleToInterior(vehicleid, 0);
    SetVehicleVirtualWorld(vehicleid, 0);
    VehData[vehicleid][vHealth] = 1000.0;
    VehData[vehicleid][vPaintjob] = 3;
    SetVehiclePlate(vehicleid, "任务车辆");
    return vehicleid;
}

static DeletePlayerSellCar(playerid)
{
	if(GetGVarInt("CarSelling", playerid) == 1)
	{
		new sellcar = GetGVarInt("SellCar", playerid);
		DeleteGVar("DealerCar", sellcar);
		DeleteGVar("CarDealer", sellcar);
		DeleteVehicle(sellcar);
		DeleteGVar("SellCar", playerid);
		DeleteGVar("CarSelling", playerid);
		printf("未出售的车已被删除");
	}
}

stock SetPlayerInLastPos(playerid)
{
	SetPlayerPos_Fix(playerid, PlayerData[playerid][pX], PlayerData[playerid][pY], PlayerData[playerid][pZ]);
	SetPlayerFacingAngle(playerid, PlayerData[playerid][pAngle]);
	SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
	SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
}

PUBLIC:BellUnCD(playerid)
{
	DeleteGVar("RingEstate", playerid);
	DeleteGVar("RingCD", playerid);
	DeleteGVar("Ringed", playerid);
}

stock PlayerEnterEstate(playerid, eid)
{
	new style = EstateData[eid][eStyle];
	if(GetPlayerDistanceFromPointEx(playerid, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]) > 15.0) return SendClientMessage(playerid, COLOR_WHITE, "你离开入口了,无法进入");

	PlayerEnterTP(playerid, EstateData[eid][eType], eid);
	switch(EstateData[eid][eType])
	{
    	case ESTATE_SUITE:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Suite[style][esX], EstateStyle_Suite[style][esY], EstateStyle_Suite[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Suite[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Suite[style][esInt]);
		}
		case ESTATE_HOUSE:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_House[style][esX], EstateStyle_House[style][esY], EstateStyle_House[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_House[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_House[style][esInt]);
		}
		case ESTATE_OFFICE:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Office[style][esX], EstateStyle_Office[style][esY], EstateStyle_Office[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Office[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Office[style][esInt]);
		}
		case ESTATE_CLUBHOUSE:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Clubhouse[style][esX], EstateStyle_Clubhouse[style][esY], EstateStyle_Clubhouse[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Clubhouse[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Clubhouse[style][esInt]);
		}
		case ESTATE_WAREHOUSE:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Warehouse[style][esX], EstateStyle_Warehouse[style][esY], EstateStyle_Warehouse[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Warehouse[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Warehouse[style][esInt]);
		}
		case ESTATE_FACTORY:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Factory[style][esX], EstateStyle_Factory[style][esY], EstateStyle_Factory[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Factory[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Factory[style][esInt]);
		}
		case ESTATE_HANGAR:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Hangar[style][esX], EstateStyle_Hangar[style][esY], EstateStyle_Hangar[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Hangar[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Hangar[style][esInt]);
		}
		case ESTATE_BOATYARD:
		{
			SetPlayerPos_Fix(playerid, EstateStyle_Boatyard[style][esX], EstateStyle_Boatyard[style][esY], EstateStyle_Boatyard[style][esZ]);
			SetPlayerFacingAngle(playerid, EstateStyle_Boatyard[style][esA]);
			SetPlayerVirtualWorld(playerid, EstateData[eid][eID]);
			SetPlayerInterior(playerid, EstateStyle_Boatyard[style][esInt]);
		}
	}
	return 1;
}

stock ShowPlayerVehiclePanel(playerid)
{
    new vpanel[256], l, engine, lights, alarm, doors, bonnet, boot, objective,
    vehicleid = GetPlayerVehicleID(playerid);

    if(vehicleid != INVALID_VEHICLE_ID)
    {
        GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
		l = 0;
		vpanel[0] = EOS;

		if(GetGVarInt("VOutEstate", vehicleid) != 0)
		{
   			new eid = GetGVarInt("VOutEID", vehicleid);
			if(EstateData[eid][eType] == ESTATE_HANGAR && EstateData[eid][eUpgrade1] == 1)
			{
			    format(vpanel, sizeof(vpanel), "%s"#TEXT_FADEBLUE"载具喷漆\n", vpanel);
				SetGVarInt("DListID", VPANEL_PAINTJOB, l*1000+playerid);
		        l++;
			}
		}

		if(engine == 1){format(vpanel, sizeof(vpanel), "%s"#TEXT_RED"关闭引擎\n", vpanel);}
		else {format(vpanel, sizeof(vpanel), "%s"#TEXT_LIGHTGREEN"发动引擎\n", vpanel);}
		SetGVarInt("DListID", VPANEL_ENGINE, l*1000+playerid);
        l++;

		if(IsAPoliceCar(vehicleid) && PlayerData[playerid][pDepartment] == DEPT_POLICE)
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_SKYBLUE"警车选项\n", vpanel);
			SetGVarInt("DListID", VPANEL_POLICE, l*1000+playerid);
			l++;
		}

		if(VehData[vehicleid][vModel] == 416 && PlayerData[playerid][pDepartment] == DEPT_MEDIC)
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_NURSEPINK"救护车选项\n", vpanel);
			SetGVarInt("DListID", VPANEL_MEDIC, l*1000+playerid);
			l++;
		}

        if(VehData[vehicleid][vModel] == 501)
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_ORANGE"空拍机摄影功能\n", vpanel);
			SetGVarInt("DListID", VPANEL_CAMERA, l*1000+playerid);
			l++;
		}

        if(VehData[vehicleid][vType] == VTYPE_RC)
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"离开遥控玩具\n", vpanel);
			SetGVarInt("DListID", VPANEL_EXITRC, l*1000+playerid);
			l++;
		}

        if(IsAVendor(vehicleid))
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"餐车菜单\n", vpanel);
			SetGVarInt("DListID", VPANEL_FVENDOR, l*1000+playerid);
			l++;
		}

		if(IsATowTruck(vehicleid))
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_ORANGE"拖吊\n", vpanel);
			SetGVarInt("DListID", VPANEL_TOW, l*1000+playerid);
			l++;
		}

		if(VehData[vehicleid][vType] == VTYPE_MW && GetGVarInt("VehMWLoaded", vehicleid))
        {
            new mwid = GetGVarInt("VehMW", vehicleid),
				mwitemid = MatWar[mwid][mwMatID];
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_ORANGE"卸载%s到地产(需%d空间)\n", vpanel, ItemsList_USE[mwitemid][iuName], ItemsList_USE[mwitemid][iuSpace]*MatWar[mwid][mwMatAmount]);
			SetGVarInt("DListID", VPANEL_MW, l*1000+playerid);
			l++;
		}

		if(IsATrailerTruck(vehicleid))
        {
			if(IsTrailerAttachedToVehicle(vehicleid))
			{
			    new trailerid = GetVehicleTrailer(vehicleid);
		    	format(vpanel, sizeof(vpanel), "%s"#TEXT_ORANGE"断开联结\n", vpanel);
				SetGVarInt("DListID", VPANEL_TOW, l*1000+playerid);
				l++;

				if(IsPlayerVehicle(playerid, trailerid) || IsCompanyVehicle(PlayerData[playerid][pCompany], trailerid)
				|| IsGangVehicle(PlayerData[playerid][pGang], trailerid) || IsDepartmentVehicle(PlayerData[playerid][pDepartment], trailerid))
				{
					format(vpanel, sizeof(vpanel), "%s"#TEXT_PINKRED"存取货柜(%d/%d)\n", vpanel, GetVehicleUsedSpace(trailerid), GetVehicleSpace(trailerid));
					SetGVarInt("DListID", VPANEL_TRAILER, l*1000+playerid);
					l++;
				}
			}
		}

        if(lights == 1){format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"关闭头灯\n", vpanel);}
		else {format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"开启头灯\n", vpanel);}
		SetGVarInt("DListID", VPANEL_LIGHT, l*1000+playerid);
        l++;

        if(VehData[vehicleid][vLock] == 1){format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"只锁驾驶座\n", vpanel);}
		else if(VehData[vehicleid][vLock] == 2){format(vpanel, sizeof(vpanel), "%s"#TEXT_RED"解锁所有车门\n", vpanel);}
		else {format(vpanel, sizeof(vpanel), "%s"#TEXT_LIGHTBLUE"车门上锁\n", vpanel);}
		SetGVarInt("DListID", VPANEL_LOCK, l*1000+playerid);
	    l++;

        if(PlayerCanSetVehicle(playerid, vehicleid))
        {
            if(VehData[vehicleid][vStatus] == VEH_NORMAL)
            {
		        format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"更改重生位置\n", vpanel);
				SetGVarInt("DListID", VPANEL_PARK, l*1000+playerid);
		        l++;

		        format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"转移所有权\n", vpanel);
				SetGVarInt("DListID", VPANEL_TYPE, l*1000+playerid);
		        l++;
		    }

	        if(VehData[vehicleid][vLockLv3] == 1)
			{
		        format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"修改密码\n", vpanel);
				SetGVarInt("DListID", VPANEL_SETPASS, l*1000+playerid);
		        l++;
		    }
	    }

	    if(VehData[vehicleid][vLock] == 0 && (VehData[vehicleid][vType] == VTYPE_PLAYER || VehData[vehicleid][vType] == VTYPE_DEPARTMENT || VehData[vehicleid][vType] == VTYPE_COMPANY || VehData[vehicleid][vType] == VTYPE_GANG || VehData[vehicleid][vType] == VTYPE_SERVICE))
        {
            if(!IsATrailerTruck(vehicleid))
			{
				if(VehData[vehicleid][vTrunk] == 1){format(vpanel, sizeof(vpanel), "%s"#TEXT_LIGHTRED"关闭储物空间\n", vpanel);}
				else {format(vpanel, sizeof(vpanel), "%s"#TEXT_PINKRED"开启储物空间\n", vpanel);}
				SetGVarInt("DListID", VPANEL_TRUNK, l*1000+playerid);
				l++;
			}
			if(IsACar(vehicleid))
			{
				if(VehData[vehicleid][vHood] == 1){format(vpanel, sizeof(vpanel), "%s"#TEXT_LIGHTRED"关闭引擎盖\n", vpanel);}
				else {format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"开启引擎盖\n", vpanel);}
				SetGVarInt("DListID", VPANEL_HOOD, l*1000+playerid);
				l++;
			}
		}

		if(VehData[vehicleid][vTrunk] == 1 && VehData[vehicleid][vType] != VTYPE_MW)
        {
	    	format(vpanel, sizeof(vpanel), "%s"#TEXT_PINKRED"存取后车箱(%d/%d)\n", vpanel, GetVehicleUsedSpace(vehicleid), GetVehicleSpace(vehicleid));
			SetGVarInt("DListID", VPANEL_STORE, l*1000+playerid);
			l++;
		}

		if(IsABus(vehicleid))
		{
		    if(IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid))
		    {
		        new comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
		        if(comid != -1 && CompanyData[comid][comBus] == 1)
		        {
		            if(GetGVarInt("BusOn", playerid) == 0) format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"客运开班(消耗4点体力)\n", vpanel);
				    else format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"客运停班\n", vpanel);
					SetGVarInt("DListID", VPANEL_BUS, l*1000+playerid);
				    l++;
				}
			}
		}
  		if(IsPlayerVehicle(playerid, vehicleid) || IsCompanyVehicle(PlayerData[playerid][pCompany], vehicleid)
		|| IsGangVehicle(PlayerData[playerid][pGang], vehicleid) || IsDepartmentVehicle(PlayerData[playerid][pDepartment], vehicleid))
		{
			if(IsATaxi(vehicleid))
			{
			    if(GetGVarInt("TaxiOn", playerid) == 0) format(vpanel, sizeof(vpanel), "%s"#TEXT_YELLOW"开始计程车营业\n", vpanel);
			    else format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"结束计程车营业\n", vpanel);
				SetGVarInt("DListID", VPANEL_TAXI, l*1000+playerid);
			    l++;
			}

			format(vpanel, sizeof(vpanel), "%s"#TEXT_WHITE"赶走所有乘客\n", vpanel);
			SetGVarInt("DListID", VPANEL_EJECT, l*1000+playerid);
			l++;
		}

		if(GetGVarInt("RentCar", playerid) == vehicleid && VehData[vehicleid][vType] == VTYPE_RENT)
		{
			format(vpanel, sizeof(vpanel), "%s"#TEXT_LIGHTRED"退租\n", vpanel);
			SetGVarInt("DListID", VPANEL_UNRENT, l*1000+playerid);
			l++;
		}

        format(vpanel, sizeof(vpanel), ""#TEXT_WHITE"%s\n%s", GetVehicleName(GetVehicleModel(vehicleid)), vpanel);
        ShowPlayerDialog(playerid, DIALOG_VPANEL, DIALOG_STYLE_TABLIST_HEADERS, "载具面板", vpanel, "选择", "关闭");
    }
    return 1;
}

stock ParkVehicle(vehicleid)
{
    new Float:vx, Float:vy, Float:vz, Float:va, trailerid;
	GetVehiclePos(vehicleid, vx, vy, vz);
	GetVehicleZAngle(vehicleid, va);
	VehData[vehicleid][vX] = vx,
	VehData[vehicleid][vY] = vy,
	VehData[vehicleid][vZ] = vz,
	VehData[vehicleid][vA] = va,
	orm_save(VehData[vehicleid][ORM_ID]);

	trailerid = GetVehicleTrailer(vehicleid);
	if(trailerid != 0)
	{
	    GetVehiclePos(trailerid, vx, vy, vz);
		GetVehicleZAngle(trailerid, va);
		VehData[trailerid][vX] = vx,
		VehData[trailerid][vY] = vy,
		VehData[trailerid][vZ] = vz,
		VehData[trailerid][vA] = va,
		orm_save(VehData[trailerid][ORM_ID]);
	}
	//SetVehiclePos(vehicleid, vx, vy, vz);
	//SetVehicleZAngle(vehicleid, va);
}

stock PlayerSqlIDToID(psqlid)
{
    ForEachPlayer(i)
	{
	    if(PlayerData[i][pID] == psqlid)
		{
		    return i;
		}
	}
	return INVALID_PLAYER_ID;
}

stock PlayerCanPlant(playerid)
{
	new plant = PlayerHavePlant(playerid);
	switch(PlayerData[playerid][pLevel])
	{
	    case 0..10: if(plant < 10) return 1;
	    case 11..20: if(plant < 20) return 1;
	    case 21..30: if(plant < 30) return 1;
	    case 31..40: if(plant < 40) return 1;
	    default: if(plant < 50) return 1;
	}
	return 0;
}

stock PlayerCanBuyVehicle(playerid)
{
	new veh = PlayerHaveVehicle(playerid);
	switch(PlayerData[playerid][pLevel])
	{
	    case 0..5: if(veh < 1) return 1;
	    case 6..10: if(veh < 2) return 1;
	    case 11..15: if(veh < 3) return 1;
	    case 16..20: if(veh < 4) return 1;
	    case 21..25: if(veh < 5) return 1;
	    case 26..30: if(veh < 6) return 1;
	    case 31..35: if(veh < 7) return 1;
	    case 36..40: if(veh < 8) return 1;
	    case 41..45: if(veh < 9) return 1;
	    default: if(veh < 10) return 1;
	}
	return 0;
}

stock PlayerCanBuyEstate(playerid)
{
	new est = PlayerHaveEstate(playerid);
	switch(PlayerData[playerid][pLevel])
	{
	    case 0..5: if(est < 1) return 1;
	    case 6..10: if(est < 2) return 1;
	    case 11..20: if(est < 3) return 1;
	    case 21..30: if(est < 4) return 1;
	    default: if(est < 5) return 1;
	}
	return 0;
}

stock GetPlayerBagLimit(playerid)
{
	switch(PlayerData[playerid][pLevel])
	{
	    case 0..5: return 150;
	    case 6..10: return 250;
	    case 11..15: return 350;
	    case 16..20: return 450;
	    case 21..25: return 550;
	    case 26..30: return 650;
	    case 31..35: return 750;
	    case 36..40: return 850;
	    case 41..45: return 950;
	    default: return 1000;
	}
	return 0;
}

static PlayerLevelUp(playerid)
{
	new string[144];
    PlayerData[playerid][pLevel] += 1;
    format(string, sizeof(string), " ** <<"#TEXT_ORANGE"升级"#TEXT_WHITE">> 你的等级提升了,目前等级为"#TEXT_ORANGE"%d", PlayerData[playerid][pLevel]);
    SendClientMessage(playerid, COLOR_WHITE, string);
    //Extra
    new level = PlayerData[playerid][pLevel];
    if(level == 6 || level == 11 || level == 16 || level == 21 || level == 26 || level == 31 || level == 36 || level == 41 || level == 46)
    {
        format(string, sizeof(string), " ** <<"#TEXT_FADEBLUE"解锁项目"#TEXT_WHITE">>"#TEXT_LIGHTGREEN"可购买的载具数量提升!");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    	format(string, sizeof(string), " ** <<"#TEXT_FADEBLUE"解锁项目"#TEXT_WHITE">>"#TEXT_WHITE"可扩充的背包容量提升!");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    }
    if(level == 6 || level == 11 || level == 21 || level == 31 || level == 41)
    {
        format(string, sizeof(string), " ** <<"#TEXT_FADEBLUE"解锁项目"#TEXT_WHITE">>"#TEXT_SANDYELLOW"可购买的地产数量提升!");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    }
    if(level == 11 || level == 21 || level == 31)
    {
        format(string, sizeof(string), " ** <<"#TEXT_FADEBLUE"解锁项目"#TEXT_WHITE">>"#TEXT_GREEN"可种植的植物数量提升!");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    }
    if(level == 2 || level == 5 || level == 10 || level == 15 || level == 20 || level == 25 || level == 30 || level == 35 || level == 40 || level == 45
	|| level == 50 || level == 55 || level == 60 || level == 65 || level == 70 || level == 75 || level == 80 || level == 85 || level == 90 || level == 95 || level == 100)
    {//共42点
        format(string, sizeof(string), " ** <<"#TEXT_ORANGE"升级"#TEXT_YELLOW">> 你获得了2点技能点,可以搭配知识点在技能页面升级技能");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    	GivePlayerPoint(playerid, 1, 2);
    }
    if(level == 10 || level == 20 || level == 30 || level == 40 || level == 50 || level == 60 || level == 70 || level == 80 || level == 90 || level == 100)
    {
        format(string, sizeof(string), " ** <<"#TEXT_LIGHTGREEN"提升项目"#TEXT_WHITE">>"#TEXT_LIGHTGREEN"最大生命值提升了!");
    	SendClientMessage(playerid, COLOR_WHITE, string);
    	PlayerData[playerid][pMaxHealth] = float(level);
    }
    if(level == 5 && !PlayerHaveItem(playerid, ITEM_EQ, 4))
    {
        ConfigData[playerid][cfQuickN1T] = KEY_TYPE_IEQ,
		ConfigData[playerid][cfQuickN1] = 4;
        GivePlayerItem(playerid, ITEM_EQ, 4, 1);
        SendClientMessage(playerid, COLOR_YELLOW, "** 你获得了一支传统手机,打开背包或是按数字键6可以快速使用");
    }
    if(level == 15)
    {
        SendClientMessage(playerid, COLOR_VIOLET, "** 你现在可以使用各处的电话亭按Y使用对仇家发起悬赏了,但注意你也有可能成为被悬赏的对象");
        SendClientMessage(playerid, COLOR_FADERED, "** 你现在可以加入帮会了,打开个人菜单的帮会选项可以加入或建立帮会");
        SendClientMessage(playerid, COLOR_PINKRED, "** 你现在已达15等已经脱离了新手,是时候开始闯出自己的一片天了");
    }
    if((level == 3 || level == 10 || level == 30) && !PlayerHaveItem(playerid, ITEM_EQ, 287))
    {
        GivePlayerItem(playerid, ITEM_EQ, 287, 1);
        SendClientMessage(playerid, COLOR_YELLOW, "** 你获得了一台折叠单车,打开背包可以使用");
    }

	new i, j, k;
    for(i = 0, j = MAX_GIFTS, k = 0; i < j; i++)
	{
		switch(GiftData[i][gfType])
		{
			case GIFT_LEVEL:
			{
			    if(GiftData[i][gfLevel] == level)
			    {
			        GivePlayerGift(playerid, GiftData[i][gfTitle], GiftData[i][gfItemType], GiftData[i][gfItemID], GiftData[i][gfAmount]);
			        k++;
			    }
			}
			default: continue;
		}
	}
	if(k > 0)
	{
	    format(string, sizeof(string), ""#TEXT_YELLOW"<<等级奖励>>"#TEXT_WHITE"你获得了"#TEXT_YELLOW"%d"#TEXT_WHITE"个等级奖励,打开个人菜单的"#TEXT_YELLOW"奖励"#TEXT_WHITE"以领取", k);
	    SendClientMessage(playerid, COLOR_WHITE, string);
	}
    UpdatePlayerExpBar(playerid);
}

stock ShowPlayerBuyVehicleMenu(playerid)
{
    new Float:tmpX, Float:tmpY, Float:tmpZ, tmpI, tmpW, string[144];

    SetGVarInt("PlayerBuyingCarAllow", 0, playerid);
    TogglePlayerControllableEx(playerid, 0);
    GetPlayerPos(playerid, tmpX, tmpY, tmpZ);
   	tmpI = GetPlayerInterior(playerid);
   	tmpW = GetPlayerVirtualWorld(playerid);
   	SetGVarFloat("SelectorX", tmpX, playerid);
   	SetGVarFloat("SelectorY", tmpY, playerid);
   	SetGVarFloat("SelectorZ", tmpZ, playerid);
   	SetGVarInt("SelectorI", tmpI, playerid);
   	SetGVarInt("SelectorW", tmpW, playerid);

   	SetGVarInt("PlayerBuyingCarNum", 0, playerid);
   	SetGVarInt("PlayerBuyingCarColor", 0, playerid);
   	new carnum = 0;
    switch(GetGVarInt("PlayerBuyingCarPlace", playerid))
    {
        case VS_LV1:
        {
			SetPlayerInterior(playerid, 18);
			SetPlayerVirtualWorld(playerid, 100 + playerid);//建立一个玩家专属空间

			SetPlayerPos_Fix(playerid, 1264.5520,-49.4717,1002.4923);

		    SetPlayerCameraPos(playerid, 1264.5520,-49.4717,1002.4923);
		    SetPlayerCameraLookAt(playerid, 1263.4598,-57.9597,1002.4368);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LVCARSELL1DATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(LVCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
		  	format(string, sizeof(string), "$%d", GetVehiclePrice(LVCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_GROTTI:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, 553.5237,-1284.2715,17.2482);

		    SetPlayerCameraPos(playerid, 553.5237,-1284.2715,17.2482);
		    SetPlayerCameraLookAt(playerid, 543.5699,-1283.7938,17.1822);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], GROTTIDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(GROTTIDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(GROTTIDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_SIMEON:
		{
		    SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);//建立一个玩家专属空间
			SetPlayerPos_Fix(playerid, 2129.7266,-1131.6110,25.6032);

		    SetPlayerCameraPos(playerid, 2128.0996,-1136.0289,25.5602);
		    SetPlayerCameraLookAt(playerid, 2125.8162,-1144.0739,24.6685);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LSCARSELL1DATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(LSCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
	    	format(string, sizeof(string), "$%d", GetVehiclePrice(LSCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_WANG:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, -1958.2188,270.0546,35.4688);

		    SetPlayerCameraPos(playerid, -1958.2188,270.0546,35.4688);
			SetPlayerCameraLookAt(playerid, -1949.3368,265.3922,35.3958);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], WANGCARDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(WANGCARDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(WANGCARDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_SFBIKE:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, -2469.6648,794.4726,35.1786);

		    SetPlayerCameraPos(playerid, -2476.4226,784.4954,35.1719);
			SetPlayerCameraLookAt(playerid, -2466.7380,780.6182,35.1093);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], SFBIKEDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(SFBIKEDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(SFBIKEDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_BISVEH_LS:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, 1254.7783,-1821.9999,13.4036);

		    SetPlayerCameraPos(playerid, 1254.7783,-1821.9999,13.4036);
			SetPlayerCameraLookAt(playerid, 1243.0492,-1818.4548,13.3468);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], BISVEHSELLDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_BISVEH_SF:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, -1562.3921,1185.0172,7.1875);

		    SetPlayerCameraPos(playerid, -1562.3921,1185.0172,7.1875);
			SetPlayerCameraLookAt(playerid, -1560.9146,1197.0225,6.8907);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], BISVEHSELLDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_BISVEH_LV:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, 2166.1021,1404.6256,10.8203);

		    SetPlayerCameraPos(playerid, 2166.1021,1404.6256,10.8203);
			SetPlayerCameraLookAt(playerid, 2160.5066,1414.5129,10.7504);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], BISVEHSELLDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(BISVEHSELLDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_LSMUSCLE:
		{
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, 1952.9525,-2090.1868,13.5543);

		    SetPlayerCameraPos(playerid, 1952.9525,-2090.1868,13.5543);
			SetPlayerCameraLookAt(playerid, 1945.8912,-2087.4897,13.6677);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], LSMUSCLEDATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(LSMUSCLEDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
			format(string, sizeof(string), "$%d", GetVehiclePrice(LSMUSCLEDATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
		case VS_SF1:
        {
			SetPlayerVirtualWorld(playerid, 100 + playerid);

			SetPlayerPos_Fix(playerid, -2272.1719,196.4387,35.1641);

		    SetPlayerCameraPos(playerid, -2272.1719,196.4387,35.1641);
		    SetPlayerCameraLookAt(playerid, -2276.1025,203.1391,34.8689);

			PlayerTextDrawSetPreviewModel(playerid, BCPreview[playerid], SFCARSELL1DATA[carnum][csModel]);
			PlayerTextDrawSetPreviewVehCol(playerid, BCPreview[playerid], 0, 0);
			format(string, sizeof(string), "%s", GetVehicleName(SFCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCName[playerid],string);
		  	format(string, sizeof(string), "$%d", GetVehiclePrice(SFCARSELL1DATA[carnum][csModel]));
			PlayerTextDrawSetString(playerid,BCPrice[playerid],string);
		}
	}
	SendClientMessage(playerid, COLOR_WHITE, "在右下角的"#TEXT_YELLOW"操作面板"#TEXT_WHITE"选取交通工具");
    SelectTextDraw(playerid, COLOR_FADERED);
    PlayerTextDrawShow(playerid, BCBox[playerid]);
	PlayerTextDrawShow(playerid, BCPreview[playerid]);
	PlayerTextDrawShow(playerid, BCName[playerid]);
	PlayerTextDrawShow(playerid, BCColorL[playerid]);
	PlayerTextDrawShow(playerid, BCColorR[playerid]);
	PlayerTextDrawShow(playerid, BCPrice[playerid]);
	PlayerTextDrawShow(playerid, BCRight[playerid]);
	PlayerTextDrawShow(playerid, BCLeft[playerid]);
	PlayerTextDrawShow(playerid, BCBuy[playerid]);
	PlayerTextDrawShow(playerid, BCExit[playerid]);

	SetBuyCarTimer(playerid, 100 + playerid);
}

stock SetVehicleAttachment(vehicleid, type)
{
	switch(type)
	{
	    case ATTACH_NEON:
	    {
			if(VehData[vehicleid][vNeon] > 0)
			{
				new neonid,
					neon1 = GetGVarInt("VehNeon1", vehicleid),
					neon2 = GetGVarInt("VehNeon2", vehicleid);
				if(neon1 != 0)DestroyDynamicObject(neon1);
				if(neon2 != 0)DestroyDynamicObject(neon2);
				switch(VehData[vehicleid][vNeon])
				{
					case 1: neonid = 18648;
					case 2: neonid = 18647;
					case 3: neonid = 18649;
					case 4: neonid = 18652;
					case 5: neonid = 18651;
					case 6: neonid = 18650;
				}
				neon1 = CreateDynamicObject(neonid, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
				neon2 = CreateDynamicObject(neonid, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
				AttachDynamicObjectToVehicle(neon1, vehicleid, -0.8, 0.0, -0.50, 0.0, 0.0, 0.0);
				AttachDynamicObjectToVehicle(neon2, vehicleid, 0.8, 0.0, -0.50, 0.0, 0.0, 0.0);
				SetGVarInt("VehNeon1", neon1, vehicleid);
				SetGVarInt("VehNeon2", neon2, vehicleid);
			}
		}
		case ATTACH_PLATFORM:
		{
		    new obj1 = CreateDynamicObject(19848, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0),
		        obj2 = CreateDynamicObject(19848, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
			SetGVarInt("VehPlat1", obj1, vehicleid);
   			SetGVarInt("VehPlat2", obj2, vehicleid);
   			switch(VehData[vehicleid][vModel])
   			{
   			    case 563:
   			    {
	   			    AttachDynamicObjectToVehicle(obj1, vehicleid, -1.36, 0.000000, -0.759999, 0.000000, 0.000000, 0.000000);
					AttachDynamicObjectToVehicle(obj2, vehicleid, 1.36, 0.000000, -0.759999, -0.000000, -0.000000, -180.000000);
				}
				case 497:
				{
				    AttachDynamicObjectToVehicle(obj1, vehicleid, -0.80, 0.60, -1.00, 0.000000, 0.000000, 0.000000);
					AttachDynamicObjectToVehicle(obj2, vehicleid, 0.80, 0.60, -1.00, -0.000000, -0.000000, -180.000000);
				}
			}
		}
		case ATTACH_SIREN:
		{
			new obj = CreateDynamicObject(19419, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0),
				Float:zpos = VehList[VehData[vehicleid][vModel]-400][vAttachZ];
		    if(zpos != -1.0)
		    {
				SetGVarInt("VehSiren", obj, vehicleid);
				AttachDynamicObjectToVehicle(obj, vehicleid, -0.0, -0.39, zpos, 0.0, 0.0, 0.0);
			}
		}
		case ATTACH_SIREN_LIGHT:
		{
			new obj = CreateDynamicObject(18646, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0),
				Float:zpos = VehList[VehData[vehicleid][vModel]-400][vAttachZ];
		    if(zpos != -1.0)
		    {
				SetGVarInt("VehSLight", obj, vehicleid);
				AttachDynamicObjectToVehicle(obj, vehicleid, -0.0, -0.39, zpos + 0.1, 0.0, 0.0, 0.0);
			}
		}
		case ATTACH_TAXI:
		{
			new obj, Float:zpos = VehList[VehData[vehicleid][vModel]-400][vAttachZ];
		    if(zpos != -1.0)
		    {
		        switch(VehData[vehicleid][vTaxi])
		        {
		            case 1: obj = CreateDynamicObject(19308, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
		            case 2: obj = CreateDynamicObject(19309, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
		            case 3: obj = CreateDynamicObject(19310, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
		            case 4: obj = CreateDynamicObject(19311, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0);
		        }
				SetGVarInt("VehTaxi", obj, vehicleid);
				AttachDynamicObjectToVehicle(obj, vehicleid, -0.0, -0.39, zpos + 0.1, 0.0, 0.0, 0.0);
			}
		}
		case ATTACH_TAXI_LIGHT:
		{
			new obj = CreateDynamicObject(19125, 0.0, 0.0, -9999.0, 0.0, 0.0, 0.0),
				Float:zpos = VehList[VehData[vehicleid][vModel]-400][vAttachZ];
			SetDynamicObjectMaterialText(obj, 0, "  ", OBJECT_MATERIAL_SIZE_256x128, "Arial", 24, 1, 0xFFFFFFFF, 0x00000000, 0);
			SetDynamicObjectMaterialText(obj, 1, "  ", OBJECT_MATERIAL_SIZE_256x128, "Arial", 24, 1, 0xFFFFFFFF, 0x00000000, 0);
		    if(zpos != -1.0)
		    {
				SetGVarInt("VehTLight", obj, vehicleid);
				AttachDynamicObjectToVehicle(obj, vehicleid, -0.0, -0.39, zpos - 0.2, 0.0, 0.0, 0.0);
			}
		}
	}
}

stock RemoveVehicleAttachment(vehicleid, type)
{
    switch(type)
	{
	    case ATTACH_NEON:
	    {
			new neon1 = GetGVarInt("VehNeon1", vehicleid),
		        neon2 = GetGVarInt("VehNeon2", vehicleid);
			if(neon1 != 0) DestroyDynamicObject(neon1);
			if(neon2 != 0) DestroyDynamicObject(neon2);
			DeleteGVar("VehNeon1", vehicleid);
			DeleteGVar("VehNeon2", vehicleid);
		}
		case ATTACH_PLATFORM:
		{
			new plat1 = GetGVarInt("VehPlat1", vehicleid),
				plat2 = GetGVarInt("VehPlat2", vehicleid);
			if(plat1 != 0) DestroyDynamicObject(plat1);
			if(plat2 != 0) DestroyDynamicObject(plat2);
			DeleteGVar("VehPlat1", vehicleid);
			DeleteGVar("VehPlat2", vehicleid);
		}
		case ATTACH_SIREN:
		{
			new siren = GetGVarInt("VehSiren", vehicleid);
			if(siren != 0) DestroyDynamicObject(siren);
			DeleteGVar("VehSiren", vehicleid);
		}
		case ATTACH_SIREN_LIGHT:
		{
			new slight = GetGVarInt("VehSLight", vehicleid);
			if(slight != 0) DestroyDynamicObject(slight);
			DeleteGVar("VehSLight", vehicleid);
		}
		case ATTACH_TAXI:
		{
			new taxi = GetGVarInt("VehTaxi", vehicleid);
			if(taxi != 0) DestroyDynamicObject(taxi);
			DeleteGVar("VehTaxi", vehicleid);
		}
		case ATTACH_TAXI_LIGHT:
		{
			new tlight = GetGVarInt("VehTLight", vehicleid);
			if(tlight != 0) DestroyDynamicObject(tlight);
			DeleteGVar("VehTLight", vehicleid);
		}
	}
}

stock RemoveAllVehicleAttachment(vehicleid)
{
    new neon1 = GetGVarInt("VehNeon1", vehicleid),
		neon2 = GetGVarInt("VehNeon2", vehicleid),
		plat1 = GetGVarInt("VehPlat1", vehicleid),
		plat2 = GetGVarInt("VehPlat2", vehicleid),
		siren = GetGVarInt("VehSiren", vehicleid),
		slight = GetGVarInt("VehSLight", vehicleid),
		taxi = GetGVarInt("VehTaxi", vehicleid),
		tlight = GetGVarInt("VehTLight", vehicleid);

	if(neon1 != 0) DestroyDynamicObject(neon1);
	if(neon2 != 0) DestroyDynamicObject(neon2);
	if(plat1 != 0) DestroyDynamicObject(plat1);
	if(plat2 != 0) DestroyDynamicObject(plat2);
	if(siren != 0) DestroyDynamicObject(siren);
	if(slight != 0) DestroyDynamicObject(slight);
	if(taxi != 0) DestroyDynamicObject(taxi);
	if(tlight != 0) DestroyDynamicObject(tlight);

	DeleteGVar("VehNeon1", vehicleid);
	DeleteGVar("VehNeon2", vehicleid);
	DeleteGVar("VehPlat1", vehicleid);
	DeleteGVar("VehPlat2", vehicleid);
	DeleteGVar("VehSiren", vehicleid);
	DeleteGVar("VehSLight", vehicleid);
	DeleteGVar("VehTaxi", vehicleid);
	DeleteGVar("VehTLight", vehicleid);
}

stock TaxiStop(playerid, vehicleid)
{
	new string[144], earned = GetGVarInt("TaxiEarned", playerid),
		client = GetGVarInt("TaxiClient", playerid);
	if(GetGVarInt("TaxiOn", playerid) == 2)
	{
   		ForEachPlayer(i)
		{
			if(GetPlayerVehicleID(i) == vehicleid && GetGVarInt("TaxiCost", i) > 0)
			{
			    format(string, sizeof(string), "** "#TEXT_YELLOW"这台车的司机结束营业了,你未能付款");
				SendClientMessage(i, COLOR_WHITE, string);
				DeleteGVar("TaxiCost", i);
				DeleteGVar("TaxiCount", i);
				DeleteGVar("PTaxiDriver", i);
			}
		}
		format(string, sizeof(string), "** "#TEXT_LIGHTRED"你在最后一个客人下车以前就结束营业,未能来得及收到车资");
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	if(earned > 0)
	{
	    GiveMoney(playerid, earned);
	    Log(moneylog, INFO, "%s(%d)得到了计程车的收入$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], earned);
	}
	format(string, sizeof(string), "** 你结束了计程车营业,总共赚得 "#TEXT_FADEGREEN"$%d", earned);
	SendClientMessage(playerid, COLOR_YELLOW, string);
	if(client > 4)
	{
	    new exp = 100*client;
	    if(exp > 2000) exp = 2000;
		SendClientMessage(playerid, COLOR_FADEBLUE, "** 你获得了载客额外经验值奖励");
		GivePlayerExp(playerid, exp, EXP_JOB);
	}
    RemoveVehicleAttachment(vehicleid, ATTACH_TAXI_LIGHT);
	DestroyDynamic3DTextLabel(VehicleStatus[vehicleid]);
	DeleteGVar("TaxiOn", playerid);
	DeleteGVar("TaxiClient", playerid);
	DeleteGVar("TaxiFare", playerid);
	DeleteGVar("TaxiEarned", playerid);
	DeleteGVar("TaxiFare2", playerid);
	DeleteGVar("Taxi", vehicleid);
	DeleteGVar("TaxiDriver", vehicleid);
}

stock PayTaxi(playerid)
{
    new driver = GetGVarInt("PTaxiDriver", playerid), string[144],
		client = GetGVarInt("TaxiClient", driver);
	if(GetGVarInt("TaxiOn", driver) != 0)
	{
		new cost = GetGVarInt("TaxiCost", playerid),
			earned = GetGVarInt("TaxiEarned", driver),
			vehicleid = GetPlayerVehicleID(driver);
		GiveMoney(playerid, -cost);
		Log(moneylog, INFO, "%s(%d)付了计程车车资$%d给%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], cost, PlayerData[driver][pName], PlayerData[driver][pID]);
		SetGVarInt("TaxiEarned", earned+cost, driver);
		format(string, sizeof(string), "** "#TEXT_YELLOW"你离开计程车了,车费一共是"#TEXT_FADERED"$%d", cost);
		SendClientMessage(playerid, COLOR_WHITE, string);
		format(string, sizeof(string), "** "#TEXT_FADEGREEN"你的乘客离开车辆了,你的载客收入增加了$%d", cost);
		SendClientMessage(driver, COLOR_WHITE, string);
		SetVehicleAttachment(vehicleid, ATTACH_TAXI_LIGHT);
		SetGVarInt("TaxiOn", 1, driver);
		RecordData[playerid][prTaxi] ++;
		if(cost > GetGVarInt("TaxiFare", driver))//载客收入大于车资底价可以增加额外奖励计值
		{
			SetGVarInt("TaxiClient", client+1, driver);
		}
	}
	DeleteGVar("TaxiCost", playerid);
	DeleteGVar("TaxiCount", playerid);
	DeleteGVar("PTaxiDriver", playerid);
}

stock StopBus(playerid, vehicleid)
{
	new string[144], earned = GetGVarInt("BusEarned", playerid);
	ForEachPlayer(i)
	{
		if(GetPlayerVehicleID(i) == vehicleid)
		{
			format(string, sizeof(string), "** "#TEXT_YELLOW"这班车的司机停班了,请尽速下车");
			DisablePlayerCheckpoint(i);
			SendClientMessage(i, COLOR_WHITE, string);
		}
	}

	if(earned > 0)
	{
	    GiveMoney(playerid, earned);
	    Log(moneylog, INFO, "%s(%d)得到了公车的收入$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], earned);
	}
	format(string, sizeof(string), "** 你下班了,总共赚得 "#TEXT_FADEGREEN"$%d", earned);
	SendClientMessage(playerid, COLOR_FADEBLUE, string);
    DestroyDynamic3DTextLabel(VehicleStatus[vehicleid]);

    DeleteGVar("BusRoute", playerid);
    DeleteGVar("NextStop", playerid);
	DeleteGVar("BusOn", playerid);
	DeleteGVar("BusFare", playerid);
	DeleteGVar("BusEarned", playerid);
	DeleteGVar("Bus", vehicleid);
	DeleteGVar("BusClient", playerid);
	DeleteGVar("BusCom", vehicleid);
	DeleteGVar("BusDriver", vehicleid);
}

stock RemovePlayerFromVehicle_Fix(playerid)
{
	if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    OnPlayerExitVehicle(playerid, vehicleid);
	}
	return RemovePlayerFromVehicle(playerid);
}

stock SetPlayerPos_Fix(playerid, Float:x, Float:y, Float:z)
{
    if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    OnPlayerExitVehicle(playerid, vehicleid);
	}
	return SetPlayerPos(playerid, x, y, z);
}

stock SetPlayerJailPos(playerid, Float:x, Float:y, Float:z)
{
    if(IsPlayerInAnyVehicle(playerid))
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    OnPlayerExitVehicle(playerid, vehicleid);
	}
	if(PlayerData[playerid][pJail] != 0 && GetGVarInt("JailAgain", playerid) == 0)
	{
	    TogglePlayerControllableEx(playerid, 0, 1);
	    SetGVarInt("JailAgain", 1, playerid);
	    SetGVarInt("IEEing", 1, playerid);
	    SetPlayerTimerEx(playerid, "UnFreeze", 10000, 0, "i", playerid);
	    SetPlayerTimerEx(playerid, "ClearIEEing", 10000, false, "d", playerid);//设置冷却时间为3秒
     	SetPlayerTimerEx(playerid, "PutJailAgain", 3000, false, "d", playerid);
	}
	return SetPlayerPos(playerid, x, y, z);
}

stock GivePlayerExp(playerid, amount, source)
{
	#pragma unused source
	new string[64];
	PlayerData[playerid][pExp] += amount;
	format(string, sizeof(string), "~w~经验_+%d", amount);
	GameTextForPlayer(playerid, string, 5000, 1);
	UpdatePlayerExpBar(playerid);
}

static SetStopCP(playerid, stopid)
{
	new rid = GetGVarInt("BusRoute", playerid);
    SetPlayerCheckpoint(playerid, BusStop[rid][stopid][bsX], BusStop[rid][stopid][bsY], BusStop[rid][stopid][bsZ], 10.0);
}

stock GetVehicleForPlayer(playerid, vehicleid)
{
	new string[144], Float:vx, Float:vy, Float:vz;
    switch(VehData[vehicleid][vStatus])
	{
		case VEH_STOLEN: return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法定位失窃的载具");
		case VEH_DESTROYED: return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法定位毁坏的载具");
		case VEH_NORMAL:
		{
	  		GetVehiclePos(vehicleid, vx, vy, vz);
			SetPlayerGPS(playerid, vx, vy, vz);
			format(string, sizeof(string), "** 已经为你标记"#TEXT_PURPLE"%s"#TEXT_WHITE"的位置", GetVehicleName(VehData[vehicleid][vModel]));
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
		case VEH_STORED:
		{
			new eid = EstateSqlIDToID(VehData[vehicleid][vStoredEstate]);
			if(GetNearestEstate(playerid, 10.0) == eid)
			{
				format(string, sizeof(string), "** 你把储存在地产 %s 的 %s 取出来了", EstateData[eid][eName], GetVehicleName(VehData[vehicleid][vModel]));
				SendClientMessage(playerid, COLOR_YELLOWGREEN, string);
				VehData[vehicleid][vStatus] = VEH_NORMAL;
				SetVehicleToRespawn(vehicleid);
				SetVehicleVirtualWorld(vehicleid, 0);
				Log(vehlog, INFO, "%s(%d)将储存在地产%s(%d)的载具%s(%d)取出来了", PlayerData[playerid][pName], PlayerData[playerid][pID], EstateData[eid][eName], EstateData[eid][eID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
			}
			else
   			{
				SetPlayerGPS(playerid, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ]);
				format(string, sizeof(string), "** 已经为你标记"#TEXT_PURPLE"%s"#TEXT_WHITE"的位置", GetVehicleName(VehData[vehicleid][vModel]));
				SendClientMessage(playerid, COLOR_WHITE, string);
				SendClientMessage(playerid, COLOR_YELLOW, "** 目前该载具正储存在地产内,你可以在到达地产后再开启载具菜单将载具从地产取出");
			}
		}
	}
	return 1;
}

stock PlayerSwitchVehicleEngine(playerid, vehicleid)
{
	new string[144], Float:vhp, engine, lights, alarm, doors, bonnet, boot, objective, playername[MAX_PLAYER_NAME];
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	GetVehicleHealth(vehicleid, vhp);
	GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
	if(engine == 1)
	{
	    SetVehicleParamsEx(vehicleid, 0, lights, alarm, doors, bonnet, boot, objective);
		format(string, sizeof(string), "** %s将引擎熄火了 **", playername);
		SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		if(VehData[vehicleid][vNeon] != 0)
		{
			RemoveVehicleAttachment(vehicleid, ATTACH_NEON);
		}
	}
	else
	{
	    if(VehData[vehicleid][vFuel] < 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 这个载具没有油了");
	    if(GetGVarInt("Engining", playerid) == 1) return 1;
	    if(vhp < 300.0)
	    {
	        format(string, sizeof(string), "** %s尝试发动引擎,但引擎发出奇怪的声音 **", playername);
			SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
			SendClientMessage(playerid, COLOR_WHITE, "发动失败,这个载具严重损毁无法发动了");
	    }
	    else
	    {
			SetPlayerTimerEx(playerid, "StartEngine", 1500, false, "i", playerid);
			SetGVarInt("Engining", 1, playerid);
			format(string, sizeof(string), "** %s 正在发动引擎 **", playername);
			SendRangeMessage(30.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
		}
	}
	return 1;
}

PUBLIC:StartEngine(playerid)
{
    SetGVarInt("Engining", 0, playerid);
    new pstate = GetPlayerState(playerid);
    if(pstate != 2) return;
    new vehicleid = GetPlayerVehicleID(playerid);
    new engine, lights, alarm, doors, bonnet, boot, objective;
    GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	SetVehicleParamsEx(vehicleid, 1, lights, alarm, doors, bonnet, boot, objective);
    if(VehData[vehicleid][vNeon] != 0)
	{
		SetVehicleAttachment(vehicleid, ATTACH_NEON);
	}
}

PUBLIC:EstateUpgraded(eid)
{
    DeleteGVar("EUpgrading", eid);
}

stock PlayerPaintVehicle(playerid)
{
    PlayerTextDrawShow(playerid, Color1T[playerid]);
	PlayerTextDrawShow(playerid, Color1L[playerid]);
	PlayerTextDrawShow(playerid, Color1R[playerid]);
	PlayerTextDrawShow(playerid, Color2T[playerid]);
	PlayerTextDrawShow(playerid, Color2L[playerid]);
	PlayerTextDrawShow(playerid, Color2R[playerid]);
	PlayerTextDrawShow(playerid, ColorEnter[playerid]);
	SelectTextDraw(playerid, COLOR_FADEBLUE);
}

stock PlayerExitPaintVehicle(playerid)
{
	new color1 = GetGVarInt("EVColor1", playerid),
		color2 = GetGVarInt("EVColor2", playerid),
		vehicleid = GetPlayerVehicleID(playerid), string[144];
    switch(GetGVarInt("EditVCol", playerid))
	{
		case 1:
		{
			ShowPlayerVehicleModMenu(playerid);
			if(VehData[vehicleid][vColor1] != color1 || VehData[vehicleid][vColor2] != color2)
			{
				format(string, sizeof(string), ""#TEXT_WHITE"修改载具颜色完成,花费你$500");
				SendClientMessage(playerid, COLOR_WHITE, string);
				GiveMoney(playerid, -500);
				Log(moneylog, INFO, "%s(%d)花费了$%d于客制化工厂修改载具颜色", PlayerData[playerid][pName], PlayerData[playerid][pID], 500);
				Log(vehlog, INFO, "%s(%d)于客制化工厂修改载具%s(%d)的颜色", PlayerData[playerid][pName], PlayerData[playerid][pID], GetVehicleName(VehData[vehicleid][vModel]), VehData[vehicleid][vID]);
			}
		}
		case 2:
		{
			TogglePlayerControllableEx(playerid, 1);
			SendClientMessage(playerid, COLOR_WHITE, "** 使用地产喷漆设备修改载具颜色完成");
		}
	}
   	DeleteGVar("EditVCol", playerid);
   	VehData[vehicleid][vColor1] = color1;
	VehData[vehicleid][vColor2] = color2;

    PlayerTextDrawHide(playerid, Color1T[playerid]);
	PlayerTextDrawHide(playerid, Color1L[playerid]);
	PlayerTextDrawHide(playerid, Color1R[playerid]);
	PlayerTextDrawHide(playerid, Color2T[playerid]);
	PlayerTextDrawHide(playerid, Color2L[playerid]);
	PlayerTextDrawHide(playerid, Color2R[playerid]);
	PlayerTextDrawHide(playerid, ColorEnter[playerid]);
	CancelSelectTextDraw(playerid);
	return 1;
}

stock PlayerPlayGlobalSound(playerid, soundid, Float:range=30.0)
{
	new Float:px, Float:py, Float:pz,
	pworld = GetPlayerVirtualWorld(playerid);
	GetPlayerPos(playerid, px, py, pz);

	ForEachPlayer(i)
	{
	    if(GetGVarInt("Spawned", i) == 0) continue;
	    if(GetPlayerVirtualWorld(i) == pworld && IsPlayerInRangeOfPointEx(i, range, px, py, pz)) PlayerPlaySound(i, soundid, px, py, pz);
	}
}

stock PlayGlobalSound(Float:rx, Float:ry, Float:rz, worldid, soundid, Float:range=30.0)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Spawned", i) == 0) continue;
	    if(GetPlayerVirtualWorld(i) == worldid && IsPlayerInRangeOfPointEx(i, range, rx, ry, rz)) PlayerPlaySound(i, soundid, px, py, pz);
	}
}

stock PlaySpeakerAudioStream(stype, speakerid, world, url[], Float:range=50.0)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Spawned", i) == 0) continue;
		if(stype == 1)
		{
			if(GetGVarInt("UsingRadio", i) == 0 && GetPlayerVirtualWorld(i) == world && IsPlayerInRangeOfPointEx(i, range, ObjectData[speakerid][oX], ObjectData[speakerid][oY], ObjectData[speakerid][oZ]))
			{
				PlayAudioStreamForPlayer(i, url, ObjectData[speakerid][oX], ObjectData[speakerid][oY], ObjectData[speakerid][oZ], range, 1);
				SetGVarInt("UsingSpeaker", 1, i);
				SetGVarInt("SpeakerID", speakerid, i);
				SetGVarInt("SpeakerType", stype, i);
				SetGVarInt("SpeakerW", world, i);
			}
		}
		else
		{
			if(GetGVarInt("UsingRadio", i) == 0 && GetPlayerVirtualWorld(i) == world && IsPlayerInRangeOfPointEx(i, range, RadioPos[speakerid][0], RadioPos[speakerid][1], RadioPos[speakerid][2]))
			{
				PlayAudioStreamForPlayer(i, url, RadioPos[speakerid][0], RadioPos[speakerid][1], RadioPos[speakerid][2], range, 1);
				SetGVarInt("UsingSpeaker", 1, i);
				SetGVarInt("SpeakerID", speakerid, i);
				SetGVarInt("SpeakerType", stype, i);
				SetGVarInt("SpeakerW", world, i);
			}
		}
	}
}

stock StopSpeakerAudioStream(stype, speakerid, world)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Spawned", i) == 0) continue;
	    if(GetGVarInt("UsingRadio", i) == 0 && GetGVarInt("UsingSpeaker", i) == 1 && GetGVarInt("SpeakerType", i) == stype && GetGVarInt("SpeakerID", i) == speakerid && GetPlayerVirtualWorld(i) == world)
		{
			StopAudioStreamForPlayer(i);
			DeleteGVar("UsingSpeaker", i);
		}
	}
}

stock PlayerSummonPet(playerid, petid)
{
    new pettimer, Float:px, Float:py, Float:pz,
    animalid = PetData[playerid][petid][petAnimal];
    GetPlayerPos(playerid, px, py ,pz);
    GetXYLeftToPlayer(playerid, px, py, 1.0);
    PetData[playerid][petid][petNPC] = CreateNPC(AnimalsList[animalid][amlModel], 0, PetData[playerid][petid][petHealth], 0.0, px, py, pz, 0.0, 0, 0);
    SetGVarInt("Animal", PetData[playerid][petid][petAnimal], PetData[playerid][petid][petNPC]);
    SetGVarInt("PetOwner", playerid, PetData[playerid][petid][petNPC]);
    SetGVarInt("Pet", 1, PetData[playerid][petid][petNPC]);
    SetGVarInt("PetID", petid, PetData[playerid][petid][petNPC]);
    pettimer = SetTimerEx("PetTimer", 60000, 1, "id", playerid, petid);
    SetGVarInt("PetTimer", pettimer, playerid);
    SetGVarInt("PetCalled", 1, playerid);
    SetGVarInt("CurrentPetID", petid, playerid);
    DeleteGVar("PetAttack", playerid);
    Log(petlog, INFO, "%s(%d)呼叫了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
}

stock PlayerRecallPet(playerid, petid)
{
    new pettimer;
	PetData[playerid][petid][petHealth] = FCNPC_GetHealth(PetData[playerid][petid][petNPC]);
	DestroyNPC(PetData[playerid][petid][petNPC]);
	pettimer = GetGVarInt("PetTimer", playerid);
	KillTimer(pettimer);
	DeleteGVar("PetTimer", playerid);
	DeleteGVar("PetCalled", playerid);
	DeleteGVar("Animal", PetData[playerid][petid][petNPC]);
	DeleteGVar("PetOwner", PetData[playerid][petid][petNPC]);
	DeleteGVar("Pet", PetData[playerid][petid][petNPC]);
	DeleteGVar("PetID", PetData[playerid][petid][petNPC]);
	DeleteGVar("NPCAttackCD", PetData[playerid][petid][petNPC]);
	DeleteGVar("CurrentPetID", playerid);
	PetData[playerid][petid][petNPC] = -1;
	Log(petlog, INFO, "%s(%d)收回了宠物%s(%d)", PlayerData[playerid][pName], PlayerData[playerid][pID], PetData[playerid][petid][petName], PetData[playerid][petid][petID]);
}

PUBLIC:PlayerPhoneCall(playerid, type, callto)
{
	new string[144], found;
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USECELLPHONE);
	SetPlayerAttachedObject(playerid, 5, 330, 6);
	switch(type)
	{
		case CONTACT_PLAYER:
		{
		    if(ConfigData[callto][cfPhoneOff] == 1) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前对方手机关机,无法通话");
		    if(GetGVarInt("Logged", callto) == 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 对方已经离线,无法通话");
		    if(GetGVarInt("Calling", callto) != -1 || GetGVarInt("PhoneCaller", callto) != -1) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 对方正在忙线中,请稍后再试");
            format(string, sizeof(string), "<<通话>> 你有来自 %s 的来电,打开手机以接通/挂断", PlayerData[playerid][pName]);
		    SendClientMessage(callto, COLOR_FADEGREEN, string);
		    SetGVarInt("PhoneRing", 6, callto);
		    SetGVarInt("PhoneCaller", playerid, callto);
		    SetGVarInt("Calling", callto, playerid);
		    SetGVarInt("PhoneChat", 0, playerid);
			if(ConfigData[callto][cfPhoneMute] == 0) PlayerPlayGlobalSound(callto, 20600);
		    PlayerPlaySound(playerid, 16001, 0.0, 0.0, 0.0);
		}
		case CONTACT_MNPC:
		{
		    switch(GetGVarInt("NContact", playerid))
		    {
				case NCONTACT_MISSION:
				{
				    if(IsPlayerBusy(playerid) || GetGVarInt("Eventing", playerid) == 1) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 你目前正在进行其他工作或任务,暂时无法接受新任务");
					switch(callto)
					{//是否正在冷却中
					    case MNPC_SWEET: if(LimitData[playerid][plMSweet] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_SIMEON: if(LimitData[playerid][plMSimeon] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_TREVOR: if(LimitData[playerid][plMTrevor] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_CESAR: if(LimitData[playerid][plMCesar] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_EMMET: if(LimitData[playerid][plMEmmet] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_TORENO: if(LimitData[playerid][plMToreno] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					    case MNPC_WOOZIE: if(LimitData[playerid][plMWoozie] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前尚未有可接受的新任务,请稍后再试");
					}
					switch(GetGVarInt("MNPCStatus", callto))
					{
					    case STATUS_FINISHED:
					    {//任务尚未开始
					        if(GetGVarInt("Mission", playerid) > 0)
					        {
							    ShowPlayerDialog(playerid, DIALOG_MISSION_STOP, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务", ""#TEXT_WHITE"你目前正在进行其他任务\n是否要先结束该任务?", "是", "否");
							}
					        else
						    {
								new mission = StartNewNPCMission(callto);
								GivePlayerMission(playerid, mission);
								PlayerStartMission(playerid, mission);
								if(GetPlayerTeam(playerid) == NO_TEAM)
								{//发起人不属于任何小队,代表是公开任务,发送短信
								    SetGVarInt("MissionTeam", NO_TEAM, mission);
									format(string, sizeof(string), "%s已发起联络人%s的任务: %s,打开短信可以一同加入该联络人任务", PlayerData[playerid][pName], MissionNPC[callto][mpcName], MissionsList[mission][msTitle]);
									ForEachPlayer(i)
									{
									    if(GetGVarInt("Mission", i) > 0) continue;
									    switch(callto)
										{//发送短信通知所有可以接受该联络人任务的玩家
										    case MNPC_SWEET: if(RecordData[i][prMSweet] > -1 && LimitData[i][plMSweet] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_SIMEON: if(RecordData[i][prMSimeon] > -1 && LimitData[i][plMSimeon] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_TREVOR: if(RecordData[i][prMTrevor] > -1 && LimitData[i][plMTrevor] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_CESAR: if(RecordData[i][prMCesar] > -1 && LimitData[i][plMCesar] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_EMMET: if(RecordData[i][prMEmmet] > -1 && LimitData[i][plMEmmet] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_TORENO: if(RecordData[i][prMToreno] > -1 && LimitData[i][plMToreno] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										    case MNPC_WOOZIE: if(RecordData[i][prMWoozie] > -1 && LimitData[i][plMWoozie] == 0) SendPlayerTextMsg_NPC(i, callto, string);
										}
									}
								}
								else
								{
								    SetGVarInt("MissionTeam", GetPlayerTeam(playerid), mission);
								}
							}
					    }
					    case STATUS_WAITING:
					    {//正在等候玩家加入
					        new mission = GetGVarInt("MNPCMission", callto);
					        if(GetGVarInt("MissionPlayers", mission) > MAX_GMISSION_PLAYERS-1) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前任务人数已满,请稍后再试");
					        if(GetGVarInt("MissionTeam", mission) != NO_TEAM && GetPlayerTeam(playerid) != GetGVarInt("MissionTeam", mission)) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前此任务不开放非特定小队的玩家加入,请稍后再试");
							if(GetGVarInt("Mission", playerid) > 0)
						    {
							    ShowPlayerDialog(playerid, DIALOG_MISSION_STOP, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"任务", ""#TEXT_WHITE"你目前正在进行其他任务\n是否要先结束该任务?", "是", "否");
							}
							else
							{
							    GivePlayerMission(playerid, mission);
								PlayerStartMission(playerid, mission);
							}
					    }
					    case STATUS_STARTED:
					    {//任务已开始
					        return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前任务已经开始,请稍后再试");
					    }
					}
					SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
					RemovePlayerAttachedObject(playerid, 5);
				}
				case NCONTACT_HELP:
				{
				    switch(callto)
					{
					    case MNPC_EMMET:
						{
						    if(RecordData[playerid][prMEmmet] < 15) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前你还未解锁这项服务");
							if(LimitData[playerid][plHEmmet] > 0) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 目前该服务暂时不可用,请稍后再试");
							if(PlayerData[playerid][pBank] < 2500) return SendClientMessage(playerid, COLOR_WHITE, "<<拨号失败>> 你的存款不足$2,500,无法使用该服务");
							PlayerData[playerid][pBank] -= 2500;
							Log(moneylog, INFO, "%s(%d)支付了$%d呼叫埃米特的武器库(存款)", PlayerData[playerid][pName], PlayerData[playerid][pID], 2500);
							new Float:vehX, Float:vehY, Float:vehZ, Float:vehA;
							if(GetPlayerRoad(playerid, vehX, vehY, vehZ, vehA, 300.0))
							{
								SetGVarFloat("VehSvDX", vehX, playerid),
								SetGVarFloat("VehSvDY", vehY, playerid),
								SetGVarFloat("VehSvDZ", vehZ, playerid),
								SetGVarFloat("VehSvDA", vehA, playerid),
								SetGVarInt("VehSvDCount", 20, playerid);
								SetGVarInt("VehSvDVeh", VSV_EMMET, playerid);
								format(string, sizeof(string), ""#TEXT_WHITE"支付完成: 载有武器的货车将会在短时间内运送至离您最近的道路上");
								SendClientMessage(playerid, COLOR_WHITE, string);
								LimitData[playerid][plHEmmet] = 1800;
							}
							else SendClientMessage(playerid, COLOR_WHITE, "无法为您运送载具: 你距离最近的道路实在太远了,无法定位");
						}
					}
		    		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
					RemovePlayerAttachedObject(playerid, 5);
				}
			}
		}
		case CONTACT_FD:
		{
		    if(GetGVarInt("RequestFD", playerid) != 0)
		    {
		        ForEachPlayer(p)
			    {
			        if(PlayerData[p][pJob] == JOB_FD)
			        {
			            format(string, sizeof(string), "<<请求取消>> %s 取消了外送的请求", PlayerData[playerid][pName]);
			            SendClientMessage(p, COLOR_WHITE, string);
			        }
			    }
				SendClientMessage(playerid, COLOR_WHITE, "已经取消外送的请求");
		        DeleteGVar("RequestFD", playerid);
		        UpdatePlayerColor(playerid);
		    }
		    else
		    {
		        found = 0;
			    ForEachPlayer(p)
			    {
			        if(PlayerData[p][pJob] == JOB_FD)
			        {
			            format(string, sizeof(string), "<<外送请求>> %s 呼叫了外送餐点,位置已标示在地图上", PlayerData[playerid][pName]);
			            SendClientMessage(p, COLOR_ORANGE, string);
			            found = 1;
			        }
			    }
			    if(found == 0) SendClientMessage(playerid, COLOR_WHITE, "请求失败,目前好像没有在线的外送员");
			    else
			    {
					SendClientMessage(playerid, COLOR_WHITE, "已经发送外送请求,在线的外送员将会前往你的位置");
		            SetGVarInt("RequestFD", 1, playerid);
		            UpdatePlayerColor(playerid);
		        }
	        }
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		}
		case CONTACT_TAXI:
		{
		    if(GetGVarInt("RequestTaxi", playerid) != 0)
		    {
			    format(string, sizeof(string), "<<请求取消>> %s 取消了计程车的请求", PlayerData[playerid][pName]);
			    SendCompanyMessage(CompanyData[callto][comID], COLOR_WHITE, string);
				SendClientMessage(playerid, COLOR_WHITE, "已经取消计程车的请求");
		        DeleteGVar("RequestTaxi", playerid);
		        UpdatePlayerColor(playerid);
		    }
		    else
		    {
			    format(string, sizeof(string), "<<计程车请求>> %s 呼叫了计程车,请至计程车打开载具面板接受请求", PlayerData[playerid][pName]);
			    SendCompanyMessage(CompanyData[callto][comID], COLOR_FADEYELLOW, string);
				SendClientMessage(playerid, COLOR_WHITE, "已经发送计程车请求,该企业在线的司机将会前往你的位置");
	            SetGVarInt("RequestTaxi", 1, playerid);
	            SetGVarInt("RequestTaxiTo", callto, playerid);
	            UpdatePlayerColor(playerid);
	        }
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		}
		case CONTACT_TOW:
		{
		    if(GetGVarInt("RequestTow", playerid) != 0)
		    {
		        ForEachPlayer(p)
			    {
			        if(PlayerData[p][pJob] == JOB_TOW)
			        {
			            format(string, sizeof(string), "<<请求取消>> %s 取消了道路救援的请求", PlayerData[playerid][pName]);
			            SendClientMessage(p, COLOR_WHITE, string);
			        }
			    }
				SendClientMessage(playerid, COLOR_WHITE, "已经取消道路救援的请求");
		        DeleteGVar("RequestTow", playerid);
		        UpdatePlayerColor(playerid);
		    }
		    else
		    {
			    ForEachPlayer(p)
			    {
			        if(PlayerData[p][pJob] == JOB_TOW)
			        {
			            format(string, sizeof(string), "<<救援请求>> %s 呼叫了道路救援,位置已标示在地图上", PlayerData[playerid][pName]);
			            SendClientMessage(p, COLOR_LIGHTBLUE, string);
			        }
			    }
			    if(found == 0) SendClientMessage(playerid, COLOR_WHITE, "请求失败,目前好像没有在线的拖吊人员");
			    else
			    {
					SendClientMessage(playerid, COLOR_WHITE, "已经发送道路救援请求,在线的拖吊人员将会前往你的位置");
		            SetGVarInt("RequestTow", 1, playerid);
		            UpdatePlayerColor(playerid);
		        }
	        }
		    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			RemovePlayerAttachedObject(playerid, 5);
		}
		case CONTACT_GOODS:
		{
      		ShowPlayerDialog(playerid, DIALOG_GOODS, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这里是联合物流,您好,请选择您的服务\n订购原料货物\n查看货物战争\n海外买家列表\n取得说明", "选择", "返回");
		}
		case CONTACT_911:
		{
      		ShowPlayerDialog(playerid, DIALOG_911, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"通话", ""#TEXT_WHITE"这是紧急服务电话,请选择需要的服务\n报警\n呼叫救护车", "选择", "返回");
		}
		case CONTACT_INSURE:
		{
      		new VehStr[256], i, j, l;
     		for(i = 1, l = 0, j = GetVehiclePoolSize(); i <= j ; i++)
			{
			    if(VehData[i][vStatus] != VEH_DESTROYED) continue;
				if(IsPlayerVehicle(playerid, i))
				{
				    format(VehStr, sizeof(VehStr), "%s%s\t%s\t个人\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vDeductible]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(IsCompanyVehicle(PlayerData[playerid][pCompany], i))
				{
				    format(VehStr, sizeof(VehStr), "%s%s\t%s\t企业\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vDeductible]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(IsGangVehicle(PlayerData[playerid][pGang], i))
				{
				    format(VehStr, sizeof(VehStr), "%s%s\t%s\t帮会\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vDeductible]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
				else if(IsDepartmentVehicle(PlayerData[playerid][pDepartment], i))
				{
				    format(VehStr, sizeof(VehStr), "%s%s\t%s\t公部门\t$%d\n", VehStr, GetVehicleName(VehData[i][vModel]), VehData[i][vPlate], VehData[i][vDeductible]);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
			}
			if(l == 0){return SendClientMessage(playerid, COLOR_YELLOW, "<<通话>> "#TEXT_WHITE"您或您的组织没有任何损毁的载具");}
			format(VehStr, sizeof(VehStr), "名称\t车牌\t所属单位\t保险费\n%s", VehStr);
			ShowPlayerDialog(playerid, DIALOG_INSURANCE, DIALOG_STYLE_TABLIST_HEADERS, "摩斯姆通保险", VehStr, "索赔", "取消");
		}
		case CONTACT_BOUNTY:
		{
		    if(PlayerData[playerid][pGang] == GANG_ID_NONE) return SendClientMessage(playerid, COLOR_WHITE, "通话失败,只有帮会成员可以使用悬赏功能");
      		ShowPlayerDialog(playerid, DIALOG_BOUNTY, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"悬赏事务所", ""#TEXT_WHITE"这里是悬赏事务所,请选择服务项目\n发起悬赏\n获取所有悬赏目标位置", "选择", "取消");
		}
		case CONTACT_AD:
		{
      		ShowPlayerDialog(playerid, DIALOG_AD, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"广告供应商", ""#TEXT_WHITE"要发送一条广告消息吗?\n将会依照消息内容长度酌收费", "发送", "取消");
		}
	}
	return 1;
}

stock PhoneHangUp(playerid)
{
	new caller;
	Phone_Close(playerid);
	if(GetGVarInt("PhoneCaller", playerid) != -1)
	{
	    caller = GetGVarInt("PhoneCaller", playerid);
	    SetGVarInt("Calling", -1, caller);
	}
	else if(GetGVarInt("Calling", playerid) != -1)
	{
	    caller = GetGVarInt("Calling", playerid);
	    if(GetGVarInt("Calling", caller) == playerid)
	    {
	        DeleteGVar("PhoneSpeaker", caller);
	        DeleteGVar("PhoneRing", caller);
			DeleteGVar("PhoneRung", caller);
			DeleteGVar("PhoneChat", caller);
			SetGVarInt("PhoneCaller", -1, caller);
			SetGVarInt("Calling", -1, caller);
		}
	}
	DeleteGVar("PhoneSpeaker", playerid);
	DeleteGVar("PhoneChat", playerid);
    DeleteGVar("PhoneRing", playerid);
	DeleteGVar("PhoneRung", playerid);
	SetGVarInt("PhoneCaller", -1, playerid);
	SetGVarInt("Calling", -1, playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
	RemovePlayerAttachedObject(playerid, 5);
}

stock UpdatePlayerColor(playerid)
{
    SetPlayerDefaultColor(playerid);
    ForEachPlayer(i)
 	{
	    if(i == playerid) continue;
        SetPlayerDefaultColorForPlayer(playerid, i);
        SetPlayerDefaultColorForPlayer(i, playerid);
	}
}

stock SetPlayerDefaultColor(playerid)
{
	new id;
	switch(PlayerData[playerid][pTitle])
	{
	    case TITLE_COMPANY:
	    {
	        id = CompanySqlIDToID(PlayerData[playerid][pCompany]);
	        SetPlayerColor(playerid, CompanyData[id][comColor]);
	    }
	    case TITLE_GANG, TITLE_GANG_FULL:
	    {
	        id = GangSqlIDToID(PlayerData[playerid][pGang]);
	        SetPlayerColor(playerid, GangData[id][gColor]);
	    }
	    case TITLE_DEPARTMENT:
	    {
	        id = PlayerData[playerid][pDepartment];
	        switch(id)
	        {
	        	case DEPT_POLICE:
				{
					if(GetGVarInt("PoliceDuty", playerid) == 1) SetPlayerColor(playerid, COLOR_BLUE);
					else SetPlayerColor(playerid, PLAYER_BLUE);
				}
	        	case DEPT_MEDIC:
	        	{
					if(GetGVarInt("MedicDuty", playerid) == 1) SetPlayerColor(playerid, COLOR_NURSEPINK);
					else SetPlayerColor(playerid, PLAYER_NURSEPINK);
				}
	        	case DEPT_GOVERNMENT: SetPlayerColor(playerid, PLAYER_GRAD);
	        	case DEPT_ARMY: SetPlayerColor(playerid, PLAYER_FADEBLUE);
	        	case DEPT_COUNSELOR: SetPlayerColor(playerid, PLAYER_PINKRED);
	        	default: SetPlayerColor(playerid, PLAYER_WHITE);
	        }
	    }
		default: SetPlayerColor(playerid, PLAYER_WHITE);
	}
}

stock SetPlayerDefaultColorForPlayer(playerid, forplayerid)
{//让玩家在特定情况看到特定玩家会有特定的颜色标记
	new callto, gzid, eventid;
	if(GetGVarInt("Eventing", playerid) > STATUS_FINISHED)
	{
	    eventid = GetGVarInt("EventID", playerid);
	    if(GetGVarInt("Eventing", forplayerid) != STATUS_FINISHED && GetGVarInt("EventID", forplayerid) == eventid)
		{
		    switch(Event[eventid][evType])
		    {
		    	case EVENT_SURVIVE:
			    {
			        SetPlayerMarkerForPlayer(forplayerid, playerid, PLAYER_FADERED);
			    }
	      		case EVENT_SSUR:
			    {
			        if(GetGVarInt("EventTeam", playerid) == GetGVarInt("EventTeam", forplayerid))
			        {
			            SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_SKYBLUE);
			        }
			        else
			        {
			            SetPlayerMarkerForPlayer(forplayerid, playerid, PLAYER_RED);
			        }
			    }
			    case EVENT_SVS, EVENT_SDM:
			    {
			        if(GetGVarInt("EventTeam", playerid) == GetGVarInt("EventTeam", forplayerid))
			        {
			            SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_SKYBLUE);
			        }
			        else
			        {
			            SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_RED);
			        }
			    }
			    default:
			    {
				    switch(GetGVarInt("EventTeam", playerid))
				    {
						case EVENT_TEAM_BLUE: SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_SKYBLUE);
						case EVENT_TEAM_RED: SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_RED);
						case NO_TEAM: SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_WHITE);
					}
				}
			}
		}
	}
	else if(GetPlayerTeam(playerid) != NO_TEAM)
	{
		if(GetPlayerTeam(forplayerid) == GetPlayerTeam(playerid))
		{
			SetPlayerMarkerForPlayer(forplayerid, playerid, PLAYER_TEAM);
		}
	}
	else if(GetGVarInt("Mission", playerid) > 0)
	{
	    new mission = GetGVarInt("Mission", playerid);
	    if(MissionsList[mission][msType] == MISSION_GLOBAL && GetGVarInt("Mission", forplayerid) == mission) SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_FADEBLUE);
	}
	else if(GetGVarInt("Racing", playerid) > STATUS_FINISHED)
	{
	    if(GetGVarInt("Racing", forplayerid) != STATUS_FINISHED && GetGVarInt("RaceID", playerid) == GetGVarInt("RaceID", forplayerid))
		{
			SetPlayerMarkerForPlayer(forplayerid, playerid, PLAYER_RACE);
		}
	}
	else if(GetGVarInt("RequestFD", playerid) == 1)
	{
		if(PlayerData[forplayerid][pJob] == JOB_FD) SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_ORANGE);
	}
	else if(GetGVarInt("RequestTaxi", playerid) == 1)
	{
		callto = GetGVarInt("RequestTaxiTo", playerid);
		if(PlayerData[forplayerid][pCompany] == CompanyData[callto][comID])
		{
		    SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_ORANGE);
		    SetPlayerMarkerForPlayer(playerid, forplayerid, COLOR_YELLOW);
		}
	}
	else if(GetGVarInt("RequestTow", playerid) == 1)
	{
		if(PlayerData[forplayerid][pJob] == JOB_TOW) SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_LIGHTBLUE);
	}
	else if(PlayerData[playerid][pBounty] > 0)
	{
	    if(GetGVarInt("TraceBounty", forplayerid) == 1) SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_FADERED);
	}
	else if(GetGVarInt("CheckingTurf", forplayerid) == 1)
	{
	    if(GetGVarInt("AttackingTurf", forplayerid) > 0)
	    {
	        gzid = GetGVarInt("AtkTurfID", forplayerid);
		    if(PlayerData[playerid][pGang] == GangZone[gzid][gzOwner])
			{
				return SetPlayerMarkerForPlayer(forplayerid, playerid, PLAYER_LIGHTRED);
			}
	    }
	    else
	    {
			if(GetGVarInt("AttackingTurf", playerid) != 0 && GetGVarInt("AtkTurfID", playerid) == GetGVarInt("ChkTurfID", forplayerid))
			{
				return SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_LIGHTRED);
			}
		}
	}
	else if(PlayerData[playerid][pDepartment] == DEPT_COUNSELOR)
	{
	    if(PlayerData[forplayerid][pLevel] < 15) SetPlayerMarkerForPlayer(forplayerid, playerid, COLOR_PINKRED);
	}
	else SetPlayerDefaultColor(playerid);
	return 1;
}

PUBLIC:Cooked(playerid)
{
    switch(GetGVarInt("FDType", playerid))
	{
		case 1:
		{
		    if(GetPlayerRemainingSpace(playerid) < 5)
		    {
		        new Float:px, Float:py, Float:pz,
		            pworld = GetPlayerVirtualWorld(playerid);
                CreateDropItem(ITEM_USE, 9, 5, px, py, pz, pworld);
            }
            else{GivePlayerItem(playerid, 1, 9, 5);}
            SendClientMessage(playerid, COLOR_WHITE, "** 已制作了5个"#TEXT_FADEGREEN"小卡拉鸡堡"#TEXT_WHITE",接下来就可以打开"#TEXT_YELLOW"背包"#TEXT_WHITE"使用"#TEXT_SKYBLUE"交易"#TEXT_WHITE"选项将餐点卖给其他玩家了");
		}
		case 2:
		{
		    if(GetPlayerRemainingSpace(playerid) < 5)
		    {
		        new Float:px, Float:py, Float:pz,
		            pworld = GetPlayerVirtualWorld(playerid);
                CreateDropItem(ITEM_USE, 5, 5, px, py, pz, pworld);
            }
            else{GivePlayerItem(playerid, 1, 5, 5);}
            SendClientMessage(playerid, COLOR_WHITE, "** 已制作了5个"#TEXT_FADEGREEN"小披萨"#TEXT_WHITE",接下来就可以打开"#TEXT_YELLOW"背包"#TEXT_WHITE"使用"#TEXT_SKYBLUE"交易"#TEXT_WHITE"选项将餐点卖给其他玩家了");
		}
	}
	ClearAnimationsEx(playerid);
    DeleteGVar("Cooking", playerid);
}

PUBLIC:MatWarStarter()
{
	switch(GetOnlinePlayers())
	{
		case 0..10:
		{
		    StartRandomMatWar();
		}
		case 11..20:
		{
		    StartRandomMatWar();
		    StartRandomMatWar();
		}
		default:
		{
		    StartRandomMatWar();
		    StartRandomMatWar();
		    StartRandomMatWar();
		}
	}
}

PUBLIC:StartRandomMatWar()
{
	new matid, type, amount,
	rand = random(9);
	switch(rand)
	{
		case 0: matid = 149;//武器货物
		case 1: matid = 150;//火药货物
		case 2: matid = 151;//药品货物
		case 3: matid = 152;//家具货物
		case 4: matid = 153;//食材货物
		case 5: matid = 154;//成衣货物
		case 6: matid = 155;//安毒货物
		case 7: matid = 156;//古柯硷货物
		case 8: matid = 157;//大麻货物
	}
	switch(random(3))
	{
		case 0: {amount = 4 + random(4), type = MW_VEH;}
	    case 1: {amount = 2 + random(4), type = MW_DROP;}
	    case 2: {amount = 4 + random(6), type = MW_NPC;}
	}
	StartMatWar(type, matid, amount);
}

stock StartMatWar(type, matid, amount, fordept=0)
{
	new string[144], rand, id, i, j, randmodel, matveh, Float:randx, Float:randy, holder, gang, weapon, npcid, level, npccount;
	for(i = 0, j = MAX_MATWARS, id = -1; i < j; i++)
	{
	    if(MatWar[i][mwStatus] == 0)
	    {
	        id = i;
	        break;
	    }
	}
	if(id != -1)
	{
	    MatWar[id][mwStatus] = 1,
		MatWar[id][mwType] = type,
		MatWar[id][mwMatID] = matid,
		MatWar[id][mwMatAmount] = amount;
		switch(type)
		{
		    case MW_VEH:
		    {
		        MatWar[id][mwTimer] = 900;
		        randmodel = random(10);
				switch(randmodel)
				{
				    case 0: randmodel = 489;//Rancher
				    case 1: randmodel = 498;//Boxville
				    case 2: randmodel = 579;//Huntley
				    case 3: randmodel = 413;//Pony
				    case 4: randmodel = 440;//Rumpo
				    case 5: randmodel = 482;//Burrito
				    case 6: randmodel = 483;//Camper
				    case 7: randmodel = 535;//Slamvan
				    case 8: randmodel = 445;//Admiral
				    case 9: randmodel = 458;//Solair
				}
				rand = random(sizeof(MatWar_Vehicle));
		        matveh = CreateVehicleEx(randmodel, MatWar_Vehicle[rand][0], MatWar_Vehicle[rand][1], MatWar_Vehicle[rand][2], MatWar_Vehicle[rand][3], -1, -1, VTYPE_MW, 0);
		        MatWar[id][mwSpotID] = rand;
		        MatWar[id][mwX] = MatWar_Vehicle[rand][0],
		        MatWar[id][mwY] = MatWar_Vehicle[rand][1],
		        MatWar[id][mwZ] = MatWar_Vehicle[rand][2];
		        MatWar[id][mwHolder] = matveh;
		        SetGVarInt("VehMW", id, matveh);
		        SetGVarInt("VehMWLoaded", 1, matveh);
		        gang = random(sizeof(MatWarSkin));
		        for(i = 0; i < 2; i++)
		        {
		            switch(random(3))
		            {
		                case 0: weapon = 22;
		                case 1: weapon = 32;
		                case 2: weapon = 28;
		            }
		            switch(random(3))
		            {
		                case 0: level = NPC_NOOB;
		                case 1: level = NPC_NORMAL;
		                case 2: level = NPC_GANGSTER;
		            }
		            GetXYLeftToAngle(float(random(360)), MatWar_Vehicle[rand][0], MatWar_Vehicle[rand][1], randx, randy, 2.0);
		            npcid = CreateNPC(MatWarSkin[gang][random(3)], weapon, 60.0, 0.0, randx, randy, MatWar_Vehicle[rand][2], float(random(360)), 0, 0, level, 1, 1, NTEAM_MATWAR);
                    SetGVarInt("NPCMW", 1, npcid);
                    SetGVarInt("NPCMWID", id, npcid);
		        }
		        VehData[matveh][vArmour] = 2000.0;
		        SetVehicleHealth(matveh, 3000.0);
		        format(string, sizeof(string), ""#TEXT_WHITE"新的货物战争开始了,争夺目标为:装着%d个%s的载具,使用手机连络联合物流以取得位置", MatWar[id][mwMatAmount], ItemsList_USE[MatWar[id][mwMatID]][iuName]);
	        }
	        case MW_DROP:
		    {
		        MatWar[id][mwTimer] = 300;
		        rand = random(sizeof(MatWar_Drop));
		        npccount = 2 + random(4);
		        gang = random(sizeof(MatWarSkin));
		        for(i = 0; i < npccount; i++)
		        {
		            switch(random(3))
		            {
		                case 0: weapon = 22;
		                case 1: weapon = 24;
		                case 2: weapon = 28;
		            }
		            switch(random(3))
		            {
		                case 0: level = NPC_NOOB;
		                case 1: level = NPC_NORMAL;
		                case 2: level = NPC_GANGSTER;
		            }
		            randx = float(random(10)-random(10));
		            randy = float(random(10)-random(10));
		            npcid = CreateNPC(MatWarSkin[gang][random(3)], weapon, 60.0, 0.0, MatWar_Drop[rand][0]+randx, MatWar_Drop[rand][1]+randy, MatWar_Drop[rand][2]+0.3, float(random(360)), 0, 0, level, 1, 1, NTEAM_MATWAR);
                    SetGVarInt("NPCMW", 1, npcid);
                    SetGVarInt("NPCMWID", id, npcid);
		        }
		        MatWar[id][mwObject] = CreateDynamicObject(18728, MatWar_Drop[rand][0], MatWar_Drop[rand][1], MatWar_Drop[rand][2]-2.8, 0.0, 0.0, 0.0);
		        MatWar[id][mwSpotID] = rand;
		        MatWar[id][mwX] = MatWar_Drop[rand][0],
		        MatWar[id][mwY] = MatWar_Drop[rand][1],
		        MatWar[id][mwZ] = MatWar_Drop[rand][2];
		        MatWar[id][mwHolder] = -1;
		        format(string, sizeof(string), ""#TEXT_WHITE"新的货物战争开始了,争夺目标为:装着%d个%s的空投物,使用手机连络联合物流以取得位置", MatWar[id][mwMatAmount], ItemsList_USE[MatWar[id][mwMatID]][iuName]);
	        }
	        case MW_NPC:
		    {
		        MatWar[id][mwTimer] = 900;
		        rand = random(sizeof(MatWar_NPC));
		        gang = random(sizeof(MatWarSkin));
		        npccount = 4 + random(4);
		        MatWar[id][mwSpotID] = rand;
		        for(i = 0; i < npccount; i++)
		        {
		            switch(random(5))
		            {
		                case 0: weapon = 22;
		                case 1: weapon = 25;
		                case 2: weapon = 32;
		                case 3: weapon = 28;
		                case 4: weapon = 29;
		            }
		            switch(random(3))
		            {
		                case 0: level = NPC_NOOB;
		                case 1: level = NPC_NORMAL;
		                case 2: level = NPC_GANGSTER;
		            }
		            randx = float(random(10)-random(10));
		            randy = float(random(10)-random(10));
		            npcid = CreateNPC(MatWarSkin[gang][random(3)], weapon, 60.0, 0.0, MatWar_NPC[rand][0]+randx, MatWar_NPC[rand][1]+randy, MatWar_NPC[rand][2], float(random(360)), 0, 0, level, 1, 1, NTEAM_MATWAR);
                    SetGVarInt("NPCMW", 1, npcid);
                    SetGVarInt("NPCMWID", id, npcid);
					if(i == 0) holder = npcid;
		        }
		        FCNPC_GetPosition(holder, MatWar[id][mwX], MatWar[id][mwY], MatWar[id][mwZ]);
		        MatWar[id][mwX] = MatWar_Drop[rand][0],
		        MatWar[id][mwY] = MatWar_Drop[rand][1],
		        MatWar[id][mwZ] = MatWar_Drop[rand][2];
		        MatWar[id][mwHolder] = holder;

		        format(string, sizeof(string), ""#TEXT_WHITE"新的货物战争开始了,争夺目标为:装着%d个%s的货物正在一帮混混身上,使用手机连络联合物流以取得位置", MatWar[id][mwMatAmount], ItemsList_USE[MatWar[id][mwMatID]][iuName]);
	        }
	    }
	    if(fordept > 0) SetGVarInt("MWForDept", fordept, id);
	    SendMatWarMessage(COLOR_WHITE, string);
	}
	return id;
}

PUBLIC:MatBattleDrop(id)
{
    if(MatWar[id][mwStatus] == 1)
	{
	    MatWar[id][mwStatus] = 2;
	    MatWar[id][mwTimer] = 600;
	    MatWar[id][mwHolder] = -1;
	    CreateAirDrop(ITEM_MW, MatWar[id][mwMatID], MatWar[id][mwMatAmount], MatWar_Drop[MatWar[id][mwSpotID]][0], MatWar_Drop[MatWar[id][mwSpotID]][1], MatWar_Drop[MatWar[id][mwSpotID]][2]+25.0, 0, 3.0, 1, id);
	    DestroyDynamicObject(MatWar[id][mwObject]);
	}
}

PUBLIC:EndMatWar(id)
{
	new i, j;
	if(MatWar[id][mwStatus] > 0)
	{
		MatWar[id][mwStatus] =
		MatWar[id][mwType] =
		MatWar[id][mwSpotID] =
		MatWar[id][mwMatID] =
		MatWar[id][mwMatAmount] =
		MatWar[id][mwTimer] = 0;
		MatWar[id][mwHolder] = -1;
		MatWar[id][mwX] =
		MatWar[id][mwY] =
		MatWar[id][mwZ] = 0.0;
	}
	for(i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
	    if(VehData[i][vType] != VTYPE_MW) continue;
	    if(GetGVarInt("VehMW", i) == id)
	    {
	        DeleteGVar("VehMW", i);
	        DeleteGVar("VehMWLoaded", i);
	        DeleteVehicle(i);
	    }
	}
	for(i = 0, j = MAX_DROPS; i < j ; i++)
    {
        if(DropItem[i][idCreated] == 0) continue;
        if(DropItem[i][idType] == ITEM_MW && DropItem[i][idMatWar] == id)
        {
	        DeleteDropItem(i);
	    }
    }
    ForEachNPC(n)
	{
		if(GetGVarInt("NPCMW", n) == 1 && GetGVarInt("NPCMWID", n) == id)
        {
	        DestroyNPC(n);
	    }
	}
    ForEachPlayer(p)
	{
		if(GetGVarInt("PlayerMW", p) == 1 && GetGVarInt("PlayerMWID", p) == id)
        {
	        DeleteGVar("PlayerMW", p);
	        DeleteGVar("PlayerMWID", p);
	    }
	}
    DeleteGVar("MWForDept", id);
}

stock SendMatWarMessage(color, const string[])
{
    ForEachPlayer(i)
	{
	    if(PlayerData[i][pCompany] != -1 || PlayerData[i][pGang] != -1 || PlayerData[i][pDepartment] > 0)
	    {
	        SendClientMessage(i, color, string);
	    }
	}
}

stock PlayerDropMatWar(playerid)
{
    new mwid = GetGVarInt("PlayerMWID", playerid), Float:px, Float:py, Float:pz, pworld;
    if(MatWar[mwid][mwStatus] > 0)
    {
		GetPlayerPos(playerid, px, py, pz);
		pworld = GetPlayerVirtualWorld(playerid);
		MatWar[mwid][mwHolder] = -1,
		MatWar[mwid][mwStatus] = 2;
		MatWar[mwid][mwX] = px,
		MatWar[mwid][mwY] = py,
		MatWar[mwid][mwZ] = pz;
		CreateDropItem(ITEM_MW, MatWar[mwid][mwMatID], MatWar[mwid][mwMatAmount], px, py, pz, pworld, 1800, 0, 0, mwid);
	}
	DeleteGVar("PlayerMW", playerid);
	DeleteGVar("PlayerMWID", playerid);
	return 1;
}

stock NPCDropMatWar(npcid)
{
	new mwid = GetGVarInt("NPCMWID", npcid), Float:px, Float:py, Float:pz, pworld;
	FCNPC_GetPosition(npcid, px, py, pz);
	pworld = FCNPC_GetVirtualWorld(npcid);
	MatWar[mwid][mwHolder] = -1,
	MatWar[mwid][mwStatus] = 2;
	MatWar[mwid][mwX] = px,
	MatWar[mwid][mwY] = py,
	MatWar[mwid][mwZ] = pz;
	DeleteGVar("NPCMW", npcid);
	DeleteGVar("NPCMWID", npcid);
	return CreateDropItem(ITEM_MW, MatWar[mwid][mwMatID], MatWar[mwid][mwMatAmount], px, py, pz, pworld, 1800, 0, 0, mwid);
}

stock NPCMissionDrop(npcid)
{
	new mission = GetGVarInt("MSTargetNPC", npcid), Float:px, Float:py, Float:pz, pworld;
	FCNPC_GetPosition(npcid, px, py, pz);
	pworld = FCNPC_GetVirtualWorld(npcid);
	return CreateDropItem(ITEM_MS, mission, 1, px, py, pz, pworld, 1800, 0, 0);
}

stock EstateLoadMatWar(playerid, eid, mwid)
{
	new string[144];
	if(EstateData[eid][eOwnerType] == ESTATE_OWNER_COMPANY)
    {
        format(string, sizeof(string), "<<企业>> %s 取得了货物战争的货物 %s,并把货物存放在了地产 %s 内", PlayerData[playerid][pName], ItemsList_USE[MatWar[mwid][mwMatID]][iuName], EstateData[eid][eName]);
		SendCompanyMessage(EstateData[eid][eOwnerID], COLOR_BLUEGREEN, string);
	}
	else if(EstateData[eid][eOwnerType] == ESTATE_OWNER_GANG)
	{
		format(string, sizeof(string), "<<帮会>> %s 取得了货物战争的货物 %s,并把货物存放在了地产 %s 内", PlayerData[playerid][pName], ItemsList_USE[MatWar[mwid][mwMatID]][iuName], EstateData[eid][eName]);
		SendGangMessage(EstateData[eid][eOwnerID], COLOR_FADERED, string);
	}
	GiveEstateItem(eid, PlayerData[playerid][pID], ITEM_USE, MatWar[mwid][mwMatID], MatWar[mwid][mwMatAmount]);
	GivePlayerExp(playerid, 2000, EXP_MW);
	ShowPTD(playerid, 4, 1);
	EndMatWar(mwid);
}

stock DeptLoadMatWar(playerid, dpid, mwid)
{
	new string[144];
	format(string, sizeof(string), "<<部门>> %s 取得了货物战争的货物 %s,并把货物存放在部门的储物间内", PlayerData[playerid][pName], ItemsList_USE[MatWar[mwid][mwMatID]][iuName]);
	SendDeptMessage(dpid, COLOR_FADEBLUE, string);
	GiveDeptItem(dpid, ITEM_USE, MatWar[mwid][mwMatID], MatWar[mwid][mwMatAmount]);
	GivePlayerExp(playerid, 2000, EXP_MW);
	if(dpid > 0 && GetGVarInt("MWForDept", mwid) == dpid)//成功运送专门给部门的货物将会让所有该部门成员获得奖励
	{
	    format(string, sizeof(string), ""#TEXT_WHITE"因为成功运送部门专属货物,所以所有在线成员获得经验值1500以及现金$2500的奖励");
	    ForEachPlayer(i)
		{
		    if(PlayerData[i][pDepartment] == GetGVarInt("MWForDept", mwid))
		    {
		        GivePlayerExp(i, 1500, EXP_MW);
		        GiveMoney(i, 2500);
				SendClientMessage(i, COLOR_WHITE, string);
		        Log(moneylog, INFO, "%s(%d)运送了部门专属货物而获得了奖金$%d", PlayerData[i][pName], PlayerData[i][pID], 2500);
		    }
		}
	}
	ShowPTD(playerid, 4, 1);
	EndMatWar(mwid);
}

stock PlayerTraceMatWar(playerid, mwid)
{
	new string[32];
	if(MatWar[mwid][mwStatus] > 0)
	{
	    new Float:mx, Float:my, Float:mz;
	    switch(MatWar[mwid][mwType])
	    {
	        case MW_VEH:
	        {
	            GetVehiclePos(MatWar[mwid][mwHolder], mx, my, mz);
		        SetPlayerMapIcon(playerid, 96, mx, my, mz, 0, COLOR_BROWN, MAPICON_GLOBAL);
		        format(string, sizeof(string), "~w~剩余时间:%d", MatWar[mwid][mwTimer]);
		        GameTextForPlayer(playerid, string, 1000, 4);
	        }
	        case MW_DROP:
	        {
	            if(MatWar[mwid][mwStatus] == 3)
	            {
		            GetPlayerPos(MatWar[mwid][mwHolder], mx, my, mz);
		            SetPlayerMapIcon(playerid, 96, mx, my, mz, 0, COLOR_BROWN, MAPICON_GLOBAL);
		        }
		        else
		        {
		            SetPlayerMapIcon(playerid, 96, MatWar[mwid][mwX], MatWar[mwid][mwY], MatWar[mwid][mwZ], 0, COLOR_BROWN, MAPICON_GLOBAL);
		        }
		        format(string, sizeof(string), "~w~剩余时间:%d", MatWar[mwid][mwTimer]);
	            GameTextForPlayer(playerid, string, 1000, 4);
	        }
	        case MW_NPC:
	        {
	            if(MatWar[mwid][mwStatus] == 3)
	            {
		            GetPlayerPos(MatWar[mwid][mwHolder], mx, my, mz);
		            SetPlayerMapIcon(playerid, 96, mx, my, mz, 0, COLOR_BROWN, MAPICON_GLOBAL);
		        }
		        else if(MatWar[mwid][mwStatus] == 1)
		        {
		            FCNPC_GetPosition(MatWar[mwid][mwHolder], mx, my, mz);
		            SetPlayerMapIcon(playerid, 96, mx, my, mz, 0, COLOR_BROWN, MAPICON_GLOBAL);
		        }
		        else
		        {
		            SetPlayerMapIcon(playerid, 96, MatWar[mwid][mwX], MatWar[mwid][mwY], MatWar[mwid][mwZ], 0, COLOR_BROWN, MAPICON_GLOBAL);
		        }
		        format(string, sizeof(string), "~w~剩余时间:%d", MatWar[mwid][mwTimer]);
	            GameTextForPlayer(playerid, string, 1000, 4);
	        }
	    }
	}
	else
	{
		DeleteGVar("PlayerTraceMW", playerid);
		RemovePlayerMapIcon(playerid, 96);
	}
}

stock PlayerTiePlayer(issuerid, playerid)
{
    new playername[MAX_PLAYER_NAME], issuer[MAX_PLAYER_NAME], string[144];
    GetPlayerName(issuerid, issuer, MAX_PLAYER_NAME);
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);
    //TogglePlayerControllableEx(playerid, false);
    SetGVarInt("Tied", 25, playerid);
    DeleteGVar("TiePrep", issuerid);
    format(string, sizeof(string), "** %s 使用绳子束缚住了 %s **", issuer, playername);
    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
    format(string, sizeof(string), ""#TEXT_WHITE"你束缚了 %s ,该玩家现在无法使用武器", playername);
	SendClientMessage(issuerid, COLOR_WHITE, string);
    format(string, sizeof(string), ""#TEXT_WHITE"你被%s束缚了,无法使用武器,连点Y键尝试挣脱", issuer);
    SendClientMessage(playerid, COLOR_WHITE, string);
}

stock PlayerCuffPlayer(issuerid, playerid)
{
    new playername[MAX_PLAYER_NAME], issuer[MAX_PLAYER_NAME], string[144];
    GetPlayerName(issuerid, issuer, MAX_PLAYER_NAME);
    GetPlayerName(playerid, playername, MAX_PLAYER_NAME);
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);
    TogglePlayerControllableEx(playerid, false);
    SetGVarInt("Cuffed", 1, playerid);
    DeleteGVar("Surr", playerid);

    format(string, sizeof(string), "** %s 将%s上铐了 **", issuer, playername);
    SendRangeMessage(20.0, playerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);

    format(string, sizeof(string), ""#TEXT_WHITE"你被%s上铐了,无法移动", issuer);
    SendClientMessage(playerid, COLOR_WHITE, string);

    if(PlayerData[playerid][pWanted] > 0)
	{
	    SendClientMessage(playerid, COLOR_FADERED, ""#TEXT_WHITE"注意: 如果你在被通缉期间被上铐时擅自离线,那你下次上线时将会直接入狱");
		SendClientMessage(playerid, COLOR_WHITE, string);
		format(string, sizeof(string), ""#TEXT_WHITE"你将通缉犯 %s 上铐了,请在警车上打开载具面板,选择警车选项将其押上车,并将其送至州立监狱服刑", playername);
		SetGVarInt("Arrested", 1, playerid);
		SetPlayerGPS(issuerid, -23.5938,340.2398,6.2882);
	}
	else format(string, sizeof(string), ""#TEXT_WHITE"你将 %s 上铐了,该玩家现在已经被限制行动", playername);
	SendClientMessage(issuerid, COLOR_WHITE, string);
}

stock SetPlayerEnterRCVehicle(playerid, type)
{
	new Float:px, Float:py, Float:pz, Float:pangle, rcveh, clone;
	GetPlayerPos(playerid, px, py, pz);
	GetPlayerFacingAngle(playerid, pangle);

	clone = _CreateDynamicActor(PlayerData[playerid][pSkin], px, py, pz, pangle);
	SetDynamicActorInvulnerable(clone, false);
	SetDynamicActorHealth(clone, GetPlayerHealth_Fix(playerid) + GetPlayerArmour_Fix(playerid));
	ApplyDynamicActorAnimation(clone, "bomber", "bom_plant_loop", 4.1, 1, 0, 0, 0, 0);
	SetGVarInt("UsingClone", 1, playerid);
	SetGVarInt("Clone", clone, playerid);
	SetGVarInt("Cloning", 1, clone);
	SetGVarInt("ClonePlayer", playerid, clone);
	SetGVarFloat("RCX", px, playerid),
	SetGVarFloat("RCY", py, playerid),
	SetGVarFloat("RCZ", pz, playerid),
	SetGVarFloat("RCA", pangle, playerid);

	GetXYInFrontOfPlayer(playerid, px, py, 3.5);
	SetPlayerSkin_Fix(playerid, 25039);//让玩家真身隐形
	switch(type)
	{
    	case 1: rcveh = CreateVehicleEx(465, px, py, pz+1.0, pangle, 1, 1, VTYPE_RC, 0);//Chopper
    	case 2: rcveh = CreateVehicleEx(441, px, py, pz+1.0, pangle, 1, 1, VTYPE_RC, 0);//Car
    	case 3: rcveh = CreateVehicleEx(464, px, py, pz+1.0, pangle, 1, 1, VTYPE_RC, 0);//Plane
    	case 4: rcveh = CreateVehicleEx(564, px, py, pz+1.0, pangle, 1, 1, VTYPE_RC, 0);//Tank
    	case 5: rcveh = CreateVehicleEx(501, px, py, pz+1.0, pangle, 1, 1, VTYPE_RC, 0);//Camera(Chopper2)
    }
    PutPlayerInVehicle_Fix(playerid, rcveh, 0);
    SetGVarInt("UsingRC", type, playerid);
    SetGVarInt("RCOwner", playerid, rcveh);
    SetGVarInt("RCVeh", rcveh, playerid);
}

stock SetPlayerExitRCVehicle(playerid)
{
	new rcveh, Float:px, Float:py, Float:pz, Float:pangle;
	if(GetGVarInt("UsingRC", playerid) > 0)
	{
	    rcveh = GetGVarInt("RCVeh", playerid);
	    px = GetGVarFloat("RCX", playerid),
	    py = GetGVarFloat("RCY", playerid),
	    pz = GetGVarFloat("RCZ", playerid),
	    pangle = GetGVarFloat("RCA", playerid);
		if(GetGVarInt("UsingClone", playerid) == 1)
		{
			new clone = GetGVarInt("Clone", playerid);
			DeleteGVar("UsingClone", playerid);
			DeleteGVar("Cloning", clone);
			DestroyDynamicActor(clone);
		}
		if(GetGVarInt("Spawned", playerid) == 1)
		{
			if(GetPlayerVehicleID(playerid) == rcveh)
			{
				SetPlayerPos_Fix(playerid, px, py, pz);
				SetPlayerFacingAngle(playerid, pangle);
			}
			SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
		}
	    DeleteVehicle(rcveh);
	    DeleteGVar("RCVeh", playerid);
	    DeleteGVar("RCOwner", playerid);
	    DeleteGVar("UsingRC", playerid);
    }
}

stock GetRadioListeners(comid)
{
	new count;
	ForEachPlayer(i)
	{
	    if(GetGVarInt("UsingRadio", i) == 0) continue;
	    if(GetGVarInt("PRadioID", i) == comid)
	    {
	        count++;
	    }
	}
	return count;
}

stock SendRadioMessage(comid, color, const text[])
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("UsingRadio", i) == 0) continue;
	    if(GetGVarInt("PRadioID", i) == comid)
	    {
	        SendClientMessage(i, color, text);
	    }
	}
}

stock PlayRadioMusic(comid, url[])
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("UsingRadio", i) == 0) continue;
	    if(GetGVarInt("PRadioID", i) == comid)
	    {
	        StopAudioStreamForPlayer(i);
	        PlayAudioStreamForPlayer(i, url);
	    }
	}
}

stock StopRadioMusic(comid)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("UsingRadio", i) == 0) continue;
	    if(GetGVarInt("PRadioID", i) == comid)
	    {
	        StopAudioStreamForPlayer(i);
	    }
	}
}

stock StopRadioAir(comid)
{
    CompanyData[comid][comRadioAir] =
	CompanyData[comid][comRadioTrack] = 0;
	StopRadioMusic(comid);
}

stock PlayerTuneToRadio(playerid, comid)
{
	if(GetGVarInt("UsingRadio", playerid) == 0)
	{
		static url[1024], string[144], trackid;
	    SetGVarInt("UsingRadio", 1, playerid);
		SetGVarInt("PRadioID", comid, playerid);
		if(GetGVarInt("RadioPlaying", comid) > 0)
		{
			GetGVarString("RadioTURL", url, sizeof(url), comid);
			PlayAudioStreamForPlayer(playerid, url);
		}
		else if(CompanyData[comid][comRadioAir] > 0)
		{
			trackid = CompanyData[comid][comRadioTrack];
			switch(RadioTrack[comid][trackid][rdType])
			{
				case RADIO_MUSIC:
				{
					format(string, sizeof(string), "<<%s>> %s", CompanyData[comid][comRadioName], RadioTrack[comid][trackid][rdText]);
					SendClientMessage(playerid, COLOR_BROWN, string);
					PlayAudioStreamForPlayer(playerid, RadioTrack[comid][trackid][rdURL]);
				}
				case RADIO_TEXT:
				{
				    format(string, sizeof(string), "<<%s>> %s", CompanyData[comid][comRadioName], RadioTrack[comid][trackid][rdText]);
					SendClientMessage(playerid, COLOR_BROWN, string);
				}
			}
		}
	}
}

stock PlayerTurnOffRadio(playerid)
{
    DeleteGVar("UsingRadio", playerid);
    SetGVarInt("PRadioID", -1, playerid);
    StopAudioStreamForPlayer(playerid);
}

stock SetTVOnAir(comid, filmer)
{
    SetGVarInt("TVAir", 1, comid);
    SetGVarInt("Filmer", filmer, comid);
    SetTVAudienceCamera(comid);
}

stock SetTVOffAir(comid)
{
	DeleteGVar("TVAir", comid);
	SetGVarInt("Filmer", -1, comid);
	SetTVAudienceCamera(comid);
}

stock SetPlayerTurnOnTV(playerid, channel)
{
    new Float:tmpX, Float:tmpY, Float:tmpZ, tmpI, tmpW;
    if(GetGVarInt("WatchTV", playerid) == 0)
    {
		SetGVarInt("WatchTV", 1, playerid);
		SetGVarInt("TVChannel", channel, playerid);
		GetPlayerPos(playerid, tmpX, tmpY, tmpZ);
		tmpI = GetPlayerInterior(playerid);
		tmpW = GetPlayerVirtualWorld(playerid);
		SetGVarFloat("TVX", tmpX, playerid),
		SetGVarFloat("TVY", tmpY, playerid),
		SetGVarFloat("TVZ", tmpZ, playerid),
		SetGVarInt("TVI", tmpI, playerid),
		SetGVarInt("TVW", tmpW, playerid);
		SaveWeaponData(playerid);
		TogglePlayerSpectating(playerid, true);
		TogglePlayerControllableEx(playerid, 0);
	}
}

stock SetPlayerWatchPlayer(playerid, watchid)
{
    new Float:tmpX, Float:tmpY, Float:tmpZ, tmpI, tmpW;
    if(GetGVarInt("WatchTV", playerid) == 0)
    {
		SetGVarInt("WatchTV", 3, playerid);
		SetGVarInt("TVPlayer", watchid, playerid);
		GetPlayerPos(playerid, tmpX, tmpY, tmpZ);
		tmpI = GetPlayerInterior(playerid);
		tmpW = GetPlayerVirtualWorld(playerid);
		SetGVarFloat("TVX", tmpX, playerid),
		SetGVarFloat("TVY", tmpY, playerid),
		SetGVarFloat("TVZ", tmpZ, playerid),
		SetGVarInt("TVI", tmpI, playerid),
		SetGVarInt("TVW", tmpW, playerid);
		SaveWeaponData(playerid);
		TogglePlayerSpectating(playerid, true);
		TogglePlayerControllableEx(playerid, 0);
	}
}

stock PlayerWatchingPlayer(playerid, watchid)
{
	new string[64];
	if(GetGVarInt("Logged", watchid) == 0) TogglePlayerSpectating(playerid, false);
	else
	{
		format(string, sizeof(string), "~w~%s(%d)\n血量: %.1f 护甲:%.1f", PlayerData[watchid][pName], watchid, GetPlayerHealth_Fix(watchid), GetPlayerArmour_Fix(watchid));
		GameTextForPlayer(playerid, string, 1000, 4);
		SetPlayerInterior(playerid, GetPlayerInterior(watchid));
		SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(watchid));
		switch(GetPlayerState(watchid))
		{
		    case PLAYER_STATE_DRIVER, PLAYER_STATE_PASSENGER:
		    {
		        PlayerSpectateVehicle(playerid, GetPlayerVehicleID(watchid), SPECTATE_MODE_NORMAL);
		    }
		    default:
		    {
		        PlayerSpectatePlayer(playerid, watchid, SPECTATE_MODE_NORMAL);
		    }
		}
	}
}

stock SetPlayerSwitchTVChannel(playerid, channel)
{
	new camera, string[32],
	filmer = GetGVarInt("Filmer", channel);
	if(filmer == -1 || GetGVarInt("Filming", filmer) == CAMERA_OFF)
	{
	    TextDrawShowForPlayer(playerid, Black);
	    GameTextForPlayer(playerid, "~w~无信号", 5000, 3);
	}
	else
	{
	    TextDrawHideForPlayer(playerid, Black);
		format(string, sizeof(string), "~y~频道.%d", channel);
		GameTextForPlayer(playerid, string, 5000, 1);
		switch(GetGVarInt("Filming", filmer))
		{
		    case CAMERA_VEHICLE:
		    {
		        SetPlayerInterior(playerid, GetPlayerInterior(filmer));
				SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(filmer));
				camera = GetPlayerVehicleID(filmer);
			    PlayerSpectateVehicle(playerid, camera, SPECTATE_MODE_NORMAL);
			}
			case CAMERA_PLAYER:
			{
			    SetPlayerInterior(playerid, GetPlayerInterior(filmer));
				SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(filmer));
			    PlayerSpectatePlayer(playerid, filmer, SPECTATE_MODE_NORMAL);
			}
			case CAMERA_SET:
			{
			    new
			    Float:vx = GetGVarFloat("CameraX", filmer),
				Float:vy = GetGVarFloat("CameraY", filmer),
				Float:vz = GetGVarFloat("CameraZ", filmer),
				Float:vx2 = GetGVarFloat("CLookX", filmer),
				Float:vy2 = GetGVarFloat("CLookY", filmer),
				Float:vz2 = GetGVarFloat("CLookZ", filmer),
				vint = GetGVarInt("CameraI", filmer),
				vw = GetGVarInt("CameraW", playerid);

				SetPlayerInterior(playerid, vint);
				SetPlayerVirtualWorld(playerid, vw);
				SetPlayerCameraPos(playerid, vx, vy, vz);
				SetPlayerCameraLookAt(playerid, vx2, vy2, vz2);
			}
		}
	}
}


stock SetTVAudienceCamera(comid)
{
	ForEachPlayer(i)
	{
	    if(GetGVarInt("WatchTV", i) == 0) continue;
	    if(GetGVarInt("TVChannel", i) == comid)
	    {
	        SetPlayerSwitchTVChannel(i, comid);
	    }
	}
}

stock PlayerStartFilming(playerid, type=CAMERA_PLAYER)
{
    new
	comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
	SetGVarInt("Filming", type, playerid);
	if(GetGVarInt("Filmer", comid) == playerid)
	{
	    SetTVAudienceCamera(comid);
	}
}

stock PlayerStopFilming(playerid)
{
	new string[144],
	comid = CompanySqlIDToID(PlayerData[playerid][pCompany]);
    SetCameraBehindPlayer(playerid);
	DeleteGVar("Filming", playerid);
	if(GetGVarInt("Filmer", comid) == playerid)
	{
	    SetTVAudienceCamera(comid);
	    format(string, sizeof(string), "<<企业>> %s中断了摄影,目前电视频道没有画面,请切换摄影画面至其他摄影机", PlayerData[playerid][pName]);
		SendCompanyMessage(CompanyData[comid][comID], COLOR_BLUEGREEN, string);
	}
}

stock GetTVAudiences(comid)
{
	new count;
	ForEachPlayer(i)
	{
	    if(GetGVarInt("WatchTV", i) == 0) continue;
	    if(GetGVarInt("TVChannel", i) == comid)
	    {
	        count++;
	    }
	}
	return count;
}

stock GivePlayerArmourSuit(playerid, type)
{
	switch(type)
	{
	    case ARMOUR_JUGGER://主宰者重装
	    {
	        SetPlayerSkin_Fix(playerid, 25058);
	        if(IsPlayerNPC(playerid)) FCNPC_SetArmour(playerid, 1000.0);
			else SetPlayerArmour_Fix(playerid, 1000.0);
	    }
		case ARMOUR_BOPS://黑甲重装
	    {
	        SetPlayerSkin_Fix(playerid, 25103);
	        if(IsPlayerNPC(playerid)) FCNPC_SetArmour(playerid, 400.0);
			else SetPlayerArmour_Fix(playerid, 400.0);
	    }
	}
	SetGVarInt("ArmourSuit", type, playerid);
}

stock RemovePlayerArmourSuit(playerid)
{
	DeleteGVar("ArmourSuit", playerid);
	PlayerData[playerid][pArmour] = 0.0;
	if(GetGVarInt("Spawned", playerid) == 1)
	{
		SetPlayerArmour_Fix(playerid, 0.0);
		SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
	}
}

stock IsPlayerUsingExplosiveShell(playerid, weaponid)
{
	new check;
	switch(weaponid)
	{
	    case 24: if(GetGVarInt("ExShellDEA", playerid) > 0) check = 1;
	    case 27: if(GetGVarInt("ExShellCShot", playerid) > 0) check = 1;
	    case 34: if(GetGVarInt("ExShellSnipe", playerid) > 0) check = 1;
	    case 38: if(GetGVarInt("ExShellMini", playerid) > 0) check = 1;
	}
	return check;
}

stock GivePlayerExplosiveShell(playerid, weapontype, amount)
{
	switch(weapontype)
	{
	    case 24:
	    {
	        SetGVarInt("ExShellDEA", GetGVarInt("ExShellDEA", playerid)+amount, playerid);
	        GivePlayerWeapon(playerid, 24, amount);
	    }
	    case 27:
	    {
	        SetGVarInt("ExShellCShot", GetGVarInt("ExShellCShot", playerid)+amount, playerid);
	        GivePlayerWeapon(playerid, 27, amount);
	    }
	    case 34:
	    {
	        SetGVarInt("ExShellSnipe", GetGVarInt("ExShellCShot", playerid)+amount, playerid);
	        GivePlayerWeapon(playerid, 34, amount);
	    }
	    case 38:
	    {
	        SetGVarInt("ExShellMini", GetGVarInt("ExShellCShot", playerid)+amount, playerid);
	        GivePlayerWeapon(playerid, 38, amount);
	    }
	    default:{}
	}
}

stock ClearPlayerExplosiveShell(playerid)
{
    DeleteGVar("ExShellDEA", playerid);
    DeleteGVar("ExShellCShot", playerid);
    DeleteGVar("ExShellSnipe", playerid);
    DeleteGVar("ExShellMini", playerid);
}

stock GetStartedEvent()
{
	new i, j, count;
	for(i = count = 0, j = MAX_EVENTS; i < j; i++)
	{
	    if(Event[i][evStatus] == STATUS_FINISHED) continue;
	    count ++;
	}
	return count;
}

stock SendEventMessage(eventid, color, const string[])
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == eventid)
	    {
	    	SendClientMessage(i, color, string);
	    }
	}
}

stock SendEventTeamMessage(eventid, teamid, color, const string[])
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == eventid && GetGVarInt("EventTeam", i) == teamid)
	    {
	    	SendClientMessage(i, color, string);
	    }
	}
}

stock GetEventTypeName(id)
{
	new restr[32];
    switch(Event[id][evType])
	{
		case EVENT_DM: format(restr, 32, "单人死斗");
		case EVENT_VS: format(restr, 32, "单人对决");
		case EVENT_TDM: format(restr, 32, "团队死斗");
		case EVENT_TVS: format(restr, 32, "团队对决");
		case EVENT_SDM: format(restr, 32, "小队死斗");
		case EVENT_SVS: format(restr, 32, "小队对决");
		case EVENT_SSUR: format(restr, 32, "小队生存");
	}
	return restr;
}

stock GetEventType2Name(id)
{
	new restr[32];
    switch(Event[id][evType])
	{
		case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS: format(restr, 32, "%s", SingleEventType[Event[id][evType2]][sevtName]);
		case EVENT_TDM, EVENT_TVS: format(restr, 32, "%s", TeamEventType[Event[id][evType2]][tevtName]);
		case EVENT_SURVIVE: format(restr, 32, "生存");
	}
	return restr;
}

stock GetEventMapName(id)
{
	new restr[32];
    switch(Event[id][evType])
	{
		case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS: format(restr, 32, "%s", SingleEventMap[Event[id][evMap]][sevmName]);
		case EVENT_TDM, EVENT_TVS: format(restr, 32, "%s", TeamEventMap[Event[id][evMap]][tevmName]);
		case EVENT_SURVIVE, EVENT_SSUR: format(restr, 32, "%s", SurviveEventMap[Event[id][evMap]][svevmName]);
	}
	return restr;
}

PUBLIC:StartEvent(type, type2, map, time, prize)
{
	new string[144], id, i, j;
	for(i = 0, j = MAX_EVENTS, id = -1; i < j; i++)
	{
	    if(Event[i][evStatus] == STATUS_FINISHED)
	    {
	        id = i;
	        break;
	    }
	}
	if(id != -1)
	{
	    Event[id][evStatus] = STATUS_WAITING,
	    Event[id][evType] = type,
	    Event[id][evType2] = type2,
	    Event[id][evMap] = map,
	    Event[id][evTime] = time,
	    Event[id][evPlayers] = 0,
	    Event[id][evPrize] = prize;
	    Event[id][evTimer] = 90;//等待开始倒数
		switch(type)
		{
		    case EVENT_DM:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的单人死斗活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_ORANGE"|地图为"#TEXT_FADEGREEN"%s"#TEXT_ORANGE",打开手机选择活动可以立即加入", SingleEventType[type2][sevtName], SingleEventMap[map][sevmName]);
		        SendClientMessageToAll(COLOR_ORANGE, string);
		    }
		    case EVENT_VS:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的单人对决活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_FADEYELLOW"|地图为"#TEXT_FADEGREEN"%s"#TEXT_FADEYELLOW",打开手机选择活动可以立即加入", SingleEventType[type2][sevtName], SingleEventMap[map][sevmName]);
		        SendClientMessageToAll(COLOR_FADEYELLOW, string);
		        SetGVarInt("EventHScore", 0, id);
		        SetGVarInt("EventHPlayer", INVALID_PLAYER_ID, id);
		    }
		    case EVENT_TDM:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的团队死斗活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_SKYBLUE"|地图为"#TEXT_FADEGREEN"%s"#TEXT_SKYBLUE",打开手机选择活动可以立即加入", TeamEventType[type2][tevtName], TeamEventMap[map][tevmName]);
		        SendClientMessageToAll(COLOR_SKYBLUE, string);
		        SetGVarInt("RedPlayers", 0, id);
		        SetGVarInt("BluePlayers", 0, id);
		    }
		    case EVENT_TVS:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的团队对决活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_FADEBLUE"|地图为"#TEXT_FADEGREEN"%s"#TEXT_FADEBLUE",打开手机选择活动可以立即加入", TeamEventType[type2][tevtName], TeamEventMap[map][tevmName]);
		        SendClientMessageToAll(COLOR_FADEBLUE, string);
		        SetGVarInt("RedScore", 0, id);
		        SetGVarInt("BlueScore", 0, id);
		        SetGVarInt("RedPlayers", 0, id);
		        SetGVarInt("BluePlayers", 0, id);
		    }
		    case EVENT_SURVIVE:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的生存战活动开始了,地图为"#TEXT_FADEGREEN"%s"#TEXT_VIOLET",打开手机的活动清单立即加入", SurviveEventMap[map][svevmName]);
		        SendClientMessageToAll(COLOR_VIOLET, string);
		        CreateEventDropItems(id);
		        Event[id][evZone] = GangZoneCreate(SurviveEventMap[map][svevmMinX], SurviveEventMap[map][svevmMinY], SurviveEventMap[map][svevmMaxX], SurviveEventMap[map][svevmMaxY]);
		        Event[id][evZone2] = GangZoneCreate(0.0, 0.0, 0.0, 0.0);
		        SetGVarFloat("EventZMinX", SurviveEventMap[map][svevmMinX], id),
		        SetGVarFloat("EventZMinY", SurviveEventMap[map][svevmMinY], id),
		        SetGVarFloat("EventZMaxX", SurviveEventMap[map][svevmMaxX], id),
		        SetGVarFloat("EventZMaxY", SurviveEventMap[map][svevmMaxY], id);
		        SetGVarInt("ZoneDCount", 0, id);
		    }
		    case EVENT_SSUR:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的小队生存战活动开始了,地图为"#TEXT_FADEGREEN"%s"#TEXT_VIOLET",打开手机的活动清单立即加入", SurviveEventMap[map][svevmName]);
		        SendClientMessageToAll(COLOR_VIOLET, string);
		        CreateEventDropItems(id);
		        Event[id][evZone] = GangZoneCreate(SurviveEventMap[map][svevmMinX], SurviveEventMap[map][svevmMinY], SurviveEventMap[map][svevmMaxX], SurviveEventMap[map][svevmMaxY]);
		        Event[id][evZone2] = GangZoneCreate(0.0, 0.0, 0.0, 0.0);
		        SetGVarFloat("EventZMinX", SurviveEventMap[map][svevmMinX], id),
		        SetGVarFloat("EventZMinY", SurviveEventMap[map][svevmMinY], id),
		        SetGVarFloat("EventZMaxX", SurviveEventMap[map][svevmMaxX], id),
		        SetGVarFloat("EventZMaxY", SurviveEventMap[map][svevmMaxY], id);
		        SetGVarInt("ZoneDCount", 0, id);
		    }
		    case EVENT_SDM:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的小队死斗活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_ORANGE"|地图为"#TEXT_FADEGREEN"%s"#TEXT_LIGHTORANGE",在个人菜单建立小队后打开手机选择活动可以立即加入", SingleEventType[type2][sevtName], SingleEventMap[map][sevmName]);
		        SendClientMessageToAll(COLOR_LIGHTORANGE, string);
		    }
		    case EVENT_SVS:
		    {
		        format(string, sizeof(string), "<<PvP活动>> 新的小队对决活动开始了,模式为"#TEXT_YELLOW"%s"#TEXT_FADEYELLOW"|地图为"#TEXT_FADEGREEN"%s"#TEXT_YELLOW",在个人菜单建立小队后打开手机选择活动可以立即加入", SingleEventType[type2][sevtName], SingleEventMap[map][sevmName]);
		        SendClientMessageToAll(COLOR_YELLOW, string);
		        SetGVarInt("EventHScore", 0, id);
		        SetGVarInt("EventHTeam", NO_TEAM, id);
		    }
		}
	}
}

stock EventStart(id)
{
	new string[144];
	if((Event[id][evType] == EVENT_SSUR || Event[id][evType] == EVENT_SDM || Event[id][evType] == EVENT_SVS) && GetEventTeams(id) < 2)
	{
	    EventEnd(id);
	    SendClientMessageToAll(COLOR_YELLOW, "<<PvP活动>> 新的PvP活动因为参加小队数量过少而自动结束了");
	}
	else if(Event[id][evPlayers] < 2)
	{
	    EventEnd(id);
	    SendClientMessageToAll(COLOR_YELLOW, "<<PvP活动>> 新的PvP活动因为参加人数过少而自动结束了");
	}
	else
	{
		Event[id][evStatus] = STATUS_STARTED;
		if(Event[id][evTime] > 0) Event[id][evTimer] = Event[id][evTime];
		if(Event[id][evType] == EVENT_SURVIVE || Event[id][evType] == EVENT_SSUR)
		{
			Event[id][evTimer2] = 300;
			Event[id][evTimer3] = 120;
		}
		ForEachPlayer(i)
		{
		    if(GetGVarInt("Eventing", i) == 0) continue;
		    if(GetGVarInt("EventID", i) == id)
		    {
		        switch(Event[id][evType])
		        {
		            case EVENT_DM, EVENT_TDM, EVENT_SDM:
		            {
		                format(string, sizeof(string), "<<PvP活动>> 活动已开始,目标是将敌人击杀并生存到最后!");
	    				SendClientMessage(i, COLOR_YELLOW, string);
	    			}
	    			case EVENT_VS, EVENT_TVS, EVENT_SVS:
		            {
		                format(string, sizeof(string), "<<PvP活动>> 活动已开始,目标是将敌人击杀为我方夺得最高分!");
	    				SendClientMessage(i, COLOR_YELLOW, string);
	    			}
	    			case EVENT_SURVIVE, EVENT_SSUR:
		            {
		                format(string, sizeof(string), "<<PvP活动>> 活动已开始,目标是在地图范围内空降,通过捡拾掉落物击杀对手生存到最后!");
	    				SendClientMessage(i, COLOR_YELLOW, string);
	    				SetPlayerInEventPos(i, id);
	    				if(ConfigData[i][cfNameTag] == 0)
						{
						    ShowNameTagForPlayer(i, false);
						}
	    			}
	    		}
		        TogglePlayerControllableEx(i, true);
		        UpdateDynamic3DTextLabelText(PlayerStatus[i], COLOR_YELLOW, " ");
		    }
		}
	}
}

stock EventEnd(id, sendprize=0)
{
	new string[144], winner, highest, j;
	if(Event[id][evStatus] > 0)
	{
		switch(Event[id][evType])
		{
		    case EVENT_VS:
			{
				winner = GetGVarInt("EventHPlayer", id);
			}
		    case EVENT_TVS:
			{
				if(GetGVarInt("BlueScore", id) > GetGVarInt("RedScore", id)) winner = EVENT_TEAM_BLUE;
				else if(GetGVarInt("BlueScore", id) < GetGVarInt("RedScore", id)) winner = EVENT_TEAM_RED;
				else winner = -1;//平手
			}
			case EVENT_TDM:
			{
			    if(GetGVarInt("BluePlayers", id) > GetGVarInt("RedPlayers", id)) winner = EVENT_TEAM_BLUE;
				else if(GetGVarInt("BluePlayers", id) < GetGVarInt("RedPlayers", id)) winner = EVENT_TEAM_RED;
				else winner = -1;
			}
			case EVENT_SURVIVE, EVENT_SSUR:
			{
			    GangZoneDestroy(Event[id][evZone]);
			    GangZoneDestroy(Event[id][evZone2]);
			    DeleteAllEventDropItems(id);
			}
			case EVENT_SVS:
			{
			    for(j = highest = 0; j < 255; j++)
			    {
			        if(GetGVarInt("TeamScore", j) > highest && Team[j][tEventing] == 1)
			        {
			            if(Team[j][tEventID] == id) highest = GetGVarInt("TeamScore", j);
			        }
			    }
			}
		}

	    ForEachPlayer(i)
		{
		    if(GetGVarInt("Eventing", i) == 0) continue;
		    if(GetGVarInt("EventID", i) == id)
		    {
		        if(sendprize == 1)
		        {
		    		switch(Event[id][evType])
					{
					    case EVENT_VS://最高分玩家获胜
					    {
					        if(i == winner)
					        {
					            format(string, sizeof(string), "<<PvP活动>> 你于活动中胜出了!获得了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]);
					            GivePlayerExp(i, 1500, EXP_EVENT);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]);
					        }
					    }
					    case EVENT_TVS://最高分小队获胜
					    {
					        if(winner == -1)//平手
					        {
					            format(string, sizeof(string), "<<PvP活动>> 这场活动双方战成平手!平分了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]/2);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]/2);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]/2);
					            GivePlayerExp(i, 250, EXP_EVENT);
					        }
					        else if(GetGVarInt("EventTeam", i) == winner)
					        {
					            format(string, sizeof(string), "<<PvP活动>> 你的队伍于活动中胜出了!获得了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]);
					            GivePlayerExp(i, 750, EXP_EVENT);
					        }
					    }
					    case EVENT_DM, EVENT_SURVIVE, EVENT_SDM, EVENT_SSUR://所有生存玩家获胜
					    {
					        format(string, sizeof(string), "<<PvP活动>> 你于活动中生存了下来!获得了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]);
		    				SendClientMessage(i, COLOR_YELLOW, string);
					        GiveMoney(i, Event[id][evPrize]);
					        Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]);
					        GivePlayerExp(i, 1500, EXP_EVENT);
					    }
					    case EVENT_TDM://小队生存人数最多获胜
					    {
					        if(winner == -1)//平手
					        {
					            format(string, sizeof(string), "<<PvP活动>> 这场活动双方战成平手!平分了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]/2);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]/2);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]/2);
					            GivePlayerExp(i, 250, EXP_EVENT);
					        }
					        else if(GetGVarInt("EventTeam", i) == winner)
					        {
					            format(string, sizeof(string), "<<PvP活动>> 你的队伍于活动中胜出了!获得了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]);
					            GivePlayerExp(i, 750, EXP_EVENT);
					        }
					    }
					    case EVENT_SVS:
					    {
					        new teamid = GetPlayerTeam(i);
					        if(GetGVarInt("TeamScore", teamid) == highest)
					        {
					            format(string, sizeof(string), "<<PvP活动>> 你的小队于活动中获得最高分而胜出了!获得了奖金"#TEXT_FADEGREEN"$%d", Event[id][evPrize]);
		    					SendClientMessage(i, COLOR_YELLOW, string);
					            GiveMoney(i, Event[id][evPrize]);
					            Log(moneylog, INFO, "%s(%d)获得了活动奖金$%d", PlayerData[i][pName], PlayerData[i][pID], Event[id][evPrize]);
					            GivePlayerExp(i, 750, EXP_EVENT);
					        }
					    }
					}
				}
				SetPlayerLeaveEvent(i, id);
		        format(string, sizeof(string), "<<PvP活动>> 活动已结束,你将退出活动");
	    		SendClientMessage(i, COLOR_FADERED, string);
		    }
		}
	}
    Event[id][evStatus] =
	Event[id][evType] =
	Event[id][evType2] =
	Event[id][evMap] =
	Event[id][evTime] =
	Event[id][evPlayers] =
	Event[id][evPrize] =
	Event[id][evTimer] =
	Event[id][evTimer2] =
	Event[id][evTimer3] = 0;
	DeleteGVar("EventHScore", id);
	DeleteGVar("EventHPlayer", id);
	DeleteGVar("EventHTeam", id);
	DeleteGVar("RedScore", id);
	DeleteGVar("BlueScore", id);
	DeleteGVar("RedPlayers", id);
	DeleteGVar("BluePlayers", id);
}

stock SetPlayerJoinEvent(playerid, id, teamid=NO_TEAM)
{
    if(GetGVarInt("PlayerMW", playerid) == 1)
	{
	    ShowPTD(playerid, 4, 0);
	    PlayerDropMatWar(playerid);
	}
	SavePlayerDatas(playerid);

    SetGVarInt("Eventing", 1, playerid);
    SetGVarInt("EventID", id, playerid);
    SetGVarInt("EventScore", 0, playerid);
    SetGVarInt("EventStreak", 0, playerid);

    SetGVarInt("TempTeam", GetPlayerTeam(playerid), playerid);//保存玩家原本小队
    SetGVarInt("EventTeam", teamid, playerid);
    SetPlayerTeam(playerid, teamid);//保存后改用活动小队

    if(Event[id][evType] == EVENT_TDM || Event[id][evType] == EVENT_TVS)
    {
	    if(teamid == EVENT_TEAM_BLUE) SetGVarInt("BluePlayers", GetGVarInt("BluePlayers", id)+1, id);
	    else if(teamid == EVENT_TEAM_RED) SetGVarInt("RedPlayers", GetGVarInt("RedPlayers", id)+1, id);
	}
	else if(Event[id][evType] == EVENT_SDM || Event[id][evType] == EVENT_SVS || Event[id][evType] == EVENT_SSUR)
	{
	    if(Event[id][evStatus] < STATUS_STARTED) SetGVarInt("TeamScore", 0, teamid);
	    SetGVarInt("EventTPlayers", GetEventTeamMembers(id, teamid), teamid);
	    Team[teamid][tEventing] = 1;
	    Team[teamid][tEventID] = id;
	}
    Event[id][evPlayers] ++;
    SetPlayerInEventPos(playerid, id);
    SendClientMessage(playerid, COLOR_YELLOW, "** 顺利加入了活动,请等待倒数结束");
}

stock SetPlayerInEventPos(playerid, id)
{
	new string[144], rand,
	type2 = Event[id][evType2],
	map = Event[id][evMap],
	Float:randx = float(random(3)-random(3)),
	Float:randy = float(random(3)-random(3));
	ResetPlayerWeapons(playerid);
	SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);

	UpdatePlayerColor(playerid);
	SetPlayerSkin_Fix(playerid, PlayerData[playerid][pSkin]);
	UpdateGangZoneForPlayer(playerid);

	if(Event[id][evStatus] == STATUS_WAITING)
	{
		TogglePlayerControllableEx(playerid, false);
		UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_YELLOW, "等待活动开始");
	}
	else
	{
		TogglePlayerControllableEx(playerid, true);
		UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_YELLOW, " ");
	}

	switch(Event[id][evType])
	{
	    case EVENT_DM, EVENT_VS, EVENT_SDM, EVENT_SVS:
	    {
	        SetPlayerArmour_Fix(playerid, SingleEventType[type2][sevtArmour]);
	        GivePlayerWeapon(playerid, SingleEventType[type2][sevtWeapon1], SingleEventType[type2][sevtAmmo1]);
	        GivePlayerWeapon(playerid, SingleEventType[type2][sevtWeapon2], SingleEventType[type2][sevtAmmo2]);
	        GivePlayerWeapon(playerid, SingleEventType[type2][sevtWeapon3], SingleEventType[type2][sevtAmmo3]);
	        GivePlayerWeapon(playerid, SingleEventType[type2][sevtWeapon4], SingleEventType[type2][sevtAmmo4]);
	        GivePlayerWeapon(playerid, SingleEventType[type2][sevtWeapon5], SingleEventType[type2][sevtAmmo5]);
			GivePlayerExplosiveShell(playerid, SingleEventType[type2][sevtExShell1], SingleEventType[type2][sevtExAmmo1]);
			GivePlayerExplosiveShell(playerid, SingleEventType[type2][sevtExShell2], SingleEventType[type2][sevtExAmmo2]);
			GivePlayerArmourSuit(playerid, SingleEventType[type2][sevtArmourSuit]);
			SetPlayerInterior(playerid, SingleEventMap[map][sevmInt]);
			switch(map)
			{
			    case 0:
			    {
			        rand = random(sizeof(SEMap0Spawn));
			        SetPlayerPos_Fix(playerid, SEMap0Spawn[rand][0]+randx, SEMap0Spawn[rand][1]+randy, SEMap0Spawn[rand][2]);
			    }
			    case 1:
			    {
			        rand = random(sizeof(SEMap1Spawn));
			        SetPlayerPos_Fix(playerid, SEMap1Spawn[rand][0]+randx, SEMap1Spawn[rand][1]+randy, SEMap1Spawn[rand][2]);
			    }
			    case 2:
			    {
			        rand = random(sizeof(SEMap2Spawn));
			        SetPlayerPos_Fix(playerid, SEMap2Spawn[rand][0]+randx, SEMap2Spawn[rand][1]+randy, SEMap2Spawn[rand][2]);
			    }
			    case 3:
			    {
			        rand = random(sizeof(SEMap3Spawn));
			        SetPlayerPos_Fix(playerid, SEMap3Spawn[rand][0]+randx, SEMap3Spawn[rand][1]+randy, SEMap3Spawn[rand][2]);
			    }
			    case 4:
			    {
			        rand = random(sizeof(SEMap4Spawn));
			        SetPlayerPos_Fix(playerid, SEMap4Spawn[rand][0]+randx, SEMap4Spawn[rand][1]+randy, SEMap4Spawn[rand][2]);
			    }
			    case 5:
			    {
			        rand = random(sizeof(SEMap5Spawn));
			        SetPlayerPos_Fix(playerid, SEMap5Spawn[rand][0]+randx, SEMap5Spawn[rand][1]+randy, SEMap5Spawn[rand][2]);
			    }
			    case 6:
			    {
			        rand = random(sizeof(SEMap6Spawn));
			        SetPlayerPos_Fix(playerid, SEMap6Spawn[rand][0]+randx, SEMap6Spawn[rand][1]+randy, SEMap6Spawn[rand][2]);
			    }
			    case 7:
			    {
			        rand = random(sizeof(SEMap7Spawn));
			        SetPlayerPos_Fix(playerid, SEMap7Spawn[rand][0]+randx, SEMap7Spawn[rand][1]+randy, SEMap7Spawn[rand][2]);
			    }
			    case 8:
			    {
			        rand = random(sizeof(SEMap8Spawn));
			        SetPlayerPos_Fix(playerid, SEMap8Spawn[rand][0]+randx, SEMap8Spawn[rand][1]+randy, SEMap8Spawn[rand][2]);
			    }
			}
	    }
	    case EVENT_TDM, EVENT_TVS:
	    {
	        switch(GetGVarInt("EventTeam", playerid))
	        {
	            case EVENT_TEAM_BLUE:
	            {
	                SetPlayerArmour_Fix(playerid, TeamEventType[type2][tevtBlueArmour]);
		         	GivePlayerWeapon(playerid, TeamEventType[type2][tevtBlueWeapon1], TeamEventType[type2][tevtBlueAmmo1]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtBlueWeapon2], TeamEventType[type2][tevtBlueAmmo2]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtBlueWeapon3], TeamEventType[type2][tevtBlueAmmo3]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtBlueWeapon4], TeamEventType[type2][tevtBlueAmmo4]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtBlueWeapon5], TeamEventType[type2][tevtBlueAmmo5]);
					GivePlayerExplosiveShell(playerid, TeamEventType[type2][tevtBlueExShell1], TeamEventType[type2][tevtBlueExAmmo1]);
					GivePlayerExplosiveShell(playerid, TeamEventType[type2][tevtBlueExShell2], TeamEventType[type2][tevtBlueExAmmo2]);
					GivePlayerArmourSuit(playerid, TeamEventType[type2][tevtBlueArmourSuit]);
					SetPlayerInterior(playerid, TeamEventMap[map][tevmInt]);
					SetPlayerPos_Fix(playerid, TeamEventMap[map][tevmBX]+randx, TeamEventMap[map][tevmBY]+randy, TeamEventMap[map][tevmBZ]);
					SetPlayerFacingAngle(playerid, TeamEventMap[map][tevmBA]);
	            }
	            case EVENT_TEAM_RED:
	            {
	                SetPlayerArmour_Fix(playerid, TeamEventType[type2][tevtRedArmour]);
		         	GivePlayerWeapon(playerid, TeamEventType[type2][tevtRedWeapon1], TeamEventType[type2][tevtRedAmmo1]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtRedWeapon2], TeamEventType[type2][tevtRedAmmo2]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtRedWeapon3], TeamEventType[type2][tevtRedAmmo3]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtRedWeapon4], TeamEventType[type2][tevtRedAmmo4]);
			        GivePlayerWeapon(playerid, TeamEventType[type2][tevtRedWeapon5], TeamEventType[type2][tevtRedAmmo5]);
					GivePlayerExplosiveShell(playerid, TeamEventType[type2][tevtRedExShell1], TeamEventType[type2][tevtRedExAmmo1]);
					GivePlayerExplosiveShell(playerid, TeamEventType[type2][tevtRedExShell2], TeamEventType[type2][tevtRedExAmmo2]);
					GivePlayerArmourSuit(playerid, TeamEventType[type2][tevtRedArmourSuit]);
					SetPlayerInterior(playerid, TeamEventMap[map][tevmInt]);
					SetPlayerPos_Fix(playerid, TeamEventMap[map][tevmRX]+randx, TeamEventMap[map][tevmRY]+randy, TeamEventMap[map][tevmRZ]);
					SetPlayerFacingAngle(playerid, TeamEventMap[map][tevmRA]);
					if(type2 == 4 || type2 == 8)//红方变大脚
					{
					    SetPlayerSkin_Fix(playerid, AnimalsList[22][amlModel]);
      					SetGVarInt("PlayerAnimal", 22, playerid);
						SetPlayerHealth_Fix(playerid, 4000.0);
				        format(string, sizeof(string), "<<PvP活动>> 动物大变身!你变成了大脚怪,获得了野兽般的撕裂能力以及强大的生命力!");
			    		SendClientMessage(playerid, COLOR_PINKRED, string);
					}
				}
			}
	    }
	    case EVENT_SURVIVE, EVENT_SSUR:
	    {
	        if(Event[id][evStatus] == STATUS_WAITING) { }
			else
			{
			    new maxx, minx, maxy, miny, midx, midy;
				GangZoneShowForPlayer(playerid, Event[id][evZone], 0xFC000055);
				GangZoneShowForPlayer(playerid, Event[id][evZone2], 0xFFFFFF55);
				ClearPlayerItems(playerid);//清空玩家所有道具
				GivePlayerItem(playerid, ITEM_EQ, 4, 1);//给予手机
				SetPlayerArmour_Fix(playerid, 0.0);
				GivePlayerWeapon(playerid, 46, 1);
				//在范围内的随机坐标
				maxx = floatround(SurviveEventMap[map][svevmMaxX]), minx = floatround(SurviveEventMap[map][svevmMinX]),
				maxy = floatround(SurviveEventMap[map][svevmMaxY]), miny = floatround(SurviveEventMap[map][svevmMinY]);
				midx = minx + random(maxx - minx);
			    midy = miny + random(maxy - miny);
			    randx = float(midx), randy = float(midy);
				SetPlayerPos_Fix(playerid, randx, randy, SurviveEventMap[map][svevmHeight]);
				SetGVarInt("EventZoneDB", 0, playerid);
			}
	    }
	}
	SetPlayerVirtualWorld(playerid, 10000+id);
}

stock SetPlayerLeaveEvent(playerid, id)
{
	new
	teamid = GetGVarInt("EventTeam", playerid);
	if(Event[id][evType] == EVENT_SSUR || Event[id][evType] == EVENT_SDM || Event[id][evType] == EVENT_SVS)
	{
	    SetGVarInt("EventTPlayers", GetEventTeamMembers(id, teamid), teamid);
		if(GetGVarInt("EventTPlayers", teamid) < 1)
		{
		    Team[teamid][tEventing] =
			Team[teamid][tEventID] = 0;
		}
	}
	else if(Event[id][evType] == EVENT_TVS || Event[id][evType] == EVENT_TDM)
	{
	    if(teamid == EVENT_TEAM_BLUE) SetGVarInt("BluePlayers", GetGVarInt("BluePlayers", id)-1, id);
    	else if(teamid == EVENT_TEAM_RED) SetGVarInt("RedPlayers", GetGVarInt("RedPlayers", id)-1, id);
	}

	DeleteGVar("Eventing", playerid);
    DeleteGVar("EventScore", playerid);
    DeleteGVar("EventStreak", playerid);
    DeleteGVar("EventTeam", playerid);
    DeleteGVar("EvWounded", playerid);
    Event[id][evPlayers] --;

    if(Event[id][evStatus] == STATUS_STARTED)//活动开始后有人退出,且人数少于标准的话将会自动结束活动
    {
	    switch(Event[id][evType])
		{
			case EVENT_TDM, EVENT_TVS:
			{
				if(GetGVarInt("BluePlayers", id) < 1 || GetGVarInt("RedPlayers", id) < 1) EventEnd(id, 1);
			}
			case EVENT_DM, EVENT_VS, EVENT_SURVIVE:
			{
				if(Event[id][evPlayers] < 2) EventEnd(id, 1);
			}
			case EVENT_SSUR, EVENT_SDM, EVENT_SVS:
			{
				if(GetEventTeams(id) < 2) EventEnd(id, 1);
			}
		}
	}
    SetPlayerTeam(playerid, GetGVarInt("TempTeam", playerid));
	UpdatePlayerColor(playerid);
	ResetPlayerWeapons(playerid);
	GangZoneHideForPlayer(playerid, Event[id][evZone]);
	GangZoneHideForPlayer(playerid, Event[id][evZone2]);
	LoadPlayerItems(playerid, PlayerData[playerid][pID]);//读取回玩家的道具
	RemovePlayerArmourSuit(playerid);
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_YELLOW, " ");
	DisablePlayerGPS(playerid);
	if(ConfigData[playerid][cfNameTag] == 0) ShowNameTagForPlayer(playerid, false);

    SpawnPlayer(playerid);
}

stock EventSwitchAnimal(id)//动物大乱斗
{
	new string[144], rand;
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == id && GetGVarInt("Spawned", i) == 1)
	    {
	        rand = 1 + random(sizeof(AnimalsList)-1);
	        ClearAnimationsEx(i);
	        TogglePlayerControllableEx(i, true);
			SetPlayerSkin_Fix(i, AnimalsList[rand][amlModel]);
			SetGVarInt("PlayerAnimal", rand, i);
	        format(string, sizeof(string), "<<PvP活动>> 动物大变身!你变成了%s", AnimalsList[rand][amlName]);
    		SendClientMessage(i, COLOR_PINKRED, string);
	    }
	}
}

stock EventZoneDecrease_Prep(id)//生存战压缩活动范围预告
{
    new
	rand = random(6),
    Float:minx = GetGVarFloat("EventZMinX", id),
	Float:miny = GetGVarFloat("EventZMinY", id),
	Float:maxx = GetGVarFloat("EventZMaxX", id),
	Float:maxy = GetGVarFloat("EventZMaxY", id);

	new
	Float:xlen = maxx - minx, Float:ylen = maxy - miny;

    //6种缩减可能
    switch(rand)
    {
        case 0://向内缩减1/4
        {
            minx = minx + xlen*0.25,
            maxx = maxx - xlen*0.25,
            miny = miny + ylen*0.25,
            maxy = maxy - ylen*0.25;
        }
        case 1://向内缩减1/8
        {
            minx = minx + xlen*0.125,
            maxx = maxx - xlen*0.125,
            miny = miny + ylen*0.125,
            maxy = maxy - ylen*0.125;
        }
        case 2://向一个方向缩减1/4
        {
            minx = minx + xlen*0.25,
            miny = miny + ylen*0.25;
        }
        case 3:
        {
            maxx = maxx - xlen*0.25,
            miny = miny + ylen*0.25;
        }
        case 4:
        {
            minx = minx + xlen*0.25,
            maxy = maxy - ylen*0.25;
        }
        case 5:
        {
            maxx = maxx - xlen*0.25,
            maxy = maxy - ylen*0.25;
        }
    }
    SetGVarFloat("EventZMinX2", minx, id),
	SetGVarFloat("EventZMinY2", miny, id),
	SetGVarFloat("EventZMaxX2", maxx, id),
	SetGVarFloat("EventZMaxY2", maxy, id);
	GangZoneDestroy(Event[id][evZone2]);
	Event[id][evZone2] = GangZoneCreate(minx, miny, maxx, maxy);
	ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == id && GetGVarInt("Spawned", i) == 1)
	    {
	        GangZoneShowForPlayer(i, Event[id][evZone2], 0xFFFFFF55);
	    }
	}
}

stock EventZoneDecrease(id)//生存战压缩活动范围
{
    new Float:minx, Float:miny, Float:maxx, Float:maxy;

    SetGVarInt("ZoneDCount", GetGVarInt("ZoneDCount", id)+1, id);
    minx = GetGVarFloat("EventZMinX2", id),
	miny = GetGVarFloat("EventZMinY2", id),
	maxx = GetGVarFloat("EventZMaxX2", id),
	maxy = GetGVarFloat("EventZMaxY2", id);

	GangZoneDestroy(Event[id][evZone]);
	Event[id][evZone] = GangZoneCreate(minx, miny, maxx, maxy);
	SetGVarFloat("EventZMinX", minx, id),
	SetGVarFloat("EventZMinY", miny, id),
	SetGVarFloat("EventZMaxX", maxx, id),
	SetGVarFloat("EventZMaxY", maxy, id);

	ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == id && GetGVarInt("Spawned", i) == 1)
	    {
	        GangZoneShowForPlayer(i, Event[id][evZone], 0xFC000055);
	        GangZoneHideForPlayer(i, Event[id][evZone2]);
	        SendClientMessage(i, COLOR_VIOLET, "<<PvP活动>> 注意!"#TEXT_RED"活动范围"#TEXT_VIOLET"已经缩减!待在活动范围外的玩家生命将会持续减少");
	    }
	}
}

stock CreateEventDropItems(id)//生存战掉落物
{
    new maxx, minx, maxy, miny, rand, itemid, amount, randx, randy, Float:fx, Float:fy, Float:fz, i, j,
    map = Event[id][evMap];

    for(i = 0, j = 150; i < j; i++)//150个武器
    {
        rand = random(16);
        switch(rand)
        {
            case 0,1: {itemid = 4, amount = 1;}//小刀
            case 2: {itemid = 8, amount = 1;}//武士刀
            case 3: {itemid = 16, amount = 10;}//手榴弹
            case 4..6: {itemid = 22, amount = 51;}//9mm
            case 7: {itemid = 24, amount = 35;}//DEA
            case 8: {itemid = 25, amount = 30;}//霰弹枪
            case 9,10: {itemid = 28, amount = 150;}//乌兹
            case 11: {itemid = 29, amount = 120;}//MP5
            case 12: {itemid = 30, amount = 150;}//AK
            case 13: {itemid = 33, amount = 30;}//来福
            case 14: {itemid = 34, amount = 15;}//狙击
            case 15: {itemid = 17, amount = 10;}//烟雾弹
        }
        maxx = floatround(SurviveEventMap[map][svevmMaxX]), minx = floatround(SurviveEventMap[map][svevmMinX]),
		maxy = floatround(SurviveEventMap[map][svevmMaxY]), miny = floatround(SurviveEventMap[map][svevmMinY]);
		randx = minx + random(maxx - minx);
	    randy = miny + random(maxy - miny);
		fx = float(randx), fy = float(randy);
		CA_FindZ_For2DCoord(fx, fy, fz);

		CreateDropItem(ITEM_WEAPON, itemid, amount, fx, fy, fz+1.0, id+10000);
    }

    for(i = 0, j = 50; i < j; i++)//50个道具
    {
        rand = random(10);
        switch(rand)
        {
            case 0: {itemid = 26, amount = 1;}//吐司
            case 1: {itemid = 29, amount = 1;}//零食
            case 2: {itemid = 30, amount = 1;}
            case 3: {itemid = 31, amount = 1;}
            case 4: {itemid = 32, amount = 1;}//绷带
            case 5: {itemid = 119, amount = 1;}//香烟
            case 6: {itemid = 137, amount = 1;}//护甲
            case 7: {itemid = 138, amount = 1;}
            case 8: {itemid = 96, amount = 1;}//肾上腺素
            case 9: {itemid = 100, amount = 1;}//医疗包
        }
        maxx = floatround(SurviveEventMap[map][svevmMaxX]), minx = floatround(SurviveEventMap[map][svevmMinX]),
		maxy = floatround(SurviveEventMap[map][svevmMaxY]), miny = floatround(SurviveEventMap[map][svevmMinY]);
		randx = minx + random(maxx - minx);
	    randy = miny + random(maxy - miny);
		fx = float(randx), fy = float(randy);
		CA_FindZ_For2DCoord(fx, fy, fz);

		CreateDropItem(ITEM_USE, itemid, amount, fx, fy, fz+1.0, id+10000);
    }
}

stock DeleteAllEventDropItems(id)
{
    for(new i = 0, j = sizeof(DropItem); i < j; i++)
	{
	    if(DropItem[i][idCreated] == 1 && DropItem[i][idWorld] == id+10000)
	    {
	        DeleteDropItem(i);
	    }
	}
}

stock EventAirDrop(id)//生存战空投物
{
	new string[144], maxx, minx, maxy, miny, itemid, amount, randx, randy, Float:fx, Float:fy, Float:fz,
	rand = random(6);

    switch(rand)
    {
        case 0: {itemid = 9, amount = 1;}//电锯
        case 1: {itemid = 16, amount = 40;}//手榴弹
        case 2: {itemid = 26, amount = 100;}//短管霰弹枪
        case 3: {itemid = 27, amount = 100;}//战斗霰弹枪
        case 4: {itemid = 31, amount = 600;}//M4
        case 5: {itemid = 34, amount = 100;}//狙击枪
    }
	minx = floatround(GetGVarFloat("EventZMinX", id)),
	miny = floatround(GetGVarFloat("EventZMinY", id)),
	maxx = floatround(GetGVarFloat("EventZMaxX", id)),
	maxy = floatround(GetGVarFloat("EventZMaxY", id));
	randx = minx + random(maxx - minx);
	randy = miny + random(maxy - miny);
	fx = float(randx), fy = float(randy);
	CA_FindZ_For2DCoord(fx, fy, fz);
	CreateAirDrop(ITEM_WEAPON, itemid, amount, fx, fy, 250.0, id+10000);

	ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == id)
	    {
	        format(string, sizeof(string), "<<PvP活动>> 空投信息!在"#TEXT_LIGHTPURPLE"紫色点"#TEXT_YELLOW"的位置将有装着"#TEXT_WHITE"%d弹药的%s"#TEXT_YELLOW"空投物掉落!", amount, WeaponsList[itemid][wName]);
			SendClientMessage(i, COLOR_YELLOW, string);
	        SetPlayerGPS(i, fx, fy, fz);
	    }
	}
}

stock SendEventDeathMessage(id, killerid, killed, reason)
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == id)
	    {
	        SendDeathMessageToPlayer(i, killerid, killed, reason);
	    }
	}
}

stock SendArenaDeathMessage(id, killerid, killed, reason)
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("pArena", i) == id)
	    {
	        SendDeathMessageToPlayer(i, killerid, killed, reason);
	    }
	}
}

stock GetEventTeamMembers(eventid, teamid)
{
	new count;
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Eventing", i) == 0) continue;
	    if(GetGVarInt("EventID", i) == eventid)
	    {
	        if(GetGVarInt("EventTeam", i) == teamid) count++;
	    }
	}
	return count;
}

stock GetEventTeams(eventid)
{
	new i, j, count;
    for(i = count = 0, j = MAX_TEAMS; i < j; i++)
	{
	    if(Team[i][tEventing] == 0) continue;
	    if(Team[i][tEventID] == eventid)
	    {
	        count++;
	    }
	}
	return count;
}

stock SetPlayerGym(playerid, type, gym)
{
    if(GetGVarInt("FreeLifting", playerid) == 1 || GetGVarInt("BenchLifting", playerid) > 0 || GetGVarInt("GymBiking", playerid) > 0 || GetGVarInt("GymRunning", playerid) > 0) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你已经在健身了");
	switch(type)
	{
	    case GYM_LIFT:
	    {
	        if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
			if(PlayerData[playerid][pCash] < 250) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
			GiveMoney(playerid, -250);
			Log(moneylog, INFO, "%s(%d)花费了$%d开始使用健身器材", PlayerData[playerid][pName], PlayerData[playerid][pID], 250);
	        SetPlayerAttachedObject(playerid, 8, 3071, 6);
			SetPlayerAttachedObject(playerid, 7, 3071, 5);
			SetPlayerArmedWeapon(playerid, 0);
			SetGVarInt("FreeLifting", 1, playerid);
			SendClientMessage(playerid, COLOR_WHITE, "你开始了二头弯举,持续点击"#TEXT_YELLOW"鼠标右键"#TEXT_WHITE"蓄力集满右侧白色蓄力条,蓄力满将消耗体力1点举起哑铃~n~按F放下哑铃结束健身");
	    }
	    case GYM_BENCH:
	    {
	        if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
			if(PlayerData[playerid][pCash] < 600) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
			switch(gym)
			{
			    case 0:
			    {
			        if(GetGVarInt("LSBench") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用哑铃凳");
			        SetGVarInt("BenchLifting", 1, playerid);
				    SetPlayerPos_Fix(playerid, 773.0491, 1.4285, 1000.7209);
					SetPlayerFacingAngle(playerid, 269.2024);
					SetPlayerCameraPos(playerid, 772.2756,1.4101,1000.7214);
					SetPlayerCameraLookAt(playerid, 774.7215,1.4201,1000.7214);
				    SetGVarInt("LSBench", 1);
			    }
			    case 1:
			    {
			        if(GetGVarInt("SFBench") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用哑铃凳");
			        SetGVarInt("BenchLifting", 2, playerid);
				    SetPlayerPos_Fix(playerid, 766.3170, -47.3574, 1000.5859);
					SetPlayerFacingAngle(playerid, 179.2983);
					SetPlayerCameraPos(playerid, 766.2917,-46.9375,1000.5859);
					SetPlayerCameraLookAt(playerid, 766.2795,-49.4302,1000.5859);
				    SetGVarInt("SFBench", 1);
			    }
			    case 2:
			    {
					if(GetGVarInt("LVBench1") == 0)
					{
						SetGVarInt("BenchLifting", 3, playerid);
					    SetPlayerPos_Fix(playerid, 764.9001, -60.5580, 1000.6563);
						SetPlayerFacingAngle(playerid, 1.9500);
						SetPlayerCameraPos(playerid, 764.9258,-61.8893,1000.5781);
						SetPlayerCameraLookAt(playerid, 764.8952,-58.6026,1000.6563);
						SetGVarInt("LVBench1", 1);
					}
					else if(GetGVarInt("LVBench2") == 0)
					{
						SetGVarInt("BenchLifting", 4, playerid);
					    SetPlayerPos_Fix(playerid, 768.5630, -60.4019, 1000.6563);
						SetPlayerFacingAngle(playerid, 1.9500);
						SetPlayerCameraPos(playerid, 768.5526,-61.1401,1000.6563);
						SetPlayerCameraLookAt(playerid, 768.5505,-58.4465,1000.6563);
						SetGVarInt("LVBench2", 1);
					}
					else return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用哑铃凳");
				}
				case 3:
				{
				    if(GetGVarInt("BeachBench") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用哑铃凳");
				    SetGVarInt("BenchLifting", 5, playerid);
				    SetPlayerPos_Fix(playerid, 653.9530,-1865.0605,5.4609);
					SetPlayerFacingAngle(playerid, 1.4371);
					SetPlayerCameraPos(playerid, 653.9467,-1865.7877,5.4609);
					SetPlayerCameraLookAt(playerid, 653.9320,-1862.9795,5.4609);
				    SetGVarInt("BeachBench", 1);
				}
				case 4:
				{
				    if(GetGVarInt("PrisonBench1") == 0)
					{
						SetGVarInt("BenchLifting", 6, playerid);
					    SetPlayerPos_Fix(playerid, 18.6553,380.0300,6.5904);
						SetPlayerFacingAngle(playerid, 328.8162);
						SetPlayerCameraPos(playerid, 17.8681,378.6606,6.5904);
						SetPlayerCameraLookAt(playerid, 18.6553,380.0300,6.5904);
						SetGVarInt("PrisonBench1", 1);
					}
					else if(GetGVarInt("PrisonBench2") == 0)
					{
						SetGVarInt("BenchLifting", 7, playerid);
					    SetPlayerPos_Fix(playerid, 17.0934,380.8889,6.5904);
						SetPlayerFacingAngle(playerid, 328.6936);
						SetPlayerCameraPos(playerid, 17.0934,380.8889,6.5904);
						SetPlayerCameraLookAt(playerid, 17.0934,380.8889,6.5904);
						SetGVarInt("PrisonBench2", 1);
					}
					else return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用哑铃凳");
				}
			}
			TogglePlayerControllableEx(playerid, 0);
			ApplyAnimationEx(playerid, "benchpress", "gym_bp_geton", 1, 0, 0, 0, 1, 0, 1);
        	SetPlayerArmedWeapon(playerid, 0);
      		GiveMoney(playerid, -600);
      		Log(moneylog, INFO, "%s(%d)花费了$%d开始使用健身器材", PlayerData[playerid][pName], PlayerData[playerid][pID], 600);
			SendClientMessage(playerid, COLOR_ORANGE, "** 你开始了杠铃卧推,持续点击"#TEXT_WHITE"鼠标右键"#TEXT_ORANGE"蓄力集满左侧"#TEXT_WHITE"白色力量条");
			SendClientMessage(playerid, COLOR_ORANGE, "** 蓄力满将消耗体力2点举起哑铃");
			SendClientMessage(playerid, COLOR_WHITE, "** 按F放下哑铃结束健身");
			SendClientMessage(playerid, COLOR_WHITE, "你开始了杠铃卧推,持续点击"#TEXT_YELLOW"鼠标右键"#TEXT_WHITE"蓄力集满右侧白色蓄力条,蓄力满将消耗体力2点举起哑铃~n~按F放下哑铃结束健身");
			SetPlayerTimerEx(playerid, "GiveBenchObj", 5000, 0, "i", playerid);
	    }
	    case GYM_BIKE:
	    {
	        if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
			if(PlayerData[playerid][pCash] < 500) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
			switch(gym)
			{
			    case 0:
			    {
				    if(GetGVarInt("LSBike") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用飞轮");
				    SetGVarInt("GymBiking", 1, playerid);
				    SetPlayerPos_Fix(playerid, 772.672, 8.91406, 1000.0);
					SetPlayerFacingAngle(playerid, 90.0);
					SetPlayerCameraPos(playerid, 770.8517,8.0039,1000.7097);
					SetPlayerCameraLookAt(playerid, 773.1385,10.2943,1000.7035);
					SetGVarInt("LSBike", 1);
				}
				case 1:
				{
				    if(GetGVarInt("SFBike") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用飞轮");
				    SetGVarInt("GymBiking", 2, playerid);
				    SetPlayerPos_Fix(playerid, 769.7188,-48.4237,1000.5859);
					SetPlayerFacingAngle(playerid, 90.0);
					SetPlayerCameraPos(playerid, 766.8621,-46.0977,1000.5859);
					SetPlayerCameraLookAt(playerid, 770.5923,-48.7418,1000.5859);
				    SetGVarInt("SFBike", 1);
				}
				case 2:
				{
				    if(GetGVarInt("LVBike") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用飞轮");
				    SetGVarInt("GymBiking", 3, playerid);
				    SetPlayerPos_Fix(playerid, 775.1077,-69.1636,1000.6541);
					SetPlayerFacingAngle(playerid, 90.0);
					SetPlayerCameraPos(playerid, 773.0305,-67.6165,1000.6600);
					SetPlayerCameraLookAt(playerid, 775.7556,-69.2027,1000.6484);
				    SetGVarInt("LVBike", 1);
				}
				case 3:
				{
				    if(GetGVarInt("BeachBike") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用飞轮");
				    SetGVarInt("GymBiking", 4, playerid);
				    SetPlayerPos_Fix(playerid, 659.7982,-1863.6793,5.4609);
					SetPlayerFacingAngle(playerid, 180.0);
					SetPlayerCameraPos(playerid, 660.1327,-1866.3047,5.4609);
					SetPlayerCameraLookAt(playerid, 658.8248,-1862.6033,5.4609);
				    SetGVarInt("BeachBike", 1);
				}
				case 4:
				{
				    if(GetGVarInt("PrisonBike") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用飞轮");
				    SetGVarInt("GymBiking", 5, playerid);
				    SetPlayerPos_Fix(playerid, 20.4140,384.3386,6.5904);
					SetPlayerFacingAngle(playerid, 243.2687);
					SetPlayerCameraPos(playerid, 21.7829,381.0564,6.3713);
					SetPlayerCameraLookAt(playerid, 20.4140,384.3386,6.5904);
				    SetGVarInt("PrisonBike", 1);
				}
			}
			TogglePlayerControllableEx(playerid, 0);
			ApplyAnimation(playerid, "gymnasium", "gym_bike_geton", 1, 0, 0, 0, 1, 0, 1);
		    SetPlayerArmedWeapon(playerid, 0);
      		GiveMoney(playerid, -500);
      		Log(moneylog, INFO, "%s(%d)花费了$%d开始使用健身器材", PlayerData[playerid][pName], PlayerData[playerid][pID], 500);
			SendClientMessage(playerid, COLOR_WHITE, "你开始了踩飞轮,持续按"#TEXT_YELLOW"空白键"#TEXT_WHITE"蓄力集满右侧白色蓄力条~n~按F离开飞轮");
			//SetPlayerTimerEx(playerid, "GymBikeStart", 2000, 0, "i", playerid);
	    }
	    case GYM_RUN:
	    {
	        if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的手现在不能用");
			if(PlayerData[playerid][pCash] < 500) return SendClientMessage(playerid, COLOR_WHITE, "错误: 你的现金不足");
			switch(gym)
			{
			    case 0:
			    {
			        if(GetGVarInt("LSRun") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用跑步机");
			        SetGVarInt("GymRunning", 1, playerid);
				    SetPlayerPos_Fix(playerid, 773.4922, -1.5016, 1000.7209);
					SetPlayerFacingAngle(playerid, 180.0);
					SetPlayerCameraPos(playerid, 774.5513,-4.5611,1000.7314);
					SetPlayerCameraLookAt(playerid, 773.2297,-2.1590,1000.8479);
				    SetGVarInt("LSRun", 1);
			    }
			    case 1:
			    {
			        if(GetGVarInt("SFRun") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用跑步机");
			        SetGVarInt("GymRunning", 2, playerid);
				    SetPlayerPos_Fix(playerid, 759.6130,-46.8374,1000.5859);
					SetPlayerFacingAngle(playerid, 180.0);
					SetPlayerCameraPos(playerid, 762.2107,-49.6928,1000.5859);
					SetPlayerCameraLookAt(playerid, 759.3103,-48.1737,1000.8479);
				    SetGVarInt("SFRun", 1);
			    }
			    case 2:
			    {
				    if(GetGVarInt("LVRun") == 1)return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用跑步机");
				    SetGVarInt("GymRunning", 3, playerid);
				    SetPlayerPos_Fix(playerid, 758.3693,-64.2299,1000.6525);
					SetPlayerFacingAngle(playerid, 180.0);
					SetPlayerCameraPos(playerid, 759.6476,-67.5026,1000.6484);
					SetPlayerCameraLookAt(playerid, 758.4451,-65.4756,1000.8479);
					SetGVarInt("LVRun", 1);
				}
				case 4:
			    {
				    if(GetGVarInt("PrisonRun1") == 0)
					{
						SetGVarInt("GymRunning", 4, playerid);
					    SetPlayerPos_Fix(playerid, 21.1157,386.4802,6.5904);
						SetPlayerFacingAngle(playerid, 240.8249);
						SetPlayerCameraPos(playerid, 24.1953,384.9047,6.3293);
						SetPlayerCameraLookAt(playerid, 21.1157,386.4802,6.5904);
						SetGVarInt("PrisonRun1", 1);
					}
					else if(GetGVarInt("PrisonRun2") == 0)
					{
						SetGVarInt("GymRunning", 5, playerid);
					    SetPlayerPos_Fix(playerid, 21.8400,387.8004,6.5904);
						SetPlayerFacingAngle(playerid, 245.4413);
						SetPlayerCameraPos(playerid, 24.7682,386.2296,6.3159);
						SetPlayerCameraLookAt(playerid, 21.8400,387.8004,6.5904);
						SetGVarInt("PrisonRun2", 1);
					}
					else return SendClientMessage(playerid, COLOR_WHITE, "错误: 目前有人正在使用跑步机");

				}
			}
			TogglePlayerControllableEx(playerid, 0);
			ApplyAnimation(playerid, "gymnasium", "gym_tread_geton", 1, 0, 0, 0, 1, 0, 1);
		    SetPlayerArmedWeapon(playerid, 0);
      		GiveMoney(playerid, -500);
      		Log(moneylog, INFO, "%s(%d)花费了$%d开始使用健身器材", PlayerData[playerid][pName], PlayerData[playerid][pID], 500);
			SendClientMessage(playerid, COLOR_WHITE, "你开始使用了跑步机,持续按"#TEXT_YELLOW"空白键"#TEXT_WHITE"蓄力集满右侧白色蓄力条~n~按F离开跑步机");
			SetPlayerTimerEx(playerid, "GymRunStart", 2000, 0, "i", playerid);
			SetGVarFloat("GymMeter", 100.0, playerid);
	    }
	}
	return 1;
}

stock GenerateAdminPass()
{
	new string[144];
    //Admin Pass
	format(string, sizeof(string), "%s", GenerateRandomPassword(32));
	printf("此次管理员密码为:%s,使用此密码前往设定页面输入代码取得权限");
	SetGVarString("ADC", string);
}


stock SetPlayerWanted(playerid, level, const reason[])
{
	new string[144];
    SetPlayerWantedLevel(playerid, level);
    PlayerData[playerid][pWanted] = level;
    PlayerData[playerid][pWantedCount] = WantedList[level-1][wtDisTime];
    if(level > 0)
    {
        RecordData[playerid][prAllWanted] += level;
    	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_YELLOW, "通缉犯");
	    mysql_format(DEFAULT_SESSION, PlayerData[playerid][pCrime], 144, "%s", reason);
	    format(string, sizeof(string), "**"#TEXT_WHITE"警方公告"#TEXT_YELLOW"** 警方发布了对玩家"#TEXT_FADERED"%s"#TEXT_YELLOW"的%d星通缉,罪行为%s", PlayerData[playerid][pName], level, reason);
	    SendClientMessageToAll(COLOR_YELLOW, string);
	    format(string, sizeof(string), "** 你被警方通缉"#TEXT_YELLOW"%d星"#TEXT_LIGHTRED"了,原因为%s,你可以按Tab打开个人菜单的"#TEXT_WHITE"通缉中"#TEXT_LIGHTRED"菜单选择投降,或是逃亡到通缉值消除", level, reason);
	    SendClientMessage(playerid, COLOR_LIGHTRED, string);
	}
	else ClearPlayerWanted(playerid);
}

stock ClearPlayerWanted(playerid)
{
    SetPlayerWantedLevel(playerid, 0);
    PlayerData[playerid][pWanted] =
    PlayerData[playerid][pWantedCount] = 0;
    PlayerData[playerid][pRobbed] = 0;
    mysql_format(DEFAULT_SESSION, PlayerData[playerid][pCrime], 144, " ");
    UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");
}

stock PlayerWantedDecrease(playerid)
{
    new string[144],
    level = PlayerData[playerid][pWanted]-1;
    if(level > 0)
    {
        PlayerData[playerid][pWanted] = level;
        PlayerData[playerid][pWantedCount] = WantedList[level-1][wtDisTime];
        SetPlayerWantedLevel(playerid, level);
	    format(string, sizeof(string), "<<通缉等级降低>> 你的通缉等级随时间降低了,目前通缉等级为%d星", level);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		format(string, sizeof(string), "** 注意: 通缉犯%s的通缉等级随时间降至%d星了,请尽速将其逮捕归案", PlayerData[playerid][pName], level);
	    SendDeptMessage(DEPT_POLICE, COLOR_LIGHTRED, string);
	}
	else
	{
	    ClearPlayerWanted(playerid);
	    format(string, sizeof(string), "<<通缉等级消除>> 你的通缉等级随时间已经完全归零了");
		SendClientMessage(playerid, COLOR_YELLOW, string);
		format(string, sizeof(string), "** 注意: 通缉犯%s的通缉等级已经归零了,不得再继续追捕", PlayerData[playerid][pName]);
	    SendDeptMessage(DEPT_POLICE, COLOR_LIGHTRED, string);
	}
}

stock SetPlayerCrime(playerid, type, victimtype, victimid, weaponid, Float:crx, Float:cry, Float:crz, time=180)
{
    new i, j, k;
    if(GetGVarInt("PoliceDuty", playerid) == 1 && victimtype == VICTIM_PLAYER && PlayerData[victimid][pWanted] > 0) return -1;
	for(i = 0, k = -1, j = MAX_CRIMES; i < j; i++)
	{
	    if(Crime[playerid][i][crVictimType] == victimtype && Crime[playerid][i][crVictimID] == victimid)
	    {//同个受害者
	        k = i;
	        break;
	    }
	    if(Crime[playerid][i][crType] == CRIME_NONE)
	    {//空栏位
	        if(k == -1)
			{
				k = i;
			}
	    }
	}
	if(k > -1)
	{
	    if(Crime[playerid][k][crType] == CRIME_KILL && (type == CRIME_HIT || type == CRIME_ROB || type == CRIME_STEAL)) {Crime[playerid][k][crType] = CRIME_KILL;}
        else {Crime[playerid][k][crType] = type;}

        /*
		如果原本就是杀害罪,那不会被更轻的罪给覆盖
		*/

        Crime[playerid][k][crVictimType] = victimtype;
        Crime[playerid][k][crVictimID] = victimid;
        Crime[playerid][k][crWeapon] = weaponid;
        //format(Crime[playerid][k][crDetail], 144, "%s", detail);
	    Crime[playerid][k][crX] = crx,
	    Crime[playerid][k][crY] = cry,
	    Crime[playerid][k][crZ] = crz;
	    Crime[playerid][k][crTimer] = time;
	}
	return k;
}


stock ClearPlayerCrime(playerid, id)
{
    Crime[playerid][id][crType] =
    Crime[playerid][id][crVictimType] =
    Crime[playerid][id][crVictimID] = 0;
    Crime[playerid][id] = EMPTY_CRIME;
}

stock ClearAllCrime(playerid)//清除玩家暂存犯罪纪录
{
    for(new i = 0, j = MAX_CRIMES; i < j; i++)
	{
	    ClearPlayerCrime(playerid, i);
	}
}

stock GetCrimeTypeName(type)
{
	new string[16];
	switch(type)
	{
	    case CRIME_NONE: format(string, sizeof(string), "无");
		case CRIME_HIT: format(string, sizeof(string), "伤害");
		case CRIME_KILL: format(string, sizeof(string), "杀害");
		case CRIME_DESTROY: format(string, sizeof(string), "破坏");
		case CRIME_ROB: format(string, sizeof(string), "抢劫");
		case CRIME_STEAL: format(string, sizeof(string), "偷窃");
		case CRIME_MAKEGUN: format(string, sizeof(string), "制作枪械");
		case CRIME_HIJACK: format(string, sizeof(string), "抢劫载具");
		default: format(string, sizeof(string), "其他");
	}
	return string;
}

stock GetCrimeVictimName(playerid, id)
{
	new string[24];
	switch(Crime[playerid][id][crVictimType])
	{
	    case VICTIM_NONE: format(string, sizeof(string), "无");
		case VICTIM_PLAYER: format(string, sizeof(string), "玩家%s", PlayerData[Crime[playerid][id][crVictimID]][pName]);
		case VICTIM_VEHICLE: format(string, sizeof(string), "载具%s", GetVehicleName(VehData[Crime[playerid][id][crVictimID]][vModel]));
		case VICTIM_ESTATE: format(string, sizeof(string), "地产%s", EstateData[Crime[playerid][id][crVictimID]][eName]);
		case VICTIM_ANIMAL: format(string, sizeof(string), "动物%s", AnimalsList[Crime[playerid][id][crVictimID]][amlName]);
		case VICTIM_SHOP: format(string, sizeof(string), "商店");
		default: format(string, sizeof(string), "其他");
	}
	return string;
}

stock CrimeToWanted(playerid, id)
{
	if(Crime[playerid][id][crType] > CRIME_NONE)
	{
		new level, reason[64];
	    switch(Crime[playerid][id][crType])
	   	{
	        case CRIME_HIT:
	        {
	            if(Crime[playerid][id][crVictimType] == VICTIM_PLAYER && (PlayerData[Crime[playerid][id][crVictimID]][pDepartment] == DEPT_POLICE || PlayerData[Crime[playerid][id][crVictimID]][pDepartment] == DEPT_GOVERNMENT))
	            {//伤害政府人员或警察
	                if(WantedRule[wrHitSMax] > PlayerData[playerid][pWanted] > 0)
		            {
		                format(reason, sizeof(reason), "累犯伤害%s", GetCrimeVictimName(playerid, id));
			            level = PlayerData[playerid][pWanted]+1;
		            }
		            else if(PlayerData[playerid][pWanted] >= WantedRule[wrHitSMax])
		            {
		                format(reason, sizeof(reason), "累犯伤害%s", GetCrimeVictimName(playerid, id));
			            level = PlayerData[playerid][pWanted];
		            }
		            else
		            {
			            format(reason, sizeof(reason), "伤害%s", GetCrimeVictimName(playerid, id));
			            level = WantedRule[wrHitSMin];
			        }
	            }
	            else
	            {
		            if(WantedRule[wrHitMax] > PlayerData[playerid][pWanted] > 0)
		            {
		                format(reason, sizeof(reason), "累犯伤害%s", GetCrimeVictimName(playerid, id));
			            level = PlayerData[playerid][pWanted]+1;
		            }
		            else if(PlayerData[playerid][pWanted] >= WantedRule[wrHitMax])
		            {
		                format(reason, sizeof(reason), "累犯伤害%s", GetCrimeVictimName(playerid, id));
			            level = PlayerData[playerid][pWanted];
		            }
		            else
		            {
			            format(reason, sizeof(reason), "伤害%s", GetCrimeVictimName(playerid, id));
			            level = WantedRule[wrHitMin];
			        }
			    }
	        }
	        case CRIME_KILL:
	        {
	            if(WantedRule[wrKillMax] > PlayerData[playerid][pWanted] > 0)
	            {
	                format(reason, sizeof(reason), "累犯杀害%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrKillMax])
	            {
	                format(reason, sizeof(reason), "累犯杀害%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "杀害%s", GetCrimeVictimName(playerid, id));
		            level = WantedRule[wrKillMin];
		        }
	        }
	        case CRIME_DESTROY:
	        {
	            if(WantedRule[wrDestroyMax] > PlayerData[playerid][pWanted] > 1)
	            {
	                format(reason, sizeof(reason), "累犯破坏%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrDestroyMax])
	            {
	                format(reason, sizeof(reason), "累犯破坏%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "破坏%s", GetCrimeVictimName(playerid, id));
		            level = WantedRule[wrDestroyMin];
		        }
	        }
	        case CRIME_ROB:
	        {
	            if(WantedRule[wrRobMax] > PlayerData[playerid][pWanted] > 1)
	            {
	                format(reason, sizeof(reason), "累犯抢劫%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrRobMax])
	            {
	                format(reason, sizeof(reason), "累犯抢劫%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "抢劫%s", GetCrimeVictimName(playerid, id));
		            level = WantedRule[wrRobMin];
		        }
	        }
	        case CRIME_STEAL:
	        {
	            if(WantedRule[wrStealMax] > PlayerData[playerid][pWanted] > 0)
	            {
	                format(reason, sizeof(reason), "累犯偷窃%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrStealMax])
	            {
	                format(reason, sizeof(reason), "累犯偷窃%s", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "偷窃%s", GetCrimeVictimName(playerid, id));
		            level = WantedRule[wrStealMin];
		        }
	        }
	        case CRIME_MAKEGUN:
	        {
	            if(WantedRule[wrGunMax] > PlayerData[playerid][pWanted] > 0)
	            {
	                format(reason, sizeof(reason), "累犯制作枪械");
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrGunMax])
	            {
	                format(reason, sizeof(reason), "累犯制作枪械");
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "制作枪械%s");
		            level = WantedRule[wrGunMin];
		        }
	        }
	        case CRIME_HIJACK:
	        {
	            if(WantedRule[wrHijackMax] > PlayerData[playerid][pWanted] > 0)
	            {
	                format(reason, sizeof(reason), "累犯抢劫%s的载具", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted]+1;
	            }
	            else if(PlayerData[playerid][pWanted] >= WantedRule[wrHijackMax])
	            {
	                format(reason, sizeof(reason), "累犯抢劫%s的载具", GetCrimeVictimName(playerid, id));
		            level = PlayerData[playerid][pWanted];
	            }
	            else
	            {
		            format(reason, sizeof(reason), "抢劫%s的载具", GetCrimeVictimName(playerid, id));
		            level = WantedRule[wrHijackMin];
		        }
	        }
	    }
	    if(level > 6) level = 6;
	    SetPlayerWanted(playerid, level, reason);
		ClearPlayerCrime(playerid, id);//完成通缉后就删除该条犯罪行为
	}
}

stock SetPlayerInJail(playerid, time, roomid, fine=0)
{
	SetGVarInt("PutJail", 1, playerid);

	new string[144];
	PlayerData[playerid][pJail] = time;
	PlayerData[playerid][pMaxJail] = time;
	PlayerData[playerid][pJailRoom] = roomid;
	SetGVarInt("JailQK", 300, playerid);
	SetPlayerJailPos(playerid, PrisonSpawn[roomid][pssX], PrisonSpawn[roomid][pssY], PrisonSpawn[roomid][pssZ]);
	SetPlayerFacingAngle(playerid, PrisonSpawn[roomid][pssA]);
	SetPlayerInterior(playerid, 1);
	SetPlayerVirtualWorld(playerid, 1);
	ClearAllWeapon(playerid);
	if(fine > 0)
	{
	    GiveMoney(playerid, -fine);
	    Log(moneylog, INFO, "%s(%d)支付了入狱罚金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], fine);
	    Log(deptlog, INFO, "%s(%d)支付了入狱罚金$%d给国库", PlayerData[playerid][pName], PlayerData[playerid][pID], fine);
	    Department[DEPT_GOVERNMENT][dpFund] += fine;
	    format(string, sizeof(string), "<<部门>> 犯人 %s 入狱了,缴纳的罚金$%d充公收入国库", PlayerData[playerid][pName], fine);
	    SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
	    SendDeptMessage(DEPT_POLICE, COLOR_FADEBLUE, string);
	}

	DeleteGVar("Cuffed", playerid);
	DeleteGVar("Surr", playerid);
	DeleteGVar("Arrested", playerid);
	DeleteGVar("Tied", playerid);
	TogglePlayerControllableEx(playerid, true);
	SetPlayerSpecialAction(playerid, 0);
	RemovePlayerAttachedObject(playerid, 5);

	format(string, sizeof(string), "** 你被送入监狱了,服刑时间为%d秒,罚金为$%d,打开个人菜单可以查看服刑期间相关选项", time, fine);
	SendClientMessage(playerid, COLOR_FADERED, string);
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_ORANGE, "服刑中");
	RecordData[playerid][prJail] ++;
	//Toreno帮助
	if(LimitData[playerid][plHToreno] > 19)
	{
	    ShowPlayerDialog(playerid, DIALOG_TORENO_UNJAIL, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"特别服务", ""#TEXT_WHITE"是否要使用托雷诺承诺的服务来直接出狱?", "是", "否");
	}
}

stock SetPlayerOutJail(playerid)
{
    SetGVarInt("PutJail", 1, playerid);
    
    PlayerData[playerid][pJail] =
    PlayerData[playerid][pMaxJail] =
    PlayerData[playerid][pJailRoom] = 0;
    SetPlayerPos_Fix(playerid, 30.0304,320.6720,6.3080);
	SetPlayerFacingAngle(playerid, 244.6074);
	SetPlayerInterior(playerid, 0);
	SetPlayerVirtualWorld(playerid, 0);
	if(GetGVarInt("JailOutAgain", playerid) == 0)
	{
	    TogglePlayerControllableEx(playerid, 0, 1);
	    SetGVarInt("IEEing", 1, playerid);
		SetGVarInt("JailOutAgain", 1, playerid);
	    SetPlayerTimerEx(playerid, "UnFreeze", 10000, 0, "i", playerid);
	    SetPlayerTimerEx(playerid, "ClearIEEing", 10000, false, "d", playerid);//设置冷却时间为3秒
		SetPlayerTimerEx(playerid, "OutJailAgain", 3000, false, "d", playerid);
 	}
	SendClientMessage(playerid, COLOR_YELLOW, "** 你已经被释放出狱了");
	UpdateDynamic3DTextLabelText(PlayerStatus[playerid], COLOR_WHITE, " ");

	GymEnd(playerid);
	LiftEnd(playerid);
}

stock WantedToJail(playerid, jailroom=-1)
{
	new
	wanted = PlayerData[playerid][pWanted],
	jailtime = WantedList[wanted-1][wtJailTime],
	fine = WantedList[wanted-1][wtFine];
	if(jailroom == -1) jailroom = random(sizeof(PrisonSpawn));
    SetPlayerInJail(playerid, jailtime, jailroom, fine);
	ClearPlayerWanted(playerid);
	DeleteGVar("Arrested", playerid);
}

stock GetCriminalsAmount(level=0)
{
	new count;
	ForEachPlayer(i)
	{
	    if(PlayerData[i][pWanted] > level) count++;
	}
	return count;
}

stock PlayerTracePlayer(playerid, traceid)
{
	new string[144], area, tracezone, status[24], vehicleid, Float:px, Float:py, Float:pz;
	if(GetGVarInt("Logged", traceid) && PlayerData[traceid][pWanted] > 0)
	{
	    if(GetGVarInt("Hiding", playerid) == 1)
	    {
	        format(string, sizeof(string), "<<警方资料库>> "#TEXT_WHITE"通缉犯"#TEXT_RED"%s"#TEXT_WHITE"("#TEXT_YELLOW"%d"#TEXT_WHITE"星通缉)使用了潜行技能,其区域资料暂时无法更新", PlayerData[traceid][pName], PlayerData[traceid][pWanted]);
		    SendClientMessage(playerid, COLOR_BLUE, string);
	    }
	    else
	    {
		    area = GetPlayerArea(traceid);
		    if(GetGVarInt("PoliceTraceZone", playerid) != 0) GangZoneDestroy(GetGVarInt("PoliceTraceZone", playerid));
		    if(area != -1)
		    {
		        tracezone = GangZoneCreate(SmallArea[area][arsZone][0], SmallArea[area][arsZone][1], SmallArea[area][arsZone][3], SmallArea[area][arsZone][4]);
		        SetGVarInt("PoliceTraceZone", tracezone, playerid);
		        GangZoneShowForPlayer(playerid, tracezone, 0x003CFF88);
		        GangZoneFlashForPlayer(playerid, tracezone, 0xFC0000AA);
	         	if(GetGVarInt("Surr", playerid) == 1)
		        {
	                GetPlayerPos(traceid, px, py, pz);
	                SetPlayerMapIcon(playerid, 95, px, py, pz, 0, COLOR_RED, MAPICON_GLOBAL);
	                format(status, sizeof(status), "已经投降");
	            }
		        else
		        {
					SetPlayerMapIcon(playerid, 95, (SmallArea[area][arsZone][0]+SmallArea[area][arsZone][3])/2, (SmallArea[area][arsZone][1]+SmallArea[area][arsZone][4])/2, 0.0, 0, COLOR_RED, MAPICON_GLOBAL);
			        if(GetPlayerInterior(traceid) == 0)
			        {
				        switch(GetPlayerState(traceid))
						{
							case PLAYER_STATE_ONFOOT: format(status, sizeof(status), "正在步行");
							case PLAYER_STATE_DRIVER:
							{
							    vehicleid = GetPlayerVehicleID(traceid);
							    format(status, sizeof(status), "驾驶着%s", GetVehicleName(GetVehicleModel(vehicleid)));
							}
							case PLAYER_STATE_PASSENGER:
							{
							    vehicleid = GetPlayerVehicleID(traceid);
							    format(status, sizeof(status), "乘坐着%s", GetVehicleName(GetVehicleModel(vehicleid)));
							}
							case PLAYER_STATE_WASTED: format(string, sizeof(string), "已经死亡");
							default: format(status, sizeof(status), "状态不明");
						}
					}
					else format(status, sizeof(status), "正在室内");
				}
		    }
		    else
		    {
		        GetPlayerPos(traceid, px, py, pz);
		        SetPlayerMapIcon(playerid, 95, px, py, pz, 0, COLOR_RED, MAPICON_GLOBAL);
		        if(GetPlayerInterior(traceid) == 0) format(status, sizeof(status), "正在海外");
		        else format(status, sizeof(status), "正在室内");
		    }
		    SetGVarInt("PoliceTraceID", traceid, playerid);
		    SetGVarInt("PoliceTrace", 1, playerid);
		    SetGVarInt("PoliceTraceTimer", 20, playerid);
		    format(string, sizeof(string), "<<警方资料库>> "#TEXT_WHITE"通缉犯"#TEXT_RED"%s"#TEXT_WHITE"("#TEXT_YELLOW"%d"#TEXT_WHITE"星通缉)的所在区域已经更新,目前该通缉犯%s", PlayerData[traceid][pName], PlayerData[traceid][pWanted], status);
		    SendClientMessage(playerid, COLOR_BLUE, string);
		}
	}
	else PlayerUntracePlayer(playerid);
}

stock PlayerUntracePlayer(playerid)
{
	if(GetGVarInt("PoliceTrace", playerid) == 1)
	{
	    DeleteGVar("PoliceTrace", playerid);
		RemovePlayerMapIcon(playerid, 95);
		GangZoneDestroy(GetGVarInt("PoliceTraceZone", playerid));
	}
}

PUBLIC:SetLittleBike(playerid)
{
    new bikeid, Float:vx, Float:vy, Float:vz;
    if(PlayerHaveItem(playerid, ITEM_EQ, 287))
    {
    	GetPlayerPos(playerid, vx, vy, vz);
		GetXYInFrontOfPlayer(playerid, vx, vy, 2.0);
		bikeid = CreateVehicle(481, vx, vy, vz+1.0, 0.0, -1, -1, 3600);
		LinkVehicleToInterior(bikeid, GetPlayerInterior(playerid));
    	SetVehicleVirtualWorld(bikeid, GetPlayerVirtualWorld(playerid));
    	SendClientMessage(playerid, COLOR_WHITE, "** 你组装了折叠单车,在单车上按2打开"#TEXT_YELLOW"载具面板"#TEXT_WHITE"可以收回单车");
    	SetGVarInt("LilBike", 1, bikeid);
    	ClearAnimationsEx(playerid);
    	GivePlayerItem(playerid, ITEM_EQ, 287, -1);

    }
    else SendClientMessage(playerid, COLOR_WHITE, "组装错误: 你身上没有折叠单车");
}

PUBLIC:SpecActUnCD(playerid)
{
	if(GetGVarInt("SpecActCD", playerid) == 1)
	{
	    if(GetGVarInt("Smoking", playerid) == 10 || GetGVarInt("Drinking", playerid) == 10)
		{
			DeleteGVar("Smoking", playerid);
			DeleteGVar("Drinking", playerid);
			SetPlayerSpecialAction(playerid, 0);
		}
		DeleteGVar("SpecActCD", playerid);
	}
}

stock ShowPlayerFriskList(playerid, friskid)
{
    SetGVarInt("FriskID", friskid, playerid);
    ShowPlayerDialog(playerid, DIALOG_FRISK_LIST, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"搜身", ""#TEXT_WHITE"选择搜查项目\n武器枪械\n制枪材料\n非法货物\n执照证照", "选择", "取消");
    return 1;
}

stock PutPlayerInVehicle_Fix(playerid, vehicleid, seatid=-1)
{
	new seat[8], i, j;
    ForEachPlayer(p)
	{
		if(GetPlayerVehicleID(p) == vehicleid)
		{
			seat[GetPlayerVehicleSeat(p)] = 1;
		}
	}
	for(i = 0, j = -1; i < 8; i++)
	{
		if(seat[i] == 0)
		{
			j = i;
			break;
		}
	}
	if(j == -1) return 0;
	if(seatid == -1) seatid = j;
	return PutPlayerInVehicle(playerid, vehicleid, seatid);
}

stock CreateStinger(Float:sx, Float:sy, Float:sz, Float:sangle, world)
{
	for(new i = 0, j = MAX_STINGERS; i < j; i++)
	{
	    if(Stinger[i][stgCreated] == 1) continue;
		Stinger[i][stgCreated] = 1;
		Stinger[i][stgObject] = CreateDynamicObject(2899, sx, sy, sz, 0.0, 0.0, sangle, world);
		Stinger[i][stgX] = sx,
		Stinger[i][stgY] = sy,
		Stinger[i][stgZ] = sz,
		Stinger[i][stgA] = sangle;
		Stinger[i][stgWorld] = world;

		GetXYRightToAngle(sangle, Stinger[i][stgX], Stinger[i][stgY], sx, sy, 1.5);
		Stinger[i][stgPickup1] = CreateDynamicPickup(1007, 14, sx, sy, sz+0.4, world);

		GetXYLeftToAngle(sangle, Stinger[i][stgX], Stinger[i][stgY], sx, sy, 1.5);
		Stinger[i][stgPickup2] = CreateDynamicPickup(1007, 14, sx, sy, sz+0.4, world);

		return i;
	}
	return -1;
}

stock DestroyStinger(id)
{
	if(Stinger[id][stgCreated] == 1)
	{
	    Stinger[id][stgCreated] = 0;
		DestroyDynamicObject(Stinger[id][stgObject]);
		DestroyDynamicPickup(Stinger[id][stgPickup1]);
		DestroyDynamicPickup(Stinger[id][stgPickup2]);
	}
	DeleteGVar("OTStinger", id);
}

stock PopVehicleTires(vehicleid)
{
    new panels, doors, lights, tires;
    GetVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
	UpdateVehicleDamageStatus(vehicleid, panels, doors, lights, 15);
}

stock CreateRoadBlock(Float:sx, Float:sy, Float:sz, Float:sangle, world)
{
	for(new i = 0, j = MAX_ROADBLOCKS; i < j; i++)
	{
	    if(RoadBlock[i][rbCreated] == 1) continue;
		RoadBlock[i][rbCreated] = 1;
		RoadBlock[i][rbObject] = CreateDynamicObject(979, sx, sy, sz, 0.0, 0.0, sangle, world);
		RoadBlock[i][rbX] = sx,
		RoadBlock[i][rbY] = sy,
		RoadBlock[i][rbZ] = sz,
		RoadBlock[i][rbA] = sangle;
		RoadBlock[i][rbWorld] = world;
		return i;
	}
	return -1;
}

stock DestroyRoadBlock(id)
{
	if(RoadBlock[id][rbCreated] == 1)
	{
	    RoadBlock[id][rbCreated] = 0;
		DestroyDynamicObject(RoadBlock[id][rbObject]);
	}
}

stock CreateLandMine(Float:sx, Float:sy, Float:sz, Float:sangle, world)
{
	for(new i = 0, j = MAX_STINGERS; i < j; i++)
	{
	    if(LandMine[i][lmCreated] == 1) continue;
		LandMine[i][lmCreated] = 1;
		LandMine[i][lmObject] = CreateDynamicObject(19602, sx, sy, sz, 0.0, 0.0, sangle, world);
		LandMine[i][lmX] = sx,
		LandMine[i][lmY] = sy,
		LandMine[i][lmZ] = sz,
		LandMine[i][lmA] = sangle;
		LandMine[i][lmWorld] = world;
		LandMine[i][lmPickup] = CreateDynamicPickup(1007, 14, sx, sy, sz+0.4, world);
		return i;
	}
	return -1;
}

stock DestroyLandMine(id)
{
	if(LandMine[id][lmCreated] == 1)
	{
	    LandMine[id][lmCreated] = 0;
		DestroyDynamicObject(LandMine[id][lmObject]);
		DestroyDynamicPickup(LandMine[id][lmPickup]);
	}
}

stock GetMedicPatients()
{
	new count = 0;
	ForEachPlayer(i)
	{
		if(GetGVarInt("AppMedic", i) > 0) count++;
	}
	return count;
}

stock GetDeptOnlineMembers(dpid)
{
	new m;
	ForEachPlayer(i)
	{
		if(PlayerData[i][pDepartment] == dpid) m++;
	}
	return m;
}

stock GetDeptDutyOnlineMembers(dpid)
{
	new m;
	ForEachPlayer(i)
	{
		if(PlayerData[i][pDepartment] == dpid)
		{
		    switch(dpid)
			{
				case DEPT_POLICE: if(GetGVarInt("PoliceDuty", i) == 1) m++;
				case DEPT_MEDIC: if(GetGVarInt("MedicDuty", i) == 1) m++;
			}
		}
	}
	return m;
}

PUBLIC:SetCureAnim(playerid, doctorid)
{
	if(GetGVarInt("MedicCost", playerid) > 0)
	{
	    ApplyAnimationEx(playerid, "BEACH", "PARKSIT_M_LOOP", 4.1, 1, 0, 0, 1, 0);
	    ApplyAnimationEx(doctorid, "OTB", "BETSLP_LOOP", 4.1, 1, 0, 0, 1, 0);
	    SetPlayerTimerEx(playerid, "SetCureAnim", 500, false, "ii", playerid, doctorid);
	}
}

PUBLIC:HPCureComplete(playerid, doctorid, type, hpid)
{
	new string[144], sick[32], randpt,
	cost = GetGVarInt("MedicCost", playerid);
    DeleteGVar("HPUsed", hpid),
	DeleteGVar("HPPatient", hpid),
	DeleteGVar("HPCureDoc", playerid);
	DeleteGVar("MedicCost", playerid);
	DeleteGVar("AppMedic", playerid);
	if(GetGVarInt("Logged", playerid))
	{
	    SetPlayerPos(playerid, -28.5528,142.1602,999.0613);
	    SetPlayerFacingAngle(playerid, 87.8526);
	    ClearAnimationsEx(playerid);
	    TogglePlayerControllableEx(playerid, true);
	    SetCameraBehindPlayer(playerid);
	    switch(type)
	    {
	        case 1:
			{
				SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
				format(string, sizeof(string), "** 经过治疗,你的生命已经完全恢复了");
			}
            case 2:
			{
				switch(SickData[playerid][scHealth])
				{
					case 1:format(sick, sizeof(sick), "破伤风");
			    	case 2:format(sick, sizeof(sick), "蜂窝性组织炎");
			    	case 3:format(sick, sizeof(sick), "细菌感染");
			    	case 4:format(sick, sizeof(sick), "偶发性休克");
				}
				format(string, sizeof(string), "** 经过治疗,你的%s已经完全被治K了", sick);
				SickData[playerid][scHealth] = 0;
			}
			case 3:
			{
				switch(SickData[playerid][scHunger])
				{
				   	case 1:format(sick, sizeof(sick), "健康流失");
				   	case 2:format(sick, sizeof(sick), "体力流失");
				   	case 3:format(sick, sizeof(sick), "厌食症");
				}
				format(string, sizeof(string), "** 经过治疗,你的%s已经完全被治K了", sick);
				SickData[playerid][scHunger] = 0;
			}
			case 4:
			{
    			switch(SickData[playerid][scStamina])
				{
				    case 1:format(sick, sizeof(sick), "小感冒");
				    case 2:format(sick, sizeof(sick), "发烧");
				}
				format(string, sizeof(string), "** 经过治疗,你的%s已经完全被治K了", sick);
				SickData[playerid][scStamina] = 0;
			}
	    }
	    SendClientMessage(playerid, COLOR_FADEGREEN, string);
	}
	if(GetGVarInt("Logged", doctorid))
	{
	    SetPlayerPos(doctorid, -14.8765,146.8557,999.0519);
	    SetPlayerFacingAngle(doctorid, 180.0);
	    ClearAnimationsEx(doctorid);
	    TogglePlayerControllableEx(doctorid, true);
	    SetCameraBehindPlayer(doctorid);
	    GiveMoney(doctorid, cost);
	    Log(moneylog, INFO, "%s(%d)获得了诊疗%s(%d)的医疗费$%d", PlayerData[doctorid][pName], PlayerData[doctorid][pID], PlayerData[playerid][pName], PlayerData[playerid][pID], cost);
	    GivePlayerExp(doctorid, 500, EXP_JOB);
	    format(string, sizeof(string), "** 你治疗了 %s ,获得了奖励$%d以及经验值", PlayerData[playerid][pName], cost);
	    SendClientMessage(doctorid, COLOR_FADEGREEN, string);
	    format(string, sizeof(string), "<<部门>> 医疗人员 %s 完成了对病患 %s 的诊疗", PlayerData[doctorid][pName], PlayerData[playerid][pName]);
		SendDeptMessage(DEPT_MEDIC, COLOR_FADEBLUE, string);
		randpt = random(3);
		if(randpt == 0)
		{
			GivePlayerPoint(doctorid, 5, 5);
			format(string, sizeof(string), "** "TEXT_ORANGE"实作经验:"#TEXT_WHITE" 获得"#TEXT_YELLOW"医学知识"#TEXT_LIGHTBLUE"5点");
			SendClientMessage(doctorid, COLOR_WHITE, string);
		}
	}
}

stock SendBountyMessage(color, const string[])
{
	ForEachPlayer(i)
	{
	    if(PlayerData[i][pLevel] > 15) SendClientMessage(i, color, string);
	}
}

stock SetPlayerBounty(playerid, value, time, senderid=INVALID_PLAYER_ID)
{
	new string[144];
    UpdatePlayerColor(playerid);
    PlayerData[playerid][pBounty] = value;
    PlayerData[playerid][pBountyTime] = time;
    if(senderid == INVALID_PLAYER_ID) PlayerData[playerid][pBountySender] = 0;
    else PlayerData[playerid][pBountySender] = PlayerData[senderid][pID];
    format(string, sizeof(string), "<<悬赏>> 新的悬赏目标: "#TEXT_FADERED"%s"#TEXT_YELLOW",击杀目标即可获得赏金"#TEXT_FADEGREEN"$%d"#TEXT_YELLOW",立即前往电话亭获取悬赏目标位置吧", PlayerData[playerid][pName], value);
	SendBountyMessage(COLOR_YELLOW, string);
    format(string, sizeof(string), "<<悬赏令>> 你被下达了赏金$%d的悬赏,持续时间为%d秒,如果在悬赏期间被击杀你也会损失价值同赏金的现金", value, time);
	SendClientMessage(playerid, COLOR_FADERED, string);
}

stock ClearPlayerBounty(playerid)
{
    UpdatePlayerColor(playerid);
	PlayerData[playerid][pBounty] =
	PlayerData[playerid][pBountyTime] =
	PlayerData[playerid][pBountySender] = 0;
}

stock DateProp(playerid)
{
	new i, j,
	curdate = getdate();
	for(i = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_PLAYER) continue;
		if(EstateData[i][eOwnerID] == PlayerData[playerid][pID])
		{
			EstateData[i][eDate] = curdate;
		}
	}
	for(i = 1, j = GetVehiclePoolSize(); i <= j; i++)
	{
	    if(VehData[i][vType] != VTYPE_PLAYER || VehData[i][vOwned] == 0) continue;
		if(VehData[i][vOwner] == PlayerData[playerid][pID])
		{
			VehData[i][vDate] = curdate;
		}
	}
}

stock CheckProp()
{
	new olddate, i, j, string[144],
	curdate = getdate();
	for(i = 0, j = MAX_ESTATES; i < j; i++)
	{
	    if(EstateData[i][eOwnerType] != ESTATE_OWNER_PLAYER) continue;
		if(EstateData[i][eDate] > 9)
		{
			olddate = EstateData[i][eDate];
			if(curdate - olddate > 14 && olddate > 0)
			{
				format(string, sizeof(string), "<<法拍公告>> 地产%s因地主长期未上线而被法拍了", EstateData[i][eName]);
				SendClientMessageToAll(COLOR_GREEN, string);
				format(string, sizeof(string), "<<部门>> 本次法拍的地产为国库增加 $%d 资金", EstateData[i][ePrice]/2);
				SendDeptMessage(DEPT_GOVERNMENT, COLOR_FADEBLUE, string);
				Log(estatelog, INFO, "地产%s(%d)因地主长期未上线而被法拍了", EstateData[i][eName], EstateData[i][eID]);
				Log(deptlog, INFO, "地产%s(%d)因地主长期未上线而被法拍了,国库收入了$%d", EstateData[i][eName], EstateData[i][eID], EstateData[i][ePrice]/2);
				Department[DEPT_GOVERNMENT][dpFund] += EstateData[i][ePrice]/2;
    			DeleteEstateOwner(i);
			}
		}
	}
	for(i = 1, j = GetVehiclePoolSize(); i <= j; i++)
	{
		if(VehData[i][vType] != VTYPE_PLAYER || VehData[i][vOwned] == 0) continue;
		if(VehData[i][vDate] > 9)
		{
			olddate = VehData[i][vDate];
			if(curdate - olddate > 14 && olddate > 0)
			{
			    Log(vehlog, INFO, "载具%s(%d)已被法拍,车主ID:", GetVehicleName(VehData[i][vModel]), VehData[i][vID], VehData[i][vOwner]);
				DeleteVehicle(i);
			}
		}
	}
	return 1;
}

PUBLIC:LottoLoop()
{
    new string[144];
	SetGVarInt("LottoEx", GetGVarInt("LottoEx")-1);
	StartLotto();
	if(GetGVarInt("LottoEx") > 0)
	{
	    format(string, sizeof(string), "<<乐透连发>> 下一次乐透开奖将在约60后开始,目前还剩%d次乐透连发", GetGVarInt("LottoEx"));
	    SendClientMessageToAll(COLOR_WHITE, string);
	    SetTimer("LottoLoop", 60000, false);
	}
}

PUBLIC:StartLotto()
{
	new string[144], num[6], i, j, prize, win, winex, winners, winall, maxprize;
	for(i = 0; i < 6; i++)
	{
		num[i] = 1+random(48);
		for(j = i-1; j >= 0;)
		{//检查一个乐透号码是否与先前的号码重复
		    if(num[i] == num[j]) num[i] = 1+random(48);//若有重复就重新抽并再进行一次检查
		    else j--;//没有就检查下一个号码
		}
	}
	format(string, sizeof(string), "<<"#TEXT_FADEBLUE"乐透开奖"#TEXT_WHITE">> 本次乐透开出号码为:"#TEXT_YELLOW" %d %d %d %d %d "#TEXT_FADERED"%d", num[0], num[1], num[2], num[3], num[4], num[5]);
	SendClientMessageToAll(COLOR_WHITE, string);

	winall = winners = 0;
	maxprize = PriceData[prcLotto];
	ForEachPlayer(p)
	{
		if(PlayerLotto[p][0][lotNum] == 0) continue;
		win = winex = prize = 0;
		for(i = 0; i < 6; i++)
		{
		    for(j = 0; j < 6; j++)
		    {
		    	if(i == 5) {if(PlayerLotto[p][j][lotNum] == num[i]) winex = 1;}
		    	else {if(PlayerLotto[p][j][lotNum] == num[i]) win++;}
		    }
		}
		switch(win)
		{
			case 0:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_FADEBLUE"<<乐透开奖>> 本次乐透你中了一个特别号,赢得奖金$400!", win);
				    prize = 400;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_WHITE"<<乐透开奖>> 本次乐透你没有中任何一个号码,请再接再厉");
					prize = 0;
				}
			}
			case 1:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_FADEBLUE"<<乐透开奖>> 本次乐透你中了%d个号码以及特别号,赢得奖金$1,000", win);
				    prize = 1000;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_FADEBLUE"<<乐透开奖>> 本次乐透你中了%d个号码,赢得奖金$400", win);
					prize = 400;
				}
			}
			case 2:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_FADEGREEN"<<乐透开奖>> 本次乐透你中了%d个号码以及特别号,赢得奖金$5,000", win);
				    prize = 5000;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_FADEGREEN"<<乐透开奖>> 本次乐透你中了%d个号码,赢得奖金$2,000", win);
					prize = 2000;
				}
			}
			case 3:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_FADEGREEN"<<乐透开奖>> 本次乐透你中了%d个号码以及特别号,赢得奖金$25,000!", win);
				    prize = 25000;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_FADEGREEN"<<乐透开奖>> 本次乐透你中了%d个号码,赢得奖金$10,000", win);
					prize = 10000;
				}
			}
			case 4:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_FADEYELLOW"<<乐透开奖>> 本次乐透你中了%d个号码以及特别号,赢得奖金$500,000!", win);
				    prize = 500000;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_FADEGREEN"<<乐透开奖>> 本次乐透你中了%d个号码,赢得奖金$50,000", win);
					prize = 50000;
				}
			}
			case 5:
			{
				if(winex == 1)
				{
				    format(string, sizeof(string), ""#TEXT_YELLOW"<<乐透开奖>> 本次乐透你中了所有号码!赢得奖池所有奖金$%d!", PriceData[prcLotto]);
				    prize = PriceData[prcLotto];
					winall ++;
				}
				else
				{
					format(string, sizeof(string), ""#TEXT_FADEYELLOW"<<乐透开奖>> 本次乐透你中了%d个号码!赢得奖金$1,500,000!", win);
					prize = 1500000;
				}
			}
		}
		if(prize > 0)
		{
		    PriceData[prcLotto] -= prize;
		    GiveMoney(p, prize);
		    Log(moneylog, INFO, "%s(%d)获得了乐透奖金$%d", PlayerData[p][pName], PlayerData[p][pID], prize);
		    winners ++;
		}
		SendClientMessage(p, COLOR_WHITE, string);
		ClearPlayerLotto(p);
	}

	if(winall > 0) format(string, sizeof(string), "<<"#TEXT_FADEGREEN"乐透结果"#TEXT_WHITE">> 本次开奖共有%d人中奖,并有%d人中头奖带走总奖金$%d", winners, winall, maxprize);
	else format(string, sizeof(string), "<<"#TEXT_FADEGREEN"乐透结果"#TEXT_WHITE">> 本次开奖共有%d人中奖", winners);
	SendClientMessageToAll(COLOR_WHITE, string);

	if(PriceData[prcLotto] < 1000000)
	{
	    PriceData[prcLotto] = 1500000;
	    format(string, sizeof(string), "<<"#TEXT_FADEGREEN"乐透结果"#TEXT_WHITE">> 乐透奖金重置了,下一次将由$%d开始重新累积", PriceData[prcLotto]);
		SendClientMessageToAll(COLOR_WHITE, string);
	}
	else
	{
	    if(PriceData[prcLotto] < 10000000) PriceData[prcLotto] += 100000;
	    format(string, sizeof(string), "<<"#TEXT_FADEGREEN"乐透结果"#TEXT_WHITE">> 目前乐透奖金池已经累积到了$%d", PriceData[prcLotto]);
		SendClientMessageToAll(COLOR_WHITE, string);
	}
}

PUBLIC:ShowPlayerCameraScene(playerid, scene)
{
	new cutscene;
	switch(scene)
	{
	    case SCENE_NONE: SetPlayerSceneToSpawn(playerid);
	    case SCENE_SKY:
	    {
	        new
			Float:randX1 = float(-3000+random(6000)), Float:randY1 = float(-3000+random(6000)),
			Float:randX2 = float(-3000+random(6000)), Float:randY2 = float(-3000+random(6000));
	        SetPlayerInterior(playerid, 0);
	        SetPlayerVirtualWorld(playerid, 0);
	        InterpolateCameraPos(playerid, randX1, randY1, 600.0, randX2, randY2, 600.0, 60000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, randX1, randY1, 0.0, randX2, randY2, 0.0, 60000, CAMERA_MOVE);
			cutscene = SetPlayerTimerEx(playerid, "CutScene", 60000, false, "id", playerid, 1);
			SetGVarInt("SceneTime", cutscene, playerid);
	    }
	    case SCENE_SKYSPAWN:
	    {
	        KillTimer(GetGVarInt("SceneTime", playerid));
	        new Float:cx, Float:cy, Float:cz, Float:px, Float:py, Float:pz;
			GetPlayerLastSpawnPos(playerid, px, py, pz);
			GetPlayerCameraPos(playerid, cx, cy, cz);
	        InterpolateCameraPos(playerid, cx, cy, 600.0, px, py, 600.0, 2500, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, cx, cy, cz, px, py, pz, 2500, CAMERA_MOVE);
			cutscene = SetPlayerTimerEx(playerid, "CutScene", 4000, false, "id", playerid, 2);
			SetGVarInt("SceneTime", cutscene, playerid);
	    }
	    case SCENE_INTRO://Intro Sea to Land
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 欢迎来到"#TEXT_PINKRED"自由国度"#TEXT_WHITE"");
	        SetPlayerVirtualWorld(playerid, 0);
	        SetPlayerInterior(playerid, 0);
	        InterpolateCameraPos(playerid, -3489.9099,-114.9030,120.0000, -2822.6973,-104.4511,120.0000, 13000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -2297.4897,-111.3241,54.9453, -2297.4897,-111.3241,54.9453, 13000, CAMERA_MOVE);
			SetGVarInt("IntroTime", 0, playerid);
			cutscene = SetPlayerTimerEx(playerid, "IntroTimer", 2290, true, "i", playerid);//105bpm
			SetGVarInt("SceneTime", cutscene, playerid);
	    }
	}
}

stock SetPlayerSceneToSpawn(playerid)
{
    SetSpawnInfo(playerid, GetGVarInt("pTeam", playerid), PlayerData[playerid][pSkin], PlayerData[playerid][pX], PlayerData[playerid][pY], PlayerData[playerid][pZ], PlayerData[playerid][pAngle], 0, 0, 0, 0, 0, 0);
    KillTimer(GetGVarInt("SceneTime", playerid));
	ShowPlayerCameraScene(playerid, SCENE_SKYSPAWN);
}

PUBLIC:IntroTimer(playerid)
{
	new time = GetGVarInt("IntroTime", playerid);
    switch(time)
	{
	    case 4://SF Hill
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 在这里,丰富的"#TEXT_FADEGREEN"自然资源"#TEXT_WHITE"让这里"#TEXT_FADEGREEN"生机滚滚");
	        InterpolateCameraPos(playerid, -2487.9976,-49.0096,150.0000, -2100.0449,-608.9029,150.0000, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -2517.3721,-448.4011,150.0000, -2302.2537,-636.8491,150.0000, 10000, CAMERA_MOVE);
	    }
		case 8://Forest1
	    {
	        InterpolateCameraPos(playerid, -1709.1294,-2493.9509,161.3896, -1424.5385,-2644.4788,138.1253, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -1202.3993,-2372.1443,63.6599, -1027.1134,-2534.4963,115.3883, 10000, CAMERA_MOVE);
	    }
	    case 12://Forest2
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 你可以把在森林里采集到的"#TEXT_FADEGREEN"种子"#TEXT_WHITE"带回你的庭院种出各式各样的植物");
	        InterpolateCameraPos(playerid, 800.1116,44.3359,83.5255, 396.6689,-612.3711,80.6150, 20000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 948.7486,-293.2927,58.5641, 705.1101,-563.2098,21.3363, 20000, CAMERA_MOVE);
	    }
	    case 20://Forest3
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 抑或是探索与狩猎各式各样的"#TEXT_YELLOW"野生动物");
	        InterpolateCameraPos(playerid, 948.7486,-293.2927,70.5641, 1129.7531,-4.6828,100.6304, 20000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 1624.8169,-226.2349,41.0503, 1553.8831,114.2552,29.4611, 20000, CAMERA_MOVE);
	    }
	    case 28://Dam
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 不管是"#TEXT_FADEGREEN"森林"#TEXT_WHITE"还是"#TEXT_FADEYELLOW"沙漠");
	        InterpolateCameraPos(playerid, -784.9875,1213.8369,128.3110, -724.2027,2125.7327,128.3110, 12000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid,-720.5411,2234.0767,42.0401, -720.5411,2234.0767,42.0401, 12000, CAMERA_MOVE);
	    }
	    case 32://Desert1
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 你都能在这里与丰富的生态系互动");
	        InterpolateCameraPos(playerid, 81.8456,2168.9868,158.9923, -469.8293,2400.7031,133.7005, 15000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -677.6341,2627.1218,145.1621, -677.6341,2627.1218,145.1621, 15000, CAMERA_MOVE);
	    }
	    //38-42 hype
	    case 38://Red Bridge
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 当然,不只是这些而已");
	        InterpolateCameraPos(playerid, -2417.1831,1343.9517,180.0000, -2475.2288,2095.9089,180.0000, 5000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -2681.3206,1594.0970,64.6259, -2681.4465,1930.1635,64.6259, 5000, CAMERA_MOVE);
	    }
	    case 40://LS Watchtower
	    {
	        InterpolateCameraPos(playerid, 1694.9735,-2053.6003,140.7767, 1061.9502,-2040.9073,140.7767, 5000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 971.5495,-2033.7633,59.8606, 971.5495,-2033.7633,59.8606, 5000, CAMERA_MOVE);
	    }
	    case 42://LS Suburban
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 在"#TEXT_FADEBLUE"各大都市"#TEXT_WHITE",你可以在这里开拓属于你的一片天");
	        InterpolateCameraPos(playerid, 1767.8367,-1402.8757,101.2310, 1737.6460,-1804.0231,101.2310, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 2213.8679,-1753.9135,13.3373, 2216.5674,-2002.5681,13.3413, 10000, CAMERA_MOVE);
	    }
	    case 46://LS Tower
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 不论是在高楼林立的"#TEXT_FADEBLUE"商业区"#TEXT_WHITE"建立你的企业中心");
	        InterpolateCameraPos(playerid, 1161.0363,-1260.3258,293.0835, 1723.5388,-1017.9249,293.0835, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 1550.3202,-1344.7373,293.0835, 1550.3202,-1344.7373,293.0835, 10000, CAMERA_MOVE);
	    }
	    case 50://SF Park
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 或是与你的兄弟姊妹一起建立"#TEXT_FADERED"帮会"#TEXT_WHITE"一起争夺天下");
	        InterpolateCameraPos(playerid, -2171.8684,-152.5657,150.0000, -2116.9153,416.8195,150.0000, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -2422.4661,231.4016,35.1719, -2422.4661,231.4016,35.1719, 10000, CAMERA_MOVE);
	    }
	    case 54://SF Residential
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 又或是只想安稳平和地过着简单的生活");
	        InterpolateCameraPos(playerid, -2556.5020,1490.0272,150.0000, -1911.5668,1456.5453,150.0000, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid,-2381.4819,1133.0203,63.9664, -1774.8119,1114.8129,63.9664, 10000, CAMERA_MOVE);
	    }
	    case 58://LV Residential
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 在这里,都是你的选择");
	        InterpolateCameraPos(playerid, 1337.7202,1869.1715,73.9820, 1566.9656,2010.0466,60.8143, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid,1490.0952,1969.4124,10.8202, 1709.1516,2094.2944,10.6719, 10000, CAMERA_MOVE);
	    }
	    case 62://LV Strip
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 你可以在这里享受我们的各项活动以及有趣的游戏模式");
	        InterpolateCameraPos(playerid, 2105.3564,2143.4683,84.3588, 2415.1641,2142.4441,30.2658, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid,2534.0139,2143.0317,31.6704, 2534.0139,2143.0317,31.6704, 10000, CAMERA_MOVE);
	    }
	    case 66://LS Industrial
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 或是在这里掏金奋斗成为大富翁");
	        InterpolateCameraPos(playerid, 2790.1743,-1979.2269,99.1266,2455.5327,-2002.2932,99.1266, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 2580.8789,-2213.5591,45.9842, 2185.7595,-2291.5435,55.5810, 10000, CAMERA_MOVE);
	    }
	    case 70://SF Industrial
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 又或是成为地下世界的霸主");
	        InterpolateCameraPos(playerid, -1777.8185,-180.6468,55.5224, -1777.7250,133.4069,55.5224, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -1569.8142,97.2218,49.8569, -1568.8313,289.7324,54.4261, 10000, CAMERA_MOVE);
	    }
	    case 74://SF Tower
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 或只是在这里简简单单的交个朋友");
	        InterpolateCameraPos(playerid, -1753.7461,449.7998,238.2733, -1529.8041,857.6693,228.2430, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -1785.8380,892.6256,219.8306, -1785.8380,892.6256,219.8306, 10000, CAMERA_MOVE);
	    }
	    case 78://Santa Maria Beach
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 在这里,在"#TEXT_PINKRED"自由国度"#TEXT_WHITE",通通都可以实现");
	        InterpolateCameraPos(playerid, 304.5914,-2151.3320,48.3931, 333.7699,-1587.8445,104.7748, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 387.4251,-2028.6362,23.4611, 271.0882,-1258.1479,108.9428, 10000, CAMERA_MOVE);
	    }
	    case 82://Mount Chiliad
	    {
	        ClearChatbox(playerid, 10);
	        SendClientMessage(playerid, COLOR_WHITE, " 那么现在,开始我们的旅途吧!");
	        InterpolateCameraPos(playerid, -2065.3789,-2044.3597,491.4935, -2091.9238,-1527.0417,523.4196, 10000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -2332.5081,-1650.6647,483.9682, -2332.5081,-1650.6647,483.9682, 10000, CAMERA_MOVE);
	    }
	    case 86://Spawn
	    {
	        KillTimer(GetGVarInt("SceneTime", playerid));
	        DeleteGVar("IntroTime", playerid);
	        PlayerData[playerid][pReg] = 1;
	        ShowPlayerCameraScene(playerid, SCENE_SKYSPAWN);
	        return;
	    }
	}
	SetGVarInt("IntroTime", time+1, playerid);
}

PUBLIC:CutScene(playerid, scene)
{
    new cutscene;
	switch(scene)
	{
	    case 0://切换重生
		{
			ResetPlayerHideTmp(playerid);
		    KillTimer(GetGVarInt("SceneTime", playerid));
		    TogglePlayerSpectating(playerid, false);
		    TextDrawHideForPlayer(playerid, Logo1);
		    SetCameraBehindPlayer(playerid);
		    PlayerPlaySound(playerid, 1131,0.0,0.0,0.0);
		}
	    case 1://空中滞留
	    {
	        new Float:cx, Float:cy, Float:cz,
			Float:randX = float(-3000+random(6000)), Float:randY = float(-3000+random(6000));
			GetPlayerCameraPos(playerid, cx, cy, cz);
	        InterpolateCameraPos(playerid, cx, cy, 600.0, randX, randY, 600.0, 60000, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, cx, cy, 0.0, randX, randY, 0.0, 60000, CAMERA_MOVE);
			cutscene = SetPlayerTimerEx(playerid, "CutScene", 60000, false, "id", playerid, 1);
			SetGVarInt("SceneTime", cutscene, playerid);
	    }
	    case 2://坠落切换1
	    {
	        new Float:cx, Float:cy, Float:cz;
	        GetPlayerLastSpawnPos(playerid, cx, cy, cz);
			SetPlayerCameraPos(playerid,  cx, cy, cz+300.0);
			SetPlayerCameraLookAt(playerid,  cx, cy, 0.0);
			PlayerPlaySound(playerid, 1131,0.0,0.0,0.0);
			cutscene = SetPlayerTimerEx(playerid, "CutScene", 1500, false, "id", playerid, 3);
			SetGVarInt("SceneTime", cutscene, playerid);
		}
		case 3://坠落切换2
	    {
	        new Float:cx, Float:cy, Float:cz;
	        GetPlayerLastSpawnPos(playerid, cx, cy, cz);
			SetPlayerCameraPos(playerid,  cx, cy, cz+100.0);
			SetPlayerCameraLookAt(playerid,  cx, cy, 0.0);
			PlayerPlaySound(playerid, 1131,0.0,0.0,0.0);
			cutscene = SetPlayerTimerEx(playerid, "CutScene", 1500, false, "id", playerid, 0);
			SetGVarInt("SceneTime", cutscene, playerid);
		}
	}
}

stock GetPlayerLastSpawnPos(playerid, &Float:px, &Float:py, &Float:pz)
{
	new id;
    switch(PlayerData[playerid][pSpawnType])
	{
		case SPAWN_ESTATE, SPAWN_RENT:
		{
   			id = EstateSqlIDToID(PlayerData[playerid][pSpawn]);
   			px = EstateData[id][eX],
			py = EstateData[id][eY],
			pz = EstateData[id][eZ];
		}
		case SPAWN_POLICE:
		{
   			id = PlayerData[playerid][pSpawn];
   			px = PoliceSpawn[id][dpsoutX],
			py = PoliceSpawn[id][dpsoutY],
			pz = PoliceSpawn[id][dpsoutZ];
		}
        case SPAWN_MEDIC:
		{
   			id = PlayerData[playerid][pSpawn];
   			px = MedicSpawn[id][dpsoutX],
			py = MedicSpawn[id][dpsoutY],
			pz = MedicSpawn[id][dpsoutZ];
		}
		case SPAWN_GOVERNMENT:
		{
   			id = PlayerData[playerid][pSpawn];
   			px = GovernmentSpawn[id][dpsoutX],
			py = GovernmentSpawn[id][dpsoutY],
			pz = GovernmentSpawn[id][dpsoutZ];
		}
		case SPAWN_COUNSELOR:
		{
   			id = PlayerData[playerid][pSpawn];
   			px = CounselorSpawn[id][dpsoutX],
			py = CounselorSpawn[id][dpsoutY],
			pz = CounselorSpawn[id][dpsoutZ];
		}
		default:
		{
		    if((PlayerData[playerid][pX] == 0.0 && PlayerData[playerid][pY] == 0.0 && PlayerData[playerid][pZ] == 0.0) || PlayerData[playerid][pReg] == 0)
		    {
		        px = -4500.0, py = 0.0, pz = 400.0;
		    }
		    else
		    {
	   			px = PlayerData[playerid][pX],
				py = PlayerData[playerid][pY],
				pz = PlayerData[playerid][pZ];
			}
		}
	}
}

PUBLIC:LandMineExplode(id)
{
    CreateExplosion(DropItem[id][idX], DropItem[id][idY], DropItem[id][idZ], 0, 6.0);
    DeleteDropItem(id);
}

//NPC
stock CreateNPC(skin, weaponid, Float:php, Float:par, Float:px, Float:py, Float:pz, Float:pangle, intid, worldid, level=NPC_NORMAL, hostile=1, stay=0, team=NTEAM_NONE)
{
	new name[24], i,
	count = GetGVarInt("NPCCount");

	format(name, 24, "npc_%d", count);
	new npcid = FCNPC_Create(name);

    if(npcid == INVALID_PLAYER_ID) return -1;
    FCNPC_Spawn(npcid, skin, px, py, pz);
    FCNPC_SetWeapon(npcid, weaponid);
	FCNPC_SetAngle(npcid, pangle);
	FCNPC_SetVirtualWorld(npcid, worldid);
	FCNPC_SetInterior(npcid, intid);
 	FCNPC_SetHealth(npcid, php);
	FCNPC_SetArmour(npcid, par);
	FCNPC_UseInfiniteAmmo(npcid, true);
	FCNPC_SetWeaponClipSize(npcid, weaponid, WeaponsList[weaponid][wDefaultAmmo]);
    switch(level)
    {
        case NPC_NORMAL:
        {
			FCNPC_SetWeaponAccuracy(npcid, weaponid, 0.2);
			for(i = 0; i < 11; i++) FCNPC_SetWeaponSkillLevel(npcid, i, 300);
        }
        case NPC_NOOB:
        {
			FCNPC_SetWeaponAccuracy(npcid, weaponid, 0.0);
			for(i = 0; i < 11; i++) FCNPC_SetWeaponSkillLevel(npcid, i, 0);
        }
		case NPC_GANGSTER:
		{
			FCNPC_SetWeaponAccuracy(npcid, weaponid, 0.3);
			for(i = 0; i < 11; i++) FCNPC_SetWeaponSkillLevel(npcid, i, 500);
        }
		case NPC_HITMAN:
		{
			FCNPC_SetWeaponAccuracy(npcid, weaponid, 0.6);
			for(i = 0; i < 11; i++) FCNPC_SetWeaponSkillLevel(npcid, i, 998);
        }
		case NPC_SUPER:
		{
			FCNPC_SetWeaponAccuracy(npcid, weaponid, 1.0);
			for(i = 0; i < 11; i++) FCNPC_SetWeaponSkillLevel(npcid, i, 999);
        }
	}
	SetGVarInt("NPCHostile", hostile, npcid);
	SetGVarInt("NPCTeam", team, npcid);
	SetGVarInt("NPCLevel", level, npcid);
	SetGVarInt("NPCStay", stay, npcid);
	SetGVarInt("NPCCount", count+1);
	DeleteGVar("DeadNPC", npcid);

	return npcid;
}

PUBLIC:DestroyDeadNPC(npcid)
{
	if(GetGVarInt("Pet", npcid) == 0 && GetGVarInt("DeadNPC", npcid) == 1)
	{
	    DestroyNPC(npcid);
	}
}

stock DestroyNPC(npcid)
{
    DeleteGVar("Animal", npcid);
    DeleteGVar("NPCLevel", npcid);
    DeleteGVar("NPCTeam", npcid);
    DeleteGVar("NPCHostile", npcid);
    DeleteGVar("NPCMW", npcid);
    DeleteGVar("NPCMWID", npcid);
    DeleteGVar("DeadNPC", npcid);
    DeleteGVar("Pet", npcid);
    DeleteGVar("NPCGym", npcid);
    DeleteGVar("MSTargetNPC", npcid);
    DeleteGVar("MSAlliesNPC", npcid);
    DeleteGVar("MSRunnerNPC", npcid);
    DeleteGVar("MSDropNPC", npcid);
    DeleteGVar("PlayingBack", npcid);
    DeleteGVar("NPCEnteringVeh", npcid);
    DeleteGVar("NUnStreamDel", npcid);
	DeleteGVar("NZNPC", npcid);

    ClearNPCTarget(npcid);
    if(FCNPC_IsValid(npcid))
	{
    	FCNPC_Destroy(npcid);
    }
}

public FCNPC_OnSpawn(npcid)
{
    SetPlayerColor(npcid, PLAYER_WHITE);
}

public FCNPC_OnStreamIn(npcid, forplayerid)
{
    UpdateNPCColor(npcid, forplayerid);
}

public FCNPC_OnStreamOut(npcid, forplayerid)
{
	if(GetGVarInt("NUnStreamDel", npcid) == 1) DestroyNPC(npcid);
}

public FCNPC_OnFinishPlayback(npcid)
{
	DeleteGVar("PlayingBack", npcid);
	new mission = GetGVarInt("MSTargetNPC", npcid);
	switch(mission)
	{
	    case 32:
	    {
	        DeleteGVar("MSRunnerVeh", mission);
	        DeleteGVar("MSRunnerNPC", npcid);
	        if(FCNPC_GetHealth(npcid) > 0.0)
	        {
		        FCNPC_ExitVehicle(npcid);
		        FCNPC_SetWeapon(npcid, 29);
		        SendMissionMessage(mission, COLOR_WHITE, "把所有聚集的"#TEXT_RED"恐怖份子"#TEXT_WHITE"解决掉!");
		    }
		    else SendMissionMessage(mission, COLOR_WHITE, "在"#TEXT_YELLOW"追踪目标"#TEXT_WHITE"到达目的地前就已经死亡了,现在得在时间不够前靠地毯式搜索他们的会合点了");
	    }
	}
}

public FCNPC_OnVehicleEntryComplete(npcid, vehicleid, seatid)
{
    new mission = GetGVarInt("MSTargetNPC", npcid), engine, lights, alarm, doors, bonnet, boot, objective;
    GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	SetVehicleParamsEx(vehicleid, 1, lights, alarm, doors, bonnet, boot, objective);
	DeleteGVar("NPCEnteringVeh", npcid);
	switch(mission)
	{
	    case 32:
	    {
	        switch(GetGVarInt("MSTargetPos", mission))
	        {
	            case 0: FCNPC_StartPlayingPlayback(npcid, "TorenoM1_1");
	            case 1: FCNPC_StartPlayingPlayback(npcid, "TorenoM1_2");
	            case 2: FCNPC_StartPlayingPlayback(npcid, "TorenoM1_3");
	            case 3: FCNPC_StartPlayingPlayback(npcid, "TorenoM1_4");
	        }
	        UpdateGlobalMission(32, 3);
	    }
	}
}

stock UpdateNPCColor(npcid, forplayerid)
{
	if(GetGVarInt("Mission", forplayerid) > 0)
	{
	    new mission = GetGVarInt("Mission", forplayerid);
		if(GetGVarInt("MSTargetNPC", npcid) == mission && mission != 25)
		{
			if(GetGVarInt("DeadNPC", npcid) == 1) SetPlayerMarkerForPlayer(forplayerid, npcid, PLAYER_WHITE);
			else
			{
				SetPlayerMarkerForPlayer(forplayerid, npcid, COLOR_RED);
			}
		}
		else if(GetGVarInt("MSAlliesNPC", npcid) == mission)
		{
			if(GetGVarInt("DeadNPC", npcid) == 1) SetPlayerMarkerForPlayer(forplayerid, npcid, PLAYER_WHITE);
			else
			{
				SetPlayerMarkerForPlayer(forplayerid, npcid, COLOR_SKYBLUE);
			}
		}
	}
	else if(GetGVarInt("NZNPC", npcid) > 0)
	{
		if(GetGVarInt("AtkNZ", forplayerid) == GetGVarInt("NZNPC", npcid))
		{
			SetPlayerMarkerForPlayer(forplayerid, npcid, COLOR_RED);
		}
	}
}

stock NPCDamageRunaway(npcid, fromid)
{
	new Float:px, Float:py, Float:dx, Float:dy, Float:dz1, Float:dz2, Float:da;
	GetPlayerPos(fromid, px, py, dz1);
	FCNPC_GetPosition(npcid, dx, dy, dz1);
	if(dz1 > 0.0)
	{
		GetAngleToXY(px, py, dx, dy, da);
		for(new i=0; i < MAX_NPCS; i++)
		{
			if(dz2 < 1.0 || -15.0 > dz2-dz1 > 15.0)
			{
				GetXYInFrontOfPos(dx, dy, da+(180.0+float(random(60)-random(60))), dx, dy, 4.0+float(random(8)));
				CA_FindZ_For2DCoord(dx, dy, dz2);
			}
		}
		new animalid = GetGVarInt("Animal", npcid);
		FCNPC_GoTo(npcid, dx, dy, dz2, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	}
}

stock NPCRunaway(npcid, fromid)
{
	new Float:px, Float:py, Float:dx, Float:dy, Float:dz1, Float:dz2, Float:da;
	GetPlayerPos(fromid, px, py, dz1);
	FCNPC_GetPosition(npcid, dx, dy, dz1);
	if(dz1 > 0.0)
	{
		GetAngleToXY(px, py, dx, dy, da);
		//for(new i=0; i < MAX_NPCS; i++)
		if(dz2 < 1.0 || -15.0 > dz2-dz1 > 15.0)
		{
			GetXYInFrontOfPos(dx, dy, da+(180.0+float(random(60)-random(60))), dx, dy, 4.0+float(random(8)));
			CA_FindZ_For2DCoord(dx, dy, dz2);
		}
		new animalid = GetGVarInt("Animal", npcid);
		FCNPC_GoTo(npcid, dx, dy, dz2, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	}
}

stock NPCToTarget(npcid, type, targetid, attack=0, trace=0, dontstop=0)
{
	new Float:tx, Float:ty, Float:tz, movetimer, Float:stopdistance;

	if(FCNPC_GetHealth(npcid) > 0.0 && IsPlayerNPC(npcid))
	{
	    ClearNPCTarget(npcid);
		switch(type)
		{
			case TARGET_PLAYER:
			{
				GetPlayerPos(targetid, tx, ty, tz);
				GetXYLeftToPlayer(targetid, tx, ty, 0.5);//取得玩家身旁的座标(**移动的最终终点)
			}
			case TARGET_NPC:
			{
    			FCNPC_GetPosition(targetid, tx, ty, tz);
				GetXYInFrontOfPos(tx, ty, 0.0, tx, ty, 0.8);
			}
			case TARGET_DROP:
			{
				GetXYInFrontOfPos(DropItem[targetid][idX], DropItem[targetid][idY], 0.0, tx, ty, 0.8);
				tz = DropItem[targetid][idZ];
			}
			case TARGET_VEHICLE:
			{
				GetVehiclePos(targetid, tx, ty, tz);
				GetXYInFrontOfPos(tx, ty, 0.0, tx, ty, 0.8);
			}
		}

		stopdistance = WeaponsList[FCNPC_GetWeapon(npcid)][wRange];
	    if((type == TARGET_PLAYER && GetGVarInt("Hiding", targetid) == 1) || (GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 40.0+stopdistance && trace == 0) || (CA_IsPlayerFacingWater(npcid) && GetGVarInt("Animal", npcid) != 23))
		{
			ClearNPCTarget(npcid);
		}
		else if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > stopdistance)
 		{
   			SetGVarInt("NPCTID", targetid, npcid);
			SetGVarInt("NPCTType", type, npcid);
			SetGVarInt("NPCTrace", trace, npcid);
			if(attack == 1) SetGVarInt("NPCAttack", 1, npcid);
			SetGVarInt("NPCDontStop", dontstop, npcid);
			if(GetGVarInt("NPCStay", npcid) == 0)
	        {
	            new animalid = GetGVarInt("Animal", npcid);
	            switch(type)
	            {
	                case TARGET_PLAYER: FCNPC_GoToPlayer(npcid, targetid, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_NPC: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_DROP: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_VEHICLE: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	            }
	            //FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
				movetimer = SetTimerEx("MoveNPCToTarget", 250, 0, "i", npcid);
				SetGVarInt("NPCMoveTimer", movetimer, npcid);
			}
			else ClearNPCTarget(npcid);
		}
		else
		{
			if(attack == 1)//如果目标要进行攻击的话
			{
			    SetGVarInt("NPCTID", targetid, npcid);
				SetGVarInt("NPCTType", type, npcid);
			    NPCAttack(npcid, type, targetid);
			}
			FCNPC_Stop(npcid);
		}
	}
}

PUBLIC:MoveNPCToTarget(npcid)
{
    new movetimer;
	if(GetGVarInt("NPCTType", npcid) != TARGET_NONE && FCNPC_GetHealth(npcid) > 0.0 && IsPlayerNPC(npcid))
	{
	    new
		type = GetGVarInt("NPCTType", npcid),
		targetid = GetGVarInt("NPCTID", npcid),
		attack = GetGVarInt("NPCAttack", npcid),
		trace = GetGVarInt("NPCTrace", npcid),
		Float:tx, Float:ty, Float:tz, Float:stopdistance;

	    switch(type)
		{
		    case TARGET_PLAYER:
			{
			    GetPlayerPos(targetid, tx, ty, tz);
			    if(GetPlayerHealth_Fix(targetid) < 1.0)
				{
					ClearNPCTarget(npcid);
                    return;
				}
				else
				{
					if(IsPlayerInAnyVehicle(targetid)) GetXYInFrontOfPlayer(targetid, tx, ty, 3.5);
					else GetXYLeftToPlayer(targetid, tx, ty, 0.5);
				}
			}
			case TARGET_NPC:
			{
			    if(FCNPC_GetHealth(targetid) < 1.0)
			    {
			        ClearNPCTarget(npcid);
                    return;
			    }
			    else
			    {
	       			FCNPC_GetPosition(targetid, tx, ty, tz);
					GetXYInFrontOfPos(tx, ty, 0.0, tx, ty, 0.8);
				}
			}
			case TARGET_DROP:
			{
				if(DropItem[targetid][idCreated] == 0)
				{
					ClearNPCTarget(npcid);
                    return;
				}
				else GetXYInFrontOfPos(DropItem[targetid][idX], DropItem[targetid][idY], 0.0, tx, ty, 0.8);
				tz = DropItem[targetid][idZ];
			}
			case TARGET_VEHICLE:
			{
			    GetVehiclePos(targetid, tx, ty, tz);
				GetXYInFrontOfPos(tx, ty, 0.0, tx, ty, 2.0);
			}
			default:
			{
			    ClearNPCTarget(npcid);
			    return;
			}
		}

		stopdistance = WeaponsList[FCNPC_GetWeapon(npcid)][wRange];
		if((type == TARGET_PLAYER && GetGVarInt("Hiding", targetid) == 1) || (GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 40.0+stopdistance && trace == 0) || (CA_IsPlayerFacingWater(npcid) && GetGVarInt("Animal", npcid) != 23))
		{
			ClearNPCTarget(npcid);
		}
	    else if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > stopdistance)
	    {
	        if(GetGVarInt("NPCStay", npcid) == 0)
	        {
		        new animalid = GetGVarInt("Animal", npcid);
	            switch(type)
	            {
	                case TARGET_PLAYER: FCNPC_GoToPlayer(npcid, targetid, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_NPC: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_DROP: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	                case TARGET_VEHICLE: FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
	            }
	   			//FCNPC_GoTo(npcid, tx, ty, tz, FCNPC_MOVE_TYPE_RUN, AnimalsList[animalid][amlSpeed], FCNPC_MOVE_MODE_COLANDREAS, FCNPC_MOVE_PATHFINDING_RAYCAST);
			    movetimer = SetTimerEx("MoveNPCToTarget", 250, 0, "i", npcid);
			    SetGVarInt("NPCMoveTimer", movetimer, npcid);
			}
			else ClearNPCTarget(npcid);
		}
		else
		{
		    if(attack == 1)//如果目标要进行攻击的话
		    {
		        SetGVarInt("NPCTID", targetid, npcid);
				SetGVarInt("NPCTType", type, npcid);
		    	NPCAttack(npcid, type, targetid);
			}
			else
			{
			    FCNPC_Stop(npcid);
			    if(GetGVarInt("NPCDontStop", npcid) != 0)
				{
					movetimer = SetTimerEx("MoveNPCToTarget", 250, 0, "i", npcid);
					SetGVarInt("NPCMoveTimer", movetimer, npcid);
			    }
			}
		}
	}
}

PUBLIC:ClearNPCTarget(npcid)
{
	KillTimer(GetGVarInt("NPCMoveTimer", npcid));
	KillTimer(GetGVarInt("AttackTimer", npcid));
    DeleteGVar("NPCTID", npcid);
	DeleteGVar("NPCTType", npcid);
	DeleteGVar("NPCTrace", npcid);
	DeleteGVar("NPCAttack", npcid);
	DeleteGVar("NPCDontStop", npcid);
	FCNPC_Stop(npcid);
	FCNPC_StopAim(npcid);
	FCNPC_StopAttack(npcid);
}

PUBLIC:NPCAttack(npcid, type, targetid)
{
    new animalid = GetGVarInt("Animal", npcid);
	if(FCNPC_GetHealth(npcid) > 0.0 && IsPlayerNPC(npcid))
	{
		switch(type)
		{
			case TARGET_PLAYER:
			{
			    if(GetGVarInt("Pet", npcid) == 1 && GetGVarInt("PetOwner", npcid) == targetid){}
			    else
			    {
				    if(IsPlayerInAnyVehicle(targetid))
				    {
				        NPCStartAttack(npcid);
				    }
				    else
				    {
						if(GetPlayerHealth_Fix(targetid) > 0.0 && GetGVarInt("Spawned", targetid) == 1)
						{
						    if(animalid == 0)//不是动物
						    {
						        NPCStartAttack(npcid);
						    }
						    else
						    {
							    if(GetGVarInt("PlayerAnimal", targetid) == ANIMAL_NONE) ApplyAnimation(targetid, "ped","gas_cwr", 4.1, 1, 1, 1, 0, 1000, 1);
								ApplyAnimation(npcid, "ped", "jump_launch", 4.1, 0, 0, 0, 0, 0);
								new Float:damage = AnimalsList[animalid][amlAttack];
								FCNPC_OnGiveDamage(npcid, targetid, damage, 0, 4);
								SetGVarInt("NPCAttackCD", 1, npcid);
							    SetTimerEx("Reattack", 3000, 0, "iii", npcid, TARGET_PLAYER, targetid);//3秒后继续攻击
							}
						}
						else
						{
						    ClearNPCTarget(npcid);
						}
					}
				}
			}
			case TARGET_NPC:
			{
			    if(IsPlayerInAnyVehicle(targetid))
				{
				    NPCStartAttack(npcid);
				}
				else
				{
				    if(animalid == 0)//不是动物
					{
						NPCStartAttack(npcid);
					}
					else
					{
						FCNPC_GiveHealth(targetid, -AnimalsList[animalid][amlAttack]);
						ApplyAnimation(targetid, "ped", "hit_gun_butt", 4.1, 0, 0, 0, 0, 0);
						ApplyAnimation(npcid, "ped", "jump_launch", 4.1, 0, 0, 0, 0, 0);
					}
					if(FCNPC_GetHealth(targetid) > 0.0)
					{
					    SetGVarInt("NPCAttackCD", 1, npcid);
					    SetTimerEx("Reattack", 1500, 0, "iii", targetid, TARGET_NPC, npcid);//反击
					}
	   				else
					{
					    FCNPC_OnDeath(targetid, npcid, 0);
					    ApplyAnimation(targetid, "crack", "crckidle2", 4.1, 1, 0, 0, 0, 0);
						ClearNPCTarget(npcid);
					}
				}
			}
			case TARGET_DROP://吃掉/摧毁掉落物
			{
			    static string[144];
			    if(GetGVarInt("Pet", npcid) == 1)
	            {
	                new petid = GetGVarInt("PetID", npcid),
						ownerid = GetGVarInt("PetOwner", npcid);
	                PetData[ownerid][petid][petHunger] = 100.0;
	                PetData[ownerid][petid][petLove] += 1.0;
	                FCNPC_SetHealth(npcid, 100.0);
	                format(string, sizeof(string), "** %s大快朵颐吃了食物,恢复了生命与饥饿值 **", AnimalsList[animalid][amlName]);
					SendRangeNPCMessage(25.0, npcid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
	            }
	            else
	            {
	                new rand = random(AnimalsList[animalid][amlObey]);
	                if(rand == 0)
					{
						SetGVarInt("Obedient", 1, npcid);//吃东西有机率变顺从
						format(string, sizeof(string), "** 这只 %s 吃的津津有味,看起来被驯服了 **", AnimalsList[animalid][amlName]);
						SendRangeNPCMessage(25.0, npcid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					}
	            }
			    ApplyAnimation(npcid, "bomber", "bom_plant", 4.1, 0, 0, 0, 0, 0);
				DeleteDropItem(targetid);
				ClearNPCTarget(npcid);
			}
			case TARGET_VEHICLE:
			{
			    if(FCNPC_GetHealth(targetid) > 0.0 && GetGVarInt("Spawned", targetid) == 1)
				{
					NPCStartAttack(npcid);
				}
			}
		}
	}
}

PUBLIC:Reattack(npcid, type, targetid)
{
    DeleteGVar("NPCAttackCD", npcid);
 	NPCToTarget(npcid, type, targetid, 1);
}

PUBLIC:NPCStartAttack(npcid)
{
	if(FCNPC_GetVehicleID(npcid) > 0) FCNPC_ExitVehicle(npcid);

	new Float:tx, Float:ty, Float:tz, attacktimer, towait,
	type = GetGVarInt("NPCTType", npcid),
	targetid = GetGVarInt("NPCTID", npcid);

    KillTimer(GetGVarInt("AttackTimer", npcid));
	switch(GetGVarInt("NPCLevel", npcid))
	{
	    case NPC_NOOB: towait = 1000;
	    case NPC_NORMAL: towait = 1500;
	    case NPC_GANGSTER: towait = 2500;
	    case NPC_HITMAN: towait = 2500;
	    case NPC_SUPER: towait = 5000;
	}

	switch(type)
	{
	    case TARGET_NONE:
		{
			FCNPC_StopAim(npcid);
			ClearNPCTarget(npcid);
		}
		case TARGET_PLAYER, TARGET_NPC:
		{
		    FCNPC_Stop(npcid);
		    if(IsNPCArmed(npcid))
		    {
          		FCNPC_AimAtPlayer(npcid, targetid, true);
				if(!IsNPCArmedAutoGun(npcid)) towait = 6000;
			}
			else
			{
			    FCNPC_SetAngleToPlayer(npcid, targetid);
			    if(FCNPC_GetFightingStyle(npcid) == 4) FCNPC_MeleeAttack(npcid, -1, false);
			    else FCNPC_MeleeAttack(npcid, -1, true);
				towait = 1500;
			}
			attacktimer = SetTimerEx("AttackWait", towait, false, "i", npcid);
			SetGVarInt("AttackTimer", attacktimer, npcid);
		}
		case TARGET_VEHICLE:
		{
		    FCNPC_Stop(npcid);
		    GetVehiclePos(targetid, tx, ty, tz);
		    if(IsNPCArmed(npcid))
		    {
		        FCNPC_AimAt(npcid, tx, ty, tz, true);
				if(!IsNPCArmedAutoGun(npcid)) towait = 6000;
			}
		    else
			{
			    FCNPC_SetAngleToPos(npcid, tx, ty);
				FCNPC_MeleeAttack(npcid);
				towait = 1500;
			}
			attacktimer = SetTimerEx("AttackWait", towait, false, "i", npcid);
			SetGVarInt("AttackTimer", attacktimer, npcid);
		}
	}
}

PUBLIC:AttackWait(npcid)
{//停顿
	new Float:tx, Float:ty, Float:tz, attacktimer,
    type = GetGVarInt("NPCTType", npcid),
	targetid = GetGVarInt("NPCTID", npcid);
	switch(type)
	{
	    case TARGET_NONE:
		{
			FCNPC_StopAim(npcid);
			KillTimer(GetGVarInt("AttackTimer", npcid));
			ClearNPCTarget(npcid);
		}
		case TARGET_PLAYER, TARGET_NPC:
		{
		    if(!IsPlayerConnected(targetid) || GetPlayerHealth_Fix(targetid) < 1.0)
			{
				FCNPC_StopAim(npcid);
				KillTimer(GetGVarInt("AttackTimer", npcid));
				ClearNPCTarget(npcid);
			}
			else
			{
			    GetPlayerPos(targetid, tx, ty, tz);
			    if(IsNPCArmed(npcid))
			    {
				    if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 25.0)
				    {
				        if(GetGVarInt("NPCStay", npcid) == 1)
				        {
				            FCNPC_StopAim(npcid);
							KillTimer(GetGVarInt("AttackTimer", npcid));
							ClearNPCTarget(npcid);
				        }
				        else
				        {
					        FCNPC_StopAim(npcid);
					        KillTimer(GetGVarInt("AttackTimer", npcid));
					        NPCToTarget(npcid, type, targetid, 1);
					    }
				    }
				    else
				    {
						FCNPC_AimAtPlayer(npcid, targetid, false);
						attacktimer = SetTimerEx("NPCStartAttack", 1500, false, "i", npcid);
						SetGVarInt("AttackTimer", attacktimer, npcid);
					}
				}
				else
				{
				    FCNPC_StopAttack(npcid);
				    if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 1.0)
				    {
				        KillTimer(GetGVarInt("AttackTimer", npcid));
				        NPCToTarget(npcid, type, targetid, 1);
				    }
				    else
				    {
				        attacktimer = SetTimerEx("NPCStartAttack", 1000, false, "i", npcid);
						SetGVarInt("AttackTimer", attacktimer, npcid);
				    }
				}
			}
		}
		case TARGET_VEHICLE:
		{
		    GetVehiclePos(targetid, tx, ty, tz);
		    if(IsNPCArmed(npcid))
		    {
			    if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 20.0)
			    {
			        FCNPC_StopAim(npcid);
			        KillTimer(GetGVarInt("AttackTimer", npcid));
	                NPCToTarget(npcid, type, targetid, 1);
			    }
			    else
			    {
				    FCNPC_AimAt(npcid, tx, ty, tz, false);
				    attacktimer = SetTimerEx("NPCStartAttack", 1500, false, "i", npcid);
				    SetGVarInt("AttackTimer", attacktimer, npcid);
				}
			}
			else
			{
			    FCNPC_StopAttack(npcid);
			    if(GetPlayerDistanceFromPointEx(npcid, tx, ty, tz) > 1.0)
			    {
			        KillTimer(GetGVarInt("AttackTimer", npcid));
			        NPCToTarget(npcid, type, targetid, 1);
			    }
			    else
			    {
			        attacktimer = SetTimerEx("NPCStartAttack", 1000, false, "i", npcid);
					SetGVarInt("AttackTimer", attacktimer, npcid);
			    }
			}
		}
	}
}

public FCNPC_OnGiveDamage(npcid, damagedid, Float:amount, weaponid, bodypart)
{
	new string[144],
	animalid = GetGVarInt("Animal", npcid);
    if(GetGVarInt("PetCalled", damagedid) == 1)
	{
		new Float:ax, Float:ay, Float:az,
		petid = GetGVarInt("CurrentPetID", damagedid);
		FCNPC_GetPosition(PetData[damagedid][petid][petNPC], ax, ay, az);
		if(GetPlayerDistanceFromPointEx(damagedid, ax, ay, az) < 50.0 && FCNPC_GetHealth(PetData[damagedid][petid][petNPC]) > 0.0 && GetGVarInt("NPCStay", PetData[damagedid][petid][petNPC]) == 0)
		{
	    	if(CanPetUseSkill(damagedid, petid, PET_SKILL_ATK) && npcid != PetData[damagedid][petid][petNPC])
			{
			    NPCToTarget(PetData[damagedid][petid][petNPC], TARGET_NPC, npcid, 1);
			}
		}
	}
	if(amount > GetPlayerHealth_Fix(damagedid) && !IsPlayerNPC(damagedid))
	{
	    if(animalid > 0)
	    {
			if(GetGVarInt("Pet", npcid) == 1)
			{
			    new ownerid = GetGVarInt("PetOwner", npcid), playername[MAX_PLAYER_NAME];
			    GetPlayerName(damagedid, playername, MAX_PLAYER_NAME);
			    format(string, sizeof(string), "** 你的宠物攻击了玩家 %s", playername);
			    SendClientMessage(ownerid, COLOR_YELLOW, string);
			}
		}
	}
    OnPlayerGiveDamage(npcid, damagedid, amount, weaponid, bodypart);
}

public FCNPC_OnDeath(npcid, killerid, reason)
{
	new string[144], animalid, playername[MAX_PLAYER_NAME], rand, Float:px, Float:py, Float:pz,
	pworld = FCNPC_GetVirtualWorld(npcid);

    FCNPC_GetPosition(npcid, px, py, pz);

	if(killerid != INVALID_PLAYER_ID)
	{
	    if(IsPlayerNPC(killerid))
		{
			if(GetGVarInt("Pet", killerid) == 1)
		    {
		        ClearNPCTarget(killerid);
		    	killerid = GetGVarInt("PetOwner", killerid);
		    }
		}

		if(GetGVarInt("DeadNPC", npcid) == 0)
		{
		    ShowXTarget(killerid);
			animalid = GetGVarInt("Animal", npcid);
			if(animalid == 0)//人
			{
			    if(GetGVarInt("Pet", npcid) == 1) {}
			    else if(GetGVarInt("NPCGym", npcid) > 0)//格斗教练
			    {
			        ForEachPlayer(i)
			        {
			            if(GetGVarInt("MoveFighting", i) == 0) continue;
			            if(GetGVarInt("NPCGym", npcid) == GetGVarInt("MoveFighting", i))
			            {
			                PlayerWinGymFight(i);
			            }
			        }
			    }
			    else
			    {
				    if(FCNPC_GetWeapon(npcid) > 0)
					{
						new weaponid = FCNPC_GetWeapon(npcid);
						CreateDropItem(ITEM_WEAPON, weaponid, WeaponsList[weaponid][wDefaultAmmo], px, py, pz, pworld);
					}
					switch(random(8))
					{
					    case 0: CreateDropItem(ITEM_USE, 29, 1, px, py, pz, pworld);//零食
					    case 1: CreateDropItem(ITEM_USE, 30, 1, px, py, pz, pworld);
					    case 2: CreateDropItem(ITEM_USE, 31, 1, px, py, pz, pworld);
					    case 3: CreateDropItem(ITEM_CASH, 1, 10+random(140), px, py, pz, pworld);
					}
					switch(GetGVarInt("NPCLevel", npcid))
					{
					    case NPC_GANGSTER: GivePlayerExp(killerid, 150, EXP_KILL_NPC);
					    case NPC_HITMAN: GivePlayerExp(killerid, 300, EXP_KILL_NPC);
					    case NPC_SUPER: GivePlayerExp(killerid, 500, EXP_KILL_NPC);
					}
					GivePlayerCurrentWeaponSkill(killerid, random(3));
				}
				SetGVarInt("DeadNPC", 1, npcid);
				SetTimerEx("DestroyDeadNPC", 2500, 0, "i", npcid);
				if(GetGVarInt("NPCMW", npcid) == 1)
				{
				    if(MatWar[GetGVarInt("NPCMWID", npcid)][mwHolder] == npcid) NPCDropMatWar(npcid);
				}
				else if(GetGVarInt("NZNPC", npcid) > 0)
				{
					new nzone = GetGVarInt("NZNPC", npcid),
						amount = GetGVarInt("NZAmount", nzone),
						ngang = NPCGangZone[nzone][ngzGang];
					SetGVarInt("AtkNZ", nzone, killerid);
					if(GetGVarInt("NZStatus", nzone) == STATUS_FINISHED && GetGVarInt("NZCD", nzone) == 0)
					{
						NPCGangZoneStart(nzone);
						format(string, sizeof(string), "** %s开始讨伐%s的地方帮派分子", PlayerData[killerid][pName], NPCGang[ngang][npgName]);
						SendClientMessageToAll(COLOR_YELLOW, string);
					}
					if(amount < 1) NPCGangZoneEnd(nzone);
				}
				else if(GetGVarInt("MSTargetNPC", npcid) > 0)
				{
				    new mission = GetGVarInt("MSTargetNPC", npcid);
				    switch(mission)
				    {
				        case 17://Sweet Mission 1
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"巴拉斯成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(17, 2);
				        }
				        case 19://Sweet Mission 3
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"目标", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(19, 3);
				        }
				        case 24://Trevor Mission 2
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"失落摩托车帮成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(24, 2);
				        }
				        case 25://Trevor Mission 3
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"政府探员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(25, 3);
				        }
				        case 27://Cesar Mission 2
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"维戈帮成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            if(GetGVarInt("MSDropNPC", npcid) == 1)
				            {
				                new drop = NPCMissionDrop(npcid);
				                ForEachPlayer(p)
				                {
				                    if(GetGVarInt("Mission", p) == mission)
				                    {
					                    SetPlayerMissionGPS(p, mission, DropItem[drop][idX], DropItem[drop][idY], DropItem[drop][idZ]);
					                    SendClientMessage(p, COLOR_WHITE, "发现"#TEXT_YELLOW"任务目标包裹"#TEXT_WHITE",尽速前往将其捡起");
					                }
				                }
				            }
				        }
				        case 28://Cesar Mission 3
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"维戈帮成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(28, 2);
				        }
				        case 30://Emmet Mission 2
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"交易成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            if(GetGVarInt("MSDropNPC", npcid) == 1)
				            {
				                new drop = NPCMissionDrop(npcid);
				                ForEachPlayer(p)
				                {
				                    if(GetGVarInt("Mission", p) == mission)
				                    {
					                    SetPlayerMissionGPS(p, mission, DropItem[drop][idX], DropItem[drop][idY], DropItem[drop][idZ]);
					                    SendClientMessage(p, COLOR_WHITE, "发现"#TEXT_YELLOW"任务目标包裹"#TEXT_WHITE",尽速前往将其捡起");
					                }
				                }
				            }
				        }
				        case 31://Emmet Mission 3
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"敌对军火商", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(31, 2);
				        }
				        case 32://Toreno Mission 1
				        {
				            if(GetGVarInt("MSRunnerNPC", npcid) == 1)
				            {
				                format(string, sizeof(string), ""#TEXT_RED"因为知道目的地的目标被杀了,现在无法得知他们的会合地点了,任务失败");
						        SendMissionMessage(mission, COLOR_WHITE, string);
				                StopGlobalMission(mission, 1);
				            }
				            else
				            {
					            if(GetGVarInt("Mission", killerid) == mission)
					            {
						            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"恐怖分子", PlayerData[killerid][pName]);
						            SendMissionMessage(mission, COLOR_WHITE, string);
						        }
								if(GetGVarInt("MissionStage", mission) > 2)
								{
					            	UpdateGlobalMission(32, 4);
					            }
					        }
				        }
				        case 34://Toreno Mission 3
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"外来分子", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(34, 2);
				        }
				        case 36://Woozie Mission 2
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"越南帮成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            UpdateGlobalMission(36, 2);
				        }
				        case 37://Woozie Mission 2
				        {
				            if(GetGVarInt("Mission", killerid) == mission)
				            {
					            format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"除掉了一名"#TEXT_RED"黑手党成员", PlayerData[killerid][pName]);
					            SendMissionMessage(mission, COLOR_WHITE, string);
					        }
				            if(GetGVarInt("MSDropNPC", npcid) == 1)
				            {
				                new drop = NPCMissionDrop(npcid);
				                ForEachPlayer(p)
				                {
				                    if(GetGVarInt("Mission", p) == mission)
				                    {
					                    SetPlayerMissionGPS(p, mission, DropItem[drop][idX], DropItem[drop][idY], DropItem[drop][idZ]);
					                    SendClientMessage(p, COLOR_WHITE, "发现"#TEXT_YELLOW"任务目标包裹"#TEXT_WHITE",尽速前往将其捡起");
					                }
				                }
				            }
				        }
				    }
				}
			}
			else//动物
			{
			    if(GetGVarInt("Pet", npcid) == 1)
			    {
			        new petid = GetGVarInt("PetID", npcid),
						ownerid = GetGVarInt("PetOwner", npcid);
			        PetData[ownerid][petid][petDying] = 1;
			        ApplyAnimation(npcid, "crack", "crckidle2", 4.1, 1, 0, 0, 0, 0);
			        if(ownerid == killerid)
			        {
				        PetData[ownerid][petid][petLove] -= 5.0;
				        if(PetData[ownerid][petid][petLove] < 0.0) PetData[ownerid][petid][petLove] = 0.0;
					}
					Log(petlog, INFO, "%s(%d)杀了%s(%d)的宠物%s(%d)", PlayerData[killerid][pName], PlayerData[killerid][pID], PlayerData[ownerid][pName], PlayerData[ownerid][pID], PetData[ownerid][petid][petName], PetData[ownerid][petid][petID]);
			    }
			    else
			    {
					GetPlayerName(killerid, playername, MAX_PLAYER_NAME);
					switch(AnimalsList[animalid][amlType])
					{
					    case ANIMAL_FOX:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只狐狸 **", playername);
					        rand = random(2);
					        switch(rand)
					        {
								case 0:{CreateDropItem(ITEM_USE, 83, 1, px, py, pz, pworld);}//兽皮
								case 1:{CreateDropItem(ITEM_USE, 162, 2, px, py, pz, pworld);}
							}
							CreateDropItem(ITEM_USE, 127, 1, px, py, pz, pworld);//狐狸皮草
							CreateDropItem(ITEM_USE, 85, 1+random(1), px, py, pz, pworld);//兽肉
							GivePlayerExp(killerid, 150, EXP_HUNT);
							ResourceData[aFox] --;
							if(ResourceData[aFox] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(14);
					    }
	          			case ANIMAL_WOLF:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只狼 **", playername);
					        rand = random(3);
					        switch(rand)
					        {
								case 0:{CreateDropItem(ITEM_USE, 83, 1, px, py, pz, pworld);}
								case 1:{CreateDropItem(ITEM_USE, 84, 1, px, py, pz, pworld);}
							}
							CreateDropItem(ITEM_USE, 129, 1, px, py, pz, pworld);//狼牙
							CreateDropItem(ITEM_USE, 162, 1, px, py, pz, pworld);//动物脂肪
							CreateDropItem(ITEM_USE, 85, 1+random(1), px, py, pz, pworld);//兽肉
							GivePlayerExp(killerid, 400, EXP_HUNT);
							ResourceData[aWolf] --;
							if(ResourceData[aWolf] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(16);
					    }
					    case ANIMAL_BEAR:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只熊 **", playername);
					        rand = random(3);
					        switch(rand)
					        {
								case 0:{CreateDropItem(ITEM_USE, 83, 3, px, py, pz, pworld);}
								case 1:{CreateDropItem(ITEM_USE, 84, 3, px, py, pz, pworld);}
							}
							CreateDropItem(ITEM_USE, 128, 1, px, py, pz, pworld);//熊掌
							CreateDropItem(ITEM_USE, 162, 4, px, py, pz, pworld);//动物脂肪
							CreateDropItem(ITEM_USE, 85, 1+random(2), px, py, pz, pworld);//兽肉
							GivePlayerExp(killerid, 550, EXP_HUNT);
							ResourceData[aBear] --;
							if(ResourceData[aBear] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(15);
					    }
					    case ANIMAL_PANDA:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只熊猫 **", playername);
							ResourceData[aPanda] --;
							if(ResourceData[aPanda] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(20);
					    }
					    case ANIMAL_DOG_S, ANIMAL_DOG_M, ANIMAL_DOG_L:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只狗 **", playername);
	            			GivePlayerExp(killerid, 150, EXP_HUNT);
							ResourceData[aDog] --;
							if(ResourceData[aDog] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(21);
	      				}
				        case ANIMAL_CAT:
				        {
					        format(string, sizeof(string), "** %s猎杀了一只猫 **", playername);
					        GivePlayerExp(killerid, 75, EXP_HUNT);
							ResourceData[aCat] --;
							if(ResourceData[aCat] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(13);
					    }
					    case ANIMAL_PIG:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只猪 **", playername);
					        rand = random(2);
					        CreateDropItem(ITEM_USE, 85, 1+random(3), px, py, pz, pworld);//生兽肉
							CreateDropItem(ITEM_USE, 162, 1+random(2), px, py, pz, pworld);//动物脂肪
							GivePlayerExp(killerid, 30, EXP_HUNT);
							ResourceData[aPig] --;
							if(ResourceData[aPig] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(17);
					    }
					    case ANIMAL_CHICKEN:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只鸡 **", playername);
					        rand = random(2);
					        switch(rand)
					        {
								case 0:{CreateDropItem(ITEM_USE, 84, 1, px, py, pz, pworld);}
							}
							CreateDropItem(ITEM_USE, 85, 1+random(2), px, py, pz, pworld);//兽肉
							CreateDropItem(ITEM_USE, 162, 1, px, py, pz, pworld);//动物脂肪
							GivePlayerExp(killerid, 50, EXP_HUNT);
							ResourceData[aChicken] --;
							if(ResourceData[aChicken] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(18);
					    }
					    case ANIMAL_SHEEP:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只绵羊 **", playername);
					        rand = random(2);
					        switch(rand)
					        {
								case 0:{CreateDropItem(ITEM_USE, 130, 1, px, py, pz, pworld);}
							}
							CreateDropItem(ITEM_USE, 85, 1+random(3), px, py, pz, pworld);//兽肉
							CreateDropItem(ITEM_USE, 162, 2, px, py, pz, pworld);//动物脂肪
							GivePlayerExp(killerid, 30, EXP_HUNT);
							ResourceData[aSheep] --;
						    if(ResourceData[aSheep] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(19);
					    }
					    case ANIMAL_GATOR:
					    {
					        format(string, sizeof(string), "** %s猎杀了一只鳄鱼 **", playername);
				            CreateDropItem(ITEM_USE, 85, 1+random(1), px, py, pz, pworld);//兽肉
							CreateDropItem(ITEM_USE, 158, 2, px, py, pz, pworld);//鳄鱼皮
							GivePlayerExp(killerid, 400, EXP_HUNT);
							ResourceData[aGator] --;
							if(ResourceData[aGator] > MAX_ANIMAL_SPAWN) CreateRandPosAnimal(23);
					    }
					    case ANIMAL_BIGFOOT:
					    {
					        format(string, sizeof(string), "** %s猎杀了大脚怪 **", playername);
					        CreateDropItem(ITEM_EQ, 53, 1, px, py, pz, pworld);
					        CreateDropItem(ITEM_EQ, 53, 1, px, py, pz, pworld);
					        CreateDropItem(ITEM_EQ, 53, 1, px, py, pz, pworld);
					        CreateDropItem(ITEM_SKILLPT, 6, 1, px, py, pz, pworld);
					        GivePlayerExp(killerid, 10000, EXP_HUNT);
				            SetWeather(GetGVarInt("Tiempo"));
				            DeleteGVar("BigFootSpawned");
							DeleteGVar("BigFootNPC");
							DeleteGVar("BigFootMoved");
					    }
					}
					SendRangeMessage(30.0, killerid, string, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW, COLOR_SANDYELLOW);
					RecordData[killerid][prHunt] ++;
					ApplyAnimation(npcid, "crack", "crckidle2", 4.1, 1, 0, 0, 0, 0);
					SetGVarInt("DeadNPC", 1, npcid);
					UpdatePlayerMission(killerid, 13, 7);
					SetTimerEx("DestroyDeadNPC", 2500, 0, "i", npcid);
					GivePlayerCurrentWeaponSkill(killerid, random(2));
					if(GetGVarInt("Hunting", killerid) == 1)
					{
						new hquest = GetGVarInt("HuntQ", killerid);
						if(animalid == HuntQuest[hquest][hqTarget])
						{
							SetGVarInt("Hunted", GetGVarInt("Hunted", hquest)+1, hquest);
							format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"猎杀了一头目标", playername);
							SendHuntMessage(hquest, COLOR_WHITE, string);
							UpdateHuntQuestTarget(hquest);
						}
					}
				}
			}
		}
	}
}

public FCNPC_OnTakeDamage(npcid, issuerid, Float:amount, weaponid, bodypart)
{
    new animalid,
    Float:hp = FCNPC_GetHealth(npcid),
    Float:ar = FCNPC_GetArmour(npcid),
    Float:damage = amount,
	Float:chit = 0.0;

    if(issuerid != INVALID_PLAYER_ID)
    {
        if(GetGVarInt("NPCTeam", npcid) > NTEAM_NONE)
	    {
	        if(GetGVarInt("NPCTeam", npcid) == GetGVarInt("NPCTeam", issuerid)) return 0;//相同队伍不会伤害到彼此
	    }
	    if(GetGVarInt("NPCGym", npcid) > 0)
	    {
	        if(GetGVarInt("MoveFighting", issuerid) != GetGVarInt("NPCGym", npcid)) return 0;//不会受到除正在学拳玩家以外玩家的伤害
	    }

		if(FCNPC_GetHealth(npcid) > 0.0)
		{
		    if(GetGVarInt("MSTargetNPC", npcid) > 0)
			{//任务敌人NPC
			    new mission = GetGVarInt("MSTargetNPC", npcid);
			    if(GetGVarInt("Mission", issuerid) == mission)
			    {
					if(GetGVarInt("MSRunnerNPC", npcid) == 1)
					{
					    if(GetGVarInt("NPCEnteringVeh", npcid) == 0 && FCNPC_GetVehicleID(npcid) == INVALID_VEHICLE_ID)
						{
							FCNPC_EnterVehicle(npcid, GetGVarInt("MSRunnerVeh", mission), 0, FCNPC_MOVE_TYPE_RUN);
							SetGVarInt("NPCEnteringVeh", 8, npcid);
						}
						return 0;//要让玩家在任务中追踪的NPC不会受到任何伤害
					}
				}
			}
			else if(GetGVarInt("MSAlliesNPC", npcid) > 0)
			{//任务NPC
			    new mission = GetGVarInt("MSAlliesNPC", npcid);
			    if(GetGVarInt("Mission", issuerid) == mission)
			    {
			        return 0;//当NPC为玩家友军,则免疫玩家造成的伤害
			    }
			}
			if(GetGVarInt("NPCHostile", npcid) < 1)
			{
				ApplyAnimation(npcid, "ped", "hit_gun_butt", 4.1, 0, 0, 0, 0, 0);
				if(!FCNPC_IsMoving(npcid) && GetGVarInt("Pet", npcid) == 0) NPCDamageRunaway(npcid, issuerid);
			}
			else
			{
				if(GetGVarInt("Pet", npcid) == 1)
				{
					ApplyAnimation(npcid, "ped", "hit_gun_butt", 4.1, 0, 0, 0, 0, 0);
				}
				else
				{
     				if(IsNPCArmed(npcid) && FCNPC_IsShooting(npcid))
					{//NPC射击时被击中会走位
					    static Float:px, Float:py, Float:pz;
					    switch(GetGVarInt("NPCLevel", npcid))
					    {
					        case NPC_NORMAL, NPC_NOOB:
					        {
					            FCNPC_SetSpecialAction(npcid, SPECIAL_ACTION_DUCK);
					        }
					        case NPC_GANGSTER:
					        {
					            GetPlayerPos(npcid, px, py, pz);
					            if(FCNPC_GetWeapon(npcid) == 24)
					            {
					                FCNPC_GoTo(npcid, px + float(random(2)) - float(random(2)), py + float(random(2)) - float(random(2)), pz, FCNPC_MOVE_TYPE_RUN, 0.32, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
					            }
					            else
					            {
						            switch(random(2))
						            {
						            	case 0: GetXYRightToPlayer(npcid, px, py, 2.0);
						            	case 1: GetXYLeftToPlayer(npcid, px, py, 2.0);
						            }
									FCNPC_GoTo(npcid, px, py, pz, FCNPC_MOVE_TYPE_WALK, 0.12, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
									FCNPC_SetSpecialAction(npcid, SPECIAL_ACTION_DUCK);
								}
					        }
					        case NPC_HITMAN:
					        {
					            GetPlayerPos(npcid, px, py, pz);
					            if(FCNPC_GetWeapon(npcid) == 24)
					            {
					                FCNPC_GoTo(npcid, px + float(random(3)) - float(random(3)), py + float(random(3)) - float(random(3)), pz, FCNPC_MOVE_TYPE_RUN, 0.32, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
					            }
					            else
					            {
						            switch(random(2))
						            {
						            	case 0: GetXYRightToPlayer(npcid, px, py, 2.0);
						            	case 1: GetXYLeftToPlayer(npcid, px, py, 2.0);
						            }
									FCNPC_GoTo(npcid, px, py, pz, FCNPC_MOVE_TYPE_WALK, 0.18, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
									FCNPC_SetSpecialAction(npcid, SPECIAL_ACTION_DUCK);
								}
					        }
					        case NPC_SUPER:
					        {
					            GetPlayerPos(npcid, px, py, pz);
					            if(FCNPC_GetWeapon(npcid) == 24)
					            {
					                FCNPC_GoTo(npcid, px + float(random(4)) - float(random(4)), py + float(random(4)) - float(random(4)), pz, FCNPC_MOVE_TYPE_RUN, 0.45, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
					            }
					            else
					            {
						            switch(random(2))
						            {
						            	case 0: GetXYRightToPlayer(npcid, px, py, 2.5);
						            	case 1: GetXYLeftToPlayer(npcid, px, py, 2.5);
						            }
									FCNPC_GoTo(npcid, px, py, pz, FCNPC_MOVE_TYPE_WALK, 0.22, FCNPC_MOVE_MODE_AUTO, FCNPC_MOVE_PATHFINDING_AUTO, 0.0, false);
									FCNPC_SetSpecialAction(npcid, SPECIAL_ACTION_DUCK);
								}
					        }
					    }
					}
					if(TARGET_PLAYER != GetGVarInt("NPCTType", npcid) || issuerid != GetGVarInt("NPCTID", npcid))
					{
						NPCToTarget(npcid, TARGET_PLAYER, issuerid, 1);
						if(GetGVarInt("NPCTeam", npcid) > NTEAM_NONE)
						{//同队就协助攻击
							ForEachNPC(i)
							{
							    if(FCNPC_IsShooting(i) || npcid == i) continue;
							    if(GetGVarInt("NPCTeam", npcid) == GetGVarInt("NPCTeam", i))
							    {
							        NPCToTarget(i, TARGET_PLAYER, issuerid, 1);
							    }
							}
						}
					}
					if(GetGVarInt("Obedient", npcid) == 1) DeleteGVar("Obedient", npcid);
					animalid = GetGVarInt("Animal", npcid);
					if(AnimalsList[animalid][amlType] == ANIMAL_BIGFOOT) SetPlayerWeather(issuerid, 16);//开始攻击大脚怪,风云变色
				}
			}
		}
		if(GetGVarInt("PlayerAnimal", issuerid) > 0 && GetGVarInt("PlayerAmlAttCD", issuerid) == 0)
		{
			ApplyAnimation(issuerid, "ped", "jump_launch", 4.1, 0, 0, 0, 0, 0, 1);
			SetGVarInt("PlayerAmlAttCD", 3, issuerid);
			CountDamage(issuerid, npcid, 0, bodypart, damage, chit);
			GiveHealth(issuerid, damage*0.5);
		}
		else
		{
		    CountDamage(issuerid, npcid, weaponid, bodypart, damage, chit);
		}
	}
	if(ar == 0.0){FCNPC_SetHealth(npcid, hp-(damage+chit));}
	else
	{
		if(ar-damage < 0.0)
	  	{
			FCNPC_SetArmour(npcid, 0.0);
			FCNPC_SetHealth(npcid, hp+(ar-damage)-chit);
		}
		else
		{
			FCNPC_SetArmour(npcid, ar-damage);
			FCNPC_SetHealth(npcid, hp-chit);
		}
	}
	//printf("NPCTake = issuer:%d npc:%d weapon:%d damage:%f part:%d ar:%f hp:%f", issuerid, npcid, weaponid, damage, bodypart, ar, hp);
	return 0;//return 0来使用自制伤害
}
PUBLIC:NPCTimer()
{
	new nearest, Float:nx, Float:ny, Float:nz;
	ForEachNPC(i)
	{
		if(GetGVarInt("NPCHostile", i) == -1 && GetGVarInt("Animal", i) > 0)
		{
			FCNPC_GetPosition(i, nx, ny, nz);
			FCNPC_GetClosestEntityInBetween(i, nx, ny, nz, 25.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
			if(nearest != INVALID_PLAYER_ID && GetGVarInt("Hiding", nearest) == 0)
			{
				if(!FCNPC_IsMoving(i)) NPCRunaway(i, nearest);
			}
		}
		if(GetGVarInt("NPCHostile", i) == 2 && GetGVarInt("NPCTType", i) == TARGET_NONE)
		{
			FCNPC_GetPosition(i, nx, ny, nz);
			FCNPC_GetClosestEntityInBetween(i, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
			if(nearest != INVALID_PLAYER_ID && GetGVarInt("Hiding", nearest) == 0)
			{
				NPCToTarget(i, TARGET_PLAYER, nearest, 1);
			}
		}
		else if(GetGVarInt("NPCHostile", i) == 3 && GetGVarInt("NPCTType", i) == TARGET_NONE)
		{
		    if(GetGVarInt("MSTargetNPC", i) > 0)
		    {
			    new mission = GetGVarInt("MSTargetNPC", i);
			    if(mission > 0)
			    {
					FCNPC_GetPosition(i, nx, ny, nz);
					FCNPC_GetClosestEntityInBetween(i, nx, ny, nz, 40.0, FCNPC_ENTITY_CHECK_PLAYER, nearest);
					if(nearest != INVALID_PLAYER_ID && GetGVarInt("Hiding", nearest) == 0)
					{
					    if(GetGVarInt("Mission", nearest) == mission)
						{
						    if(GetGVarInt("MSRunnerNPC", i) == 1)
							{
							    if(FCNPC_GetVehicleID(i) == INVALID_VEHICLE_ID)
							    {
								    if(GetGVarInt("NPCEnteringVeh", i) == 0)
									{
										FCNPC_EnterVehicle(i, GetGVarInt("MSRunnerVeh", mission), 0, FCNPC_MOVE_TYPE_RUN);
										SetGVarInt("NPCEnteringVeh", 8, i);
									}
									else
									{
										if(GetGVarInt("NPCEnteringVeh", i) == 1)
										{
	                                        FCNPC_PutInVehicle(i, GetGVarInt("MSRunnerVeh", mission), 0);
	                                        FCNPC_OnVehicleEntryComplete(i, GetGVarInt("MSRunnerVeh", mission), 0);
										}
										else SetGVarInt("NPCEnteringVeh", GetGVarInt("NPCEnteringVeh", i)-1, i);
									}
								}
							}
			                else NPCToTarget(i, TARGET_PLAYER, nearest, 1);
						}
					}
				}
			}
			else if(GetGVarInt("MSAlliesNPC", i) > 0)
		    {
			    new mission = GetGVarInt("MSAlliesNPC", i);
			    if(mission > 0)
			    {
			        FCNPC_GetPosition(i, nx, ny, nz);
					FCNPC_GetClosestEntityInBetween(i, nx, ny, nz, 15.0, FCNPC_ENTITY_CHECK_NPC, nearest);
					if(FCNPC_IsValid(nearest))
					{
						if(GetGVarInt("NPCTeam", nearest) != GetGVarInt("NPCTeam", i))
						{
						    NPCToTarget(i, TARGET_NPC, nearest, 1);
						}
					}
				}
			}
		}
	}
}

stock ClearChatbox(playerid, lines)
{
	if(IsPlayerConnected(playerid))
	{
		for(new i = 0; i < lines; i++)
		{
			SendClientMessage(playerid, COLOR_WHITE, " ");
		}
	}
}

stock SetPlayerInGymFight(playerid, gym)
{
	new npcid;
	switch(gym)
	{
	    case 1:
	    {
	        SetPlayerPos(playerid, 763.3002,2.4097,1001.5942);
	        SetPlayerFacingAngle(playerid, 131.4662);
	        npcid = CreateNPC(80, 0, 150.0, 0.0, 758.6476,-2.0273,1001.5942,314.5996, 5, 1, NPC_GANGSTER, 2);
	        FCNPC_SetFightingStyle(npcid, FIGHT_STYLE_BOXING);
	    }
	    case 2:
	    {
	        SetPlayerPos(playerid, 770.9904,-22.9636,1000.5859);
	        SetPlayerFacingAngle(playerid, 88.9971);
	        npcid = CreateNPC(49, 0, 150.0, 0.0, 765.6905,-23.0354,1000.5859,263.9182, 6, 1, NPC_GANGSTER, 2);
	        FCNPC_SetFightingStyle(npcid, FIGHT_STYLE_KUNGFU);
	    }
	    case 3:
	    {
	        SetPlayerPos(playerid, 768.8539,-66.6389,1001.5692);
	        SetPlayerFacingAngle(playerid, 141.7827);
	        npcid = CreateNPC(81, 0, 150.0, 0.0, 764.5065,-70.7485,1001.5692,314.3751, 7, 1, NPC_GANGSTER, 2);
	        FCNPC_SetFightingStyle(npcid, FIGHT_STYLE_KNEEHEAD);
	    }
	}
	SetGVarInt("MoveFighting", gym, playerid);
	SetGVarInt("GymFighting", 1, gym);
	SetGVarInt("GFNPC", npcid, gym);
	SetGVarInt("NPCGym", gym, npcid);
	PlayerPlayGlobalSound(playerid, 17802);
}

stock SetPlayerLeaveGymFight(playerid)
{
	static gym, npcid;
	gym = GetGVarInt("MoveFighting", playerid);
	if(gym > 0)
	{
	    npcid = GetGVarInt("GFNPC", gym);
	    DestroyNPC(npcid);
	    DeleteGVar("GymFighting", gym);
		DeleteGVar("GFNPC", gym);
	}
	DeleteGVar("MoveFighting", playerid);
}

stock PlayerWinGymFight(playerid)
{
    static gym, string[256];
	gym = GetGVarInt("MoveFighting", playerid);
	SetPlayerLeaveGymFight(playerid);
	switch(gym)
	{
	    case 1:
	    {
	        SetPlayerPos(playerid, 763.0553,4.4346,1000.7130);
	        SetPlayerFacingAngle(playerid, 266.0555);
	        SetPlayerInterior(playerid, 5);
	        SetPlayerVirtualWorld(playerid, 1);
	        if(SkillData[playerid][psBoxing] == 0)
	        {
		        SkillData[playerid][psBoxing] = 1;
			    ConfigData[playerid][cfFight] = 1;
			    SetPlayerFightingStyle(playerid, FIGHT_STYLE_BOXING);
			    format(string, sizeof(string), ""#TEXT_WHITE"你学会了拳击\n招式一览:\n"#TEXT_LIGHTRED"格挡"#TEXT_WHITE" 鼠标右键+左Shift\n"#TEXT_LIGHTRED"连续拳"#TEXT_WHITE" 鼠标右键+F键连点");
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"习得拳击", string, "确定", "");
			}
	    }
	    case 2:
	    {
	        SetPlayerPos(playerid, 771.6005,-30.2171,1000.5859);
	        SetPlayerFacingAngle(playerid, 179.8649);
	        SetPlayerInterior(playerid, 6);
	        SetPlayerVirtualWorld(playerid, 1);
	        if(SkillData[playerid][psKungFu] == 0)
	        {
	            SkillData[playerid][psKungFu] = 1;
		        ConfigData[playerid][cfFight] = 2;
		        SetPlayerFightingStyle(playerid, FIGHT_STYLE_KUNGFU);
		        format(string, sizeof(string), ""#TEXT_WHITE"你学会了空手道\n招式一览:\n"#TEXT_LIGHTRED"防御"#TEXT_WHITE" 鼠标右键+左Shift\n"#TEXT_LIGHTRED"回旋踢"#TEXT_WHITE" 鼠标右键+F键连点");
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"习得空手道", string, "确定", "");
			}
		}
	    case 3:
	    {
	        SetPlayerPos(playerid, 764.6996,-72.6778,1000.6563);
	        SetPlayerFacingAngle(playerid, 180.3465);
	        SetPlayerInterior(playerid, 7);
	        SetPlayerVirtualWorld(playerid, 1);
	        if(SkillData[playerid][psMuayThai] == 0)
	        {
	        	SkillData[playerid][psMuayThai] = 1;
		        ConfigData[playerid][cfFight] = 3;
		        SetPlayerFightingStyle(playerid, FIGHT_STYLE_KNEEHEAD);
		        format(string, sizeof(string), ""#TEXT_WHITE"你学会了泰拳\n招式一览:\n"#TEXT_LIGHTRED"承受"#TEXT_WHITE" 鼠标右键+左Shift\n"#TEXT_LIGHTRED"踢抓"#TEXT_WHITE" 鼠标右键+F键连点\n"#TEXT_LIGHTRED"膝重击"#TEXT_YELLOW" 踢抓命中后"#TEXT_WHITE"鼠标右键+F键连点");
				ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"习得泰拳", string, "确定", "");
			}
	    }
	}
}

PUBLIC:MoonLake()
{
	SendClientMessageToAll(COLOR_WATERBLUE, "** 传说中的梦月潭显灵了!赶紧前往湖畔献上10个鱼饵,将有机会钓到有价值的宝物!");
    SetGVarInt("MoonLake", 1);
    DestroyDynamic3DTextLabel(lakeinfo);
    lakeinfo = CreateDynamic3DTextLabel("【梦月潭】\n使用钓竿奉献10个鱼饵\n你的愿望便有机会实现", 0x87CEFAFF, -71.1711, -564.9479, 3.1326, 40.0);
    SetTimer("CloseLake", 900000, 0);
}

PUBLIC:CloseLake()
{
	if(GetGVarInt("MoonLake") == 1)
	{
	    SendClientMessageToAll(COLOR_WATERBLUE, "** 梦月潭已经关闭!没有钓到宝物的玩家请关注下一次消息!");
	    DestroyDynamic3DTextLabel(lakeinfo);
	    lakeinfo = CreateDynamic3DTextLabel("【梦月潭】", 0x87CEFAFF, -71.1711, -564.9479, 3.1326, 40.0);

	    DeleteGVar("MoonLake");
	}
}

stock CreateRandomModdedVehicle(Float:vx, Float:vy, Float:vz, Float:vangle, vclass=VCLASS_ALL, color1=-1, color2=-1, vtype=VTYPE_NONE, vprice=0)
{
	new vehicleid, modelid;
	if(vclass == VCLASS_ALL)
	{
		switch(random(2))
		{
		    case 0: vclass = VCLASS_LOWRIDER;
		    case 1: vclass = VCLASS_SPORT;
		    //case 2: vclass = VCLASS_TRANS;
		}
	}
	switch(vclass)
	{
	    case VCLASS_LOWRIDER:
	    {
	        switch(random(5))
	        {
	            case 0: modelid = 534;//Remington
	            case 1: modelid = 535;//Slamvan
	            case 2: modelid = 536;//Blade
	            case 3: modelid = 567;//Savanna
	            case 4: modelid = 576;//Tornado
	        }
	    }
	    case VCLASS_SPORT:
	    {
	        switch(random(6))
	        {
	            case 0: modelid = 558;//Uranus
	            case 1: modelid = 559;//Jester
	            case 2: modelid = 560;//Sultan
	            case 3: modelid = 561;//Stratum
	            case 4: modelid = 562;//Elegy
	            case 5: modelid = 565;//Flash
	        }
	    }
	}
	vehicleid = CreateVehicleEx(modelid, vx, vy, vz, vangle, color1, color2, vtype, vprice);
	//Speedo
	VehData[vehicleid][vSpeedo] = random(7);
	//Neon
	VehData[vehicleid][vNeon] = random(7);
	if(VehData[vehicleid][vNeon] > 0) SetVehicleAttachment(vehicleid, ATTACH_NEON);
	//Turbo
	VehData[vehicleid][vTurbo] = random(6);
	//Wheels
	switch(random(17))
	{
	    case 0: {}
	    case 1: AddVehicleComponent(vehicleid, 1073);
	    case 2: AddVehicleComponent(vehicleid, 1074);
	    case 3: AddVehicleComponent(vehicleid, 1075);
	    case 4: AddVehicleComponent(vehicleid, 1076);
	    case 5: AddVehicleComponent(vehicleid, 1077);
	    case 6: AddVehicleComponent(vehicleid, 1078);
	    case 7: AddVehicleComponent(vehicleid, 1079);
	    case 8: AddVehicleComponent(vehicleid, 1080);
	    case 9: AddVehicleComponent(vehicleid, 1081);
	    case 10: AddVehicleComponent(vehicleid, 1082);
	    case 11: AddVehicleComponent(vehicleid, 1083);
	    case 12: AddVehicleComponent(vehicleid, 1084);
	    case 13: AddVehicleComponent(vehicleid, 1085);
	    case 14: AddVehicleComponent(vehicleid, 1096);
	    case 15: AddVehicleComponent(vehicleid, 1097);
	    case 16: AddVehicleComponent(vehicleid, 1098);
	}
	//Nitro
	switch(random(4))
	{
	    case 0: {}
	    case 1: AddVehicleComponent(vehicleid, 1008);
	    case 2: AddVehicleComponent(vehicleid, 1009);
	    case 3: AddVehicleComponent(vehicleid, 1010);
	}
	//液压
	switch(random(2))
	{
	    case 0: {}
	    case 1: AddVehicleComponent(vehicleid, 1087);
	}
	//针对特定车辆
	switch(modelid)
	{
	    //Lowrider
	    case 534://Voodoo
	    {
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1126);
	        	case 2: AddVehicleComponent(vehicleid, 1127);
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1179);
	        	case 2: AddVehicleComponent(vehicleid, 1185);
	        }
	        switch(random(4))//Misc
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1100);
	        	case 2: AddVehicleComponent(vehicleid, 1123);
	        	case 3: AddVehicleComponent(vehicleid, 1125);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1178);
	        	case 2: AddVehicleComponent(vehicleid, 1180);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1106); AddVehicleComponent(vehicleid, 1124);}
	        	case 2: {AddVehicleComponent(vehicleid, 1101); AddVehicleComponent(vehicleid, 1122);}
	        }
	    }
	    case 535://Slamvan
	    {
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1113);
	        	case 2: AddVehicleComponent(vehicleid, 1114);
	        }
	        switch(random(2))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1115);
	        }
	        switch(random(3))//Front Bullbars
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1115);
	        	case 2: AddVehicleComponent(vehicleid, 1116);
	        }
	        switch(random(3))//Rear Bullbars
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1109);
	        	case 2: AddVehicleComponent(vehicleid, 1110);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1118); AddVehicleComponent(vehicleid, 1120);}
	        	case 2: {AddVehicleComponent(vehicleid, 1119); AddVehicleComponent(vehicleid, 1121);}
	        }
	    }
	    case 536://Blade
	    {
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1104);
	        	case 2: AddVehicleComponent(vehicleid, 1105);
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1181);
	        	case 2: AddVehicleComponent(vehicleid, 1182);
	        }
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1103);
	        	case 2: AddVehicleComponent(vehicleid, 1128);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1183);
	        	case 2: AddVehicleComponent(vehicleid, 1184);
	        }
	        switch(random(2))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1107); AddVehicleComponent(vehicleid, 1108);}
	        }
	    }
	    case 567://Savanna
	    {
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1129);
	        	case 2: AddVehicleComponent(vehicleid, 1132);
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1188);
	        	case 2: AddVehicleComponent(vehicleid, 1189);
	        }
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1130);
	        	case 2: AddVehicleComponent(vehicleid, 1131);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1186);
	        	case 2: AddVehicleComponent(vehicleid, 1187);
	        }
	        switch(random(2))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1102); AddVehicleComponent(vehicleid, 1133);}
	        }
	    }
	    case 576://Tornado
	    {
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1135);
	        	case 2: AddVehicleComponent(vehicleid, 1136);
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1190);
	        	case 2: AddVehicleComponent(vehicleid, 1191);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1192);
	        	case 2: AddVehicleComponent(vehicleid, 1193);
	        }
	        switch(random(2))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1134); AddVehicleComponent(vehicleid, 1137);}
	        }
	    }
	    //Sport Car
	    case 558://Uranus
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1088);
	        	case 2: AddVehicleComponent(vehicleid, 1091);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1089);
	        	case 2: AddVehicleComponent(vehicleid, 1092);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1163);
	        	case 2: AddVehicleComponent(vehicleid, 1164);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1090); AddVehicleComponent(vehicleid, 1094);}
	        	case 2: {AddVehicleComponent(vehicleid, 1093); AddVehicleComponent(vehicleid, 1095);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1165);
	        	case 2: AddVehicleComponent(vehicleid, 1166);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1167);
	        	case 2: AddVehicleComponent(vehicleid, 1168);
	        }
	    }
	    case 559://Jester
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1067);
	        	case 2: AddVehicleComponent(vehicleid, 1068);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1065);
	        	case 2: AddVehicleComponent(vehicleid, 1066);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1158);
	        	case 2: AddVehicleComponent(vehicleid, 1162);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1069); AddVehicleComponent(vehicleid, 1071);}
	        	case 2: {AddVehicleComponent(vehicleid, 1070); AddVehicleComponent(vehicleid, 1072);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1160);
	        	case 2: AddVehicleComponent(vehicleid, 1173);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1159);
	        	case 2: AddVehicleComponent(vehicleid, 1161);
	        }
	    }
	    case 560://Sultan
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1032);
	        	case 2: AddVehicleComponent(vehicleid, 1033);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1028);
	        	case 2: AddVehicleComponent(vehicleid, 1029);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1138);
	        	case 2: AddVehicleComponent(vehicleid, 1139);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1026); AddVehicleComponent(vehicleid, 1027);}
	        	case 2: {AddVehicleComponent(vehicleid, 1030); AddVehicleComponent(vehicleid, 1031);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1169);
	        	case 2: AddVehicleComponent(vehicleid, 1170);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1140);
	        	case 2: AddVehicleComponent(vehicleid, 1141);
	        }
	    }
	    case 561://Stratum
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1055);
	        	case 2: AddVehicleComponent(vehicleid, 1061);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1059);
	        	case 2: AddVehicleComponent(vehicleid, 1064);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1058);
	        	case 2: AddVehicleComponent(vehicleid, 1060);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1056); AddVehicleComponent(vehicleid, 1062);}
	        	case 2: {AddVehicleComponent(vehicleid, 1057); AddVehicleComponent(vehicleid, 1063);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1155);
	        	case 2: AddVehicleComponent(vehicleid, 1157);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1154);
	        	case 2: AddVehicleComponent(vehicleid, 1156);
	        }
	    }
	    case 562://Elegy
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1035);
	        	case 2: AddVehicleComponent(vehicleid, 1038);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1034);
	        	case 2: AddVehicleComponent(vehicleid, 1037);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1146);
	        	case 2: AddVehicleComponent(vehicleid, 1147);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1036); AddVehicleComponent(vehicleid, 1040);}
	        	case 2: {AddVehicleComponent(vehicleid, 1039); AddVehicleComponent(vehicleid, 1041);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1171);
	        	case 2: AddVehicleComponent(vehicleid, 1172);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1148);
	        	case 2: AddVehicleComponent(vehicleid, 1149);
	        }
	    }
	    case 565://Flash
	    {
	        switch(random(3))//Roof
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1053);
	        	case 2: AddVehicleComponent(vehicleid, 1054);
	        }
	        switch(random(3))//Exhaust
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1045);
	        	case 2: AddVehicleComponent(vehicleid, 1046);
	        }
	        switch(random(3))//Spoiler
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1049);
	        	case 2: AddVehicleComponent(vehicleid, 1050);
	        }
	        switch(random(3))//Side Skirt
	        {
	            case 0: {}
	        	case 1: {AddVehicleComponent(vehicleid, 1047); AddVehicleComponent(vehicleid, 1051);}
	        	case 2: {AddVehicleComponent(vehicleid, 1048); AddVehicleComponent(vehicleid, 1052);}
	        }
	        switch(random(3))//Front Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1152);
	        	case 2: AddVehicleComponent(vehicleid, 1153);
	        }
	        switch(random(3))//Rear Bumper
	        {
	            case 0: {}
	        	case 1: AddVehicleComponent(vehicleid, 1150);
	        	case 2: AddVehicleComponent(vehicleid, 1151);
	        }
	    }
	}
	//Paintjob
	if(color1 == -1)
	{
		switch(random(2))
		{
			case 0:
			{
			    ChangeVehicleColor(vehicleid, 1, 1);
				ChangeVehiclePaintjob(vehicleid, random(4));
			}
			case 1: ChangeVehicleColor(vehicleid, random(256), random(256));
		}
	}
	return vehicleid;
}

stock DatePlayer(playerid)
{
	new Hour, Minute, Second, Year, Month, Day, string[144];
	if(GetGVarInt("Logged", playerid) == 1)
	{
		getdate(Year, Month, Day);
		PlayerData[playerid][pLogSec] = gettime(Hour, Minute, Second);
		if(PlayerData[playerid][pLastYear] != Year || PlayerData[playerid][pLastMonth] != Month || PlayerData[playerid][pLastDate] != Day)
		{
			if(PlayerData[playerid][pLastDate] + 1 == Day)
			{//当月连续登入天数
			    PlayerData[playerid][pLogStreak] ++;
			    if(PlayerData[playerid][pLogStreak] > 4)
			    {
			        format(string, sizeof(string), "** 你本月已经连续登入 %d 天!", PlayerData[playerid][pLogStreak]);
			        SendClientMessage(playerid, COLOR_YELLOW, string);
			    }
			}
			else PlayerData[playerid][pLogStreak] = 0;

			for(new i = 0, j = MAX_GIFTS; i < j; i++)
			{
			    switch(GiftData[i][gfType])
			    {
			        case GIFT_DAILY:
					{
						if(GiftData[i][gfMonth] == 0 || GiftData[i][gfMonth] == Month)
						{
							GivePlayerGift(playerid, GiftData[i][gfTitle], GiftData[i][gfItemType], GiftData[i][gfItemID], GiftData[i][gfAmount]);
						}
					}
			        case GIFT_DATE:
			        {
			            if(GiftData[i][gfYear] == Year && GiftData[i][gfMonth] == Month && GiftData[i][gfDate] == Day)
			            {
			                GivePlayerGift(playerid, GiftData[i][gfTitle], GiftData[i][gfItemType], GiftData[i][gfItemID], GiftData[i][gfAmount]);
			            }
			        }
			        case GIFT_STREAK:
			        {
			            if(GiftData[i][gfStreak] == PlayerData[playerid][pLogStreak])
			            {
			                GivePlayerGift(playerid, GiftData[i][gfTitle], GiftData[i][gfItemType], GiftData[i][gfItemID], GiftData[i][gfAmount]);
			            }
			        }
			        default: continue;
			    }
			}
			PlayerData[playerid][pLastDate] = Day;
			PlayerData[playerid][pLastMonth] = Month;
			PlayerData[playerid][pLastYear] = Year;
		}
	}
}

stock SetVehicleLock(playerid, vehicleid, lock)
{
	new string[48];
	switch(lock)
	{
	    case 1: format(string, sizeof(string), ""#TEXT_WHITE"%s"#TEXT_RED"已上锁", GetVehicleName(GetVehicleModel(vehicleid)));
		case 2: format(string, sizeof(string), ""#TEXT_WHITE"%s"#TEXT_YELLOW"驾驶座已上锁", GetVehicleName(GetVehicleModel(vehicleid)));
		default: format(string, sizeof(string), ""#TEXT_WHITE"%s"#TEXT_FADEGREEN"已解锁", GetVehicleName(GetVehicleModel(vehicleid)));
	}
	SendClientMessage(playerid, COLOR_WHITE, string);
	VehData[vehicleid][vLock] = lock;
	PlayerPlayGlobalSound(playerid, 24600);
}

stock ResetPlayerHideTmp(playerid){
	SetGVarFloat("pTmpHP", -1.0, playerid);
	SetGVarFloat("pTmpAR", -1.0, playerid);
	SetGVarInt("pTmpBank", -1, playerid);
	SetGVarInt("pTmpLv", -1, playerid);
	SetGVarFloat("pTmpHung", -1.0, playerid);
	SetGVarFloat("pTmpStam", -1.0, playerid);
	SetGVarString("pTmpName", "_", playerid);

	SetGVarInt("pTmpSTDH", -1, playerid);
	SetGVarInt("pTmpHUD3H", -1, playerid);
	SetGVarInt("pTmpHUDBackH", -1, playerid);
	SetGVarInt("pTmpBankH", -1, playerid);
	//SetGVarInt("pTmpHABH", -1, playerid);

	SetGVarInt("pTmpLT", -1, playerid);
	SetGVarInt("pTmpDCT", -1, playerid);
	SetGVarInt("pTmpUT", -1, playerid);
	SetGVarInt("pTmpDLT", -1, playerid);

	SetGVarInt("pTmpBag", -1, playerid);
	SetGVarInt("pTmpShop", -1, playerid);
	SetGVarInt("pTmpWeb", -1, playerid);
	
	SetGVarInt("pCmdTick", -1, playerid);
	
	AFKLastUpdate[playerid] = 0;
	
	phone_opened[playerid] = 0; // phone
	
	if(phone_opened[playerid]) Phone_Close(playerid);
	
	Paused[playerid] = 0;
	//Right TD
	new gvar[24];
	for(new i; i < 5; i++)
	{
		format(gvar, 24, "pTmpRTD%d", i);
		SetGVarInt(gvar, -1, playerid);
	}
}

stock SetVehicleSpecialArm(vehicleid, type, ammo)
{
   SetGVarInt("SpeVeh", type, vehicleid);
   SetGVarInt("SpeVehA", ammo, vehicleid);
}

stock CreateSpecialVehicle(id, Float:vx, Float:vy, Float:vz, Float:vangle, color1=-1, color2=-1, vtype=VTYPE_NONE, vprice=0)
{
	new vehicleid;
	switch(id)
	{
	    case VSPECIAL_ARMORED_SULTAN:
		{
			vehicleid = CreateVehicleEx(560, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 3000.0;
			VehData[vehicleid][vHealth] = 4000.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			SetVehicleHealth(vehicleid, 4000.0);
		}
		case VSPECIAL_ARMORED_BANGER:
		{
			vehicleid = CreateVehicleEx(504, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 4000.0;
			VehData[vehicleid][vHealth] = 5000.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			SetVehicleHealth(vehicleid, 5000.0);
		}
		case VSPECIAL_STINGER_TAMPA:
		{
			vehicleid = CreateVehicleEx(549, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 500.0;
			VehData[vehicleid][vHealth] = 1500.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			VehData[vehicleid][vTireUp] = 1;
			SetVehicleHealth(vehicleid, 1500.0);
			SetVehicleSpecialArm(vehicleid, 1, 50);
		}
		case VSPECIAL_LANDMINE_BF:
		{
			vehicleid = CreateVehicleEx(424, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 0.0;
			VehData[vehicleid][vHealth] = 1000.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			SetVehicleHealth(vehicleid, 1000.0);
			SetVehicleSpecialArm(vehicleid, 2, 50);
		}
		case VSPECIAL_LANDMINE_WAYFARER:
		{
			vehicleid = CreateVehicleEx(586, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 0.0;
			VehData[vehicleid][vHealth] = 1000.0;
			SetVehicleHealth(vehicleid, 1000.0);
			SetVehicleSpecialArm(vehicleid, 2, 50);
		}
		case VSPECIAL_AIRBOMB_RAIDER:
		{
			vehicleid = CreateVehicleEx(465, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = -500.0;
			VehData[vehicleid][vHealth] = 500.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			SetVehicleHealth(vehicleid, 500.0);
			SetVehicleSpecialArm(vehicleid, 4, 100);
		}
		case VSPECIAL_ARMORED_MONSTER:
		{
			vehicleid = CreateVehicleEx(556, vx, vy, vz, vangle, color1, color2, vtype, vprice);
			VehData[vehicleid][vArmour] = 1000.0;
			VehData[vehicleid][vHealth] = 2000.0;
			VehData[vehicleid][vSpeedo] = 1+random(5);
			SetVehicleHealth(vehicleid, 2000.0);
		}
	}
	return vehicleid;
}

stock SetupArena(arena)
{
	new string[144];
	switch(arena)
	{
	    case ARENA_VEHICLE: format(string, sizeof(string), "SF的载具竞技场");
	    case ARENA_PLAYER1: format(string, sizeof(string), "LS的玩家竞技场(平等制)");
	    case ARENA_PLAYER2: format(string, sizeof(string), "LV的玩家竞技场(无限制)");
	}
	SetGVarInt("ArenaT", 60, arena);
	format(string, sizeof(string), "<<竞技场>> 位在%s即将在60秒后开始,立刻前往该竞技场一决高下吧", string);
	SendClientMessageToAll(COLOR_SKYBLUE, string);
}

stock ArenaStart(arena)
{
    new string[144];
	if(GetGVarInt("ArenaS", arena) == STATUS_FINISHED)
	{
	    if(GetGVarInt("ArenaP", arena) > 1)
	    {
	        SetGVarInt("ArenaHighest", 0, arena);
			SetGVarInt("ArenaLowest", 9999, arena);
			SetGVarInt("ArenaWinner", -1, arena);
	        switch(arena)
			{
			    case ARENA_VEHICLE: format(string, sizeof(string), "<<竞技场>> 载具竞技开始!死亡次数最少的参赛者将获得所有赌金,目前总赌金为$%d", GetGVarInt("ArenaB", arena));
			    case ARENA_PLAYER1: format(string, sizeof(string), "<<竞技场>> 玩家竞技开始!击杀数最多的参赛者将获得所有赌金,目前总赌金为$%d", GetGVarInt("ArenaB", arena));
			    case ARENA_PLAYER2: format(string, sizeof(string), "<<竞技场>> 玩家竞技开始!击杀数最多的参赛者将获得所有赌金,目前总赌金为$%d", GetGVarInt("ArenaB", arena));
			}
			SetGVarInt("ArenaS", STATUS_STARTED, arena);
			SetGVarInt("ArenaT", 300, arena);
			ForEachPlayer(p)
			{
			    if(GetGVarInt("pArena", p) == arena)
			    {
			        SetPlayerInArenaStatus(p, arena);
					SendClientMessage(p, COLOR_SKYBLUE, string);
			    }
			}
	    }
	    else
	    {
	        switch(arena)
			{
			    case ARENA_VEHICLE: format(string, sizeof(string), "位在SF的载具竞技场");
			    case ARENA_PLAYER1: format(string, sizeof(string), "位在LS的玩家竞技场(平等制)");
			    case ARENA_PLAYER2: format(string, sizeof(string), "位在LV的玩家竞技场(无限制)");
			}
			format(string, sizeof(string), "<<竞技场>> 位在%s因为参与人数不足而自动结束了", string);
			SendClientMessageToAll(COLOR_SKYBLUE, string);
	        ArenaEnd(arena, 1);
	    }
	}
}

stock ArenaResult(arena)
{
	new string[144];
    SetGVarInt("ArenaT", 0, arena);
    SetGVarInt("ArenaS", STATUS_FINISHED, arena);
    if(GetGVarInt("ArenaP", arena) > 0)
    {
	    switch(arena)
	    {
	        case ARENA_VEHICLE:
	        {
	            new winner = GetGVarInt("ArenaWinner", arena),
					lowest = GetGVarInt("ArenaLowest", arena),
					share, bet = GetGVarInt("ArenaB", arena);
	            if(winner != -1)
	            {
	                //取得拥有最低死亡数的玩家数量
	                ForEachPlayer(p1)
		            {
		                if(GetGVarInt("pArena", p1) == arena)
		                {
		                    if(GetGVarInt("pArenaDeath", p1) == lowest) share++;
		                }
		            }
		            //再依照取得最死亡数玩家的数量来平分奖赏
		            ForEachPlayer(p2)
		            {
		                if(GetGVarInt("pArena", p2) == arena)
		                {
		                    if(GetGVarInt("pArenaDeath", p2) == lowest)
		                    {
		                        PlayerLeaveArena(p2, bet/share);
		                    }
		                }
		            }
		            if(share == 1) format(string, sizeof(string), "<<竞技场>> 载具竞技结束了!最后由%s取得最低死亡数独得赌金$%d", PlayerData[winner][pName], bet);
					else format(string, sizeof(string), "<<竞技场>> 载具竞技结束了!最后有%d人取得最低死亡数平分了赌金$%d", share, bet);
		            SendArenaMessage(arena, COLOR_SKYBLUE, string);
	            }
	            else
	            {
	                format(string, sizeof(string), "<<竞技场>> 载具竞技结束了!本次竞技无结果,将返还所有赌金");
		            SendArenaMessage(arena, COLOR_SKYBLUE, string);
		            ArenaEnd(arena, 1);
                    return;
	            }
	        }
            case ARENA_PLAYER1, ARENA_PLAYER2:
	        {
	            new winner = GetGVarInt("ArenaWinner", arena),
					highest = GetGVarInt("ArenaHighest", arena),
					share, bet = GetGVarInt("ArenaB", arena);
	            if(winner != -1)
	            {
	                //取得拥有最高分数的玩家数量
	                ForEachPlayer(p1)
		            {
		                if(GetGVarInt("pArena", p1) == arena)
		                {
		                    if(GetGVarInt("pArenaScore", p1) == highest) share++;
		                }
		            }
		            //再依照取得最高分玩家的数量来平分奖赏
		            ForEachPlayer(p2)
		            {
		                if(GetGVarInt("pArena", p2) == arena)
		                {
		                    if(GetGVarInt("pArenaScore", p2) == highest)
		                    {
		                        PlayerLeaveArena(p2, bet/share);
		                    }
		                }
		            }
		            if(share == 1) format(string, sizeof(string), "<<竞技场>> 玩家竞技结束了!最后由%s取得最高分独得赌金$%d", PlayerData[winner][pName], bet);
					else format(string, sizeof(string), "<<竞技场>> 玩家竞技结束了!最后有%d人取得最高分平分了赌金$%d", share, bet);
		            SendArenaMessage(arena, COLOR_SKYBLUE, string);
	            }
	            else
	            {
	                format(string, sizeof(string), "<<竞技场>> 玩家竞技结束了!本次竞技无结果,将返还所有赌金");
		            SendArenaMessage(arena, COLOR_SKYBLUE, string);
		            ArenaEnd(arena, 1);
                    return;
	            }
	        }
	    }
	}
	ArenaEnd(arena);
}

stock ArenaEnd(arena, returnbet=0)
{
	ForEachPlayer(p)
	{
		if(GetGVarInt("pArena", p) == arena)
		{
		    if(returnbet == 1) GiveMoney(p, GetGVarInt("pArenaBet", p));
		    PlayerLeaveArena(p);
		}
	}
	for(new i = 1, j = GetVehiclePoolSize(); i <= j ; i++)
	{
	    if(GetVehicleModel(i) < 400) continue;
	    if(VehData[i][vType] == VTYPE_ARENA)
	    {
	        DeleteVehicle(i);
	    }
	}
	SetGVarInt("ArenaS", STATUS_FINISHED, arena);
	DeleteGVar("ArenaT", arena);
	DeleteGVar("ArenaP", arena);
	DeleteGVar("ArenaB", arena);
	DeleteGVar("ArenaHighest", arena);
	DeleteGVar("ArenaLowest", arena);
	DeleteGVar("ArenaWinner", arena);
}

stock PlayerJoinArena(playerid, arena, bet, teamid=NO_TEAM, arenaveh=VSPECIAL_NONE)
{
	new Float:px, Float:py, Float:pz;
	SavePlayerDatas(playerid);

	GetPlayerPos(playerid, px, py, pz);
	SetGVarFloat("ArenaX", px, playerid);
	SetGVarFloat("ArenaY", py, playerid);
	SetGVarFloat("ArenaZ", pz, playerid);

	SetGVarInt("pArena", arena, playerid);
	SetGVarInt("TempTeam", GetPlayerTeam(playerid), playerid);
    SetGVarInt("pArenaT", teamid, playerid);
    SetGVarInt("pArenaBet", bet, playerid);

    SetPlayerTeam(playerid, teamid);
    ResetPlayerWeapons(playerid);
	switch(arena)
	{
	    case ARENA_VEHICLE:
	    {
	        SetGVarInt("pArenaSpot", teamid, playerid);//纪录玩家在载具竞技场参赛的栏位(队伍)
	        SetPlayerVirtualWorld(playerid, 1);
	        SetPlayerInterior(playerid, 15);
	        SetGVarInt("pArenaDeath", 0, playerid);
			new vehicleid = CreateSpecialVehicle(arenaveh, ArenaSpawn_Vehicle[teamid][0], ArenaSpawn_Vehicle[teamid][1], ArenaSpawn_Vehicle[teamid][2], ArenaSpawn_Vehicle[teamid][3], random(256), random(256), VTYPE_ARENA);
			LinkVehicleToInterior(vehicleid, 1);
    		SetVehicleVirtualWorld(vehicleid, 15);
			PutPlayerInVehicle(playerid, vehicleid, 0);
			SetGVarInt("ArenaVVID", vehicleid, teamid);//纪录载具竞技场该队伍的载具ID;
			TogglePlayerControllableEx(playerid, 0);
			SetGVarInt("vArenaP", playerid, vehicleid);
	    }
	    case ARENA_PLAYER1, ARENA_PLAYER2:
	    {
	        SetGVarInt("pArenaScore", 0, playerid);
	    }
	}
	SetPlayerInArenaPos(playerid, arena);
	GiveMoney(playerid, -bet);
	SetGVarInt("ArenaB", GetGVarInt("ArenaB", arena)+bet, arena);
	new players = GetGVarInt("ArenaP", arena);
	players += 1;
	if(players > 0 && GetGVarInt("ArenaT", arena) == 0 && GetGVarInt("ArenaS", arena) == STATUS_FINISHED)
	{
	    SetupArena(arena);
	}
	SetGVarInt("ArenaP", players, arena);
	return 1;
}

stock SetPlayerInArenaPos(playerid, arena)
{
	switch(arena)
	{
	    case ARENA_VEHICLE:
	    {
	        new spot = GetGVarInt("pArenaSpot", playerid),
	            arenaveh = GetGVarInt("ArenaVVID", spot);
	        SetVehicleToRespawn(arenaveh);
	        PutPlayerInVehicle(playerid, arenaveh, 0);
			SetPlayerVirtualWorld(playerid, 1);
			SetPlayerInterior(playerid, 15);
			TogglePlayerControllableEx(playerid, 1);
		}
		case ARENA_PLAYER1:
	    {
	        new rand = random(sizeof(ArenaSpawn_Player));
	        SetPlayerPos(playerid, ArenaSpawn_Player[rand][0], ArenaSpawn_Player[rand][1], ArenaSpawn_Player[rand][2]);
	        SetPlayerFacingAngle(playerid, float(random(360)));
			SetPlayerVirtualWorld(playerid, 1);
			SetPlayerInterior(playerid, 14);
		}
		case ARENA_PLAYER2:
	    {
	        new rand = random(sizeof(ArenaSpawn_Player));
	        SetPlayerPos(playerid, ArenaSpawn_Player[rand][0], ArenaSpawn_Player[rand][1], ArenaSpawn_Player[rand][2]);
	        SetPlayerFacingAngle(playerid, float(random(360)));
			SetPlayerVirtualWorld(playerid, 2);
			SetPlayerInterior(playerid, 14);
		}
	}
	SetGVarFloat("PlayerX", GetGVarFloat("ArenaX", playerid), playerid),
	SetGVarFloat("PlayerY", GetGVarFloat("ArenaY", playerid), playerid),
	SetGVarFloat("PlayerZ", GetGVarFloat("ArenaZ", playerid), playerid);
	SetPlayerInArenaStatus(playerid, arena);
}


stock SetPlayerInArenaStatus(playerid, arena)
{
	ResetPlayerWeapons(playerid);
	if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
	{
		switch(arena)
		{
		    case ARENA_VEHICLE:
		    {
				SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
				SetPlayerArmour_Fix(playerid, 0.0);
				GivePlayerWeapon(playerid, 29, 20000);
			}
			case ARENA_PLAYER1:
		    {
				SetPlayerHealth_Fix(playerid, 100.0);
				SetPlayerArmour_Fix(playerid, 100.0);
				GivePlayerWeapon(playerid, 24, 20000);
				GivePlayerWeapon(playerid, 25, 20000);
				GivePlayerWeapon(playerid, 28, 20000);
				GivePlayerWeapon(playerid, 30, 20000);
			}
			case ARENA_PLAYER2:
		    {
				SetPlayerHealth_Fix(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
				SetPlayerArmour_Fix(playerid, 100.0);
				GivePlayerWeapon(playerid, 24, 20000);
				GivePlayerWeapon(playerid, 25, 20000);
				GivePlayerWeapon(playerid, 28, 20000);
				GivePlayerWeapon(playerid, 30, 20000);
			}
		}
	}
}

stock PlayerLeaveArena(playerid, prize=0)
{
	new string[144], arena = GetGVarInt("pArena", playerid),
		players = GetGVarInt("ArenaP", arena);
	if(arena > 0)
	{
	    ForEachPlayer(i)
	    {
	        if(GetGVarInt("WatchTV", i) == 4 && GetGVarInt("TVPlayer", i) == playerid && GetGVarInt("WatchArena", i) == 1)
	        {
	            TogglePlayerSpectating(i, false);
				TextDrawHideForPlayer(i, Black);
				DeleteGVar("WatchArena", i);
	        }
	    }
		switch(arena)
		{
		    case ARENA_VEHICLE:
		    {
				new spot = GetGVarInt("pArenaSpot", playerid),
				    arenaveh = GetGVarInt("ArenaVVID", spot);
				if(arenaveh > 0)
				{
					DeleteVehicle(arenaveh);
					DeleteGVar("ArenaVVID", spot);
				}
				ForEachPlayer(i)
				{
				    if(GetGVarInt("pArena", i) == ARENA_VEHICLE && GetGVarInt("pArenaSpot", playerid) == spot)
				    {//如果是同栏位的队友
				        PlayerLeaveArena(i);
				        SendClientMessage(i, COLOR_YELLOW, "** 你的队友已经离开载具竞技场,你也失去资格了");
				    }
				}
				RemovePlayerFromVehicle(playerid);
			}
			case ARENA_PLAYER1, ARENA_PLAYER2:
			{
			}
		}
		if(prize > 0)
		{
		    GiveMoney(playerid, prize);
		    Log(moneylog, INFO, "%s(%d)赢得了竞技场的赌金$%d", PlayerData[playerid][pName], PlayerData[playerid][pID], prize);
		    format(string, sizeof(string), "<<竞技场>> 你赢得了竞技场的赌金$%d!", prize);
		    SendClientMessage(playerid, COLOR_SKYBLUE, string);
		}

		SetPlayerTeam(playerid, GetGVarInt("TempTeam", playerid));
		ResetPlayerWeapons(playerid);
		GivePlayerDataWeapons(playerid);
		SetPlayerHealth(playerid, 100.0+PlayerData[playerid][pMaxHealth]);
		SetPlayerArmour(playerid, 0.0);
		SetPlayerInterior(playerid, 0);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerPos(playerid, GetGVarFloat("ArenaX", playerid), GetGVarFloat("ArenaY", playerid), GetGVarFloat("ArenaZ", playerid));
	}
	DeleteGVar("pArena", playerid);
	DeleteGVar("pArenaState", playerid);
	DeleteGVar("pArenaSpot", playerid);
	DeleteGVar("pArenaVeh", playerid);
	DeleteGVar("pArenaScore", playerid);
	DeleteGVar("pArenaDeath", playerid);
	DeleteGVar("pArenaT", playerid);
	DeleteGVar("pArenaBet", playerid);

	DeleteGVar("ArenaX", playerid),
	DeleteGVar("ArenaY", playerid),
	DeleteGVar("ArenaZ", playerid),
	DeleteGVar("PlayerX", playerid),
	DeleteGVar("PlayerY", playerid),
	DeleteGVar("PlayerZ", playerid);

	players = players-1;
	SetGVarInt("ArenaP", players, arena);
  	if(GetGVarInt("ArenaS", arena) == STATUS_STARTED)
	{
		format(string, sizeof(string), "<<竞技场>> %s提前离开竞技场了", PlayerData[playerid][pName]);
		SendArenaMessage(arena, COLOR_SKYBLUE, string);
		if(players < 2)
		{
   			SendArenaMessage(arena, COLOR_SKYBLUE, "<<竞技场>> 竞技场因为人数过少而提前结束了");
			ArenaEnd(arena);
		}
	}
	return 1;
}

stock SendArenaMessage(arena, color, const string[])
{
    ForEachPlayer(i)
	{
		if(GetGVarInt("pArena", i) == arena || (GetGVarInt("WatchTV", i) == 4 && GetGVarInt("pArena", GetGVarInt("TVPlayer", i)) == arena))
		{
			SendClientMessage(i, color, string);
		}
	}
}

stock TogglePlayerControllableEx(playerid, toggle, invulnerable=0)
{
	SetGVarInt("pInv", invulnerable, playerid);
	return TogglePlayerControllable(playerid, toggle);
}

stock SetPlayerTuneVehicle(playerid, vehicleid)
{
	if(PlayerData[playerid][pWanted] > 0) return SendClientMessage(playerid, COLOR_WHITE, "被通缉期间无法进入改装厂");
	TogglePlayerControllableEx(playerid, 0);
	SetTimerEx("PlayerTuneVehicle", 3000, 0, "id", playerid, vehicleid);
	GameTextForPlayer(playerid, "~w~进入中...", 2000, 3);
	return 1;
}

PUBLIC:PlayerTuneVehicle(playerid, vehicleid)
{
    new Float:px, Float:py, Float:pz, Float:pa;
    SetGVarInt("pTuning", 1, playerid);
	SetGVarInt("pTuneVeh", vehicleid, playerid);
	SetGVarInt("TuneVehicle", 1, playerid);
	
    GetVehiclePos(vehicleid, px, py, pz);
    GetVehicleZAngle(vehicleid, pa);
    ForEachPlayer(i)
	{
		if(GetPlayerVehicleID(i) == vehicleid)
		{
		    SetGVarFloat("PlayerX", px, i),
		    SetGVarFloat("PlayerY", py, i),
		    SetGVarFloat("PlayerZ", pz, i),
		    SetGVarFloat("PlayerA", pa, i);
		    SetGVarInt("pTmpV", vehicleid, i);
		    SetGVarInt("pSeat", GetPlayerVehicleSeat(i), i);
		}
	}
    SetVehiclePos(vehicleid, 615.8393, -1.7873, 1000.6268);
	SetVehicleZAngle(vehicleid, 91.1972);
	SetVehicleVirtualWorld(vehicleid, 100 + playerid);
	LinkVehicleToInterior(vehicleid, 1);
	ForEachPlayer(i)
	{
		if(GetGVarInt("pTmpV", i) == vehicleid)
		{
		    SetPlayerPos(i, 615.8393, -1.7873, 1000.6268);
		    SetPlayerVirtualWorld(i, 100 + playerid);
		    SetPlayerInterior(i, 1);
		    PutPlayerInVehicle(i, vehicleid, GetGVarInt("pSeat", i));
		    SetPlayerCameraPos(i, 610.5766,-5.3453,1000.9219);
			SetPlayerCameraLookAt(i, 615.8393,-1.7873,1000.6268);
			TogglePlayerControllableEx(i, 0);
			DeleteGVar("pSeat", i);
			DeleteGVar("pTmpV", i);
		}
	}
	ShowPlayerVehicleModMenu(playerid);
}

stock PlayerExitTuneVehicle(playerid, vehicleid)
{
    DeleteGVar("pTuning", playerid);
	DeleteGVar("pTuneVeh", playerid);
	ForEachPlayer(i)
	{
		if(GetPlayerVehicleID(i) == vehicleid)
		{
		    SetGVarInt("pTmpV", vehicleid, i);
		    SetGVarInt("pSeat", GetPlayerVehicleSeat(i), i);
		}
	}
    SetVehicleToRespawn(vehicleid);
	SetVehiclePos(vehicleid, GetGVarFloat("PlayerX", playerid), GetGVarFloat("PlayerY", playerid), GetGVarFloat("PlayerZ", playerid));
	SetVehicleVirtualWorld(vehicleid, 0);
	LinkVehicleToInterior(vehicleid, 0);
	ForEachPlayer(i)
	{
		if(GetGVarInt("pTmpV", i) == vehicleid)
		{
		    SetPlayerVirtualWorld(i, 0);
		    SetPlayerInterior(i, 0);
			SetPlayerPos(i, GetGVarFloat("PlayerX", i), GetGVarFloat("PlayerY", i), GetGVarFloat("PlayerZ", i));
			PutPlayerInVehicle_Fix(i, vehicleid, GetGVarInt("pSeat", i));
			SetCameraBehindPlayer(i);
			TogglePlayerControllableEx(i, 1);
		    DeleteGVar("pSeat", i),
			DeleteGVar("pTmpV", i),
			DeleteGVar("PlayerX", i),
			DeleteGVar("PlayerY", i),
			DeleteGVar("PlayerZ", i);
		}
	}
	SetVehicleZAngle(vehicleid, GetGVarFloat("PlayerA", playerid));
	if(GetGVarInt("SetVehPass", playerid) == 1 && VehData[vehicleid][vLockLv3] == 1)
	{
		ShowPlayerDialog(playerid, DIALOG_VPANEL_SETPASS, DIALOG_STYLE_INPUT, ""#TEXT_WHITE"设定车锁密码", ""#TEXT_WHITE"请输入要设定的密码", "确认", "取消");
	}
	return 1;
}

stock ShowPlayerVehicleModMenu(playerid)
{
	new vehicleid, Float:vhp;
	vehicleid = GetPlayerVehicleID(playerid);
	GetVehicleHealth(vehicleid, vhp);
    SetPlayerCameraPos(playerid, 610.5766,-5.3453,1000.9219);
	SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
	if(vhp < 1000.0 + VehData[vehicleid][vArmour])
	{
	    new string[128], cost;
	    cost = floatround(1000.0 + VehData[vehicleid][vArmour] - vhp);
	    format(string, sizeof(string), ""#TEXT_WHITE"是否要花费$%d修复载具?", cost);
	    return ShowPlayerDialog(playerid, DIALOG_VMOD_FIX, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"改装厂", string, "确认", "离开");
	}
	else
	{
		if(PlayerCanSetVehicle(playerid, vehicleid))
		{
			return ShowPlayerDialog(playerid, DIALOG_VMOD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "欢迎来到改装厂\n载具颜色($500)\n载具涂装\n载具外装\n涡轮增压\n车底灯\n时速表\n车身强化\n车锁强化\n自订车牌\n特殊改装\n解除改装", "选择", "离开");
		}
		else
		{
			return ShowPlayerDialog(playerid, DIALOG_VMOD, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"改装厂", "欢迎来到改装厂\n载具颜色($500)", "选择", "离开");
		}
	}
}

stock ShowPlayerVehicleModeList(playerid, vehicleid, part)
{
	new string[512], i, j, k;
 	SetVehicleModifications(vehicleid);
	switch(part)
	{
	    case 99:
	    {
	        SetPlayerCameraPos(playerid, 610.5766,-5.3453,1000.9219);
			SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
	        for(i = CARMODTYPE_SPOILER, j = CARMODTYPE_VENT_LEFT; i <= j; i++)
	        {
	            if(GetCompatibleTypeAmount(VehData[vehicleid][vModel], i) > 0)
		        {
		            switch(i)
		            {
		                case CARMODTYPE_WHEELS: format(string, sizeof(string), "%s轮胎\n", string);
						case CARMODTYPE_NITRO: format(string, sizeof(string), "%s氮气加速\n", string);
						case CARMODTYPE_EXHAUST: format(string, sizeof(string), "%s排气管\n", string);
						case CARMODTYPE_FRONT_BUMPER: format(string, sizeof(string), "%s前保险杆\n", string);
						case CARMODTYPE_REAR_BUMPER: format(string, sizeof(string), "%s后保险杆\n", string);
						case CARMODTYPE_SPOILER: format(string, sizeof(string), "%s尾翼\n", string);
						case CARMODTYPE_HYDRAULICS: format(string, sizeof(string), "%s液压系统\n", string);
						case CARMODTYPE_SIDESKIRT: format(string, sizeof(string), "%s侧裙\n", string);
						case CARMODTYPE_LAMPS: format(string, sizeof(string), "%s灯具\n", string);
						case CARMODTYPE_ROOF: format(string, sizeof(string), "%s车顶\n", string);
						case CARMODTYPE_HOOD: format(string, sizeof(string), "%s引擎盖\n", string);
						case CARMODTYPE_VENT_LEFT: format(string, sizeof(string), "%s左排气口\n", string);
					}
					SetGVarInt("DListID", i, k*1000+playerid);
					k++;
				}
	        }
	        if(k == 0) return ShowPlayerDialog(playerid, DIALOG_VMOD_RETURN, DIALOG_STYLE_MSGBOX, "改装厂", ""#TEXT_WHITE"没有任何适合你的载具的外装", "确认", "");
	        format(string, sizeof(string), ""#TEXT_WHITE"请选择改装部件\n%s", string);
	        ShowPlayerDialog(playerid, DIALOG_VMOD_TUNE, DIALOG_STYLE_TABLIST_HEADERS, "改装厂", string, "选择", "返回");
	    }
	    default:
	    {
	        switch(part)
		    {//设定部件视角
		        case CARMODTYPE_WHEELS:
		        {
				    SetPlayerCameraPos(playerid, 613.6910,-4.6790,1000.6219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				case CARMODTYPE_SPOILER:
				{
				    SetPlayerCameraPos(playerid, 620.4481,-1.6168,1001.4219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				case CARMODTYPE_REAR_BUMPER, CARMODTYPE_EXHAUST:
				{
				    SetPlayerCameraPos(playerid, 620.4481,-1.6168,1000.9219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				case CARMODTYPE_SIDESKIRT:
				{
				    SetPlayerCameraPos(playerid, 614.9913,-7.0993,1000.9219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				case CARMODTYPE_ROOF, CARMODTYPE_HOOD:
				{
				    SetPlayerCameraPos(playerid, 610.7393,-1.8951,1001.4219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				case CARMODTYPE_VENT_LEFT, CARMODTYPE_VENT_RIGHT, CARMODTYPE_FRONT_BUMPER, CARMODTYPE_LAMPS:
				{
				    SetPlayerCameraPos(playerid, 611.0761,-3.3700,1000.9219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
				default:
				{
				    SetPlayerCameraPos(playerid, 610.5766,-5.3453,1000.9219);
					SetPlayerCameraLookAt(playerid, 615.8393,-1.7873,1000.6268);
				}
			}
	        for(i = 0, j = sizeof(VehTune); i < j; i++)
	        {
	            if(VehTune[i][vtType] == part)
		        {
		            if(!IsComponentidCompatible(VehData[vehicleid][vModel], VehTune[i][vtID])) continue;
		            format(string, sizeof(string), "%s%s\t$%d\n", string, VehTune[i][vtName], VehTune[i][vtPrice]);
					SetGVarInt("DListID", i, k*1000+playerid);
					k++;
				}
	        }
	        if(k == 0) return ShowPlayerDialog(playerid, DIALOG_VMOD_RETURN, DIALOG_STYLE_MSGBOX, "改装厂", ""#TEXT_WHITE"没有任何适合你的载具的外装", "确认", "");
	        format(string, sizeof(string), "外装名称\t价钱\n%s", string);
	        ShowPlayerDialog(playerid, DIALOG_VMOD_TUNE_LIST, DIALOG_STYLE_TABLIST_HEADERS, "改装厂", string, "选择", "返回");
	    }
	}
	return 1;
}

stock CreateDelayedExplosion(type, delay, Float:ex, Float:ey, Float:ez, world)
{//boss用
	new object;
	switch(type)
	{
		case 0: object = CreateDynamicObject(19605, ex, ey, ez-1.0, 0.0, 0.0, 0.0, world);//tiny
		case 1: object = CreateDynamicObject(19945, ex, ey, ez-2.0, 0.0, 0.0, 0.0, world);//big
	}
	SetTimerEx("DelayedExplode", delay, false, "dfffd", type, ex, ey, ez, object);
}

PUBLIC:DelayedExplode(type, Float:ex, Float:ey, Float:ez, object)
{
	DestroyDynamicObject(object);
	switch(type)
	{
		case 0: CreateExplosion(ex, ey, ez, 12, 4.0);
		case 1: CreateExplosion(ex, ey, ez, 0, 16.0);
	}
}

stock ShowPlayerBagMenu(playerid, putitem=0)
{
	static string[256], Float:depth, Float:playerdepth, eventid, l;
	CA_IsPlayerInWater(playerid, depth, playerdepth);
	if(depth > 2.0 && playerdepth > 2.0) return SendClientMessage(playerid, COLOR_GRAD1, "** 错误: 在水中无法打开背包");
	if(!PlayerCanUseHands(playerid)) return SendClientMessage(playerid, COLOR_GRAD1, "** 错误: 你没有手打开背包");
    if(PlayerData[playerid][pJail] > 0) return SendClientMessage(playerid, COLOR_GRAD1, "** 错误: 你的背包被暂时扣押了");
	if(GetGVarInt("Eventing", playerid) == 1)
	{
		eventid = GetGVarInt("EventID", playerid);
		if(Event[eventid][evType] == EVENT_DM || Event[eventid][evType] == EVENT_TDM || Event[eventid][evType] == EVENT_VS || Event[eventid][evType] == EVENT_TVS
		|| Event[eventid][evType] == EVENT_SDM || Event[eventid][evType] == EVENT_SVS)
		{
			return SendClientMessage(playerid, COLOR_GRAD1, "**错误: 这类活动中无法打开背包");
		}
	}

    l = 0, string[0] = EOS;

    format(string, sizeof(string), "%s 武器\n", string);
	SetGVarInt("DListID", BAG_WEAPON, l*1000+playerid);
	l++;
    if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_FOOD) > 0)
    {
	    format(string, sizeof(string), "%s 食品\n", string);
		SetGVarInt("DListID", BAG_FOOD, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_USE) > 0)
    {
	    format(string, sizeof(string), "%s 消耗品\n", string);
		SetGVarInt("DListID", BAG_USE, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_EQ, IEQ_TOOL) > 0)
    {
	    format(string, sizeof(string), "%s 工具\n", string);
		SetGVarInt("DListID", BAG_TOOL, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_EQ, IEQ_3C) > 0)
    {
	    format(string, sizeof(string), "%s 电子用品\n", string);
		SetGVarInt("DListID", BAG_3C, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_TICKET) > 0)
    {
	    format(string, sizeof(string), "%s 票券\n", string);
		SetGVarInt("DListID", BAG_TICKET, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_ARMOR) + PlayerHaveTypeItem(playerid, ITEM_USE, IU_WEAPON) > 0)
    {
	    format(string, sizeof(string), "%s 护甲与弹药包\n", string);
		SetGVarInt("DListID", BAG_ARMOR_AMMO, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_MAT) > 0)
    {
	    format(string, sizeof(string), "%s 材料\n", string);
		SetGVarInt("DListID", BAG_MAT, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_FISH) > 0)
    {
	    format(string, sizeof(string), "%s 鱼\n", string);
		SetGVarInt("DListID", BAG_FISH, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_SEED) + PlayerHaveTypeItem(playerid, ITEM_USE, IU_POT) > 0)
    {
	    format(string, sizeof(string), "%s 种子与盆栽\n", string);
		SetGVarInt("DListID", BAG_PLANT, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_FMAT) + PlayerHaveTypeItem(playerid, ITEM_USE, IU_FPROD) > 0)
    {
	    format(string, sizeof(string), "%s 工厂货物\n", string);
		SetGVarInt("DListID", BAG_GOODS, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_EQ, IEQ_LICENSE) > 0)
    {
	    format(string, sizeof(string), "%s 执照与证书\n", string);
		SetGVarInt("DListID", BAG_LICENSE, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_EQ, IEQ_SKIN) > 0)
    {
	    format(string, sizeof(string), "%s 造型\n", string);
		SetGVarInt("DListID", BAG_SKIN, l*1000+playerid);
	 	l++;
	}
	if(PlayerHaveTypeItem(playerid, ITEM_USE, IU_OBJECT) > 0)
    {
	    format(string, sizeof(string), "%s 家具\n", string);
		SetGVarInt("DListID", BAG_OBJECT, l*1000+playerid);
	 	l++;
	}
	format(string, sizeof(string), ""#TEXT_WHITE"物品种类\n%s", string);
    ShowPlayerDialog(playerid, DIALOG_BAG, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"我的物品", string, "选择", "关闭");
	SetGVarInt("PutItem", putitem, playerid);
	return 1;
}

stock ShowPlayerBagList(playerid, itype1, itype2=0, itype3=0, page=0)
{
	new oBagString[256], i, k, j, l, more, n;
	SetGVarInt("DType1", itype1, playerid);
	SetGVarInt("DType2", itype2, playerid);
	SetGVarInt("DType3", itype3, playerid);
	SetGVarInt("Page", page, playerid);
	switch(itype1)
	{
		case ITEM_WEAPON:
		{
			static pgun, pammo;
			for(i = l = 0, j = 10; i < j; i++)
			{
				GetPlayerWeaponData(playerid, i, pgun, pammo);
				if(pgun != 0 && pammo != 0)
				{
					format(oBagString, sizeof(oBagString), "%s%s\t%d\n", oBagString, WeaponsList[pgun][wName], pammo);
					SetGVarInt("DListID", i, l*1000+playerid);
					l++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"背包", ""#TEXT_WHITE"你没有任何武器", "确定", "");}
			format(oBagString, sizeof(oBagString), "名称\t弹药数\n%s", oBagString);
			ShowPlayerDialog(playerid, DIALOG_BAG_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "背包", oBagString, "使用", "关闭");
		}
		case ITEM_USE:
		{
			for(i = l = 0, j = sizeof(PlayerItems_USE[]); i < j; i++)
			{
				if(PlayerItems_USE[playerid][i][iuItemID] == 0) { continue;}
				k = PlayerItems_USE[playerid][i][iuItemID];
				if(ItemsList_USE[k][iuType] == itype2 || (itype3 > 0 && ItemsList_USE[k][iuType] == itype3))
				{
					if(page*10 <= n < (page+1)*10)
					{
						format(oBagString, sizeof(oBagString), "%s%s\t%d\t%d\n",
						oBagString, ItemsList_USE[k][iuName], PlayerItems_USE[playerid][i][iuCount], ItemsList_USE[k][iuSpace]*PlayerItems_USE[playerid][i][iuCount]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					else if(l >= 10) {more = 1; break;}
					n++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"背包", ""#TEXT_WHITE"你没有任何该种类物品", "确定", "");}
			if(page > 0)
			{
				format(oBagString, sizeof(oBagString), "%s上一页\n", oBagString);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
				format(oBagString, sizeof(oBagString), "%s下一页\n", oBagString);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(oBagString, sizeof(oBagString), "名称\t数量\t占用空间\n%s", oBagString);
			ShowPlayerDialog(playerid, DIALOG_BAG_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "背包", oBagString, "选择", "关闭");
		}
		case ITEM_EQ:
		{
			for(i = l = 0, j = sizeof(PlayerItems_EQ[]); i < j; i++)
			{
				if(PlayerItems_EQ[playerid][i][ieqItemID] == 0) { continue;}
				k = PlayerItems_EQ[playerid][i][ieqItemID];
				if(ItemsList_EQ[k][ieqType] == itype2 || (itype3 > 0 && ItemsList_EQ[k][ieqType] == itype3))
				{
					if(page*10 <= n < (page+1)*10)
					{
						format(oBagString, sizeof(oBagString), "%s%s\t%d\n",
						oBagString, ItemsList_EQ[k][ieqName], ItemsList_EQ[k][ieqSpace]);
						SetGVarInt("DListID", i, l*1000+playerid);
						l++;
					}
					else if(l >= 10) {more = 1; break;}
					n++;
				}
			}
			if(l == 0){return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"背包", ""#TEXT_WHITE"你没有任何该种类物品", "确定", "");}
			if(page > 0)
			{
				format(oBagString, sizeof(oBagString), "%s上一页\n", oBagString);
				SetGVarInt("DListID", PREV_PAGE, l*1000+playerid);
				l++;
			}
			if(more == 1)
			{
				format(oBagString, sizeof(oBagString), "%s下一页\n", oBagString);
				SetGVarInt("DListID", NEXT_PAGE, l*1000+playerid);
				l++;
			}
			format(oBagString, sizeof(oBagString), "名称\t占用空间\n%s", oBagString);
			ShowPlayerDialog(playerid, DIALOG_BAG_CHECK, DIALOG_STYLE_TABLIST_HEADERS, "背包", oBagString, "选择", "关闭");
		}
	}
	return 1;
}

stock ShowPlayerBagSelectItem(playerid, type, listid)
{
	new id, string[144], ammo, dialoginfo[256];
	switch(type)
	{
		case ITEM_USE:
		{
			id = PlayerItems_USE[playerid][listid][iuItemID];
			if(PlayerItems_USE[playerid][listid][iuCount] == 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有该物品了");
			if(GetGVarInt("PutItem", playerid) == 1)
			{
				SetGVarInt("PutItemType", ITEM_USE, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的数量,每个需要%d空间", ItemsList_USE[id][iuName], ItemsList_USE[id][iuSpace]);
				ShowPlayerDialog(playerid, DIALOG_VSTORE_SAVE, DIALOG_STYLE_INPUT, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 2)
			{
				SetGVarInt("PutItemType", ITEM_USE, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的数量,每个需要%d空间", ItemsList_USE[id][iuName], ItemsList_USE[id][iuSpace]);
				ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_SAVE, DIALOG_STYLE_INPUT, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 3)
			{
				SetGVarInt("PutItemType", ITEM_USE, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的数量,每个需要%d空间", ItemsList_USE[id][iuName], ItemsList_USE[id][iuSpace]);
				ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_SAVE, DIALOG_STYLE_INPUT, "储存道具", string, "确认", "取消");
			}
			else
		    {
			    format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"已选择: \n\t "#TEXT_WHITE"%s \n"#TEXT_WHITE"目前拥有: %d\n%s",
			    ItemsList_USE[id][iuName], PlayerItems_USE[playerid][listid][iuCount], ItemsList_USE[id][iuDes]);
			    ShowPlayerDialog(playerid, DIALOG_BAG_SELECT_USE, DIALOG_STYLE_MSGBOX, "确认视窗", dialoginfo, "确认", "取消");
			}
			SetGVarInt("DDecideID", id, playerid);
		}
		case ITEM_EQ:
		{
			id = PlayerItems_EQ[playerid][listid][ieqItemID];
			if(id == 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有该物品了");
			if(GetGVarInt("PutItem", playerid) == 1)
			{
				SetGVarInt("PutItemType", ITEM_EQ, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认要在载具内放入 %s ?需要%d空间", ItemsList_EQ[id][ieqName], ItemsList_EQ[id][ieqSpace]);
				ShowPlayerDialog(playerid, DIALOG_VSTORE_SAVE, DIALOG_STYLE_MSGBOX, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 2)
			{
				SetGVarInt("PutItemType", ITEM_EQ, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认要在地产放入 %s ?需要%d空间", ItemsList_EQ[id][ieqName], ItemsList_EQ[id][ieqSpace]);
				ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_SAVE, DIALOG_STYLE_MSGBOX, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 3)
			{
				SetGVarInt("PutItemType", ITEM_EQ, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"确认要在储物间放入 %s ?需要%d空间", ItemsList_EQ[id][ieqName], ItemsList_EQ[id][ieqSpace]);
				ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_SAVE, DIALOG_STYLE_MSGBOX, "储存道具", string, "确认", "取消");
			}
			else
		    {
			    format(dialoginfo, sizeof(dialoginfo), ""#TEXT_WHITE"已选择: \n\t "#TEXT_WHITE"%s \n"#TEXT_WHITE"损坏率: %d/100\n%s",
			    ItemsList_EQ[id][ieqName], PlayerItems_EQ[playerid][listid][ieqBroke], ItemsList_EQ[id][ieqDes]);
			    ShowPlayerDialog(playerid, DIALOG_BAG_SELECT_EQ, DIALOG_STYLE_MSGBOX, "确认视窗", dialoginfo, "确认", "取消");
			}
			SetGVarInt("DDecideID", id, playerid);
		}
		case ITEM_WEAPON:
		{
		    if(GetGVarInt("RangeShooting", playerid) == 1)  return SendClientMessage(playerid, COLOR_WHITE, "射击训练中无法操作武器");
		    
			GetPlayerWeaponData(playerid, listid, id, ammo);
			if(ammo == 0) return SendClientMessage(playerid, COLOR_WHITE, "你已经没有该武器了");
			if(GetGVarInt("PutItem", playerid) == 1)
			{
				SetGVarInt("PutItemType", ITEM_WEAPON, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的弹药数,需要%d空间", WeaponsList[id][wName], WeaponsList[id][wSpace]);
				ShowPlayerDialog(playerid, DIALOG_VSTORE_SAVE, DIALOG_STYLE_INPUT, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 2)
			{
				SetGVarInt("PutItemType", ITEM_WEAPON, playerid);
				format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的弹药数,需要%d空间", WeaponsList[id][wName], WeaponsList[id][wSpace]);
				ShowPlayerDialog(playerid, DIALOG_ESTATE_STORE_SAVE, DIALOG_STYLE_INPUT, "储存道具", string, "确认", "取消");
			}
			else if(GetGVarInt("PutItem", playerid) == 3)
			{
				if(PlayerData[playerid][pDepartment] == DEPT_POLICE || PlayerData[playerid][pDepartment] == DEPT_ARMY)
				{
					DeleteGVar("PutItem", playerid);
					return SendClientMessage(playerid, COLOR_WHITE, "错误: 无法在部门储物间保存武器");
				}
				else
				{
					SetGVarInt("PutItemType", ITEM_WEAPON, playerid);
					format(string, sizeof(string), ""#TEXT_WHITE"请输入要放入 %s 的弹药数,需要%d空间", WeaponsList[id][wName], WeaponsList[id][wSpace]);
					ShowPlayerDialog(playerid, DIALOG_DEPT_STORE_SAVE, DIALOG_STYLE_INPUT, "储存武器", string, "确认", "取消");
				}
			}
			else
			{
				format(string, sizeof(string), ""#TEXT_WHITE"已选择: %s 弹药数: %d\n"#TEXT_YELLOW"丢弃%d弹药\n"#TEXT_FADERED"丢弃整个武器及弹药", WeaponsList[id][wName], ammo, WeaponsList[id][wDefaultAmmo]);
				ShowPlayerDialog(playerid, DIALOG_BAG_WEAPON, DIALOG_STYLE_TABLIST_HEADERS, "武器", string, "确认", "取消");
			}
			SetGVarInt("DDecideID", listid, playerid);
		}
	}
	DeleteGVar("PutItem", playerid);
	return 1;
}

PUBLIC:RefreshSystemHuntQuest()
{
	new diffpt, target, amount, i, j,
		level, money, exp, time;
	//删除所有由系统产生的委托
	for(i = 0, j = MAX_HUNTQUESTS; i < j; i++)
	{
	    if(HuntQuest[i][hqCreated] == 0) continue;
		if(HuntQuest[i][hqSystem] == 1 && HuntQuest[i][hqStatus] == STATUS_WAITING)
		{
			DeleteHuntQuest(i);
		}
	}
	for(i = 0, j = MAX_HUNTQUESTS; i < j; i++)
	{
		switch(random(7))
		{
			case 0: {target = 14, amount = 1+random(4), diffpt = 3*amount;}//狐狸
			case 1: {target = 15, amount = 1+random(4), diffpt = 12*amount;}//熊
			case 2: {target = 16, amount = 1+random(4), diffpt = 10*amount;}//狼
			case 3: {target = 17, amount = 1+random(4), diffpt = amount;}//猪
			case 4: {target = 18, amount = 1+random(4), diffpt = amount;}//鸡
			case 5: {target = 19, amount = 1+random(4), diffpt = amount;}//绵羊
			case 6: {target = 23, amount = 1+random(2), diffpt = 12*amount;}//鳄鱼
		}
		switch(diffpt)//计算难度
		{
			case 0..3: {level = 1, money = 50+random(100), time = 20, exp = 120;}
			case 4..9: {level = 2, money = 200+random(200), time = 30, exp = 240;}
			case 10..23: {level = 3, money = 300+random(300), time = 40, exp = 400;}
			case 24..36: {level = 4, money = 600+random(600), time = 50, exp = 800;}
			default: {level = 5, money = 1500+random(1000), time = 60, exp = 1500;}
		}
		CreaterHuntQuest(target, amount, level, money, exp, time, 1);
	}
}

stock CreaterHuntQuest(target, amount, level, money, exp, time, system=0)
{
	new id, i, j;
	for(i = 0, j = MAX_HUNTQUESTS, id = -1; i < j; i++)
	{
	    if(HuntQuest[i][hqCreated] == 0)
	    {
	        id = i;
	        break;
	    }
	}
	if(id != -1)
	{
	    HuntQuest[id][hqCreated] = 1,
	    HuntQuest[id][hqTarget] = target,
	    HuntQuest[id][hqAmount] = amount,
	    HuntQuest[id][hqLevel] = level,
	    HuntQuest[id][hqMoney] = money,
	    HuntQuest[id][hqExp] = exp,
	    HuntQuest[id][hqStatus] = STATUS_WAITING,
		HuntQuest[id][hqSystem] = system,
		HuntQuest[id][hqTime] = time,
		HuntQuest[id][hqPlayers] = 0;
	}
}

stock DeleteHuntQuest(id)
{
	HuntQuest[id][hqCreated] =
	HuntQuest[id][hqTarget] =
	HuntQuest[id][hqAmount] =
	HuntQuest[id][hqLevel] =
	HuntQuest[id][hqMoney] =
	HuntQuest[id][hqExp] =
	HuntQuest[id][hqStatus] =
	HuntQuest[id][hqSystem] =
	HuntQuest[id][hqPlayers] = 0;
}

stock GetStartedHuntQuests()
{
	new amount;
	for(new i, j = MAX_HUNTQUESTS; i < j; i++)
	{
	    if(HuntQuest[i][hqCreated] == 1)
	    {
	        if(HuntQuest[i][hqStatus] == STATUS_STARTED && HuntQuest[i][hqPlayers] < 3) amount++;
	    }
	}
	return amount;
}

stock StartHuntQuest(id)
{
	if(HuntQuest[id][hqCreated] == 1)
	{
		HuntQuest[id][hqStatus] = STATUS_STARTED;
		SetGVarInt("HQMCount", 60, id);
		SetGVarInt("Hunted", 0, id);
		HuntQuest[id][hqPlayers] = 0;
	}
}

stock PlayerJoinHuntQuest(playerid, id)
{
	new string[128];
	if(HuntQuest[id][hqStatus] == STATUS_WAITING) StartHuntQuest(id);
	HuntQuest[id][hqPlayers] ++;
	SetGVarInt("Hunting", 1, playerid);
	SetGVarInt("HuntQ", id, playerid);
	format(string, sizeof(string), ""#TEXT_BLUE"%s"#TEXT_WHITE"加入了狩猎委托,目前人数为%d/%d", PlayerData[playerid][pName], HuntQuest[id][hqPlayers], MAX_HQPLAYERS);
	SendHuntMessage(id, COLOR_WHITE, string);
	UpdateHuntQuestTarget(id);
}

stock PlayerLeaveHuntQuest(playerid, id)
{
	new string[128];
	HuntQuest[id][hqPlayers] --;
	DeleteGVar("Hunting", playerid);
	if(HuntQuest[id][hqPlayers] > 0)
	{
		format(string, sizeof(string), ""#TEXT_WHITE"%s离开了狩猎委托,目前人数为%d/%d", PlayerData[playerid][pName], HuntQuest[id][hqPlayers], MAX_HQPLAYERS);
		SendHuntMessage(id, COLOR_WHITE, string);
		UpdateHuntQuestTarget(id);
	}
	else
	{
		HuntQuestEnd(id);
	}
}

stock UpdateHuntQuestTarget(id)
{
	new string[128];
	if(GetGVarInt("Hunted", id) >= HuntQuest[id][hqAmount])
	{//达成委托目标了
		HuntQuestEnd(id);
	}
	else
	{
		format(string, sizeof(string), "寻找与狩猎"#TEXT_RED"%s"#TEXT_WHITE",目前已狩猎%d/%d头,剩余%d分钟", AnimalsList[HuntQuest[id][hqTarget]][amlName], GetGVarInt("Hunted", id), HuntQuest[id][hqAmount], HuntQuest[id][hqTime]);
		SendHuntMessage(id, COLOR_WHITE, string);
	}
}

stock SendHuntMessage(id, color, const string[])
{
    ForEachPlayer(i)
	{
	    if(GetGVarInt("Hunting", i) == 0) continue;
		if(GetGVarInt("HuntQ", i) == id)
	    {
	        SendClientMessage(i, color, string);
	    }
	}
}

stock HuntQuestEnd(id, timeout=0)
{
	new fail, string[128];
	if(GetGVarInt("Hunted", id) < HuntQuest[id][hqAmount]) fail = 1;
	if(fail == 1)
	{
		if(timeout == 1) format(string, sizeof(string), ""#TEXT_RED"未能在时限内顺利达成委托目标,委托失败");
		else format(string, sizeof(string), ""#TEXT_RED"未能顺利达成委托目标,委托失败");
	}
	else format(string, sizeof(string), ""#TEXT_WHITE"顺利达成委托目标,报酬$%d将会在整点时汇入银行帐户", HuntQuest[id][hqMoney]);

	ForEachPlayer(i)
	{
	    if(GetGVarInt("Hunting", i) == 0) continue;
		if(GetGVarInt("HuntQ", i) == id)
	    {
			if(fail == 1)
			{
				ShowPTD(i, 1, 0);
				SendClientMessage(i, COLOR_WHITE, string);
			}
			else
			{
				LimitData[i][plPayCheck] += HuntQuest[id][hqMoney];
				GivePlayerExp(i, HuntQuest[id][hqExp], EXP_JOB);
				ShowPTD(i, 1, 1);
				SendClientMessage(i, COLOR_WHITE, string);
			}
			PlayerLeaveHuntQuest(i, id);
	    }
	}
	DeleteHuntQuest(id);
}

PUBLIC:ReturnCamera(playerid)
{
	SetCameraBehindPlayer(playerid);
}

stock ShowPlayerRightTD(playerid, td)
{
	new gvar[24];
	for(new i; i < MAX_RTD; i++)
	{
		format(gvar, 24, "RTD%d", i);
		if(GetGVarInt(gvar, playerid) == td) break;
		else if(GetGVarInt(gvar, playerid) == RTD_NONE)
		{
			SetGVarInt(gvar, td, playerid);
			break;
		}
		else continue;
	}
	UpdateRightTD(playerid);
}

stock HidePlayerRightTD(playerid, td)
{
	new gvar[24], tmp[24];
	for(new i; i < MAX_RTD; i++)
	{
		format(gvar, 24, "RTD%d", i);
		if(GetGVarInt(gvar, playerid) == td)
		{
			format(tmp, 24, "pTmpRTD%d", i);
			if(GetGVarInt(tmp, playerid) != -1)
			{
				PlayerTextDrawHide(playerid, RTDBar[i][playerid]);
				PlayerTextDrawHide(playerid, RTDT[i][playerid]);
				PlayerTextDrawHide(playerid, RTDH[i][playerid]);
				SetGVarInt(tmp, -1, playerid);
			}
			DeleteGVar(gvar, playerid);
			break;
		}
		else continue;
	}
}

stock UpdateRightTD(playerid)
{
	new gvar[24], tmp[24], string[48], bar, text;
	for(new i; i < MAX_RTD; i++)
	{
		format(gvar, 24, "RTD%d", i);
		if(GetGVarInt(gvar, playerid) == RTD_NONE)
		{
			format(tmp, 24, "pTmpRTD%d", i);
			if(GetGVarInt(tmp, playerid) != -1)
			{
				PlayerTextDrawHide(playerid, RTDBar[i][playerid]);
				PlayerTextDrawHide(playerid, RTDT[i][playerid]);
				PlayerTextDrawHide(playerid, RTDH[i][playerid]);
				SetGVarInt(tmp, -1, playerid);
			}
		}
		else
		{
			switch(GetGVarInt(gvar, playerid))
			{
				case RTD_JOBSALARY:
				{
					format(string, sizeof(string), ""#TEXT_WHITE"$%d", GetGVarInt("QuestSalary", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "薪水");
					PlayerTextDrawShow(playerid, RTDT[i][playerid]);
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_JOBTIME:
				{
					format(string, sizeof(string), "%d", GetGVarInt("QuestTime", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "时间");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_MSTIME:
				{
					format(string, sizeof(string), "%d", GetGVarInt("MissionCount", GetGVarInt("Mission", playerid)));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "时间");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_RACECOUNT:
				{
					format(string, sizeof(string), "%d", GetGVarInt("RaceCPTime", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "时间");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_RACETIME:
				{
					new hours, minutes, seconds, miliseconds;
					MilisecondToHMS(GetGVarInt("RaceCPMs", playerid), hours, minutes, seconds, miliseconds);
					format(string, sizeof(string), "%02d:%02d:%02d.%03d", hours, minutes, seconds, miliseconds);
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "_");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_RACECP:
				{
					format(string, sizeof(string), "%d/%d", GetGVarInt("NowRCP", playerid), RaceData[GetGVarInt("RaceID", playerid)][rtMaxCP]);
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "红点");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GYMCOUNT:
				{
					format(string, sizeof(string), "%d", GetGVarInt("LiftCount", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "数量");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GYMBAR:
				{
					new Float:meter;
					if(GetGVarInt("GymBiking", playerid) != 0 || GetGVarInt("GymRunning", playerid) != 0)
					{
						meter = GetGVarFloat("GymMeter", playerid);
					}
					else
					{
						meter = GetGVarFloat("WeightLift", playerid);
					}
					PlayerTextDrawTextSize(playerid, RTDBar[i][playerid], 541.000000 + (62.0*meter/100), 327.500000);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "力量");
					PlayerTextDrawShow(playerid, RTDBar[i][playerid]);//刷新TD大小
					bar = 1, text = 0;//不显示消息显示进度条
				}
				case RTD_GYMDIST:
				{
					format(string, sizeof(string), "%d米", GetGVarInt("GymDistance", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "距离");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GUNTIME:
				{
					format(string, sizeof(string), "%d", GetGVarInt("RangeTime", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "时间");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GUNPT:
				{
					format(string, sizeof(string), "%d", GetGVarInt("RangePt", playerid));
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "分数");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GZDEF:
				{
					new id = SetGVarInt("ChkTurfID", playerid);
					format(string, sizeof(string), "%d", GangZone[id][gzDefense]);
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "防御度");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				case RTD_GZTIMER:
				{
					new id = SetGVarInt("ChkTurfID", playerid);
					format(string, sizeof(string), "%d", GangZone[id][gzTimer]);
					PlayerTextDrawSetString(playerid, RTDT[i][playerid], string);
					PlayerTextDrawSetString(playerid, RTDH[i][playerid], "时间");
					bar = 0, text = 1;//显示消息不显示进度条
				}
				default: continue;
			}
			format(tmp, 24, "pTmpRTD%d", i);
			if(GetGVarInt(tmp, playerid) == -1)
			{
				PlayerTextDrawShow(playerid, RTDH[i][playerid]);
				if(text == 0)  PlayerTextDrawHide(playerid, RTDT[i][playerid]);
				else PlayerTextDrawShow(playerid, RTDT[i][playerid]);
				if(bar == 0) PlayerTextDrawHide(playerid, RTDBar[i][playerid]);
				SetGVarInt(tmp, 1, playerid);
			}
		}
	}
}

stock SaveEstateFurniture(eid)
{
	new i, j, count, object;
	if(EstateData[eid][eID] > MAX_SHOP_WORLD)
	{
		for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
		{
			if(ObjectData[i][oWorld] == EstateData[eid][eID])
			{
				object = ObjectData[i][oObjectID];
				GiveEstateItem(eid, ObjectData[i][oOwner], ObjectList[object][oItemType], ObjectList[object][oItemID], 1);
				DeleteObjectData(i);
			}
		}
	}
	return count;
}

stock RemoveEstateFurniture(eid)
{
	new i, j, count, object;
	if(EstateData[eid][eID] > MAX_SHOP_WORLD)
	{
		for(i = 0, j = MAX_PLAYER_OBJECTS; i < j; i++)
		{
			if(ObjectData[i][oWorld] == EstateData[eid][eID])
			{
				object = ObjectData[i][oObjectID];
				CreateDropItem(ObjectList[object][oItemType], ObjectList[object][oItemID], 1, EstateData[eid][eX], EstateData[eid][eY], EstateData[eid][eZ], 0);
				DeleteObjectData(i);
			}
		}
	}
	return count;
}

stock ShowPlayerShopList(playerid, shoptype, shopid, instantuse=0)
{
	new i, j, k, string[512], itemid;
	switch(shoptype)
	{
		case ITEM_USE:
		{
			for(j = strlen(ShopList_USE[shopid]); i < j; i++)
			{
				if(ShopList_USE[shopid][i] == 0) continue;
				itemid = ShopList_USE[shopid][i];
				format(string, sizeof(string), "%s%s\t$%d\n", string, ItemsList_USE[itemid][iuName], ItemsList_USE[itemid][iuPrice]);
				SetGVarInt("DListID", itemid, k*1000+playerid);
				k++;
	        }
	        if(k == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买", ""#TEXT_WHITE"目前没有任何可以购买的项目", "确认", "");
	        format(string, sizeof(string), "项目\t价格\n%s", string);
	        ShowPlayerDialog(playerid, DIALOG_SHOP_LIST_USE, DIALOG_STYLE_TABLIST_HEADERS, "购买", string, "选择", "关闭");
			SetGVarInt("InstantUse", instantuse, playerid);
		}
		case ITEM_EQ:
		{
			for(j = strlen(ShopList_EQ[shopid]); i < j; i++)
			{
				if(ShopList_EQ[shopid][i] == 0) continue;
				itemid = ShopList_EQ[shopid][i];
				format(string, sizeof(string), "%s%s\t$%d\n", string, ItemsList_EQ[itemid][ieqName], ItemsList_EQ[itemid][ieqPrice]);
				SetGVarInt("DListID", itemid, k*1000+playerid);
				k++;
	        }
	        if(k == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, "购买", ""#TEXT_WHITE"目前没有任何可以购买的项目", "确认", "");
	        format(string, sizeof(string), "项目\t价格\n%s", string);
	        ShowPlayerDialog(playerid, DIALOG_SHOP_LIST_EQ, DIALOG_STYLE_TABLIST_HEADERS, "购买", string, "选择", "关闭");
		}
	}
	return 1;
}

stock PlayerBuyWebsiteVehicle(playerid, modelid, price, dlvtime=180000)
{
	if(modelid == 0) return ShowPlayerDialog(playerid, 32767, DIALOG_STYLE_MSGBOX, ""#TEXT_WHITE"购买载具", ""#TEXT_WHITE"你尚未选择任何载具", "确认", "");
	new string[256];
	format(string, sizeof(string), ""#TEXT_WHITE"请选择%s的颜色\n黑色\n"#TEXT_WHITE"白色\n"#TEXT_RED"红色\n"#TEXT_ORANGE"橘色\n"#TEXT_YELLOW"黄色\n"#TEXT_FADEGREEN"浅绿色\n"#TEXT_GREEN"绿色\
	\n"#TEXT_LIGHTBLUE"浅蓝色\n"#TEXT_BLUE"蓝色\n"#TEXT_PURPLE"紫色\n"#TEXT_PINK"粉红色\n"#TEXT_GRAD"银色", GetVehicleName(modelid));
	ShowPlayerDialog(playerid, DIALOG_WEB_BUYVEH_COLOR, DIALOG_STYLE_TABLIST_HEADERS, ""#TEXT_WHITE"购买载具", string, "确认", "关闭");
	SetGVarInt("WBVeh", modelid, playerid);
	SetGVarInt("WBPrice", price, playerid);
	SetGVarInt("WBDTime", dlvtime, playerid);//运送时间
	return 1;
}

PUBLIC:WebsiteVehicleDelivered(vehicleid, playerid, Float:vx, Float:vy, Float:vz)
{
	new string[128];
	if(VehData[vehicleid][vStatus] == VEH_UNDELIVERED)
	{
		SetVehicleVirtualWorld(vehicleid, 0);
		VehData[vehicleid][vStatus] = VEH_NORMAL;
		if(PlayerData[playerid][pID] == VehData[vehicleid][vOwner])
		{
			SetGVarInt("GPS4", 1, playerid);
	    	SetGVarFloat("GPSVehX", vx, playerid);
			SetGVarFloat("GPSVehY", vy, playerid);
			SetGVarFloat("GPSVehZ", vz, playerid);
	    	SetPlayerMapIcon(playerid, 96, vx, vy, vz, 0, COLOR_FADEYELLOW, MAPICON_GLOBAL_CHECKPOINT);
			format(string, sizeof(string), ""#TEXT_WHITE"你于网站上订购的%s已送达指定地点,请查看地图并前往领取", GetVehicleName(VehData[vehicleid][vModel]));
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
	}
}

PUBLIC:OnCheatDetected(playerid, ip_address[], type, code)
{
	if(GetGVarInt("Logged", playerid) == 0) return 1;
    if(PlayerData[playerid][pAdmin] > 0) return 1;
    
    if(type) BlockIpAddress(ip_address, 0);
    else
    {
    
		if(playerid != INVALID_PLAYER_ID && !IsPlayerNPC(playerid))
		{
	    	new string[256];
	    	new cheatname[64];
	    
	    	new Float:clienthp;
	    	new Float:clientar;
			switch(code)
			{
				case 0 .. 10:
				{
			    	if(GetGVarInt("TuneVehicle", playerid) == 1)
					{
						DeleteGVar("TuneVehicle", playerid);
						return 1;
					}
			    	if(GetGVarInt("PutJail", playerid) == 1)
					{
				    	DeleteGVar("PutJail", playerid);
						return 1;
					}
			    	format(cheatname, sizeof(cheatname), "瞬移|传送|加速|飞行");
			    	AntiCheatKickWithDesync(playerid, code);
				}
				case 12, 13:
				{
			    	GetPlayerHealth(playerid, clienthp);
			    	GetPlayerArmour(playerid, clientar);
			
			    	format(cheatname, sizeof(cheatname), "血量|护甲");
			    
					format(string, sizeof(string), " [管理员] %s[%d]嫌疑数据客户端血量/护甲[%.1f|%.1f] - 服务端血量/护甲[%.1f|%.1f]", PlayerData[playerid][pName], playerid, clienthp, clientar, GetPlayerHealth_Fix(playerid), GetPlayerArmour_Fix(playerid));
                	SendAdminMessage(COLOR_YELLOW, string);
			    
			    	SetPlayerHealth_Fix(playerid, GetPlayerHealth_Fix(playerid));
			    	SetPlayerArmour_Fix(playerid, GetPlayerArmour_Fix(playerid));
				}
				case 38:
				{
			    	format(cheatname, sizeof(cheatname), "延迟过高");
			    	SendClientMessage(playerid, COLOR_WHITE, "错误: 你的网络延迟太高了!");
			    	SendClientMessage(playerid, COLOR_WHITE, "网络延迟高容易无法正常保存账号数据!");
			    
			    	AntiCheatKickWithDesync(playerid, code);
				}
				case 15 .. 17:
				{
			    	format(cheatname, sizeof(cheatname), "刷枪/刷子弹");
					ClearAllWeapon(playerid);
					AntiCheatKickWithDesync(playerid, code);
				}
				case 18:
				{
			    	format(cheatname, sizeof(cheatname), "JETPACK");
					AntiCheatKickWithDesync(playerid, code);
				}
				case 29:
				{
			    	format(cheatname, sizeof(cheatname), "Pro-自瞄");
					AntiCheatKickWithDesync(playerid, code);
				}
				case 30:
				{
			    	format(cheatname, sizeof(cheatname), "CJ跑");
					AntiCheatKickWithDesync(playerid, code);
				}
				case 40:
				{
			    	format(cheatname, sizeof(cheatname), "沙盒");
					AntiCheatKickWithDesync(playerid, code);
				}
				case 41:
				{
			    	format(cheatname, sizeof(cheatname), "无效客户端版本");
					AntiCheatKickWithDesync(playerid, code);
				}
				case 43 .. 47:
				{
			    	format(cheatname, sizeof(cheatname), "掉线器/崩溃器");
					ClearAllWeapon(playerid);
					AntiCheatKickWithDesync(playerid, code);
				}
			}
			format(string, sizeof(string), "[反作弊] %s[%d] 检测作弊(%s)", PlayerData[playerid][pName], playerid, cheatname);
			SendAdminMessage(COLOR_YELLOW, string);
		}
	}
	return 1;
}

PUBLIC:CheckSerialData(playerid)
{
    if (IsPlayerConnected(playerid))
    {
		if (!IsPlayerNPC(playerid))
		{
    		new ipstr[16];
			GetPlayerIp(playerid, ipstr, 16);

			new query[256];

			mysql_format(MYSQL_SESSION_A, query, sizeof(query), "SELECT * FROM `client` WHERE `client_name` = '%s'", PlayerData[playerid][pName]);
			mysql_query(MYSQL_SESSION_A, query);

			if(!cache_num_rows())
			{
				SendClientMessage(playerid, -1, ""#TEXT_RED"你未启动自由国度反作弊程序|请在QQ群:920702479下载");
				SetTimerEx("KickDelay", 300, false, "d", playerid);
 			}
 			cache_get_value_name_int(0, "banned", SerialData[playerid][sBanned]);
			
 			if(SerialData[playerid][sBanned] != 0)
 			{
				SendClientMessage(playerid, -1, ""#TEXT_RED"你已被反作弊服务器删除");
				SetTimerEx("KickDelay", 300, false, "d", playerid);
 			}
			SetPlayerName(playerid, SerialData[playerid][sUsername]);
		}
	}
}

IsPlayerPausedEx(playerid) //是否挂机
{
	return (Paused[playerid]);
}

GetPausedTime(playerid) //获取挂机时间
{
	if (IsPlayerPausedEx(playerid))
	{
	    return (gettime() - AFKLastUpdate[playerid]);
	}
	return 0;
}
